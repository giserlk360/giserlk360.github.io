var Le=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var ke=Le((exports,module)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))x(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&x(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function x(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function makeMap(n,e){const t=new Set(n.split(","));return e?x=>t.has(x.toLowerCase()):x=>t.has(x)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),isModelListener=n=>n.startsWith("onUpdate:"),extend=Object.assign,remove=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(n,e)=>hasOwnProperty$1.call(n,e),isArray=Array.isArray,isMap=n=>toTypeString(n)==="[object Map]",isSet=n=>toTypeString(n)==="[object Set]",isFunction=n=>typeof n=="function",isString=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject=n=>n!==null&&typeof n=="object",isPromise=n=>(isObject(n)||isFunction(n))&&isFunction(n.then)&&isFunction(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},def=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},looseToNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(n){if(isArray(n)){const e={};for(let t=0;t<n.length;t++){const x=n[t],i=isString(x)?parseStringStyle(x):normalizeStyle(x);if(i)for(const s in i)e[s]=i[s]}return e}else if(isString(n)||isObject(n))return n}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const e={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const x=t.split(propertyDelimiterRE);x.length>1&&(e[x[0].trim()]=x[1].trim())}}),e}function normalizeClass(n){let e="";if(isString(n))e=n;else if(isArray(n))for(let t=0;t<n.length;t++){const x=normalizeClass(n[t]);x&&(e+=x+" ")}else if(isObject(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,x;for(t=0,x=this.effects.length;t<x;t++)this.effects[t].stop();for(t=0,x=this.cleanups.length;t<x;t++)this.cleanups[t]();if(this.scopes)for(t=0,x=this.scopes.length;t<x;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(n,e=activeEffectScope){e&&e.active&&e.effects.push(n)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(e,t,x,i){this.fn=e,this.trigger=t,this.scheduler=x,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(triggerComputed(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=shouldTrack,t=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=t,shouldTrack=e}}stop(){var e;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function triggerComputed(n){return n.value}function preCleanupEffect(n){n._trackId++,n._depsLength=0}function postCleanupEffect(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)cleanupDepEffect(n.deps[e],n);n.deps.length=n._depsLength}}function cleanupDepEffect(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const x=n.deps[n._depsLength];x!==e?(x&&cleanupDepEffect(x,n),n.deps[n._depsLength++]=e):n._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(n,e,t){pauseScheduling();for(const x of n.keys()){let i;x._dirtyLevel<e&&(i??(i=n.get(x)===x._trackId))&&(x._shouldSchedule||(x._shouldSchedule=x._dirtyLevel===0),x._dirtyLevel=e),x._shouldSchedule&&(i??(i=n.get(x)===x._trackId))&&(x.trigger(),(!x._runnings||x.allowRecurse)&&x._dirtyLevel!==2&&(x._shouldSchedule=!1,x.scheduler&&queueEffectSchedulers.push(x.scheduler)))}resetScheduling()}const createDep=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(n,e,t){if(shouldTrack&&activeEffect){let x=targetMap.get(n);x||targetMap.set(n,x=new Map);let i=x.get(t);i||x.set(t,i=createDep(()=>x.delete(t))),trackEffect(activeEffect,i)}}function trigger(n,e,t,x,i,s){const o=targetMap.get(n);if(!o)return;let r=[];if(e==="clear")r=[...o.values()];else if(t==="length"&&isArray(n)){const c=Number(x);o.forEach((_,l)=>{(l==="length"||!isSymbol(l)&&l>=c)&&r.push(_)})}else switch(t!==void 0&&r.push(o.get(t)),e){case"add":isArray(n)?isIntegerKey(t)&&r.push(o.get("length")):(r.push(o.get(ITERATE_KEY)),isMap(n)&&r.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(n)||(r.push(o.get(ITERATE_KEY)),isMap(n)&&r.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&r.push(o.get(ITERATE_KEY));break}pauseScheduling();for(const c of r)c&&triggerEffects(c,4);resetScheduling()}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const x=toRaw(this);for(let s=0,o=this.length;s<o;s++)track(x,"get",s+"");const i=x[e](...t);return i===-1||i===!1?x[e](...t.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){pauseTracking(),pauseScheduling();const x=toRaw(this)[e].apply(this,t);return resetScheduling(),resetTracking(),x}}),n}function hasOwnProperty(n){const e=toRaw(this);return track(e,"has",n),e.hasOwnProperty(n)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,x){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return x===(i?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(x)?e:void 0;const o=isArray(e);if(!i){if(o&&hasOwn(arrayInstrumentations,t))return Reflect.get(arrayInstrumentations,t,x);if(t==="hasOwnProperty")return hasOwnProperty}const r=Reflect.get(e,t,x);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(i||track(e,"get",t),s)?r:isRef(r)?o&&isIntegerKey(t)?r:r.value:isObject(r)?i?readonly(r):reactive(r):r}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,x,i){let s=e[t];if(!this._isShallow){const c=isReadonly(s);if(!isShallow(x)&&!isReadonly(x)&&(s=toRaw(s),x=toRaw(x)),!isArray(e)&&isRef(s)&&!isRef(x))return c?!1:(s.value=x,!0)}const o=isArray(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),r=Reflect.set(e,t,x,i);return e===toRaw(i)&&(o?hasChanged(x,s)&&trigger(e,"set",t,x):trigger(e,"add",t,x)),r}deleteProperty(e,t){const x=hasOwn(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&x&&trigger(e,"delete",t,void 0),i}has(e,t){const x=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),x}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function get(n,e,t=!1,x=!1){n=n.__v_raw;const i=toRaw(n),s=toRaw(e);t||(hasChanged(e,s)&&track(i,"get",e),track(i,"get",s));const{has:o}=getProto(i),r=x?toShallow:t?toReadonly:toReactive;if(o.call(i,e))return r(n.get(e));if(o.call(i,s))return r(n.get(s));n!==i&&n.get(e)}function has(n,e=!1){const t=this.__v_raw,x=toRaw(t),i=toRaw(n);return e||(hasChanged(n,i)&&track(x,"has",n),track(x,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function size(n,e=!1){return n=n.__v_raw,!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add(n){n=toRaw(n);const e=toRaw(this);return getProto(e).has.call(e,n)||(e.add(n),trigger(e,"add",n,n)),this}function set(n,e){e=toRaw(e);const t=toRaw(this),{has:x,get:i}=getProto(t);let s=x.call(t,n);s||(n=toRaw(n),s=x.call(t,n));const o=i.call(t,n);return t.set(n,e),s?hasChanged(e,o)&&trigger(t,"set",n,e):trigger(t,"add",n,e),this}function deleteEntry(n){const e=toRaw(this),{has:t,get:x}=getProto(e);let i=t.call(e,n);i||(n=toRaw(n),i=t.call(e,n)),x&&x.call(e,n);const s=e.delete(n);return i&&trigger(e,"delete",n,void 0),s}function clear(){const n=toRaw(this),e=n.size!==0,t=n.clear();return e&&trigger(n,"clear",void 0,void 0),t}function createForEach(n,e){return function(x,i){const s=this,o=s.__v_raw,r=toRaw(o),c=e?toShallow:n?toReadonly:toReactive;return!n&&track(r,"iterate",ITERATE_KEY),o.forEach((_,l)=>x.call(i,c(_),c(l),s))}}function createIterableMethod(n,e,t){return function(...x){const i=this.__v_raw,s=toRaw(i),o=isMap(s),r=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,_=i[n](...x),l=t?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:h,done:d}=_.next();return d?{value:h,done:d}:{value:r?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function createInstrumentations(){const n={get(s){return get(this,s)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(s){return get(this,s,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},t={get(s){return get(this,s,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},x={get(s){return get(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=createIterableMethod(s,!1,!1),t[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),x[s]=createIterableMethod(s,!0,!0)}),[n,t,e,x]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,e){const t=e?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(x,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?x:Reflect.get(hasOwn(t,i)&&i in x?t:x,i,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,e,t,x,i){if(!isObject(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=getTargetType(n);if(o===0)return n;const r=new Proxy(n,o===2?x:t);return i.set(n,r),r}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return Object.isExtensible(n)&&def(n,"__v_skip",!0),n}const toReactive=n=>isObject(n)?reactive(n):n,toReadonly=n=>isObject(n)?readonly(n):n;class ComputedRefImpl{constructor(e,t,x,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>e(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=x}get value(){const e=toRaw(this);return(!e._cacheable||e.effect.dirty)&&hasChanged(e._value,e._value=e.effect.run())&&triggerRefValue(e,4),trackRefValue(e),e.effect._dirtyLevel>=2&&triggerRefValue(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function computed$1(n,e,t=!1){let x,i;const s=isFunction(n);return s?(x=n,i=NOOP):(x=n.get,i=n.set),new ComputedRefImpl(x,i,s||!i,t)}function trackRefValue(n){var e;shouldTrack&&activeEffect&&(n=toRaw(n),trackEffect(activeEffect,(e=n.dep)!=null?e:n.dep=createDep(()=>n.dep=void 0,n instanceof ComputedRefImpl?n:void 0)))}function triggerRefValue(n,e=4,t){n=toRaw(n);const x=n.dep;x&&triggerEffects(x,e)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function ref(n){return createRef(n,!1)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this,4))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,e,t)=>unref(Reflect.get(n,e,t)),set:(n,e,t,x)=>{const i=n[e];return isRef(i)&&!isRef(t)?(i.value=t,!0):Reflect.set(n,e,t,x)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(n,...e){pauseTracking();const t=stack.length?stack[stack.length-1].component:null,x=t&&t.appContext.config.warnHandler,i=getComponentTrace();if(x)callWithErrorHandling(x,t,11,[n+e.map(s=>{var o,r;return(r=(o=s.toString)==null?void 0:o.call(s))!=null?r:JSON.stringify(s)}).join(""),t&&t.proxy,i.map(({vnode:s})=>`at <${formatComponentName(t,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${n}`,...e];i.length&&s.push(`
`,...formatTrace(i)),console.warn(...s)}resetTracking()}function getComponentTrace(){let n=stack[stack.length-1];if(!n)return[];const e=[];for(;n;){const t=e[0];t&&t.vnode===n?t.recurseCount++:e.push({vnode:n,recurseCount:0});const x=n.component&&n.component.parent;n=x&&x.vnode}return e}function formatTrace(n){const e=[];return n.forEach((t,x)=>{e.push(...x===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:n,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",x=n.component?n.component.parent==null:!1,i=` at <${formatComponentName(n.component,n.type,x)}`,s=">"+t;return n.props?[i,...formatProps(n.props),s]:[i+s]}function formatProps(n){const e=[],t=Object.keys(n);return t.slice(0,3).forEach(x=>{e.push(...formatProp(x,n[x]))}),t.length>3&&e.push(" ..."),e}function formatProp(n,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${n}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${n}=${e}`]:isRef(e)?(e=formatProp(n,toRaw(e.value),!0),t?e:[`${n}=Ref<`,e,">"]):isFunction(e)?[`${n}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${n}=`,e])}function callWithErrorHandling(n,e,t,x){try{return x?n(...x):n()}catch(i){handleError(i,e,t)}}function callWithAsyncErrorHandling(n,e,t,x){if(isFunction(n)){const s=callWithErrorHandling(n,e,t,x);return s&&isPromise(s)&&s.catch(o=>{handleError(o,e,t)}),s}const i=[];for(let s=0;s<n.length;s++)i.push(callWithAsyncErrorHandling(n[s],e,t,x));return i}function handleError(n,e,t,x=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,r=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const _=s.ec;if(_){for(let l=0;l<_.length;l++)if(_[l](n,o,r)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){callWithErrorHandling(c,null,10,[n,o,r]);return}}logError(n,t,i,x)}function logError(n,e,t,x=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex(n){let e=flushIndex+1,t=queue.length;for(;e<t;){const x=e+t>>>1,i=queue[x],s=getId(i);s<n||s===n&&i.pre?e=x+1:t=x}return e}function queueJob(n){(!queue.length||!queue.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&(n.id==null?queue.push(n):queue.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const e=queue.indexOf(n);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(n){isArray(n)?pendingPostFlushCbs.push(...n):(!activePostFlushCbs||!activePostFlushCbs.includes(n,n.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(n),queueFlush()}function flushPreFlushCbs(n,e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const x=queue[t];if(x&&x.pre){if(n&&x.id!==n.uid)continue;queue.splice(t,1),t--,x()}}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,x)=>getId(t)-getId(x));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?1/0:n.id,comparator=(n,e)=>{const t=getId(n)-getId(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function flushJobs(n){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(n,e,...t){if(n.isUnmounted)return;const x=n.vnode.props||EMPTY_OBJ;let i=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in x){const l=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=x[l]||EMPTY_OBJ;d&&(i=t.map(u=>isString(u)?u.trim():u)),h&&(i=t.map(looseToNumber))}let r,c=x[r=toHandlerKey(e)]||x[r=toHandlerKey(camelize(e))];!c&&s&&(c=x[r=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,n,6,i);const _=x[r+"Once"];if(_){if(!n.emitted)n.emitted={};else if(n.emitted[r])return;n.emitted[r]=!0,callWithAsyncErrorHandling(_,n,6,i)}}function normalizeEmitsOptions(n,e,t=!1){const x=e.emitsCache,i=x.get(n);if(i!==void 0)return i;const s=n.emits;let o={},r=!1;if(!isFunction(n)){const c=_=>{const l=normalizeEmitsOptions(_,e,!0);l&&(r=!0,extend(o,l))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!r?(isObject(n)&&x.set(n,null),null):(isArray(s)?s.forEach(c=>o[c]=null):extend(o,s),isObject(n)&&x.set(n,o),o)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(n,e[0].toLowerCase()+e.slice(1))||hasOwn(n,hyphenate(e))||hasOwn(n,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function withCtx(n,e=currentRenderingInstance,t){if(!e||n._n)return n;const x=(...i)=>{x._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e);let o;try{o=n(...i)}finally{setCurrentRenderingInstance(s),x._d&&setBlockTracking(1)}return o};return x._n=!0,x._c=!0,x._d=!0,x}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:t,proxy:x,withProxy:i,props:s,propsOptions:[o],slots:r,attrs:c,emit:_,render:l,renderCache:h,data:d,setupState:u,ctx:m,inheritAttrs:f}=n;let g,b;const y=setCurrentRenderingInstance(n);try{if(t.shapeFlag&4){const v=i||x,M=v;g=normalizeVNode(l.call(M,v,h,s,u,d,m)),b=c}else{const v=e;g=normalizeVNode(v.length>1?v(s,{attrs:c,slots:r,emit:_}):v(s,null)),b=e.props?c:getFunctionalFallthrough(c)}}catch(v){blockStack.length=0,handleError(v,n,1),g=createVNode(Comment)}let C=g;if(b&&f!==!1){const v=Object.keys(b),{shapeFlag:M}=C;v.length&&M&7&&(o&&v.some(isModelListener)&&(b=filterModelListeners(b,o)),C=cloneVNode(C,b))}return t.dirs&&(C=cloneVNode(C),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&(C.transition=t.transition),g=C,setCurrentRenderingInstance(y),g}const getFunctionalFallthrough=n=>{let e;for(const t in n)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=n[t]);return e},filterModelListeners=(n,e)=>{const t={};for(const x in n)(!isModelListener(x)||!(x.slice(9)in e))&&(t[x]=n[x]);return t};function shouldUpdateComponent(n,e,t){const{props:x,children:i,component:s}=n,{props:o,children:r,patchFlag:c}=e,_=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return x?hasPropsChanged(x,o,_):!!o;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(o[d]!==x[d]&&!isEmitListener(_,d))return!0}}}else return(i||r)&&(!r||!r.$stable)?!0:x===o?!1:x?o?hasPropsChanged(x,o,_):!0:!!o;return!1}function hasPropsChanged(n,e,t){const x=Object.keys(e);if(x.length!==Object.keys(n).length)return!0;for(let i=0;i<x.length;i++){const s=x[i];if(e[s]!==n[s]&&!isEmitListener(t,s))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},t){for(;e;){const x=e.subTree;if(x.suspense&&x.suspense.activeBranch===n&&(x.el=n.el),x===n)(n=e.vnode).el=t,e=e.parent;else break}}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),INITIAL_WATCHER_VALUE={};function watch(n,e,t){return doWatch(n,e,t)}function doWatch(n,e,{immediate:t,deep:x,flush:i,once:s,onTrack:o,onTrigger:r}=EMPTY_OBJ){if(e&&s){const w=e;e=(...H)=>{w(...H),M()}}const c=currentInstance,_=w=>x===!0?w:traverse(w,x===!1?1:void 0);let l,h=!1,d=!1;if(isRef(n)?(l=()=>n.value,h=isShallow(n)):isReactive(n)?(l=()=>_(n),h=!0):isArray(n)?(d=!0,h=n.some(w=>isReactive(w)||isShallow(w)),l=()=>n.map(w=>{if(isRef(w))return w.value;if(isReactive(w))return _(w);if(isFunction(w))return callWithErrorHandling(w,c,2)})):isFunction(n)?e?l=()=>callWithErrorHandling(n,c,2):l=()=>(u&&u(),callWithAsyncErrorHandling(n,c,3,[m])):l=NOOP,e&&x){const w=l;l=()=>traverse(w())}let u,m=w=>{u=C.onStop=()=>{callWithErrorHandling(w,c,4),u=C.onStop=void 0}},f;if(isInSSRComponentSetup)if(m=NOOP,e?t&&callWithAsyncErrorHandling(e,c,3,[l(),d?[]:void 0,m]):l(),i==="sync"){const w=useSSRContext();f=w.__watcherHandles||(w.__watcherHandles=[])}else return NOOP;let g=d?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const b=()=>{if(!(!C.active||!C.dirty))if(e){const w=C.run();(x||h||(d?w.some((H,D)=>hasChanged(H,g[D])):hasChanged(w,g)))&&(u&&u(),callWithAsyncErrorHandling(e,c,3,[w,g===INITIAL_WATCHER_VALUE?void 0:d&&g[0]===INITIAL_WATCHER_VALUE?[]:g,m]),g=w)}else C.run()};b.allowRecurse=!!e;let y;i==="sync"?y=b:i==="post"?y=()=>queuePostRenderEffect(b,c&&c.suspense):(b.pre=!0,c&&(b.id=c.uid),y=()=>queueJob(b));const C=new ReactiveEffect(l,NOOP,y),v=getCurrentScope(),M=()=>{C.stop(),v&&remove(v.effects,C)};return e?t?b():g=C.run():i==="post"?queuePostRenderEffect(C.run.bind(C),c&&c.suspense):C.run(),f&&f.push(M),M}function instanceWatch(n,e,t){const x=this.proxy,i=isString(n)?n.includes(".")?createPathGetter(x,n):()=>x[n]:n.bind(x,x);let s;isFunction(e)?s=e:(s=e.handler,t=e);const o=setCurrentInstance(this),r=doWatch(i,s.bind(x),t);return o(),r}function createPathGetter(n,e){const t=e.split(".");return()=>{let x=n;for(let i=0;i<t.length&&x;i++)x=x[t[i]];return x}}function traverse(n,e,t=0,x){if(!isObject(n)||n.__v_skip)return n;if(e&&e>0){if(t>=e)return n;t++}if(x=x||new Set,x.has(n))return n;if(x.add(n),isRef(n))traverse(n.value,e,t,x);else if(isArray(n))for(let i=0;i<n.length;i++)traverse(n[i],e,t,x);else if(isSet(n)||isMap(n))n.forEach(i=>{traverse(i,e,t,x)});else if(isPlainObject(n))for(const i in n)traverse(n[i],e,t,x);return n}function invokeDirectiveHook(n,e,t,x){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const r=i[o];s&&(r.oldValue=s[o].value);let c=r.dir[x];c&&(pauseTracking(),callWithAsyncErrorHandling(c,t,8,[n.el,r,n,e]),resetTracking())}}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(n,e){return isFunction(n)?extend({name:n.name},e,{setup:n}):n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,t=currentInstance){const x=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(injectHook(e,x,t),t){let i=t.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(x,e,t,i),i=i.parent}}function injectToKeepAliveRoot(n,e,t,x){const i=injectHook(e,n,x,!0);onUnmounted(()=>{remove(x[e],i)},t)}function injectHook(n,e,t=currentInstance,x=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;pauseTracking();const r=setCurrentInstance(t),c=callWithAsyncErrorHandling(e,t,n,o);return r(),resetTracking(),c});return x?i.unshift(s):i.push(s),s}}const createHook=n=>(e,t=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...x)=>e(...x),t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}const getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,queueJob(n.update)}),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,e)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn(n,e),PublicInstanceProxyHandlers={get({_:n},e){const{ctx:t,setupState:x,data:i,props:s,accessCache:o,type:r,appContext:c}=n;let _;if(e[0]!=="$"){const u=o[e];if(u!==void 0)switch(u){case 1:return x[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(hasSetupBinding(x,e))return o[e]=1,x[e];if(i!==EMPTY_OBJ&&hasOwn(i,e))return o[e]=2,i[e];if((_=n.propsOptions[0])&&hasOwn(_,e))return o[e]=3,s[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];shouldCacheAccess&&(o[e]=0)}}const l=publicPropertiesMap[e];let h,d;if(l)return e==="$attrs"&&track(n,"get",e),l(n);if((h=r.__cssModules)&&(h=h[e]))return h;if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];if(d=c.config.globalProperties,hasOwn(d,e))return d[e]},set({_:n},e,t){const{data:x,setupState:i,ctx:s}=n;return hasSetupBinding(i,e)?(i[e]=t,!0):x!==EMPTY_OBJ&&hasOwn(x,e)?(x[e]=t,!0):hasOwn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:x,appContext:i,propsOptions:s}},o){let r;return!!t[o]||n!==EMPTY_OBJ&&hasOwn(n,o)||hasSetupBinding(e,o)||(r=s[0])&&hasOwn(r,o)||hasOwn(x,o)||hasOwn(publicPropertiesMap,o)||hasOwn(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:hasOwn(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function normalizePropsOrEmits(n){return isArray(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),t=n.proxy,x=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:r,provide:c,inject:_,created:l,beforeMount:h,mounted:d,beforeUpdate:u,updated:m,activated:f,deactivated:g,beforeDestroy:b,beforeUnmount:y,destroyed:C,unmounted:v,render:M,renderTracked:w,renderTriggered:H,errorCaptured:D,serverPrefetch:F,expose:L,inheritAttrs:B,components:Y,directives:j,filters:J}=e;if(_&&resolveInjections(_,x,null),o)for(const xe in o){const K=o[xe];isFunction(K)&&(x[xe]=K.bind(t))}if(i){const xe=i.call(t,t);isObject(xe)&&(n.data=reactive(xe))}if(shouldCacheAccess=!0,s)for(const xe in s){const K=s[xe],le=isFunction(K)?K.bind(t,t):isFunction(K.get)?K.get.bind(t,t):NOOP,ce=!isFunction(K)&&isFunction(K.set)?K.set.bind(t):NOOP,_e=computed({get:le,set:ce});Object.defineProperty(x,xe,{enumerable:!0,configurable:!0,get:()=>_e.value,set:ne=>_e.value=ne})}if(r)for(const xe in r)createWatcher(r[xe],x,t,xe);if(c){const xe=isFunction(c)?c.call(t):c;Reflect.ownKeys(xe).forEach(K=>{provide(K,xe[K])})}l&&callHook(l,n,"c");function X(xe,K){isArray(K)?K.forEach(le=>xe(le.bind(t))):K&&xe(K.bind(t))}if(X(onBeforeMount,h),X(onMounted,d),X(onBeforeUpdate,u),X(onUpdated,m),X(onActivated,f),X(onDeactivated,g),X(onErrorCaptured,D),X(onRenderTracked,w),X(onRenderTriggered,H),X(onBeforeUnmount,y),X(onUnmounted,v),X(onServerPrefetch,F),isArray(L))if(L.length){const xe=n.exposed||(n.exposed={});L.forEach(K=>{Object.defineProperty(xe,K,{get:()=>t[K],set:le=>t[K]=le})})}else n.exposed||(n.exposed={});M&&n.render===NOOP&&(n.render=M),B!=null&&(n.inheritAttrs=B),Y&&(n.components=Y),j&&(n.directives=j)}function resolveInjections(n,e,t=NOOP){isArray(n)&&(n=normalizeInject(n));for(const x in n){const i=n[x];let s;isObject(i)?"default"in i?s=inject(i.from||x,i.default,!0):s=inject(i.from||x):s=inject(i),isRef(s)?Object.defineProperty(e,x,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[x]=s}}function callHook(n,e,t){callWithAsyncErrorHandling(isArray(n)?n.map(x=>x.bind(e.proxy)):n.bind(e.proxy),e,t)}function createWatcher(n,e,t,x){const i=x.includes(".")?createPathGetter(t,x):()=>t[x];if(isString(n)){const s=e[n];isFunction(s)&&watch(i,s)}else if(isFunction(n))watch(i,n.bind(t));else if(isObject(n))if(isArray(n))n.forEach(s=>createWatcher(s,e,t,x));else{const s=isFunction(n.handler)?n.handler.bind(t):e[n.handler];isFunction(s)&&watch(i,s,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:t,extends:x}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,r=s.get(e);let c;return r?c=r:!i.length&&!t&&!x?c=e:(c={},i.length&&i.forEach(_=>mergeOptions(c,_,o,!0)),mergeOptions(c,e,o)),isObject(e)&&s.set(e,c),c}function mergeOptions(n,e,t,x=!1){const{mixins:i,extends:s}=e;s&&mergeOptions(n,s,t,!0),i&&i.forEach(o=>mergeOptions(n,o,t,!0));for(const o in e)if(!(x&&o==="expose")){const r=internalOptionMergeStrats[o]||t&&t[o];n[o]=r?r(n[o],e[o]):e[o]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend(isFunction(n)?n.call(this,this):n,isFunction(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend(Object.create(null),n,e):e}function mergeEmitsOrPropsOptions(n,e){return n?isArray(n)&&isArray(e)?[...new Set([...n,...e])]:extend(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const t=extend(Object.create(null),n);for(const x in e)t[x]=mergeAsArray(n[x],e[x]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,e){return function(x,i=null){isFunction(x)||(x=extend({},x)),i!=null&&!isObject(i)&&(i=null);const s=createAppContext(),o=new WeakSet;let r=!1;const c=s.app={_uid:uid$1++,_component:x,_props:i,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(_){},use(_,...l){return o.has(_)||(_&&isFunction(_.install)?(o.add(_),_.install(c,...l)):isFunction(_)&&(o.add(_),_(c,...l))),c},mixin(_){return s.mixins.includes(_)||s.mixins.push(_),c},component(_,l){return l?(s.components[_]=l,c):s.components[_]},directive(_,l){return l?(s.directives[_]=l,c):s.directives[_]},mount(_,l,h){if(!r){const d=createVNode(x,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),l&&e?e(d,_):n(d,_,h),r=!0,c._container=_,_.__vue_app__=c,getExposeProxy(d.component)||d.component.proxy}},unmount(){r&&(n(null,c._container),delete c._container.__vue_app__)},provide(_,l){return s.provides[_]=l,c},runWithContext(_){const l=currentApp;currentApp=c;try{return _()}finally{currentApp=l}}};return c}}let currentApp=null;function provide(n,e){if(currentInstance){let t=currentInstance.provides;const x=currentInstance.parent&&currentInstance.parent.provides;x===t&&(t=currentInstance.provides=Object.create(x)),t[n]=e}}function inject(n,e,t=!1){const x=currentInstance||currentRenderingInstance;if(x||currentApp){const i=x?x.parent==null?x.vnode.appContext&&x.vnode.appContext.provides:x.parent.provides:currentApp._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&isFunction(e)?e.call(x&&x.proxy):e}}function initProps(n,e,t,x=!1){const i={},s={};def(s,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=x?i:shallowReactive(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function updateProps(n,e,t,x){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,r=toRaw(i),[c]=n.propsOptions;let _=!1;if((x||o>0)&&!(o&16)){if(o&8){const l=n.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(isEmitListener(n.emitsOptions,d))continue;const u=e[d];if(c)if(hasOwn(s,d))u!==s[d]&&(s[d]=u,_=!0);else{const m=camelize(d);i[m]=resolvePropValue(c,r,m,u,n,!1)}else u!==s[d]&&(s[d]=u,_=!0)}}}else{setFullProps(n,e,i,s)&&(_=!0);let l;for(const h in r)(!e||!hasOwn(e,h)&&((l=hyphenate(h))===h||!hasOwn(e,l)))&&(c?t&&(t[h]!==void 0||t[l]!==void 0)&&(i[h]=resolvePropValue(c,r,h,void 0,n,!0)):delete i[h]);if(s!==r)for(const h in s)(!e||!hasOwn(e,h))&&(delete s[h],_=!0)}_&&trigger(n,"set","$attrs")}function setFullProps(n,e,t,x){const[i,s]=n.propsOptions;let o=!1,r;if(e)for(let c in e){if(isReservedProp(c))continue;const _=e[c];let l;i&&hasOwn(i,l=camelize(c))?!s||!s.includes(l)?t[l]=_:(r||(r={}))[l]=_:isEmitListener(n.emitsOptions,c)||(!(c in x)||_!==x[c])&&(x[c]=_,o=!0)}if(s){const c=toRaw(t),_=r||EMPTY_OBJ;for(let l=0;l<s.length;l++){const h=s[l];t[h]=resolvePropValue(i,c,h,_[h],n,!hasOwn(_,h))}}return o}function resolvePropValue(n,e,t,x,i,s){const o=n[t];if(o!=null){const r=hasOwn(o,"default");if(r&&x===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction(c)){const{propsDefaults:_}=i;if(t in _)x=_[t];else{const l=setCurrentInstance(i);x=_[t]=c.call(null,e),l()}}else x=c}o[0]&&(s&&!r?x=!1:o[1]&&(x===""||x===hyphenate(t))&&(x=!0))}return x}function normalizePropsOptions(n,e,t=!1){const x=e.propsCache,i=x.get(n);if(i)return i;const s=n.props,o={},r=[];let c=!1;if(!isFunction(n)){const l=h=>{c=!0;const[d,u]=normalizePropsOptions(h,e,!0);extend(o,d),u&&r.push(...u)};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}if(!s&&!c)return isObject(n)&&x.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray(s))for(let l=0;l<s.length;l++){const h=camelize(s[l]);validatePropName(h)&&(o[h]=EMPTY_OBJ)}else if(s)for(const l in s){const h=camelize(l);if(validatePropName(h)){const d=s[l],u=o[h]=isArray(d)||isFunction(d)?{type:d}:extend({},d);if(u){const m=getTypeIndex(Boolean,u.type),f=getTypeIndex(String,u.type);u[0]=m>-1,u[1]=f<0||m<f,(m>-1||hasOwn(u,"default"))&&r.push(h)}}}const _=[o,r];return isObject(n)&&x.set(n,_),_}function validatePropName(n){return n[0]!=="$"&&!isReservedProp(n)}function getType(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function isSameType(n,e){return getType(n)===getType(e)}function getTypeIndex(n,e){return isArray(e)?e.findIndex(t=>isSameType(t,n)):isFunction(e)&&isSameType(e,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot=(n,e,t)=>{if(e._n)return e;const x=withCtx((...i)=>normalizeSlotValue(e(...i)),t);return x._c=!1,x},normalizeObjectSlots=(n,e,t)=>{const x=n._ctx;for(const i in n){if(isInternalKey(i))continue;const s=n[i];if(isFunction(s))e[i]=normalizeSlot(i,s,x);else if(s!=null){const o=normalizeSlotValue(s);e[i]=()=>o}}},normalizeVNodeSlots=(n,e)=>{const t=normalizeSlotValue(e);n.slots.default=()=>t},initSlots=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=toRaw(e),def(e,"_",t)):normalizeObjectSlots(e,n.slots={})}else n.slots={},e&&normalizeVNodeSlots(n,e);def(n.slots,InternalObjectKey,1)},updateSlots=(n,e,t)=>{const{vnode:x,slots:i}=n;let s=!0,o=EMPTY_OBJ;if(x.shapeFlag&32){const r=e._;r?t&&r===1?s=!1:(extend(i,e),!t&&r===1&&delete i._):(s=!e.$stable,normalizeObjectSlots(e,i)),o=e}else e&&(normalizeVNodeSlots(n,e),o={default:1});if(s)for(const r in i)!isInternalKey(r)&&o[r]==null&&delete i[r]};function setRef(n,e,t,x,i=!1){if(isArray(n)){n.forEach((d,u)=>setRef(d,e&&(isArray(e)?e[u]:e),t,x,i));return}if(isAsyncWrapper(x)&&!i)return;const s=x.shapeFlag&4?getExposeProxy(x.component)||x.component.proxy:x.el,o=i?null:s,{i:r,r:c}=n,_=e&&e.r,l=r.refs===EMPTY_OBJ?r.refs={}:r.refs,h=r.setupState;if(_!=null&&_!==c&&(isString(_)?(l[_]=null,hasOwn(h,_)&&(h[_]=null)):isRef(_)&&(_.value=null)),isFunction(c))callWithErrorHandling(c,r,12,[o,l]);else{const d=isString(c),u=isRef(c);if(d||u){const m=()=>{if(n.f){const f=d?hasOwn(h,c)?h[c]:l[c]:c.value;i?isArray(f)&&remove(f,s):isArray(f)?f.includes(s)||f.push(s):d?(l[c]=[s],hasOwn(h,c)&&(h[c]=l[c])):(c.value=[s],n.k&&(l[n.k]=c.value))}else d?(l[c]=o,hasOwn(h,c)&&(h[c]=o)):u&&(c.value=o,n.k&&(l[n.k]=o))};o?(m.id=-1,queuePostRenderEffect(m,t)):m()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:x,remove:i,patchProp:s,createElement:o,createText:r,createComment:c,setText:_,setElementText:l,parentNode:h,nextSibling:d,setScopeId:u=NOOP,insertStaticContent:m}=n,f=(S,P,k,E=null,T=null,R=null,$=void 0,N=null,z=!!P.dynamicChildren)=>{if(S===P)return;S&&!isSameVNodeType(S,P)&&(E=ye(S),ne(S,T,R,!0),S=null),P.patchFlag===-2&&(z=!1,P.dynamicChildren=null);const{type:G,ref:U,shapeFlag:q}=P;switch(G){case Text:g(S,P,k,E);break;case Comment:b(S,P,k,E);break;case Static:S==null&&y(P,k,E,$);break;case Fragment:Y(S,P,k,E,T,R,$,N,z);break;default:q&1?M(S,P,k,E,T,R,$,N,z):q&6?j(S,P,k,E,T,R,$,N,z):(q&64||q&128)&&G.process(S,P,k,E,T,R,$,N,z,Ce)}U!=null&&T&&setRef(U,S&&S.ref,R,P||S,!P)},g=(S,P,k,E)=>{if(S==null)x(P.el=r(P.children),k,E);else{const T=P.el=S.el;P.children!==S.children&&_(T,P.children)}},b=(S,P,k,E)=>{S==null?x(P.el=c(P.children||""),k,E):P.el=S.el},y=(S,P,k,E)=>{[S.el,S.anchor]=m(S.children,P,k,E,S.el,S.anchor)},C=({el:S,anchor:P},k,E)=>{let T;for(;S&&S!==P;)T=d(S),x(S,k,E),S=T;x(P,k,E)},v=({el:S,anchor:P})=>{let k;for(;S&&S!==P;)k=d(S),i(S),S=k;i(P)},M=(S,P,k,E,T,R,$,N,z)=>{P.type==="svg"?$="svg":P.type==="math"&&($="mathml"),S==null?w(P,k,E,T,R,$,N,z):F(S,P,T,R,$,N,z)},w=(S,P,k,E,T,R,$,N)=>{let z,G;const{props:U,shapeFlag:q,transition:W,dirs:te}=S;if(z=S.el=o(S.type,R,U&&U.is,U),q&8?l(z,S.children):q&16&&D(S.children,z,null,E,T,resolveChildrenNamespace(S,R),$,N),te&&invokeDirectiveHook(S,null,E,"created"),H(z,S,S.scopeId,$,E),U){for(const ae in U)ae!=="value"&&!isReservedProp(ae)&&s(z,ae,null,U[ae],R,S.children,E,T,he);"value"in U&&s(z,"value",null,U.value,R),(G=U.onVnodeBeforeMount)&&invokeVNodeHook(G,E,S)}te&&invokeDirectiveHook(S,null,E,"beforeMount");const ie=needTransition(T,W);ie&&W.beforeEnter(z),x(z,P,k),((G=U&&U.onVnodeMounted)||ie||te)&&queuePostRenderEffect(()=>{G&&invokeVNodeHook(G,E,S),ie&&W.enter(z),te&&invokeDirectiveHook(S,null,E,"mounted")},T)},H=(S,P,k,E,T)=>{if(k&&u(S,k),E)for(let R=0;R<E.length;R++)u(S,E[R]);if(T){let R=T.subTree;if(P===R){const $=T.vnode;H(S,$,$.scopeId,$.slotScopeIds,T.parent)}}},D=(S,P,k,E,T,R,$,N,z=0)=>{for(let G=z;G<S.length;G++){const U=S[G]=N?cloneIfMounted(S[G]):normalizeVNode(S[G]);f(null,U,P,k,E,T,R,$,N)}},F=(S,P,k,E,T,R,$)=>{const N=P.el=S.el;let{patchFlag:z,dynamicChildren:G,dirs:U}=P;z|=S.patchFlag&16;const q=S.props||EMPTY_OBJ,W=P.props||EMPTY_OBJ;let te;if(k&&toggleRecurse(k,!1),(te=W.onVnodeBeforeUpdate)&&invokeVNodeHook(te,k,P,S),U&&invokeDirectiveHook(P,S,k,"beforeUpdate"),k&&toggleRecurse(k,!0),G?L(S.dynamicChildren,G,N,k,E,resolveChildrenNamespace(P,T),R):$||K(S,P,N,null,k,E,resolveChildrenNamespace(P,T),R,!1),z>0){if(z&16)B(N,P,q,W,k,E,T);else if(z&2&&q.class!==W.class&&s(N,"class",null,W.class,T),z&4&&s(N,"style",q.style,W.style,T),z&8){const ie=P.dynamicProps;for(let ae=0;ae<ie.length;ae++){const se=ie[ae],re=q[se],ue=W[se];(ue!==re||se==="value")&&s(N,se,re,ue,T,S.children,k,E,he)}}z&1&&S.children!==P.children&&l(N,P.children)}else!$&&G==null&&B(N,P,q,W,k,E,T);((te=W.onVnodeUpdated)||U)&&queuePostRenderEffect(()=>{te&&invokeVNodeHook(te,k,P,S),U&&invokeDirectiveHook(P,S,k,"updated")},E)},L=(S,P,k,E,T,R,$)=>{for(let N=0;N<P.length;N++){const z=S[N],G=P[N],U=z.el&&(z.type===Fragment||!isSameVNodeType(z,G)||z.shapeFlag&70)?h(z.el):k;f(z,G,U,null,E,T,R,$,!0)}},B=(S,P,k,E,T,R,$)=>{if(k!==E){if(k!==EMPTY_OBJ)for(const N in k)!isReservedProp(N)&&!(N in E)&&s(S,N,k[N],null,$,P.children,T,R,he);for(const N in E){if(isReservedProp(N))continue;const z=E[N],G=k[N];z!==G&&N!=="value"&&s(S,N,G,z,$,P.children,T,R,he)}"value"in E&&s(S,"value",k.value,E.value,$)}},Y=(S,P,k,E,T,R,$,N,z)=>{const G=P.el=S?S.el:r(""),U=P.anchor=S?S.anchor:r("");let{patchFlag:q,dynamicChildren:W,slotScopeIds:te}=P;te&&(N=N?N.concat(te):te),S==null?(x(G,k,E),x(U,k,E),D(P.children||[],k,U,T,R,$,N,z)):q>0&&q&64&&W&&S.dynamicChildren?(L(S.dynamicChildren,W,k,T,R,$,N),(P.key!=null||T&&P===T.subTree)&&traverseStaticChildren(S,P,!0)):K(S,P,k,U,T,R,$,N,z)},j=(S,P,k,E,T,R,$,N,z)=>{P.slotScopeIds=N,S==null?P.shapeFlag&512?T.ctx.activate(P,k,E,$,z):J(P,k,E,T,R,$,z):Q(S,P,z)},J=(S,P,k,E,T,R,$)=>{const N=S.component=createComponentInstance(S,E,T);if(isKeepAlive(S)&&(N.ctx.renderer=Ce),setupComponent(N),N.asyncDep){if(T&&T.registerDep(N,X),!S.el){const z=N.subTree=createVNode(Comment);b(null,z,P,k)}}else X(N,S,P,k,T,R,$)},Q=(S,P,k)=>{const E=P.component=S.component;if(shouldUpdateComponent(S,P,k))if(E.asyncDep&&!E.asyncResolved){xe(E,P,k);return}else E.next=P,invalidateJob(E.update),E.effect.dirty=!0,E.update();else P.el=S.el,E.vnode=P},X=(S,P,k,E,T,R,$)=>{const N=()=>{if(S.isMounted){let{next:U,bu:q,u:W,parent:te,vnode:ie}=S;{const Me=locateNonHydratedAsyncRoot(S);if(Me){U&&(U.el=ie.el,xe(S,U,$)),Me.asyncDep.then(()=>{S.isUnmounted||N()});return}}let ae=U,se;toggleRecurse(S,!1),U?(U.el=ie.el,xe(S,U,$)):U=ie,q&&invokeArrayFns(q),(se=U.props&&U.props.onVnodeBeforeUpdate)&&invokeVNodeHook(se,te,U,ie),toggleRecurse(S,!0);const re=renderComponentRoot(S),ue=S.subTree;S.subTree=re,f(ue,re,h(ue.el),ye(ue),S,T,R),U.el=re.el,ae===null&&updateHOCHostEl(S,re.el),W&&queuePostRenderEffect(W,T),(se=U.props&&U.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(se,te,U,ie),T)}else{let U;const{el:q,props:W}=P,{bm:te,m:ie,parent:ae}=S,se=isAsyncWrapper(P);if(toggleRecurse(S,!1),te&&invokeArrayFns(te),!se&&(U=W&&W.onVnodeBeforeMount)&&invokeVNodeHook(U,ae,P),toggleRecurse(S,!0),q&&be){const re=()=>{S.subTree=renderComponentRoot(S),be(q,S.subTree,S,T,null)};se?P.type.__asyncLoader().then(()=>!S.isUnmounted&&re()):re()}else{const re=S.subTree=renderComponentRoot(S);f(null,re,k,E,S,T,R),P.el=re.el}if(ie&&queuePostRenderEffect(ie,T),!se&&(U=W&&W.onVnodeMounted)){const re=P;queuePostRenderEffect(()=>invokeVNodeHook(U,ae,re),T)}(P.shapeFlag&256||ae&&isAsyncWrapper(ae.vnode)&&ae.vnode.shapeFlag&256)&&S.a&&queuePostRenderEffect(S.a,T),S.isMounted=!0,P=k=E=null}},z=S.effect=new ReactiveEffect(N,NOOP,()=>queueJob(G),S.scope),G=S.update=()=>{z.dirty&&z.run()};G.id=S.uid,toggleRecurse(S,!0),G()},xe=(S,P,k)=>{P.component=S;const E=S.vnode.props;S.vnode=P,S.next=null,updateProps(S,P.props,E,k),updateSlots(S,P.children,k),pauseTracking(),flushPreFlushCbs(S),resetTracking()},K=(S,P,k,E,T,R,$,N,z=!1)=>{const G=S&&S.children,U=S?S.shapeFlag:0,q=P.children,{patchFlag:W,shapeFlag:te}=P;if(W>0){if(W&128){ce(G,q,k,E,T,R,$,N,z);return}else if(W&256){le(G,q,k,E,T,R,$,N,z);return}}te&8?(U&16&&he(G,T,R),q!==G&&l(k,q)):U&16?te&16?ce(G,q,k,E,T,R,$,N,z):he(G,T,R,!0):(U&8&&l(k,""),te&16&&D(q,k,E,T,R,$,N,z))},le=(S,P,k,E,T,R,$,N,z)=>{S=S||EMPTY_ARR,P=P||EMPTY_ARR;const G=S.length,U=P.length,q=Math.min(G,U);let W;for(W=0;W<q;W++){const te=P[W]=z?cloneIfMounted(P[W]):normalizeVNode(P[W]);f(S[W],te,k,null,T,R,$,N,z)}G>U?he(S,T,R,!0,!1,q):D(P,k,E,T,R,$,N,z,q)},ce=(S,P,k,E,T,R,$,N,z)=>{let G=0;const U=P.length;let q=S.length-1,W=U-1;for(;G<=q&&G<=W;){const te=S[G],ie=P[G]=z?cloneIfMounted(P[G]):normalizeVNode(P[G]);if(isSameVNodeType(te,ie))f(te,ie,k,null,T,R,$,N,z);else break;G++}for(;G<=q&&G<=W;){const te=S[q],ie=P[W]=z?cloneIfMounted(P[W]):normalizeVNode(P[W]);if(isSameVNodeType(te,ie))f(te,ie,k,null,T,R,$,N,z);else break;q--,W--}if(G>q){if(G<=W){const te=W+1,ie=te<U?P[te].el:E;for(;G<=W;)f(null,P[G]=z?cloneIfMounted(P[G]):normalizeVNode(P[G]),k,ie,T,R,$,N,z),G++}}else if(G>W)for(;G<=q;)ne(S[G],T,R,!0),G++;else{const te=G,ie=G,ae=new Map;for(G=ie;G<=W;G++){const de=P[G]=z?cloneIfMounted(P[G]):normalizeVNode(P[G]);de.key!=null&&ae.set(de.key,G)}let se,re=0;const ue=W-ie+1;let Me=!1,Ae=0;const Ee=new Array(ue);for(G=0;G<ue;G++)Ee[G]=0;for(G=te;G<=q;G++){const de=S[G];if(re>=ue){ne(de,T,R,!0);continue}let ge;if(de.key!=null)ge=ae.get(de.key);else for(se=ie;se<=W;se++)if(Ee[se-ie]===0&&isSameVNodeType(de,P[se])){ge=se;break}ge===void 0?ne(de,T,R,!0):(Ee[ge-ie]=G+1,ge>=Ae?Ae=ge:Me=!0,f(de,P[ge],k,null,T,R,$,N,z),re++)}const Se=Me?getSequence(Ee):EMPTY_ARR;for(se=Se.length-1,G=ue-1;G>=0;G--){const de=ie+G,ge=P[de],we=de+1<U?P[de+1].el:E;Ee[G]===0?f(null,ge,k,we,T,R,$,N,z):Me&&(se<0||G!==Se[se]?_e(ge,k,we,2):se--)}}},_e=(S,P,k,E,T=null)=>{const{el:R,type:$,transition:N,children:z,shapeFlag:G}=S;if(G&6){_e(S.component.subTree,P,k,E);return}if(G&128){S.suspense.move(P,k,E);return}if(G&64){$.move(S,P,k,Ce);return}if($===Fragment){x(R,P,k);for(let q=0;q<z.length;q++)_e(z[q],P,k,E);x(S.anchor,P,k);return}if($===Static){C(S,P,k);return}if(E!==2&&G&1&&N)if(E===0)N.beforeEnter(R),x(R,P,k),queuePostRenderEffect(()=>N.enter(R),T);else{const{leave:q,delayLeave:W,afterLeave:te}=N,ie=()=>x(R,P,k),ae=()=>{q(R,()=>{ie(),te&&te()})};W?W(R,ie,ae):ae()}else x(R,P,k)},ne=(S,P,k,E=!1,T=!1)=>{const{type:R,props:$,ref:N,children:z,dynamicChildren:G,shapeFlag:U,patchFlag:q,dirs:W}=S;if(N!=null&&setRef(N,null,k,S,!0),U&256){P.ctx.deactivate(S);return}const te=U&1&&W,ie=!isAsyncWrapper(S);let ae;if(ie&&(ae=$&&$.onVnodeBeforeUnmount)&&invokeVNodeHook(ae,P,S),U&6)oe(S.component,k,E);else{if(U&128){S.suspense.unmount(k,E);return}te&&invokeDirectiveHook(S,null,P,"beforeUnmount"),U&64?S.type.remove(S,P,k,T,Ce,E):G&&(R!==Fragment||q>0&&q&64)?he(G,P,k,!1,!0):(R===Fragment&&q&384||!T&&U&16)&&he(z,P,k),E&&pe(S)}(ie&&(ae=$&&$.onVnodeUnmounted)||te)&&queuePostRenderEffect(()=>{ae&&invokeVNodeHook(ae,P,S),te&&invokeDirectiveHook(S,null,P,"unmounted")},k)},pe=S=>{const{type:P,el:k,anchor:E,transition:T}=S;if(P===Fragment){fe(k,E);return}if(P===Static){v(S);return}const R=()=>{i(k),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(S.shapeFlag&1&&T&&!T.persisted){const{leave:$,delayLeave:N}=T,z=()=>$(k,R);N?N(S.el,R,z):z()}else R()},fe=(S,P)=>{let k;for(;S!==P;)k=d(S),i(S),S=k;i(P)},oe=(S,P,k)=>{const{bum:E,scope:T,update:R,subTree:$,um:N}=S;E&&invokeArrayFns(E),T.stop(),R&&(R.active=!1,ne($,S,P,k)),N&&queuePostRenderEffect(N,P),queuePostRenderEffect(()=>{S.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},he=(S,P,k,E=!1,T=!1,R=0)=>{for(let $=R;$<S.length;$++)ne(S[$],P,k,E,T)},ye=S=>S.shapeFlag&6?ye(S.component.subTree):S.shapeFlag&128?S.suspense.next():d(S.anchor||S.el);let ve=!1;const Te=(S,P,k)=>{S==null?P._vnode&&ne(P._vnode,null,null,!0):f(P._vnode||null,S,P,null,null,null,k),ve||(ve=!0,flushPreFlushCbs(),flushPostFlushCbs(),ve=!1),P._vnode=S},Ce={p:f,um:ne,m:_e,r:pe,mt:J,mc:D,pc:K,pbc:L,n:ye,o:n};let Pe,be;return e&&([Pe,be]=e(Ce)),{render:Te,hydrate:Pe,createApp:createAppAPI(Te,Pe)}}function resolveChildrenNamespace({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function needTransition(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(n,e,t=!1){const x=n.children,i=e.children;if(isArray(x)&&isArray(i))for(let s=0;s<x.length;s++){const o=x[s];let r=i[s];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=i[s]=cloneIfMounted(i[s]),r.el=o.el),t||traverseStaticChildren(o,r)),r.type===Text&&(r.el=o.el)}}function getSequence(n){const e=n.slice(),t=[0];let x,i,s,o,r;const c=n.length;for(x=0;x<c;x++){const _=n[x];if(_!==0){if(i=t[t.length-1],n[i]<_){e[x]=i,t.push(x);continue}for(s=0,o=t.length-1;s<o;)r=s+o>>1,n[t[r]]<_?s=r+1:o=r;_<n[t[s]]&&(s>0&&(e[x]=t[s-1]),t[s]=x)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function locateNonHydratedAsyncRoot(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}const isTeleport=n=>n.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,t,x,i,s){return setupBlock(createBaseVNode(n,e,t,x,i,s,!0))}function createBlock(n,e,t,x,i){return setupBlock(createVNode(n,e,t,x,i,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?isString(n)||isRef(n)||isFunction(n)?{i:currentRenderingInstance,r:n,k:e,f:!!t}:n:null);function createBaseVNode(n,e=null,t=null,x=0,i=null,s=n===Fragment?0:1,o=!1,r=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:x,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return r?(normalizeChildren(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(n,e=null,t=null,x=0,i=null,s=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const r=cloneVNode(n,e,!0);return t&&normalizeChildren(r,t),isBlockTreeEnabled>0&&!s&&currentBlock&&(r.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=r:currentBlock.push(r)),r.patchFlag|=-2,r}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:r,style:c}=e;r&&!isString(r)&&(e.class=normalizeClass(r)),isObject(c)&&(isProxy(c)&&!isArray(c)&&(c=extend({},c)),e.style=normalizeStyle(c))}const o=isString(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject(n)?4:isFunction(n)?2:0;return createBaseVNode(n,e,t,x,i,o,s,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend({},n):n:null}function cloneVNode(n,e,t=!1){const{props:x,ref:i,patchFlag:s,children:o}=n,r=e?mergeProps(x||{},e):x;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:r,key:r&&normalizeKey(r),ref:e&&e.ref?t&&i?isArray(i)?i.concat(normalizeRef(e)):[i,normalizeRef(e)]:normalizeRef(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function createTextVNode(n=" ",e=0){return createVNode(Text,null,n,e)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let t=0;const{shapeFlag:x}=n;if(e==null)e=null;else if(isArray(e))t=16;else if(typeof e=="object")if(x&65){const i=e.default;i&&(i._c&&(i._d=!1),normalizeChildren(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),x&64?(t=16,e=[createTextVNode(e)]):t=8);n.children=e,n.shapeFlag|=t}function mergeProps(...n){const e={};for(let t=0;t<n.length;t++){const x=n[t];for(const i in x)if(i==="class")e.class!==x.class&&(e.class=normalizeClass([e.class,x.class]));else if(i==="style")e.style=normalizeStyle([e.style,x.style]);else if(isOn(i)){const s=e[i],o=x[i];o&&s!==o&&!(isArray(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=x[i])}return e}function invokeVNodeHook(n,e,t,x=null){callWithAsyncErrorHandling(n,e,7,[t,x])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,e,t){const x=n.type,i=(e?e.appContext:n.appContext)||emptyAppContext,s={uid:uid++,vnode:n,type:x,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(x,i),emitsOptions:normalizeEmitsOptions(x,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:x.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit.bind(null,s),n.ce&&n.ce(s),s}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const n=getGlobalThis(),e=(t,x)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(x),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=n=>{const e=currentInstance;return internalSetCurrentInstance(n),n.scope.on(),()=>{n.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1){e&&setInSSRSetupState(e);const{props:t,children:x}=n.vnode,i=isStatefulComponent(n);initProps(n,t,i,e),initSlots(n,x);const s=i?setupStatefulComponent(n,e):void 0;return e&&setInSSRSetupState(!1),s}function setupStatefulComponent(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:x}=t;if(x){const i=n.setupContext=x.length>1?createSetupContext(n):null,s=setCurrentInstance(n);pauseTracking();const o=callWithErrorHandling(x,n,0,[n.props,i]);if(resetTracking(),s(),isPromise(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(r=>{handleSetupResult(n,r,e)}).catch(r=>{handleError(r,n,0)});n.asyncDep=o}else handleSetupResult(n,o,e)}else finishComponentSetup(n,e)}function handleSetupResult(n,e,t){isFunction(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n,t)}let compile;function finishComponentSetup(n,e,t){const x=n.type;if(!n.render){if(!e&&compile&&!x.render){const i=x.template||resolveMergedOptions(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:r,compilerOptions:c}=x,_=extend(extend({isCustomElement:s,delimiters:r},o),c);x.render=compile(i,_)}}n.render=x.render||NOOP}{const i=setCurrentInstance(n);pauseTracking();try{applyOptions(n)}finally{resetTracking(),i()}}}function getAttrsProxy(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return track(n,"get","$attrs"),e[t]}}))}function createSetupContext(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return getAttrsProxy(n)},slots:n.slots,emit:n.emit,expose:e}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](n)},has(e,t){return t in e||t in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=n=>n.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(n,e=!0){return isFunction(n)?n.displayName||n.name:n.name||e&&n.__name}function formatComponentName(n,e,t=!1){let x=getComponentName(e);if(!x&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(x=i[1])}if(!x&&n&&n.parent){const i=s=>{for(const o in s)if(s[o]===e)return o};x=i(n.components||n.parent.type.components)||i(n.appContext.components)}return x?classify(x):t?"App":"Anonymous"}function isClassComponent(n){return isFunction(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup),version="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,x)=>{const i=e==="svg"?doc.createElementNS(svgNS,n):e==="mathml"?doc.createElementNS(mathmlNS,n):doc.createElement(n,t?{is:t}:void 0);return n==="select"&&x&&x.multiple!=null&&i.setAttribute("multiple",x.multiple),i},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,x,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{templateContainer.innerHTML=x==="svg"?`<svg>${n}</svg>`:x==="mathml"?`<math>${n}</math>`:n;const r=templateContainer.content;if(x==="svg"||x==="mathml"){const c=r.firstChild;for(;c.firstChild;)r.appendChild(c.firstChild);r.removeChild(c)}e.insertBefore(r,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(n,e,t){const x=n[vtcKey];x&&(e=(e?[e,...x]:[...x]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(n,e,t){const x=n.style,i=isString(t);let s=!1;if(t&&!i){if(e)if(isString(e))for(const o of e.split(";")){const r=o.slice(0,o.indexOf(":")).trim();t[r]==null&&setStyle(x,r,"")}else for(const o in e)t[o]==null&&setStyle(x,o,"");for(const o in t)o==="display"&&(s=!0),setStyle(x,o,t[o])}else if(i){if(e!==t){const o=x[CSS_VAR_TEXT];o&&(t+=";"+o),x.cssText=t,s=displayRE.test(t)}}else e&&n.removeAttribute("style");vShowOriginalDisplay in n&&(n[vShowOriginalDisplay]=s?x.display:"",n[vShowHidden]&&(x.display="none"))}const importantRE=/\s*!important$/;function setStyle(n,e,t){if(isArray(t))t.forEach(x=>setStyle(n,e,x));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const x=autoPrefix(n,e);importantRE.test(t)?n.setProperty(hyphenate(x),t.replace(importantRE,""),"important"):n[x]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const t=prefixCache[e];if(t)return t;let x=camelize(e);if(x!=="filter"&&x in n)return prefixCache[e]=x;x=capitalize(x);for(let i=0;i<prefixes.length;i++){const s=prefixes[i]+x;if(s in n)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,t,x,i){if(x&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,t);else{const s=isSpecialBooleanAttr(e);t==null||s&&!includeBooleanAttr(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function patchDOMProp(n,e,t,x,i,s,o){if(e==="innerHTML"||e==="textContent"){x&&o(x,i,s),n[e]=t??"";return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const _=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t??"";(_!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let c=!1;if(t===""||t==null){const _=typeof n[e];_==="boolean"?t=includeBooleanAttr(t):t==null&&_==="string"?(t="",c=!0):_==="number"&&(t=0,c=!0)}try{n[e]=t}catch{}c&&n.removeAttribute(e)}function addEventListener(n,e,t,x){n.addEventListener(e,t,x)}function removeEventListener(n,e,t,x){n.removeEventListener(e,t,x)}const veiKey=Symbol("_vei");function patchEvent(n,e,t,x,i=null){const s=n[veiKey]||(n[veiKey]={}),o=s[e];if(x&&o)o.value=x;else{const[r,c]=parseName(e);if(x){const _=s[e]=createInvoker(x,i);addEventListener(n,r,_,c)}else o&&(removeEventListener(n,r,o,c),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let x;for(;x=n.match(optionsModifierRE);)n=n.slice(0,n.length-x[0].length),e[x[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,e){const t=x=>{if(!x._vts)x._vts=Date.now();else if(x._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(x,t.value),e,5,[x])};return t.value=n,t.attached=getNow(),t}function patchStopImmediatePropagation(n,e){if(isArray(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(x=>i=>!i._stopped&&x&&x(i))}else return e}const isNativeOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,patchProp=(n,e,t,x,i,s,o,r,c)=>{const _=i==="svg";e==="class"?patchClass(n,x,_):e==="style"?patchStyle(n,t,x):isOn(e)?isModelListener(e)||patchEvent(n,e,t,x,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,x,_))?patchDOMProp(n,e,x,s,o,r,c):(e==="true-value"?n._trueValue=x:e==="false-value"&&(n._falseValue=x),patchAttr(n,e,x,_))};function shouldSetAsProp(n,e,t,x){if(x)return!!(e==="innerHTML"||e==="textContent"||e in n&&isNativeOn(e)&&isFunction(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in n}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:t}=e;return e.mount=x=>{const i=normalizeContainer(x);if(!i)return;const s=e._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,resolveRootNamespace(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function resolveRootNamespace(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function normalizeContainer(n){return isString(n)?document.querySelector(n):n}(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,window.Cesium||require("mars3d-cesium"),window.turf||require("@turf/turf")):typeof define=="function"&&define.amd?define(["exports","mars3d-cesium","@turf/turf"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.mars3d={},n.Cesium,n.turf))})(void 0,function(exports,Cesium,turf){const _0x2397ca=_0x3361;(function(n,e){const t={_0x218bbb:941,_0x2cf185:3847,_0x2839b8:624,_0x290517:3906,_0x3f68fa:2622,_0x563027:237,_0x2f5300:3608},x=_0x3361,i=n();for(;;)try{if(parseInt(x(1687))/1*(-parseInt(x(t._0x218bbb))/2)+parseInt(x(t._0x2cf185))/3+parseInt(x(t._0x2839b8))/4*(parseInt(x(t._0x290517))/5)+-parseInt(x(1338))/6*(-parseInt(x(1058))/7)+parseInt(x(t._0x3f68fa))/8*(-parseInt(x(t._0x563027))/9)+parseInt(x(1374))/10+-parseInt(x(t._0x2f5300))/11*(parseInt(x(1038))/12)===e)break;i.push(i.shift())}catch{i.push(i.shift())}})(_0x3c2a,311770);function _interopNamespace(n){const e={_0x230b1d:1937},t={_0x30a3a9:748},x=_0x3361;if(n&&n.__esModule)return n;var i=Object.create(null);return n&&Object.keys(n).forEach(function(s){const o=_0x3361;if(s!=="default"){var r=Object[o(336)](n,s);Object[o(t._0x30a3a9)](i,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}}),i[x(e._0x230b1d)]=n,i}var Cesium__namespace=_interopNamespace(Cesium);!(Cesium__namespace!=null&&Cesium__namespace.Viewer)&&console.error(_0x2397ca(2230),Cesium__namespace);const version$1=Number(Cesium__namespace[_0x2397ca(296)].substr(Cesium__namespace[_0x2397ca(296)].indexOf(".")+1));version$1<106&&console[_0x2397ca(1141)]("请将 mars3d-cesium 库升级至 v1.106 及以上版本",version$1);const getUrlComponent_old=Cesium__namespace.Resource.prototype.getUrlComponent;Cesium__namespace[_0x2397ca(740)].prototype.getUrlComponent=function(n,e){const t={_0x1ec196:740},x=_0x2397ca;let i=getUrlComponent_old.bind(this)(n,e);return Cesium__namespace[x(t._0x1ec196)].ReplaceUrl&&(i=Cesium__namespace.Resource.ReplaceUrl(i)),this[x(1506)]=i,i};const getValueInReferenceFrame_old=Cesium__namespace[_0x2397ca(4012)].prototype.getValueInReferenceFrame;Cesium__namespace[_0x2397ca(4012)].prototype[_0x2397ca(2103)]=function(n,e,t){const x=_0x2397ca;return!Cesium__namespace[x(639)](n)&&(n=Cesium__namespace.JulianDate[x(2116)]()),getValueInReferenceFrame_old.bind(this)(n,e,t)},Cesium__namespace[_0x2397ca(2509)][_0x2397ca(2121)].getValue=function(n,e){const t={_0x357040:2865,_0x46c2ae:1896,_0x5f27b5:639,_0x10b6cf:1972},x=_0x2397ca;!this._positionScratch&&(this[x(t._0x357040)]=new Cesium__namespace[x(295)],this[x(3025)]=new Cesium__namespace.Cartesian3,this[x(1972)]=new Cesium__namespace[x(3596)]);let i=this[x(t._0x46c2ae)]._getValue(n,this._velocityScratch,this._positionScratch);if(Cesium__namespace[x(t._0x5f27b5)](i)?this._last_velocity=i[x(3069)]():i=this._last_velocity,!!Cesium__namespace.defined(i))return Cesium__namespace.Transforms.rotationMatrixFromPositionVelocity(this[x(2865)],i,this._ellipsoid,this[x(t._0x10b6cf)]),Cesium__namespace[x(1772)].fromRotationMatrix(this._rotationScratch,e)};const beginFrame_old=Cesium__namespace.Globe.prototype[_0x2397ca(448)];Cesium__namespace.Globe.prototype.beginFrame=function(n){const e={_0x42221e:1692,_0x10db81:1485,_0xb26b2b:2935,_0x3d6401:2941,_0x47bc36:2928},t=_0x2397ca;var x,i,s,o;const r=(x=this[t(1669)]._tileProvider)===null||x===void 0||(i=x.marsOptions)===null||i===void 0?void 0:i.flat;r&&r.hasUpdate&&(r.texture&&r[t(e._0x42221e)].destroy(),r.texture=createFlattingAreaTextureOrLimitAreaTexture(n.context,r[t(e._0x10db81)],r.heights),r.hasUpdate=!1);const c=(s=this._surface._tileProvider)===null||s===void 0||(o=s.marsOptions)===null||o===void 0?void 0:o.uplift;return c&&c[t(e._0xb26b2b)]&&(c[t(1692)]&&c.texture[t(e._0x3d6401)](),c.texture=createFlattingAreaTextureOrLimitAreaTexture(n[t(e._0x47bc36)],c.areas,void 0),c.hasUpdate=!1),beginFrame_old.bind(this)(n)};function createFlattingAreaTextureOrLimitAreaTexture(n,e,t){const x={_0x117faa:1255,_0x1b9877:3367,_0x5c1fb9:254},i={_0x5de22b:2434,_0xbdffb1:2434},s=_0x2397ca,o=e==null?void 0:e.length;if(!o||o===0)return;let r=0;e[s(1255)](_=>{r<_.length&&(r=_.length)});const c=[];return e[s(x._0x117faa)]((_,l)=>{const h=s,d=_.length;if(_.forEach(u=>{const m=_0x3361;c[m(i._0x5de22b)](u.longitude),c.push(u.latitude),c.push(d),Cesium__namespace.defined(t)?c[m(i._0xbdffb1)](t[l]):c.push(0)}),d<r)for(let u=0;u<r-d;u++)c.push(0),c[h(2434)](0),c.push(0),c[h(2434)](0)}),new Cesium__namespace.Texture({context:n,pixelFormat:Cesium__namespace[s(x._0x1b9877)][s(766)],pixelDatatype:Cesium__namespace.PixelDatatype[s(x._0x5c1fb9)],sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[s(3305)],wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace[s(566)].NEAREST,magnificationFilter:Cesium__namespace.TextureMagnificationFilter.NEAREST}),flipY:!1,source:{width:r,height:o,arrayBufferView:new Float32Array(c)}})}Object.defineProperties(Cesium__namespace.GlobeSurfaceTileProvider[_0x2397ca(2121)],{marsOptions:{get:function(){return this._marsOptions}}}),Cesium__namespace[_0x2397ca(3631)][_0x2397ca(2121)]._initByMars3D=function(n){const e={_0x13ab51:1949,_0x1935a4:662},t={_0x457cec:4053},x={_0x5e15a0:1668},i={_0x1d82c3:679},s={_0x48972c:1206,_0x2738b6:1206,_0x57791a:646},o={_0x51616d:3685,_0x38077d:3685},r={_0x3f9146:2585},c=_0x2397ca,_=this;this[c(3178)]={resetValue:function(){const l=c;this[l(r._0x3f9146)](),this[l(1696)](),this.resetFlatValue(),this.resetUpliftValue()},flat:{},resetFlatValue:function(){const l=c;this[l(1958)].enabled=!1,this.flat.heights=[],this.flat.rectangles=void 0,this.flat.areas=void 0,this.flat.texture=void 0,this[l(1958)][l(2935)]=!1},uplift:{},resetUpliftValue:function(){const l=c;this.uplift.enabled=!1,this[l(o._0x51616d)].showUp=!0,this[l(o._0x38077d)].height=0,this.uplift.rectangles=void 0,this.uplift.areas=void 0,this.uplift.texture=void 0,this.uplift.hasUpdate=!1},clip:{},resetClipValue:function(){const l=c;this[l(s._0x48972c)].enabled=!1,this.clip.clipOutSide=!1,this[l(s._0x2738b6)].polygonTexture=void 0,this.clip.tailorRect=Cesium__namespace.Cartesian4.ZERO,this.clip[l(s._0x57791a)]=Cesium__namespace.Matrix4[l(737)]},flood:{},resetFloodValue:function(){const l=c;this.flood.enabled=!1,this.flood[l(i._0x1d82c3)]=!0,this.flood.showElseArea=!0,this.flood.polygonTexture=void 0,this.flood[l(646)]=Cesium__namespace.Matrix4.ZERO,this.flood.floodRect=Cesium__namespace[l(662)].ZERO,this.flood.heightVal=new Cesium__namespace.Cartesian4(0,0,0,500),this.flood.color=new Cesium__namespace.Color(.15,.7,.95,.5)},updateTileUniformMap:function(l,h){const d={_0x19c982:3178,_0x417d7e:1014},u={_0x4d08a8:1014},m={_0x3d6214:2015},f={_0x51e561:3178},g={_0x5a8b05:1046,_0x5c283f:737};return{u_mars_clip_enabled:function(){return _._marsOptions.clip.enabled},u_mars_clip_only:function(){const b=_0x3361;return _._marsOptions.clip[b(x._0x5e15a0)]},u_mars_clip_area:function(){const b=_0x3361;return _._marsOptions.clip.polygonTexture||l[b(2928)][b(t._0x457cec)]},u_mars_clip_inverMatrix:function(){const b=_0x3361;return _._marsOptions.clip.inverMatrix||Cesium__namespace[b(g._0x5a8b05)][b(g._0x5c283f)]},u_mars_clip_rect:function(){const b=_0x3361;return _._marsOptions.clip.tailorRect||Cesium__namespace.Cartesian4[b(737)]},u_mars_flood_emabled:function(){const b=_0x3361;return _._marsOptions[b(1014)].enabled},u_mars_flood_globe:function(){return _[_0x3361(f._0x51e561)].flood.globe},u_mars_flood_showElse:function(){return _._marsOptions.flood.showElseArea},u_mars_flood_area:function(){const b=_0x3361;return _._marsOptions.flood[b(m._0x3d6214)]||l[b(2928)].defaultTexture},u_mars_flood_inverMatrix:function(){const b=_0x3361;return _[b(3178)][b(u._0x4d08a8)][b(646)]||Cesium__namespace.Matrix4.ZERO},u_mars_flood_rect:function(){const b=_0x3361;return _[b(3178)].flood[b(e._0x13ab51)]||Cesium__namespace[b(e._0x1935a4)].ZERO},u_mars_flood_val:function(){const b=_0x3361;return _._marsOptions[b(1014)].heightVal},u_mars_flood_color:function(){const b=_0x3361;return _[b(d._0x19c982)][b(d._0x417d7e)].color}}}},this._marsOptions.resetValue()},Cesium__namespace.ImageryLayer[_0x2397ca(2121)]._initByMars3D=function(n,e){const t={_0x3c9dc4:2847,_0x419a99:2847},x=_0x2397ca;this.invertColor=e[x(3864)]??n[x(3864)],this[x(t._0x3c9dc4)]=e[x(t._0x3c9dc4)]??n[x(2847)],this.filterColor&&typeof this[x(t._0x419a99)]=="string"&&this.filterColor[x(931)]===String&&(this.filterColor=Cesium__namespace.Color.fromCssColorString(this.filterColor))},Cesium__namespace.ImageryLayerCollection[_0x2397ca(2121)].addImageryProvider=function(n,e){const t=_0x2397ca,x=new Cesium__namespace[t(4021)](n,n.options);return this.add(x,e),x};const createShadowReceiveFragmentShader_old=Cesium__namespace[_0x2397ca(2763)][_0x2397ca(1442)];Cesium__namespace[_0x2397ca(2763)].createShadowReceiveFragmentShader=function(n,e,t,x,i){const s=_0x2397ca,o=createShadowReceiveFragmentShader_old.bind(this)(n,e,t,x,i);if(!isSun(e._lightCamera.position)){const r=o[s(2608)][o.sources.length-1];o.sources[o.sources.length-1]=r.replace("out_FragColor.rgb *= visibility;","out_FragColor.rgb = out_FragColor.rgb;")}return o};function isSun(n){return Math.abs(n.x)>7471e3||Math.abs(n.y)>7471e3||Math.abs(n.z)>7471e3}Object.defineProperties(Cesium__namespace.Entity[_0x2397ca(2121)],{circle:{set:function(n){this.ellipse=n},get:function(){return this[_0x2397ca({_0x50354f:1613}._0x50354f)]}}}),Cesium__namespace[_0x2397ca(4054)].prototype[_0x2397ca(1653)]=function(n){const e={_0x52e9fc:2228,_0x329521:3687,_0x5ca55d:669},t=_0x2397ca,x=Cesium__namespace.getTimestamp(),i=n??!0;this[t(3567)]++;const s=x-this[t(2335)];if(s>1e3){if(i){const r=this._fpsFrameCount*1e3/s|0;this[t(e._0x52e9fc)][t(e._0x329521)]=r+" FPS"}this._lastFpsSampleTime=x,this._fpsFrameCount=0}this._msFrameCount++;const o=x-this._lastMsSampleTime;if(o>200){if(i){const r=(o/this._msFrameCount).toFixed(2);this._msText.nodeValue=r+" MS"}this._lastMsSampleTime=x,this[t(e._0x5ca55d)]=0}};const load_old=Cesium__namespace.I3SLayer.prototype.load;Cesium__namespace[_0x2397ca(2389)].prototype.load=function(){const n={_0x15c3d3:3233,_0xcf10d9:1373},e=_0x2397ca;var t,x;return((t=this._data)===null||t===void 0||(x=t[e(n._0x15c3d3)])===null||x===void 0?void 0:x.wkid)===4490&&(this._data.spatialReference.wkid=4326),load_old[e(n._0xcf10d9)](this)()},Object.defineProperties(Cesium__namespace.CheckerboardMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$6=Cesium__namespace[_0x2397ca(2095)].prototype.getValue;Cesium__namespace[_0x2397ca(2095)].prototype.getValue=function(n,e){const t={_0x25747b:1373,_0x2e557f:2182,_0x3c5fea:2514,_0xf78bba:2708},x=_0x2397ca;return e=getValue_old$6[x(t._0x25747b)](this)(n,e),this[x(t._0x2e557f)]!==1&&(e.lightColor&&(e[x(1720)].alpha*=this.globalAlpha),e[x(t._0x3c5fea)]&&(e.darkColor.alpha*=this.globalAlpha),e.evenColor&&(e.evenColor[x(t._0xf78bba)]*=this.globalAlpha),e.oddColor&&(e.oddColor.alpha*=this.globalAlpha)),e};let _hasInfo=!0,_hasError=!0;function hasInfo(n){_hasInfo=n}function hasWarn(n){_hasInfo=n}function hasError(n){_hasError=n}function logInfo(...n){_hasInfo&&console.log(...n)}function logWarn(...n){console[_0x2397ca({_0x541672:2490}._0x541672)](...n)}function logError$1(...n){const e=_0x2397ca;_hasError&&console[e(1141)](...n)}var Log={__proto__:null,hasInfo,hasWarn,hasError,logInfo,logWarn,logError:logError$1};const GraphicType={},GraphicClass={};function hasType(n){return!!GraphicClass[n]}function eachGraphicType(n){Object[_0x2397ca(390)](GraphicClass).forEach((t,x)=>{n&&n.call(this,t,x)})}function isPointType(n){const e=_0x2397ca;return n?!!(GraphicClass[n]&&GraphicClass[n][e(534)]):!1}function isCombineType(n){return n?!!(GraphicClass[n]&&GraphicClass[n].isCombine):!1}function register$4(n,e,t){const x={_0x1002d1:2121},i=_0x2397ca;GraphicClass[n]&&logError$1("register Graphic: "+n+"类型已存在",e),GraphicType[n]=n,GraphicClass[n]=e,e.type=n,e.prototype._type=n,t&&(e.isPoint=!0,e[i(x._0x1002d1)].isPoint=!0)}function getClass$4(n){return GraphicClass[n]?GraphicClass[n]:(logWarn("getClass:未找到该类型对应的处理类",n),null)}function create$4(n,e){const t=getClass$4(n);return t?new t(e):void 0}function fromDraw(n,e){const t=_0x2397ca;if(!e.type){logError$1("fromDraw:需要传入指定绘制的type类型！");return}const x=getClass$4(e.type);if(!x||!x.prototype.startDraw){logInfo(t(3730),x);return}const i=new x(e);return i.startDraw(n),i}var GraphicUtil={__proto__:null,hasType,eachGraphicType,isPointType,isCombineType,register:register$4,getClass:getClass$4,create:create$4,fromDraw},edgeIntersectsEdge=function(e,t,x,i){var s=(i[0]-x[0])*(e[1]-x[1])-(i[1]-x[1])*(e[0]-x[0]),o=(t[0]-e[0])*(e[1]-x[1])-(t[1]-e[1])*(e[0]-x[0]),r=(i[1]-x[1])*(t[0]-e[0])-(i[0]-x[0])*(t[1]-e[1]);if(r!==0){var c=s/r,_=o/r;if(c>=0&&c<=1&&_>=0&&_<=1)return!0}return!1},coordinatesContainPoint=function(e,t){for(var x=!1,i=-1,s=e.length,o=s-1;++i<s;o=i)(e[i][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[i][1])&&t[0]<(e[o][0]-e[i][0])*(t[1]-e[i][1])/(e[o][1]-e[i][1])+e[i][0]&&(x=!x);return x},pointsEqual=function(e,t){for(var x=0;x<e.length;x++)if(e[x]!==t[x])return!1;return!0},arrayIntersectsArray=function(e,t){for(var x=0;x<e.length-1;x++)for(var i=0;i<t.length-1;i++)if(edgeIntersectsEdge(e[x],e[x+1],t[i],t[i+1]))return!0;return!1},closeRing=function(e){const t={_0x25a100:2027},x=_0x2397ca;return!pointsEqual(e[0],e[e[x(t._0x25a100)]-1])&&e.push(e[0]),e},ringIsClockwise=function(e){var t=0,x=0,i=e.length,s=e[x],o;for(x;x<i-1;x++)o=e[x+1],t+=(o[0]-s[0])*(o[1]+s[1]),s=o;return t>=0},shallowClone=function(e){var t={};for(var x in e)e.hasOwnProperty(x)&&(t[x]=e[x]);return t},coordinatesContainCoordinates=function(e,t){var x=arrayIntersectsArray(e,t),i=coordinatesContainPoint(e,t[0]);return!!(!x&&i)},convertRingsToGeoJSON=function(e){const t={_0xa83ebd:2027,_0x54e3c7:3978},x=_0x2397ca;for(var i=[],s=[],o,r,c,_=0;_<e[x(2027)];_++){var l=closeRing(e[_].slice(0));if(!(l[x(t._0xa83ebd)]<4))if(ringIsClockwise(l)){var h=[l.slice().reverse()];i.push(h)}else s.push(l.slice().reverse())}for(var d=[];s.length;){c=s[x(t._0x54e3c7)]();var u=!1;for(o=i[x(t._0xa83ebd)]-1;o>=0;o--)if(r=i[o][0],coordinatesContainCoordinates(r,c)){i[o].push(c),u=!0;break}!u&&d.push(c)}for(;d.length;){c=d[x(3978)]();var m=!1;for(o=i.length-1;o>=0;o--)if(r=i[o][0],arrayIntersectsArray(r,c)){i[o].push(c),m=!0;break}!m&&i.push([c.reverse()])}return i.length===1?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}},getId=function(e,t){const x={_0x314cb1:1727,_0x50ab61:3429},i=_0x2397ca;for(var s=t?[t,"OBJECTID","FID"]:[i(x._0x314cb1),"FID"],o=0;o<s[i(2027)];o++){var r=s[o];if(r in e&&(typeof e[r]=="string"||typeof e[r]=="number"))return e[r]}throw Error(i(x._0x50ab61))},arcgisToGeoJSON$1=function n(e,t){const x={_0x5cdc06:2434,_0x3c6c8b:1752,_0x1d3e28:1483,_0x33403a:2242,_0x9d60a4:803,_0x4a800b:1606,_0x3ed43e:1606,_0x44595d:1383,_0x59b504:3910,_0x3c4ac7:3910,_0x44b8b9:3910},i=_0x2397ca;var s={};if(e[i(197)]){s.type="FeatureCollection",s.features=[];for(var o=0;o<e[i(197)].length;o++)s.features[i(x._0x5cdc06)](n(e[i(197)][o],t))}if(typeof e.x=="number"&&typeof e.y=="number"&&(s[i(968)]="Point",s[i(1245)]=[e.x,e.y],typeof e.z===i(x._0x3c6c8b)&&s.coordinates.push(e.z)),e[i(x._0x1d3e28)]&&(s.type=i(1650),s.coordinates=e.points[i(x._0x33403a)](0)),e.paths&&(e.paths.length===1?(s.type="LineString",s.coordinates=e[i(x._0x9d60a4)][0].slice(0)):(s.type="MultiLineString",s.coordinates=e.paths[i(2242)](0))),e.rings&&(s=convertRingsToGeoJSON(e.rings.slice(0))),typeof e.xmin===i(1752)&&typeof e.ymin=="number"&&typeof e.xmax===i(1752)&&typeof e[i(x._0x4a800b)]=="number"&&(s.type="Polygon",s.coordinates=[[[e.xmax,e.ymax],[e.xmin,e[i(x._0x3ed43e)]],[e[i(x._0x44595d)],e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e[i(2870)])&&(s.type=i(683),s.geometry=e[i(3910)]?n(e[i(x._0x59b504)]):null,s[i(263)]=e[i(2870)]?shallowClone(e.attributes):null,e.attributes))try{s.id=getId(e.attributes,t)}catch{}return JSON.stringify(s[i(x._0x3c4ac7)])===JSON.stringify({})&&(s[i(x._0x44b8b9)]=null),e.spatialReference&&e.spatialReference.wkid&&e.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),s},orientRings=function(e){const t={_0x4900fd:2027,_0x1c1012:2434},x=_0x2397ca;var i=[],s=e.slice(0),o=closeRing(s.shift().slice(0));if(o[x(t._0x4900fd)]>=4){!ringIsClockwise(o)&&o.reverse(),i[x(2434)](o);for(var r=0;r<s[x(t._0x4900fd)];r++){var c=closeRing(s[r].slice(0));c.length>=4&&(ringIsClockwise(c)&&c.reverse(),i[x(t._0x1c1012)](c))}}return i},flattenMultiPolygonRings=function(e){for(var t=[],x=0;x<e.length;x++)for(var i=orientRings(e[x]),s=i.length-1;s>=0;s--){var o=i[s].slice(0);t.push(o)}return t},geojsonToArcGIS$1=function n(e,t){const x={_0x837737:1245,_0x3bb9d9:1116,_0x55d5eb:683,_0x2c2972:263},i=_0x2397ca;t=t||"OBJECTID";var s={wkid:4326},o={},r;switch(e.type){case"Point":o.x=e.coordinates[0],o.y=e[i(x._0x837737)][1],e.coordinates[2]!=null&&(o.z=e.coordinates[2]),o.spatialReference=s;break;case"MultiPoint":o.points=e.coordinates.slice(0),e.coordinates[0][2]!=null&&(o.hasZ=!0),o[i(3233)]=s;break;case i(2749):o.paths=[e.coordinates[i(2242)](0)],e.coordinates[0][2]!=null&&(o.hasZ=!0),o.spatialReference=s;break;case i(2774):o.paths=e[i(x._0x837737)].slice(0),e.coordinates[0][0][2]!=null&&(o.hasZ=!0),o.spatialReference=s;break;case"Polygon":o.rings=orientRings(e.coordinates.slice(0)),e.coordinates[0][0][2]!=null&&(o.hasZ=!0),o.spatialReference=s;break;case"MultiPolygon":o.rings=flattenMultiPolygonRings(e.coordinates.slice(0)),e.coordinates[0][0][0][2]!=null&&(o[i(x._0x3bb9d9)]=!0),o[i(3233)]=s;break;case i(x._0x55d5eb):e.geometry&&(o.geometry=n(e.geometry,t)),o.attributes=e.properties?shallowClone(e[i(x._0x2c2972)]):{},e.id&&(o.attributes[t]=e.id);break;case"FeatureCollection":for(o=[],r=0;r<e.features.length;r++)o.push(n(e.features[r],t));break;case"GeometryCollection":for(o=[],r=0;r<e.geometries.length;r++)o.push(n(e.geometries[r],t));break}return o};function globals(n){const e={_0xc60a36:3316,_0x431daa:2e3},t=_0x2397ca;n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857",t(e._0xc60a36)),n[t(2849)]=n["EPSG:4326"],n[t(e._0x431daa)]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$3={};exports$3.greenwich=0,exports$3.lisbon=-9.131906111111,exports$3.paris=2.337229166667,exports$3[_0x2397ca(289)]=-74.080916666667,exports$3[_0x2397ca(2085)]=-3.687938888889,exports$3[_0x2397ca(1509)]=12.452333333333,exports$3[_0x2397ca(1384)]=7.439583333333,exports$3.jakarta=106.807719444444,exports$3.ferro=-17.666666666667,exports$3.brussels=4.367975,exports$3[_0x2397ca(3364)]=18.058277777778,exports$3.athens=23.7163375,exports$3.oslo=10.722916666667;var units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},ignoredChar=/[\s_\-\/\(\)]/g;function match(n,e){if(n[e])return n[e];for(var t=Object.keys(n),x=e.toLowerCase().replace(ignoredChar,""),i=-1,s,o;++i<t.length;)if(s=t[i],o=s.toLowerCase().replace(ignoredChar,""),o===x)return n[s]}function projStr(n){const e={_0x47fd98:884},t={_0x517f27:1775},x={_0x5cadaa:2956},i={_0xa8a241:587},s={_0x4841d3:2181},o={_0x5f98af:2060},r=_0x2397ca;var c={},_=n.split("+").map(function(m){return m.trim()}).filter(function(m){return m}).reduce(function(m,f){const g=_0x3361;var b=f[g(2956)]("=");return b[g(2434)](!0),m[b[0].toLowerCase()]=b[1],m},{}),l,h,d,u={proj:r(3492),datum:r(3169),rf:function(m){c.rf=parseFloat(m)},lat_0:function(m){c.lat0=m*D2R$1},lat_1:function(m){c.lat1=m*D2R$1},lat_2:function(m){const f=r;c[f(o._0x5f98af)]=m*D2R$1},lat_ts:function(m){const f=r;c[f(s._0x4841d3)]=m*D2R$1},lon_0:function(m){c.long0=m*D2R$1},lon_1:function(m){c.long1=m*D2R$1},lon_2:function(m){c.long2=m*D2R$1},alpha:function(m){c.alpha=parseFloat(m)*D2R$1},gamma:function(m){c.rectified_grid_angle=parseFloat(m)},lonc:function(m){const f=r;c[f(i._0xa8a241)]=m*D2R$1},x_0:function(m){c.x0=parseFloat(m)},y_0:function(m){c.y0=parseFloat(m)},k_0:function(m){c.k0=parseFloat(m)},k:function(m){c.k0=parseFloat(m)},a:function(m){c.a=parseFloat(m)},b:function(m){c.b=parseFloat(m)},r_a:function(){c.R_A=!0},zone:function(m){c.zone=parseInt(m,10)},south:function(){c.utmSouth=!0},towgs84:function(m){const f=r;c.datum_params=m[f(x._0x5cadaa)](",").map(function(g){return parseFloat(g)})},to_meter:function(m){const f=r;c[f(2682)]=parseFloat(m)},units:function(m){c.units=m;var f=match(units,m);f&&(c.to_meter=f.to_meter)},from_greenwich:function(m){const f=r;c[f(1356)]=m*D2R$1},pm:function(m){var f=match(exports$3,m);c.from_greenwich=(f||parseFloat(m))*D2R$1},nadgrids:function(m){const f=r;m===f(196)?c.datumCode="none":c[f(t._0x517f27)]=m},axis:function(m){const f=r;var g="ewnsud";m.length===3&&g.indexOf(m.substr(0,1))!==-1&&g[f(e._0x47fd98)](m.substr(1,1))!==-1&&g.indexOf(m.substr(2,1))!==-1&&(c.axis=m)},approx:function(){c.approx=!0}};for(l in _)h=_[l],l in u?(d=u[l],typeof d=="function"?d(h):c[d]=h):c[l]=h;return typeof c.datumCode=="string"&&c[r(3169)]!=="WGS84"&&(c.datumCode=c.datumCode[r(2741)]()),c}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(n){const e={_0x397f4e:3994,_0x3b7c3e:256,_0x486ecb:3451},t=_0x2397ca;if(typeof n!==t(e._0x397f4e))throw new Error(t(3550));this.text=n.trim(),this.level=0,this.place=0,this.root=null,this[t(e._0x3b7c3e)]=[],this.currentObject=null,this[t(e._0x486ecb)]=NEUTRAL}Parser.prototype.readCharicter=function(){const n={_0x41ea3a:3451,_0x53b3c9:920,_0x35fe87:3701,_0x298e8b:721,_0xfb6a02:1752},e=_0x2397ca;var t=this.text[this[e(714)]++];if(this[e(n._0x41ea3a)]!==QUOTED)for(;whitespace[e(n._0x53b3c9)](t);){if(this.place>=this.text.length)return;t=this.text[this[e(714)]++]}switch(this.state){case NEUTRAL:return this[e(1088)](t);case KEYWORD:return this[e(n._0x35fe87)](t);case QUOTED:return this.quoted(t);case AFTERQUOTE:return this[e(n._0x298e8b)](t);case NUMBER:return this[e(n._0xfb6a02)](t);case ENDED:return}},Parser.prototype.afterquote=function(n){const e={_0x3264a6:2866},t=_0x2397ca;if(n==='"'){this.word+='"',this.state=QUOTED;return}if(endThings[t(920)](n)){this[t(e._0x3264a6)]=this[t(2866)].trim(),this.afterItem(n);return}throw new Error(t(1496)+n+t(3639)+this.place)},Parser.prototype.afterItem=function(n){const e={_0x5b184d:2866,_0x23c31d:256},t=_0x2397ca;if(n===","){this.word!==null&&this.currentObject.push(this.word),this[t(e._0x5b184d)]=null,this.state=NEUTRAL;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this[t(2866)]=null),this.state=NEUTRAL,this.currentObject=this[t(e._0x23c31d)].pop(),!this.currentObject&&(this.state=ENDED);return}},Parser.prototype.number=function(n){const e={_0x1912a9:2866,_0x5e8100:2139},t=_0x2397ca;if(digets.test(n)){this.word+=n;return}if(endThings.test(n)){this[t(e._0x1912a9)]=parseFloat(this[t(e._0x1912a9)]),this.afterItem(n);return}throw new Error(`havn't handled "`+n+t(e._0x5e8100)+this.place)},Parser.prototype[_0x2397ca(2264)]=function(n){const e=_0x2397ca;if(n==='"'){this[e(3451)]=AFTERQUOTE;return}this.word+=n},Parser.prototype.keyword=function(n){const e={_0x2ee837:2866,_0x5b390b:2434},t=_0x2397ca;if(keyword[t(920)](n)){this[t(e._0x2ee837)]+=n;return}if(n==="["){var x=[];x.push(this.word),this.level++,this.root===null?this.root=x:this[t(3310)].push(x),this.stack[t(e._0x5b390b)](this.currentObject),this.currentObject=x,this.state=NEUTRAL;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)},Parser.prototype.neutral=function(n){const e={_0x32ffbe:2866,_0x47e850:3451},t=_0x2397ca;if(latin.test(n)){this.word=n,this.state=KEYWORD;return}if(n==='"'){this.word="",this.state=QUOTED;return}if(digets.test(n)){this[t(e._0x32ffbe)]=n,this[t(e._0x47e850)]=NUMBER;return}if(endThings.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)},Parser.prototype.output=function(){const n={_0x4d160b:714,_0x54c8ea:484,_0x4ebbe9:3451},e=_0x2397ca;for(;this[e(n._0x4d160b)]<this[e(n._0x54c8ea)].length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this[e(n._0x4ebbe9)])};function parseString(n){const e=_0x2397ca;var t=new Parser(n);return t[e(3672)]()}function mapit(n,e,t){Array[_0x2397ca({_0x2cee23:4056}._0x2cee23)](e)&&(t.unshift(e),e=null);var s=e?{}:n,o=t.reduce(function(r,c){return sExpr(c,r),r},s);e&&(n[e]=o)}function sExpr(n,e){const t={_0x59a43f:2027,_0x4790bd:4056,_0x2a7c1e:2741,_0x434707:1414},x=_0x2397ca;if(!Array.isArray(n)){e[n]=!0;return}var i=n.shift();if(i==="PARAMETER"&&(i=n.shift()),n[x(t._0x59a43f)]===1){if(Array[x(t._0x4790bd)](n[0])){e[i]={},sExpr(n[0],e[i]);return}e[i]=n[0];return}if(!n.length){e[i]=!0;return}if(i===x(1503)){e[i]=n;return}if(i==="AXIS"){!(i in e)&&(e[i]=[]),e[i].push(n);return}!Array.isArray(i)&&(e[i]={});var s;switch(i){case"UNIT":case x(1514):case"VERT_DATUM":e[i]={name:n[0][x(t._0x2a7c1e)](),convert:n[1]},n.length===3&&sExpr(n[2],e[i]);return;case"SPHEROID":case x(1410):e[i]={name:n[0],a:n[1],rf:n[2]},n.length===4&&sExpr(n[3],e[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case x(t._0x434707):case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case x(2993):case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]],mapit(e,i,n);return;default:for(s=-1;++s<n.length;)if(!Array.isArray(n[s]))return sExpr(n,e[i]);return mapit(e,i,n)}}var D2R=.017453292519943295;function rename(n,e){var t=e[0],x=e[1];!(t in n)&&x in n&&(n[t]=n[x],e.length===3&&(n[t]=e[2](n[t])))}function d2r(n){return n*D2R}function cleanWKT(n){const e={_0x1199ea:1461,_0x2f2690:3963,_0x513d5d:3096,_0x915d20:1599,_0x19acff:1464,_0x5f2f49:884,_0x5ec7e2:2204,_0xf658a9:2231,_0x454a2f:1344,_0x50d30b:2027,_0x5e9a25:3800,_0x19b67d:2044,_0x36da5f:1627,_0xd3c52f:3065,_0x5de5b8:2320,_0x2e52d3:3169,_0x39cf9c:2242,_0x29e293:3169,_0x1fdb69:2320,_0x485c40:561,_0x4c7b76:2320,_0x273042:3065,_0x4de5bd:3169,_0x457102:2652,_0x1b1a55:1068,_0x2f0d24:244,_0x5c70a7:2368,_0x333a21:545,_0x4313ee:4043,_0xbafec2:3256,_0x3df04d:3951,_0x13acff:2371,_0x231d4a:2060,_0x5eb1d0:3558,_0x227a5a:2964,_0x479001:3971,_0x4f079c:1865,_0x1b2c6:3492,_0x7835e0:217},t=_0x2397ca;if(n[t(968)]==="GEOGCS"?n.projName=t(e._0x1199ea):n.type===t(e._0x2f2690)?(n.projName=t(2073),n.local=!0):typeof n.PROJECTION=="object"?n[t(3492)]=Object.keys(n.PROJECTION)[0]:n.projName=n[t(e._0x513d5d)],n[t(e._0x915d20)]){for(var x="",i=0,s=n[t(1599)][t(2027)];i<s;++i){var o=[n.AXIS[i][0][t(2741)](),n.AXIS[i][1][t(2741)]()];o[0].indexOf(t(e._0x19acff))!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?x+="n":o[0][t(e._0x5f2f49)](t(e._0x5ec7e2))!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]===t(2204)?x+="s":o[0][t(884)]("east")!==-1||(o[0]==="x"||o[0]===t(e._0xf658a9))&&o[1]==="east"?x+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]===t(e._0x454a2f))&&(x+="w")}x.length===2&&(x+="u"),x[t(e._0x50d30b)]===3&&(n.axis=x)}n[t(1627)]&&(n[t(e._0x5e9a25)]=n[t(1627)][t(e._0x19b67d)][t(2741)](),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n[t(2320)][t(3065)]&&(n.to_meter=n[t(e._0x36da5f)].convert*n.DATUM[t(e._0xd3c52f)].a):n.to_meter=n.UNIT.convert));var r=n.GEOGCS;n.type==="GEOGCS"&&(r=n),r&&(r[t(e._0x5de5b8)]?n[t(e._0x2e52d3)]=r[t(2320)][t(e._0x19b67d)].toLowerCase():n.datumCode=r.name.toLowerCase(),n[t(3169)][t(e._0x39cf9c)](0,2)==="d_"&&(n.datumCode=n.datumCode[t(2242)](2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)===t(2180)&&(n.datumCode=n.datumCode.slice(0,-6)),n[t(e._0x29e293)].slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n[t(3169)][t(e._0x5f2f49)]("belge")&&(n.datumCode="rnb72"),r.DATUM&&r[t(e._0x1fdb69)].SPHEROID&&(n.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n[t(e._0x485c40)][t(2741)]().slice(0,13)==="international"&&(n[t(561)]="intl"),n.a=r[t(e._0x4c7b76)][t(e._0x273042)].a,n.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r[t(2320)]&&r[t(e._0x1fdb69)].TOWGS84&&(n[t(1229)]=r.DATUM.TOWGS84),~n[t(e._0x4de5bd)].indexOf("osgb_1936")&&(n.datumCode=t(3276)),~n[t(3169)].indexOf("osni_1952")&&(n.datumCode=t(e._0x457102)),(~n[t(e._0x4de5bd)].indexOf("tm65")||~n.datumCode[t(e._0x5f2f49)](t(2201)))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode=t(e._0x1b1a55))),n.b&&!isFinite(n.b)&&(n.b=n.a);function c(h){var d=n.to_meter||1;return h*d}var _=function(h){return rename(n,h)},l=[["standard_parallel_1","Standard_Parallel_1"],[t(2958),t(e._0x2f0d24)],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],[t(2850),t(e._0x5c70a7)],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],[t(211),"Northing at false origin"],["central_meridian","Central_Meridian"],[t(545),"Longitude of natural origin"],[t(e._0x333a21),t(e._0x4313ee)],["latitude_of_origin",t(2411)],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin",t(1039)],["scale_factor","Scale_Factor"],["k0",t(e._0xbafec2)],[t(3951),"Latitude_Of_Center"],[t(e._0x3df04d),"Latitude_of_center"],["lat0","latitude_of_center",d2r],[t(698),"Longitude_Of_Center"],["longitude_of_center",t(e._0x13acff)],["longc","longitude_of_center",d2r],["x0","false_easting",c],["y0",t(211),c],["long0",t(545),d2r],[t(217),"latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],[t(e._0x231d4a),"standard_parallel_2",d2r],[t(e._0x5eb1d0),t(e._0x227a5a)],[t(2708),"azimuth",d2r],[t(e._0x479001),"name"]];l[t(1255)](_),!n[t(e._0x4f079c)]&&n.longc&&(n[t(e._0x1b2c6)]==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n[t(587)]),!n.lat_ts&&n.lat1&&(n.projName===t(2889)||n.projName==="Polar Stereographic (variant B)")&&(n[t(e._0x7835e0)]=d2r(n.lat1>0?90:-90),n.lat_ts=n.lat1)}function wkt(n){const e={_0x994a2a:2568},t=_0x2397ca;var x=parseString(n),i=x[t(2568)](),s=x[t(e._0x994a2a)]();x.unshift(["name",s]),x[t(2946)]([t(968),i]);var o={};return sExpr(x,o),cleanWKT(o),o}function defs(n){const e={_0x4fd2c9:2027,_0x23fbe6:3994,_0x5c8ad0:4014},t=_0x2397ca;var x=this;if(arguments[t(e._0x4fd2c9)]===2){var i=arguments[1];typeof i===t(e._0x23fbe6)?i.charAt(0)==="+"?defs[n]=projStr(arguments[1]):defs[n]=wkt(arguments[1]):defs[n]=i}else if(arguments.length===1){if(Array.isArray(n))return n[t(e._0x5c8ad0)](function(s){const o=t;Array.isArray(s)?defs[o(1701)](x,s):defs(s)});if(typeof n=="string"){if(n in defs)return defs[n]}else"EPSG"in n?defs["EPSG:"+n.EPSG]=n:"ESRI"in n?defs["ESRI:"+n.ESRI]=n:"IAU2000"in n?defs["IAU2000:"+n.IAU2000]=n:console.log(n);return}}globals(defs);function testObj(n){return typeof n=="string"}function testDef(n){return n in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS",_0x2397ca(794),"GEODETICDATUM",_0x2397ca(2993),"ENGINEERINGCRS"];function testWKT(n){return codeWords[_0x2397ca({_0x61286f:3133}._0x61286f)](function(x){return n.indexOf(x)>-1})}var codes=["3857","900913",_0x2397ca(3801),_0x2397ca(312)];function checkMercator(n){var t=match(n,_0x2397ca(2817));if(t){var x=match(t,"epsg");return x&&codes.indexOf(x)>-1}}function checkProjStr(n){const e={_0x40cff9:3126},t=_0x2397ca;var x=match(n,t(e._0x40cff9));if(x)return match(x,t(1917))}function testProj(n){return n[0]==="+"}function parse(n){if(testObj(n)){if(testDef(n))return defs[n];if(testWKT(n)){var e=wkt(n);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(n))return projStr(n)}else return n}function extend(n,e){n=n||{};var t,x;if(!e)return n;for(x in e)t=e[x],t!==void 0&&(n[x]=t);return n}function msfnz(n,e,t){var x=n*e;return t/Math.sqrt(1-x*x)}function sign(n){return n<0?-1:1}function adjust_lon(n){return Math[_0x2397ca({_0x380a57:889}._0x380a57)](n)<=SPI?n:n-sign(n)*TWO_PI}function tsfnz(n,e,t){var x=n*t,i=.5*n;return x=Math.pow((1-x)/(1+x),i),Math.tan(.5*(HALF_PI-e))/x}function phi2z(n,e){for(var t=.5*n,x,i,s=HALF_PI-2*Math.atan(e),o=0;o<=15;o++)if(x=n*Math.sin(s),i=HALF_PI-2*Math.atan(e*Math.pow((1-x)/(1+x),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function init$v(){const n={_0xa6ac61:2212},e=_0x2397ca;var t=this.b/this.a;this.es=1-t*t,!("x0"in this)&&(this.x0=0),!("y0"in this)&&(this.y0=0),this.e=Math[e(2880)](this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math[e(n._0xa6ac61)](this.lat_ts),Math.cos(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function forward$u(n){const e={_0x5d4176:3765},t=_0x2397ca;var x=n.x,i=n.y;if(i*R2D>90&&i*R2D<-90&&x*R2D>180&&x*R2D<-180)return null;var s,o;if(Math.abs(Math.abs(i)-HALF_PI)<=EPSLN)return null;if(this[t(e._0x5d4176)])s=this.x0+this.a*this.k0*adjust_lon(x-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*i));else{var r=Math.sin(i),c=tsfnz(this.e,i,r);s=this.x0+this.a*this.k0*adjust_lon(x-this.long0),o=this.y0-this.a*this.k0*Math.log(c)}return n.x=s,n.y=o,n}function inverse$u(n){const e={_0x1a33d6:1997},t=_0x2397ca;var x=n.x-this.x0,i=n.y-this.y0,s,o;if(this.sphere)o=HALF_PI-2*Math[t(2271)](Math[t(1997)](-i/(this.a*this.k0)));else{var r=Math[t(e._0x1a33d6)](-i/(this.a*this.k0));if(o=phi2z(this.e,r),o===-9999)return null}return s=adjust_lon(this[t(1865)]+x/(this.a*this.k0)),n.x=s,n.y=o,n}var names$w=[_0x2397ca(3752),"Popular Visualisation Pseudo Mercator","Mercator_1SP",_0x2397ca(3081),_0x2397ca(537)],merc={init:init$v,forward:forward$u,inverse:inverse$u,names:names$w};function init$u(){}function identity(n){return n}var names$v=["longlat","identity"],longlat={init:init$u,forward:identity,inverse:identity,names:names$v},projs=[merc,longlat],names$u={},projStore=[];function add$1(n,e){var t=projStore.length;return n.names?(projStore[t]=n,n.names.forEach(function(x){names$u[x.toLowerCase()]=t}),this):(console.log(e),!0)}function get$1(n){if(!n)return!1;var e=n.toLowerCase();if(typeof names$u[e]<"u"&&projStore[names$u[e]])return projStore[names$u[e]]}function start(){projs.forEach(add$1)}var projections={start,add:add$1,get:get$1},exports$2={};exports$2.MERIT={a:6378137,rf:298.257,ellipseName:_0x2397ca(826)},exports$2[_0x2397ca(2618)]={a:6378136,rf:298.257,ellipseName:_0x2397ca(3720)},exports$2[_0x2397ca(2571)]={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},exports$2.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},exports$2.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},exports$2.APL4={a:6378137,rf:298.25,ellipseName:_0x2397ca(2177)},exports$2[_0x2397ca(4044)]={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},exports$2.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},exports$2.andrae={a:637710443e-2,rf:300,ellipseName:_0x2397ca(2638)},exports$2.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},exports$2.GRS67={a:6378160,rf:298.247167427,ellipseName:_0x2397ca(3130)},exports$2.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},exports$2[_0x2397ca(3534)]={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},exports$2.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},exports$2.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},exports$2.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},exports$2.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:_0x2397ca(3911)},exports$2.CPM={a:63757387e-1,rf:334.29,ellipseName:_0x2397ca(496)},exports$2[_0x2397ca(3295)]={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},exports$2.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},exports$2.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},exports$2.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},exports$2.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:_0x2397ca(280)},exports$2[_0x2397ca(412)]={a:6377295664e-3,rf:300.8017,ellipseName:_0x2397ca(1639)},exports$2[_0x2397ca(3932)]={a:6377298556e-3,rf:300.8017,ellipseName:_0x2397ca(2740)},exports$2[_0x2397ca(298)]={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},exports$2.fschr60m={a:6378155,rf:298.3,ellipseName:_0x2397ca(3827)},exports$2.fschr68={a:6378150,rf:298.3,ellipseName:_0x2397ca(3990)},exports$2[_0x2397ca(918)]={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},exports$2.hough={a:6378270,rf:297,ellipseName:"Hough"},exports$2.intl={a:6378388,rf:297,ellipseName:_0x2397ca(723)},exports$2.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},exports$2.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},exports$2.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},exports$2[_0x2397ca(3925)]={a:63781575e-1,b:63567722e-1,ellipseName:_0x2397ca(249)},exports$2[_0x2397ca(3442)]={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},exports$2.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},exports$2.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},exports$2[_0x2397ca(3986)]={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},exports$2[_0x2397ca(206)]={a:6378165,rf:298.3,ellipseName:"WGS 60"},exports$2[_0x2397ca(693)]={a:6378145,rf:298.25,ellipseName:"WGS 66"},exports$2[_0x2397ca(3536)]={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$2.WGS84={a:6378137,rf:298.257223563,ellipseName:_0x2397ca(526)};exports$2.sphere={a:6370997,b:6370997,ellipseName:_0x2397ca(2061)};function eccentricity(n,e,t,x){var i=n*n,s=e*e,o=(i-s)/i,r=0;x?(n*=1-o*(SIXTH+o*(RA4+o*RA6)),i=n*n,o=0):r=Math.sqrt(o);var c=(i-s)/s;return{es:o,e:r,ep2:c}}function sphere(n,e,t,x,i){if(!n){var s=match(exports$2,x);!s&&(s=WGS84),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<EPSLN)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var exports$1={};exports$1[_0x2397ca(2748)]={towgs84:"0,0,0",ellipse:_0x2397ca(2849),datumName:"WGS84"},exports$1.ch1903={towgs84:_0x2397ca(720),ellipse:"bessel",datumName:"swiss"},exports$1.ggrs87={towgs84:_0x2397ca(1830),ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},exports$1.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},exports$1[_0x2397ca(170)]={nadgrids:_0x2397ca(591),ellipse:"clrk66",datumName:"North_American_Datum_1927"},exports$1[_0x2397ca(2402)]={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},exports$1.carthage={towgs84:_0x2397ca(1939),ellipse:_0x2397ca(1427),datumName:"Carthage 1934 Tunisia"},exports$1.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},exports$1.osni52={towgs84:_0x2397ca(1987),ellipse:"airy",datumName:"Irish National"},exports$1[_0x2397ca(3859)]={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},exports$1.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},exports$1.nzgd49={towgs84:_0x2397ca(2109),ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},exports$1.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},exports$1[_0x2397ca(1792)]={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},exports$1.beduaram={towgs84:_0x2397ca(2604),ellipse:"clrk80",datumName:"Beduaram"},exports$1.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},exports$1.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:_0x2397ca(2004)};function datum(n,e,t,x,i,s,o){const r={_0x24949b:1229},c=_0x2397ca;var _={};return n===void 0||n==="none"?_.datum_type=PJD_NODATUM:_[c(863)]=PJD_WGS84,e&&(_.datum_params=e.map(parseFloat),(_[c(1229)][0]!==0||_.datum_params[1]!==0||_.datum_params[2]!==0)&&(_.datum_type=PJD_3PARAM),_.datum_params.length>3&&(_.datum_params[3]!==0||_.datum_params[4]!==0||_[c(1229)][5]!==0||_.datum_params[6]!==0)&&(_.datum_type=PJD_7PARAM,_.datum_params[3]*=SEC_TO_RAD,_[c(r._0x24949b)][4]*=SEC_TO_RAD,_.datum_params[5]*=SEC_TO_RAD,_.datum_params[6]=_.datum_params[6]/1e6+1)),o&&(_.datum_type=PJD_GRIDSHIFT,_.grids=o),_.a=t,_.b=x,_.es=i,_.ep2=s,_}var loadedNadgrids={};function nadgrid(n,e){const t={_0x5d08cc:4057},x=_0x2397ca;var i=new DataView(e),s=detectLittleEndian(i),o=readHeader(i,s);o.nSubgrids>1&&console[x(855)](x(t._0x5d08cc));var r=readSubgrids(i,o,s),c={header:o,subgrids:r};return loadedNadgrids[n]=c,c}function getNadgrids(n){if(n===void 0)return null;var e=n.split(",");return e.map(parseNadgridString)}function parseNadgridString(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:loadedNadgrids[n]||null,isNull:!1}}function secondsToRadians(n){return n/3600*Math.PI/180}function detectLittleEndian(n){const e=_0x2397ca;var t=n.getInt32(8,!1);return t===11?!1:(t=n[e(796)](8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(n,e){const t={_0xa51f97:3997},x=_0x2397ca;return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:decodeString(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n[x(t._0xa51f97)](168,e)}}function decodeString(n,e,t){const x={_0x2385e3:1513,_0x41a0c0:3593},i=_0x2397ca;return String[i(x._0x2385e3)].apply(null,new Uint8Array(n[i(x._0x41a0c0)].slice(e,t)))}function readSubgrids(n,e,t){const x={_0x2e8fcb:3741,_0xa06668:2184,_0x2965de:3621,_0x343ddb:3574,_0x1c8a0d:1051,_0x39c4b0:3625},i=_0x2397ca;for(var s=176,o=[],r=0;r<e.nSubgrids;r++){var c=readGridHeader(n,s,t),_=readGridNodes(n,s,c,t),l=Math.round(1+(c.upperLongitude-c[i(x._0x2e8fcb)])/c.longitudeInterval),h=Math.round(1+(c[i(x._0xa06668)]-c[i(x._0x2965de)])/c.latitudeInterval);o.push({ll:[secondsToRadians(c.lowerLongitude),secondsToRadians(c.lowerLatitude)],del:[secondsToRadians(c[i(x._0x343ddb)]),secondsToRadians(c[i(x._0x1c8a0d)])],lim:[l,h],count:c[i(x._0x39c4b0)],cvs:mapNodes(_)})}return o}function mapNodes(n){return n.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(n,e,t){const x={_0x2bbbb9:3997},i=_0x2397ca;return{name:decodeString(n,e+8,e+16).trim(),parent:decodeString(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n[i(x._0x2bbbb9)](e+120,t),latitudeInterval:n[i(3997)](e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function readGridNodes(n,e,t,x){const i={_0x4cb34d:3625},s=_0x2397ca;for(var o=e+176,r=16,c=[],_=0;_<t[s(i._0x4cb34d)];_++){var l={latitudeShift:n.getFloat32(o+_*r,x),longitudeShift:n[s(1576)](o+_*r+4,x),latitudeAccuracy:n.getFloat32(o+_*r+8,x),longitudeAccuracy:n[s(1576)](o+_*r+12,x)};c.push(l)}return c}function Projection(n,e){const t={_0x4ce9d0:1229,_0x5e4714:2775,_0x3734cd:3169,_0x2ccfdc:3878,_0x1d05b9:217,_0xff697a:3896},x=_0x2397ca;if(!(this instanceof Projection))return new Projection(n);e=e||function(h){if(h)throw h};var i=parse(n);if(typeof i!="object"){e(n);return}var s=Projection.projections.get(i.projName);if(!s){e(n);return}if(i.datumCode&&i.datumCode!=="none"){var o=match(exports$1,i.datumCode);o&&(i.datum_params=i[x(t._0x4ce9d0)]||(o[x(798)]?o.towgs84.split(","):null),i[x(561)]=o.ellipse,i.datumName=o.datumName?o[x(t._0x5e4714)]:i[x(t._0x3734cd)])}i.k0=i.k0||1,i[x(3878)]=i[x(t._0x2ccfdc)]||x(2052),i.ellps=i.ellps||x(2748),i.lat1=i.lat1||i[x(t._0x1d05b9)];var r=sphere(i.a,i.b,i.rf,i[x(561)],i.sphere),c=eccentricity(r.a,r.b,r.rf,i.R_A),_=getNadgrids(i.nadgrids),l=i.datum||datum(i.datumCode,i[x(1229)],r.a,r.b,c.es,c.ep2,_);extend(this,i),extend(this,s),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=c.es,this.e=c.e,this.ep2=c.ep2,this.datum=l,this[x(t._0xff697a)](),e(null,this)}Projection.projections=projections,Projection.projections[_0x2397ca(546)]();function compareDatums(n,e){const t={_0x2c58fb:1229,_0x3e3379:863},x=_0x2397ca;return n.datum_type!==e.datum_type||n.a!==e.a||Math[x(889)](n.es-e.es)>5e-11?!1:n.datum_type===PJD_3PARAM?n[x(1229)][0]===e.datum_params[0]&&n[x(t._0x2c58fb)][1]===e[x(1229)][1]&&n.datum_params[2]===e.datum_params[2]:n[x(t._0x3e3379)]===PJD_7PARAM?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e[x(1229)][1]&&n.datum_params[2]===e[x(1229)][2]&&n.datum_params[3]===e[x(1229)][3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n[x(1229)][6]===e.datum_params[6]:!0}function geodeticToGeocentric(n,e,t){const x={_0x280a98:1314,_0x48052b:2880},i=_0x2397ca;var s=n.x,o=n.y,r=n.z?n.z:0,c,_,l,h;if(o<-HALF_PI&&o>-1.001*HALF_PI)o=-HALF_PI;else if(o>HALF_PI&&o<1.001*HALF_PI)o=HALF_PI;else{if(o<-HALF_PI)return{x:-1/0,y:-1/0,z:n.z};if(o>HALF_PI)return{x:1/0,y:1/0,z:n.z}}return s>Math.PI&&(s-=2*Math.PI),_=Math.sin(o),h=Math[i(x._0x280a98)](o),l=_*_,c=t/Math[i(x._0x48052b)](1-e*l),{x:(c+r)*h*Math.cos(s),y:(c+r)*h*Math[i(2212)](s),z:(c*(1-e)+r)*_}}function geocentricToGeodetic(n,e,t,x){const i={_0x4c8205:2880,_0x173ed1:2880},s=_0x2397ca;var o=1e-12,r=o*o,c=30,_,l,h,d,u,m,f,g,b,y,C,v,M,w=n.x,H=n.y,D=n.z?n.z:0,F,L,B;if(_=Math[s(i._0x4c8205)](w*w+H*H),l=Math[s(i._0x173ed1)](w*w+H*H+D*D),_/t<o){if(F=0,l/t<o)return L=HALF_PI,B=-x,{x:n.x,y:n.y,z:n.z}}else F=Math.atan2(H,w);h=D/l,d=_/l,u=1/Math.sqrt(1-e*(2-e)*d*d),g=d*(1-e)*u,b=h*u,M=0;do M++,f=t/Math.sqrt(1-e*b*b),B=_*g+D*b-f*(1-e*b*b),m=e*f/(f+B),u=1/Math.sqrt(1-m*(2-m)*d*d),y=d*(1-m)*u,C=h*u,v=C*g-y*b,g=y,b=C;while(v*v>r&&M<c);return L=Math.atan(C/Math.abs(y)),{x:F,y:L,z:B}}function geocentricToWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===PJD_7PARAM){var x=t[0],i=t[1],s=t[2],o=t[3],r=t[4],c=t[5],_=t[6];return{x:_*(n.x-c*n.y+r*n.z)+x,y:_*(c*n.x+n.y-o*n.z)+i,z:_*(-r*n.x+o*n.y+n.z)+s}}}function geocentricFromWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===PJD_7PARAM){var x=t[0],i=t[1],s=t[2],o=t[3],r=t[4],c=t[5],_=t[6],l=(n.x-x)/_,h=(n.y-i)/_,d=(n.z-s)/_;return{x:l+c*h-r*d,y:-c*l+h+o*d,z:r*l-o*h+d}}}function checkParams(n){return n===PJD_3PARAM||n===PJD_7PARAM}function datum_transform(n,e,t){const x={_0x15048d:863,_0x28d921:863},i=_0x2397ca;if(compareDatums(n,e)||n.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var s=n.a,o=n.es;if(n[i(x._0x15048d)]===PJD_GRIDSHIFT){var r=applyGridShift(n,!1,t);if(r!==0)return;s=SRS_WGS84_SEMIMAJOR,o=SRS_WGS84_ESQUARED}var c=e.a,_=e.b,l=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(c=SRS_WGS84_SEMIMAJOR,_=SRS_WGS84_SEMIMINOR,l=SRS_WGS84_ESQUARED),o===l&&s===c&&!checkParams(n[i(863)])&&!checkParams(e[i(x._0x28d921)]))return t;if(t=geodeticToGeocentric(t,o,s),checkParams(n.datum_type)&&(t=geocentricToWgs84(t,n.datum_type,n.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e[i(x._0x28d921)],e.datum_params)),t=geocentricToGeodetic(t,l,c,_),e.datum_type===PJD_GRIDSHIFT){var h=applyGridShift(e,!0,t);if(h!==0)return}return t}function applyGridShift(n,e,t){const x={_0x5ea6c9:2027,_0x24e2b9:2434,_0x225cb0:2044,_0x5c61a8:257,_0x302949:4047},i=_0x2397ca;if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var s={x:-t.x,y:t.y},o={x:Number.NaN,y:Number.NaN},r=[],c=0;c<n.grids[i(x._0x5ea6c9)];c++){var _=n.grids[c];if(r[i(x._0x24e2b9)](_[i(x._0x225cb0)]),_.isNull){o=s;break}if(_.grid===null){if(_[i(x._0x5c61a8)])return console.log("Unable to find mandatory grid '"+_.name+"'"),-1;continue}var l=_.grid.subgrids[0],h=(Math.abs(l.del[1])+Math[i(889)](l.del[0]))/1e4,d=l.ll[0]-h,u=l.ll[1]-h,m=l.ll[0]+(l[i(4047)][0]-1)*l.del[0]+h,f=l.ll[1]+(l[i(x._0x302949)][1]-1)*l.del[1]+h;if(!(u>s.y||d>s.x||f<s.y||m<s.x)&&(o=applySubgridShift(s,e,l),!isNaN(o.x)))break}return isNaN(o.x)?(console[i(855)](i(2324)+-s.x*R2D+" "+s.y*R2D+i(813)+r+"'"),-1):(t.x=-o.x,t.y=o.y,0)}function applySubgridShift(n,e,t){const x={_0x2b0ba4:2970,_0x52b781:855},i=_0x2397ca;var s={x:Number[i(x._0x2b0ba4)],y:Number.NaN};if(isNaN(n.x))return s;var o={x:n.x,y:n.y};o.x-=t.ll[0],o.y-=t.ll[1],o.x=adjust_lon(o.x-Math.PI)+Math.PI;var r=nadInterpolate(o,t);if(e){if(isNaN(r.x))return s;r.x=o.x-r.x,r.y=o.y-r.y;var c=9,_=1e-12,l,h;do{if(h=nadInterpolate(r,t),isNaN(h.x)){console[i(x._0x52b781)]("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:o.x-(h.x+r.x),y:o.y-(h.y+r.y)},r.x+=l.x,r.y+=l.y}while(c--&&Math.abs(l.x)>_&&Math.abs(l.y)>_);if(c<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=adjust_lon(r.x+t.ll[0]),s.y=r.y+t.ll[1]}else!isNaN(r.x)&&(s.x=n.x+r.x,s.y=n.y+r.y);return s}function nadInterpolate(n,e){const t={_0x3440d9:4047,_0x5bf6b8:3411},x=_0x2397ca;var i={x:n.x/e.del[0],y:n.y/e.del[1]},s={x:Math.floor(i.x),y:Math.floor(i.y)},o={x:i.x-1*s.x,y:i.y-1*s.y},r={x:Number.NaN,y:Number.NaN},c;if(s.x<0||s.x>=e.lim[0]||s.y<0||s.y>=e.lim[1])return r;c=s.y*e[x(t._0x3440d9)][0]+s.x;var _={x:e.cvs[c][0],y:e.cvs[c][1]};c++;var l={x:e.cvs[c][0],y:e.cvs[c][1]};c+=e.lim[0];var h={x:e.cvs[c][0],y:e[x(t._0x5bf6b8)][c][1]};c--;var d={x:e.cvs[c][0],y:e.cvs[c][1]},u=o.x*o.y,m=o.x*(1-o.y),f=(1-o.x)*(1-o.y),g=(1-o.x)*o.y;return r.x=f*_.x+m*l.x+g*d.x+u*h.x,r.y=f*_.y+m*l.y+g*d.y+u*h.y,r}function adjust_axis(n,e,t){const x={_0x409093:884},i=_0x2397ca;var s=t.x,o=t.y,r=t.z||0,c,_,l,h={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(c=s,"ew"[i(884)](n.axis[l])!==-1?_="x":_="y"):l===1?(c=o,"ns"[i(x._0x409093)](n.axis[l])!==-1?_="y":_="x"):(c=r,_="z"),n[i(3878)][l]){case"e":h[_]=c;break;case"w":h[_]=-c;break;case"n":h[_]=c;break;case"s":h[_]=-c;break;case"u":t[_]!==void 0&&(h.z=c);break;case"d":t[_]!==void 0&&(h.z=-c);break;default:return null}return h}function common(n){const e={_0x121f0b:2027},t=_0x2397ca;var x={x:n[0],y:n[1]};return n[t(e._0x121f0b)]>2&&(x.z=n[2]),n[t(2027)]>3&&(x.m=n[3]),x}function checkSanity(n){checkCoord(n.x),checkCoord(n.y)}function checkCoord(n){const e={_0x2487fb:1026,_0x1f7acd:1569},t=_0x2397ca;if(typeof Number.isFinite===t(e._0x2487fb)){if(Number[t(2151)](n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError(t(e._0x1f7acd))}function checkNotWGS(n,e){const t={_0x2edd94:1860,_0x1f789c:3169},x=_0x2397ca;return(n.datum.datum_type===PJD_3PARAM||n[x(t._0x2edd94)].datum_type===PJD_7PARAM||n.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum[x(863)]===PJD_3PARAM||e[x(1860)][x(863)]===PJD_7PARAM||e[x(1860)].datum_type===PJD_GRIDSHIFT)&&n[x(t._0x1f789c)]!=="WGS84"}function transform(n,e,t,x){const i={_0x164d48:1860,_0x49e7f5:2849,_0x49a6ce:2682,_0x17d9d:2682,_0x3dc367:1860,_0x43ad9f:1356,_0x2f0b63:3492,_0x1c3050:3509,_0xba5cca:2682,_0x348418:2682},s=_0x2397ca;var o;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var r=t.z!==void 0;if(checkSanity(t),n[s(i._0x164d48)]&&e.datum&&checkNotWGS(n,e)&&(o=new Projection(s(i._0x49e7f5)),t=transform(n,o,t,x),n=o),x&&n.axis!=="enu"&&(t=adjust_axis(n,!1,t)),n.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n[s(i._0x49a6ce)],y:t.y*n[s(i._0x17d9d)],z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=datum_transform(n.datum,e[s(i._0x3dc367)],t),!!t)return e[s(1356)]&&(t={x:t.x-e[s(i._0x43ad9f)],y:t.y,z:t.z||0}),e[s(i._0x2f0b63)]==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e[s(i._0x1c3050)](t),e[s(i._0xba5cca)]&&(t={x:t.x/e.to_meter,y:t.y/e[s(i._0x348418)],z:t.z||0})),x&&e.axis!==s(2052)?adjust_axis(e,!0,t):(!r&&delete t.z,t)}var wgs84=Projection(_0x2397ca(2849));function transformer(n,e,t,x){const i={_0x5e2023:3670},s=_0x2397ca;var o,r,c;return Array.isArray(t)?(o=transform(n,e,t,x)||{x:NaN,y:NaN},t[s(2027)]>2?typeof n[s(2044)]!==s(3819)&&n.name==="geocent"||typeof e.name<"u"&&e.name===s(i._0x5e2023)?typeof o.z=="number"?[o.x,o.y,o.z].concat(t.splice(3)):[o.x,o.y,t[2]][s(3210)](t.splice(3)):[o.x,o.y].concat(t[s(2713)](2)):[o.x,o.y]):(r=transform(n,e,t,x),c=Object.keys(t),c.length===2||c.forEach(function(_){const l=s;if(typeof n.name<"u"&&n[l(2044)]==="geocent"||typeof e[l(2044)]<"u"&&e[l(2044)]==="geocent"){if(_==="x"||_==="y"||_==="z")return}else if(_==="x"||_==="y")return;r[_]=t[_]}),r)}function checkProj(n){return n instanceof Projection?n:n.oProj?n.oProj:Projection(n)}function proj4(n,e,t){const x=_0x2397ca;n=checkProj(n);var i=!1,s;return typeof e>"u"?(e=n,n=wgs84,i=!0):(typeof e.x!==x(3819)||Array.isArray(e))&&(t=e,e=n,n=wgs84,i=!0),e=checkProj(e),t?transformer(n,e,t):(s={forward:function(o,r){return transformer(n,e,o,r)},inverse:function(o,r){return transformer(e,n,o,r)}},i&&(s.oProj=e),s)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90,mgrs={forward:forward$t,inverse:inverse$t,toPoint};function forward$t(n,e){return e=e||5,encode$1(LLtoUTM({lat:n[1],lon:n[0]}),e)}function inverse$t(n){var e=UTMtoLL(decode(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(n){const e={_0x1b15bd:2937},t=_0x2397ca;var x=UTMtoLL(decode(n.toUpperCase()));return x.lat&&x[t(2231)]?[x.lon,x[t(3736)]]:[(x[t(e._0x1b15bd)]+x.right)/2,(x.top+x.bottom)/2]}function degToRad(n){return n*(Math.PI/180)}function radToDeg(n){return 180*(n/Math.PI)}function LLtoUTM(n){const e={_0x3ec343:3736,_0x4cbc14:2231,_0x3e59be:2212,_0x2def18:3966,_0xbe6ccf:2207},t=_0x2397ca;var x=n[t(e._0x3ec343)],i=n[t(e._0x4cbc14)],s=6378137,o=.00669438,r=.9996,c,_,l,h,d,u,m,f=degToRad(x),g=degToRad(i),b,y;y=Math[t(3927)]((i+180)/6)+1,i===180&&(y=60),x>=56&&x<64&&i>=3&&i<12&&(y=32),x>=72&&x<84&&(i>=0&&i<9?y=31:i>=9&&i<21?y=33:i>=21&&i<33?y=35:i>=33&&i<42&&(y=37)),c=(y-1)*6-180+3,b=degToRad(c),_=o/(1-o),l=s/Math.sqrt(1-o*Math[t(e._0x3e59be)](f)*Math[t(2212)](f)),h=Math.tan(f)*Math[t(e._0x2def18)](f),d=_*Math.cos(f)*Math[t(1314)](f),u=Math[t(1314)](f)*(g-b),m=s*((1-o/4-3*o*o/64-5*o*o*o/256)*f-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*f)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*f)-35*o*o*o/3072*Math.sin(6*f));var C=r*l*(u+(1-h+d)*u*u*u/6+(5-18*h+h*h+72*d-58*_)*u*u*u*u*u/120)+5e5,v=r*(m+l*Math.tan(f)*(u*u/2+(5-h+9*d+4*d*d)*u*u*u*u/24+(61-58*h+h*h+600*d-330*_)*u*u*u*u*u*u/720));return x<0&&(v+=1e7),{northing:Math.round(v),easting:Math[t(e._0xbe6ccf)](C),zoneNumber:y,zoneLetter:getLetterDesignator(x)}}function UTMtoLL(n){const e={_0x532b6e:2212,_0x59f022:2212,_0x22b411:3966,_0x11afb2:1314,_0x47ef00:1123},t=_0x2397ca;var x=n.northing,i=n.easting,s=n.zoneLetter,o=n.zoneNumber;if(o<0||o>60)return null;var r=.9996,c=6378137,_=.00669438,l,h=(1-Math[t(2880)](1-_))/(1+Math[t(2880)](1-_)),d,u,m,f,g,b,y,C,v,M=i-5e5,w=x;s<"N"&&(w-=1e7),y=(o-1)*6-180+3,l=_/(1-_),b=w/r,C=b/(c*(1-_/4-3*_*_/64-5*_*_*_/256)),v=C+(3*h/2-27*h*h*h/32)*Math.sin(2*C)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*C)+151*h*h*h/96*Math[t(e._0x532b6e)](6*C),d=c/Math.sqrt(1-_*Math[t(e._0x59f022)](v)*Math[t(2212)](v)),u=Math[t(3966)](v)*Math.tan(v),m=l*Math.cos(v)*Math[t(1314)](v),f=c*(1-_)/Math[t(1274)](1-_*Math.sin(v)*Math[t(2212)](v),1.5),g=M/(d*r);var H=v-d*Math[t(e._0x22b411)](v)/f*(g*g/2-(5+3*u+10*m-4*m*m-9*l)*g*g*g*g/24+(61+90*u+298*m+45*u*u-252*l-3*m*m)*g*g*g*g*g*g/720);H=radToDeg(H);var D=(g-(1+2*u+m)*g*g*g/6+(5-2*m+28*u-3*m*m+8*l+24*u*u)*g*g*g*g*g/120)/Math[t(e._0x11afb2)](v);D=y+radToDeg(D);var F;if(n.accuracy){var L=UTMtoLL({northing:n.northing+n[t(e._0x47ef00)],easting:n[t(915)]+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});F={top:L.lat,right:L.lon,bottom:H,left:D}}else F={lat:H,lon:D};return F}function getLetterDesignator(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function encode$1(n,e){const t={_0x3d3968:1680},x=_0x2397ca;var i=x(3067)+n.easting,s="00000"+n[x(t._0x3d3968)];return n.zoneNumber+n[x(3825)]+get100kID(n.easting,n.northing,n.zoneNumber)+i.substr(i.length-5,e)+s.substr(s.length-5,e)}function get100kID(n,e,t){var x=get100kSetForZone(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return getLetter100kID(i,s,x)}function get100kSetForZone(n){var e=n%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(n,e,t){const x=_0x2397ca;var i=t-1,s=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(i),o=SET_ORIGIN_ROW_LETTERS[x(2578)](i),r=s+n-1,c=o+e,_=!1;r>Z&&(r=r-Z+A-1,_=!0),(r===I||s<I&&r>I||(r>I||s<I)&&_)&&r++,(r===O||s<O&&r>O||(r>O||s<O)&&_)&&(r++,r===I&&r++),r>Z&&(r=r-Z+A-1),c>V?(c=c-V+A-1,_=!0):_=!1,(c===I||o<I&&c>I||(c>I||o<I)&&_)&&c++,(c===O||o<O&&c>O||(c>O||o<O)&&_)&&(c++,c===I&&c++),c>V&&(c=c-V+A-1);var l=String.fromCharCode(r)+String.fromCharCode(c);return l}function decode(n){const e={_0x323a44:1216,_0x568c8:3208},t=_0x2397ca;if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var x=n.length,i=null,s="",o,r=0;!/[A-Z]/.test(o=n.charAt(r));){if(r>=2)throw t(e._0x323a44)+n;s+=o,r++}var c=parseInt(s,10);if(r===0||r+3>x)throw"MGRSPoint bad conversion from: "+n;var _=n[t(1850)](r++);if(_<="A"||_==="B"||_==="Y"||_>="Z"||_==="I"||_==="O")throw t(e._0x568c8)+_+t(620)+n;i=n.substring(r,r+=2);for(var l=get100kSetForZone(c),h=getEastingFromChar(i.charAt(0),l),d=getNorthingFromChar(i[t(1850)](1),l);d<getMinNorthing(_);)d+=2e6;var u=x-r;if(u%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var m=u/2,f=0,g=0,b,y,C,v,M;return m>0&&(b=1e5/Math.pow(10,m),y=n[t(1967)](r,r+m),f=parseFloat(y)*b,C=n.substring(r+m),g=parseFloat(C)*b),v=f+h,M=g+d,{easting:v,northing:M,zoneLetter:_,zoneNumber:c,accuracy:b}}function getEastingFromChar(n,e){for(var x=SET_ORIGIN_COLUMN_LETTERS[_0x2397ca(2578)](e-1),i=1e5,s=!1;x!==n.charCodeAt(0);){if(x++,x===I&&x++,x===O&&x++,x>Z){if(s)throw"Bad character: "+n;x=A,s=!0}i+=1e5}return i}function getNorthingFromChar(n,e){const t={_0x438d34:3908},x=_0x2397ca;if(n>"V")throw x(t._0x438d34)+n;for(var i=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),s=0,o=!1;i!==n.charCodeAt(0);){if(i++,i===I&&i++,i===O&&i++,i>V){if(o)throw"Bad character: "+n;i=A,o=!0}s+=1e5}return s}function getMinNorthing(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Point(n,e,t){const x={_0x1520eb:4056,_0x5b9aeb:2956},i=_0x2397ca;if(!(this instanceof Point))return new Point(n,e,t);if(Array[i(x._0x1520eb)](n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n===i(3994)&&typeof e>"u"){var s=n[i(x._0x5b9aeb)](",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point[_0x2397ca(2111)]=function(n){return new Point(toPoint(n))},Point.prototype.toMGRS=function(n){return forward$t([this.x,this.y],n)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(n){var e=[];e[0]=C00-n*(C02+n*(C04+n*(C06+n*C08))),e[1]=n*(C22-n*(C04+n*(C06+n*C08)));var t=n*n;return e[2]=t*(C44-n*(C46+n*C48)),t*=n,e[3]=t*(C66-n*C68),e[4]=t*n*C88,e}function pj_mlfn(n,e,t,x){return t*=e,e*=e,x[0]*n-t*(x[1]+e*(x[2]+e*(x[3]+e*x[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(n,e,t){for(var x=1/(1-e),i=n,s=MAX_ITER$3;s;--s){var o=Math.sin(i),r=1-e*o*o;if(r=(pj_mlfn(i,o,Math.cos(i),t)-n)*(r*Math.sqrt(r))*x,i-=r,Math.abs(r)<EPSLN)return i}return i}function init$t(){const n={_0x29f2d0:1865},e=_0x2397ca;this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this[e(1865)]!==void 0?this[e(n._0x29f2d0)]:0,this.lat0=this[e(217)]!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$s(n){const e={_0x1cb35e:889,_0xea5d0e:3402,_0x1ae570:2633,_0x3c2e2c:3966},t=_0x2397ca;var x=n.x,i=n.y,s=adjust_lon(x-this[t(1865)]),o,r,c,_=Math.sin(i),l=Math.cos(i);if(this.es){var d=l*s,u=Math.pow(d,2),m=this[t(e._0x1ae570)]*Math[t(1274)](l,2),f=Math.pow(m,2),g=Math.abs(l)>EPSLN?Math[t(e._0x3c2e2c)](i):0,b=Math.pow(g,2),y=Math.pow(b,2);o=1-this.es*Math[t(1274)](_,2),d=d/Math.sqrt(o);var C=pj_mlfn(i,_,l,this.en);r=this.a*(this.k0*d*(1+u/6*(1-b+m+u/20*(5-18*b+y+14*m-58*b*m+u/42*(61+179*y-y*b-479*b)))))+this.x0,c=this.a*(this.k0*(C-this.ml0+_*s*d/2*(1+u/12*(5-b+9*m+4*f+u/30*(61+y-58*b+270*m-330*b*m+u/56*(1385+543*y-y*b-3111*b))))))+this.y0}else{var h=l*Math.sin(s);if(Math[t(e._0x1cb35e)](Math.abs(h)-1)<EPSLN)return 93;if(r=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,c=l*Math.cos(s)/Math.sqrt(1-Math.pow(h,2)),h=Math[t(889)](c),h>=1){if(h-1>EPSLN)return 93;c=0}else c=Math[t(e._0xea5d0e)](c);i<0&&(c=-c),c=this.a*this.k0*(c-this[t(217)])+this.y0}return n.x=r,n.y=c,n}function inverse$s(n){const e={_0x405994:3715},t=_0x2397ca;var x,i,s,o,r=(n.x-this.x0)*(1/this.a),c=(n.y-this.y0)*(1/this.a);if(this.es)if(x=this[t(e._0x405994)]+c/this.k0,i=pj_inv_mlfn(x,this.es,this.en),Math.abs(i)<HALF_PI){var u=Math.sin(i),m=Math.cos(i),f=Math.abs(m)>EPSLN?Math.tan(i):0,g=this.ep2*Math.pow(m,2),b=Math.pow(g,2),y=Math.pow(f,2),C=Math.pow(y,2);x=1-this.es*Math[t(1274)](u,2);var v=r*Math[t(2880)](x)/this.k0,M=Math.pow(v,2);x=x*f,s=i-x*M/(1-this.es)*.5*(1-M/12*(5+3*y-9*g*y+g-4*b-M/30*(61+90*y-252*g*y+45*C+46*g-M/56*(1385+3633*y+4095*C+1574*C*y)))),o=adjust_lon(this.long0+v*(1-M/6*(1+2*y+g-M/20*(5+28*y+24*C+8*g*y+6*g-M/42*(61+662*y+1320*C+720*C*y))))/m)}else s=HALF_PI*sign(c),o=0;else{var _=Math[t(1997)](r/this.k0),l=.5*(_-1/_),h=this.lat0+c/this.k0,d=Math.cos(h);x=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(l,2))),s=Math.asin(x),c<0&&(s=-s),l===0&&d===0?o=0:o=adjust_lon(Math.atan2(l,d)+this.long0)}return n.x=o,n.y=s,n}var names$t=["Fast_Transverse_Mercator","Fast Transverse Mercator"],tmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function sinh(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function hypot(n,e){const t={_0x14013f:1274},x=_0x2397ca;n=Math[x(889)](n),e=Math.abs(e);var i=Math[x(1146)](n,e),s=Math[x(3173)](n,e)/(i||1);return i*Math.sqrt(1+Math[x(t._0x14013f)](s,2))}function log1py(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function asinhy(n){var e=Math.abs(n);return e=log1py(e*(1+e/(hypot(1,e)+1))),n<0?-e:e}function gatg(n,e){const t={_0x2efe13:1314},x=_0x2397ca;for(var i=2*Math[x(t._0x2efe13)](2*e),s=n.length-1,o=n[s],r=0,c;--s>=0;)c=-r+i*o+n[s],r=o,o=c;return e+c*Math[x(2212)](2*e)}function clens(n,e){const t=_0x2397ca;for(var x=2*Math.cos(e),i=n.length-1,s=n[i],o=0,r;--i>=0;)r=-o+x*s+n[i],o=s,s=r;return Math[t(2212)](e)*r}function cosh(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function clens_cmplx(n,e,t){const x={_0x1103f8:1314},i=_0x2397ca;for(var s=Math.sin(e),o=Math[i(x._0x1103f8)](e),r=sinh(t),c=cosh(t),_=2*o*c,l=-2*s*r,h=n.length-1,d=n[h],u=0,m=0,f=0,g,b;--h>=0;)g=m,b=u,m=d,u=f,d=-g+_*m-l*u+n[h],f=-b+l*m+_*u;return _=s*c,l=o*r,[_*d-l*f,_*f+l*d]}function init$s(){const n={_0x361ae2:1865,_0x283e06:2882,_0x4a7b43:2880,_0x58eae1:1877,_0x466aba:3810,_0x3e7f1c:302,_0x105680:2882},e=_0x2397ca;if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this[e(2660)]&&(tmerc.init[e(1701)](this),this[e(3509)]=tmerc.forward,this.inverse=tmerc[e(2488)]),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this[e(n._0x361ae2)]=this.long0!==void 0?this.long0:0,this[e(217)]=this.lat0!==void 0?this.lat0:0,this.cgb=[],this[e(3810)]=[],this.utg=[],this[e(n._0x283e06)]=[];var t=this.es/(1+Math[e(n._0x4a7b43)](1-this.es)),x=t/(2-t),i=x;this.cgb[0]=x*(2+x*(-2/3+x*(-2+x*(116/45+x*(26/45+x*(-2854/675)))))),this.cbg[0]=x*(-2+x*(2/3+x*(4/3+x*(-82/45+x*(32/45+x*(4642/4725)))))),i=i*x,this[e(n._0x58eae1)][1]=i*(7/3+x*(-8/5+x*(-227/45+x*(2704/315+x*(2323/945))))),this.cbg[1]=i*(5/3+x*(-16/15+x*(-13/9+x*(904/315+x*(-1522/945))))),i=i*x,this[e(1877)][2]=i*(56/15+x*(-136/35+x*(-1262/105+x*(73814/2835)))),this.cbg[2]=i*(-26/15+x*(34/21+x*(8/5+x*(-12686/2835)))),i=i*x,this.cgb[3]=i*(4279/630+x*(-332/35+x*(-399572/14175))),this[e(n._0x466aba)][3]=i*(1237/630+x*(-12/5+x*(-24832/14175))),i=i*x,this.cgb[4]=i*(4174/315+x*(-144838/6237)),this.cbg[4]=i*(-734/315+x*(109598/31185)),i=i*x,this[e(1877)][5]=i*(601676/22275),this[e(3810)][5]=i*(444337/155925),i=Math.pow(x,2),this.Qn=this.k0/(1+x)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=x*(-.5+x*(2/3+x*(-37/96+x*(1/360+x*(81/512+x*(-96199/604800)))))),this[e(n._0x283e06)][0]=x*(.5+x*(-2/3+x*(5/16+x*(41/180+x*(-127/288+x*(7891/37800)))))),this.utg[1]=i*(-1/48+x*(-1/15+x*(437/1440+x*(-46/105+x*(1118711/3870720))))),this.gtu[1]=i*(13/48+x*(-3/5+x*(557/1440+x*(281/630+x*(-1983433/1935360))))),i=i*x,this[e(n._0x3e7f1c)][2]=i*(-17/480+x*(37/840+x*(209/4480+x*(-5569/90720)))),this.gtu[2]=i*(61/240+x*(-103/140+x*(15061/26880+x*(167603/181440)))),i=i*x,this.utg[3]=i*(-4397/161280+x*(11/504+x*(830251/7257600))),this[e(n._0x105680)][3]=i*(49561/161280+x*(-179/168+x*(6601661/7257600))),i=i*x,this.utg[4]=i*(-4583/161280+x*(108847/3991680)),this.gtu[4]=i*(34729/80640+x*(-3418889/1995840)),i=i*x,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var s=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(s+clens(this.gtu,2*s))}function forward$r(n){const e={_0x24bd01:1314,_0x1ed47d:2882},t=_0x2397ca;var x=adjust_lon(n.x-this.long0),i=n.y;i=gatg(this[t(3810)],i);var s=Math.sin(i),o=Math[t(e._0x24bd01)](i),r=Math.sin(x),c=Math.cos(x);i=Math.atan2(s,c*o),x=Math[t(3171)](r*o,hypot(s,o*c)),x=asinhy(Math.tan(x));var _=clens_cmplx(this[t(e._0x1ed47d)],2*i,2*x);i=i+_[0],x=x+_[1];var l,h;return Math.abs(x)<=2.623395162778?(l=this.a*(this.Qn*x)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,h=1/0),n.x=l,n.y=h,n}function inverse$r(n){const e={_0x4a4c79:1314},t=_0x2397ca;var x=(n.x-this.x0)*(1/this.a),i=(n.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,x=x/this.Qn;var s,o;if(Math.abs(x)<=2.623395162778){var r=clens_cmplx(this.utg,2*i,2*x);i=i+r[0],x=x+r[1],x=Math.atan(sinh(x));var c=Math.sin(i),_=Math[t(e._0x4a4c79)](i),l=Math[t(2212)](x),h=Math.cos(x);i=Math.atan2(c*h,hypot(l,h*_)),x=Math[t(3171)](l,h*_),s=adjust_lon(x+this.long0),o=gatg(this.cgb,i)}else s=1/0,o=1/0;return n.x=s,n.y=o,n}var names$s=[_0x2397ca(2263),"Extended Transverse Mercator",_0x2397ca(3921),"Transverse_Mercator","Transverse Mercator","tmerc"],etmerc={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function adjust_zone(n,e){if(n===void 0){if(n=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var dependsOn="etmerc";function init$r(){const n={_0x2416e7:689,_0x2c72c8:1719,_0x5efa8f:475,_0x503411:3896},e=_0x2397ca;var t=adjust_zone(this[e(n._0x2416e7)],this.long0);if(t===void 0)throw new Error(e(n._0x2c72c8));this[e(217)]=0,this.long0=(6*Math.abs(t)-183)*D2R$1,this.x0=5e5,this.y0=this[e(n._0x5efa8f)]?1e7:0,this.k0=.9996,etmerc[e(n._0x503411)].apply(this),this.forward=etmerc.forward,this[e(2488)]=etmerc.inverse}var names$r=[_0x2397ca(793),_0x2397ca(2433)],utm={init:init$r,names:names$r,dependsOn};function srat(n,e){return Math[_0x2397ca({_0x20a0ad:1274}._0x20a0ad)]((1-n)/(1+n),e)}var MAX_ITER$2=20;function init$q(){const n=_0x2397ca;var e=Math.sin(this.lat0),t=Math[n(1314)](this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this[n(1651)]=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math[n(1274)](Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*e,this.ratexp))}function forward$q(n){const e={_0x36d8d4:2271,_0x35e282:3966},t=_0x2397ca;var x=n.x,i=n.y;return n.y=2*Math[t(e._0x36d8d4)](this.K*Math.pow(Math[t(e._0x35e282)](.5*i+FORTPI),this.C)*srat(this.e*Math[t(2212)](i),this[t(3260)]))-HALF_PI,n.x=this.C*x,n}function inverse$q(n){const e={_0x492e79:2271,_0x1433b0:889},t=_0x2397ca;for(var x=1e-14,i=n.x/this.C,s=n.y,o=Math[t(1274)](Math.tan(.5*s+FORTPI)/this.K,1/this.C),r=MAX_ITER$2;r>0&&(s=2*Math[t(e._0x492e79)](o*srat(this.e*Math.sin(n.y),-.5*this.e))-HALF_PI,!(Math[t(e._0x1433b0)](s-n.y)<x));--r)n.y=s;return r?(n.x=i,n.y=s,n):null}var names$q=["gauss"],gauss={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function init$p(){const n={_0x2f36ea:1314,_0x8c77f6:1651},e=_0x2397ca;gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math[e(n._0x2f36ea)](this[e(n._0x8c77f6)]),this.R2=2*this.rc,!this.title&&(this.title="Oblique Stereographic Alternative"))}function forward$p(n){const e={_0x5d150d:2419,_0x3cbbcd:1970},t=_0x2397ca;var x,i,s,o;return n.x=adjust_lon(n.x-this.long0),gauss.forward[t(1701)](this,[n]),x=Math.sin(n.y),i=Math.cos(n.y),s=Math.cos(n.x),o=this.k0*this.R2/(1+this.sinc0*x+this[t(e._0x5d150d)]*i*s),n.x=o*i*Math.sin(n.x),n.y=o*(this[t(2419)]*x-this[t(e._0x3cbbcd)]*i*s),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse$p(n){const e={_0x26a465:2419,_0x5888f4:1651},t=_0x2397ca;var x,i,s,o,r;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,r=Math.sqrt(n.x*n.x+n.y*n.y)){var c=2*Math.atan2(r,this.R2);x=Math[t(2212)](c),i=Math.cos(c),o=Math[t(997)](i*this.sinc0+n.y*x*this[t(e._0x26a465)]/r),s=Math.atan2(n.x*x,r*this.cosc0*i-n.y*this[t(1970)]*x)}else o=this[t(e._0x5888f4)],s=0;return n.x=s,n.y=o,gauss[t(2488)].apply(this,[n]),n.x=adjust_lon(n.x+this.long0),n}var names$p=["Stereographic_North_Pole",_0x2397ca(1407),"Polar_Stereographic","sterea",_0x2397ca(2558),"Double_Stereographic"],sterea={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p};function ssfn_(n,e,t){const x={_0x5cd8ed:1274},i=_0x2397ca;return e*=t,Math.tan(.5*(HALF_PI+n))*Math[i(x._0x5cd8ed)]((1-e)/(1+e),.5*t)}function init$o(){const n={_0x2f18b3:1195,_0x3be02d:2181,_0x540f3a:3112,_0x42812e:1314},e=_0x2397ca;this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this[e(2128)])<=EPSLN&&(this.lat0>0?this[e(n._0x2f18b3)]=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math[e(889)](this.coslat0)<=EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this[e(1195)]*this[e(n._0x3be02d)],this.con*Math.sin(this.lat_ts))),this[e(1751)]=msfnz(this.e,this[e(3112)],this[e(2128)]),this.X0=2*Math.atan(this.ssfn_(this.lat0,this[e(n._0x540f3a)],this.e))-HALF_PI,this.cosX0=Math[e(n._0x42812e)](this.X0),this.sinX0=Math.sin(this.X0))}function forward$o(n){const e={_0x3ba223:889,_0x1513a7:2551,_0x583541:2212,_0x12c08a:889,_0x9896b7:1196,_0x2600d5:1314},t=_0x2397ca;var x=n.x,i=n.y,s=Math.sin(i),o=Math.cos(i),r,c,_,l,h,d,u=adjust_lon(x-this.long0);return Math.abs(Math.abs(x-this.long0)-Math.PI)<=EPSLN&&Math.abs(i+this.lat0)<=EPSLN?(n.x=NaN,n.y=NaN,n):this.sphere?(r=2*this.k0/(1+this.sinlat0*s+this.coslat0*o*Math[t(1314)](u)),n.x=this.a*r*o*Math.sin(u)+this.x0,n.y=this.a*r*(this.coslat0*s-this.sinlat0*o*Math[t(1314)](u))+this.y0,n):(c=2*Math[t(2271)](this.ssfn_(i,s,this.e))-HALF_PI,l=Math.cos(c),_=Math.sin(c),Math[t(e._0x3ba223)](this.coslat0)<=EPSLN?(h=tsfnz(this.e,i*this.con,this.con*s),d=2*this.a*this.k0*h/this[t(e._0x1513a7)],n.x=this.x0+d*Math[t(e._0x583541)](x-this.long0),n.y=this.y0-this.con*d*Math.cos(x-this[t(1865)]),n):(Math[t(e._0x12c08a)](this.sinlat0)<EPSLN?(r=2*this.a*this.k0/(1+l*Math.cos(u)),n.y=r*_):(r=2*this.a*this.k0*this.ms1/(this[t(e._0x9896b7)]*(1+this.sinX0*_+this.cosX0*l*Math[t(e._0x2600d5)](u))),n.y=r*(this[t(1196)]*_-this[t(3597)]*l*Math.cos(u))+this.y0),n.x=r*l*Math[t(e._0x583541)](u)+this.x0,n))}function inverse$o(n){const e={_0x223c37:3765,_0x2ba6a0:1865,_0x157890:3112,_0x4823ad:2128,_0x2626d2:217,_0x151911:2212,_0x4aecea:1196,_0x3238b2:2212,_0x262236:1196},t=_0x2397ca;n.x-=this.x0,n.y-=this.y0;var x,i,s,o,r,c=Math.sqrt(n.x*n.x+n.y*n.y);if(this[t(e._0x223c37)]){var _=2*Math[t(2271)](c/(2*this.a*this.k0));return x=this[t(e._0x2ba6a0)],i=this[t(217)],c<=EPSLN?(n.x=x,n.y=i,n):(i=Math.asin(Math.cos(_)*this[t(e._0x157890)]+n.y*Math.sin(_)*this[t(e._0x4823ad)]/c),Math.abs(this.coslat0)<EPSLN?this[t(e._0x2626d2)]>0?x=adjust_lon(this.long0+Math.atan2(n.x,-1*n.y)):x=adjust_lon(this.long0+Math.atan2(n.x,n.y)):x=adjust_lon(this.long0+Math[t(3171)](n.x*Math[t(2212)](_),c*this[t(2128)]*Math.cos(_)-n.y*this.sinlat0*Math[t(2212)](_))),n.x=x,n.y=i,n)}else if(Math.abs(this.coslat0)<=EPSLN){if(c<=EPSLN)return i=this[t(e._0x2626d2)],x=this[t(1865)],n.x=x,n.y=i,n;n.x*=this.con,n.y*=this[t(1195)],s=c*this.cons/(2*this.a*this.k0),i=this.con*phi2z(this.e,s),x=this.con*adjust_lon(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else o=2*Math[t(2271)](c*this.cosX0/(2*this.a*this.k0*this.ms1)),x=this[t(1865)],c<=EPSLN?r=this.X0:(r=Math.asin(Math.cos(o)*this.sinX0+n.y*Math[t(e._0x151911)](o)*this[t(e._0x4aecea)]/c),x=adjust_lon(this.long0+Math.atan2(n.x*Math[t(e._0x3238b2)](o),c*this[t(e._0x262236)]*Math.cos(o)-n.y*this.sinX0*Math.sin(o)))),i=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+r)));return n.x=x,n.y=i,n}var names$o=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],stere={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o,ssfn_};function init$n(){const n={_0x6974d9:2880,_0x3f516b:2880,_0x58584d:1314},e=_0x2397ca;var t=this.lat0;this[e(409)]=this.long0;var x=Math.sin(t),i=this.a,s=this.rf,o=1/s,r=2*o-Math[e(1274)](o,2),c=this.e=Math.sqrt(r);this.R=this.k0*i*Math[e(n._0x6974d9)](1-r)/(1-r*Math.pow(x,2)),this.alpha=Math[e(n._0x3f516b)](1+r/(1-r)*Math[e(1274)](Math[e(n._0x58584d)](t),4)),this.b0=Math.asin(x/this.alpha);var _=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math[e(855)](Math.tan(Math.PI/4+t/2)),h=Math.log((1+c*x)/(1-c*x));this.K=_-this.alpha*l+this.alpha*c/2*h}function forward$n(n){const e={_0x2730f1:3966,_0x23b6cb:409,_0x2b5aa0:2212},t=_0x2397ca;var x=Math.log(Math[t(e._0x2730f1)](Math.PI/4-n.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),s=-this.alpha*(x+i)+this.K,o=2*(Math.atan(Math.exp(s))-Math.PI/4),r=this.alpha*(n.x-this[t(e._0x23b6cb)]),c=Math.atan(Math[t(e._0x2b5aa0)](r)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math[t(1314)](r))),_=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(r));return n.y=this.R/2*Math.log((1+Math.sin(_))/(1-Math.sin(_)))+this.y0,n.x=this.R*c+this.x0,n}function inverse$n(n){const e={_0xacb83f:997,_0x5d9191:2212,_0x2e6498:2271,_0x272f9c:997},t=_0x2397ca;for(var x=n.x-this.x0,i=n.y-this.y0,s=x/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math[t(e._0xacb83f)](Math.cos(this.b0)*Math.sin(o)+Math[t(e._0x5d9191)](this.b0)*Math.cos(o)*Math.cos(s)),c=Math[t(e._0x2e6498)](Math.sin(s)/(Math[t(1314)](this.b0)*Math.cos(s)-Math.sin(this.b0)*Math[t(3966)](o))),_=this[t(409)]+c/this.alpha,l=0,h=r,d=-1e3,u=0;Math.abs(h-d)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math[t(3966)](Math.PI/4+Math[t(e._0x272f9c)](this.e*Math.sin(h))/2)),d=h,h=2*Math[t(2271)](Math.exp(l))-Math.PI/2}return n.x=_,n.y=h,n}var names$n=["somerc"],somerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n},TOL=1e-7;function isTypeA(n){const e={_0x56bfba:3808,_0x56a749:390},t=_0x2397ca;var x=[t(e._0x56bfba),"Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof n[t(3096)]===t(2036)?Object[t(e._0x56a749)](n.PROJECTION)[0]:n.PROJECTION;return"no_uoff"in n||t(638)in n||x.indexOf(i)!==-1}function init$m(){const n={_0x350540:3912,_0x44aca0:3912,_0x3f5c61:2880,_0x69340d:1314,_0x513b49:3966,_0x2ecb50:1189,_0x4a37d6:993,_0x1eb515:3075,_0x4bdb68:855},e=_0x2397ca;var t,x,i,s,o,r,c,_,l,h,d=0,u,m=0,f=0,g=0,b=0,y=0,C=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var M=!1;if(e(n._0x350540)in this&&(M=!0),v&&(C=this.alpha),M&&(d=this[e(n._0x44aca0)]*D2R$1),v||M)m=this.longc;else if(f=this.long1,b=this.lat1,g=this[e(1015)],y=this.lat2,Math.abs(b-y)<=TOL||(t=Math[e(889)](b))<=TOL||Math[e(889)](t-HALF_PI)<=TOL||Math[e(889)](Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(y)-HALF_PI)<=TOL)throw new Error;var w=1-this.es;x=Math[e(n._0x3f5c61)](w),Math.abs(this.lat0)>EPSLN?(_=Math.sin(this.lat0),i=Math[e(n._0x69340d)](this.lat0),t=1-this.es*_*_,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*x/t,s=this.B*x/(i*Math[e(2880)](t)),o=s*s-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=s,this.E*=Math.pow(tsfnz(this.e,this.lat0,_),this.B)):(this.B=1/x,this.A=this.k0,this.E=s=o=1),v||M?(v?(u=Math[e(997)](Math.sin(C)/s),!M&&(d=C)):(u=d,C=Math.asin(s*Math.sin(u))),this.lam0=m-Math.asin(.5*(o-1/o)*Math[e(n._0x513b49)](u))/this.B):(r=Math.pow(tsfnz(this.e,b,Math[e(2212)](b)),this.B),c=Math.pow(tsfnz(this.e,y,Math.sin(y)),this.B),o=this.E/r,l=(c-r)/(c+r),h=this.E*this.E,h=(h-c*r)/(h+c*r),t=f-g,t<-Math.pi?g-=TWO_PI:t>Math.pi&&(g+=TWO_PI),this.lam0=adjust_lon(.5*(f+g)-Math.atan(h*Math.tan(.5*this.B*(f-g))/l)/this.B),u=Math.atan(2*Math[e(2212)](this.B*adjust_lon(f-this.lam0))/(o-1/o)),d=C=Math.asin(s*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this[e(n._0x2ecb50)]=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this[e(1558)]=1/this.ArB,this.A*this.B,this.no_off?this[e(n._0x4a37d6)]=0:(this.u_0=Math.abs(this[e(n._0x1eb515)]*Math.atan(Math.sqrt(s*s-1)/Math.cos(C))),this.lat0<0&&(this.u_0=-this[e(n._0x4a37d6)])),o=.5*u,this.v_pole_n=this[e(3075)]*Math.log(Math.tan(FORTPI-o)),this.v_pole_s=this.ArB*Math[e(n._0x4bdb68)](Math.tan(FORTPI+o))}function forward$m(n){const e={_0x2a6a45:889,_0x251d9c:889,_0x2b67ef:855,_0x5b760c:3075,_0x551fed:3828,_0x7e2f00:3649,_0xc49df4:2019},t=_0x2397ca;var x={},i,s,o,r,c,_,l,h;if(n.x=n.x-this.lam0,Math[t(889)](Math[t(e._0x2a6a45)](n.y)-HALF_PI)>EPSLN){if(c=this.E/Math[t(1274)](tsfnz(this.e,n.y,Math[t(2212)](n.y)),this.B),_=1/c,i=.5*(c-_),s=.5*(c+_),r=Math.sin(this.B*n.x),o=(i*this.singam-r*this[t(1281)])/s,Math[t(e._0x251d9c)](Math.abs(o)-1)<EPSLN)throw new Error;h=.5*this.ArB*Math[t(e._0x2b67ef)]((1-o)/(1+o)),_=Math.cos(this.B*n.x),Math[t(889)](_)<TOL?l=this.A*n.x:l=this[t(e._0x5b760c)]*Math.atan2(i*this.cosgam+r*this.singam,_)}else h=n.y>0?this[t(3300)]:this[t(e._0x551fed)],l=this.ArB*n.y;return this[t(e._0x7e2f00)]?(x.x=l,x.y=h):(l-=this.u_0,x.x=h*this.cosrot+l*this.sinrot,x.y=l*this[t(e._0xc49df4)]-h*this.sinrot),x.x=this.a*x.x+this.x0,x.y=this.a*x.y+this.y0,x}function inverse$m(n){const e={_0xb88977:3649,_0x1706f2:2019,_0x4c607f:1189,_0x1cb944:1558,_0x9e5e23:2880,_0x13aeda:3171,_0x57f153:1281,_0x50980c:2715},t=_0x2397ca;var x,i,s,o,r,c,_,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this[t(e._0xb88977)]?(i=n.y,x=n.x):(i=n.x*this[t(e._0x1706f2)]-n.y*this[t(e._0x4c607f)],x=n.y*this[t(2019)]+n.x*this.sinrot+this[t(993)]),s=Math.exp(-this.BrA*i),o=.5*(s-1/s),r=.5*(s+1/s),c=Math.sin(this[t(e._0x1cb944)]*x),_=(c*this.cosgam+o*this.singam)/r,Math.abs(Math.abs(_)-1)<EPSLN)l.x=0,l.y=_<0?-HALF_PI:HALF_PI;else{if(l.y=this.E/Math[t(e._0x9e5e23)]((1+_)/(1-_)),l.y=phi2z(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math[t(e._0x13aeda)](o*this[t(e._0x57f153)]-c*this[t(e._0x50980c)],Math.cos(this.BrA*x))}return l.x+=this.lam0,l}var names$m=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin",_0x2397ca(2950),_0x2397ca(841),_0x2397ca(332),_0x2397ca(2914)],omerc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){const n={_0x6a7855:2060,_0x27fefb:855},e=_0x2397ca;if(!this.lat2&&(this.lat2=this.lat1),!this.k0&&(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this[e(2060)])<EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var x=Math[e(2212)](this.lat1),i=Math.cos(this.lat1),s=msfnz(this.e,x,i),o=tsfnz(this.e,this.lat1,x),r=Math.sin(this.lat2),c=Math.cos(this.lat2),_=msfnz(this.e,r,c),l=tsfnz(this.e,this[e(n._0x6a7855)],r),h=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math[e(n._0x27fefb)](s/_)/Math.log(o/l):this.ns=x,isNaN(this.ns)&&(this.ns=x),this.f0=s/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),!this.title&&(this.title="Lambert Conformal Conic")}}function forward$l(n){const e={_0x5d0ac8:889,_0x2a2354:1274},t=_0x2397ca;var x=n.x,i=n.y;Math.abs(2*Math[t(889)](i)-Math.PI)<=EPSLN&&(i=sign(i)*(HALF_PI-2*EPSLN));var s=Math[t(e._0x5d0ac8)](Math.abs(i)-HALF_PI),o,r;if(s>EPSLN)o=tsfnz(this.e,i,Math[t(2212)](i)),r=this.a*this.f0*Math[t(e._0x2a2354)](o,this.ns);else{if(s=i*this.ns,s<=0)return null;r=0}var c=this.ns*adjust_lon(x-this[t(1865)]);return n.x=this.k0*(r*Math[t(2212)](c))+this.x0,n.y=this.k0*(this.rh-r*Math[t(1314)](c))+this.y0,n}function inverse$l(n){const e={_0x47767e:2880},t=_0x2397ca;var x,i,s,o,r,c=(n.x-this.x0)/this.k0,_=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(x=Math[t(2880)](c*c+_*_),i=1):(x=-Math[t(e._0x47767e)](c*c+_*_),i=-1);var l=0;if(x!==0&&(l=Math.atan2(i*c,i*_)),x!==0||this.ns>0){if(i=1/this.ns,s=Math.pow(x/(this.a*this.f0),i),o=phi2z(this.e,s),o===-9999)return null}else o=-HALF_PI;return r=adjust_lon(l/this.ns+this[t(1865)]),n.x=r,n.y=o,n}var names$l=[_0x2397ca(1339),"Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],lcc={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function init$k(){const n={_0x376c51:1865,_0x1bda52:722,_0xa97dfb:828,_0xacb662:1314,_0xc087e8:997,_0x3b1f4a:2212,_0x5aa04e:177,_0x501db4:2430,_0x23ec84:1274},e=_0x2397ca;this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),!this[e(217)]&&(this.lat0=.863937979737193),!this[e(1865)]&&(this[e(n._0x376c51)]=.7417649320975901-.308341501185665),!this.k0&&(this.k0=.9999),this.s45=.785398163397448,this[e(n._0x1bda52)]=2*this[e(n._0xa97dfb)],this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math[e(2880)](1+this.e2*Math.pow(Math[e(n._0xacb662)](this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math[e(n._0xc087e8)](Math[e(n._0x3b1f4a)](this.fi0)/this[e(n._0x5aa04e)]),this.g=Math[e(1274)]((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this[e(n._0x501db4)])),this[e(177)]*this.e/2),this.k=Math[e(3966)](this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this[e(n._0xa97dfb)]),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math[e(n._0x23ec84)](Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math[e(n._0x3b1f4a)](this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$k(n){const e={_0x5c9948:1314,_0x1571cc:1274,_0x16a47a:3966,_0x14c1c7:828,_0x568552:532},t=_0x2397ca;var x,i,s,o,r,c,_,l=n.x,h=n.y,d=adjust_lon(l-this.long0);return x=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/x)-this.s45),s=-d*this.alfa,o=Math.asin(Math[t(e._0x5c9948)](this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math[t(e._0x5c9948)](s)),r=Math[t(997)](Math[t(e._0x5c9948)](i)*Math.sin(s)/Math.cos(o)),c=this.n*r,_=this.ro0*Math[t(e._0x1571cc)](Math[t(e._0x16a47a)](this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this[t(e._0x14c1c7)]),this.n),n.y=_*Math.cos(c)/1,n.x=_*Math[t(2212)](c)/1,!this[t(e._0x568552)]&&(n.y*=-1,n.x*=-1),n}function inverse$k(n){const e={_0x406dc4:3171,_0x2580d3:2212,_0x120120:1314,_0x3f81c9:3966,_0x502ad5:1274},t=_0x2397ca;var x,i,s,o,r,c,_,l,h=n.x;n.x=n.y,n.y=h,!this.czech&&(n.y*=-1,n.x*=-1),c=Math.sqrt(n.x*n.x+n.y*n.y),r=Math[t(e._0x406dc4)](n.y,n.x),o=r/Math[t(e._0x2580d3)](this.s0),s=2*(Math.atan(Math.pow(this.ro0/c,1/this.n)*Math[t(3966)](this.s0/2+this.s45))-this.s45),x=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math[t(e._0x120120)](s)*Math[t(1314)](o)),i=Math.asin(Math.cos(s)*Math.sin(o)/Math[t(e._0x120120)](x)),n.x=this.long0-i/this.alfa,_=x,l=0;var d=0;do n.y=2*(Math.atan(Math[t(1274)](this.k,-1/this.alfa)*Math.pow(Math[t(e._0x3f81c9)](x/2+this.s45),1/this.alfa)*Math[t(e._0x502ad5)]((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.e/2))-this.s45),Math.abs(_-n.y)<1e-10&&(l=1),_=n.y,d+=1;while(l===0&&d<15);return d>=15?null:n}var names$k=[_0x2397ca(441),"krovak"],krovak={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function mlfn(n,e,t,x,i){const s=_0x2397ca;return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-x*Math[s(2212)](6*i)}function e0fn(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function e1fn(n){return .375*n*(1+.25*n*(1+.46875*n))}function e2fn(n){return .05859375*n*n*(1+.75*n)}function e3fn(n){return n*n*n*(35/3072)}function gN(n,e,t){var x=e*t;return n/Math.sqrt(1-x*x)}function adjust_lat(n){return Math.abs(n)<HALF_PI?n:n-sign(n)*Math.PI}function imlfn(n,e,t,x,i){const s={_0x554258:2212,_0x51575d:1314},o=_0x2397ca;var r,c;r=n/e;for(var _=0;_<15;_++)if(c=(n-(e*r-t*Math.sin(2*r)+x*Math[o(s._0x554258)](4*r)-i*Math.sin(6*r)))/(e-2*t*Math[o(s._0x51575d)](2*r)+4*x*Math[o(s._0x51575d)](4*r)-6*i*Math[o(1314)](6*r)),r+=c,Math.abs(c)<=1e-10)return r;return NaN}function init$j(){const n=_0x2397ca;!this.sphere&&(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this[n(3715)]=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$j(n){const e={_0x5aec29:3171,_0x5e971f:1314},t=_0x2397ca;var x,i,s=n.x,o=n.y;if(s=adjust_lon(s-this[t(1865)]),this[t(3765)])x=this.a*Math.asin(Math.cos(o)*Math.sin(s)),i=this.a*(Math[t(e._0x5aec29)](Math.tan(o),Math[t(e._0x5e971f)](s))-this.lat0);else{var r=Math.sin(o),c=Math.cos(o),_=gN(this.a,this.e,r),l=Math.tan(o)*Math.tan(o),h=s*Math.cos(o),d=h*h,u=this.es*c*c/(1-this.es),m=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,o);x=_*h*(1-d*l*(1/6-(8-l+8*u)*d/120)),i=m-this.ml0+_*r/c*d*(.5+(5-l+6*u)*d/24)}return n.x=x+this.x0,n.y=i+this.y0,n}function inverse$j(n){const e={_0x4cddb8:997,_0x12862f:1274,_0x5a747f:1865},t=_0x2397ca;n.x-=this.x0,n.y-=this.y0;var x=n.x/this.a,i=n.y/this.a,s,o;if(this.sphere){var r=i+this.lat0;s=Math[t(e._0x4cddb8)](Math.sin(r)*Math.cos(x)),o=Math.atan2(Math.tan(x),Math[t(1314)](r))}else{var c=this.ml0/this.a+i,_=imlfn(c,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(_)-HALF_PI)<=EPSLN)return n.x=this[t(1865)],n.y=HALF_PI,i<0&&(n.y*=-1),n;var l=gN(this.a,this.e,Math.sin(_)),h=l*l*l/this.a/this.a*(1-this.es),d=Math[t(e._0x12862f)](Math.tan(_),2),u=x*this.a/l,m=u*u;s=_-l*Math.tan(_)/h*u*u*(.5-(1+3*d)*u*u/24),o=u*(1-m*(d/3+(1+3*d)*d*m/15))/Math.cos(_)}return n.x=adjust_lon(o+this[t(e._0x5a747f)]),n.y=adjust_lat(s),n}var names$j=[_0x2397ca(1094),"Cassini_Soldner","cass"],cass={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j};function qsfnz(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$i(){const n={_0x467d7e:889,_0x23aa13:217,_0xca792:2536,_0x5e9a1e:2727,_0x2469ef:3063,_0x504c5a:2536,_0x40b351:2038,_0x4180d0:3470,_0x25d201:3467,_0x5f478d:1314,_0x2d9e67:2212},e=_0x2397ca;var t=Math.abs(this.lat0);if(Math[e(n._0x467d7e)](t-HALF_PI)<EPSLN?this[e(2033)]=this[e(n._0x23aa13)]<0?this[e(2038)]:this[e(n._0xca792)]:Math[e(889)](t)<EPSLN?this.mode=this[e(n._0x5e9a1e)]:this.mode=this.OBLIQ,this.es>0){var x;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this[e(n._0x2469ef)]=authset(this.es),this.mode){case this[e(n._0x504c5a)]:this.dd=1;break;case this[e(n._0x40b351)]:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math[e(2880)](.5*this.qp),x=Math.sin(this.lat0),this[e(3467)]=qsfnz(this.e,x)/this.qp,this[e(n._0x4180d0)]=Math[e(2880)](1-this[e(n._0x25d201)]*this.sinb1),this.dd=Math[e(n._0x5f478d)](this.lat0)/(Math.sqrt(1-this.es*x*x)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this[e(2033)]===this.OBLIQ&&(this.sinph0=Math[e(n._0x2d9e67)](this.lat0),this.cosph0=Math[e(1314)](this.lat0))}function forward$i(n){const e={_0x57e0c6:426,_0x287467:2033,_0x19c0f1:2880,_0x151752:2727,_0x5e5d5d:2536,_0x383d8a:217,_0x549dc9:1314,_0x1bb9cb:2212,_0x5bb4e9:2033,_0x1f5005:426,_0x24a27c:3467,_0x220b3c:2194,_0x4b4e9e:471},t=_0x2397ca;var x,i,s,o,r,c,_,l,h,d,u=n.x,m=n.y;if(u=adjust_lon(u-this[t(1865)]),this.sphere){if(r=Math.sin(m),d=Math.cos(m),s=Math.cos(u),this.mode===this[t(e._0x57e0c6)]||this.mode===this[t(2727)]){if(i=this[t(e._0x287467)]===this.EQUIT?1+d*s:1+this.sinph0*r+this.cosph0*d*s,i<=EPSLN)return null;i=Math[t(e._0x19c0f1)](2/i),x=i*d*Math.sin(u),i*=this.mode===this[t(e._0x151752)]?r:this.cosph0*r-this.sinph0*d*s}else if(this[t(e._0x287467)]===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this[t(e._0x5e5d5d)]&&(s=-s),Math[t(889)](m+this[t(e._0x383d8a)])<EPSLN)return null;i=FORTPI-m*.5,i=2*(this.mode===this.S_POLE?Math[t(e._0x549dc9)](i):Math.sin(i)),x=i*Math[t(2212)](u),i*=s}}else{switch(_=0,l=0,h=0,s=Math.cos(u),o=Math[t(e._0x1bb9cb)](u),r=Math[t(e._0x1bb9cb)](m),c=qsfnz(this.e,r),(this.mode===this[t(426)]||this.mode===this[t(2727)])&&(_=c/this.qp,l=Math.sqrt(1-_*_)),this[t(e._0x5bb4e9)]){case this[t(e._0x1f5005)]:h=1+this[t(e._0x24a27c)]*_+this.cosb1*l*s;break;case this.EQUIT:h=1+l*s;break;case this.N_POLE:h=HALF_PI+m,c=this.qp-c;break;case this.S_POLE:h=m-HALF_PI,c=this.qp+c;break}if(Math.abs(h)<EPSLN)return null;switch(this[t(e._0x5bb4e9)]){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?i=this[t(e._0x220b3c)]*h*(this.cosb1*_-this[t(3467)]*l*s):i=(h=Math.sqrt(2/(1+l*s)))*_*this.ymf,x=this[t(e._0x4b4e9e)]*h*l*o;break;case this.N_POLE:case this.S_POLE:c>=0?(x=(h=Math.sqrt(c))*o,i=s*(this[t(2033)]===this[t(2038)]?h:-h)):x=i=0;break}}return n.x=this.a*x+this.x0,n.y=this.a*i+this.y0,n}function inverse$i(n){const e={_0x3462a6:426,_0x1ceb88:889,_0x3119c3:426,_0x5df367:217,_0x557b94:2033,_0x5e0aac:3171,_0x46b062:2038,_0x9dfcbf:1865},t=_0x2397ca;n.x-=this.x0,n.y-=this.y0;var x=n.x/this.a,i=n.y/this.a,s,o,r,c,_,l,h;if(this.sphere){var d=0,u,m=0;if(u=Math.sqrt(x*x+i*i),o=u*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this[t(e._0x3462a6)]||this.mode===this.EQUIT)&&(m=Math.sin(o),d=Math.cos(o)),this.mode){case this.EQUIT:o=Math[t(e._0x1ceb88)](u)<=EPSLN?0:Math.asin(i*m/u),x*=m,i=d*u;break;case this[t(e._0x3119c3)]:o=Math.abs(u)<=EPSLN?this[t(e._0x5df367)]:Math.asin(d*this.sinph0+i*m*this.cosph0/u),x*=m*this[t(601)],i=(d-Math.sin(o)*this.sinph0)*u;break;case this[t(2536)]:i=-i,o=HALF_PI-o;break;case this.S_POLE:o-=HALF_PI;break}s=i===0&&(this.mode===this.EQUIT||this[t(e._0x557b94)]===this.OBLIQ)?0:Math[t(e._0x5e0aac)](x,i)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this[t(2727)]){if(x/=this.dd,i*=this.dd,l=Math.sqrt(x*x+i*i),l<EPSLN)return n.x=this.long0,n.y=this.lat0,n;c=2*Math[t(997)](.5*l/this.rq),r=Math.cos(c),x*=c=Math.sin(c),this.mode===this.OBLIQ?(h=r*this.sinb1+i*c*this[t(3470)]/l,_=this.qp*h,i=l*this.cosb1*r-i*this[t(3467)]*c):(h=i*c/l,_=this.qp*h,i=l*r)}else if(this.mode===this.N_POLE||this.mode===this[t(e._0x46b062)]){if(this.mode===this.N_POLE&&(i=-i),_=x*x+i*i,!_)return n.x=this[t(1865)],n.y=this.lat0,n;h=1-_/this.qp,this.mode===this.S_POLE&&(h=-h)}s=Math[t(e._0x5e0aac)](x,i),o=authlat(Math[t(997)](h),this[t(3063)])}return n.x=adjust_lon(this[t(e._0x9dfcbf)]+s),n.y=o,n}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(n){var e,t=[];return t[0]=n*P00,e=n*n,t[0]+=e*P01,t[1]=e*P10,e*=n,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(n,e){const t=_0x2397ca;var x=n+n;return n+e[0]*Math.sin(x)+e[1]*Math[t(2212)](x+x)+e[2]*Math.sin(x+x+x)}var names$i=["Lambert Azimuthal Equal Area",_0x2397ca(3287),"laea"],laea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(n){const e=_0x2397ca;return Math[e(889)](n)>1&&(n=n>1?1:-1),Math[e(997)](n)}function init$h(){const n={_0x35e214:2961,_0x2d6ca6:1203,_0x23d33c:405,_0x573da6:1203,_0x1e4eb5:1751,_0x4f685c:987,_0x5365c4:1195,_0x4c2668:1472},e=_0x2397ca;Math.abs(this.lat1+this[e(2060)])<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this[e(n._0x35e214)]=Math.sin(this[e(n._0x2d6ca6)]),this.cos_po=Math.cos(this.lat1),this.t1=this[e(2961)],this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this[e(n._0x23d33c)]=msfnz(this.e3,this.sin_po,this[e(1262)]),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math[e(1314)](this.lat0),this.t3=this[e(n._0x35e214)],this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this[e(n._0x573da6)]-this.lat2)>EPSLN?this.ns0=(this[e(n._0x1e4eb5)]*this[e(n._0x1e4eb5)]-this.ms2*this[e(n._0x23d33c)])/(this[e(n._0x4f685c)]-this.qs1):this.ns0=this[e(n._0x5365c4)],this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math[e(2880)](this.c-this[e(n._0x4c2668)]*this[e(3903)])/this.ns0)}function forward$h(n){const e={_0x2f2fe1:2750,_0xfef4b4:1314},t=_0x2397ca;var x=n.x,i=n.y;this.sin_phi=Math.sin(i),this[t(e._0x2f2fe1)]=Math.cos(i);var s=qsfnz(this.e3,this.sin_phi),o=this.a*Math[t(2880)](this.c-this.ns0*s)/this.ns0,r=this.ns0*adjust_lon(x-this.long0),c=o*Math.sin(r)+this.x0,_=this.rh-o*Math[t(e._0xfef4b4)](r)+this.y0;return n.x=c,n.y=_,n}function inverse$h(n){const e={_0x3059e6:3171,_0x38cbfc:1472},t=_0x2397ca;var x,i,s,o,r,c;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(x=Math.sqrt(n.x*n.x+n.y*n.y),s=1):(x=-Math.sqrt(n.x*n.x+n.y*n.y),s=-1),o=0,x!==0&&(o=Math[t(e._0x3059e6)](s*n.x,s*n.y)),s=x*this[t(e._0x38cbfc)]/this.a,this.sphere?c=Math.asin((this.c-s*s)/(2*this.ns0)):(i=(this.c-s*s)/this[t(e._0x38cbfc)],c=this.phi1z(this.e3,i)),r=adjust_lon(o/this.ns0+this.long0),n.x=r,n.y=c,n}function phi1z(n,e){const t={_0x316f4a:889},x=_0x2397ca;var i,s,o,r,c,_=asinz(.5*e);if(n<EPSLN)return _;for(var l=n*n,h=1;h<=25;h++)if(i=Math[x(2212)](_),s=Math[x(1314)](_),o=n*i,r=1-o*o,c=.5*r*r/s*(e/(1-l)-i/r+.5/n*Math.log((1-o)/(1+o))),_=_+c,Math[x(t._0x316f4a)](c)<=1e-7)return _;return null}var names$h=[_0x2397ca(1945),_0x2397ca(3918),"aea"],aea={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h,phi1z};function init$g(){const n=_0x2397ca;this[n(161)]=Math.sin(this[n(217)]),this[n(1176)]=Math.cos(this.lat0),this[n(2522)]=1e3*this.a,this.rc=1}function forward$g(n){const e={_0x4185b:1865},t=_0x2397ca;var x,i,s,o,r,c,_,l,h=n.x,d=n.y;return s=adjust_lon(h-this[t(e._0x4185b)]),x=Math.sin(d),i=Math.cos(d),o=Math.cos(s),c=this.sin_p14*x+this.cos_p14*i*o,r=1,c>0||Math[t(889)](c)<=EPSLN?(_=this.x0+this.a*r*i*Math[t(2212)](s)/c,l=this.y0+this.a*r*(this.cos_p14*x-this.sin_p14*i*o)/c):(_=this.x0+this.infinity_dist*i*Math[t(2212)](s),l=this.y0+this.infinity_dist*(this.cos_p14*x-this[t(161)]*i*o)),n.x=_,n.y=l,n}function inverse$g(n){const e={_0x103a7f:1176},t=_0x2397ca;var x,i,s,o,r,c;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(x=Math.sqrt(n.x*n.x+n.y*n.y))?(o=Math[t(3171)](x,this.rc),i=Math.sin(o),s=Math.cos(o),c=asinz(s*this.sin_p14+n.y*i*this[t(e._0x103a7f)]/x),r=Math.atan2(n.x*i,x*this.cos_p14*s-n.y*this.sin_p14*i),r=adjust_lon(this.long0+r)):(c=this.phic0,r=0),n.x=r,n.y=c,n}var names$g=[_0x2397ca(3592)],gnom={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function iqsfnz(n,e){const t={_0x1cc4a4:855,_0x20b33c:855},x=_0x2397ca;var i=1-(1-n*n)/(2*n)*Math[x(t._0x1cc4a4)]((1-n)/(1+n));if(Math.abs(Math[x(889)](e)-i)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var s=Math[x(997)](.5*e),o,r,c,_,l=0;l<30;l++)if(r=Math[x(2212)](s),c=Math.cos(s),_=n*r,o=Math.pow(1-_*_,2)/(2*c)*(e/(1-n*n)-r/(1-_*_)+.5/n*Math[x(t._0x20b33c)]((1-_)/(1+_))),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function init$f(){const n={_0x315e8b:2181},e=_0x2397ca;!this.sphere&&(this.k0=msfnz(this.e,Math.sin(this[e(n._0x315e8b)]),Math.cos(this[e(2181)])))}function forward$f(n){const e={_0x21d4af:2212},t=_0x2397ca;var x=n.x,i=n.y,s,o,r=adjust_lon(x-this.long0);if(this.sphere)s=this.x0+this.a*r*Math[t(1314)](this.lat_ts),o=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var c=qsfnz(this.e,Math[t(e._0x21d4af)](i));s=this.x0+this.a*this.k0*r,o=this.y0+this.a*c*.5/this.k0}return n.x=s,n.y=o,n}function inverse$f(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*n.y*this.k0/this.a),e=adjust_lon(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var names$f=[_0x2397ca(3489)],cea={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};function init$e(){const n={_0x121577:217},e=_0x2397ca;this.x0=this.x0||0,this.y0=this.y0||0,this[e(n._0x121577)]=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||e(1251),this.rc=Math.cos(this.lat_ts)}function forward$e(n){var e=n.x,t=n.y,x=adjust_lon(e-this.long0),i=adjust_lat(t-this.lat0);return n.x=this.x0+this.a*x*this.rc,n.y=this.y0+this.a*i,n}function inverse$e(n){const e={_0x1e1d5a:1865},t=_0x2397ca;var x=n.x,i=n.y;return n.x=adjust_lon(this[t(e._0x1e1d5a)]+(x-this.x0)/(this.a*this.rc)),n.y=adjust_lat(this.lat0+(i-this.y0)/this.a),n}var names$e=[_0x2397ca(3398),"Equidistant_Cylindrical",_0x2397ca(3691)],eqc={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e},MAX_ITER$1=20;function init$d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$d(n){const e={_0x2cdd3f:1865,_0x5112b5:2212,_0x4f672c:3715},t=_0x2397ca;var x=n.x,i=n.y,s,o,r,c=adjust_lon(x-this[t(e._0x2cdd3f)]);if(r=c*Math.sin(i),this[t(3765)])Math[t(889)](i)<=EPSLN?(s=this.a*c,o=-1*this.a*this.lat0):(s=this.a*Math.sin(r)/Math.tan(i),o=this.a*(adjust_lat(i-this.lat0)+(1-Math.cos(r))/Math[t(3966)](i)));else if(Math[t(889)](i)<=EPSLN)s=this.a*c,o=-1*this.ml0;else{var _=gN(this.a,this.e,Math[t(e._0x5112b5)](i))/Math.tan(i);s=_*Math.sin(r),o=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,i)-this[t(e._0x4f672c)]+_*(1-Math.cos(r))}return n.x=s+this.x0,n.y=o+this.y0,n}function inverse$d(n){const e={_0x4f755f:3765,_0x56c379:1865,_0x48a89e:3966,_0xd7aa33:3715,_0x5eae7e:1274},t=_0x2397ca;var x,i,s,o,r,c,_,l,h;if(s=n.x-this.x0,o=n.y-this.y0,this[t(e._0x4f755f)])if(Math.abs(o+this.a*this[t(217)])<=EPSLN)x=adjust_lon(s/this.a+this.long0),i=0;else{c=this.lat0+o/this.a,_=s*s/this.a/this.a+c*c,l=c;var d;for(r=MAX_ITER$1;r;--r)if(d=Math.tan(l),h=-1*(c*(l*d+1)-l-.5*(l*l+_)*d)/((l-c)/d-1),l+=h,Math.abs(h)<=EPSLN){i=l;break}x=adjust_lon(this[t(e._0x56c379)]+Math.asin(s*Math[t(e._0x48a89e)](l)/this.a)/Math.sin(i))}else if(Math.abs(o+this[t(e._0xd7aa33)])<=EPSLN)i=0,x=adjust_lon(this.long0+s/this.a);else{c=(this[t(3715)]+o)/this.a,_=s*s/this.a/this.a+c*c,l=c;var u,m,f,g,b;for(r=MAX_ITER$1;r;--r)if(b=this.e*Math.sin(l),u=Math.sqrt(1-b*b)*Math[t(e._0x48a89e)](l),m=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math[t(1314)](6*l),g=m/this.a,h=(c*(u*g+1)-g-.5*u*(g*g+_))/(this.es*Math.sin(2*l)*(g*g+_-2*c*g)/(4*u)+(c-g)*(u*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=EPSLN){i=l;break}u=Math[t(2880)](1-this.es*Math[t(e._0x5eae7e)](Math.sin(i),2))*Math.tan(i),x=adjust_lon(this.long0+Math.asin(s*u/this.a)/Math.sin(i))}return n.x=x,n.y=i,n}var names$d=[_0x2397ca(3206),"poly"],poly={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){const n={_0xe93283:1353,_0x51b884:1353,_0x672f72:1353,_0x211d79:2344,_0x2b6663:3145,_0x583e0c:3145},e=_0x2397ca;this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this[e(563)][1]=.7557853228,this[e(n._0xe93283)][1]=0,this[e(563)][2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this[e(n._0x51b884)][3]=.04105856,this.B_re[4]=-.10162907,this[e(n._0x672f72)][4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this[e(563)][6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this[e(n._0x211d79)][1]=0,this[e(n._0x2b6663)][2]=-.577245789,this.C_im[2]=-.007809598,this[e(3145)][3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this[e(n._0x583e0c)][6]=1.9660549,this[e(2344)][6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$c(n){const e={_0x5e97f3:563,_0x5b5b69:1353},t=_0x2397ca;var x,i=n.x,s=n.y,o=s-this[t(217)],r=i-this.long0,c=o/SEC_TO_RAD*1e-5,_=r,l=1,h=0;for(x=1;x<=10;x++)l=l*c,h=h+this.A[x]*l;var d=h,u=_,m=1,f=0,g,b,y=0,C=0;for(x=1;x<=6;x++)g=m*d-f*u,b=f*d+m*u,m=g,f=b,y=y+this[t(e._0x5e97f3)][x]*m-this[t(e._0x5b5b69)][x]*f,C=C+this.B_im[x]*m+this[t(563)][x]*f;return n.x=C*this.a+this.x0,n.y=y*this.a+this.y0,n}function inverse$c(n){const e={_0x5b4dda:1353},t=_0x2397ca;var x,i=n.x,s=n.y,o=i-this.x0,r=s-this.y0,c=r/this.a,_=o/this.a,l=1,h=0,d,u,m=0,f=0;for(x=1;x<=6;x++)d=l*c-h*_,u=h*c+l*_,l=d,h=u,m=m+this.C_re[x]*l-this.C_im[x]*h,f=f+this[t(2344)][x]*l+this.C_re[x]*h;for(var g=0;g<this.iterations;g++){var b=m,y=f,C,v,M=c,w=_;for(x=2;x<=6;x++)C=b*m-y*f,v=y*m+b*f,b=C,y=v,M=M+(x-1)*(this.B_re[x]*b-this.B_im[x]*y),w=w+(x-1)*(this.B_im[x]*b+this.B_re[x]*y);b=1,y=0;var H=this[t(563)][1],D=this.B_im[1];for(x=2;x<=6;x++)C=b*m-y*f,v=y*m+b*f,b=C,y=v,H=H+x*(this.B_re[x]*b-this[t(e._0x5b4dda)][x]*y),D=D+x*(this[t(1353)][x]*b+this.B_re[x]*y);var F=H*H+D*D;m=(M*H+w*D)/F,f=(w*H-M*D)/F}var L=m,B=f,Y=1,j=0;for(x=1;x<=9;x++)Y=Y*L,j=j+this.D[x]*Y;var J=this.lat0+j*SEC_TO_RAD*1e5,Q=this.long0+B;return n.x=Q,n.y=J,n}var names$c=["New_Zealand_Map_Grid","nzmg"],nzmg={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};function init$b(){}function forward$b(n){var e=n.x,t=n.y,x=adjust_lon(e-this.long0),i=this.x0+this.a*x,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function inverse$b(n){const e={_0x19c6c8:2271},t=_0x2397ca;n.x-=this.x0,n.y-=this.y0;var x=adjust_lon(this.long0+n.x/this.a),i=2.5*(Math[t(e._0x19c6c8)](Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=x,n.y=i,n}var names$b=["Miller_Cylindrical",_0x2397ca(3686)],mill={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b},MAX_ITER=20;function init$a(){const n={_0x508222:3972},e=_0x2397ca;this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math[e(2880)]((this.m+1)/this.n),this.C_x=this[e(n._0x508222)]/(this.m+1)):this.en=pj_enfn(this.es)}function forward$a(n){const e={_0xbc872:2212,_0x4cc7de:2212},t=_0x2397ca;var x,i,s=n.x,o=n.y;if(s=adjust_lon(s-this.long0),this[t(3765)]){if(!this.m)o=this.n!==1?Math.asin(this.n*Math[t(e._0xbc872)](o)):o;else for(var r=this.n*Math[t(2212)](o),c=MAX_ITER;c;--c){var _=(this.m*o+Math[t(e._0x4cc7de)](o)-r)/(this.m+Math.cos(o));if(o-=_,Math.abs(_)<EPSLN)break}x=this.a*this.C_x*s*(this.m+Math.cos(o)),i=this.a*this.C_y*o}else{var l=Math[t(2212)](o),h=Math.cos(o);i=this.a*pj_mlfn(o,l,h,this.en),x=this.a*s*h/Math[t(2880)](1-this.es*l*l)}return n.x=x,n.y=i,n}function inverse$a(n){const e={_0x1d7509:2212,_0x59e806:889},t=_0x2397ca;var x,i,s,o;return n.x-=this.x0,s=n.x/this.a,n.y-=this.y0,x=n.y/this.a,this.sphere?(x/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(x))),this.m?x=asinz((this.m*x+Math[t(e._0x1d7509)](x))/this.n):this.n!==1&&(x=asinz(Math.sin(x)/this.n)),s=adjust_lon(s+this.long0),x=adjust_lat(x)):(x=pj_inv_mlfn(n.y/this.a,this.es,this.en),o=Math[t(e._0x59e806)](x),o<HALF_PI?(o=Math.sin(x),i=this.long0+n.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(x)),s=adjust_lon(i)):o-EPSLN<HALF_PI&&(s=this.long0)),n.x=s,n.y=x,n}var names$a=["Sinusoidal","sinu"],sinu={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){}function forward$9(n){const e={_0x5daa92:2212,_0x53e6fd:889},t=_0x2397ca;for(var x=n.x,i=n.y,s=adjust_lon(x-this.long0),o=i,r=Math.PI*Math.sin(i);;){var c=-(o+Math[t(e._0x5daa92)](o)-r)/(1+Math.cos(o));if(o+=c,Math[t(e._0x53e6fd)](c)<EPSLN)break}o/=2,Math.PI/2-Math.abs(i)<EPSLN&&(s=0);var _=.900316316158*this.a*s*Math.cos(o)+this.x0,l=1.4142135623731*this.a*Math.sin(o)+this.y0;return n.x=_,n.y=l,n}function inverse$9(n){const e=_0x2397ca;var t,x;n.x-=this.x0,n.y-=this.y0,x=n.y/(1.4142135623731*this.a),Math.abs(x)>.999999999999&&(x=.999999999999),t=Math[e(997)](x);var i=adjust_lon(this[e(1865)]+n.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),x=(2*t+Math.sin(2*t))/Math.PI,Math.abs(x)>1&&(x=1);var s=Math.asin(x);return n.x=i,n.y=s,n}var names$9=["Mollweide",_0x2397ca(1078)],moll={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){const n={_0x451eae:2060,_0x261cbd:1751,_0x252e2f:560,_0x3ce8d3:560},e=_0x2397ca;Math.abs(this[e(1203)]+this.lat2)<EPSLN||(this[e(n._0x451eae)]=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this[e(1203)]),this.cosphi=Math.cos(this.lat1),this[e(n._0x261cbd)]=msfnz(this.e,this.sinphi,this[e(n._0x252e2f)]),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math[e(2212)](this.lat2),this[e(n._0x3ce8d3)]=Math.cos(this.lat2),this.ms2=msfnz(this.e,this[e(1890)],this[e(n._0x3ce8d3)]),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this[e(1751)]-this.ms2)/(this.ml2-this[e(3340)])),this.g=this[e(3340)]+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this[e(3715)]))}function forward$8(n){const e=_0x2397ca;var t=n.x,x=n.y,i;if(this[e(3765)])i=this.a*(this.g-x);else{var s=mlfn(this.e0,this.e1,this.e2,this.e3,x);i=this.a*(this.g-s)}var o=this.ns*adjust_lon(t-this[e(1865)]),r=this.x0+i*Math[e(2212)](o),c=this.y0+this.rh-i*Math.cos(o);return n.x=r,n.y=c,n}function inverse$8(n){const e={_0x4a6f16:1865},t=_0x2397ca;n.x-=this.x0,n.y=this.rh-n.y+this.y0;var x,i,s,o;this.ns>=0?(i=Math.sqrt(n.x*n.x+n.y*n.y),x=1):(i=-Math[t(2880)](n.x*n.x+n.y*n.y),x=-1);var r=0;if(i!==0&&(r=Math[t(3171)](x*n.x,x*n.y)),this.sphere)return o=adjust_lon(this.long0+r/this.ns),s=adjust_lat(this.g-i/this.a),n.x=o,n.y=s,n;var c=this.g-i/this.a;return s=imlfn(c,this.e0,this.e1,this.e2,this.e3),o=adjust_lon(this[t(e._0x4a6f16)]+r/this.ns),n.x=o,n.y=s,n}var names$8=[_0x2397ca(1480),_0x2397ca(2304)],eqdc={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.R=this.a}function forward$7(n){const e={_0x224b52:2880},t=_0x2397ca;var x=n.x,i=n.y,s=adjust_lon(x-this.long0),o,r;Math.abs(i)<=EPSLN&&(o=this.x0+this.R*s,r=this.y0);var c=asinz(2*Math.abs(i/Math.PI));(Math.abs(s)<=EPSLN||Math[t(889)](Math.abs(i)-HALF_PI)<=EPSLN)&&(o=this.x0,i>=0?r=this.y0+Math.PI*this.R*Math[t(3966)](.5*c):r=this.y0+Math.PI*this.R*-Math[t(3966)](.5*c));var _=.5*Math[t(889)](Math.PI/s-s/Math.PI),l=_*_,h=Math.sin(c),d=Math[t(1314)](c),u=d/(h+d-1),m=u*u,f=u*(2/h-1),g=f*f,b=Math.PI*this.R*(_*(u-g)+Math[t(e._0x224b52)](l*(u-g)*(u-g)-(g+l)*(m-g)))/(g+l);s<0&&(b=-b),o=this.x0+b;var y=l+u;return b=Math.PI*this.R*(f*y-_*Math[t(2880)]((g+l)*(l+1)-y*y))/(g+l),i>=0?r=this.y0+b:r=this.y0-b,n.x=o,n.y=r,n}function inverse$7(n){const e={_0x541305:2880,_0x5c61e7:3402},t=_0x2397ca;var x,i,s,o,r,c,_,l,h,d,u,m,f;return n.x-=this.x0,n.y-=this.y0,u=Math.PI*this.R,s=n.x/u,o=n.y/u,r=s*s+o*o,c=-Math.abs(o)*(1+r),_=c-2*o*o+s*s,l=-2*c+1+2*o*o+r*r,f=o*o/l+(2*_*_*_/l/l/l-9*c*_/l/l)/27,h=(c-_*_/3/l)/l,d=2*Math[t(e._0x541305)](-h/3),u=3*f/h/d,Math[t(889)](u)>1&&(u>=0?u=1:u=-1),m=Math[t(e._0x5c61e7)](u)/3,n.y>=0?i=(-d*Math.cos(m+Math.PI/3)-_/3/l)*Math.PI:i=-(-d*Math.cos(m+Math.PI/3)-_/3/l)*Math.PI,Math.abs(s)<EPSLN?x=this.long0:x=adjust_lon(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(s*s-o*o)+r*r))/2/s),n.x=x,n.y=i,n}var names$7=[_0x2397ca(2446),_0x2397ca(439),_0x2397ca(1515)],vandg={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){const n={_0x1e5fb7:217,_0x5698aa:1314},e=_0x2397ca;this.sin_p12=Math.sin(this[e(n._0x1e5fb7)]),this.cos_p12=Math[e(n._0x5698aa)](this[e(217)])}function forward$6(n){const e={_0x7c3307:738,_0x4e7e84:889,_0x3de78d:738,_0x5ba134:2158,_0x2605a3:1314,_0x3ea143:3966,_0x1c1a53:997,_0x59d6e1:889,_0x3941c0:2212},t=_0x2397ca;var x=n.x,i=n.y,s=Math[t(2212)](n.y),o=Math.cos(n.y),r=adjust_lon(x-this.long0),c,_,l,h,d,u,m,f,g,b,y,C,v,M,w,H,D,F,L,B,Y,j,J;return this.sphere?Math.abs(this[t(e._0x7c3307)]-1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI-i)*Math.sin(r),n.y=this.y0-this.a*(HALF_PI-i)*Math.cos(r),n):Math[t(e._0x4e7e84)](this[t(e._0x3de78d)]+1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI+i)*Math.sin(r),n.y=this.y0+this.a*(HALF_PI+i)*Math.cos(r),n):(F=this.sin_p12*s+this[t(e._0x5ba134)]*o*Math[t(e._0x2605a3)](r),H=Math.acos(F),D=H?H/Math[t(2212)](H):1,n.x=this.x0+this.a*D*o*Math.sin(r),n.y=this.y0+this.a*D*(this.cos_p12*s-this.sin_p12*o*Math.cos(r)),n):(c=e0fn(this.es),_=e1fn(this.es),l=e2fn(this.es),h=e3fn(this.es),Math[t(889)](this.sin_p12-1)<=EPSLN?(d=this.a*mlfn(c,_,l,h,HALF_PI),u=this.a*mlfn(c,_,l,h,i),n.x=this.x0+(d-u)*Math.sin(r),n.y=this.y0-(d-u)*Math.cos(r),n):Math[t(889)](this.sin_p12+1)<=EPSLN?(d=this.a*mlfn(c,_,l,h,HALF_PI),u=this.a*mlfn(c,_,l,h,i),n.x=this.x0+(d+u)*Math.sin(r),n.y=this.y0+(d+u)*Math[t(1314)](r),n):(m=s/o,f=gN(this.a,this.e,this.sin_p12),g=gN(this.a,this.e,s),b=Math[t(2271)]((1-this.es)*m+this.es*f*this.sin_p12/(g*o)),y=Math[t(3171)](Math.sin(r),this.cos_p12*Math[t(e._0x3ea143)](b)-this.sin_p12*Math[t(1314)](r)),y===0?L=Math[t(e._0x1c1a53)](this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math[t(e._0x59d6e1)](Math.abs(y)-Math.PI)<=EPSLN?L=-Math.asin(this[t(2158)]*Math.sin(b)-this.sin_p12*Math[t(1314)](b)):L=Math.asin(Math.sin(r)*Math.cos(b)/Math[t(e._0x3941c0)](y)),C=this.e*this[t(738)]/Math[t(2880)](1-this.es),v=this.e*this.cos_p12*Math.cos(y)/Math.sqrt(1-this.es),M=C*v,w=v*v,B=L*L,Y=B*L,j=Y*L,J=j*L,H=f*L*(1-B*w*(1-w)/6+Y/8*M*(1-2*w)+j/120*(w*(4-7*w)-3*C*C*(1-7*w))-J/48*M),n.x=this.x0+H*Math.sin(y),n.y=this.y0+H*Math.cos(y),n))}function inverse$6(n){const e={_0x5a3efc:2158,_0x309fce:3171,_0x39285f:738,_0x152aaf:738,_0x263af8:1314,_0x476a68:1274,_0x13f029:2212,_0x377ce9:3966},t=_0x2397ca;n.x-=this.x0,n.y-=this.y0;var x,i,s,o,r,c,_,l,h,d,u,m,f,g,b,y,C,v,M,w,H,D,F,L;return this.sphere?(x=Math.sqrt(n.x*n.x+n.y*n.y),x>2*HALF_PI*this.a?void 0:(i=x/this.a,s=Math.sin(i),o=Math.cos(i),r=this[t(1865)],Math.abs(x)<=EPSLN?c=this.lat0:(c=asinz(o*this.sin_p12+n.y*s*this[t(e._0x5a3efc)]/x),_=Math.abs(this.lat0)-HALF_PI,Math.abs(_)<=EPSLN?this.lat0>=0?r=adjust_lon(this.long0+Math[t(3171)](n.x,-n.y)):r=adjust_lon(this.long0-Math[t(e._0x309fce)](-n.x,n.y)):r=adjust_lon(this.long0+Math.atan2(n.x*s,x*this[t(e._0x5a3efc)]*o-n.y*this[t(e._0x39285f)]*s))),n.x=r,n.y=c,n)):(l=e0fn(this.es),h=e1fn(this.es),d=e2fn(this.es),u=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(m=this.a*mlfn(l,h,d,u,HALF_PI),x=Math.sqrt(n.x*n.x+n.y*n.y),f=m-x,c=imlfn(f/this.a,l,h,d,u),r=adjust_lon(this.long0+Math[t(3171)](n.x,-1*n.y)),n.x=r,n.y=c,n):Math.abs(this[t(e._0x152aaf)]+1)<=EPSLN?(m=this.a*mlfn(l,h,d,u,HALF_PI),x=Math.sqrt(n.x*n.x+n.y*n.y),f=x-m,c=imlfn(f/this.a,l,h,d,u),r=adjust_lon(this[t(1865)]+Math.atan2(n.x,n.y)),n.x=r,n.y=c,n):(x=Math.sqrt(n.x*n.x+n.y*n.y),y=Math.atan2(n.x,n.y),g=gN(this.a,this.e,this.sin_p12),C=Math[t(e._0x263af8)](y),v=this.e*this.cos_p12*C,M=-v*v/(1-this.es),w=3*this.es*(1-M)*this.sin_p12*this[t(e._0x5a3efc)]*C/(1-this.es),H=x/g,D=H-M*(1+M)*Math.pow(H,3)/6-w*(1+3*M)*Math[t(e._0x476a68)](H,4)/24,F=1-M*D*D/2-H*D*D*D/6,b=Math[t(997)](this[t(e._0x39285f)]*Math.cos(D)+this.cos_p12*Math.sin(D)*C),r=adjust_lon(this.long0+Math.asin(Math.sin(y)*Math[t(e._0x13f029)](D)/Math.cos(b))),L=Math.sin(b),c=Math[t(e._0x309fce)]((L-this.es*F*this[t(738)])*Math[t(e._0x377ce9)](b),L*(1-this.es)),n.x=r,n.y=c,n))}var names$6=["Azimuthal_Equidistant",_0x2397ca(1844)],aeqd={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};function init$5(){const n={_0xeafb2e:2212},e=_0x2397ca;this.sin_p14=Math[e(n._0xeafb2e)](this.lat0),this.cos_p14=Math[e(1314)](this.lat0)}function forward$5(n){const e={_0x5530bb:1865,_0x3173bf:2212,_0x13fc3f:1314,_0x29430d:1176},t=_0x2397ca;var x,i,s,o,r,c,_,l,h=n.x,d=n.y;return s=adjust_lon(h-this[t(e._0x5530bb)]),x=Math[t(e._0x3173bf)](d),i=Math[t(e._0x13fc3f)](d),o=Math.cos(s),c=this.sin_p14*x+this[t(e._0x29430d)]*i*o,r=1,(c>0||Math.abs(c)<=EPSLN)&&(_=this.a*r*i*Math[t(e._0x3173bf)](s),l=this.y0+this.a*r*(this.cos_p14*x-this.sin_p14*i*o)),n.x=_,n.y=l,n}function inverse$5(n){const e={_0x5e0f0d:1865,_0x3e2ecd:3171},t=_0x2397ca;var x,i,s,o,r,c,_;return n.x-=this.x0,n.y-=this.y0,x=Math.sqrt(n.x*n.x+n.y*n.y),i=asinz(x/this.a),s=Math.sin(i),o=Math.cos(i),c=this.long0,Math.abs(x)<=EPSLN?(_=this.lat0,n.x=c,n.y=_,n):(_=asinz(o*this.sin_p14+n.y*s*this.cos_p14/x),r=Math.abs(this[t(217)])-HALF_PI,Math.abs(r)<=EPSLN?(this.lat0>=0?c=adjust_lon(this[t(e._0x5e0f0d)]+Math.atan2(n.x,-n.y)):c=adjust_lon(this[t(1865)]-Math[t(e._0x3e2ecd)](-n.x,n.y)),n.x=c,n.y=_,n):(c=adjust_lon(this.long0+Math[t(3171)](n.x*s,x*this.cos_p14*o-n.y*this.sin_p14*s)),n.x=c,n.y=_,n))}var names$5=["ortho"],ortho={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5},FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$4(){const n={_0x2f4c6d:2181,_0x445a91:2112,_0x212c7b:3530,_0x5868a3:1886},e=_0x2397ca;this.x0=this.x0||0,this.y0=this.y0||0,this[e(217)]=this[e(217)]||0,this.long0=this.long0||0,this.lat_ts=this[e(n._0x2f4c6d)]||0,this[e(n._0x445a91)]=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this[e(n._0x212c7b)]=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this[e(n._0x212c7b)]=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this[e(n._0x212c7b)]=FACE_ENUM.FRONT:Math[e(889)](this.long0)<=HALF_PI+FORTPI?this[e(n._0x212c7b)]=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM[e(n._0x5868a3)],this.es!==0&&(this[e(2943)]=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$4(n){const e={_0x2242eb:2271,_0x49fa6f:303,_0x38800b:303,_0x12ad8c:1382,_0x1efd22:3530,_0x421ee4:303,_0x331de1:2880},t=_0x2397ca;var x={x:0,y:0},i,s,o,r,c,_,l={value:0};if(n.x-=this.long0,this.es!==0?i=Math[t(e._0x2242eb)](this.one_minus_f_squared*Math.tan(n.y)):i=n.y,s=n.x,this.face===FACE_ENUM.TOP)r=HALF_PI-i,s>=FORTPI&&s<=HALF_PI+FORTPI?(l[t(e._0x49fa6f)]=AREA_ENUM.AREA_0,o=s-HALF_PI):s>HALF_PI+FORTPI||s<=-(HALF_PI+FORTPI)?(l.value=AREA_ENUM[t(2821)],o=s>0?s-SPI:s+SPI):s>-(HALF_PI+FORTPI)&&s<=-FORTPI?(l[t(e._0x49fa6f)]=AREA_ENUM.AREA_2,o=s+HALF_PI):(l[t(e._0x38800b)]=AREA_ENUM.AREA_3,o=s);else if(this.face===FACE_ENUM[t(e._0x12ad8c)])r=HALF_PI+i,s>=FORTPI&&s<=HALF_PI+FORTPI?(l.value=AREA_ENUM.AREA_0,o=-s+HALF_PI):s<FORTPI&&s>=-FORTPI?(l.value=AREA_ENUM.AREA_1,o=-s):s<-FORTPI&&s>=-(HALF_PI+FORTPI)?(l.value=AREA_ENUM.AREA_2,o=-s-HALF_PI):(l.value=AREA_ENUM.AREA_3,o=s>0?-s+SPI:-s-SPI);else{var h,d,u,m,f,g,b;this.face===FACE_ENUM.RIGHT?s=qsc_shift_lon_origin(s,+HALF_PI):this.face===FACE_ENUM.BACK?s=qsc_shift_lon_origin(s,+SPI):this.face===FACE_ENUM.LEFT&&(s=qsc_shift_lon_origin(s,-HALF_PI)),m=Math.sin(i),f=Math[t(1314)](i),g=Math.sin(s),b=Math.cos(s),h=f*b,d=f*g,u=m,this.face===FACE_ENUM.FRONT?(r=Math.acos(h),o=qsc_fwd_equat_face_theta(r,u,d,l)):this.face===FACE_ENUM.RIGHT?(r=Math.acos(d),o=qsc_fwd_equat_face_theta(r,u,-h,l)):this.face===FACE_ENUM[t(1886)]?(r=Math.acos(-h),o=qsc_fwd_equat_face_theta(r,u,-d,l)):this[t(e._0x1efd22)]===FACE_ENUM.LEFT?(r=Math.acos(-d),o=qsc_fwd_equat_face_theta(r,u,h,l)):(r=o=0,l[t(e._0x421ee4)]=AREA_ENUM.AREA_0)}return _=Math.atan(12/SPI*(o+Math.acos(Math[t(2212)](o)*Math.cos(FORTPI))-HALF_PI)),c=Math[t(e._0x331de1)]((1-Math[t(1314)](r))/(Math.cos(_)*Math.cos(_))/(1-Math.cos(Math.atan(1/Math.cos(o))))),l.value===AREA_ENUM[t(2821)]?_+=HALF_PI:l.value===AREA_ENUM.AREA_2?_+=SPI:l.value===AREA_ENUM.AREA_3&&(_+=1.5*SPI),x.x=c*Math[t(1314)](_),x.y=c*Math.sin(_),x.x=x.x*this.a+this.x0,x.y=x.y*this.a+this.y0,n.x=x.x,n.y=x.y,n}function inverse$4(n){const e={_0x92f3d0:3171,_0x40250d:889,_0x4ac1dc:1314,_0x4bcb21:303,_0x1cf3df:3180,_0x18c895:1886,_0x4aa4c1:2880,_0x574306:2943},t=_0x2397ca;var x={lam:0,phi:0},i,s,o,r,c,_,l,h,d,u={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,s=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),i=Math[t(e._0x92f3d0)](n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?u.value=AREA_ENUM.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(u.value=AREA_ENUM.AREA_1,i-=HALF_PI):n.x<0&&-n.x>=Math[t(e._0x40250d)](n.y)?(u.value=AREA_ENUM.AREA_2,i=i<0?i+SPI:i-SPI):(u.value=AREA_ENUM[t(2020)],i+=HALF_PI),d=SPI/12*Math.tan(i),c=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),_=Math[t(2271)](c),o=Math.cos(i),r=Math.tan(s),l=1-o*o*r*r*(1-Math[t(e._0x4ac1dc)](Math.atan(1/Math[t(1314)](_)))),l<-1?l=-1:l>1&&(l=1),this.face===FACE_ENUM.TOP)h=Math.acos(l),x.phi=HALF_PI-h,u.value===AREA_ENUM[t(1275)]?x.lam=_+HALF_PI:u[t(e._0x4bcb21)]===AREA_ENUM[t(2821)]?x[t(3180)]=_<0?_+SPI:_-SPI:u.value===AREA_ENUM.AREA_2?x.lam=_-HALF_PI:x.lam=_;else if(this.face===FACE_ENUM.BOTTOM)h=Math[t(3402)](l),x.phi=h-HALF_PI,u.value===AREA_ENUM.AREA_0?x.lam=-_+HALF_PI:u[t(e._0x4bcb21)]===AREA_ENUM.AREA_1?x.lam=-_:u.value===AREA_ENUM.AREA_2?x.lam=-_-HALF_PI:x.lam=_<0?-_-SPI:-_+SPI;else{var m,f,g;m=l,d=m*m,d>=1?g=0:g=Math.sqrt(1-d)*Math[t(2212)](_),d+=g*g,d>=1?f=0:f=Math.sqrt(1-d),u.value===AREA_ENUM.AREA_1?(d=f,f=-g,g=d):u.value===AREA_ENUM.AREA_2?(f=-f,g=-g):u[t(303)]===AREA_ENUM.AREA_3&&(d=f,f=g,g=-d),this.face===FACE_ENUM.RIGHT?(d=m,m=-f,f=d):this.face===FACE_ENUM.BACK?(m=-m,f=-f):this.face===FACE_ENUM.LEFT&&(d=m,m=f,f=-d),x.phi=Math.acos(-g)-HALF_PI,x[t(e._0x1cf3df)]=Math.atan2(f,m),this.face===FACE_ENUM.RIGHT?x[t(3180)]=qsc_shift_lon_origin(x.lam,-HALF_PI):this.face===FACE_ENUM[t(e._0x18c895)]?x.lam=qsc_shift_lon_origin(x.lam,-SPI):this.face===FACE_ENUM.LEFT&&(x.lam=qsc_shift_lon_origin(x[t(3180)],+HALF_PI))}if(this.es!==0){var b,y,C;b=x.phi<0?1:0,y=Math.tan(x.phi),C=this.b/Math[t(e._0x4aa4c1)](y*y+this[t(3261)]),x.phi=Math.atan(Math.sqrt(this.a*this.a-C*C)/(this[t(e._0x574306)]*C)),b&&(x.phi=-x[t(948)])}return x[t(3180)]+=this.long0,n.x=x.lam,n.y=x.phi,n}function qsc_fwd_equat_face_theta(n,e,t,x){const i={_0x441daa:1275},s=_0x2397ca;var o;return n<EPSLN?(x.value=AREA_ENUM[s(i._0x441daa)],o=0):(o=Math.atan2(e,t),Math.abs(o)<=FORTPI?x.value=AREA_ENUM.AREA_0:o>FORTPI&&o<=HALF_PI+FORTPI?(x.value=AREA_ENUM.AREA_1,o-=HALF_PI):o>HALF_PI+FORTPI||o<=-(HALF_PI+FORTPI)?(x.value=AREA_ENUM.AREA_2,o=o>=0?o-SPI:o+SPI):(x.value=AREA_ENUM[s(2020)],o+=HALF_PI)),o}function qsc_shift_lon_origin(n,e){var t=n+e;return t<-SPI?t+=TWO_PI:t>+SPI&&(t-=TWO_PI),t}var names$4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],qsc={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4},COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},poly3_der=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function newton_rapshon(n,e,t,x){for(var i=e;x;--x){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function init$3(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$3(n){const e=_0x2397ca;var t=adjust_lon(n.x-this[e(1865)]),x=Math.abs(n.y),i=Math.floor(x*C1);i<0?i=0:i>=NODES&&(i=NODES-1),x=R2D*(x-RC1*i);var s={x:poly3_val(COEFS_X[i],x)*t,y:poly3_val(COEFS_Y[i],x)};return n.y<0&&(s.y=-s.y),s.x=s.x*this.a*FXC+this.x0,s.y=s.y*this.a*FYC+this.y0,s}function inverse$3(n){var e={x:(n.x-this.x0)/(this.a*FXC),y:Math.abs(n.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=n.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var x=COEFS_Y[t],i=5*(e.y-x[0])/(COEFS_Y[t+1][0]-x[0]);i=newton_rapshon(function(s){return(poly3_val(x,s)-e.y)/poly3_der(x,s)},i,EPSLN,100),e.x/=poly3_val(COEFS_X[t],i),e.y=(5*t+i)*D2R$1,n.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$3=[_0x2397ca(1422),"robin"],robin={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};function init$2(){this.name="geocent"}function forward$2(n){var e=geodeticToGeocentric(n,this.es,this.a);return e}function inverse$2(n){var e=geocentricToGeodetic(n,this.es,this.a,this.b);return e}var names$2=["Geocentric",_0x2397ca(498),"geocent",_0x2397ca(2075)],geocent={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2},mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$1(){const n={_0x4da439:1373,_0x236c1e:2033,_0x38af9a:426,_0x2bd32d:1582,_0x5e884a:3471,_0x2c6272:768,_0x4502f2:2212},e={_0x291a18:3389,_0x37bbdb:3389},t=_0x2397ca;if(Object.keys(params)[t(1255)]((function(s){const o=t;if(typeof this[s]===o(3819))this[s]=params[s].def;else{if(params[s][o(e._0x291a18)]&&isNaN(this[s]))throw new Error("Invalid parameter value, must be numeric "+s+" = "+this[s]);params[s][o(e._0x37bbdb)]&&(this[s]=parseFloat(this[s]))}params[s][o(1381)]&&(this[s]=this[s]*D2R$1)})[t(n._0x4da439)](this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode[t(2038)]:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this[t(n._0x236c1e)]=mode.EQUIT:(this.mode=mode[t(n._0x38af9a)],this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this[t(217)])),this[t(1582)]=this.h/this.a,this[t(n._0x2bd32d)]<=0||this.pn1>1e10)throw new Error(t(n._0x5e884a));this.p=1+this[t(n._0x2bd32d)],this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var x=this[t(n._0x2c6272)],i=this.azi;this.cg=Math.cos(i),this.sg=Math[t(n._0x4502f2)](i),this.cw=Math.cos(x),this.sw=Math.sin(x)}function forward$1(n){const e={_0x1450e8:2033},t=_0x2397ca;n.x-=this.long0;var x=Math.sin(n.y),i=Math[t(1314)](n.y),s=Math.cos(n.x),o,r;switch(this[t(e._0x1450e8)]){case mode.OBLIQ:r=this[t(2955)]*x+this.cosph0*i*s;break;case mode.EQUIT:r=i*s;break;case mode.S_POLE:r=-x;break;case mode[t(2536)]:r=x;break}switch(r=this.pn1/(this.p-r),o=r*i*Math.sin(n.x),this.mode){case mode.OBLIQ:r*=this.cosph0*x-this.sinph0*i*s;break;case mode.EQUIT:r*=x;break;case mode[t(2536)]:r*=-(i*s);break;case mode.S_POLE:r*=i*s;break}var c,_;return c=r*this.cg+o*this.sg,_=1/(c*this.sw*this.h1+this.cw),o=(o*this.cg-r*this.sg)*this.cw*_,r=c*_,n.x=o*this.a,n.y=r*this.a,n}function inverse$1(n){const e={_0x158e62:2880,_0x31f6fd:601,_0x2bcfce:2212,_0x39692b:2727},t=_0x2397ca;n.x/=this.a,n.y/=this.a;var x={x:n.x,y:n.y},i,s,o;o=1/(this.pn1-n.y*this.sw),i=this[t(1582)]*n.x*o,s=this.pn1*n.y*this.cw*o,n.x=i*this.cg+s*this.sg,n.y=s*this.cg-i*this.sg;var r=hypot(n.x,n.y);if(Math[t(889)](r)<EPSLN)x.x=0,x.y=n.y;else{var c,_;switch(_=1-r*r*this.pfact,_=(this.p-Math.sqrt(_))/(this.pn1/r+r/this[t(1582)]),c=Math[t(e._0x158e62)](1-_*_),this.mode){case mode.OBLIQ:x.y=Math.asin(c*this[t(2955)]+n.y*_*this[t(e._0x31f6fd)]/r),n.y=(c-this.sinph0*Math[t(e._0x2bcfce)](x.y))*r,n.x*=_*this[t(e._0x31f6fd)];break;case mode[t(e._0x39692b)]:x.y=Math.asin(n.y*_/r),n.y=c*r,n.x*=_;break;case mode[t(2536)]:x.y=Math[t(997)](c),n.y=-n.y;break;case mode.S_POLE:x.y=-Math.asin(c);break}x.x=Math[t(3171)](n.x,n.y)}return n.x=x.x+this.long0,n.y=x.y,n}var names$1=["Tilted_Perspective","tpers"],tpers={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};function init(){const n={_0x8396dc:4008,_0x47ea7f:1236,_0x143e0a:3465},e=_0x2397ca;if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this[e(n._0x8396dc)]<=0||this.radius_g_1>1e10)throw new Error;if(this[e(n._0x47ea7f)]=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,x=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=x,this[e(n._0x143e0a)]="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";!this.title&&(this.title="Geostationary Satellite View")}function forward(n){const e={_0x51fca3:2271,_0x1a594f:1314,_0xe3f769:1236,_0x3cf5bd:2212},t=_0x2397ca;var x=n.x,i=n.y,s,o,r,c;if(x=x-this.long0,this.shape==="ellipse"){i=Math[t(e._0x51fca3)](this.radius_p2*Math.tan(i));var _=this[t(3802)]/hypot(this.radius_p*Math[t(e._0x1a594f)](i),Math[t(2212)](i));if(o=_*Math.cos(x)*Math.cos(i),r=_*Math.sin(x)*Math.cos(i),c=_*Math.sin(i),(this[t(1236)]-o)*o-r*r-c*c*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;s=this[t(e._0xe3f769)]-o,this[t(570)]?(n.x=this.radius_g_1*Math.atan(r/hypot(c,s)),n.y=this.radius_g_1*Math.atan(c/s)):(n.x=this.radius_g_1*Math.atan(r/s),n.y=this.radius_g_1*Math.atan(c/hypot(r,s)))}else this[t(3465)]==="sphere"&&(s=Math.cos(i),o=Math[t(e._0x1a594f)](x)*s,r=Math[t(e._0x3cf5bd)](x)*s,c=Math.sin(i),s=this.radius_g-o,this.flip_axis?(n.x=this.radius_g_1*Math[t(2271)](r/hypot(c,s)),n.y=this.radius_g_1*Math.atan(c/s)):(n.x=this.radius_g_1*Math.atan(r/s),n.y=this.radius_g_1*Math[t(e._0x51fca3)](c/hypot(r,s))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function inverse(n){const e={_0x3bb0dc:3465,_0x4e81db:2970,_0x224de1:3966},t=_0x2397ca;var x=-1,i=0,s=0,o,r,c,_;if(n.x=n.x/this.a,n.y=n.y/this.a,this[t(e._0x3bb0dc)]==="ellipse"){this.flip_axis?(s=Math.tan(n.y/this.radius_g_1),i=Math.tan(n.x/this[t(4008)])*hypot(1,s)):(i=Math.tan(n.x/this.radius_g_1),s=Math.tan(n.y/this.radius_g_1)*hypot(1,i));var l=s/this.radius_p;if(o=i*i+l*l+x*x,r=2*this.radius_g*x,c=r*r-4*o*this.C,c<0)return n.x=Number.NaN,n.y=Number[t(e._0x4e81db)],n;_=(-r-Math.sqrt(c))/(2*o),x=this.radius_g+_*x,i*=_,s*=_,n.x=Math.atan2(i,x),n.y=Math.atan(s*Math.cos(n.x)/x),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape===t(3765)){if(this.flip_axis?(s=Math.tan(n.y/this.radius_g_1),i=Math[t(e._0x224de1)](n.x/this.radius_g_1)*Math.sqrt(1+s*s)):(i=Math[t(3966)](n.x/this.radius_g_1),s=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+i*i)),o=i*i+s*s+x*x,r=2*this.radius_g*x,c=r*r-4*o*this.C,c<0)return n.x=Number.NaN,n.y=Number.NaN,n;_=(-r-Math.sqrt(c))/(2*o),x=this.radius_g+_*x,i*=_,s*=_,n.x=Math.atan2(i,x),n.y=Math.atan(s*Math.cos(n.x)/x)}return n.x=n.x+this.long0,n}var names=[_0x2397ca(1532),"Geostationary_Satellite","geos"],geos={init,forward,inverse,names};function includedProjections(n){const e={_0x162b82:565,_0x5de54c:3346,_0xd09462:2220,_0x3be3b4:2220,_0x8f5c02:2220,_0x232fe2:2220,_0x39a2b1:2220},t=_0x2397ca;n.Proj.projections[t(e._0x162b82)](tmerc),n[t(2220)][t(e._0x5de54c)].add(etmerc),n.Proj[t(3346)][t(565)](utm),n[t(2220)].projections.add(sterea),n.Proj.projections.add(stere),n.Proj[t(3346)][t(e._0x162b82)](somerc),n.Proj.projections.add(omerc),n[t(e._0xd09462)].projections.add(lcc),n[t(e._0x3be3b4)].projections.add(krovak),n.Proj.projections.add(cass),n.Proj.projections.add(laea),n[t(e._0x8f5c02)][t(3346)][t(565)](aea),n.Proj.projections[t(e._0x162b82)](gnom),n[t(e._0x232fe2)].projections[t(e._0x162b82)](cea),n.Proj.projections.add(eqc),n.Proj[t(e._0x5de54c)].add(poly),n.Proj.projections.add(nzmg),n.Proj.projections.add(mill),n.Proj[t(3346)].add(sinu),n[t(2220)].projections.add(moll),n[t(e._0x39a2b1)].projections[t(565)](eqdc),n.Proj[t(3346)][t(565)](vandg),n.Proj.projections[t(e._0x162b82)](aeqd),n.Proj.projections[t(565)](ortho),n.Proj.projections[t(565)](qsc),n.Proj.projections.add(robin),n[t(2220)][t(3346)][t(565)](geocent),n[t(e._0x39a2b1)][t(e._0x5de54c)].add(tpers),n[t(e._0x232fe2)].projections.add(geos)}proj4.defaultDatum=_0x2397ca(2849),proj4.Proj=Projection,proj4.WGS84=new proj4.Proj(_0x2397ca(2849)),proj4.Point=Point,proj4[_0x2397ca(599)]=common,proj4.defs=defs,proj4[_0x2397ca(1065)]=nadgrid,proj4.transform=transform,proj4.mgrs=mgrs,proj4.version=_0x2397ca(2939),includedProjections(proj4);const CRS={EPSG3857:"EPSG:3857",EPSG4326:_0x2397ca(3072),EPSG4490:"EPSG:4490",CGCS2000_GK_Zone_3:"CGCS2000_GK_Zone_3",CGCS2000_GK_Zone_6:_0x2397ca(686),CGCS2000_GK_CM_3:"CGCS2000_GK_CM_3",CGCS2000_GK_CM_6:"CGCS2000_GK_CM_6"},PI$1=3.141592653589793;class LngLatPoint{constructor(e,t,x){this._lng=Number(e||0),this._lat=Number(t||0),this._alt=Number(x||0)}get lng(){return this._lng}set lng(e){this._lng=+e,this._position=null}get lat(){return this._lat}set[_0x2397ca(3736)](e){this._lat=+e,this._position=null}get alt(){return this._alt||0}set[_0x2397ca(1155)](e){const t=_0x2397ca;this._alt=+e,this._position&&this._position instanceof Cesium__namespace.Cartesian3&&(this[t(1173)]=null)}clone(){const e={_0x37674e:3409},t=_0x2397ca,x=new LngLatPoint;return x[t(e._0x37674e)]=this[t(3409)]||0,x.lat=this.lat||0,x.alt=this.alt||0,x}format(){const e={_0x3ff3d2:1761,_0x178a9e:1155},t=_0x2397ca;return this.lng=formatNum$2(this.lng,LngLatPoint[t(e._0x3ff3d2)]),this.lat=formatNum$2(this.lat,LngLatPoint.FormatLength),this.alt=formatNum$2(this[t(e._0x178a9e)],LngLatPoint.FormatAltLength),this}toArray(e){const t={_0x3d0856:3736},x=_0x2397ca;return this[x(1767)](),e?[this.lng,this.lat]:[this.lng,this[x(t._0x3d0856)],this.alt]}toString(){const e={_0x2f823b:3409,_0x4b46da:1155},t=_0x2397ca;return this.format(),this[t(e._0x2f823b)]+","+this.lat+","+this[t(e._0x4b46da)]}[_0x2397ca(799)](e=!1){return!e&&this[_0x2397ca(1173)]?this._position:Cesium__namespace.Cartesian3.fromDegrees(this.lng,this.lat,this.alt)}toCartographic(){const e={_0xecf661:3736,_0xff3c6b:1155},t=_0x2397ca;return Cesium__namespace.Cartographic.fromDegrees(this.lng,this[t(e._0xecf661)],this[t(e._0xff3c6b)])}[_0x2397ca(3272)](){const e={_0x110276:1146,_0x3add18:3966},t=_0x2397ca;let x=Math.min(this.lng,180);x=Math[t(e._0x110276)](x,-180);let i=Math.min(this.lat,85.05112877980659);i=Math.max(i,-85.05112877980659);const s=x*2003750834e-2/180;let o=Math.log(Math[t(e._0x3add18)]((90+i)*PI$1/360))/(PI$1/180);return o=o*2003750834e-2/180,[s,o,this.alt]}equals(e){const t=_0x2397ca;return this===e||e instanceof LngLatPoint&&this._alt===e._alt&&this._lat===e._lat&&this._lng===e[t(1818)]}[_0x2397ca(2025)](){const e={_0xfec833:1818,_0x19d44f:1818},t=_0x2397ca;return!(isNaN(this._lat)||isNaN(this._lng)||this._lat<-90||this._lat>90||this[t(e._0xfec833)]<-180||this._lng>180||this._lat===0&&this[t(e._0x19d44f)]===0&&this._alt===0)}static parse(e,t){const x={_0x51d8b4:3476,_0x127412:639,_0x1f45b7:295,_0x33d310:1173},i=_0x2397ca;if(!e)return new LngLatPoint;if(e instanceof LngLatPoint)return e;let s;if(typeof e===i(3994))s=LngLatPoint.fromString(e);else if(Array.isArray(e))s=LngLatPoint[i(x._0x51d8b4)](e);else if(e instanceof LngLatPoint)s=e[i(3069)]();else if(Cesium__namespace.defined(e.lat)&&Cesium__namespace[i(x._0x127412)](e[i(3409)])){s=new LngLatPoint(e.lng,e.lat,e.alt);for(const o in e)s[o]=e[o]}else e instanceof Cesium__namespace.Cartesian3||e._value||e.getValue?(s=LngLatPoint.fromCartesian(e,t),s._position=e):Cesium__namespace.defined(e.x)&&Cesium__namespace.defined(e.y)&&Cesium__namespace.defined(e.z)?(e=new Cesium__namespace[i(x._0x1f45b7)](e.x,e.y,e.z),s=LngLatPoint.fromCartesian(e,t),s[i(x._0x33d310)]=e):(s=new LngLatPoint,logError$1("坐标解析失败，请确认参数是否无误",e));return s}static fromArray(e){const t=_0x2397ca,x=new LngLatPoint;return Array[t(4056)](e)&&(x.lng=e[0]||0,x.lat=e[1]||0,x.alt=e[2]||0),x}static fromString(e){let t=new LngLatPoint;if(e&&typeof e=="string"){const x=e.split(",");t=this.fromArray(x)}return t}static fromCartesian(e,t){const x={_0x10ed01:2108,_0x3a6c1a:295,_0x30f306:3736},i=_0x2397ca,s=new LngLatPoint;let o;if(e&&(e instanceof Cesium__namespace[i(295)]?o=e:e[i(x._0x10ed01)]&&e[i(2108)]instanceof Cesium__namespace[i(x._0x3a6c1a)]?o=e[i(2108)]:typeof e.getValue=="function"&&(o=e.getValue(t||Cesium__namespace[i(1522)].now()))),o){const r=Cesium__namespace.Cartographic.fromCartesian(o);r&&(s[i(x._0x30f306)]=Cesium__namespace[i(3876)].toDegrees(r.latitude),s.lng=Cesium__namespace.Math.toDegrees(r.longitude),s.alt=r.height,s.format())}return s._position=e,s}static fromCartographic(e){const t=_0x2397ca,x=new LngLatPoint;return x.lat=Cesium__namespace.Math.toDegrees(e[t(489)]),x.lng=Cesium__namespace.Math[t(778)](e.longitude),x.alt=e.height,x}static fromMercator(e){const t=Number(e[0]),x=Number(e[1]),i=t/2003750834e-2*180;let s=x/2003750834e-2*180;return s=180/PI$1*(2*Math.atan(Math.exp(s*PI$1/180))-PI$1/2),new LngLatPoint(i,s,e[2]||0)}static[_0x2397ca(799)](e,t){return!e||e instanceof Cesium__namespace.Cartesian3?e:LngLatPoint.parse(e,t).toCartesian(!0)}static toCartographic(e,t){return!e||e instanceof Cesium__namespace.Cartographic?e:LngLatPoint.parse(e,t).toCartographic()}static toArray(e,t){const x=LngLatPoint.parse(e);return!x||!x.valid()?[]:x.toArray(t)}}LngLatPoint.FormatLength=6,LngLatPoint.FormatAltLength=1;function formatNum$2(n,e=0){const t=Math.pow(10,e);return Math.round(n*t)/t}class LngLatArray{static toCartesians(e,t){const x=_0x2397ca;if(!e||!Array[x(4056)](e))return e;const i=[];return e[x(1255)](function(s){const o=x;if(s instanceof Cesium__namespace.Cartesian3){t?i[o(2434)](s.clone()):i.push(s);return}const r=LngLatPoint[o(1364)](s);!r||!r.valid()||i.push(r.toCartesian(!0))}),i}static toCartographics(e,t){const x={_0x4df73c:2434};if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const o=_0x3361;if(s instanceof Cesium__namespace.Cartographic){t?i[o(x._0x4df73c)](s[o(3069)]()):i[o(2434)](s);return}const r=LngLatPoint.parse(s);!r||!r.valid()||i.push(r.toCartographic())}),i}static toPoints(e,t){if(!e||!Array.isArray(e))return e;const x=[];return e.forEach(function(i){const s=_0x3361;if(i instanceof LngLatPoint&&!t){x[s(2434)](i);return}const o=LngLatPoint.parse(i);!o||!o.valid()||x.push(o)}),x}static toArray(e,t){const x={_0x1e6a8b:4056},i={_0x529cc6:4056},s=_0x2397ca;if(!e||!Array[s(x._0x1e6a8b)](e))return e;const o=[];return e.forEach(function(r){const c=s;if(Array[c(i._0x529cc6)](r)){o.push(r);return}const _=LngLatPoint.parse(r);!_||!_.valid()||o[c(2434)](_.toArray(t))}),o}}function degree2dms(n){let e=1;n<0&&(e=-1),n=Math.abs(n);let t=Math.floor(n);const x=Math.floor((n-t)*60),i=Math.round((n-t)*3600%60);return t*=e,{degree:t,minute:x,second:i,str:t+"° "+x+"'  "+i+'"'}}function dms2degree(n,e,t){let x=Math.abs(n)+e/60+t/3600;return n<0&&(x*=-1),x}function getCGCS2000EPSGByLng(n,e,t=!0){let x;if(e){const i=parseInt(n/6)+1;if(i<13||i>23)return;t?x=i+4478:x=i+4489}else{const i=parseInt((n-1.5)/3)+1;if(i<25||i>45)return;t?x=i+4488:x=i+4509}return"EPSG:"+x}function getCGCS2000EPSGByX(n){const e={_0x595227:1104,_0x4d7d40:3937,_0xcfa6f2:3937},t=_0x2397ca,x=parseInt(n[t(e._0x595227)]()[t(2242)](0,2));return x>=13&&x<=23?t(e._0x4d7d40)+(x+4478):x>=25&&x<=45?t(e._0xcfa6f2)+(x+4488):void 0}function proj4Trans(n,e,t=_0x2397ca(3072)){const x={_0x59487a:686,_0x3d4cfe:2050},i=_0x2397ca;if(!e||!t||e===t)return n;try{if((e===CRS.CGCS2000_GK_Zone_3||e===CRS[i(x._0x59487a)])&&(e=getCGCS2000EPSGByX(n[0])),t===CRS[i(x._0x3d4cfe)]?t=getCGCS2000EPSGByLng(n[0],!1,!0):t===CRS[i(x._0x59487a)]?t=getCGCS2000EPSGByLng(n[0],!0,!0):t===CRS[i(2906)]?t=getCGCS2000EPSGByLng(n[0],!1,!1):t===CRS.CGCS2000_GK_CM_6&&(t=getCGCS2000EPSGByLng(n[0],!0,!1)),!e||!t||e===t)return n;const s=proj4(e,t,n);if(Cesium__namespace.defined(s)&&s.length>1&&!isNaN(s[0])&&s[0]!==1/0)return s}catch{}return n}function proj4TransArr(n,e,t=_0x2397ca(3072)){const x={_0x719a50:2027,_0x2c6ae1:2434},i=_0x2397ca;if(!e||e===t)return n;const s=[];for(let o=0,r=n[i(x._0x719a50)];o<r;o++){const c=n[o];if(Array[i(4056)](c[0])){const _=proj4TransArr(c,e,t);_&&_.length>0&&s.push(_)}else{const _=proj4Trans(c,e,t);_&&s[i(x._0x2c6ae1)](_)}}return s}function cartesian2lonlat(n,e){return LngLatPoint.toArray(n,e)}function cartesians2lonlats(n,e){return LngLatArray.toArray(n,e)}function cartesian2mercator(n){const e={_0x30c5e8:3272},t=_0x2397ca;return n?LngLatPoint.fromCartesian(n)[t(e._0x30c5e8)]():null}function cartesians2mercators(n){const e=[];for(let t=0,x=n.length;t<x;t++){const i=cartesian2mercator(n[t]);i&&e.push(i)}return e}function lonlat2cartesian(n,e=0){const t=_0x2397ca;return!n||n.length<2?null:Cesium__namespace[t(295)][t(402)](n[0],n[1],n[2]||e)}function lonlats2cartesians(n,e){const t={_0x2b99f9:2027},x=_0x2397ca,i=[];for(let s=0,o=n[x(t._0x2b99f9)];s<o;s++){const r=n[s];if(Array.isArray(r[0])){const c=lonlats2cartesians(r,e);c&&c.length>0&&i.push(c)}else{const c=lonlat2cartesian(r,e);c&&i.push(c)}}return i}function lonlat2mercator(n){const e=_0x2397ca;return LngLatPoint.fromArray(n)[e(3272)]()}function lonlats2mercators(n){const e={_0x5e5b47:2434},t=_0x2397ca,x=[];for(let i=0,s=n.length;i<s;i++){const o=lonlat2mercator(n[i]);x[t(e._0x5e5b47)](o)}return x}function mercator2cartesian(n,e){const t={_0x34b6b4:3570,_0x246921:639},x=_0x2397ca;if(isNaN(n[0])||isNaN(n[1]))return null;const i=LngLatPoint[x(t._0x34b6b4)](n);return Cesium__namespace[x(t._0x246921)](e)&&(i.alt=e),i.toCartesian()}function mercators2cartesians(n,e){const t=_0x2397ca,x=[];for(let i=0,s=n.length;i<s;i++){const o=mercator2cartesian(n[i],e);o&&x[t(2434)](o)}return x}function mercator2lonlat(n){return LngLatPoint.fromMercator(n).toArray()}function mercators2lonlats(n){const e=_0x2397ca,t=[];for(let x=0,i=n.length;x<i;x++){const s=mercator2lonlat(n[x]);t[e(2434)](s)}return t}const x_PI=3.141592653589793*3e3/180,PI=3.141592653589793,a=6378245,ee=.00669342162296594;function transformlat(n,e){const t={_0x211eba:2212},x=_0x2397ca;let i=-100+2*n+3*e+.2*e*e+.1*n*e+.2*Math.sqrt(Math.abs(n));return i+=(20*Math[x(t._0x211eba)](6*n*PI)+20*Math.sin(2*n*PI))*2/3,i+=(20*Math.sin(e*PI)+40*Math[x(t._0x211eba)](e/3*PI))*2/3,i+=(160*Math.sin(e/12*PI)+320*Math.sin(e*PI/30))*2/3,i}function transformlng(n,e){const t={_0x4b72e2:2212},x=_0x2397ca;let i=300+n+2*e+.1*n*n+.1*n*e+.1*Math.sqrt(Math.abs(n));return i+=(20*Math[x(t._0x4b72e2)](6*n*PI)+20*Math.sin(2*n*PI))*2/3,i+=(20*Math.sin(n*PI)+40*Math.sin(n/3*PI))*2/3,i+=(150*Math[x(2212)](n/12*PI)+300*Math.sin(n/30*PI))*2/3,i}function out_of_china(n,e){return n<72.004||n>137.8347||e<.8293||e>55.8271||!1}function bd2gcj(n){const e={_0x5cc4d1:2212,_0x23d01c:1314,_0x45dd45:3529},t=_0x2397ca,x=Number(n[0]),i=Number(n[1]),s=3.141592653589793*3e3/180,o=x-.0065,r=i-.006,c=Math.sqrt(o*o+r*r)-2e-5*Math[t(e._0x5cc4d1)](r*s),_=Math.atan2(r,o)-3e-6*Math[t(e._0x23d01c)](o*s);let l=c*Math.cos(_),h=c*Math[t(2212)](_);return l=Number(l[t(3529)](6)),h=Number(h[t(e._0x45dd45)](6)),[l,h]}function gcj2bd(n){const e={_0x4f346e:1314,_0x53f7a3:3529},t=_0x2397ca,x=Number(n[0]),i=Number(n[1]),s=Math.sqrt(x*x+i*i)+2e-5*Math.sin(i*x_PI),o=Math.atan2(i,x)+3e-6*Math[t(1314)](x*x_PI);let r=s*Math[t(e._0x4f346e)](o)+.0065,c=s*Math.sin(o)+.006;return r=Number(r[t(e._0x53f7a3)](6)),c=Number(c.toFixed(6)),[r,c]}function wgs2gcj(n){const e=_0x2397ca,t=Number(n[0]),x=Number(n[1]);if(out_of_china(t,x))return[t,x];{let i=transformlat(t-105,x-35),s=transformlng(t-105,x-35);const o=x/180*PI;let r=Math.sin(o);r=1-ee*r*r;const c=Math[e(2880)](r);i=i*180/(a*(1-ee)/(r*c)*PI),s=s*180/(a/c*Math.cos(o)*PI);let _=x+i,l=t+s;return l=Number(l.toFixed(6)),_=Number(_[e(3529)](6)),[l,_]}}function gcj2wgs(n){const e=Number(n[0]),t=Number(n[1]);if(out_of_china(e,t))return[e,t];{let x=transformlat(e-105,t-35),i=transformlng(e-105,t-35);const s=t/180*PI;let o=Math.sin(s);o=1-ee*o*o;const r=Math.sqrt(o);x=x*180/(a*(1-ee)/(o*r)*PI),i=i*180/(a/r*Math.cos(s)*PI);const c=t+x,_=e+i;let l=e*2-_,h=t*2-c;return l=Number(l.toFixed(6)),h=Number(h.toFixed(6)),[l,h]}}function bd2wgs(n){return gcj2wgs(bd2gcj(n))}function wgs2bd(n){return gcj2bd(wgs2gcj(n))}var PointTrans={__proto__:null,degree2dms,dms2degree,getCGCS2000EPSGByLng,getCGCS2000EPSGByX,proj4Trans,proj4TransArr,cartesian2lonlat,cartesians2lonlats,cartesian2mercator,cartesians2mercators,lonlat2cartesian,lonlats2cartesians,lonlat2mercator,lonlats2mercators,mercator2cartesian,mercators2cartesians,mercator2lonlat,mercators2lonlats,bd2gcj,gcj2bd,wgs2gcj,gcj2wgs,bd2wgs,wgs2bd};const Lang={_放大:["放大","放大","Zoom In"],_缩小:["缩小","縮小",_0x2397ca(2752)],_查看此处坐标:[_0x2397ca(1933),_0x2397ca(992),"Location info"],_位置信息:["位置信息","位置信息","The location information"],_经度:["经度","經度","Lon"],_纬度:["纬度","緯度",_0x2397ca(3708)],_海拔:["高程","高程","Alt"],_横坐标:["横坐标","橫坐標","X"],_纵坐标:["纵坐标",_0x2397ca(3156),"Y"],_查看当前视角:["查看当前视角",_0x2397ca(3761),_0x2397ca(2700)],_当前视角信息:["当前视角信息","當前視角信息","Current Camera Information"],_视角切换:["视角切换",_0x2397ca(651),_0x2397ca(1042)],_禁止进入地下:["禁止进入地下","禁止進入地下","Do not go underground"],_允许进入地下:[_0x2397ca(2845),"允許進入地下","Access to the ground"],_绕此处环绕飞行:["绕此处环绕飞行","繞此處環繞飛行",_0x2397ca(3257)],_关闭环绕飞行:[_0x2397ca(2952),"關閉環繞飛行",_0x2397ca(2083)],_移动到此处:["移动到此处","移動到此處",_0x2397ca(3021)],_第一视角站到此处:[_0x2397ca(1716),"第一視角站到此處",_0x2397ca(718)],_开启键盘漫游:["开启键盘漫游",_0x2397ca(2694),"Enable keyboard roaming"],_关闭键盘漫游:["关闭键盘漫游",_0x2397ca(4048),"Turn off keyboard roaming"],_跟踪锁定:["跟踪锁定","跟踪鎖定","TrackedEntity"],_取消锁定:[_0x2397ca(1372),"取消鎖定",_0x2397ca(882)],_三维模型:["三维模型","三維模型","3DTiles"],_显示三角网:["显示三角网","顯示三角網","Display Wireframe"],_关闭三角网:["关闭三角网","關閉三角網","Close Wireframe"],_显示包围盒:["显示包围盒",_0x2397ca(2537),_0x2397ca(3605)],_关闭包围盒:["关闭包围盒","關閉包圍盒",_0x2397ca(2833)],_地形服务:[_0x2397ca(712),"地形服務","Terrain"],_开启地形:[_0x2397ca(2253),"顯示地形","Open terrain"],_关闭地形:["关闭地形","關閉地形","Close terrain"],_图上标记:[_0x2397ca(2234),"圖上標記","Drawing"],_标记点:["标记点","標記點","Mark points"],_标记线:["标记线","標記線","Tag line"],_标记面:["标记面","標記面","Mark surface"],_标记圆:[_0x2397ca(277),"標記圓","Mark round"],_标记矩形:[_0x2397ca(1253),"標記矩形","Mark rectangular"],_允许编辑:["允许编辑","允許編輯","Allowed to edit"],_禁止编辑:["禁止编辑",_0x2397ca(898),"Prohibit to edit"],_导出GeoJSON:["导出GeoJSON",_0x2397ca(2803),"Export GeoJSON"],_清除所有标记:["清除所有标记","清除所有標記",_0x2397ca(548)],_特效效果:["特效效果",_0x2397ca(2286),_0x2397ca(3286)],_开启下雨:["开启下雨",_0x2397ca(922),"Enable rain"],_关闭下雨:["关闭下雨","關閉下雨",_0x2397ca(3924)],_开启下雪:[_0x2397ca(1215),"開啓下雪",_0x2397ca(1158)],_关闭下雪:[_0x2397ca(3246),"關閉下雪",_0x2397ca(861)],_开启雾天气:["开启雾天气",_0x2397ca(836),"Enable fog"],_关闭雾天气:[_0x2397ca(4049),"關閉霧天氣","Close fog"],_开启泛光:["开启泛光","開啓泛光",_0x2397ca(3052)],_关闭泛光:["关闭泛光","關閉泛光",_0x2397ca(1296)],_开启亮度:["开启亮度","開啓亮度",_0x2397ca(1815)],_关闭亮度:["关闭亮度","關閉亮度","Close brightness"],_开启夜视:["开启夜视","開啓夜視","Enable night vision"],_关闭夜视:["关闭夜视","關閉夜視","Close night vision"],_开启黑白:["开启黑白",_0x2397ca(2540),_0x2397ca(3154)],_关闭黑白:["关闭黑白","關閉黑白","Close black and white"],_开启拾取高亮:["开启拾取高亮","開啓拾取高亮","Enable Pick highlighted"],_关闭拾取高亮:[_0x2397ca(1348),"關閉拾取高亮","Close Pick highlighted"],_场景设置:["场景设置","場景設置",_0x2397ca(1901)],_开启深度监测:["开启深度监测","開啓深度監測",_0x2397ca(1362)],_关闭深度监测:["关闭深度监测","關閉深度監測","Close depth test against terrain"],_显示星空背景:["显示星空背景",_0x2397ca(2258),"Enable skyBox"],_关闭星空背景:[_0x2397ca(2742),"關閉星空背景","Close skyBox"],_开启日照阴影:[_0x2397ca(1291),_0x2397ca(1523),"Enable shadow"],_关闭日照阴影:["关闭日照阴影","關閉日照陰影","Close shadow"],_开启大气渲染:["开启大气渲染",_0x2397ca(1915),_0x2397ca(1140)],_关闭大气渲染:[_0x2397ca(2260),"關閉大氣渲染",_0x2397ca(2758)],_场景出图:["场景出图","場景出圖",_0x2397ca(1571)],_图上量算:["图上量算",_0x2397ca(3671),"Measure"],_删除测量:["删除测量","刪除測量",_0x2397ca(435)],_角度:["角度","角度","Angle"],_距离:["距离","距離","Distance"],_面积:["面积","面積","Area"],_总长:["总长","總長","Total distance"],_起点:["起点","起點","Start"],_高度差:["高度差","高度差","Height difference"],_空间距离:["空间距离",_0x2397ca(3325),_0x2397ca(2439)],_水平距离:["水平距离","水平距離","Horizontal distance"],_正在计算体积:["正在计算体积",_0x2397ca(2615),"Calculating volume"],_填方体积:["填方体积",_0x2397ca(2581),"The volume of fill"],_挖方体积:["挖方体积","挖方體積","Excavation volume"],_横切面积:["横切面积","橫切面積","Crosscutting area"],_面上:["面上","面上","Up"],_面下:["面下","面下","Down"],_米:["米","米","m"],_公里:["公里","公裏","km"],_万米:["万米","万米","myriametre"],_海里:["海里","海裏",_0x2397ca(1265)],_丈:["丈","丈","zhang"],_平方米:[_0x2397ca(2155),"平方米","m²"],_平方公里:[_0x2397ca(935),"平方公裏","km²"],_亩:["亩","畝","mu"],_公顷:["公顷","公頃","ha"],_立方米:["方","方","m³"],_万立方米:["万方","万方","wm³"],_单击开始绘制:["单击开始绘制","單擊開始繪制","Click to start drawing"],_单击完成绘制:[_0x2397ca(1800),_0x2397ca(3737),_0x2397ca(463)],_双击完成绘制:[_0x2397ca(2962),"雙擊完成繪制","Double click to finish drawing"],_单击增加点:["单击增加点","單擊增加點","left click add point"],_右击删除点:["右击删除点",_0x2397ca(2246),"right click delete point"],_单击后激活编辑:[_0x2397ca(3822),_0x2397ca(1159),"Click to activate editing"],_右击菜单删除:["右击菜单删除","右擊菜單刪除","Right click menu to delete"],_更多功能请右击:["更多功能请右击","更多功能請右擊","For more functions, right click"],_停止编辑:["停止编辑","停止編輯",_0x2397ca(3899)],_删除该点:["删除该点","刪除該點",_0x2397ca(1621)],_按轴平移:["按轴平移",_0x2397ca(2257),"Translation by axis"],_停止按轴平移:["停止按轴平移","停止按軸平移",_0x2397ca(3059)],_按轴旋转:["按轴旋转","按軸旋轉","Rotation on axis"],_停止按轴旋转:[_0x2397ca(943),"停止按軸旋轉","Stop rotation on axis"],_调整比例:["调整比例","調整比例","Edit Scale"],_停止调整比例:["停止调整比例",_0x2397ca(2560),"Stop edit scale"],_释放后完成修改:["释放后完成修改",_0x2397ca(2210),"Complete the modification after release"],_该对象不允许编辑:["该对象不允许编辑",_0x2397ca(3721),"This object does not allow editing"],_拖动该点后:["拖动该点后","拖動該點後",_0x2397ca(3177)],_拖动对象后:["拖动对象后","拖動對象後",_0x2397ca(2707)],_修改位置:[_0x2397ca(1386),"修改位置","Modify the position"],_整体平移:["整体平移",_0x2397ca(849),"The overall translation"],_增加点:["增加点",_0x2397ca(186),"Add point"],_修改高度:["修改高度","修改高度",_0x2397ca(517)],_修改半径:[_0x2397ca(1469),"修改半徑","Modify the radius"],_修改长度:["修改长度(X方向)","修改長度(X方向)","Modify the length(X direction )"],_修改宽度:[_0x2397ca(3642),_0x2397ca(1534),"Change the width(Y direction)"],_修改方向:["修改方向","修改方向","Change direction"],_修改缩放比例:["修改缩放比例","修改縮放比例","Modify the Scale"],_无法删除不能少于最小点数:["无法删除，点数量不能少于","無法刪除，點數量不能少于",_0x2397ca(511)],_删除:["删除","刪除","Delete"],_加载模型中:["加载模型中…","加载模型中…","Load Model…"]};function xhrAdapter(n){const e={_0xf630c8:2574,_0x232732:2768,_0xdeaf04:914},t={_0x5bd54e:3591},x=_0x2397ca;return n={method:x(2001),timeout:0,maxContentLength:-1,maxBodyLength:-1,params:n.queryParameters||{},...n},new Promise(function(s,o){const r={_0x37a408:3694},c=x;let _=n.data;const l=n.headers||{},h=n[c(e._0xf630c8)];isFormData(_)&&delete l["Content-Type"];let d=new XMLHttpRequest;d.open(n[c(e._0x232732)].toUpperCase(),buildURL(n[c(e._0xdeaf04)],n.params,n.paramsSerializer),!0),d.timeout=n.timeout;function u(){if(!d)return;const m="getAllResponseHeaders"in d?parseHeaders(d.getAllResponseHeaders()):null,f=!h||h==="text"||h==="json"?d.responseText:d.response,g={data:transformResponse(d,f),status:d.status,statusText:d.statusText,headers:m,options:n,request:d};settle(function(y){s(y)},function(y){o(y)},g),d=null}"onloadend"in d?d.onloadend=u:d.onreadystatechange=function(){const f=c;!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf(f(1808))===0)||setTimeout(u)},d.onabort=function(){const f=c;d&&(o(createError(f(3675),n,"ECONNABORTED",d)),d=null)},d.onerror=function(){o(createError(c(t._0x5bd54e),n,null,d)),d=null},d.ontimeout=function(){const f=c;let g="timeout of "+n.timeout+"ms exceeded";n.timeoutErrorMessage&&(g=n.timeoutErrorMessage),o(createError(g,n,f(r._0x37a408),d)),d=null},"setRequestHeader"in d&&forEach(l,function(f,g){const b=c;typeof _>"u"&&g[b(2741)]()==="content-type"?delete l[g]:d[b(3619)](g,f)}),!isUndefined(n.withCredentials)&&(d.withCredentials=!!n.withCredentials),h&&h!=="json"&&(d.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&d.addEventListener(c(1708),n.onDownloadProgress),typeof n.onUploadProgress=="function"&&d.upload&&d.upload[c(1130)]("progress",n.onUploadProgress),!_&&(_=null),d.send(_)})}function isString$1(n){return typeof n===_0x2397ca(3994)}function isDate(n){const e={_0x5cf6af:1580},t=_0x2397ca;return toString.call(n)===t(e._0x5cf6af)}function isObject$1(n){return n!==null&&typeof n=="object"}function isFormData(n){return typeof FormData<"u"&&n instanceof FormData}function isUndefined(n){return typeof n>"u"}function isURLSearchParams(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function forEach(n,e){const t=_0x2397ca;if(!(n===null||typeof n===t(3819)))if(typeof n!="object"&&(n=[n]),Array[t(4056)](n))for(let x=0,i=n.length;x<i;x++)e.call(null,n[x],x,n);else for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&e.call(null,n[x],x,n)}function encode(n){const e={_0x121062:1487},t=_0x2397ca;return encodeURIComponent(n)[t(e._0x121062)](/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function trim$1(n){return n[_0x2397ca(2273)]?n.trim():n.replace(/^\s+|\s+$/g,"")}function buildURL(n,e,t){const x={_0x833ffe:2434},i=_0x2397ca;if(!e)return n;let s;if(t)s=t(e);else if(isURLSearchParams(e))s=e.toString();else{const o=[];forEach(e,function(c,_){c===null||typeof c>"u"||(Array.isArray(c)?_=_+"[]":c=[c],forEach(c,function(h){const d=_0x3361;isDate(h)?h=h[d(3942)]():isObject$1(h)&&(h=JSON.stringify(h)),o[d(x._0x833ffe)](encode(_)+"="+encode(h))}))}),s=o.join("&")}if(s){const o=n[i(884)]("#");o!==-1&&(n=n.slice(0,o)),n+=(n[i(884)]("?")===-1?"?":"&")+s}return n}const ignoreDuplicateOf=["age",_0x2397ca(2831),_0x2397ca(1045),"content-type",_0x2397ca(3338),"expires","from",_0x2397ca(361),"if-modified-since","if-unmodified-since","last-modified","location",_0x2397ca(1871),"proxy-authorization","referer","retry-after","user-agent"];function parseHeaders(n){const e={_0xae4ade:884},t={};let x,i,s;return n&&forEach(n.split(`
`),function(r){const c=_0x3361;if(s=r.indexOf(":"),x=trim$1(r[c(158)](0,s))[c(2741)](),i=trim$1(r.substr(s+1)),x){if(t[x]&&ignoreDuplicateOf[c(e._0xae4ade)](x)>=0)return;x==="set-cookie"?t[x]=(t[x]?t[x]:[])[c(3210)]([i]):t[x]=t[x]?t[x]+", "+i:i}}),t}function settle(n,e,t){!t[_0x2397ca({_0x17606a:1605}._0x17606a)]||validateStatus(t.status)?n(t):e(createError("Request failed with status code "+t.status,t.options,null,t.request,t))}function validateStatus(n){return n>=200&&n<300}function createError(n,e,t,x,i){const s=new Error(n);return enhanceError(s,e,t,x,i)}function enhanceError(n,e,t,x,i){const s={_0x9b785a:3044,_0x5b0e17:2897},o={_0x3d6e92:2044,_0x591205:256,_0x392b07:3044},r=_0x2397ca;return n[r(s._0x9b785a)]=e,t&&(n.code=t),n.request=x,n.response=i,n[r(s._0x5b0e17)]=!0,n.toJSON=function(){const _=r;return{message:this[_(1959)],name:this[_(o._0x3d6e92)],description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this[_(o._0x591205)],options:this[_(o._0x392b07)],code:this.code,status:this[_(1857)]&&this.response[_(1605)]?this.response.status:null}},n}function transformResponse(n,e){const t=_0x2397ca;if(isString$1(e)&&e[t(2027)])try{return JSON[t(1364)](e)}catch{}return e}const version=_0x2397ca(2497),update="2023-07-05 09:21:16",image={url:_0x2397ca(4041),rectangle:[10,5,88,20]};new Function("czmver","")(Cesium[_0x2397ca(296)]);let customImage;function setImage(n){customImage=n}function addView(n){!(image||customImage)||!n||n.primitives}function add(n,e){const t={_0x3466a9:3129},x=_0x2397ca;!n||!n[x(1187)]||(addView(n),setInterval(function(){try{!checkHasImage(n)&&addView(n)}catch{}},6e5+Math[x(t._0x3466a9)]()*6e5))}function checkHasImage(n){const e={_0x56da3c:2027,_0x21303a:1187,_0xb6a700:2001},t=_0x2397ca;if(!(n!=null&&n.primitives)||n.primitives[t(2027)]===0)return!1;for(let x=0,i=n[t(1187)][t(e._0x56da3c)];x<i;++x)if(n[t(e._0x21303a)][t(e._0xb6a700)](x)._muyao)return!0;return!1}function isNumber(n){return typeof n=="number"&&n.constructor===Number}function isString(n){return typeof n=="string"&&n[_0x2397ca({_0x9ab435:931}._0x9ab435)]===String}function isBoolean(n){return typeof n===_0x2397ca({_0x36f45b:802}._0x36f45b)&&n.constructor===Boolean}function isObject(n){const e={_0x3e61ce:1104},t=_0x2397ca;return Object[t(2121)][t(e._0x3e61ce)].call(n)===t(752)}const hasOwn={}.hasOwnProperty;function isPlainObject(n){const e={_0x554f0c:2121},t=_0x2397ca;return isObject(n)?!(n.constructor&&!hasOwn.call(n,t(931))&&!hasOwn.call(n.constructor[t(e._0x554f0c)],t(3919))):!1}function isFunction(n){return n&&typeof n=="function"}function isSimpleType(n){const e=_0x2397ca;return n==null||n===void 0?!1:!!(isString(n)||isBoolean(n)||isNumber(n)||Array[e(4056)](n))}const isMars3DCesium=!!(Cesium__namespace.ExpandByMars||Cesium__namespace.Mars3DEx);function formatNum$1(n,e=0){const t={_0x204dc7:2207},x=_0x2397ca,i=Math.pow(10,e);return Math[x(t._0x204dc7)](n*i)/i}function padLeft0(n,e){n=String(n);let t=n.length;for(;t<e;)n="0"+n,t++;return n}function splitWords(n){return trim(n).split(/\s+/)}function trim(n){if(n)return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function getStrLength(n){if(n)return n.replace(/[\u0391-\uFFE5]/g,"00").length}const templateRe=/\{ *([a-zA-Z0-9_\u4e00-\u9fa5]+) *\}/g;function template(n,e,t){const x={_0x545b1d:920},i={_0x1d133e:2893},s=_0x2397ca;return n==null||!e||!templateRe[s(x._0x545b1d)](n)?n:n.replace(templateRe,function(o,r,c,_){const l=s;let h=e[r];if(!Cesium__namespace.defined(h))return t?isString(t)?t:"":o;if(isFunction(h)){if(h=h(e),!Cesium__namespace[l(639)](h))return t?isString(t)?t:"":o}else if(h[l(i._0x1d133e)]&&isFunction(h.getValue)&&(h=h[l(2893)](Cesium__namespace.JulianDate.now()),!Cesium__namespace.defined(h)))return t?isString(t)?t:"":o;return h})}let lastId=0;function getGlobalId(){return++lastId}function stampGlobalId(n){const e={_0x5d4787:2124},t=_0x2397ca;return n&&isObject(n)?(n[t(2124)]=n._mars3d_id||++lastId,n[t(e._0x5d4787)]):-1}function createGuid(n="m-"){return n+Cesium__namespace[_0x2397ca({_0x124f3b:2022}._0x124f3b)]()}let callbackIndex=0;function getTemplateHtml(_0x136b93){const _0x1f4b43={_0x2259f2:2273,_0x37a616:1429,_0xf11fe7:1823,_0x38e309:1780,_0xdeedaf:2384,_0x20c56a:2739,_0x394dc1:1767,_0x3c669a:1767,_0x2051bf:730,_0xf62e54:3516,_0x45ce98:968,_0x2c9367:2390,_0x1e259e:1908,_0x3c1a0e:998,_0x2a3acb:1526,_0x22c134:1025},_0x41eced=_0x2397ca;let _0x33a26f=_0x136b93.attr;if(!_0x33a26f)return!1;const _0x35d58a=_0x136b93.title,_0x145af9=_0x136b93.edit,_0x3f048e=_0x136b93.template;if(_0x33a26f=getAttrVal(_0x33a26f),!_0x3f048e||_0x3f048e==="all"){let n=0,e=_0x35d58a?'<div class="mars3d-template-titile">'+_0x35d58a+"</div>":"";e+='<div class="mars3d-template-content" >';for(const t in _0x33a26f)try{let x=_0x33a26f[t];if(t==null||x==null||t==="Shape"||t==="FID"||t==="OBJECTID"||t==="_definitionChanged"||t===_0x41eced(927)||isFunction(x)||(isObject(x)&&(x=JSON[_0x41eced(3080)](getAttrVal(x,{onlySimpleType:!0}))),x=String.prototype[_0x41eced(_0x1f4b43._0x2259f2)].call(x||""),x===""||x===_0x41eced(3293)||x===_0x41eced(2283)))continue;e+=_0x41eced(617)+t+"</label>"+x+"</div>",n++}catch(x){logError$1("getTemplateHtml:构造all时异常",x)}return e+="</div>",n===0?!1:e}else if(Array.isArray(_0x3f048e)){let _0xc4d1f4=0,_0x465697=_0x35d58a?_0x41eced(3885)+_0x35d58a+"</div>":'<div style="height: 10px;"></div>';_0x465697+='<div class="mars3d-template-content" >';for(let _0x560e38=0;_0x560e38<_0x3f048e[_0x41eced(2027)];_0x560e38++){const _0x457632=_0x3f048e[_0x560e38];if(_0x457632==null)continue;const _0x26a859=_0x457632.field,_0x44efec=_0x457632[_0x41eced(_0x1f4b43._0x37a616)]||"";if(_0x457632[_0x41eced(968)]===_0x41eced(1942)||_0x457632.type==="button"){let _0x2536a5="";const _0x4007a9=_0x457632.callback;if(_0x4007a9){const _0x444b53="_cache_getTemplateHtml_"+callbackIndex++;isFunction(_0x4007a9)?window[_0x444b53]=function(){_0x4007a9(_0x33a26f)}:isString(_0x4007a9)&&(window[_0x444b53]=function(){eval(_0x4007a9+"("+JSON.stringify(_0x33a26f)+")")}),_0x2536a5='onclick="'+_0x444b53+'();"  '}_0x465697+=_0x41eced(_0x1f4b43._0xf11fe7)+_0x2536a5+`
                      data-type="`+_0x26a859+'" class="mars3d-popup-btn '+_0x44efec+_0x41eced(369)+(_0x457632.name||_0x41eced(3538))+_0x41eced(_0x1f4b43._0x38e309),_0xc4d1f4++;continue}else if(_0x457632[_0x41eced(968)]===_0x41eced(_0x1f4b43._0xdeedaf)){const n=template(_0x457632[_0x41eced(2384)],_0x33a26f,!0);_0x465697+='<div class="'+_0x44efec+'">'+n+_0x41eced(_0x1f4b43._0x20c56a),_0xc4d1f4++;continue}let _0x47dcaf=_0x33a26f[_0x26a859];if(!(!_0x145af9&&(_0x26a859==null||_0x47dcaf==null||isFunction(_0x47dcaf)))&&(_0x47dcaf=String.prototype[_0x41eced(_0x1f4b43._0x2259f2)].call(_0x47dcaf||""),!(!_0x145af9&&(_0x457632.hideNull??!0)&&(_0x47dcaf==null||_0x47dcaf===""||_0x47dcaf==="Null"||_0x47dcaf===_0x41eced(2283)||_0x47dcaf.length===0)))){if(_0x457632[_0x41eced(_0x1f4b43._0x394dc1)])try{isFunction(_0x457632.format)?_0x47dcaf=_0x457632[_0x41eced(_0x1f4b43._0x3c669a)](_0x47dcaf):_0x47dcaf=eval(_0x457632.format+"("+_0x47dcaf+")")}catch(n){logWarn("getTemplateHtml:格式化出错",_0x457632)}if(_0x145af9)switch(_0x457632.type){case"textarea":_0x47dcaf=_0x41eced(3201)+_0x44efec+_0x41eced(_0x1f4b43._0x2051bf)+(_0x136b93.width||190)+_0x41eced(_0x1f4b43._0xf62e54)+_0x26a859+'"  placeholder="请输入 '+_0x457632[_0x41eced(2044)]+'"  >'+_0x47dcaf+_0x41eced(3710);break;case"string":case"number":default:_0x47dcaf='<input type="'+(_0x457632[_0x41eced(_0x1f4b43._0x45ce98)]||"text")+'" class="mars3d-popup-edititem '+_0x44efec+'" style="width:'+(_0x136b93.width||190)+`px;"
                          data-type="`+_0x26a859+'" value="'+_0x47dcaf+'" placeholder="请输入 '+_0x457632.name+_0x41eced(_0x1f4b43._0x2c9367);break}_0x457632[_0x41eced(_0x1f4b43._0x1e259e)]&&(_0x47dcaf+=_0x457632.unit),_0x465697+="<div><label>"+_0x457632.name+"</label>"+_0x47dcaf+"</div>",_0xc4d1f4++}}return _0x465697+=_0x41eced(_0x1f4b43._0x20c56a),_0xc4d1f4===0?!1:_0x465697}else if(isObject(_0x3f048e))switch(_0x3f048e.type){case"iframe":return'<iframe id="ifarm" src="'+template(_0x3f048e.url,_0x33a26f,!0)+_0x41eced(_0x1f4b43._0x3c1a0e)+(_0x3f048e[_0x41eced(_0x1f4b43._0x2a3acb)]||"300")+_0x41eced(_0x1f4b43._0x22c134)+(_0x3f048e.height||"300")+_0x41eced(1198);case"javascript":{const _0x6a7088=_0x3f048e.callback;return eval(_0x6a7088+"("+JSON[_0x41eced(3080)](_0x33a26f)+")")}}else{if(isString(_0x3f048e))return template(_0x3f048e,_0x33a26f,!0);if(isFunction(_0x3f048e))return _0x3f048e(_0x3f048e,_0x33a26f)}return!1}function getCesiumValue(n,e,t){const x={_0x6712a2:2108},i=_0x2397ca;if(!n)return n;if(e){if(n instanceof e)return n;if(n._value&&n[i(x._0x6712a2)]instanceof e)return n._value}return isFunction(n.getValue)?n[i(2893)](t||Cesium__namespace.JulianDate.now()):n}function getCesiumColor(n,e,t){const x={_0x3026c8:1053},i=_0x2397ca;return n?(isFunction(n.getValue)&&(n=n.getValue(t||Cesium__namespace.JulianDate.now())),isString(n)?Cesium__namespace.Color[i(x._0x3026c8)](n):isFunction(n)?getCesiumColor(n(t),e):n):e}function getColorByStyle(n,e=Cesium__namespace.Color[_0x2397ca(1819)]){const t={_0x461a52:1089,_0x1d6230:1087,_0x525a72:2891,_0x386dcc:2493,_0x3379d6:3138,_0x237d78:4010,_0x353cc8:4010,_0x447314:4010,_0xc4cd71:2182},x=_0x2397ca;let i;return n.color?isString(n.color)?i=Cesium__namespace.Color.fromCssColorString(n[x(t._0x461a52)]):isFunction(n.color)?i=n.color(n):i=n.color:n.randomColor?i=Cesium__namespace.Color[x(t._0x1d6230)]({minimumRed:n.minimumRed??0,maximumRed:n.maximumRed??.75,minimumGreen:n[x(t._0x525a72)]??0,maximumGreen:n[x(t._0x386dcc)]??.75,minimumBlue:n[x(t._0x3379d6)]??0,maximumBlue:n.maximumBlue??.75}):i=e,i&&(Cesium__namespace.defined(n[x(t._0x237d78)])&&(n[x(t._0x353cc8)]<0?n.opacity=0:n.opacity>1&&(n.opacity=1),i=i.withAlpha(Number(n[x(t._0x447314)]))),Cesium__namespace.defined(n[x(t._0xc4cd71)])&&n.globalAlpha!==1&&(i=i.withAlpha(i.alpha*n.globalAlpha)),i)}function getAttrVal(n,e={}){const t={_0x575876:2893,_0x231ccf:2116,_0x13586c:2027},x=_0x2397ca;if(!n)return n;try{isFunction(n[x(t._0x575876)])&&(n=n.getValue(Cesium__namespace.JulianDate[x(t._0x231ccf)]()));const i={};if(n[x(927)]&&n._propertyNames[x(t._0x13586c)]>0)for(const s of n[x(927)]){const o=getOneAttrValue(s,n[s],e);o!=null&&(i[s]=o)}else for(const s in n){const o=getOneAttrValue(s,n[s],e);o!=null&&(i[s]=o)}return i}catch(i){logError$1("getAttrVal:出错了",i)}return n}function get3DTileFeatureAttr(n){const e={_0x1db397:2027,_0x3147ea:3577,_0x1da326:4045},t=_0x2397ca,x={},i=n.getPropertyIds?n.getPropertyIds():n.getPropertyNames();for(let s=0;s<i[t(e._0x1db397)];s++){const o=i[s];if(!n[t(e._0x3147ea)](o))continue;const r=n[t(e._0x1da326)](o);r!=null&&(x[o]=r)}return x}function getOneAttrValue(n,e,t){const x={_0x567255:2893,_0x22514b:2893,_0x4ad070:1522,_0x1b0b02:2116},i=_0x2397ca;if(e==null||e===""||e==="Null"||e==="Unknown"||(e[i(x._0x567255)]&&typeof e[i(x._0x22514b)]=="function"&&n!=="material"&&(e=e.getValue(Cesium__namespace[i(x._0x4ad070)][i(x._0x1b0b02)]())),isFunction(e)))return null;if(t.onlySimpleType){if(e instanceof Cesium__namespace.Color)return e.toCssColorString();if(t.noArray&&Array[i(4056)](e))return null;if(isPlainObject(e))return e;if(!isSimpleType(e))return null}return e}function merge(n={},...e){const t=_0x2397ca;let x,i,s,o;for(i=0,s=e[t(2027)];i<s;i++){o=e[i];for(x in o)hasMergeObject(n[x],o[x])?n[x]=merge(n[x],o[x]):n[x]=o[x]}return n}function hasMergeObject(n,e){const t={_0x48d572:639,_0x1c80ba:4056},x=_0x2397ca;return!Cesium__namespace[x(t._0x48d572)](n)||!Cesium__namespace.defined(e)||Array[x(t._0x1c80ba)](n)||Array.isArray(e)?!1:!!(isPlainObject(n)&&isPlainObject(e))}function clone(n,e=[],t=5){const x={_0x5ba958:2027,_0x4c67ec:884},i=_0x2397ca;if(n==null||typeof n!==i(2036))return n;if(n instanceof Date){const s=new Date;return s.setTime(n.getTime()),s}if(Array.isArray(n)&&t>=0){const s=[];for(let o=0,r=n[i(x._0x5ba958)];o<r;++o)s[o]=clone(n[o],e,t-1);return s}if(typeof n=="object"&&t>=0)try{if(n.clone)return n.clone();if(!isPlainObject(n))return n;const s={};for(const o in n)isFunction(o)||e[i(x._0x4c67ec)](o)===-1&&n[i(2444)](o)&&(s[o]=clone(n[o],e,t-1));return s}catch(s){logError$1("clone:出错了",s)}return n}function getArrayRandomOne(n){const e=Math.floor(Math.random()*n.length+1)-1;return n[e]}function removeArrayItem(n,e){const t=_0x2397ca;for(let x=0;x<n.length;x++)if(n[x]===e)return n[t(2713)](x,1),!0;return!1}function getSymbolStyle(n,e){const t={_0x4e3064:2119,_0x4614c8:480},x=_0x2397ca;if(!n)return{};let i=n.styleOptions?clone(n.styleOptions):{};if(n[x(t._0x4e3064)]&&n.styleFieldOptions&&e){const s=e[n.styleField],o=n.styleFieldOptions[s];o!=null&&(i=merge(i,o))}if(e)for(const s in i)i[s]=template(i[s],e);if(i.label&&(i.label=clone(i.label)),i[x(t._0x4614c8)]&&(i[x(480)]=clone(i.highlight)),isFunction(n.callback)){const s=n.callback(e,i);s!=null&&(i=merge(i,s))}return i}function geojsonToArcGIS(n,e){return geojsonToArcGIS$1(n,e)}function arcgisToGeoJSON(n,e){return arcgisToGeoJSON$1(n,e)}function getGeoJsonFeatures(n){const e={_0x425af8:715,_0x45f7c2:1655},t=_0x2397ca;if(n[t(1593)]&&n.geometryType.indexOf(t(1092))!==-1)n=arcgisToGeoJSON(n);else if(n.type===t(e._0x425af8)){let i=[];for(const s in n.objects)if(n.objects[t(2444)](s)){n=Cesium__namespace.topojson.feature(n,n[t(e._0x45f7c2)][s]);const o=getGeoJsonFeatures(n);i=i[t(3210)](o)}return i}let x;return Array.isArray(n.features)?x=n.features:Array.isArray(n)?x=n:x=[n],x}function geoJsonToGraphics(n,e={}){const t=_0x2397ca;var x,i;if(!n)return[];const s=getGeoJsonFeatures(n);if(n!=null&&(x=n.crs)!==null&&x!==void 0&&(i=x.properties)!==null&&i!==void 0&&i.name&&!e[t(3137)]){const r=n[t(3137)].properties.name;r.indexOf("EPSG:")!==-1&&(e.crs=r)}let o=[];for(let r=0,c=s[t(2027)];r<c;r++){const _=s[r],l=featureToGraphic(_,e);l&&l.length>0&&(o=o.concat(l))}return o}function featureToGraphic(n,e={}){const t={_0x1ad0d2:3910,_0x49da40:968,_0x3a002f:1578,_0x217678:357,_0x2c0e3b:1468,_0x510c71:2559,_0x246c5f:168,_0x56eaca:2094,_0x102863:639,_0x5702af:3628,_0x2ecf77:390,_0xc0a7f8:911,_0x54e15c:1125,_0x233d43:3648,_0x486b7f:2774,_0x2508c7:743,_0x424790:2808,_0x37e441:2592,_0x1281ec:2562,_0x1a749e:2027},x={_0x4d6b4b:2027},i=_0x2397ca;var s,o,r;let c=[];n.type==="GeometryCollection"&&(n={geometry:n});const _=n[i(t._0x1ad0d2)],l=_==null?void 0:_.coordinates;if(!l&&!_)return c;let h;e[i(968)]?h=e[i(968)]:hasType((s=n)===null||s===void 0||(o=s.properties)===null||o===void 0?void 0:o[i(t._0x49da40)])&&(h=n[i(263)].type);let d=clone((r=n)===null||r===void 0?void 0:r.properties,["style"])||{};d&&d.type&&d[i(t._0x3a002f)]&&(d=d.attr);let u={};if(n.properties){n.properties[i(357)]&&(u={...n.properties[i(t._0x217678)]});const v=d["marker-symbol"];if(Cesium__namespace.defined(v)){u.image=v;const w=d[i(t._0x2c0e3b)];Cesium__namespace.defined(w)&&(u.outline=!0,u.outlineColor=w)}const M=d.fill;if(Cesium__namespace.defined(M)&&_.type!=="LineString"&&_.type!=="MultiLineString"){u.color=M;const w=d[i(t._0x510c71)];Cesium__namespace.defined(w)&&w!==1&&(u.opacity=w);const H=d.stroke;if(Cesium__namespace.defined(H)){u[i(3472)]=!0,u.outlineColor=H;const D=d["stroke-width"];Cesium__namespace.defined(D)&&(u.outlineWidth=D);const F=d["stroke-opacity"];Cesium__namespace.defined(F)&&F!==1&&(u[i(t._0x246c5f)]=F)}}else{const w=d[i(t._0x56eaca)];if(Cesium__namespace[i(t._0x102863)](w)){u[i(1089)]=w;const H=d["stroke-width"];Cesium__namespace[i(639)](H)&&(u.width=H);const D=d[i(2303)];Cesium__namespace.defined(D)&&D!==1&&(u.opacity=D)}}}if(e.style&&(e.style[i(911)]?u={...u,...e.style}:u={...e.style}),e.symbol)if(isFunction(e[i(t._0x5702af)]))u=e.symbol(d,u,n)||u,u.type&&(h=u.type);else{h=e.symbol.type||h;const v=getSymbolStyle(e.symbol,n.properties||{});v&&Object[i(t._0x2ecf77)](v).length!==0&&(e[i(t._0x5702af)][i(t._0xc0a7f8)]?u={...v,...u}:u=v)}let m=e[i(3137)];m==="EPSG:4326"&&(m=null);function f(v){return m&&(v=proj4Trans(v,m)),e.onPointTrans?e.onPointTrans(v):v}function g(v){const M=i;if(!e.onPointTrans&&!m)return v;const w=[];for(let H=0,D=v.length;H<D;H++){const F=v[H];if(Array.isArray(F[0])){const L=g(F);L&&L[M(x._0x4d6b4b)]>0&&w.push(L)}else{const L=f(F);L&&w.push(L)}}return w}function b(v,M){eachGraphicType(function(w){isObject(M[w])&&(v[w]=M[w],delete M[w])})}let y,C;switch(_.type){case i(t._0x54e15c):{(!h||!isPointType(h))&&(h=u.image?i(t._0x233d43):i(2614));const v={type:h,position:f(l),style:u,attr:d};b(v,d),c.push(v);break}case"MultiPoint":{for((!h||!isPointType(h))&&(h=u.image?"billboardP":"pointP"),y=0,C=l[i(2027)];y<C;y++){const v={type:h,position:f(l[y]),style:u,attr:d};b(v,d),c.push(v)}break}case"LineString":{!h&&(h="polylineP");const v={type:h,positions:g(l),style:u,attr:d};b(v,d),c.push(v);break}case i(t._0x486b7f):{!h&&(h="polylineP");let v;const M=[];for(y=0,C=l.length;y<C;y++){const w={type:h,positions:g(l[y]),style:u,attr:d};b(w,d),c.push(w),M.push(w),(!v||v.positions.length<w.positions.length)&&(v=w)}if(v&&(v.isMultiMax=!0,u.label&&!u.label.showAll))for(y=0,C=M.length;y<C;y++){const w=M[y];v!==w&&(w[i(357)]={...w.style},delete w.style[i(t._0x2508c7)])}break}case"Polygon":{if(!h&&(h="polygon"),h.startsWith("polygon")){const v={type:h,positions:g(l.length===1?l[0]:l),style:u,attr:d};b(v,d),c.push(v)}else for(y=0,C=l.length;y<C;y++){const v=l[y],M={type:h,positions:g(v.length===1?v[0]:v),style:u,attr:d};b(M,d),c[i(2434)](M)}break}case"MultiPolygon":{!h&&(h="polygon");let v;const M=[];for(y=0,C=l.length;y<C;y++){const w=l[y],H={type:h,positions:g(w.length===1?w[0]:w),style:u,attr:d};b(H,d),c.push(H),M.push(H),(!v||v.positions.length<H.positions.length)&&(v=H)}if(v&&(v[i(t._0x424790)]=!0,u.label&&!u.label[i(3197)]))for(y=0,C=M.length;y<C;y++){const w=M[y];v!==w&&(w.style={...w.style},delete w.style[i(t._0x2508c7)])}break}case i(t._0x37e441):{for(let v=0,M=_[i(t._0x1281ec)].length;v<M;v++){const w=featureToGraphic({type:"Feature",geometry:_[i(2562)][v],properties:n.properties},e);w&&w[i(t._0x1a749e)]>0&&(c=c[i(3210)](w))}break}default:logError$1(i(2063),n)}return c}function mergeSymbolToGraphic(n,e){const t=_0x2397ca;if(e)if(isFunction(e))n.style=e(n[t(1578)],n.style,n);else{e[t(968)]&&(n.type=e[t(968)]);const x=getSymbolStyle(e,n.attr||{});x&&Object.keys(x).length!==0&&(e.merge?n.style={...x,...n[t(357)]}:n.style=x)}return n}function heightToZoom(n){const e={_0x1c8806:2207},t=_0x2397ca,x=40487.57,i=7096758e-11,s=91610.74,o=-40467.74;return Math[t(e._0x1c8806)](o+(x-o)/(1+Math.pow(n/s,i)))}function getUrlResource(n){const e={_0x5d19f3:740,_0xb12307:839,_0x445850:1482,_0x4f1bab:1248,_0x12a78e:696},t=_0x2397ca;if(!n.url)return n;let x;if(n[t(914)]instanceof Cesium__namespace[t(e._0x5d19f3)]){const i=n[t(914)];return n[t(e._0xb12307)]&&(i.headers=n.headers),n.proxy&&(i.proxy=new Cesium__namespace.DefaultProxy(n[t(e._0x445850)])),n.templateValues&&i.setTemplateValues(n.templateValues),n.queryParameters&&i[t(2429)](n.queryParameters),i}else n[t(e._0x4f1bab)]&&(n.url=template(n.url,n.templateValues)),x=new Cesium__namespace[t(740)]({url:n.url,queryParameters:n[t(e._0x12a78e)],templateValues:n.templateValues,headers:n.headers,proxy:n.proxy?new Cesium__namespace[t(235)](n.proxy):null});return x}function getTextImage(n,e={}){const t={_0x4b2763:589,_0x27ba2c:1724,_0x3cdc18:838},x=_0x2397ca;!e.background&&(e.backgroundColor=Cesium__namespace.Color.TRANSPARENT);const i=Cesium__namespace.writeTextToCanvas(n||"",e);if(i){if(e.outline){const s=i[x(1526)],o=i.height,r=i.getContext("2d",{willReadFrequently:!0});e.outlineColor?r.strokeStyle=e.outlineColor.toCssColorString():e.fillColor?r.strokeStyle=e.fillColor[x(t._0x4b2763)]():r.strokeStyle="#ffffff";const c=e[x(t._0x27ba2c)]||4;r[x(t._0x3cdc18)]=c,r.strokeRect(c/2,c/2,s-c,o-c)}return i}else return null}const circleImage={};function getCircleImage(n,e={}){const t={_0x10de7c:753,_0x8bd4a2:2414,_0x5f1ada:1223,_0x7740f:3193,_0x50c573:2182,_0x2efa3a:2378,_0x173312:1234},x=_0x2397ca,i=e.radius??26,s=i+(e.borderWidth??5);let o,r;if(e.color)o=e.color,r=e[x(t._0x10de7c)]||o;else{const _=e.opacity??.6,l=e.borderOpacity??_*.8;n<10?(o="rgba(110, 204, 57, "+_+")",r="rgba(181, 226, 140, "+l+")"):n<100?(o="rgba(240, 194, 12,  "+_+")",r="rgba(241, 211, 87, "+l+")"):(o=x(2659)+_+")",r="rgba(253, 156, 115, "+l+")")}const c=n+"_"+s+"_"+i+"_"+o;if(!circleImage[c]){const _=s*2,l=document[x(2676)]("canvas");l.width=_,l.height=_;const h=l.getContext("2d",{willReadFrequently:!0});h[x(t._0x8bd4a2)]=x(t._0x5f1ada),h.globalAlpha=0,h.fillRect(0,0,_,_),i!==s&&(h.globalAlpha=1,h[x(t._0x7740f)](),h[x(2474)](s,s,s,0,Math.PI*2,!0),h.closePath(),h.fillStyle=r,h.fill()),h[x(t._0x50c573)]=1,h.beginPath(),h[x(2474)](s,s,i,0,Math.PI*2,!0),h.closePath(),h.fillStyle=o,h.fill(),h[x(t._0x2efa3a)]=e.font||i*.9+"px bold normal",h.fillStyle=e[x(t._0x173312)]||"#ffffff",h.textAlign="center",h[x(3462)]=x(2930),h.fillText(n,s,s),circleImage[c]=l.toDataURL("image/png")}return circleImage[c]}function download(n,e){const t={_0x54caa0:691},x=_0x2397ca,i=document.createElement("a");i.download=n,i[x(t._0x54caa0)]=URL.createObjectURL(e),document.body.appendChild(i),i.click(),document[x(692)].removeChild(i)}function base64Img2Blob(n){const e=_0x2397ca,t=n.split(";base64,"),x=t[0].split(":")[1],i=window[e(3614)](t[1]),s=i.length,o=new Uint8Array(s);for(let r=0;r<s;++r)o[r]=i.charCodeAt(r);return new Blob([o],{type:x})}function downloadBase64Image(n,e){const t={_0xf6c719:2040,_0x2b0f53:3480},x=_0x2397ca,i=base64Img2Blob(e);!n[x(t._0xf6c719)](x(1385))&&!n[x(2040)](x(t._0x2b0f53))&&(n=n+".png"),download(n,i)}function downloadFile(n,e){const t=new Blob([e]);download(n,t)}function getExplorerInfo(){const n={_0x57c0b0:884,_0x2b9624:345},e=_0x2397ca;let t;const x=window.navigator.userAgent.toLowerCase();return x.indexOf("msie")>=0?(t=Number(x.match(/msie ([\d]+)/)[1]),{type:"IE",version:t}):x[e(884)]("firefox")>=0?(t=Number(x.match(/firefox\/([\d]+)/)[1]),{type:"Firefox",version:t}):x.indexOf("chrome")>=0?(t=Number(x.match(/chrome\/([\d]+)/)[1]),{type:"Chrome",version:t}):x[e(n._0x57c0b0)]("opera")>=0?(t=Number(x.match(/opera.([\d]+)/)[1]),{type:e(n._0x2b9624),version:t}):x.indexOf("Safari")>=0?(t=Number(x.match(/version\/([\d]+)/)[1]),{type:"Safari",version:t}):{type:x,version:-1}}function webglreport(){const n={_0x270c59:968,_0x5d245c:3877,_0x51efac:3819,_0x520a4e:757},e=_0x2397ca,t=getExplorerInfo();if(t[e(n._0x270c59)]==="IE"&&t[e(n._0x5d245c)]<11)return!1;try{let x;const i=document.createElement("canvas");if(typeof WebGL2RenderingContext!==e(n._0x51efac)&&(x=i[e(3469)]("webgl2")||i[e(3469)]("experimental-webgl2")||void 0),x==null&&(x=i.getContext(e(n._0x520a4e))||i.getContext("experimental-webgl")||void 0),x==null)return!1}catch{return!1}return!0}function webglerror(){const n={_0x12c190:681,_0x11f11e:925},e=_0x2397ca;var t,x;(t=window)!==null&&t!==void 0&&(x=t.layer)!==null&&x!==void 0&&x[e(n._0x12c190)]?window.layer.open({type:1,title:"当前浏览器不支持WebGL功能",closeBtn:0,shadeClose:!1,resize:!1,area:[e(n._0x11f11e),"170px"],content:'<div style="margin: 20px;color: #333;"><h3>系统检测到您使用的浏览器不支持WebGL功能！</h3>  <p>1、请您检查浏览器版本，安装使用最新版chrome、火狐或IE11以上浏览器！</p> <p>2、WebGL支持取决于GPU支持，请保证客户端电脑已安装显卡驱动程序！</p></div>'}):alert("系统检测到您使用的浏览器不支持WebGL功能")}function getRequest(){const n=_0x2397ca,e=location.search,t={};if(e.indexOf("?")!==-1){const x=e.substr(1),i=x.split("&");for(let s=0;s<i.length;s++)t[i[s][n(2956)]("=")[0]]=decodeURI(i[s].split("=")[1])}return t}function getRequestByName(n){const e={_0x1117a4:1280},t=_0x2397ca,x=new RegExp(t(3460)+n+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1)[t(e._0x1117a4)](x);return i!=null?decodeURI(i[2]):null}let _isPCBroswer;function isPCBroswer(){const n={_0x59078f:1134},e=_0x2397ca;if(!Cesium__namespace.defined(_isPCBroswer)){const t=navigator.userAgent.toLowerCase(),x=[e(n._0x59078f),"phone","iphone","ipad","ipod","symbianos"];_isPCBroswer=!0;for(let i=0;i<x[e(2027)];i++)if(t.indexOf(x[i])>0){_isPCBroswer=!1;break}}return _isPCBroswer}function alert(n,e){const t={_0x3f0ac2:1544,_0x3a870a:2625},x=_0x2397ca;window[x(1544)]?window[x(t._0x3f0ac2)](n,e):window.layer?window.layer.alert(n,{title:e||"提示",skin:"layui-layer-lan layer-mars-dialog",closeBtn:0,anim:0}):window.toastr?window.toastr.info(n,e):window[x(t._0x3a870a)](n)}function msg(n){const e={_0x98a88f:1548},t=_0x2397ca;window[t(e._0x98a88f)]?window.globalMsg(n):window.toastr?window[t(708)].info(n):window.layer?window[t(2407)].msg(n):window.alert(n)}function formatDate(n,e=_0x2397ca(3880)){const t={_0x2b97ef:2769,_0x3e0857:451,_0x291783:920,_0x123008:158},x=_0x2397ca,i={"M+":n.getMonth()+1,"d+":n[x(3111)](),"h+":n.getHours()%12===0?12:n[x(2769)]()%12,"H+":n[x(t._0x2b97ef)](),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math[x(3927)]((n.getMonth()+3)/3),S:n[x(t._0x3e0857)]()};/(y+)/[x(t._0x291783)](e)&&(e=e.replace(RegExp.$1,(n[x(2268)]()+"")[x(t._0x123008)](4-RegExp.$1[x(2027)])));for(const s in i)new RegExp("("+s+")")[x(920)](e)&&(e=e.replace(RegExp.$1,RegExp.$1.length===1?i[s]:("00"+i[s]).substr((""+i[s]).length)));return e}function formatTime(n){const e={_0x305616:3927},t=_0x2397ca;if(n=Number(n)||0,n<60)return n.toFixed(0)+"秒";if(n>=60&&n<3600){const x=Math.floor(n%60);return Math.floor(n/60)+"分钟"+(x!==0?x+"秒":"")}else return n=Math[t(e._0x305616)](n/60),Math.floor(n/60)+"小时"+Math.floor(n%60)+"分钟"}function fetchJson(n){const e={_0x2c49d4:2069,_0x1b61fe:740},t=_0x2397ca;return n=replaceOnlineUrlDomain(n),n.method==="post"?(n[t(e._0x2c49d4)]=n.queryParameters,delete n.queryParameters,Cesium__namespace[t(e._0x1b61fe)][t(2447)](n)):Cesium__namespace.Resource.fetchJson(n)}function sendAjax(n){const e={_0x2d999f:2069,_0xec8099:696,_0x225f0b:2443},t=_0x2397ca;return n=replaceOnlineUrlDomain(n),n[t(2768)]==="post"&&(n[t(e._0x2d999f)]=n[t(e._0xec8099)],delete n.queryParameters),xhrAdapter(n)[t(1286)](x=>x==null?void 0:x.data)[t(e._0x225f0b)](x=>{console[t(855)](x),logError$1("axios请求出错",x)})}function getLangText(n,e=0){const t=Lang[n];return t&&t[e]||""}function setLangText(n,e,t=0){let x=Lang[n];return!x&&(x=Lang[n]={}),x[t]=e,!0}function requestFullscreen(n){const e=_0x2397ca;return Cesium__namespace.Fullscreen.requestFullscreen(n),Cesium__namespace[e(1013)].fullscreen}function exitFullscreen(){const n=_0x2397ca;return Cesium__namespace.Fullscreen.exitFullscreen(),Cesium__namespace[n(1013)].fullscreen}function replaceOnlineUrlDomain(n){const e={_0xf2a010:3077,_0x559659:3219},t=_0x2397ca;var x,i,s;return!n.url||!isString(n.url)||(x=window)!==null&&x!==void 0&&(i=x.location)!==null&&i!==void 0&&(s=i[t(e._0xf2a010)])!==null&&s!==void 0&&s.indexOf&&window[t(2886)].hostname.indexOf("mars3d.cn")===-1||n.url.indexOf("data.mars3d.cn")===-1||n[t(914)][t(884)](t(e._0x559659))!==-1||(n.url=n.url.replace(t(938),"data1.mars3d.cn")),n}var Util={__proto__:null,isNumber,isString,isBoolean,isObject,isPlainObject,isFunction,isSimpleType,isMars3DCesium,formatNum:formatNum$1,padLeft0,splitWords,trim,getStrLength,template,get lastId(){return lastId},getGlobalId,stampGlobalId,createGuid,getTemplateHtml,getCesiumValue,getCesiumColor,getColorByStyle,getAttrVal,get3DTileFeatureAttr,merge,clone,getArrayRandomOne,removeArrayItem,getSymbolStyle,geojsonToArcGIS,arcgisToGeoJSON,getGeoJsonFeatures,geoJsonToGraphics,featureToGraphic,mergeSymbolToGraphic,heightToZoom,getUrlResource,getTextImage,getCircleImage,downloadBase64Image,downloadFile,getExplorerInfo,webglreport,webglerror,getRequest,getRequestByName,isPCBroswer,alert,msg,formatDate,formatTime,fetchJson,sendAjax,getLangText,setLangText,requestFullscreen,exitFullscreen,replaceOnlineUrlDomain,setImage};Object.defineProperties(Cesium__namespace.ColorMaterialProperty.prototype,{globalAlpha:{set:function(n){const e={_0x5ed00d:1261},t=_0x2397ca;this._globalAlpha=n;const x=getCesiumColor(this[t(1089)],Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this[t(e._0x5ed00d)])&&(this._color_alpha=x[t(2708)]),this.color=x.withAlpha(this[t(1261)]*n)},get:function(){return this._globalAlpha??1}}}),Object[_0x2397ca(3901)](Cesium__namespace.GridMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this[_0x2397ca(875)]??1}}});const getValue_old$5=Cesium__namespace.GridMaterialProperty[_0x2397ca(2121)][_0x2397ca(2893)];Cesium__namespace.GridMaterialProperty.prototype[_0x2397ca(2893)]=function(n,e){const t={_0x1728ea:1089},x=_0x2397ca;return e=getValue_old$5.bind(this)(n,e),this.globalAlpha!==1&&(e[x(t._0x1728ea)]&&(e.color[x(2708)]*=this.globalAlpha),e.cellAlpha&&(e.cellAlpha*=this.globalAlpha)),e},Object.defineProperties(Cesium__namespace[_0x2397ca(1368)].prototype,{globalAlpha:{set:function(n){const e={_0xa38bc2:639,_0x83b3c6:396},t=_0x2397ca;this._globalAlpha=n;const x=getCesiumColor(this.color,Cesium__namespace.Color.WHITE);!Cesium__namespace[t(e._0xa38bc2)](this._color_alpha)&&(this._color_alpha=x.alpha),this.color=x[t(e._0x83b3c6)](this._color_alpha*n)},get:function(){return this._globalAlpha??1}}}),Object.defineProperties(Cesium__namespace.PolylineArrowMaterialProperty.prototype,{globalAlpha:{set:function(n){const e=_0x2397ca;this[e(875)]=n},get:function(){return this._globalAlpha??1}}});const getValue_old$4=Cesium__namespace[_0x2397ca(2316)].prototype.getValue;Cesium__namespace.PolylineArrowMaterialProperty.prototype.getValue=function(n,e){const t={_0x145b43:2708},x=_0x2397ca;return e=getValue_old$4.bind(this)(n,e),e.color&&this.globalAlpha!==1&&(e.color[x(t._0x145b43)]*=this.globalAlpha),e},Object.defineProperties(Cesium__namespace.PolylineDashMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$3=Cesium__namespace[_0x2397ca(2349)].prototype[_0x2397ca(2893)];Cesium__namespace.PolylineDashMaterialProperty.prototype.getValue=function(n,e){const t={_0x12a8fc:1119},x=_0x2397ca;return e=getValue_old$3.bind(this)(n,e),this.globalAlpha!==1&&(e.color&&(e.color.alpha*=this.globalAlpha),e[x(t._0x12a8fc)]&&(e.gapColor[x(2708)]*=this[x(2182)])),e},Object.defineProperties(Cesium__namespace[_0x2397ca(930)][_0x2397ca(2121)],{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$2=Cesium__namespace[_0x2397ca(930)].prototype[_0x2397ca(2893)];Cesium__namespace.PolylineGlowMaterialProperty.prototype.getValue=function(n,e){const t={_0x4cbb61:1089},x=_0x2397ca;return e=getValue_old$2.bind(this)(n,e),e.color&&this.globalAlpha!==1&&(e[x(t._0x4cbb61)].alpha*=this.globalAlpha),e},Object.defineProperties(Cesium__namespace.PolylineOutlineMaterialProperty[_0x2397ca(2121)],{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$1=Cesium__namespace.PolylineOutlineMaterialProperty.prototype.getValue;Cesium__namespace.PolylineOutlineMaterialProperty.prototype[_0x2397ca(2893)]=function(n,e){const t={_0x40be7e:2182,_0x5c7313:2182},x=_0x2397ca;return e=getValue_old$1.bind(this)(n,e),this[x(t._0x40be7e)]!==1&&(e.color&&(e.color[x(2708)]*=this.globalAlpha),e.outlineColor&&(e.outlineColor.alpha*=this[x(t._0x5c7313)])),e},Object.defineProperties(Cesium__namespace.StripeMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old=Cesium__namespace[_0x2397ca(2504)].prototype.getValue;Cesium__namespace.StripeMaterialProperty.prototype[_0x2397ca(2893)]=function(n,e){const t={_0x25d558:2182},x=_0x2397ca;return e=getValue_old.bind(this)(n,e),this[x(2182)]!==1&&(e.evenColor&&(e.evenColor.alpha*=this[x(t._0x25d558)]),e.oddColor&&(e[x(869)].alpha*=this.globalAlpha)),e},proj4.defs("EPSG:4490",_0x2397ca(2539)),proj4.defs("EPSG:4491",_0x2397ca(3127)),proj4[_0x2397ca(1531)]("EPSG:4492","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4493","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4494",_0x2397ca(1490)),proj4.defs("EPSG:4495",_0x2397ca(2011)),proj4[_0x2397ca(1531)]("EPSG:4496",_0x2397ca(1794)),proj4.defs(_0x2397ca(1654),"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4498","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4499","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4500","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4501",_0x2397ca(751)),proj4.defs("EPSG:4513","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4514",_0x2397ca(452)),proj4[_0x2397ca(1531)](_0x2397ca(462),"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)](_0x2397ca(3590),_0x2397ca(415)),proj4.defs("EPSG:4517","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4518",_0x2397ca(564)),proj4.defs("EPSG:4519","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4520","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4521","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(1331),"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4523",_0x2397ca(437)),proj4[_0x2397ca(1531)](_0x2397ca(285),_0x2397ca(660)),proj4.defs("EPSG:4525","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4526","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(1452),"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4528","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4529",_0x2397ca(2203)),proj4[_0x2397ca(1531)](_0x2397ca(2894),"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4531","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(2690),_0x2397ca(3013)),proj4.defs(_0x2397ca(1219),"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4502","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(388),_0x2397ca(3985)),proj4.defs("EPSG:4504",_0x2397ca(1856)),proj4.defs(_0x2397ca(2534),"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4506","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(2983),"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)](_0x2397ca(478),_0x2397ca(609)),proj4.defs(_0x2397ca(1150),_0x2397ca(3716)),proj4.defs("EPSG:4510","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(1357),"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4512","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4534",_0x2397ca(1863)),proj4[_0x2397ca(1531)]("EPSG:4535","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4536","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4537","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4538","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4539","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4540","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)](_0x2397ca(1450),"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(2807),_0x2397ca(2008)),proj4.defs("EPSG:4543","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4544","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(1336),"+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4546",_0x2397ca(609)),proj4.defs("EPSG:4547","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x2397ca(1531)]("EPSG:4548","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4549","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4550","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4551",_0x2397ca(1445)),proj4.defs("EPSG:4552","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(3814),"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x2397ca(1072),"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs");class BaseClass{constructor(e){const t={_0x4d4e2e:3044,_0x4aebe6:3923},x=_0x2397ca;this[x(t._0x4d4e2e)]=e,this._enabledEvent=(e==null?void 0:e[x(t._0x4aebe6)])??!0}get[_0x2397ca(3923)](){return this._enabledEvent}set enabledEvent(e){const t=_0x2397ca;this[t(1551)]=e}destroy(e){if(!e)for(const t in this)delete this[t]}on(e,t,x){const i={_0x1321ce:4056,_0x413960:2027,_0x32f1f4:3652},s=_0x2397ca;if(!e)return logError$1("绑定事件时传入了空值",t),this;if(Array[s(i._0x1321ce)](e))for(let o=0,r=e[s(i._0x413960)];o<r;o++)this._on(e[o],t,x);else if(isObject(e))for(const o in e)this[s(i._0x32f1f4)](o,e[o],t);else{e=splitWords(e);for(let o=0,r=e.length;o<r;o++)this[s(i._0x32f1f4)](e[o],t,x)}return this._onEventHook&&this._onEventHook(e),this}off(e,t,x){if(!e)delete this._events;else if(Array.isArray(e))for(let i=0,s=e.length;i<s;i++)this._off(e[i],t,x);else if(isObject(e))for(const i in e)this._off(i,e[i],t);else{e=splitWords(e);for(let i=0,s=e.length;i<s;i++)this._off(e[i],t,x)}return this}[_0x2397ca(3652)](e,t,x){const i={_0xd882d2:1244},s=_0x2397ca;this._events=this._events||{};let o=this._events[e];!o&&(o=[],this._events[e]=o),x===this&&(x=void 0);const r={fn:t,ctx:x},c=o;for(let _=0,l=c.length;_<l;_++)if(c[_].fn===t&&c[_][s(i._0xd882d2)]===x)return;c.push(r)}[_0x2397ca(3343)](e,t,x){const i={_0x2b25a0:3017},s=_0x2397ca;let o,r,c;if(this._events&&(o=this[s(i._0x2b25a0)][e],!!o)){if(!t){for(r=0,c=o.length;r<c;r++)o[r].fn=falseFn;delete this[s(i._0x2b25a0)][e];return}if(x===this&&(x=void 0),o)for(r=0,c=o.length;r<c;r++){const _=o[r];if(_.ctx===x&&_.fn===t){_.fn=falseFn,this._firingCount&&(this._events[e]=o=o.slice()),o.splice(r,1);return}}}}fire(e,t,x){const i={_0x4fdde2:641,_0x4268db:1255,_0x20f655:3017,_0xf23914:1918},s=_0x2397ca;if(!this.listens(e,x)||!this.enabledEvent)return this;const o={sourceTarget:this,...t,type:e,target:this,stopPropagation:function(){this._stopPropagation=!0}};if(t!=null&&t.cloneProperty&&[s(i._0x4fdde2)][s(i._0x4268db)](function(c){const _=s,l=Object[_(336)](t,c);l&&Object[_(748)](o,c,l)}),this[s(i._0x20f655)]){const r=this._events[e];if(r){this._firingCount=this[s(3379)]+1||1;for(let c=0,_=r.length;c<_;c++){const l=r[c];l.fn.call(l.ctx||this,o)}this._firingCount--}}return x&&!o[s(i._0xf23914)]&&this[s(1048)](o),this}listens(e,t){const x=this._events&&this._events[e];if(x&&x.length)return!0;if(t){for(const i in this._eventParents)if(this._eventParents[i].listens(e,t))return!0}return!1}once(e,t,x){const i=_0x2397ca;if(isObject(e)){for(const o in e)this[i(1898)](o,e[o],t);return this}const s=bind(()=>{this.off(e,t,x).off(e,s,x)},this);return this.on(e,t,x).on(e,s,x)}addEventParent(e){const t={_0x47d3cd:3204},x=_0x2397ca;return this._eventParents=this._eventParents||{},this[x(t._0x47d3cd)][stampGlobalId(e)]=e,this}[_0x2397ca(2107)](e){return this[_0x2397ca({_0x6ad4b1:3204}._0x6ad4b1)]&&delete this._eventParents[stampGlobalId(e)],this}hasEventParent(e){const t=_0x2397ca;return!!(this[t(3204)]&&this[t(3204)][stampGlobalId(e)])}_propagateEvent(e){const t={_0x1f8a9d:3159,_0x1ce7d7:3887},x=_0x2397ca;for(const i in this[x(3204)]){const s=this._eventParents[i];if(this[x(t._0x1f8a9d)](s,e)){const o={layer:e[x(t._0x1ce7d7)],propagatedFrom:e[x(3887)],...e};s.fire(e.type,o,!0)}}}_filterPropagateEvent(e,t){return!0}}function falseFn(){return!1}function bind(n,e){const t={_0x17fcd4:1373},x={_0x353b36:777},i=_0x2397ca,s=Array.prototype.slice;if(n[i(t._0x17fcd4)])return n.bind.apply(n,s.call(arguments,1));const o=s.call(arguments,2);return function(){const r=i;return n.apply(e,o.length?o.concat(s[r(x._0x353b36)](arguments)):arguments)}}const State={INITIALIZED:_0x2397ca(3680),ADD:_0x2397ca(565),ADDED:"added",REMOVED:"removed",DESTROY:_0x2397ca(2941)},EventType={add:_0x2397ca(565),remove:"remove",addItem:_0x2397ca(1975),removeItem:"removeItem",addGraphic:"addGraphic",removeGraphic:_0x2397ca(3327),addLayer:_0x2397ca(3615),removeLayer:"removeLayer",changeBasemap:"changeBasemap",addControl:_0x2397ca(3521),removeControl:_0x2397ca(2496),updateControl:"updateControl",addEffect:"addEffect",removeEffect:_0x2397ca(4024),update:_0x2397ca(1653),updatePosition:_0x2397ca(222),updateStyle:_0x2397ca(2072),updateAttr:_0x2397ca(234),show:"show",hide:"hide",start:"start",change:_0x2397ca(3796),endItem:"endItem",end:"end",stop:_0x2397ca(2045),zoom:_0x2397ca(1488),loadBefore:_0x2397ca(386),load:_0x2397ca(759),error:"error",loadConfig:_0x2397ca(255),popupOpen:_0x2397ca(1493),popupClose:"popupClose",tooltipOpen:_0x2397ca(2233),tooltipClose:"tooltipClose",contextMenuOpen:"contextMenuOpen",contextMenuClose:"contextMenuClose",contextMenuClick:_0x2397ca(171),highlightOpen:"highlightOpen",highlightClose:"highlightClose",click:"click",clickGraphic:_0x2397ca(1186),clickTileGraphic:"clickTileGraphic",clickMap:"clickMap",dblClick:"dblClick",leftDown:"leftDown",leftUp:"leftUp",mouseMove:"mouseMove",mouseMoveTarget:"mouseMoveTarget",wheel:"wheel",rightClick:"rightClick",rightDown:_0x2397ca(3699),rightUp:"rightUp",middleClick:"middleClick",middleDown:_0x2397ca(2067),middleUp:"middleUp",pinchStart:"pinchStart",pinchEnd:"pinchEnd",pinchMove:"pinchMove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseOver:_0x2397ca(811),mouseOut:"mouseOut",keydown:"keydown",keyup:"keyup",drawStart:"drawStart",drawMouseMove:"drawMouseMove",drawAddPoint:"drawAddPoint",drawRemovePoint:"drawRemovePoint",drawCreated:"drawCreated",editStart:_0x2397ca(874),editMouseDown:_0x2397ca(276),editMouseMove:"editMouseMove",editMovePoint:"editMovePoint",editAddPoint:"editAddPoint",editRemovePoint:"editRemovePoint",editStyle:"editStyle",editStop:"editStop",move:_0x2397ca(492),initialTilesLoaded:"initialTilesLoaded",allTilesLoaded:"allTilesLoaded",addTile:"addTile",addTileSuccess:_0x2397ca(315),addTileError:_0x2397ca(2836),removeTile:_0x2397ca(3321),cameraMoveStart:_0x2397ca(1861),cameraMoveEnd:"cameraMoveEnd",cameraChanged:"cameraChanged",preUpdate:"preUpdate",postUpdate:_0x2397ca(283),preRender:"preRender",postRender:"postRender",renderError:_0x2397ca(1843),morphStart:_0x2397ca(318),morphComplete:"morphComplete",clockTick:"clockTick",clockStop:"clockStop",terrainChange:"terrainChange",terrainLoadError:"terrainLoadError",terrainLoadSuccess:"terrainLoadSuccess",tileLoadProgress:"tileLoadProgress"};class BaseThing extends BaseClass{constructor(e={}){const t={_0x218134:3826},x=_0x2397ca;isBoolean(e)&&(e={enabled:e}),super(e),this[x(t._0x218134)]=e.id??createGuid(),this._enabled=e.enabled??!0,this._state=State.INITIALIZED,this.options=e}get[_0x2397ca(3451)](){return this._state}get[_0x2397ca(3401)](){return this._state===State.ADDED}get id(){return this._id}set id(e){this.options.id=e}get uuid(){return this._id}get[_0x2397ca(407)](){return this[_0x2397ca({_0x1ad684:1322}._0x1ad684)]}set[_0x2397ca(407)](e){const t=_0x2397ca;this._enabled!==e&&(this._enabled=e,this[t(1757)]&&this._enabledHook(e))}addTo(e){return e&&e.addThing&&e.addThing(this),this}remove(e){const t={_0x51ef49:558},x=_0x2397ca;this._map&&this[x(t._0x51ef49)].removeThing(this,e)}_onAdd(e){const t={_0x56b13d:1103},x=_0x2397ca;var i;this.isAdded||this[x(1103)]===State.ADD||(this[x(t._0x56b13d)]=State.ADD,this[x(558)]=e,this.options.eventParent?this.addEventParent(this.options.eventParent):((i=this.options)===null||i===void 0?void 0:i.eventParent)===!1||this[x(1812)](e),this._mountedHook&&!this._createOK&&(this._mountedHook(),this._createOK=!0),this._addedBaseHook&&this._addedBaseHook(),this[x(2670)]&&this[x(2670)](),this[x(1103)]=State.ADDED,this.fire(EventType.add))}_onRemove(){const e={_0x366f0d:1273,_0xc1448f:2330,_0x5141bc:1847,_0x55884b:558},t=_0x2397ca;var x,i;this._state===State[t(e._0x366f0d)]&&this._map&&(this._removedBaseHook&&this[t(e._0xc1448f)](),this._removedHook&&this._removedHook(),this._state=State.REMOVED,this.fire(EventType.remove),(x=this.options)!==null&&x!==void 0&&x.eventParent?this.removeEventParent(this.options[t(e._0x5141bc)]):((i=this.options)===null||i===void 0?void 0:i[t(e._0x5141bc)])===!1||this.removeEventParent(this._map),this[t(e._0x55884b)]=null)}[_0x2397ca(2645)](){}[_0x2397ca(2670)](){}_removedHook(){}setOptions(e){const t={_0xb93306:3044},x=_0x2397ca;return!e||Object.keys(e).length===0?this:(this.options=merge(this[x(t._0xb93306)],e),Cesium__namespace.defined(e.enabled)&&(this[x(407)]=e.enabled),this._setOptionsHook&&this._setOptionsHook(this.options,e),this)}destroy(e){const t={_0x4f26ea:1103,_0x2c2736:2689},x=_0x2397ca;this[x(t._0x4f26ea)]!==State.REMOVED&&(this.clear&&this[x(2265)](),this[x(t._0x2c2736)]()),super.destroy(e)}}class GroupThing extends BaseThing{constructor(e={}){super(e),this._arrThing=[]}get arrThing(){return this[_0x2397ca({_0x2c6064:243}._0x2c6064)]}get[_0x2397ca(3646)](){return this.length===0}get hasChildThing(){return this[_0x2397ca(2027)]>0}get[_0x2397ca(2027)](){var e;return((e=this.options.things)===null||e===void 0?void 0:e.length)>0?this.options.things.length:this._arrThing.length}_enabledHook(e){this.eachThing(t=>{t.enabled=e},this)}_addedHook(){this.addChildsToMap()}_removedHook(){this[_0x2397ca(3235)]()}addChildsToMap(){const e={_0x777619:2375};this.eachThing(t=>{const x=_0x3361;this._map[x(e._0x777619)](t)},this)}[_0x2397ca(3235)](){this.eachThing(e=>{this._map.removeThing(e)},this)}addThing(e){const t={_0x42e882:3085},x=_0x2397ca;return e.parent&&(e.removeEventParent(e[x(t._0x42e882)]),e[x(3085)]=null),e.parent=this,e.options.eventParent=this,this._arrThing.push(e),this[x(3401)]&&!e.isAdded?this._map.addThing(e):(e.removeEventParent(this._map),e.addEventParent(this)),this}[_0x2397ca(414)](e){const t={_0x5d7aa9:3085,_0x47c9a4:414},x=_0x2397ca;return e[x(t._0x5d7aa9)]=null,e[x(2107)](this),removeArrayItem(this._arrThing,e),this._map&&e.isAdded&&this._map[x(t._0x47c9a4)](e),this}eachThing(e,t){if(this[_0x2397ca({_0x2ba7d6:243}._0x2ba7d6)])return this._arrThing.forEach(s=>{e.call(t,s)}),this}getThings(){return this[_0x2397ca(243)]}[_0x2397ca(1612)](){const e={_0x48c7c4:243},t={_0x40fa65:3788},x=_0x2397ca,i=this[x(e._0x48c7c4)]||[];return this._map.eachThing(s=>{s[x(t._0x40fa65)]===this.id&&this._arrThing.indexOf(s)===-1&&i.push(s)},this),i}getThingById(e){const t={_0xc7c981:2027},x=_0x2397ca,i=this._arrThing;if(!(!this._arrThing||this._arrThing[x(t._0xc7c981)]===0))for(let s=0,o=i.length;s<o;s++){const r=i[s];if(r.id===e)return r}}destroy(e){const t=_0x2397ca;this.eachThing(x=>{const i=_0x3361;x!=null&&x[i(2941)]&&x.destroy(e)},this),super[t(2941)](e)}}var GroundSkyBoxFS=`uniform samplerCube u_cubeMap;
in vec3 v_texCoord;

void main() {
  vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
  out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
}
`,GroundSkyBoxVS=`in vec3 position;
uniform mat3 u_rotateMatrix;
out vec3 v_texCoord;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));//【火星科技marsgis.cn】 Hao 2019-9-18   天空盒
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`;class GroundSkyBox extends Cesium__namespace[_0x2397ca(1332)]{constructor(e){const t={_0x3e3bd3:4033},x=_0x2397ca;super(e),this[x(t._0x3e3bd3)]=new Cesium__namespace.Matrix3}update(e,t){const x={_0x1a1aff:1721,_0x4558a8:2608,_0x5e5574:2168,_0x3fd9cf:3565,_0x1a0812:1359,_0x3e429d:233,_0x11fe3c:2298,_0x2f8495:639,_0x183e59:2721},i=_0x2397ca,s=this;if(!this.show||e[i(2033)]!==Cesium__namespace.SceneMode.SCENE3D&&e.mode!==Cesium__namespace[i(x._0x1a1aff)].MORPHING||!e.passes.render)return;const o=e[i(2928)];if(this._sources!==this[i(x._0x4558a8)]){this._sources=this.sources;const c=this.sources;if(!Cesium__namespace.defined(c.positiveX)||!Cesium__namespace[i(639)](c[i(1128)])||!Cesium__namespace.defined(c.positiveY)||!Cesium__namespace[i(639)](c[i(2636)])||!Cesium__namespace.defined(c[i(x._0x5e5574)])||!Cesium__namespace.defined(c.negativeZ))throw new Cesium__namespace[i(x._0x3fd9cf)](i(2779));if(typeof c.positiveX!=typeof c[i(1128)]||typeof c.positiveX!=typeof c[i(1438)]||typeof c.positiveX!=typeof c.negativeY||typeof c.positiveX!=typeof c.positiveZ||typeof c.positiveX!=typeof c.negativeZ)throw new Cesium__namespace[i(3565)]("this.sources properties must all be the same type.");typeof c.positiveX===i(3994)?Cesium__namespace[i(x._0x1a0812)](o,this._sources).then(function(_){s._cubeMap=s._cubeMap&&s._cubeMap.destroy(),s._cubeMap=_}):(this[i(2179)]=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new Cesium__namespace.CubeMap({context:o,source:c}))}const r=this._command;if(!Cesium__namespace[i(639)](r[i(1974)])){r[i(x._0x3e429d)]={u_cubeMap:()=>s[i(2179)],u_rotateMatrix:()=>{const l=i;return r.modelMatrix=Cesium__namespace.Transforms[l(871)](e.camera._positionWC),Cesium__namespace.Matrix4.getMatrix3(r.modelMatrix,this._skyboxMatrix3)}};const c=Cesium__namespace.BoxGeometry[i(2054)](Cesium__namespace[i(3806)].fromDimensions({dimensions:new Cesium__namespace[i(295)](2,2,2),vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY})),_=this._attributeLocations=Cesium__namespace.GeometryPipeline.createAttributeLocations(c);r.vertexArray=Cesium__namespace.VertexArray[i(676)]({context:o,geometry:c,attributeLocations:_,bufferUsage:Cesium__namespace.BufferUsage.STATIC_DRAW}),r[i(1723)]=Cesium__namespace.RenderState.fromCache({blending:Cesium__namespace.BlendingState[i(x._0x11fe3c)]})}if(!Cesium__namespace[i(x._0x2f8495)](r.shaderProgram)||this._useHdr!==t){const c=new Cesium__namespace.ShaderSource({defines:[t?i(3064):""],sources:[GroundSkyBoxFS]});r.shaderProgram=Cesium__namespace.ShaderProgram.fromCache({context:o,vertexShaderSource:GroundSkyBoxVS,fragmentShaderSource:c,attributeLocations:this[i(2762)]}),this[i(x._0x183e59)]=t}if(Cesium__namespace.defined(this._cubeMap))return r}}var MultipleSkyBoxFS=_0x2397ca(2314),MultipleSkyBoxVS=_0x2397ca(3665);class MultipleSkyBox extends Cesium__namespace.SkyBox{constructor(e){const t={_0x4eca27:2039,_0xd87c8a:264},x=_0x2397ca;super(e),this.sources2=e.sources2,this.sources3=e.sources3,this[x(t._0x4eca27)]=void 0,this[x(3218)]=void 0,this[x(t._0xd87c8a)]=void 0,this._cubeMap3=void 0,this._skyboxMatrix3=new Cesium__namespace.Matrix3,this.select=e.select||0}[_0x2397ca(1653)](e,t){const x={_0x56784a:1721,_0x273290:674,_0x2108f9:2608,_0x4628c0:308,_0x48c5ca:639,_0x24b906:603,_0x1592c4:3254,_0x52cfd1:264,_0x4b9103:2941,_0x363d3d:1979,_0x173c4d:731,_0x25b3f8:1565,_0x512996:2028,_0x5e5842:2478,_0x598cd8:1723},i={_0x3383b1:2476},s={_0x262391:2941},o=_0x2397ca,r=this;if(!this.show||e.mode!==Cesium__namespace[o(1721)][o(1144)]&&e.mode!==Cesium__namespace[o(x._0x56784a)].MORPHING||!e.passes[o(x._0x273290)])return;const c=e.context;if(this._sources!==this.sources){this._sources=this[o(x._0x2108f9)];const l=this.sources;this._sources2=this[o(x._0x4628c0)];const h=this.sources2;this._sources3=this.sources3;const d=this.sources3;if(!Cesium__namespace.defined(l.positiveX)||!Cesium__namespace.defined(l[o(1128)])||!Cesium__namespace[o(639)](l[o(1438)])||!Cesium__namespace.defined(l.negativeY)||!Cesium__namespace[o(x._0x48c5ca)](l.positiveZ)||!Cesium__namespace.defined(l.negativeZ))throw new Cesium__namespace.DeveloperError("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof l.positiveX!=typeof l.negativeX||typeof l[o(x._0x24b906)]!=typeof l.positiveY||typeof l.positiveX!=typeof l.negativeY||typeof l.positiveX!=typeof l[o(2168)]||typeof l.positiveX!=typeof l.negativeZ)throw new Cesium__namespace.DeveloperError("this.sources properties must all be the same type.");typeof l[o(603)]===o(3994)?(Cesium__namespace[o(1359)](c,this._sources).then(function(u){const m=o;r._cubeMap=r[m(2179)]&&r._cubeMap.destroy(),r._cubeMap=u}),Cesium__namespace.loadCubeMap(c,this[o(2039)]).then(function(u){r._cubeMap2=r._cubeMap2&&r._cubeMap2.destroy(),r._cubeMap2=u}),Cesium__namespace.loadCubeMap(c,this._sources3).then(function(u){const m=o;r[m(2476)]=r._cubeMap3&&r._cubeMap3[m(s._0x262391)](),r._cubeMap3=u})):(this._cubeMap=this._cubeMap&&this[o(2179)].destroy(),this._cubeMap=new Cesium__namespace[o(x._0x1592c4)]({context:c,source:l}),this[o(x._0x52cfd1)]=this._cubeMap2&&this._cubeMap2[o(x._0x4b9103)](),this[o(264)]=new Cesium__namespace.CubeMap({context:c,source:h}),this._cubeMap3=this._cubeMap3&&this._cubeMap3.destroy(),this._cubeMap3=new Cesium__namespace.CubeMap({context:c,source:d}))}const _=this._command;if(_.modelMatrix=Cesium__namespace.Transforms[o(871)](e[o(3400)][o(x._0x363d3d)]),!Cesium__namespace[o(639)](_.vertexArray)){_.uniformMap={u_cubeMap:function(){return r._cubeMap},u_cubeMap2:function(){return r[o(264)]},u_cubeMap3:function(){return r[o(i._0x3383b1)]},u_select:()=>this.select,u_rotateMatrix:()=>(_.modelMatrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(e.camera._positionWC),Cesium__namespace.Matrix4.getMatrix3(_.modelMatrix,this._skyboxMatrix3))};const l=Cesium__namespace.BoxGeometry.createGeometry(Cesium__namespace.BoxGeometry[o(x._0x173c4d)]({dimensions:new Cesium__namespace[o(295)](2,2,2),vertexFormat:Cesium__namespace[o(x._0x25b3f8)].POSITION_ONLY})),h=this._attributeLocations=Cesium__namespace[o(x._0x512996)][o(x._0x5e5842)](l);_.vertexArray=Cesium__namespace[o(1884)].fromGeometry({context:c,geometry:l,attributeLocations:h,bufferUsage:Cesium__namespace.BufferUsage._DRAW}),_[o(x._0x598cd8)]=Cesium__namespace.RenderState[o(1981)]({blending:Cesium__namespace.BlendingState.ALPHA_BLEND})}if(!Cesium__namespace.defined(_.shaderProgram)||this._useHdr!==t){const l=new Cesium__namespace[o(973)]({defines:[t?"HDR":""],sources:[MultipleSkyBoxFS]});_.shaderProgram=Cesium__namespace.ShaderProgram.fromCache({context:c,vertexShaderSource:MultipleSkyBoxVS,fragmentShaderSource:l,attributeLocations:this._attributeLocations}),this._useHdr=t}if(Cesium__namespace.defined(this._cubeMap)&&Cesium__namespace.defined(this._cubeMap2)&&Cesium__namespace.defined(this[o(2476)]))return _}[_0x2397ca(2511)](){return!1}destroy(){const e={_0x61ccf1:1974,_0x2851a9:1041,_0x522a48:2179,_0xbcfc58:2941,_0x1cf3b4:264,_0x2d508f:264},t=_0x2397ca,x=this._command;return x[t(e._0x61ccf1)]=x[t(e._0x61ccf1)]&&x.vertexArray.destroy(),x.shaderProgram=x.shaderProgram&&x[t(e._0x2851a9)][t(2941)](),this[t(e._0x522a48)]=this._cubeMap&&this._cubeMap[t(e._0xbcfc58)](),this._cubeMap2=this[t(e._0x1cf3b4)]&&this[t(e._0x2d508f)].destroy(),this[t(2476)]=this._cubeMap3&&this._cubeMap3.destroy(),this[t(1742)](this)}}class LocalWorldTransform{constructor(e,t){const x={_0x574749:504},i=_0x2397ca;t=t||Cesium__namespace.Transforms[i(871)],this._matrix=t(e),this._inverseMatrix=Cesium__namespace.Matrix4.inverseTransformation(this[i(x._0x574749)],new Cesium__namespace.Matrix4)}[_0x2397ca(1305)](e,t){const x={_0x38c8bf:295,_0x4dd470:1046},i=_0x2397ca;return!t&&(t=new Cesium__namespace[i(x._0x38c8bf)]),Cesium__namespace[i(x._0x4dd470)].multiplyByPoint(this._matrix,e,t),t}worldToLocal(e,t){const x=_0x2397ca;return!t&&(t=new Cesium__namespace.Cartesian3),Cesium__namespace[x(1046)].multiplyByPoint(this._inverseMatrix,e,t),t}}class MarsArray{constructor(){this._array=[],this._hash={}}get length(){return this._array.length}get values(){return this._array}[_0x2397ca(741)](e){return e?Cesium__namespace.defined(this._hash[e]):!1}[_0x2397ca(1912)](e,t){const x=this._hash[e];t!==x&&(this.remove(e),this._hash[e]=t,this._array.push(t))}getLast(){const e=_0x2397ca;return this[e(3192)].length>0?this[e(3192)][this._array.length-1]:void 0}[_0x2397ca(2001)](e){return e?this._hash[e]:void 0}[_0x2397ca(625)](e,t="id",x="options"){if(t==="id"&&this._hash[e])return this._hash[e];for(let i=0,s=this._array.length;i<s;i++){const o=this._array[i];if(o[t]==e||o[x]&&o[x][t]==e)return o}}getListByAttr(e,t="id",x="options"){const i=[];for(let s=0,o=this._array.length;s<o;s++){const r=this._array[s];(r[t]==e||r[x]&&r[x][t]==e)&&i.push(r)}return i}remove(e){const t=_0x2397ca;if(!this._hash)return;const x=this._hash[e],i=Cesium__namespace.defined(x);if(i){const s=this._array;s.splice(s[t(884)](x),1),delete this[t(3216)][e]}return i}[_0x2397ca(1255)](e,t,x){const i={_0x51581e:777},s=_0x2397ca;if(x)for(let o=this._array.length-1;o>=0;o--){const r=this._array[o];e.call(t||this,r,o)}else for(let o=0,r=this._array.length;o<r;o++){const c=this._array[o];e[s(i._0x51581e)](t||this,c,o)}}removeAll(){const e={_0x50e284:2027},t=_0x2397ca,x=this._array;x.length>0&&(this._hash={},x[t(e._0x50e284)]=0)}destroy(){const e={_0x3984b5:2027,_0xe11b4a:1859},t=_0x2397ca;if(this._array[t(e._0x3984b5)]>0&&this._array[0].destroy){this.remove=function(){};for(let x=this._array[t(e._0x3984b5)]-1;x>=0;x--){const i=this._array[x];if(i!=null&&i[t(2941)])try{i.destroy()}catch(s){logWarn("MarsArray item.destroy 异常",s)}}}this[t(e._0xe11b4a)]();for(const x in this)delete this[x]}}class Texture3{constructor(e={}){const t={_0x10db24:1617,_0x4e0530:639,_0x4a2746:2773,_0x3df5fd:2773,_0x5bdd21:766,_0xd78973:634,_0x4b06eb:1350,_0x3a444c:575,_0x31390f:2706,_0x474e04:1232,_0x42b9e6:1367,_0x4967ac:2187,_0x3b6cf7:3731},x=_0x2397ca,i=e[x(2928)],s=i[x(1465)],o=e.source;let r=e.width,c=e.height,_=e[x(t._0x10db24)];if(Cesium__namespace.defined(o)&&(!Cesium__namespace[x(t._0x4e0530)](r)&&(r=Cesium__namespace.defaultValue(o.videoWidth,o.width)),!Cesium__namespace[x(639)](c)&&(c=Cesium__namespace[x(t._0x4a2746)](o.videoHeight,o.height)),!Cesium__namespace.defined(_)&&(_=Cesium__namespace[x(t._0x3df5fd)](o.videoDepth,o.depth))),!Cesium__namespace.defined(r)||!Cesium__namespace[x(t._0x4e0530)](c)||!Cesium__namespace.defined(_))throw new Cesium__namespace.DeveloperError("options requires a source field to create an initialized texture or width or height and depth fields to create a blank texture.");const l=Cesium__namespace.defaultValue(e[x(678)],Cesium__namespace.PixelFormat[x(t._0x5bdd21)]),h=Cesium__namespace.defaultValue(e.pixelDatatype,Cesium__namespace[x(1350)].FLOAT),d=Cesium__namespace.PixelFormat.toInternalFormat(l,h,i),u=!1,m=!1;let f=4;Cesium__namespace[x(639)](o)&&Cesium__namespace.defined(o.arrayBufferView)&&(f=Cesium__namespace.PixelFormat.alignmentInBytes(l,h,r));const g=s[x(t._0xd78973)],b=s[x(1831)]();if(s[x(1700)](s[x(1838)]),s.bindTexture(g,b),s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s[x(3298)]),s[x(2161)](s.UNPACK_FLIP_Y_WEBGL,m),Cesium__namespace.defined(o)&&Cesium__namespace[x(639)](o.arrayBufferView)){const C=o.arrayBufferView;s.texImage3D(g,0,d,r,c,_,0,l,Cesium__namespace[x(t._0x4b06eb)][x(t._0x3a444c)](h,i),C)}s[x(t._0x31390f)](g,null);const y=texture3DSizeInBytes(l,h,r,c,_);this._id=Cesium__namespace.createGuid(),this._context=i,this._textureFilterAnisotropic=i._textureFilterAnisotropic,this[x(t._0x474e04)]=b,this[x(t._0x42b9e6)]=g,this._internalFormat=d,this[x(t._0x4967ac)]=l,this._pixelDatatype=h,this._width=r,this._height=c,this[x(t._0x3b6cf7)]=_,this._hasMipmap=!1,this._sizeInBytes=y,this._preMultiplyAlpha=u,this[x(2516)]=m,this[x(3783)]=!0,this._dimensions=new Cesium__namespace.Cartesian3(r,c,_),this[x(3780)]=void 0,this.sampler=Cesium__namespace.defaultValue(e.sampler,new Cesium__namespace.Sampler)}get id(){return this._id}get sampler(){return this[_0x2397ca({_0x4c96ea:3780}._0x4c96ea)]}set sampler(e){const t={_0x39673d:985},x=_0x2397ca,i=e.minificationFilter,s=e.magnificationFilter,o=this._context,r=o._gl,c=this._textureTarget;r.activeTexture(r.TEXTURE0),r.bindTexture(c,this._texture),r.texParameteri(c,r.TEXTURE_MIN_FILTER,i),r[x(985)](c,r.TEXTURE_MAG_FILTER,s),r.texParameteri(c,r.TEXTURE_WRAP_S,e.wrapS),r[x(t._0x39673d)](c,r.TEXTURE_WRAP_T,e.wrapT),r[x(t._0x39673d)](c,r[x(2719)],r.CLAMP_TO_EDGE),r.bindTexture(c,null),this._sampler=e}get[_0x2397ca(678)](){return this._pixelFormat}get pixelDatatype(){return this._pixelDatatype}get dimensions(){return this._dimensions}get[_0x2397ca(3872)](){return this._height}get depth(){return this._depth}get[_0x2397ca(1152)](){return this._preMultiplyAlpha}get flipY(){return this[_0x2397ca(2516)]}get sizeInBytes(){return this[_0x2397ca(2839)]}get _target(){return this._textureTarget}isDestroyed(){return!1}destroy(){return this[_0x2397ca({_0x501993:1271}._0x501993)]._gl.deleteTexture(this._texture),Cesium__namespace.destroyObject(this)}}function texture3DSizeInBytes(n,e,t,x,i){const s=_0x2397ca,o=Cesium__namespace.PixelFormat[s(2356)](n),r=Cesium__namespace.PixelDatatype.sizeInBytes(e);return t*x*i*o*r}const ChinaCRS={WGS84:_0x2397ca(2849),GCJ02:"GCJ02",BAIDU:_0x2397ca(3506)};let ion="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlZDJjMTcwNS04ZDVmLTQzNWQtYWUyZC0yMTJkMDkyMzkyMjMiLCJpZCI6MTQ4MiwiaWF0IjoxNjQ4NDQ2OTIwfQ.7e1QUkx_k-mZBxKz9tV8a5TFEorrlLlkfcVNNPzfTQY";function updateIon(n){const e=_0x2397ca;ion=n,Cesium__namespace[e(3344)].defaultAccessToken=n}let mapbox=_0x2397ca(1279);function updateMapbox(n){mapbox=n}let bing=_0x2397ca(2856);function updateBing(n){bing=n}const tiandituArr=["789e558be762ff832392a0393fd8a4f1","bcc62222fc634ec736589c483de933e6","d083e4cf30bfc438ef93436c10c2c20a","5e5949f7e96e8a136ef36a6594f18cdf"];let tianditu=getArrayRandomOne(tiandituArr);function updateTianditu(n){const e={_0x22d809:2027,_0x2711e5:4056},t=_0x2397ca;tiandituArr.splice(0,tiandituArr[t(e._0x22d809)]),Array[t(e._0x2711e5)](n)?n.forEach(x=>{tiandituArr[t(2434)](x)}):tiandituArr.push(n),tianditu=getArrayRandomOne(tiandituArr)}const gaodeArr=["65892a265537810eba29eeae73649a71","0ee24126ea61ec60a670675fd8cd29b1",_0x2397ca(3996),"044b5684de2b2009a15084eb8b88f822","6e5d9f46b78cfb5b5ab3d407dad8fd14","ad5f8b9d03f38f8f312025c80cfff4e3","ee24b622294b5bc659fb92fe81084776"];let gaode=getArrayRandomOne(gaodeArr);function updateGaode(n){const e={_0x3f5e7d:2713,_0x135690:1255},t={_0x1b4a83:2434},x=_0x2397ca;gaodeArr[x(e._0x3f5e7d)](0,gaodeArr.length),Array.isArray(n)?n[x(e._0x135690)](i=>{gaodeArr[x(t._0x1b4a83)](i)}):gaodeArr.push(n),gaode=getArrayRandomOne(gaodeArr)}const baiduArr=["LvhIlDXT60I3NePicXWQT5K0eHFCR4hD","nLUUSRsSBRSVmtxfaGKPaN3mXf6jiivf","qWM3MBm5oWLI06sa3A3otnpaxGQr8jIw","R7KAL3f6AttldwwicmVXnYkN7EHCY729"];let baidu=getArrayRandomOne(baiduArr);function updateBaidu(n){const e={_0x2a3838:4056},t=_0x2397ca;baiduArr.splice(0,baiduArr.length),Array[t(e._0x2a3838)](n)?n[t(1255)](x=>{baiduArr.push(x)}):baiduArr.push(n),baidu=getArrayRandomOne(baiduArr)}function updateAll(n){const e={_0x394b47:3548,_0x52d3dc:2642},t=_0x2397ca;n.tianditu&&updateTianditu(n[t(e._0x394b47)]),n.gaode&&updateGaode(n.gaode),n[t(3058)]&&updateBaidu(n.baidu),n[t(1310)]&&updateIon(n.ion),n.mapbox&&updateMapbox(n[t(2822)]),n[t(e._0x52d3dc)]&&updateBing(n.bing)}var Token={__proto__:null,get ion(){return ion},updateIon,get mapbox(){return mapbox},updateMapbox,get bing(){return bing},updateBing,tiandituArr,get tianditu(){return tianditu},updateTianditu,gaodeArr,get gaode(){return gaode},updateGaode,baiduArr,get baidu(){return baidu},updateBaidu,updateAll};const Color$2=Cesium__namespace.Material.ColorType,PolylineDash=Cesium__namespace.Material.PolylineDashType,LineDotDash="LineDotDash",PolylineOutline=Cesium__namespace.Material.PolylineOutlineType,PolylineArrow=Cesium__namespace.Material.PolylineArrowType,PolylineGlow=Cesium__namespace.Material.PolylineGlowType,LineFlow=_0x2397ca(339),LineFlowColor=_0x2397ca(2319),ODLine="ODLine",LineFlicker="LineFlicker",LineTrail="LineTrail",LineBloom=_0x2397ca(3450),DigitalFlow="DigitalFlow",LineThreeDash="LineThreeDash",WallScroll=_0x2397ca(539),Image$1=Cesium__namespace.Material[_0x2397ca(4011)],Image2="Image2",Text="Text",Grid=Cesium__namespace.Material.GridType,Checkerboard=Cesium__namespace.Material[_0x2397ca(1683)],Stripe=Cesium__namespace.Material[_0x2397ca(3959)],PolyGradient=_0x2397ca(3515),PolyAsphalt="PolyAsphalt",PolyBlob=_0x2397ca(3234),PolyFacet="PolyFacet",PolyGrass="PolyGrass",PolyWood="PolyWood",NeonLight="NeonLight",Water$1=Cesium__namespace.Material.WaterType,WaterLight="WaterLight",RectSlide="RectSlide",ScanLine="ScanLine",CircleScan="CircleScan",CircleWave="CircleWave",RadarLine="RadarLine",RadarWave="RadarWave",CylinderWave="CylinderWave",EllipsoidElectric="EllipsoidElectric",EllipsoidWave="EllipsoidWave";var MaterialType$1={__proto__:null,Color:Color$2,PolylineDash,LineDotDash,PolylineOutline,PolylineArrow,PolylineGlow,LineFlow,LineFlowColor,ODLine,LineFlicker,LineTrail,LineBloom,DigitalFlow,LineThreeDash,WallScroll,Image:Image$1,Image2,Text,Grid,Checkerboard,Stripe,PolyGradient,PolyAsphalt,PolyBlob,PolyFacet,PolyGrass,PolyWood,NeonLight,Water:Water$1,WaterLight,RectSlide,ScanLine,CircleScan,CircleWave,RadarLine,RadarWave,CylinderWave,EllipsoidElectric,EllipsoidWave};const LayerType={},ControlType={},EffectType={},LangType={ZH:0,ZHHK:1,EN:2},MoveType={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},ClipType={Z:1,ZR:2,X:3,XR:4,Y:5,YR:6},Icon={Delete:"fa fa-trash-o",Coordinates:_0x2397ca(2512),CameraInfo:_0x2397ca(429),Camera:"fa fa-street-view",UndergroundNo:"fa fa-ban",UndergroundYes:_0x2397ca(3627),RotatePointStart:"fa fa-retweet",RotatePointStop:_0x2397ca(3834),FlyToPoint:"fa fa-send-o",FirstPerspective:_0x2397ca(1555),KeyboardRoamYes:"fa fa-keyboard-o",KeyboardRoamNo:_0x2397ca(724),TrackedEntityYes:_0x2397ca(1973),TrackedEntityNo:_0x2397ca(1057),Tileset:_0x2397ca(2672),TilesetWireframeYes:"fa fa-connectdevelop",TilesetWireframeNo:_0x2397ca(1080),TilesetBoundingVolumeYes:"fa fa-codepen",TilesetBoundingVolumeNo:"fa fa-codepen",Terrain:_0x2397ca(1851),TerrainYes:_0x2397ca(1698),TerrainNo:"fa fa-medium",TerrainWireframeYes:"fa fa-connectdevelop",TerrainWireframeNo:"fa fa-connectdevelop",Measure:_0x2397ca(3033),MeasureDistance:"fa fa-minus",MeasureArea:_0x2397ca(1698),MeasureHeight:_0x2397ca(515),MeasureAngle:"fa fa-road",Draw:_0x2397ca(1527),DrawPoint:"fa fa-map-marker",DrawPolyline:_0x2397ca(905),DrawPolygon:"fa fa-medium",DrawCircle:"fa fa-genderless",DrawRectangle:"fa fa-retweet",DrawEditYes:"fa fa-pencil",DrawEditNo:"fa fa-pencil-square",DrawDownJson:_0x2397ca(2553),Effect:"fa fa-rss",RainEffectYes:"fa fa-tint",RainEffectNo:"fa fa-tint",SnowEffectYes:"fa fa-yelp",SnowEffectNo:"fa fa-yelp",FogEffectYes:"fa fa-spinner",FogEffectNo:"fa fa-spinner",BloomEffectYes:"fa fa-bullseye",BloomEffectNo:"fa fa-bullseye",BrightnessEffectYes:"fa fa-trello",BrightnessEffectNo:"fa fa-trello",NightVisionEffectYes:"fa fa-dashboard",NightVisionEffectNo:"fa fa-dashboard",BlackAndWhiteEffectYes:_0x2397ca(3108),BlackAndWhiteEffectNo:_0x2397ca(3108),OutlineEffectYes:"fa fa-ticket",OutlineEffectNo:_0x2397ca(3479),Scene:"fa fa-gear",DepthTestYes:"fa fa-eye-slash",DepthTestNo:"fa fa-eye",SkyBoxYes:"fa fa-moon-o",SkyBoxNo:_0x2397ca(3789),ShadowYes:_0x2397ca(3183),ShadowNo:"fa fa-sun-o",SkyAtmosphereYes:"fa fa-soundcloud",SkyAtmosphereNo:"fa fa-soundcloud",ExpImage:"fa fa-download"};function create$3(n,e,t){const x={_0x32a31b:2676},i=_0x2397ca,s=document[i(x._0x32a31b)](n);return s.className=e||"",t&&t[i(2598)](s),s}function createSvg(n,e,t,x){const i={_0x5aae08:3682,_0x30cb60:3386,_0x3830cc:3031},s=_0x2397ca,o=document.createElementNS(s(i._0x5aae08),s(i._0x30cb60));o.setAttribute("class","svg-path"),o[s(3031)]("width",n),o.setAttribute(s(3872),e),o[s(i._0x3830cc)](s(552),"0 0 "+n+" "+e);const r=document.createElementNS(s(i._0x5aae08),"path");return r.setAttribute("d",t),o[s(2598)](r),x&&x.appendChild(o),o}function createVideo(n,e,t,x){const i={_0x701aee:3031,_0x1397aa:1202,_0x1490fd:1967,_0x2e1e0e:2027},s=_0x2397ca,o=create$3(s(1825),t,x);o[s(i._0x701aee)]("autoplay",!0),o[s(3031)](s(i._0x1397aa),!0),o.setAttribute("crossorigin",!0),!e&&(e=n[s(i._0x1490fd)](n.lastIndexOf(".")+1,n[s(i._0x2e1e0e)]));const r=create$3("source","",o);return r[s(3031)]("src",n),r[s(3031)]("type","video/"+e),o}function get(n){return typeof n=="string"?document.getElementById(n):n}function parseDom(n,e,t){const x=document.createElement("div");return t&&(x.className=t),x.innerHTML=n,e?x:x.childNodes}function remove(n){const e={_0x44b43d:962},t=_0x2397ca;if(n=get(n),!n)return;const x=n.parentNode;x&&x[t(e._0x44b43d)](n)}function empty(n){const e={_0x460ff7:2115},t=_0x2397ca;for(;n.firstChild;)n.removeChild(n[t(e._0x460ff7)])}function getStyle(n,e){const t={_0x35d6e0:2925},x=_0x2397ca;let i=n.style[e]||n.currentStyle&&n.currentStyle[e];if((!i||i===x(t._0x35d6e0))&&document.defaultView){const s=document[x(1923)].getComputedStyle(n,null);i=s?s[e]:null}return i===x(t._0x35d6e0)?null:i}function hasClass(n,e){const t={_0x3a1df1:2398},x=_0x2397ca;if(!n)return!1;if(n.classList!==void 0)return n.classList.contains(e);const i=getClass$3(n);return i.length>0&&new RegExp(x(1398)+e+x(t._0x3a1df1)).test(i)}function addClass(n,e){if(n){if(n.classList!==void 0){const t=splitWords(e);for(let x=0,i=t.length;x<i;x++)n.classList.add(t[x])}else if(!hasClass(n,e)){const t=getClass$3(n);setClass(n,(t?t+" ":"")+e)}}}function removeClass(n,e){const t={_0x1e9f86:2042,_0x15bf19:2689},x=_0x2397ca;n&&(n[x(t._0x1e9f86)]!==void 0?n.classList[x(t._0x15bf19)](e):setClass(n,trim((" "+getClass$3(n)+" ").replace(" "+e+" "," "))))}function setClass(n,e){const t={_0x2518f5:1429},x=_0x2397ca;!n[x(1429)]||!n.className.baseVal?n[x(t._0x2518f5)]=e:n.className.baseVal=e}function getClass$3(n){var e;return n.correspondingElement&&(n=n.correspondingElement),(e=n.className)!==null&&e!==void 0&&e.baseVal?n.className.baseVal:n.className}function copyCanvas(n){const e={_0xe7a06e:2795,_0x52e90c:3872,_0x18fe29:1526},t=_0x2397ca,x=n.getContext("2d",{willReadFrequently:!0})[t(e._0xe7a06e)](0,0,n.width,n[t(e._0x52e90c)]),i=document.createElement("canvas");i[t(e._0x18fe29)]=n.width,i[t(3872)]=n.height;const s=i.getContext("2d",{willReadFrequently:!0});return s.clearRect(0,0,i.width,i.height),s.putImageData(x,0,0),i}var DomUtil={__proto__:null,create:create$3,createSvg,createVideo,get,parseDom,remove,empty,getStyle,hasClass,addClass,removeClass,setClass,getClass:getClass$3,copyCanvas};function getCenter(n){const e={_0x1e94af:1733,_0x376083:1008,_0xf7259b:2145},t=_0x2397ca;try{const x=n[t(e._0x1e94af)],i=new Cesium__namespace.Cartesian2(x.clientWidth/2,x[t(1879)]/2),s=n.camera[t(2081)](i);let o=n.globe[t(e._0x376083)](s,n);return!o&&(o=n.camera[t(1693)](i)),o?LngLatPoint[t(e._0xf7259b)](o):void 0}catch{return}}function getExtent(n,e={}){const t={_0x40d835:1184,_0x2c636b:3400,_0x2f63c8:778,_0x3aaef7:3876,_0x14cae8:1693,_0x40a5e3:3872,_0x215cd1:242,_0xc9d5be:3976,_0x4f32de:1761,_0x40851c:3976},x=_0x2397ca,i={xmin:70,xmax:140,ymin:0,ymax:55,height:0},s=n.scene,o=s.globe.ellipsoid,r=s[x(1733)],c=n[x(3400)].pickEllipsoid(new Cesium__namespace.Cartesian2(0,0),o);if(c){const l=o.cartesianToCartographic(c);i.xmin=Cesium__namespace.Math.toDegrees(l[x(t._0x40d835)]),i.ymax=Cesium__namespace.Math.toDegrees(l.latitude),i.height=Math.max(i.height,l[x(3872)])}else{const l=r.width/2,h=r.height/2;let d;for(let u=0;u<=h;u+=10){const m=u<=l?u:l;if(d=n[x(t._0x2c636b)][x(1693)](new Cesium__namespace.Cartesian2(m,u),o),d)break}if(d){const u=o.cartesianToCartographic(d);i.xmin=Cesium__namespace.Math.toDegrees(u.longitude),i[x(1606)]=Cesium__namespace[x(3876)].toDegrees(u.latitude),i.height=Math.max(i.height,u[x(3872)])}}const _=n.camera[x(1693)](new Cesium__namespace.Cartesian2(r.width,r.height),o);if(_){const l=o.cartesianToCartographic(_);i[x(3976)]=Cesium__namespace.Math[x(t._0x2f63c8)](l.longitude),i[x(242)]=Cesium__namespace[x(t._0x3aaef7)].toDegrees(l.latitude),i[x(3872)]=Math.max(i.height,l.height)}else{const l=r.width/2,h=r[x(3872)]/2;let d;for(let u=r.height;u>=h;u-=10){const m=u>=l?u:l;if(d=n.camera[x(t._0x14cae8)](new Cesium__namespace.Cartesian2(m,u),o),d)break}if(d){const u=o.cartesianToCartographic(d);i.xmax=Cesium__namespace.Math.toDegrees(u.longitude),i[x(242)]=Cesium__namespace[x(3876)][x(t._0x2f63c8)](u.latitude),i.height=Math[x(1146)](i[x(t._0x40a5e3)],u.height)}}if(i){if(i.xmax<i.xmin){const l=i.xmax;i[x(3976)]=i.xmin,i[x(1383)]=l}if(i[x(1606)]<i.ymin){const l=i.ymax;i.ymax=i[x(242)],i.ymin=l}if(Cesium__namespace.defined(e.scale)){const l=e.scale,h=(i.xmax-i.xmin)/2*l,d=(i[x(1606)]-i[x(t._0x215cd1)])/2*l;i.xmin-=h,i[x(t._0xc9d5be)]+=h,i.ymin-=d,i.ymax+=d}return e.formatNum&&(i.xmin=formatNum$1(i.xmin,LngLatPoint[x(t._0x4f32de)]),i.xmax=formatNum$1(i[x(t._0x40851c)],LngLatPoint.FormatLength),i.ymin=formatNum$1(i.ymin,LngLatPoint.FormatLength),i.ymax=formatNum$1(i.ymax,LngLatPoint.FormatLength)),i}}function getCameraView(n,e){const t={_0x3a5c7c:489,_0x479ac0:1722},x=_0x2397ca,i=n.positionCartographic,s={};return s.lat=formatNum$1(Cesium__namespace[x(3876)].toDegrees(i[x(t._0x3a5c7c)]),LngLatPoint.FormatLength),s.lng=formatNum$1(Cesium__namespace.Math.toDegrees(i[x(1184)]),LngLatPoint.FormatLength),(e==null?void 0:e.simplify)??!0?(s.alt=formatNum$1(i.height,1),s.heading=formatNum$1(Cesium__namespace.Math.toDegrees(n.heading||0)%360,1),s.pitch=formatNum$1(Cesium__namespace.Math.toDegrees(n.pitch||0)%360,1)):(s[x(1155)]=formatNum$1(i.height,LngLatPoint.FormatAltLength),s.heading=formatNum$1(Cesium__namespace.Math.toDegrees(n[x(t._0x479ac0)]||0)%360,2),s.pitch=formatNum$1(Cesium__namespace.Math.toDegrees(n[x(227)]||0)%360,2),s.roll=formatNum$1(Cesium__namespace.Math.toDegrees(n.roll||0)%360,2)),s}function expImage(n,e={}){const t={_0x598809:3944,_0x1ab4b3:1526,_0x13f7d9:3578};return new Promise((x,i)=>{const s={_0x1d3a47:639,_0x4fd527:3872,_0x7b7c0d:2207,_0x1953e6:2207,_0x582912:3872,_0x150dcc:1526,_0x3b2a0d:968,_0x10c103:3872,_0x2ccf32:2459},o=_0x3361;e[o(3944)]=e[o(t._0x598809)]??!0,e.type=e.type??o(3148),n.render();const r=n.canvas.toDataURL(e.type,e.encoderOptions),c=n.canvas.height,_=n.canvas[o(t._0x1ab4b3)];if(Cesium__namespace.defined(e.width)||Cesium__namespace.defined(e.height)){const l=new Image;l.onload=function(){const h=o;let d,u;if(Cesium__namespace[h(s._0x1d3a47)](e.width)&&!Cesium__namespace.defined(e[h(s._0x4fd527)]))d=e.width,u=Math.round(d*c/_);else if(Cesium__namespace.defined(e.height)&&!Cesium__namespace.defined(e.width))u=e.height,d=Math[h(s._0x7b7c0d)](u*_/c);else{const v=e.width/_,M=e.height/c;v>M?(d=e.width,u=Math[h(s._0x1953e6)](d*c/_)):(u=e.height,d=Math.round(u*_/c))}const m=document.createElement(h(1733));m.width=e[h(1526)]||d,m[h(s._0x582912)]=e.height||u;const f=m[h(3469)]("2d",{willReadFrequently:!0}),g=(m.width-d)/2,b=(m.height-u)/2;f.drawImage(l,g,b,d,u);const y=m[h(699)](e.type,e.encoderOptions);if(!e[h(3811)]&&(e.filename="场景出图_"+m[h(s._0x150dcc)]+"x"+m.height),e.download){let v=e.filename;e[h(s._0x3b2a0d)]==="image/jpeg"&&(v=v+".jpg"),downloadBase64Image(v,y)}const C={image:y,width:m.width,height:m[h(s._0x10c103)]};e.callback&&e[h(s._0x2ccf32)](C),x(C)},l[o(t._0x13f7d9)]=r}else{!e.filename&&(e.filename="场景出图_"+_+"x"+c),e.download&&downloadBase64Image(e.filename,r);const l={image:r,width:_,height:c};e.callback&&e[o(2459)](l),x(l)}})}function pick3DTileset(n,e){const t={_0x4e3b42:2027,_0x8aaf32:2617,_0x43f853:957,_0x47d480:2294},x=_0x2397ca;if(!e)return null;e instanceof Cesium__namespace[x(295)]&&(e=[e]);for(let i=0,s=e[x(t._0x4e3b42)];i<s;++i){const o=e[i],r=Cesium__namespace.SceneTransforms[x(t._0x8aaf32)](n,o);if(!Cesium__namespace.defined(r))continue;const c=n.pick(r,10,10);if(Cesium__namespace.defined(c)&&Cesium__namespace.defined(c.primitive)&&c[x(t._0x43f853)]instanceof Cesium__namespace[x(t._0x47d480)])return c.primitive}return null}class SurfacePoint{constructor(e){const t={_0x479e89:3044,_0x199630:3399,_0x53cc8d:1556},x=_0x2397ca;this[x(t._0x479e89)]=e,this.scene=e.map?e[x(4014)].scene:e[x(t._0x199630)],!this.scene&&logError$1("SurfacePoint: 请传入scene参数",this.options),this[x(t._0x53cc8d)]=LngLatPoint.parse(e.position),this._point&&(this[x(1173)]=this._point.toCartesian(),this._cartographic=this[x(t._0x53cc8d)][x(1960)](),this._height_original=this._point.alt)}[_0x2397ca(546)](){const e={_0x336f60:1259,_0x54570a:1173,_0x1aa5f3:3933};return new Promise((t,x)=>{const i=_0x3361;if(this[i(e._0x336f60)]={resolve:t,reject:x},!this._point){t({height:0});return}const s=this.options.has3dtiles??Cesium__namespace.defined(pick3DTileset(this.scene,this[i(e._0x54570a)])),o=!!this.scene[i(3653)]._layers;if(this._has3dtiles=s,this._hasTerrain=o,!o&&!s){this[i(1568)](0);return}s?this[i(e._0x1aa5f3)]():this.clampToTerrain()})}clampTo3DTileset(){const e={_0x23c7bc:3273,_0x50838c:1173,_0x314d3f:3044},t=_0x2397ca;this[t(3399)][t(e._0x23c7bc)]([this[t(e._0x50838c)].clone()],this[t(e._0x314d3f)].objectsToExclude,.05).then(x=>{const i=t,s=x[0];if(Cesium__namespace.defined(s)){const o=Cesium__namespace[i(1899)].fromCartesian(s),r=o.height;if(Cesium__namespace.defined(r)&&r>-1e3){this.end(r);return}}this.clampToTerrain()})}clampToTerrain(){const e={_0x2a562a:3653,_0x139f91:1286},t={_0x84cd96:3399},x=_0x2397ca;this._hasTerrain?Cesium__namespace.sampleTerrainMostDetailed(this.scene[x(e._0x2a562a)],[this._cartographic])[x(e._0x139f91)](i=>{const s=x,o=i[0];let r;Cesium__namespace.defined(o)&&Cesium__namespace.defined(o[s(3872)])?r=o.height:r=this[s(t._0x84cd96)].globe.getHeight(this._cartographic)||0,this.end(r)}):this.end(0)}end(e){const t={_0x34c2ce:3044,_0x166a64:1556,_0x2da4dc:1184,_0x192fb5:489},x=_0x2397ca;this[x(t._0x34c2ce)][x(2459)]&&this.options.callback(e),this[x(1556)][x(1155)]=e,this._promise.resolve({height:e,height_original:this._height_original,point:this[x(t._0x166a64)],position:Cesium__namespace.Cartesian3.fromRadians(this._cartographic[x(t._0x2da4dc)],this[x(310)][x(t._0x192fb5)],e),position_original:this._position,has3dtiles:this._has3dtiles,hasTerrain:this._hasTerrain})}}function getTransFun(n,e){if(!n||!e||(n=crsName2FunName(n),e=crsName2FunName(e),e===n))return!1;const t=n+"2"+e;return PointTrans[t]?PointTrans[t]:!1}function crsName2FunName(n){const e={_0xdd17af:2087},t=_0x2397ca;switch(n){case ChinaCRS.GCJ02:return"gcj";case ChinaCRS[t(e._0xdd17af)]:return"bd";case ChinaCRS.WGS84:default:return"wgs"}}function getPositionValue(n,e){if(!n)return n;let t;return n instanceof Cesium__namespace.Cartesian3?t=n:n._value&&n._value instanceof Cesium__namespace.Cartesian3?t=n._value:typeof n.getValue=="function"&&(t=n.getValue(e||Cesium__namespace.JulianDate.now())),t}function getMaxHeight(n,e=0){const t={_0x12b385:1155},x=_0x2397ca;if(n==null||n[x(2027)]===0)return e;let i=e;for(let s=0;s<n.length;s++){const o=LngLatPoint.parse(n[s]);s===0&&(i=o.alt),o[x(t._0x12b385)]>i&&(i=o.alt)}return formatNum(i,LngLatPoint.FormatAltLength)}function formatNum(n,e=0){const t=_0x2397ca,x=Math.pow(10,e);return Math[t(2207)](n*x)/x}function getMinHeight(n,e=0){if(n==null||n.length===0)return e;let t=e;for(let x=0;x<n.length;x++){const i=Cesium__namespace.Cartographic.fromCartesian(n[x]);x===0&&(t=i.height),i.height<t&&(t=i.height)}return formatNum(t,LngLatPoint.FormatAltLength)}function addPositionsHeight(n,e=0){const t={_0x211858:2145,_0xc2c919:238,_0x1c96b0:1184,_0x4db4c6:1899},x=_0x2397ca;if(e=Number(e),isNaN(e)||e===0)return n;if(Array.isArray(n)){const i=[];for(let s=0,o=n.length;s<o;s++){const r=Cesium__namespace.Cartographic[x(t._0x211858)](n[s]),c=Cesium__namespace.Cartesian3[x(t._0xc2c919)](r[x(t._0x1c96b0)],r.latitude,r[x(3872)]+e);i.push(c)}return i}else{const i=Cesium__namespace[x(t._0x4db4c6)].fromCartesian(n);return Cesium__namespace[x(295)].fromRadians(i[x(1184)],i.latitude,i.height+e)}}function setPositionsHeight(n,e=0){const t={_0x228dfe:4056,_0x2455ca:1899,_0x43262b:2145,_0x184f3:238,_0x7eb68b:1184},x=_0x2397ca;if(!n)return n;if(Array[x(t._0x228dfe)](n)){const i=[];for(let s=0,o=n.length;s<o;s++){const r=Cesium__namespace.Cartographic.fromCartesian(n[s]),c=Cesium__namespace.Cartesian3.fromRadians(r.longitude,r[x(489)],e);i[x(2434)](c)}return i}else{const i=Cesium__namespace[x(t._0x2455ca)][x(t._0x43262b)](n);return Cesium__namespace.Cartesian3[x(t._0x184f3)](i[x(t._0x7eb68b)],i.latitude,e)}}function getHeight(n,e,t={}){const x=_0x2397ca,i=LngLatPoint.parse(e);if(!n||!i)return 0;const s=i.toCartesian(),o=t[x(713)]??Cesium__namespace[x(639)](pick3DTileset(n,s));if(!!!n.terrainProvider[x(3388)]&&!o)return 0;const c=i.toCartographic();if(o){const l=n.sampleHeight(c,t[x(3656)],t.width);if(Cesium__namespace.defined(l)&&l>-1e3)return l}const _=n[x(679)][x(1105)](c);return Cesium__namespace.defined(_)&&_>-1e3?_:0}function getSurfaceHeight(n,e,t={}){const x={_0x4330fc:760},i=_0x2397ca;return t[i(3399)]=n,t[i(x._0x4330fc)]=e,new SurfacePoint(t)[i(546)]()}function getSurfaceTerrainHeight(n,e){const t={scene:n,position:e,has3dtiles:!1};return new SurfacePoint(t).start()}function getSurfacePosition(n,e,t={}){const x=_0x2397ca;if(!e)return e;n.scene&&(n=n.scene);let i=getHeight(n,e,t);if(i!==0||Cesium__namespace[x(639)](t[x(1295)])&&i<=t[x(1295)]){const s=Cesium__namespace.Cartographic[x(2145)](e);return t.relativeHeight&&(i+=s.height),Cesium__namespace.Cartesian3[x(238)](s.longitude,s.latitude,i)}return e}function hasPickedModel(n,e){const t={_0x243f93:1285},x=_0x2397ca;if(Cesium__namespace.defined(n.id)){const i=n.id;if(i._noMousePick||e&&i===e)return i}if(Cesium__namespace.defined(n.primitive)){const i=n.primitive;if(i._noMousePick||e&&i===e)return i}if(Cesium__namespace[x(639)](n[x(t._0x243f93)])){const i=n.tileset;if(i._noMousePick||e&&i===e)return i}return null}function getCurrentMousePosition(n,e,t){const x={_0x325988:1008,_0x135510:1243,_0xf07a7:679,_0x441b4f:639,_0x393e66:2992,_0xb162dc:1721,_0xa2548:3400},i=_0x2397ca;let s,o;try{o=n[i(x._0x325988)](e,5,5)}catch(r){logWarn("getCurrentMousePosition: scene.pick 拾取时异常",r)}if(n.pickPositionSupported&&!n.onlyPickTerrainPosition&&Cesium__namespace.defined(o)){const r=hasPickedModel(o,t);if(r){if((r.billboard||r.point||r.label)&&!r[i(1613)]&&!r[i(x._0x135510)]&&!r.ellipsoid)return getPositionValue(r.position);if(r.show&&(r.show=!1,n[i(3829)](),s=getCurrentMousePosition(n,e,t),r.show=!0,s))return s;if(!n[i(x._0xf07a7)].show)return n.pickPosition(e)}else{if(Cesium__namespace[i(639)](o.id)){const c=o.id;if((c.billboard||c.point||c[i(743)])&&!c.model)return getPositionValue(c.position)}if(s=n.pickPosition(e),Cesium__namespace.defined(s)){const c=Cesium__namespace.Cartographic.fromCartesian(s);if(c.height>=0||!Cesium__namespace[i(x._0x441b4f)](o.id)&&c.height>=-5e3)return s}}}if(Cesium__namespace[i(639)](Cesium__namespace[i(x._0x393e66)])&&(s=n.pickPosition(e),Cesium__namespace.defined(s))||!n[i(969)]&&n.onlyPickModelPosition)return s;if(n.mode===Cesium__namespace[i(x._0xb162dc)].SCENE3D){const r=n.camera[i(2081)](e);s=n.globe.pick(r,n),!s&&(s=n.camera.pickEllipsoid(e,n.globe.ellipsoid))}else s=n.camera.pickEllipsoid(e,n.globe.ellipsoid);return Cesium__namespace.defined(s)&&n[i(x._0xa2548)].positionCartographic.height<1e4&&Cesium__namespace.Cartographic.fromCartesian(s).height<-5e3?null:s}function getCurrentMouseTerrainPosition(n,e){const t={_0x9c0f20:1721,_0x951d43:1782},x=_0x2397ca;let i;if(n.mode===Cesium__namespace[x(t._0x9c0f20)].SCENE3D){const s=n.camera.getPickRay(e);i=n.globe.pick(s,n),!i&&(i=n.camera[x(1693)](e,n.globe.ellipsoid))}else i=n.camera.pickEllipsoid(e,n[x(679)][x(t._0x951d43)]);return i}function getMidpoint(n,e){const t={_0x3de30c:1960,_0x4bba13:3872,_0x59d008:295,_0x1324be:489},x=_0x2397ca;if(!e||!n)return;const i=LngLatPoint[x(t._0x3de30c)](n),s=LngLatPoint.toCartographic(e),o=(i[x(t._0x4bba13)]+s.height)/2,r=new Cesium__namespace.EllipsoidGeodesic(i,s).interpolateUsingFraction(.5);return Cesium__namespace[x(t._0x59d008)].fromRadians(r.longitude,r[x(t._0x1324be)],o)}function isRepeatPoint(n,e){const t={_0x5ab77b:889},x=_0x2397ca;return!e||!n?!1:Math.abs(n.x-e.x)<.1&&Math[x(t._0x5ab77b)](n.y-e.y)<.1&&Math[x(889)](n.z-e.z)<.1}function getRotateCenterPoint(n,e,t){const x={_0x2ab428:960,_0xccfa1a:2500,_0x4d910c:295},i=_0x2397ca,s=Cesium__namespace.Cartographic[i(2145)](n);s.height=0;const o=Cesium__namespace.Cartographic[i(799)](s);let r=Cesium__namespace.Cartesian3[i(2527)](o,n,new Cesium__namespace.Cartesian3);r=Cesium__namespace[i(295)][i(x._0x2ab428)](r,new Cesium__namespace.Cartesian3);const c=Cesium__namespace.Quaternion[i(2628)](r,Cesium__namespace.Math[i(x._0xccfa1a)](t)),_=Cesium__namespace.Matrix3.fromQuaternion(c),l=Cesium__namespace.Matrix4.fromRotationTranslation(_),h=Cesium__namespace[i(x._0x4d910c)].subtract(e,n,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Matrix4.multiplyByPoint(l,h,new Cesium__namespace.Cartesian3);return Cesium__namespace.Cartesian3.add(d,n,new Cesium__namespace[i(x._0x4d910c)])}function getOnLinePointByLen(n,e,t,x){const i={_0x4e8753:295},s=_0x2397ca,o=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),r=Cesium__namespace[s(1046)].inverse(o,new Cesium__namespace[s(1046)]);n=Cesium__namespace[s(1046)].multiplyByPoint(r,n,new Cesium__namespace.Cartesian3),e=Cesium__namespace[s(1046)].multiplyByPoint(r,e,new Cesium__namespace.Cartesian3);const c=Cesium__namespace.Cartesian3[s(2527)](e,n,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3.distance(n,e);let l;_!==0?l=t/_:l=.001,x&&(l+=1);let h=Cesium__namespace[s(i._0x4e8753)].multiplyByScalar(c,l,new Cesium__namespace.Cartesian3);return h=Cesium__namespace.Matrix4.multiplyByPoint(o,h,new Cesium__namespace[s(i._0x4e8753)]),h}function getPositionByHprAndOffset(n,e,t,x,i){const s={_0x2c5beb:1046},o=_0x2397ca;n=LngLatPoint[o(799)](n),!t&&(t=new Cesium__namespace.HeadingPitchRoll);const r=Cesium__namespace.Transforms.headingPitchRollQuaternion(n,t,x,i),c=Cesium__namespace[o(1046)].fromRotationTranslation(Cesium__namespace.Matrix3.fromQuaternion(r,new Cesium__namespace.Matrix3),n,new Cesium__namespace[o(s._0x2c5beb)]);return Cesium__namespace.Matrix4.multiplyByPoint(c,e,new Cesium__namespace.Cartesian3)}function getPositionByDirectionAndLen(n,e,t){const x={_0xcbbecd:2517,_0x560e84:1046,_0x4ce7a1:851,_0x58589b:295},i=_0x2397ca;n=LngLatPoint.toCartesian(n);const s=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),o=Cesium__namespace.Matrix3[i(x._0xcbbecd)](Cesium__namespace.Math[i(2500)](360-(e||0))),r=Cesium__namespace[i(x._0x560e84)][i(x._0x4ce7a1)](o);return Cesium__namespace.Matrix4[i(3566)](s,r,s),Cesium__namespace[i(1046)].multiplyByPoint(s,new Cesium__namespace.Cartesian3(t,0,0),new Cesium__namespace[i(x._0x58589b)])}function getPositionByHprAndLen(n,e,t){const x={_0x46e57b:3596},i=_0x2397ca;n=LngLatPoint.toCartesian(n);const s=Cesium__namespace.Transforms.headingPitchRollQuaternion(n,e),o=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromQuaternion(s,new Cesium__namespace[i(x._0x46e57b)]),n,new Cesium__namespace.Matrix4);return Cesium__namespace[i(1046)][i(2933)](o,new Cesium__namespace[i(295)](0,0,-t),new Cesium__namespace[i(295)])}function getRayEarthPosition(n,e,t,x){const i={_0x13c616:851},s=_0x2397ca;if(!n||!e)return;e instanceof Cesium__namespace.HeadingPitchRoll&&(e=Cesium__namespace.Transforms[s(3240)](n,e));const o=Cesium__namespace[s(1046)][s(i._0x13c616)](Cesium__namespace.Matrix3.fromQuaternion(e,new Cesium__namespace[s(3596)]),n,new Cesium__namespace.Matrix4);return getRayEarthPositionByMatrix(o,t,x)}function getRayEarthPositionByMatrix(n,e,t){const x=_0x2397ca,i=new Cesium__namespace.Cartesian3,s=new Cesium__namespace.Ray;Cesium__namespace.Matrix4.multiplyByPoint(n,Cesium__namespace.Cartesian3.ZERO,i),i[x(3069)](s.origin);const o=new Cesium__namespace.Cartesian3(0,0,e?-100:100);return extend2Earth(o,n,s,t)}function extend2Earth(n,e,t,x){const i={_0x5e6357:295,_0x499ed7:1110,_0x2b6491:607,_0x13e30a:1899,_0x55b7a3:2145},s=_0x2397ca;x=x||Cesium__namespace[s(3815)].WGS84;const o=new Cesium__namespace.Cartesian3;Cesium__namespace[s(1046)].multiplyByPoint(e,n,o),Cesium__namespace[s(i._0x5e6357)].subtract(o,t.origin,t.direction),Cesium__namespace.Cartesian3.normalize(t.direction,t.direction);const r=Cesium__namespace.IntersectionTests[s(210)](t,x);let c=null;if(r&&(c=Cesium__namespace[s(i._0x499ed7)][s(i._0x2b6491)](t,r.start)),c)try{const _=new Cesium__namespace.Cartographic;Cesium__namespace[s(i._0x13e30a)][s(i._0x55b7a3)](c,null,_)}catch{return null}return c}function getHeadingPitchRollByOrientation(n,e,t,x){const i={_0xbb1c82:639,_0x56f2dd:3596},s=_0x2397ca;if(!Cesium__namespace[s(i._0xbb1c82)](e)||!Cesium__namespace.defined(n))return new Cesium__namespace[s(845)];const o=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace[s(i._0x56f2dd)].fromQuaternion(e,new Cesium__namespace.Matrix3),n,new Cesium__namespace.Matrix4);return getHeadingPitchRollByMatrix(o,t,x)}function getHeadingPitchRollByMatrix(n,e,t,x){const i=_0x2397ca;return Cesium__namespace.Transforms[i(2470)](n,e,t,x)}function getHeadingPitchRollForLine(n,e,t,x){const i={_0x4a623e:3596,_0x19ae2e:295,_0x1bff37:295,_0xf245a0:3975,_0x2b7fed:2984},s=_0x2397ca;n=LngLatPoint.toCartesian(n),e=LngLatPoint.toCartesian(e),t=t||Cesium__namespace.Ellipsoid.WGS84;const o=new Cesium__namespace.Cartesian3,r=new Cesium__namespace.Matrix4,c=new Cesium__namespace[s(i._0x4a623e)],_=Cesium__namespace[s(i._0x19ae2e)].normalize(Cesium__namespace[s(i._0x1bff37)].subtract(e,n,o),o);Cesium__namespace.Transforms.rotationMatrixFromPositionVelocity(n,_,t,c);const l=Cesium__namespace.Matrix4.fromRotationTranslation(c,n,r);return Cesium__namespace[s(1046)][s(2867)](l,Cesium__namespace[s(i._0xf245a0)][s(i._0x2b7fed)],l),getHeadingPitchRollByMatrix(l,t,x)}function getReflectVector(n,e){const t=_0x2397ca,x=e.clone(),i=n.clone(),s=2*Cesium__namespace.Cartesian3.dot(n,e);return Cesium__namespace.Cartesian3.multiplyByScalar(e,s,x),Cesium__namespace.Cartesian3[t(2527)](n,x,i)}var PointUtil={__proto__:null,getTransFun,getPositionValue,getMaxHeight,getMinHeight,addPositionsHeight,setPositionsHeight,getHeight,getSurfaceHeight,getSurfaceTerrainHeight,getSurfacePosition,getCurrentMousePosition,getCurrentMouseTerrainPosition,getMidpoint,isRepeatPoint,getRotateCenterPoint,getOnLinePointByLen,getPositionByHprAndOffset,getPositionByDirectionAndLen,getPositionByHprAndLen,getRayEarthPosition,getRayEarthPositionByMatrix,extend2Earth,getHeadingPitchRollByOrientation,getHeadingPitchRollByMatrix,getHeadingPitchRollForLine,getReflectVector};class SurfacePoints{constructor(e){const t={_0x27aa73:4014,_0x30ebc9:3399},x=_0x2397ca;this.options=e,this.scene=e[x(t._0x27aa73)]?e[x(t._0x27aa73)][x(t._0x30ebc9)]:e.scene,!this.scene&&logError$1("SurfacePoints: 请传入scene参数",this.options),this.positions=LngLatArray.toCartesians(this.options.positions)}start(){const e={_0x518da5:1259,_0x3d9611:1091,_0x2a5e24:1568,_0xbbe06d:713,_0xcd50e:1075,_0x260109:1091,_0x1c69b6:1091,_0x1ba95f:1568};return new Promise((t,x)=>{const i=_0x3361;if(this[i(e._0x518da5)]={resolve:t,reject:x},this[i(e._0x3d9611)]==null||this.positions.length===0){this[i(e._0x2a5e24)](this.positions);return}const s=this.options[i(e._0xbbe06d)]??Cesium__namespace.defined(pick3DTileset(this.scene,this[i(1091)])),o=!!this.scene.terrainProvider._layers;if(this[i(3107)]=s,this._hasTerrain=o,!o&&!s){this.end(this.positions);return}if(this.options.exact)s?this.clampTo3DTileset(this.positions):this[i(e._0xcd50e)](this[i(e._0x260109)]);else{const r=[];for(let c=0,_=this.positions.length;c<_;++c){const l=Cesium__namespace.Cartographic.fromCartesian(this[i(e._0x1c69b6)][c]);let h;if(s){const d=this.scene[i(2256)](l,this[i(3044)][i(3656)],this[i(3044)].width);Cesium__namespace.defined(d)&&d>-1e3&&(h=d)}if(!Cesium__namespace.defined(h)){const d=this.scene.globe[i(1105)](l);Cesium__namespace.defined(d)&&d>-1e3&&(h=d)}r.push(Cesium__namespace.Cartesian3[i(238)](l.longitude,l[i(489)],h??l.height))}this[i(e._0x1ba95f)](r)}})}clampTo3DTileset(e){const t=[];for(let x=0,i=e.length;x<i;++x)t.push(e[x].clone());this.scene.clampToHeightMostDetailed(t,this.options.objectsToExclude).then(x=>{const i=_0x3361;x=this.removeNullData(x),x.length>0?(this[i(3044)].offset&&(x=addPositionsHeight(x,this.options[i(314)])),this.end(x)):this.clampToTerrain(e)})}clampToTerrain(e){const t={_0x35756c:1782,_0x2c83cb:1899,_0x588e31:3399},x={_0x5702d7:314,_0x18530a:3872},i=_0x2397ca;if(this[i(3104)]){const s=this.scene.globe[i(t._0x35756c)],o=s.cartesianArrayToCartographicArray(e),r=Cesium__namespace[i(t._0x2c83cb)].fromCartesian(e[0]).height;Cesium__namespace.sampleTerrainMostDetailed(this[i(t._0x588e31)].terrainProvider,o).then(c=>{const _=i;c=this[_(3650)](c);let l=!1;const h=this.options[_(x._0x5702d7)]??0;for(let u=0;u<c.length;++u)c[u][_(x._0x18530a)]==null?(l=!0,c[u][_(3872)]=h+r):c[u][_(x._0x18530a)]=h+c[u].height;const d=s[_(1181)](c);this[_(1568)](d,l)})}else this.end(e)}[_0x2397ca(1568)](e,t){const x={_0x22d183:2459,_0x424d13:1091},i=_0x2397ca;this.options[i(x._0x22d183)]&&this.options.callback(e,t,this.positions),this._promise.resolve({positions:e,positions_original:this[i(x._0x424d13)],noHeight:t,has3dtiles:this._has3dtiles,hasTerrain:this._hasTerrain})}[_0x2397ca(3650)](e){const t={_0x5a194a:2434},x=_0x2397ca,i=[];for(let s=0;s<e.length;++s)e[s]!=null&&i[x(t._0x5a194a)](e[s]);return i}}function logError(n,e){console.error(_0x2397ca({_0x11e8f9:1213}._0x11e8f9)+n+" 不存在,该方法需引入 turf.js 库生效。",e)}function area(n){try{return turf.area(n)}catch(e){logError("area",e)}return 0}function bbox(n){try{return turf.bbox(n)}catch(e){logError("bbox",e)}return null}function bezierSpline(n,e){try{return turf.bezierSpline(n,e)}catch(t){logError("bezierSpline",t)}return n}function booleanPointInPolygon(n,e,t){const x=_0x2397ca;try{return turf.booleanPointInPolygon(n,e,t)}catch(i){logError(x(3337),i)}return!1}function buffer$1(n,e,t){const x=_0x2397ca;try{return turf.buffer(n,e,t)}catch(i){logError(x(3593),i)}return n}function convex$1(n,e){const t={_0x3bf789:3329},x=_0x2397ca;try{return turf[x(t._0x3bf789)](n,e)}catch(i){logError("convex",i)}return n}function pointGrid(n,e,t){const x={_0xe57057:2874},i=_0x2397ca;try{return turf[i(2874)](n,e,t)}catch(s){logError(i(x._0xe57057),s)}return{features:[]}}const pickTilesetPassState=new Cesium__namespace[_0x2397ca(304)]({pass:Cesium__namespace.Cesium3DTilePass.PICK}),packedDepthScale=new Cesium__namespace.Cartesian4(1,1/255,1/65025,1/16581375),scratchRectangle=new Cesium__namespace[_0x2397ca(964)](0,0,3,3),scratchColorZero=new Cesium__namespace[_0x2397ca(2134)](0,0,0,0),scratchRight=new Cesium__namespace[_0x2397ca(295)],scratchUp=new Cesium__namespace.Cartesian3,scratchPackedDepthArray=[];function interPolygonByDepth$1(n){const e={_0x33a7b7:679,_0x3a98d3:2827,_0x3268cf:1557,_0x43cedf:1666,_0x2b64b1:2878,_0x4a2877:3549,_0x4e8364:2895,_0x575da0:167,_0x22826a:2928,_0x39b29d:760,_0x408e9e:565,_0x58708e:2027},t={_0x1c4035:1899,_0x1da0aa:489},x=_0x2397ca,i=n.scene,s=LngLatArray.toCartesians(n.positions),o=i.globe.depthTestAgainstTerrain;i[x(e._0x33a7b7)][x(1583)]=!0;const r=n.cameraHeight??i.camera.positionCartographic.height,{ray:c,frustumWidth:_,frustumHeight:l,cameraUp:h}=getCameraInforForPoints(s,r),d=Number(n.splitNum??512),u=_/d,m=l/d,f=new Cesium__namespace[x(e._0x3a98d3)](i),g=f._pickOffscreenView,b=new Cesium__namespace[x(964)](0,0,d,d);g.viewport=b,g.passState.viewport=b,i[x(e._0x3268cf)]=g,updateOffscreenCamera(c[x(4023)],c[x(2165)],h,_,l,g.camera),Cesium__namespace.BoundingRectangle.clone(g.viewport,scratchRectangle);const y=g.pickFramebuffer[x(4039)](scratchRectangle,g.viewport);i[x(e._0x43cedf)][x(1476)](),i[x(e._0x2b64b1)](),i[x(2895)].invertClassification=!1,i.frameState.passes.pick=!0,i.frameState.passes[x(e._0x4a2877)]=!0,i[x(e._0x4e8364)].tilesetPassState=pickTilesetPassState,i.context.uniformState.update(i.frameState),i.updateEnvironment(),i[x(e._0x575da0)](y,scratchColorZero),i[x(1117)](y);const C=[];if(i[x(e._0x22826a)].depthTexture){const F=g.frustumCommandsList.length,L=new Cesium__namespace.Cartesian3;for(let B=0;B<F;++B){const Y=f[x(3539)](i,B),j=getDepth(i.context,0,0,d,d,Y);for(let J=0;J<j.length;J++){const Q=j[J];if(Q>0&&Q<1){const X=g.frustumCommandsList[B],xe=X[x(387)]*(J!==0?i.opaqueFrustumNearOffset:1),{far:K}=X,le=xe+Q*(K-xe),ce=Math.floor(J/d),_e=J%d,ne=(ce-d/2)*l/d,pe=(_e-d/2)*_/d,fe=new Cesium__namespace[x(295)];Cesium__namespace.Cartesian3[x(2580)](h,ne,L),Cesium__namespace[x(295)].add(L,g.camera[x(e._0x39b29d)],fe),Cesium__namespace.Cartesian3.multiplyByScalar(g[x(3400)].right,pe,L),Cesium__namespace.Cartesian3[x(e._0x408e9e)](L,fe,fe);const oe=Cesium__namespace[x(1110)].clone(c);oe.origin=fe;const he=Cesium__namespace[x(1110)].getPoint(oe,le);!C[J]&&(C[J]=he)}}}}const v=[];let M=Number.MAX_VALUE,w=-Number.MAX_VALUE;const H=s.map(F=>{const L=x,B=Cesium__namespace[L(t._0x1c4035)].fromCartesian(F);return[B.longitude,B[L(t._0x1da0aa)]]});C.forEach(F=>{const L=Cesium__namespace.Cartographic.fromCartesian(F);if(L&&pointInPolygonNested([L.longitude,L.latitude],H)){const B=L.height;w<B&&(w=B),M>B&&(M=B),F.height=B,F.getOutline=function(){return getBoxOutLine(this,u,m,h)},v.push(F)}}),i.globe.depthTestAgainstTerrain=o,i[x(1557)]=i.defaultView,i.context.endFrame(),f.destroy();const D=u*m;return{positions:v,count:v[x(e._0x58708e)],minHeight:M,maxHeight:w,box:{width:u,height:m,area:D},totalArea:D*v.length}}function interPolylineByDepth$1(n){const e={_0x222538:1169,_0x11263e:679,_0x527b00:1782,_0xb1a768:482,_0x3216a7:2145,_0x226df7:278,_0x35ed40:2572,_0x42b8b8:1184,_0x33bb9e:295,_0x540b42:2415,_0x5f05bd:2165,_0x411dd8:4031,_0x11fde2:2027,_0x3c02f7:3069,_0x793fd7:4023,_0xbce9e3:2027},t=_0x2397ca,x=n.scene,i=LngLatArray[t(e._0x222538)](n.positions),s=x[t(e._0x11263e)].depthTestAgainstTerrain;x[t(679)][t(1583)]=!0;const o=Cesium__namespace.defined(x.globe)?x.globe[t(e._0x527b00)]:x.mapProjection.ellipsoid,r=x[t(2928)],c=r.uniformState,_=x.frameState,l=n.cameraHeight??x.camera.positionCartographic.height,h=new Cesium__namespace.Picking(x),d=h[t(e._0xb1a768)],u=.1;let m=[];const f=[];for(let g=0,b=i[t(2027)]-1;g<b;g++){const y=i[g],C=i[g+1],v=Cesium__namespace.Cartographic[t(e._0x3216a7)](y),M=Cesium__namespace.Cartographic.fromCartesian(C),w=Cesium__namespace.Cartesian3.fromRadians(v.longitude,v.latitude),H=Cesium__namespace[t(295)].fromRadians(M.longitude,M.latitude),D=Cesium__namespace[t(295)].distance(w,H);let F=100;Cesium__namespace.defined(n[t(3560)])&&(F=Number(n.splitNum)),Cesium__namespace.defined(n.minDistance)&&(F=Math.floor(D/n.minDistance)),F>Cesium__namespace[t(e._0x226df7)].maximumTextureSize&&(F=Cesium__namespace.ContextLimits[t(e._0x35ed40)]);const L=new Cesium__namespace.Ray,B=Cesium__namespace.Cartesian3.lerp(w,H,.5,new Cesium__namespace.Cartesian3),Y=Cesium__namespace[t(1899)].fromCartesian(B),j=o.geodeticSurfaceNormalCartographic(Y,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.negate(j,L.direction),L[t(4023)]=Cesium__namespace[t(295)].fromRadians(Y[t(e._0x42b8b8)],Y.latitude,l);const J=Cesium__namespace[t(e._0x33bb9e)].subtract(H,w,scratchUp);Cesium__namespace.Cartesian3.normalize(J,J);const Q=D,X=new Cesium__namespace.BoundingRectangle(0,0,1,F);d[t(e._0x540b42)]=X,d.passState.viewport=X,x.view=d,updateOffscreenCamera(L[t(4023)],L[t(e._0x5f05bd)],J,u,Q,d.camera),Cesium__namespace.BoundingRectangle.clone(d.viewport,scratchRectangle);const xe=d.pickFramebuffer[t(4039)](scratchRectangle,d.viewport);x.jobScheduler.disableThisFrame(),x.updateFrameState(),_.invertClassification=!1,_[t(2764)].pick=!0,_.passes.offscreen=!0,_.tilesetPassState=pickTilesetPassState,c.update(_),x.updateEnvironment(),x.updateAndExecuteCommands(xe,scratchColorZero),x.resolveFramebuffers(xe);const K=[];if(x.context.depthTexture){const ce=d.frustumCommandsList.length,_e=new Cesium__namespace.Cartesian3;for(let ne=0;ne<ce;++ne){const pe=h.getPickDepth(x,ne),fe=getDepth(r,0,0,1,F,pe);for(let oe=0,he=fe.length;oe<he;oe++){const ye=fe[oe];if(ye>0&&ye<1){const ve=d[t(e._0x411dd8)][ne],Te=ve[t(387)]*(oe!==0?x.opaqueFrustumNearOffset:1),Ce=ve.far,Pe=Te+ye*(Ce-Te);if(he>1){const P=(oe/(fe[t(e._0x11fde2)]-1)-.5)*Q;Cesium__namespace.Cartesian3.multiplyByScalar(J,P,_e)}const be=Cesium__namespace.Ray[t(e._0x3c02f7)](L);Cesium__namespace[t(295)].add(be[t(e._0x793fd7)],_e,be.origin);const S=Cesium__namespace[t(1110)].getPoint(be,Pe);!K[oe]&&(K[oe]=S)}}}}x[t(1557)]=x[t(1923)],r[t(3705)]();const le=[];for(let ce=0,_e=K[t(e._0xbce9e3)];ce<_e;ce++){const ne=K[ce];Cesium__namespace.defined(ne)&&le.push(ne)}m=m.concat(le),f.push({distance:D,positions:le})}return x[t(679)].depthTestAgainstTerrain=s,h.destroy(),{positions:m,list:f}}function getDepth(n,e,t,x,i,s){const o={_0x210062:662},r=_0x2397ca,c=n[r(3319)]({x:e,y:t,width:x,height:i,framebuffer:s.framebuffer}),_=Cesium__namespace.Cartesian4.unpackArray(c,scratchPackedDepthArray),l=[];for(let h=0;h<_[r(2027)];++h){const d=_[h];Cesium__namespace[r(o._0x210062)].divideByScalar(d,255,d);const u=Cesium__namespace.Cartesian4.dot(d,packedDepthScale);l[r(2434)](u)}return l}function updateOffscreenCamera(n,e,t,x,i,s){const o={_0x1d08b3:2293},r=_0x2397ca,c=Cesium__namespace.Cartesian3.cross(e,t,scratchRight);return s.position=n,s.direction=e,s.up=t,s.right=c,s.frustum.width=x,s.frustum.aspectRatio=x/i,s.frustum[r(o._0x1d08b3)](s[r(4002)],s.directionWC,s.upWC)}function getCameraInforForPoints(n,e){const t={_0xfdb92c:238,_0x2dcfa1:3397,_0x137458:799,_0x59f40e:1899},x=_0x2397ca,i=Cesium__namespace.Rectangle.fromCartesianArray(n),s=Cesium__namespace.Rectangle.center(i),o=Cesium__namespace.Cartesian3[x(t._0xfdb92c)](s.longitude,s.latitude,e),r=Cesium__namespace.Ellipsoid.WGS84[x(t._0x2dcfa1)](o);Cesium__namespace.Cartesian3[x(2580)](r,-1,r);const c=Cesium__namespace[x(295)].fromRadians(s[x(1184)],s.latitude+i[x(3872)]/2,e),_=Cesium__namespace.Cartesian3.subtract(c,o,new Cesium__namespace.Cartesian3),l=new Cesium__namespace.Ray(o,r),h=Cesium__namespace.Rectangle.southwest(i),d=Cesium__namespace.Rectangle.southeast(i),u=Cesium__namespace.Rectangle.northwest(i),m=Cesium__namespace.Cartographic[x(t._0x137458)](h),f=Cesium__namespace[x(1899)].toCartesian(d),g=Cesium__namespace[x(t._0x59f40e)].toCartesian(u),b=Cesium__namespace.Cartesian3.distance(m,f),y=Cesium__namespace[x(295)].distance(m,g);return{ray:l,frustumWidth:b,frustumHeight:y,cameraUp:_}}function pointInPolygonNested(n,e){const t=n[0],x=n[1];let i=!1;const s=e.length;for(let o=0,r=s-1;o<s;r=o++){const c=e[o][0],_=e[o][1],l=e[r][0],h=e[r][1];_>x!=h>x&&t<(l-c)*(x-_)/(h-_)+c&&(i=!i)}return i}function getBoxOutLine(n,e,t,x){const i={_0x25f8bd:960,_0x2df25a:295,_0x24503d:565},s=_0x2397ca,o=Cesium__namespace.Cartesian3[s(i._0x25f8bd)](n,new Cesium__namespace[s(i._0x2df25a)]),r=Cesium__namespace.Cartesian3.cross(x,o,o);Cesium__namespace[s(295)][s(2580)](r,e/2,r);const c=Cesium__namespace[s(295)].multiplyByScalar(x,t/2,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3[s(i._0x24503d)](n,c,new Cesium__namespace.Cartesian3);Cesium__namespace[s(295)].add(_,r,_);const l=Cesium__namespace[s(295)][s(i._0x24503d)](n,c,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.subtract(l,r,l);const h=Cesium__namespace.Cartesian3.subtract(n,c,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.add(h,r,h);const d=Cesium__namespace.Cartesian3.subtract(n,c,new Cesium__namespace[s(i._0x2df25a)]);return Cesium__namespace[s(i._0x2df25a)].subtract(d,r,d),[_,h,d,l]}const scratchPerspectiveFrustum$1=new Cesium__namespace[_0x2397ca(1440)],scratchPerspectiveOffCenterFrustum$1=new Cesium__namespace.PerspectiveOffCenterFrustum,scratchOrthographicFrustum$1=new Cesium__namespace.OrthographicFrustum,scratchOrthographicOffCenterFrustum$1=new Cesium__namespace.OrthographicOffCenterFrustum;function getRayIntersectingPositions(n){const e={_0x14e5e9:3399,_0xb4a10a:2895,_0x156052:3583,_0x15eeef:1746,_0x25f334:1209,_0x22497b:1526,_0x9be085:3069,_0x7cb9eb:387,_0x4c2d8e:2032,_0x39e90a:3350},t=_0x2397ca,x=n[t(e._0x14e5e9)],i=n[t(3400)]??x[t(3400)],s=Number(n.splitNum??512),o=new Cesium__namespace[t(2827)](x),r=o._pickOffscreenView,c=new Cesium__namespace.BoundingRectangle(0,0,s,s);r.viewport=c,r.passState[t(2415)]=c,x.view=r,r.camera=i,Cesium__namespace[t(964)].clone(r.viewport,scratchRectangle);const _=r[t(1817)].begin(scratchRectangle,r[t(2415)]);x[t(1666)][t(1476)](),x.updateFrameState(),x.frameState.invertClassification=!1,x[t(e._0xb4a10a)].passes.pick=!0,x.frameState.passes.offscreen=!0,x.frameState[t(e._0x156052)]=pickTilesetPassState,x.context.uniformState.update(x.frameState),x.updateEnvironment(),x.updateAndExecuteCommands(_,scratchColorZero),x.resolveFramebuffers(_);let l;Cesium__namespace.defined(i[t(1209)][t(e._0x15eeef)])?l=i.frustum.clone(scratchPerspectiveFrustum$1):Cesium__namespace[t(639)](i.frustum.infiniteProjectionMatrix)?l=r[t(3400)][t(e._0x25f334)].clone(scratchPerspectiveOffCenterFrustum$1):Cesium__namespace.defined(i.frustum[t(e._0x22497b)])?l=i[t(1209)].clone(scratchOrthographicFrustum$1):l=i.frustum[t(e._0x9be085)](scratchOrthographicOffCenterFrustum$1);const h=new Array(s);for(let d=0;d<s;d++)h[d]=new Array(s);if(x.context.depthTexture){const d=o.getPickDepth(x,0),u=getDepth(x[t(2928)],0,0,s,s,d);for(let m=0;m<u.length;m++){const f=u[m];if(f>0&&f<1){const g=r[t(4031)][0];if(!g)continue;const b=Math.floor(m/s),y=m%s;l[t(e._0x7cb9eb)]=g[t(387)]*x.opaqueFrustumNearOffset,l[t(e._0x4c2d8e)]=g.far,x[t(2928)][t(2529)].updateFrustum(l);const C=Cesium__namespace[t(e._0x39e90a)].drawingBufferToWgs84Coordinates(x,new Cesium__namespace.Cartesian2(y,b),f,new Cesium__namespace.Cartesian3);h[y][b]=C}}}return x.view=x.defaultView,x.context.endFrame(),o[t(2941)](),h}function centerOfMass(n,e){const t={_0x1f1126:489},x=_0x2397ca;if(!n||n.length===0)return;const i=LngLatArray.toCartesians(n);try{if(i.length===1)return i[0];if(i.length===2)return getMidpoint(i[0],i[1]);e==null&&(e=getMaxHeight(i));const s=Cesium__namespace.Rectangle[x(1924)](i),o=Cesium__namespace.Rectangle.center(s);return Cesium__namespace.Cartesian3.fromRadians(o.longitude,o[x(t._0x1f1126)],e)}catch{return i[Math.floor(i.length/2)]}}function buffer(n,e=1,t=8){const x={_0x5c2cdb:3910},i=_0x2397ca;try{var s,o;if(((s=n)===null||s===void 0||(o=s.geometry)===null||o===void 0?void 0:o.type)==="Polygon"){const r=n[i(x._0x5c2cdb)].coordinates[0],c=r[0],_=r[r.length-1];(c[0]!==_[0]||c[1]!==_[1])&&r.push(c)}n=buffer$1(n,e,{units:"meters",steps:t})}catch(r){logError$1("PolyUtil turf.buffer:缓冲分析异常 ",r)}return n}function bufferPoints(n,e=1,t=8){const x={_0x4354fc:2027,_0x3cdda8:3772},i=_0x2397ca;try{const s=LngLatArray.toArray(n),o=s[0],r=s[s[i(x._0x4354fc)]-1];(o[0]!==r[0]||o[1]!==r[1])&&s.push(s[0]);const c={type:"Feature",geometry:{type:"Polygon",coordinates:[s]}},_=buffer$1(c,e,{units:"meters",steps:t});return LngLatArray[i(x._0x3cdda8)](_.geometry.coordinates[0])}catch(s){logError$1("PolyUtil buffer:缓冲分析异常",s)}return n}function getGranularity(n,e=10){const t={_0x5bd8fc:3520},x=_0x2397ca,i=Cesium__namespace[x(t._0x5bd8fc)][x(1924)](LngLatArray.toCartesians(n));let s=Math.max(i.height,i.width);return s/=e,s}function interPolygon(n){const e={_0x2c397e:1091},t={_0xfbd62d:185,_0x441b73:3391,_0x1999ab:295,_0x129ac7:760,_0x400ac0:1354,_0x379863:760,_0x446da4:2434,_0x1ddf76:2870,_0x1f4c35:1354,_0x383e4b:584,_0x234808:1286},x=_0x2397ca,i=n.scene,s=LngLatArray.toCartesians(n[x(e._0x2c397e)],!0),o=getGranularity(s,n.splitNum);return new Promise((r,c)=>{const _={_0x877e60:2027,_0x24d65a:2434};setTimeout(()=>{const l={_0x22f254:295,_0x571389:238},h=_0x3361,d=[],u=new Cesium__namespace[h(185)][h(3123)]({positions:s,vertexFormat:Cesium__namespace.PerInstanceColorAppearance.FLAT_VERTEX_FORMAT,granularity:o}),m=new Cesium__namespace[h(t._0xfbd62d)].createGeometry(u);let f,g,b,y,C,v;for(let L=0;L<m.indices.length;L+=3)f=m.indices[L],g=m[h(t._0x441b73)][L+1],b=m[h(3391)][L+2],y=new Cesium__namespace[h(t._0x1999ab)](m[h(2870)][h(t._0x129ac7)][h(t._0x400ac0)][f*3],m.attributes[h(t._0x129ac7)].values[f*3+1],m.attributes[h(760)][h(1354)][f*3+2]),d.push(y),C=new Cesium__namespace.Cartesian3(m.attributes[h(760)][h(t._0x400ac0)][g*3],m.attributes[h(t._0x129ac7)].values[g*3+1],m[h(2870)][h(t._0x379863)][h(1354)][g*3+2]),d[h(t._0x446da4)](C),v=new Cesium__namespace.Cartesian3(m.attributes.position.values[b*3],m[h(t._0x1ddf76)].position[h(t._0x1f4c35)][b*3+1],m.attributes[h(t._0x379863)].values[b*3+2]),d.push(v);let M=0,w=9999;const H=n.onlyPoint??!1;function D(L,B){const Y=h;let j,J,Q,X;return B?(delete n.callback,j=getHeight(i,L,n),X=Cesium__namespace.Cartographic.fromCartesian(L),J=Cesium__namespace[Y(l._0x22f254)].fromRadians(X.longitude,X[Y(489)],0),Q=Cesium__namespace.Cartesian3.fromRadians(X.longitude,X.latitude,j)):(X=Cesium__namespace.Cartographic.fromCartesian(L),j=X.height,J=Cesium__namespace.Cartesian3[Y(l._0x571389)](X.longitude,X.latitude,0),Q=L),M<j&&(M=j),w>j&&(w=j),{height:j,point:J,pointDM:Q}}function F(L){const B=h,Y=[];let j,J,Q;for(let X=0;X<L.positions[B(_._0x877e60)];X+=3)j=D(L[B(1091)][X],L.noHeight),J=D(L.positions[X+1],L.noHeight),Q=D(L.positions[X+2],L.noHeight),H?(addPointFoyArrOnly(Y,j),addPointFoyArrOnly(Y,J),addPointFoyArrOnly(Y,Q)):Y[B(_._0x24d65a)]({point1:j,point2:J,point3:Q});Cesium__namespace.defined(n.minHeight)&&(w=Math.max(n.minHeight,w),M=Math.max(M,w)),L[B(1097)]=o,L.maxHeight=M,L[B(3892)]=w,L.list=Y,n.callback&&n.callback(L),r(L)}n.exact?computeSurfacePoints({scene:i,positions:d,has3dtiles:n.has3dtiles,exact:n[h(t._0x383e4b)]})[h(t._0x234808)](F):F({positions:d,noHeight:!0,has3dtiles:n.has3dtiles,hasTerrain:n.hasTerrain})},50)})}function addPointFoyArrOnly(n,e){const t=_0x2397ca;let x=!1;const i=e[t(2800)];for(let s=0;s<n.length;s++){const o=n[s].point;if(i.x===o.x&&i.y===o.y&&i.z===o.z){x=!0;break}}!x&&n.push(e)}function getHeightRange(n,e,t){return interPolygon({positions:n,scene:e,...t})}function getTriangleArea$1(n,e,t){const x={_0x3f7f1f:230},i=_0x2397ca,s=Cesium__namespace[i(295)][i(x._0x3f7f1f)](n,e),o=Cesium__namespace.Cartesian3.distance(e,t),r=Cesium__namespace.Cartesian3.distance(t,n),c=(s+o+r)/2;return Math[i(2880)](c*(c-s)*(c-o)*(c-r))}function computeVolume(n){return interPolygon(n).then(e=>updateVolumeByMinHeight(e))}function updateVolumeByMinHeight(n){const e={_0xcafa6e:2800,_0x2ac425:742},t=_0x2397ca,x=n.minHeight;let i=0,s=0;for(let o=0,r=n.list[t(2027)];o<r;o++){const c=n.list[o],_=c.point1,l=c.point2,h=c.point3,d=getTriangleArea$1(_.point,l.point,h[t(e._0xcafa6e)]);c[t(2290)]=d,i+=d;let u=_.height,m=l.height,f=h.height;u<x&&(u=x),m<x&&(m=x),f<x&&(f=x);const g=d*(u-x+m-x+f-x)/3;c[t(2666)]=g,s=s+g}return n[t(e._0x2ac425)]=i,n.totalVolume=s,n}function updateVolume(n,e){const t={_0x1b37cc:2547,_0x540f3e:2290,_0x4a47f5:1718},x=_0x2397ca;if(!n)return;const i=n.minHeight,s=n.totalVolume;if(e<=i)return n.fillVolume=0,n.digVolume=s,n;let o=0,r=0;for(let c=0,_=n.list.length;c<_;c++){const l=n[x(t._0x1b37cc)][c];o+=l[x(t._0x540f3e)]*(e-i);const h=l.point1,d=l[x(t._0x4a47f5)],u=l[x(245)];let m=h.height,f=d.height,g=u.height;m<e&&(m=e),f<e&&(f=e),g<e&&(g=e),r+=l.area*(m-e+f-e+g-e)/3}return n.digVolume=r,n[x(3076)]=o-(s-r),n}function getEllipseOuterPositions(n){const e={_0x4a2f72:1379,_0x397e68:2722,_0x34d719:3088,_0x4cedc8:2027},t=_0x2397ca;let x=n.position;if(!x)return null;x=LngLatPoint.toCartesian(x);const i=n.semiMajorAxis??n.radius,s=n[t(e._0x4a2f72)]??n.radius;if(!i||!s)return[x,x,x];const o=n[t(e._0x397e68)]??0;let r=n.granularity||Cesium__namespace.Math.RADIANS_PER_DEGREE;n[t(e._0x34d719)]&&(r=Math.PI/(16*n.count));const c=Cesium__namespace.EllipseGeometryLibrary.computeEllipsePositions({center:x,semiMajorAxis:i,semiMinorAxis:s,rotation:o,granularity:r},!0,!0),_=c.outerPositions,l=[];for(let h=0,d=_[t(e._0x4cedc8)];h<d;h+=3){const u=new Cesium__namespace.Cartesian3(_[h],_[h+1],_[h+2]);l.push(u)}return l}function formatRectangle(n,e=LngLatPoint.FormatLength){const t={_0x2a6f1f:2999},x=_0x2397ca;let i=formatNum$1(Cesium__namespace.Math.toDegrees(n.west),e),s=formatNum$1(Cesium__namespace.Math.toDegrees(n[x(t._0x2a6f1f)]),e),o=formatNum$1(Cesium__namespace.Math[x(778)](n.north),e),r=formatNum$1(Cesium__namespace.Math[x(778)](n.south),e);if(i>s){const c=i;i=s,s=c}if(r>o){const c=r;r=o,o=c}return{xmin:i,xmax:s,ymin:r,ymax:o}}function getExtentByGeoJSON(n){const e=bbox(n);return e&&e.length===4?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]}:null}function getRectangle(n,e){const t={_0x3db11a:3520},x=_0x2397ca;if(!n)return null;for(let s=n.length-1;s>=0;s--)!Cesium__namespace[x(639)](n[s])&&n.splice(s,1);n=LngLatArray.toCartesians(n);const i=Cesium__namespace[x(t._0x3db11a)].fromCartesianArray(n);return e?formatRectangle(i):i}function getPositionsRectVertex(n,e=0){n=LngLatArray.toCartesians(n);const t=Cesium__namespace.Rectangle.fromCartesianArray(n),x=getMaxHeight(n);return getRectangleOuterPositions({rectangle:t,rotation:e,height:x})}function getRectangleOuterPositions(n){const e={_0x3b6726:295,_0x359a1f:238,_0x25d360:2999,_0x32c4ce:2823,_0x2cb62d:1782,_0x1bf9eb:2312},t=_0x2397ca,x=n.rectangle,i=n[t(2722)]??0,s=n.height??0;if(i===0)return[Cesium__namespace[t(e._0x3b6726)][t(e._0x359a1f)](x.west,x.south,s),Cesium__namespace.Cartesian3.fromRadians(x[t(e._0x25d360)],x[t(2204)],s),Cesium__namespace[t(295)].fromRadians(x.east,x.north,s),Cesium__namespace.Cartesian3.fromRadians(x.west,x.north,s)];const o=n.granularity??Cesium__namespace.Math[t(e._0x32c4ce)],r=new Cesium__namespace.Rectangle,c=new Cesium__namespace.Cartographic,_=Cesium__namespace.RectangleGeometryLibrary.computeOptions(x,o,i,0,r,c),l=_.height,h=_[t(1526)],d=n[t(e._0x2cb62d)]??Cesium__namespace.Ellipsoid[t(2849)];let u=[new Cesium__namespace.Cartesian3,new Cesium__namespace[t(295)],new Cesium__namespace.Cartesian3,new Cesium__namespace.Cartesian3];return Cesium__namespace.RectangleGeometryLibrary.computePosition(_,d,!1,0,0,u[0]),Cesium__namespace.RectangleGeometryLibrary.computePosition(_,d,!1,0,h-1,u[1]),Cesium__namespace.RectangleGeometryLibrary[t(808)](_,d,!1,l-1,h-1,u[2]),Cesium__namespace[t(e._0x1bf9eb)].computePosition(_,d,!1,l-1,0,u[3]),s!==0&&(u=setPositionsHeight(u,s)),u}function getRectPositionsByCenter(n){const e={_0x4c28aa:2006,_0x246002:1046,_0x447951:3870,_0x5fcd02:1772},t=_0x2397ca,x=LngLatPoint.toCartesian(n[t(e._0x4c28aa)]),i=n.width,s=n.height,o=n.rotation??0,r=n.originX??.5,c=n.originY??.5,_=new Cesium__namespace.Matrix4,l=new Cesium__namespace.Quaternion,h=new Cesium__namespace[t(e._0x246002)],d=[Cesium__namespace.Cartesian3.fromElements(-r,-c,0),Cesium__namespace.Cartesian3.fromElements(1-r,-c,0),Cesium__namespace.Cartesian3[t(e._0x447951)](1-r,1-c,0),Cesium__namespace.Cartesian3.fromElements(-r,1-c,0)],u=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(x,Cesium__namespace.Ellipsoid.WGS84,_),m=Cesium__namespace[t(e._0x5fcd02)].fromAxisAngle(Cesium__namespace.Cartesian3.UNIT_Z,o,l),f=Cesium__namespace.Matrix4.fromTranslationQuaternionRotationScale,g=f(Cesium__namespace.Cartesian3.ZERO,m,Cesium__namespace.Cartesian3.fromElements(i,s),h),b=Cesium__namespace.Matrix4.multiply(u,g,g),y=[];return d.forEach(function(C,v){const M=t;typeof y[v]>"u"&&(y[v]=new Cesium__namespace.Cartesian3),Cesium__namespace.Matrix4[M(2933)](b,C,y[v])}),y}function isInPoly(n,e){const t={_0x4aeaa5:2221},x=_0x2397ca,i={type:"Feature",geometry:{type:"Point",coordinates:LngLatPoint.parse(n).toArray()}},s={type:"Polygon",coordinates:[LngLatArray[x(t._0x4aeaa5)](e)]};return booleanPointInPolygon(i,s)}function getBezierCurve(n,e){const t={_0x5b9d6e:2221,_0x30af25:683,_0x30f7a4:1245,_0x315c37:2434},x=_0x2397ca;if(!n||n.length<3)return n;const i=LngLatArray[x(t._0x5b9d6e)](n);e!=null&&e.closure&&i.push(i[0]);const s=i[i[x(2027)]-1][2],o=bezierSpline({type:x(t._0x30af25),geometry:{type:"LineString",coordinates:i}},{resolution:(e==null?void 0:e.resolution)??1e4,sharpness:(e==null?void 0:e.sharpness)??.85}),r=lonlats2cartesians(o[x(3910)][x(t._0x30f7a4)],s);return e!=null&&e.closure&&r[x(t._0x315c37)](r[0]),r}function interPolyline(n){const e={_0x25a2fc:713,_0x4a2dc8:2434},t=_0x2397ca,x=LngLatArray.toCartesians(n.positions),i=n[t(3399)];let s=getGranularity(x,n.splitNum||(n[t(e._0x25a2fc)]?10:100));s<=0&&(s=null);const o=Cesium__namespace.PolylinePipeline.generateArc({positions:x,height:n.height,minDistance:n[t(1741)],granularity:s}),r=[];for(let c=0;c<o.length;c+=3){let _=Cesium__namespace.Cartesian3.unpack(o,c);if(i&&(n.surfaceHeight??!0)){delete n.callback;const l=getHeight(i,_,n),h=Cesium__namespace.Cartographic.fromCartesian(_);_=Cesium__namespace.Cartesian3.fromRadians(h.longitude,h.latitude,l)}r[t(e._0x4a2dc8)](_)}return r}function interLine(n,e={}){const t={_0x4f950c:1899,_0x5ca3fc:2145,_0x1b9dca:295,_0x4d4e5f:238},x=_0x2397ca;if(!n||n.length<2)return n;n=LngLatArray[x(1169)](n);let i;if(e.splitNum&&!Cesium__namespace.defined(e[x(1741)])&&(i=getGranularity(n,e.splitNum),i<=0&&(i=null)),e.minDistance==="auto"){let o=Number[x(642)];for(let r=1,c=n.length;r<c;r++)o=Math.min(o,Cesium__namespace.Cartesian3.distance(n[r-1],n[r]));e.minDistance=o}const s=[n[0]];for(let o=1,r=n.length;o<r;o++){const c=n[o-1],_=n[o],l=Cesium__namespace[x(3410)].generateArc({positions:[c,_],minDistance:e.minDistance,granularity:i}),h=Cesium__namespace[x(t._0x4f950c)].fromCartesian(c).height,d=Cesium__namespace.Cartographic[x(t._0x5ca3fc)](_)[x(3872)],u=(d-h)/l[x(2027)];for(let m=3,f=l.length;m<f;m+=3){let g=Cesium__namespace.Cartesian3[x(1459)](l,m);const b=Cesium__namespace[x(1899)].fromCartesian(g),y=Number((h+u*m)[x(3529)](1));g=Cesium__namespace[x(t._0x1b9dca)][x(t._0x4d4e5f)](b.longitude,b.latitude,y),s.push(g)}}return s}function computeSurfaceLine(n){const e=_0x2397ca,t=interPolyline({...n,surfaceHeight:!1}),x=[];for(let i=0,s=t.length;i<s;++i)x[e(2434)](t[i].clone());return n[e(1091)]=x,new SurfacePoints(n).start()}function computeSurfacePoints(n){const e=_0x2397ca;return new SurfacePoints(n)[e(546)]()}function computeStepSurfaceLine(n){const e={_0x1a2fb3:1091,_0x48360c:1568,_0x116e33:1630},t=_0x2397ca,x=n[t(e._0x1a2fb3)],i=[],s={};for(const o in n)o==="positions"||o==="callback"||o===t(e._0x48360c)||o===t(e._0x116e33)||(s[o]=n[o]);return new Promise((o,r)=>{setTimeout(()=>{const c={_0x3d6c1b:1091};let _=0;const l=x.length-1;function h(){const d={_0xadf9c5:1630},u=_0x3361;if(_>=l){n.callback&&n.callback(i),n.end&&n.end(i),o(i);return}s[u(c._0x3d6c1b)]=interPolyline({...n,positions:[x[_],x[_+1]],surfaceHeight:!1}),new SurfacePoints(s).start()[u(1286)](m=>{const f=u;n[f(1630)]&&n[f(d._0xadf9c5)](m.positions,m.noHeight,_),i.push(m.positions),_++,h()})}h()},50)})}function getLinkedPointList(n,e,t,x){const i={_0x18b36e:799,_0x4a5acb:2880,_0x3240f4:2212,_0x319e02:295,_0x5b87d3:565},s=_0x2397ca,o=[];n=LngLatPoint.toCartesian(n),e=LngLatPoint[s(i._0x18b36e)](e);const r=Cesium__namespace[s(1899)].fromCartesian(n),c=Cesium__namespace.Cartographic.fromCartesian(e),_=r.longitude*180/Math.PI,l=r[s(489)]*180/Math.PI,h=c.longitude*180/Math.PI,d=c.latitude*180/Math.PI,u=Math[s(i._0x4a5acb)]((_-h)*(_-h)+(l-d)*(l-d)),m=u*t,f=Cesium__namespace.Cartesian3.clone(n),g=Cesium__namespace.Cartesian3[s(3069)](e),b=Cesium__namespace.Cartesian3.distance(f,Cesium__namespace[s(295)].ZERO),y=Cesium__namespace.Cartesian3.distance(g,Cesium__namespace.Cartesian3[s(737)]);if(Cesium__namespace.Cartesian3.normalize(f,f),Cesium__namespace.Cartesian3.normalize(g,g),Cesium__namespace.Cartesian3.distance(f,g)===0)return o;const C=Cesium__namespace.Cartesian3.angleBetween(f,g);o.push(n);for(let v=1;v<x-1;v++){const M=v*1/(x-1),w=1-M,H=Math[s(i._0x3240f4)](w*C)/Math[s(2212)](C),D=Math.sin(M*C)/Math.sin(C),F=Cesium__namespace.Cartesian3.multiplyByScalar(f,H,new Cesium__namespace[s(i._0x319e02)]),L=Cesium__namespace.Cartesian3.multiplyByScalar(g,D,new Cesium__namespace.Cartesian3);let B=Cesium__namespace.Cartesian3[s(i._0x5b87d3)](F,L,new Cesium__namespace.Cartesian3);const Y=M*Math.PI,j=b*w+y*M+Math.sin(Y)*m;B=Cesium__namespace.Cartesian3.multiplyByScalar(B,j,B),o.push(B)}return o.push(e),o}function getOffsetLine(n,e){const t={_0x264b6d:3134},x=_0x2397ca;n=LngLatArray.toCartesians(n);const i=[];for(let s=1;s<n.length;s++){const o=n[s-1],r=n[s],c=Cesium__namespace.Cartesian3.subtract(o,r,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3[x(t._0x264b6d)](o,c,new Cesium__namespace.Cartesian3),l=computedOffsetData(o,_,e*1e3),h=computedOffsetData(r,_,e*1e3);s===1&&i.push(l),i.push(h)}return i}function computedOffsetData(n,e,t){const x={_0x173b72:607},i=_0x2397ca,s=new Cesium__namespace.Ray(n,e);return Cesium__namespace.Ray[i(x._0x173b72)](s,t,new Cesium__namespace.Cartesian3)}function sliceByMaxDistance(n,e,t={}){const x={_0x2cc947:1169,_0x2c6870:230,_0x280139:2242,_0x3b720b:2800},i=_0x2397ca;if(!n||n.length<2)return t.point?n.length===1?n[0]:void 0:n;n=LngLatArray[i(x._0x2cc947)](n);for(let s=n.length-1;s>=1;s--){const o=n[s],r=n[s-1],c=Cesium__namespace.Cartesian3[i(x._0x2c6870)](o,r);if(e-=c,e===0)return t.point?o:n[i(x._0x280139)](s);if(e<0){e+=c;const _=getOnLinePointByLen(o,r,e);return t[i(x._0x3b720b)]?_:[_].concat(n[i(2242)](s))}}return t.point?n[n.length-1]:n}function convex(n){const e={_0x380e2d:1125},t=_0x2397ca;if(n.length>0){const i=[];for(let o=0;o<n.length;o++)i.push({type:"Feature",geometry:{type:t(e._0x380e2d),coordinates:n[o]}});const s=convex$1({type:"FeatureCollection",features:i});if(s){var x;const o=s==null||(x=s.geometry)===null||x===void 0?void 0:x.coordinates;o&&o.length>0&&(n=o[0])}}return n}function getGridPoints(n,e,t){const x={_0x43676b:295,_0x5ab654:2880},i={_0x615623:1245},s=_0x2397ca,o=Cesium__namespace.Cartesian3[s(230)](Cesium__namespace[s(x._0x43676b)][s(402)](n[0],n[1]),Cesium__namespace.Cartesian3.fromDegrees(n[2],n[3]))/(Math[s(x._0x5ab654)](2)*1e3),r=o/Math[s(x._0x5ab654)](e),c=pointGrid(n,r,{units:"kilometers"}),_=[];return c.features.forEach(l=>{const h=s,d=l.geometry[h(i._0x615623)];_[h(2434)](new LngLatPoint(d[0],d[1],t))}),{points:_,radius:Math.floor(r*1e3/2)}}function getGridPointsByPoly(n,e,t){const x={_0x224685:3173,_0x2de1c4:1184},i=_0x2397ca;if(n.length<3)return;const s=LngLatArray.toCartographics(n),o=Cesium__namespace.defined(t),r=s[0];let c=r.longitude,_=r.longitude,l=r.latitude,h=r.latitude,d=o?t:r.height;const u=s.map(L=>{const B=_0x3361;return c=Math[B(x._0x224685)](c,L.longitude),l=Math.max(l,L[B(x._0x2de1c4)]),_=Math.min(_,L[B(489)]),h=Math.max(h,L.latitude),!o&&(d=Math.max(d,L.height)),L}),m=[],f=l-c,g=h-_,b=e/distanceCoor([c,_],[l,_]),y=e/distanceCoor([c,_],[c,h]),C=b*f,v=y*g,M=Math.floor(f/C),w=Math.floor(g/v),H=(f-M*C)/2,D=(g-w*v)/2;let F=c+H;for(;F<=l;){let L=_+D;for(;L<=h;){if(isInside([F,L],u)){const B=Cesium__namespace.Math[i(778)](F),Y=Cesium__namespace[i(3876)].toDegrees(L);m.push(new LngLatPoint(B,Y,d))}L+=v}F+=C}return m}function distanceCoor(n,e){const t={_0x1f4712:3171,_0x397043:2880},x=_0x2397ca,i=e[1]-n[1],s=e[0]-n[0],o=n[1],r=e[1],c=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(o)*Math[x(1314)](r);return 2*Math[x(t._0x1f4712)](Math[x(t._0x397043)](c),Math.sqrt(1-c))*63710088e-1}function isInside(n,e){const t={_0x549b67:1184,_0x364618:1184,_0x1c96a5:489,_0x43331a:489,_0x1d5256:489},x=_0x2397ca;let i=!1;const s=e.length,o=n[0],r=n[1];let c=e[0];for(let _=0;_<s;_++){let l=_+1;l=l===s?0:l;const h=e[l];if(c[x(t._0x549b67)]===o&&c.latitude===r||h[x(t._0x364618)]===o&&h.latitude===r)return!0;if(c[x(t._0x1c96a5)]<r&&h[x(t._0x43331a)]>=r||c[x(489)]>=r&&h.latitude<r){const d=c.longitude+(r-c.latitude)*(h.longitude-c.longitude)/(h.latitude-c[x(t._0x1d5256)]);if(d===o)return!0;d>o&&(i=!i)}c=h}return i}function getHeightRangeByDepth(n,e,t){return new Promise((x,i)=>{setTimeout(()=>{const s=interPolygonByDepth$1({...t,positions:n,scene:e});setTimeout(()=>{x(s)},10)},10)})}function interPolygonByDepth(n){return new Promise((e,t)=>{setTimeout(()=>{const x=interPolygonByDepth$1(n);setTimeout(()=>{e(x)},10)},10)})}function interPolylineByDepth(n){return new Promise((e,t)=>{setTimeout(()=>{const x=interPolylineByDepth$1(n);setTimeout(()=>{e(x)},10)},10)})}var PolyUtil={__proto__:null,centerOfMass,buffer,bufferPoints,getGranularity,interPolygon,getHeightRange,computeVolume,updateVolumeByMinHeight,updateVolume,getEllipseOuterPositions,formatRectangle,getExtentByGeoJSON,getRectangle,getPositionsRectVertex,getRectangleOuterPositions,getRectPositionsByCenter,isInPoly,getBezierCurve,interPolyline,interLine,computeSurfaceLine,computeSurfacePoints,computeStepSurfaceLine,getLinkedPointList,getOffsetLine,sliceByMaxDistance,convex,getGridPoints,getGridPointsByPoly,getHeightRangeByDepth,interPolygonByDepth,interPolylineByDepth};function getDistance(n,e){const t=_0x2397ca,x=n.length;if(!Cesium__namespace.defined(n)||x<2)return 0;n=LngLatArray.toCartesians(n);let i=0;for(let s=1;s<x;s++)i+=Cesium__namespace.Cartesian3[t(230)](n[s-1],n[s]);return e&&(i+=Cesium__namespace.Cartesian3.distance(n[0],n[x-1])),i}function getSurfaceDistance(n){const e={_0x2463fe:1899,_0x400a91:1274},t=_0x2397ca;if(!Cesium__namespace.defined(n)||n.length<2)return 0;n=LngLatArray.toCartesians(n);let x=0;for(let i=1,s=n.length;i<s;i++){const o=Cesium__namespace[t(e._0x2463fe)][t(2145)](n[i-1]),r=Cesium__namespace.Cartographic.fromCartesian(n[i]),c=new Cesium__namespace.EllipsoidGeodesic;c.setEndPoints(o,r);let _=c.surfaceDistance;_=Math.sqrt(Math.pow(_,2)+Math[t(e._0x400a91)](r.height-o.height,2)),x+=_}return x}function getClampDistance(n,e){const t={_0x4a2ce5:584};let x=0;const i=[];return new Promise((s,o)=>{const r={_0x32e703:2459},c={_0x5a0280:2126};setTimeout(()=>{const _=_0x3361;computeStepSurfaceLine({scene:e.scene,positions:n,splitNum:e.splitNum,has3dtiles:e[_(713)],exact:e[_(t._0x4a2ce5)]??!0,endItem:function(l,h,d){const u=_;let m=getSurfaceDistance(l);h&&e.disTerrainScale&&(m=m*e[u(c._0x5a0280)]),x+=m,i.push(m),e[u(1630)]&&e.endItem({index:d,positions:l,distance:m,arrDistance:i,all_distance:x})},end:function(l){const h=_;e[h(2459)]&&e[h(r._0x32e703)](x),e.end&&e[h(1568)](x),s({distance:x,arrDistance:i,arrPositions:l})}})},50)})}function getArea(n){const e={_0x2ed8a2:2027,_0xb5f73a:1242,_0x2ecc3d:295},t=_0x2397ca;if(!n||!Array.isArray(n)||n[t(e._0x2ed8a2)]<3)return 0;n=LngLatArray[t(1169)](n);const x=Cesium__namespace.CoplanarPolygonGeometry.createGeometry(Cesium__namespace[t(e._0xb5f73a)][t(3123)]({positions:n,vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY}));let i=0;if(!x)return i;const s=x.attributes.position.values,o=x.indices;for(let r=0;r<o.length;r+=3){const c=Cesium__namespace.Cartesian3[t(1459)](s,o[r]*3,new Cesium__namespace.Cartesian3),_=Cesium__namespace[t(e._0x2ecc3d)].unpack(s,o[r+1]*3,new Cesium__namespace.Cartesian3),l=Cesium__namespace[t(295)][t(1459)](s,o[r+2]*3,new Cesium__namespace.Cartesian3);i+=getTriangleArea(c,_,l)}return i}function getSurfaceArea(n){const e={_0x48ecf9:2434},t=_0x2397ca;if(!n||!Array.isArray(n)||n[t(2027)]<3)return 0;const x=LngLatArray.toArray(n);return x.length>0&&x[t(e._0x48ecf9)](x[0]),area({type:"Feature",geometry:{type:"Polygon",coordinates:[x]}})}function getTriangleArea(n,e,t){const x={_0x462275:295,_0x4d8bf9:295},i=_0x2397ca,s=Cesium__namespace[i(295)].subtract(n,e,new Cesium__namespace[i(x._0x462275)]),o=Cesium__namespace.Cartesian3[i(2527)](t,e,new Cesium__namespace[i(x._0x4d8bf9)]),r=Cesium__namespace.Cartesian3.cross(s,o,s);return Cesium__namespace.Cartesian3[i(3393)](r)*.5}function getClampArea(n,e){const t={_0x4b1c70:2459},x=_0x2397ca;return interPolygon({positions:n,exact:!0,...e})[x(1286)](i=>{const s=x;let o=0;for(let r=0,c=i.list.length;r<c;r++){const _=i.list[r],l=_.point1,h=_.point2,d=_.point3;o+=getTriangleArea(l.pointDM,h[s(494)],d[s(494)])}return i.area=o,e.callback&&e[s(t._0x4b1c70)](o,i),i})}function getAngle(n,e,t){const x={_0x8c6a1d:3596,_0x5001ef:295,_0x33b4d3:3695,_0x5884a8:3876},i=_0x2397ca;let s=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(e);s=Cesium__namespace.Matrix4.getMatrix3(s,new Cesium__namespace.Matrix3);const o=Cesium__namespace[i(x._0x8c6a1d)].getColumn(s,0,new Cesium__namespace[i(x._0x5001ef)]),r=Cesium__namespace[i(x._0x8c6a1d)].getColumn(s,1,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix3[i(x._0x33b4d3)](s,2,new Cesium__namespace.Cartesian3);let _=Cesium__namespace.Cartesian3.subtract(n,e,new Cesium__namespace[i(295)]);if(isNaN(_.x)||isNaN(_.y)||isNaN(_.z)||_[i(1043)](Cesium__namespace.Cartesian3.ZERO))return 0;_=Cesium__namespace.Cartesian3.cross(_,c,_),_=Cesium__namespace.Cartesian3[i(3134)](c,_,_),_=Cesium__namespace.Cartesian3.normalize(_,_);let l=Cesium__namespace[i(295)][i(466)](o,_);Cesium__namespace.Cartesian3.angleBetween(r,_)>Math.PI*.5&&(l=2*Math.PI-l);let d=360-Cesium__namespace[i(x._0x5884a8)].toDegrees(l)-180;return t&&(d+=90),d<0?d=d+360:d>360&&(d=d-360),d}function formatDistance(n,e={}){const t={_0x439f52:1908,_0x2a38c2:1908,_0x57ddd8:2172,_0x5390d5:3529,_0x4fb915:1954,_0x196d24:3529,_0x4af230:2172,_0x1f1de2:1954},x=_0x2397ca;if(n==null||(n=Number(n),isNaN(n)||n===0))return"";isString(e)&&(e={unit:e}),(e[x(t._0x439f52)]==null||e.unit==="auto")&&(n<1e3?e.unit="m":e[x(t._0x2a38c2)]="km"),e.decimal=e.decimal??2;let i="";switch(e[x(t._0x439f52)]){case"km":i=(n*.001).toFixed(e[x(t._0x57ddd8)])+getLangText("_公里",e.lang);break;case"wm":i=(n*1e-4)[x(t._0x5390d5)](e.decimal)+getLangText(x(2241),e[x(t._0x4fb915)]);break;case"mile":i=(n*54e-5)[x(t._0x5390d5)](e[x(2172)])+getLangText(x(1748),e.lang);break;case"zhang":i=(n*.3)[x(t._0x196d24)](e[x(t._0x4af230)])+getLangText("_丈",e[x(t._0x1f1de2)]);break;case"m":default:i=n.toFixed(e.decimal)+getLangText("_米",e.lang);break}return i}function formatArea(n,e={}){const t={_0x48aaa9:2925,_0x37de81:1908,_0x29c227:1908,_0x5ce7b7:1954,_0x3bc343:2172,_0x4020e:2172},x=_0x2397ca;if(n==null||(n=Number(n),isNaN(n)||n===0))return"";isString(e)&&(e={unit:e}),(e.unit==null||e.unit===x(t._0x48aaa9))&&(n<1e6?e[x(t._0x37de81)]="m":e[x(t._0x29c227)]="km"),e.decimal=e.decimal??2;let i="";switch(e.unit){case"km":i=(n/1e6).toFixed(e.decimal)+getLangText("_平方公里",e.lang);break;case"mu":i=(n*.0015).toFixed(e.decimal)+getLangText("_亩",e[x(t._0x5ce7b7)]);break;case"ha":i=(n*1e-4).toFixed(e[x(t._0x3bc343)])+getLangText("_公顷",e.lang);break;case"m":default:i=n.toFixed(e[x(t._0x4020e)])+getLangText("_平方米",e.lang);break}return i}function formatVolume(n,e={}){const t={_0x52698d:1954,_0x1b2659:2172},x=_0x2397ca;return n==null||(n=Number(n),isNaN(n)||n===0)?"":(e.decimal=e.decimal??2,e[x(t._0x52698d)]===LangType.EN?n.toFixed(e[x(2172)])+getLangText("_立方米",e.lang):n<1e4?n.toFixed(e[x(t._0x1b2659)])+getLangText("_立方米",e.lang):(n/1e4).toFixed(e.decimal)+getLangText(x(995),e.lang))}var MeasureUtil={__proto__:null,getDistance,getSurfaceDistance,getClampDistance,getArea,getSurfaceArea,getTriangleArea,getClampArea,getAngle,formatDistance,formatArea,formatVolume};function register$3(n,e){const t={_0xa9f435:1504,_0x1dee6d:2206,_0xa57c7e:2726},x=_0x2397ca;Cesium__namespace[x(2206)][x(t._0xa9f435)].getMaterial(n)&&logError$1(x(3512)+n+"类型已存在",e),MaterialTypes[n]=n,Cesium__namespace[x(t._0x1dee6d)][n+"Type"]=n,e[x(t._0xa57c7e)]&&(e.fabric[x(968)]=n),Cesium__namespace.Material._materialCache.addMaterial(n,e)}const OptsConverClass={};function registerOptsConver(n,e){const t={_0x372e43:376},x=_0x2397ca;OptsConverClass[n]&&logError$1("MaterialUtil registerOptsConver: "+n+x(t._0x372e43),e),OptsConverClass[n]=e}const MaterialClass={},MaterialTypes={};function registerClass(n,e){const t={_0x2e1c71:376},x=_0x2397ca;MaterialTypes[n]&&logError$1("MaterialUtil registerClass: "+n+x(t._0x2e1c71),e),MaterialClass[n]=e,MaterialTypes[n]=n}const MaterialPropertyClass={};function registerPropertyClass(n,e){MaterialPropertyClass[n]&&logError$1("MaterialUtil registerPropertyClass: "+n+"属性类型已存在",e),MaterialPropertyClass[n]=e}function createMaterialProperty(n,e){const t={_0xb94de7:2868},x=_0x2397ca,i=MaterialPropertyClass[n];if(i){const s=OptsConverClass[n]||OptsConverClass.default;s&&(e[x(2248)]=n,e=s[x(t._0xb94de7)](e,{},!0));const o=new i(e);return o._mars_type=n,o.options=e,o}else logWarn(x(2616),n)}function createMaterial(n,e){const t={_0x5c89d:3044,_0x5bf7cc:2794},x=_0x2397ca;if(!n){logError$1("createMaterial：请指定mars3d.MaterialType类型");return}const i=OptsConverClass[n]||OptsConverClass[x(1937)];i&&(e.materialType=n,e=i.toCesiumVal(e));let s;const o=MaterialClass[n];return o?s=new o(e):s=Cesium__namespace.Material.fromType(n,e),s[x(t._0x5c89d)]=e,s[x(t._0x5bf7cc)]=n,s}function hasMaterial(n,e){return e?!!MaterialPropertyClass[n]:!!MaterialTypes[n]}function toJSON(n,e={}){const t={_0x500880:968,_0x24686e:2248},x=_0x2397ca;var i;let s;if(n[x(2794)]?s=n._mars_type:n!=null&&(i=n._template)!==null&&i!==void 0&&i[x(968)]?s=n._template[x(t._0x500880)]:n!=null&&n.getType&&(s=n.getType()),!s)if(n instanceof Cesium__namespace.Color)s="Color";else{if(n instanceof HTMLVideoElement)return;logWarn(x(3961),n)}const o=OptsConverClass[s]||OptsConverClass.default;return o&&(e[x(t._0x24686e)]=s,e.materialOptions=o.toJSON(n)),e}function toJSONByType(n,e){const t={_0x263ca3:1180},x=_0x2397ca,i=OptsConverClass[n]||OptsConverClass.default;return i?i[x(t._0x263ca3)](e):e}function addTextureUniform(n){const e={_0x1b4db8:3474},t={_0x3d74cc:3824,_0x1f5071:2554},x=_0x2397ca,{context:i,material:s,uniformName:o,image:r}=n,c=n.wrapS||Cesium__namespace.TextureWrap[x(226)],_=n[x(e._0x1b4db8)]||Cesium__namespace.TextureWrap.REPEAT,l=n.minificationFilter||Cesium__namespace.TextureMinificationFilter.LINEAR,h=n[x(510)]||Cesium__namespace.TextureMagnificationFilter.LINEAR,d=new Image;d.src=r,d.addEventListener("load",()=>{const u=x,m=new Cesium__namespace[u(2699)]({context:i,source:d,sampler:new Cesium__namespace.Sampler({wrapS:c,wrapT:_,minificationFilter:l,magnificationFilter:h})});m.type="sampler2D",isPowerOfTwo(d.width)&&isPowerOfTwo(d.height)&&m[u(t._0x3d74cc)](Cesium__namespace.MipmapHint.NICEST),s[u(t._0x1f5071)][o]=m})}function isPowerOfTwo(n){return(n&n-1)===0&&n!==0}var MaterialUtil={__proto__:null,register:register$3,registerOptsConver,registerClass,registerPropertyClass,createMaterialProperty,createMaterial,hasMaterial,toJSON,toJSONByType,addTextureUniform};const PointType={Control:1,MoveAll:2,AddMidPoint:3,MoveHeight:4,EditAttr:5,EditRotation:6},PointColor={Control:_0x2397ca(2797),MoveAll:_0x2397ca(3717),MoveHeight:_0x2397ca(178),EditAttr:"rgba(245,49,232,0.99)",AddMidPoint:"rgba(4,194,201,0.3)"};let defaultEditStyle={pixelSize:12,outline:!0,outlineColor:"rgba(255,255,255,0.5)",outlineWidth:2,scaleByDistance:new Cesium__namespace.NearFarScalar(1e3,1,1e6,.5),disableDepthTestDistance:Number[_0x2397ca(3047)]};function setPointStyle(n){defaultEditStyle=merge(defaultEditStyle,n)}function getEditPointStyle(n){const e={_0x4f2229:209,_0x3606ac:1363},t=_0x2397ca,x={...defaultEditStyle};switch(n){case PointType[t(1478)]:x.color=PointColor[t(1478)],x[t(e._0x4f2229)]="rgba(255,255,255,0.4)";break;case PointType[t(2249)]:x.color=PointColor.MoveAll;break;case PointType.MoveHeight:x.color=PointColor.MoveHeight;break;case PointType.EditAttr:x[t(1089)]=PointColor.EditAttr;break;case PointType.Control:default:x.color=PointColor[t(e._0x3606ac)];break}return x}var DrawUtil={__proto__:null,PointType,PointColor,setPointStyle,getEditPointStyle};const TerrainType={NONE:"none",XYZ:_0x2397ca(761),ARCGIS:_0x2397ca(2255),ION:"ion",GEE:_0x2397ca(3034),VR:"vr"};class GCJMercatorTilingScheme extends Cesium__namespace[_0x2397ca(2058)]{constructor(e){const t={_0x401283:2394,_0x33481d:579,_0x3497c2:579},x={_0x5b4cc2:3876},i={_0x4d14ca:3876,_0x88b131:1899},s=_0x2397ca;super(e);const o=e.mapChinaCRS,r=e[s(t._0x401283)],c=getTransFun(o,r),_=getTransFun(r,o);if(c){const l=new Cesium__namespace.WebMercatorProjection;this[s(t._0x33481d)].project=function(h,d){const u=s;return d=c([Cesium__namespace.Math[u(778)](h[u(1184)]),Cesium__namespace[u(i._0x4d14ca)].toDegrees(h.latitude)]),d=l.project(new Cesium__namespace[u(i._0x88b131)](Cesium__namespace.Math.toRadians(d[0]),Cesium__namespace.Math.toRadians(d[1]))),new Cesium__namespace.Cartesian2(d.x,d.y)},this[s(t._0x3497c2)].unproject=function(h,d){const u=s,m=l.unproject(h);return d=_([Cesium__namespace.Math.toDegrees(m.longitude),Cesium__namespace.Math.toDegrees(m.latitude)]),new Cesium__namespace.Cartographic(Cesium__namespace[u(x._0x5b4cc2)].toRadians(d[0]),Cesium__namespace.Math.toRadians(d[1]))}}}}const LayerClass={};function register$2(n,e){LayerClass[n]&&logError$1("register: "+n+"类型已存在",e),LayerType[n]=n,LayerClass[n]=e,e.type=n,e.prototype._type=n}function getClass$2(n){return LayerClass[n]}function create$2(n,e){const t=_0x2397ca,x=getClass$2(n[t(968)]);if(x)return e&&(n[t(1248)]=e),new x(n);logWarn("配置中的图层未处理",n)}function converOptions(n){const e={_0x5c4f72:323,_0x4f5d87:3137,_0x5a3a80:1416,_0x4bc259:2235,_0xf52094:3882,_0x2f068c:2394,_0x14ea17:2849,_0x13b1a5:639,_0x3d9c11:3520,_0x49541b:3976,_0x3c008e:1358,_0x2101b9:402,_0x1de372:3438,_0x50136b:2287,_0x1d434b:2218,_0xf74342:2077,_0x25f6c9:2077,_0x2732ca:3092},t=_0x2397ca,x={};for(const i in n){let s=n[i];if(s!=null)switch(i){case"crs":s=(s+"")[t(321)](),s===CRS.EPSG4326||s==="4326"||s===t(2623)?(x.crs=CRS[t(2623)],x.tilingScheme=new Cesium__namespace[t(2309)]({numberOfLevelZeroTilesX:n[t(e._0x5c4f72)]||2,numberOfLevelZeroTilesY:n[t(3882)]||1})):s===CRS[t(1416)]||s==="4490"||s==="EPSG4490"?(x[t(e._0x4f5d87)]=CRS[t(e._0x5a3a80)],x.tilingScheme=new Cesium__namespace.GeographicTilingScheme({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||2,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1})):(x.crs=CRS[t(e._0x4bc259)],x.tilingScheme=new Cesium__namespace.WebMercatorTilingScheme({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:n[t(e._0xf52094)]||1}));break;case t(e._0x2f068c):{n.mapChinaCRS!==n[t(2394)]&&(x.tilingScheme=new GCJMercatorTilingScheme({mapChinaCRS:n.mapChinaCRS||ChinaCRS[t(e._0x14ea17)],chinaCRS:n.chinaCRS,numberOfLevelZeroTilesX:n[t(323)]||1,numberOfLevelZeroTilesY:n[t(3882)]||1}));break}case t(1358):Cesium__namespace.defined(s)&&Cesium__namespace.defined(s.xmin)&&Cesium__namespace.defined(s.xmax)&&Cesium__namespace.defined(s.ymin)&&Cesium__namespace[t(e._0x13b1a5)](s.ymax)?x.rectangle=Cesium__namespace[t(e._0x3d9c11)].fromDegrees(s.xmin,s.ymin,s[t(e._0x49541b)],s.ymax):s instanceof Cesium__namespace[t(3520)]&&(x[t(e._0x3c008e)]=s);break;case"bbox":x.rectangle=Cesium__namespace.Rectangle[t(e._0x2101b9)](s[0],s[1],s[2],s[3]);break;default:x[i]=s;break}}return x.crs===CRS.EPSG4490&&x.url&&(x.url=x.url.replace(/\{z\}/gm,"{z4490}"),x.url=x.url.replace(/\{arc_z\}/gm,t(e._0x1de372)),x.url=x.url.replace(/\{arc_Z\}/gm,t(e._0x50136b))),n.tms&&(x.url=x.url.replace(/\{y\}/gm,t(320))),Cesium__namespace[t(639)](n[t(3100)])&&Cesium__namespace.defined(n.minimumLevel)&&n.minimumTerrainLevel<n.minimumLevel&&(x.minimumTerrainLevel=n[t(e._0x1d434b)]),Cesium__namespace.defined(n[t(e._0xf74342)])&&Cesium__namespace.defined(n.maximumLevel)&&n[t(e._0x25f6c9)]>n.maximumLevel&&(x[t(2077)]=n[t(e._0x2732ca)]),!Cesium__namespace[t(e._0x13b1a5)](n.minimumTerrainLevel)&&Cesium__namespace.defined(n.minimumLevel)&&n.minimumLevel>0&&(x.minimumTerrainLevel=n.minimumLevel),x.url&&(n[t(696)]||n.templateValues||n.headers||n.proxy)&&(x.url=getUrlResource(x)),x}const ImageryProviderFun={};function registerImageryProvider(n,e){ImageryProviderFun[n]&&logError$1("registerImageryProvider: "+n+"类型已存在"),ImageryProviderFun[n]=e}function getProviderClass(n){return ImageryProviderFun[n]}async function createImageryProvider$k(n){const e={_0x324b41:3864,_0x3dbc1a:2847,_0x2a3e8a:3787},t=_0x2397ca,x=getProviderClass(n.type);if(x){const i=await x(n);return!i.options&&(i.options=n),Cesium__namespace.defined(n[t(e._0x324b41)])&&(i[t(3864)]=n.invertColor),Cesium__namespace.defined(n[t(2847)])&&(i.filterColor=getCesiumColor(n[t(e._0x3dbc1a)])),i}else logWarn(t(e._0x2a3e8a),n)}function getImageryProviderViewModels(n,e){const t={_0x480a1e:2027},x=_0x2397ca,i=[];let s=-1;for(let o=0;o<n[x(t._0x480a1e)];o++){const r=n[o];r.type===x(2541)&&r.layers==null||(e&&(r.templateValues=e),r.show?s=i.length:delete r[x(3482)],i.push(createProviderViewModel(r,o)))}return{imageryProviderViewModels:i,selectedIndex:s}}function createProviderViewModel(_0x3bbce8,_0x199938){const _0x1fe33d={_0x54f2aa:3495,_0x3a427f:2701,_0x4e0e9b:2186},_0x2ee32d=_0x2397ca;window._temp_mars3d_createImageryProvider=createImageryProvider$k;const _0x1ddef9="window._temp_mars3d_basemaps"+_0x199938;return new Function(_0x2ee32d(_0x1fe33d._0x54f2aa)+_0x1ddef9+_0x2ee32d(580)+JSON.stringify(getAttrVal(_0x3bbce8,{onlySimpleType:!0}))+_0x2ee32d(_0x1fe33d._0x3a427f))(),new Cesium__namespace.ProviderViewModel({name:_0x3bbce8.name||"",tooltip:_0x3bbce8.name||"",iconUrl:_0x3bbce8.icon||"",category:_0x3bbce8[_0x2ee32d(_0x1fe33d._0x4e0e9b)]||"",creationFunction:eval(_0x1ddef9),marsOptions:{layerId:_0x3bbce8.id}})}const _ellipsoid=new Cesium__namespace[_0x2397ca(1906)]({ellipsoid:Cesium__namespace.Ellipsoid[_0x2397ca(2849)]});function getNoTerrainProvider(){return _ellipsoid}const TerrainProviderClass={};function registerTerrainProvider(n,e){TerrainProviderClass[n]&&logError$1("registerTerrainProvider: "+n+"类型已存在"),TerrainProviderClass[n]=e}function getTerrainProviderClass(n){return TerrainProviderClass[n]}async function createTerrainProvider(n){const e={_0x2d0cb9:3436,_0x15e74b:2746,_0x2e69a8:3704,_0x5814f7:1667,_0x37fb97:2016,_0x4935a0:968},t=_0x2397ca;n=n||{type:TerrainType[t(2746)]},n.type=n.type||TerrainType[t(1260)],n.requestVertexNormals=n.requestVertexNormals??!0;let x;switch(n.type){case TerrainType.XYZ:case t(e._0x2d0cb9):{replaceOnlineUrlDomain(n),x=await Cesium__namespace[t(477)].fromUrl(getUrlResource(n),n);break}case TerrainType[t(3298)]:case"ellipsoid":x=_ellipsoid;break;case TerrainType[t(e._0x15e74b)]:x=await Cesium__namespace[t(477)].fromIonAssetId(n.assetId??1,{requestWaterMask:n[t(e._0x2e69a8)],requestVertexNormals:n[t(e._0x5814f7)]});break;case TerrainType.GEE:case"google":{const i=await Cesium__namespace.GoogleEarthEnterpriseMetadata.fromUrl(getUrlResource(n),n);x=await Cesium__namespace.GoogleEarthEnterpriseTerrainProvider.fromMetadata(i,n)}break;case TerrainType.ARCGIS:x=await Cesium__namespace.ArcGISTiledElevationTerrainProvider.fromUrl(getUrlResource(n),n);break;case TerrainType.VR:x=await Cesium__namespace.VRTheWorldTerrainProvider[t(e._0x37fb97)](getUrlResource(n),n);break;default:{const i=getTerrainProviderClass(n[t(e._0x4935a0)]);i&&(i[t(e._0x37fb97)]?x=await i.fromUrl(getUrlResource(n),n):x=new i(n))}break}return x}function getTerrainProviderViewModels(n){const e={_0x2f3fb6:1470,_0x5f1111:1862,_0x114cc7:1672,_0x280721:2981},t=_0x2397ca;return n?[new Cesium__namespace[t(e._0x2f3fb6)]({name:t(2345),iconUrl:Cesium__namespace[t(1672)]("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace.ProviderViewModel({name:n.name||"有地形",iconUrl:Cesium__namespace[t(1672)]("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:n[t(3660)]||t(e._0x5f1111),category:"",creationFunction:function(){return createTerrainProvider(n)}})]:[new Cesium__namespace.ProviderViewModel({name:"无地形",iconUrl:Cesium__namespace[t(e._0x114cc7)]("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace[t(e._0x2f3fb6)]({name:t(1635),iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:t(e._0x280721),category:"",creationFunction:function(){return createTerrainProvider({url:"//data.mars3d.cn/terrain"})}}),new Cesium__namespace.ProviderViewModel({name:"Ion 全球地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:t(2254),category:"",creationFunction:function(){return createTerrainProvider({type:"ion"})}}),new Cesium__namespace.ProviderViewModel({name:"ArcGIS 全球地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:t(3481),category:"",creationFunction:function(){return createTerrainProvider({type:t(2255),url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"})}})]}var LayerUtil={__proto__:null,register:register$2,getClass:getClass$2,create:create$2,converOptions,registerImageryProvider,getProviderClass,createImageryProvider:createImageryProvider$k,getImageryProviderViewModels,getNoTerrainProvider,registerTerrainProvider,getTerrainProviderClass,createTerrainProvider,getTerrainProviderViewModels};const ControlClass={};function register$1(n,e){ControlClass[n]&&logError$1("register: "+n+"类型已存在",e),ControlType[n]=n,ControlClass[n]=e,e.type=n,e.prototype._type=n}function getClass$1(n){return ControlClass[n]}function create$1(n,e){const t=getClass$1(n);if(t)return new t(e)}var ControlUtil={__proto__:null,register:register$1,getClass:getClass$1,create:create$1};const EffectClass={};function register(n,e){const t=_0x2397ca;EffectClass[n]&&logError$1("register: "+n+"类型已存在",e),EffectType[n]=n,EffectClass[n]=e,e.type=n,e.prototype[t(3157)]=n}function getClass(n){return EffectClass[n]}function create(n,e){const t=getClass(n);if(t)return new t(e);logWarn("配置中的特效未处理",n,e)}var EffectUtil={__proto__:null,register,getClass,create};class BaseOptsConver{constructor(e={}){const t=_0x2397ca;this[t(3044)]=e}get excludedKeys(){return null}get includeKeys(){const e={_0x42556c:2238},t=_0x2397ca;return["color","outlineColor",t(e._0x42556c),t(3244)]}toCesiumVal(e,t={}){const x={_0x2df132:2905},i=_0x2397ca;this._toCesiumValBefore(e,t);for(const s in e){const o=e[s];if(this.includeKeys.indexOf(s)===-1){if(!isSimpleType(o)){t[s]=o;continue}if(this.excludedKeys&&this.excludedKeys.indexOf(s)!==-1)continue}const r=this._toOneCesiumVal(s,o,e,t);r!=null&&(t[s]=r)}return this[i(x._0x2df132)](e,t),t}[_0x2397ca(2697)](e,t){}_toCesiumValEnd(e,t){}_toOneCesiumVal(e,t,x,i){switch(e){default:i[e]=t;break}}toJSON(e,t={}){const x={_0x21f136:1640},i=_0x2397ca;e=getAttrVal(e),this._toJSONValBefore&&this._toJSONValBefore(t,e);for(const s in e){const o=e[s];isSimpleType(o)?t[s]=o:this._toOneJson(s,e[s],t)}return this._toJSONValEnd&&this[i(x._0x21f136)](t,e),t}_toOneJson(e,t,x){}static getColorByStyle(e){const t={_0x12741e:636},x=_0x2397ca;return!this.baseOptsConver&&(this[x(t._0x12741e)]=new BaseOptsConver),this.baseOptsConver.getColorByStyle(e)}getColorByStyle(e){return getColorByStyle(e,this.options.color)}[_0x2397ca(3868)](e){const t={_0x3a2719:396},x=_0x2397ca;let i;return e.outlineColor?isString(e.outlineColor)?i=Cesium__namespace.Color.fromCssColorString(e[x(209)]):i=e.outlineColor:i=this.options.outlineColor,i&&(Cesium__namespace.defined(e.outlineOpacity)?i=i[x(t._0x3a2719)](Number(e.outlineOpacity)):Cesium__namespace.defined(e.opacity)&&(i=i.withAlpha(Number(e[x(4010)]))),Cesium__namespace.defined(e[x(2182)])&&e[x(2182)]!==1&&(i=i[x(t._0x3a2719)](i.alpha*e.globalAlpha)),i)}}class BaseMaterialConver extends BaseOptsConver{get[_0x2397ca(4026)](){const e={_0x325db1:743,_0x19cc88:3210},t=_0x2397ca;return[t(e._0x325db1)][t(e._0x19cc88)](this._getExcludedStyle())}_getExcludedStyle(){return[]}static toCesiumVal(e,t){const x={_0x5b3e7f:2814,_0x338f5d:2868},i=_0x2397ca;return!this[i(x._0x5b3e7f)]&&(this.baseMaterialConver=new BaseMaterialConver),this.baseMaterialConver[i(x._0x338f5d)](e,t)}[_0x2397ca(4065)](e,t,x,i){const s={_0x5bfbe7:2238,_0x3a5d3f:497,_0x385a3c:4010,_0x132152:518,_0x4d812a:3190},o=_0x2397ca;switch(e){case"color":case"randomColor":i.color=this.getColorByStyle(x);break;case"color2":case"bgColor":case"outlineColor":case"evenColor":case"oddColor":case"lightColor":case"darkColor":case"baseWaterColor":case o(3853):case"gapColor":case"strokeColor":case o(s._0x5bfbe7):case o(s._0x3a5d3f):{let r=getCesiumColor(t);Cesium__namespace.defined(x.opacity)&&x[o(s._0x385a3c)]!==1&&(r=r[o(396)](x.opacity)),Cesium__namespace.defined(x[o(2182)])&&x.globalAlpha!==1&&(r=r[o(396)](r[o(2708)]*x.globalAlpha)),i[e]=r;break}case"repeat_x":case o(2957):{const r=x.repeat_x??1,c=x.repeat_y??1;i.repeat=new Cesium__namespace[o(s._0x132152)](r,c);break}case"repeat":{x.materialType===Stripe||x[o(2248)]===CylinderWave?i[e]=t:i[e]=new Cesium__namespace.Cartesian2(x.repeat_x||t,x.repeat_y||t);break}case"lineCount":case"lineThickness":case"lineOffset":case"noiseScale":{i[e]=new Cesium__namespace.Cartesian2(t,t);break}case o(s._0x4d812a):{t?i[e]=Cesium__namespace.StripeOrientation.VERTICAL:i[e]=Cesium__namespace[o(772)].HORIZONTAL;break}default:i[e]=t;break}}static[_0x2397ca(1180)](e,t){const x={_0xd050e:2814},i=_0x2397ca;return!this.baseMaterialConver&&(this[i(x._0xd050e)]=new BaseMaterialConver),this.baseMaterialConver[i(1180)](e,t)}toJSON(e,t={}){const x={_0x4c36b8:3044},i=_0x2397ca;var s;if((s=e)!==null&&s!==void 0&&s[i(3044)]){const o=e[i(x._0x4c36b8)];for(const r in o)Cesium__namespace[i(639)](e[r])&&(o[r]=e[r]);e=o}return super.toJSON(e,t)}[_0x2397ca(1316)](e,t,x){const i={_0x2d2c0f:1102,_0x4f5be:1119},s=_0x2397ca;if(t instanceof Cesium__namespace[s(2134)]){x[e]=t.toCssColorString();return}switch(e){case"label":break;case s(1089):case s(i._0x2d2c0f):case s(209):case"evenColor":case"oddColor":case"baseWaterColor":case"blendColor":case s(i._0x4f5be):case"strokeColor":case"backgroundColor":case"asphaltColor":case"lightColor":{const o=getCesiumColor(t);o&&(x[e]=o.toCssColorString());break}case s(1345):{t instanceof Cesium__namespace.Cartesian2?t.x!==t.y?(x[e+"_x"]=t.x,x[e+"_y"]=t.y):x[e]=t.x:x[e]=t;break}case s(3965):case"lineThickness":case s(650):case s(187):{x[e+"_x"]=t.x,x[e+"_y"]=t.y;break}default:console.log(s(979),e,t);break}}}registerOptsConver(_0x2397ca(1937),BaseMaterialConver);class ColorOptsConver extends BaseMaterialConver{static toCesiumVal(e,t,x){return e instanceof Cesium__namespace[_0x2397ca(2134)]?e:(!this.colorOptsConver&&(this.colorOptsConver=new ColorOptsConver),this.colorOptsConver.isProperty=x,this.colorOptsConver.toCesiumVal(e,t))}[_0x2397ca(2868)](e){const t=_0x2397ca;return this.isProperty?this[t(1217)](e):{color:this.getColorByStyle(e)}}static toJSON(e,t={},x=!1){const i={_0x5077f5:1145},s=_0x2397ca;return!this[s(i._0x5077f5)]&&(this[s(i._0x5077f5)]=new ColorOptsConver),this.colorOptsConver.isProperty=x,this.colorOptsConver[s(1180)](e,t)}[_0x2397ca(1180)](e,t={}){const x={_0x4f2a16:2134},i=_0x2397ca;var s;(s=e)!==null&&s!==void 0&&s.color&&(e=e.color);let o=getCesiumValue(e,Cesium__namespace.Color);return o.color&&(o=o.color),o&&(o instanceof Cesium__namespace[i(x._0x4f2a16)]?t.color=o.toCssColorString():isString(o)&&(t.color=o)),t}}registerOptsConver(Color$2,ColorOptsConver),registerOptsConver(PolylineArrow,ColorOptsConver);class ImageOptsConver extends BaseMaterialConver{get excludedKeys(){return["repeat_y"]}static toCesiumVal(e,t){return!this.imageOptsConver&&(this.imageOptsConver=new ImageOptsConver),this.imageOptsConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,x,i){const s={_0x500434:934,_0x606ba3:934,_0x4f627d:2957,_0x17c6b9:934,_0xc7dcca:2182,_0x3e36f6:2134,_0x26b9b8:3970,_0x9555e7:3970,_0x17684f:3970},o=_0x2397ca;switch(e){case o(s._0x500434):{const r=x[o(s._0x606ba3)]??1,c=x[o(s._0x4f627d)]??1;i[o(1345)]=new Cesium__namespace.Cartesian2(r,c);break}case o(1345):{i[e]=new Cesium__namespace.Cartesian2(x[o(s._0x17c6b9)]||t,x[o(s._0x4f627d)]||t);break}case"color":break;case"opacity":Cesium__namespace.defined(x[o(s._0xc7dcca)])&&x[o(2182)]!==1?i.color=Cesium__namespace[o(s._0x3e36f6)][o(s._0x26b9b8)][o(396)](x.globalAlpha*(t??1)):x.transparent??!0?i.color=Cesium__namespace.Color[o(s._0x9555e7)].withAlpha(t??1):i.color=Cesium__namespace.Color[o(s._0x17684f)];break;default:i[e]=t;break}}[_0x2397ca(2905)](e,t){t.transparent=t.transparent??!0}static toJSON(e,t){const x={_0x4faf4a:3315},i=_0x2397ca;return!this.imageOptsConver&&(this[i(x._0x4faf4a)]=new ImageOptsConver),this.imageOptsConver.toJSON(e,t)}_toOneJson(e,t,x){const i={_0xf6c0b9:979},s=_0x2397ca;switch(e){case"repeat":{x.repeat_x=t.x,x.repeat_y=t.y;break}case"color":{var o;x[s(4010)]=((o=getCesiumColor(t))===null||o===void 0?void 0:o.alpha)??1;break}default:console.log(s(i._0xf6c0b9),e,t);break}}}registerOptsConver(Image$1,ImageOptsConver);class BaseStyleConver extends BaseOptsConver{get excludedKeys(){const e={_0x2ebde6:2357,_0x900766:1685},t=_0x2397ca;return["type","label","outlineOpacity","outlineStyle","lineCount","lineThickness",t(2448),"oddcolor","speed","axisY","image2",t(e._0x2ebde6),t(1732),"scaleByDistance_nearValue","scaleByDistance_far",t(e._0x900766),t(2388),"distanceDisplayCondition_near"].concat(this._getExcludedStyle())}[_0x2397ca(2118)](){return[]}[_0x2397ca(2697)](e,t){const x=_0x2397ca;if(!e.material&&!e[x(2248)]){var i;e.color||e.randomColor||(i=e[x(3028)])!==null&&i!==void 0&&i.color?e.materialType=Color$2:e.image&&(e.materialType=Image$1)}}_toOneCesiumVal_Point(e,t,x,i){const s={_0x28e80d:2913,_0x14ab6d:3102,_0x544a84:2671,_0x22da06:2773,_0x43c057:2364,_0xd350d4:169},o=_0x2397ca;switch(e){case"clampToGround":t?i.heightReference=Cesium__namespace.HeightReference[o(s._0x28e80d)]:i[o(s._0x14ab6d)]=Cesium__namespace[o(3161)].NONE;break;case"visibleDepth":t?i.disableDepthTestDistance=0:i.disableDepthTestDistance=Number.POSITIVE_INFINITY;break;case o(3241):t?i.shadows=Cesium__namespace.ShadowMode[o(s._0x544a84)]:i.shadows=Cesium__namespace.ShadowMode.DISABLED;break;case"scaleByDistance":t?i.scaleByDistance=new Cesium__namespace[o(2239)](Number(Cesium__namespace.defaultValue(x.scaleByDistance_near,1e3)),Number(Cesium__namespace.defaultValue(x.scaleByDistance_nearValue,1)),Number(Cesium__namespace[o(s._0x22da06)](x.scaleByDistance_far,1e6)),Number(Cesium__namespace.defaultValue(x.scaleByDistance_farValue,.1))):i[o(s._0x43c057)]=void 0;break;case o(169):t?i.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number(Cesium__namespace.defaultValue(x.distanceDisplayCondition_near,0)),Number(Cesium__namespace.defaultValue(x.distanceDisplayCondition_far,Number.MAX_VALUE))):i[o(s._0xd350d4)]=void 0;break;default:i[e]=t;break}}_toOneCesiumVal_Poly(e,t,x,i){const s={_0x2d821f:2248,_0x43538a:1089,_0x1a5d94:3868,_0x6a69c:2776,_0x55a4ec:169},o=_0x2397ca;switch(e){case o(s._0x2d821f):{this.isEntity?i.material=createMaterialProperty(x[o(2248)],x.materialOptions||x):i.material=createMaterial(x.materialType,x.materialOptions||x);break}case o(s._0x43538a):case"randomColor":{i.color=this.getColorByStyle(x);break}case"outlineColor":{i[o(209)]=this[o(s._0x1a5d94)](x);break}case"hasShadows":t?i.shadows=Cesium__namespace.ShadowMode.ENABLED:i.shadows=Cesium__namespace.ShadowMode[o(2788)];break;case"distanceDisplayCondition":t?this.isEntity?i.distanceDisplayCondition=new Cesium__namespace[o(s._0x6a69c)](Number(Cesium__namespace.defaultValue(x[o(1290)],0)),Number(Cesium__namespace.defaultValue(x.distanceDisplayCondition_far,Number.MAX_VALUE))):i[o(169)]=new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute(Number(Cesium__namespace.defaultValue(x.distanceDisplayCondition_near,0)),Number(Cesium__namespace.defaultValue(x[o(2388)],Number.MAX_VALUE))):i[o(s._0x55a4ec)]=void 0;break;default:i[e]instanceof Cesium__namespace.CallbackProperty?logWarn("回调属性未覆盖更新",e,t):i[e]=t;break}}_toJSONValEnd(e,t){}_toOneJson_Poly(e,t,x){const i={_0x58c321:778,_0xcb49db:2032,_0x521ffb:979},s=_0x2397ca;switch(e){case"label":case"outlineStyle":case s(480):break;case"material":{toJSON(t,x);break}case s(3028):{x[e]=toJSONByType(x.materialType,t);break}case"color":{const o=getCesiumColor(t);o&&(x[e]=o.toCssColorString());break}case"outlineColor":{const o=getCesiumColor(t);o&&(x[e]=o[s(589)]());break}case"rotation":x.rotationDegree=formatNum$1(Cesium__namespace[s(3876)].toDegrees(t),2);break;case"stRotation":x.stRotationDegree=formatNum$1(Cesium__namespace.Math[s(i._0x58c321)](t),2);break;case"shadows":{t===Cesium__namespace[s(2007)].ENABLED?x.shadows=!0:x[e]=t;break}case"distanceDisplayCondition":{x.distanceDisplayCondition_near=t.near,x.distanceDisplayCondition_far=t[s(i._0xcb49db)];break}default:logWarn(s(i._0x521ffb),e,t);break}}[_0x2397ca(1749)](e,t,x){const i={_0x68f05e:1089,_0x62049c:1315,_0x3946b0:1732,_0xf089a2:2032,_0x5dbd26:3833,_0x57f4d2:2388},s=_0x2397ca;switch(e){case"label":case"outlineStyle":case"highlight":break;case"material":{toJSON(t,x);break}case"materialOptions":{x[e]=toJSONByType(x.materialType,t);break}case s(i._0x68f05e):case"fillColor":case"outlineColor":case"backgroundColor":case s(3244):{const o=getCesiumColor(t);o&&(x[e]=o.toCssColorString());break}case"heightReference":{t===Cesium__namespace.HeightReference.CLAMP_TO_GROUND&&(x.clampToGround=!0);break}case"rotation":x.rotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;case"stRotation":x.stRotationDegree=formatNum$1(Cesium__namespace.Math[s(778)](t),2);break;case"disableDepthTestDistance":{t===Number.POSITIVE_INFINITY?x[s(1919)]=!1:x[s(i._0x62049c)]=t;break}case"scaleByDistance":{x.scaleByDistance=!0,x[s(i._0x3946b0)]=t.near,x[s(1995)]=t.nearValue,x.scaleByDistance_far=t[s(i._0xf089a2)],x.scaleByDistance_farValue=t[s(i._0x5dbd26)];break}case"distanceDisplayCondition":{x.distanceDisplayCondition=!0,x.distanceDisplayCondition_near=t.near,x[s(i._0x57f4d2)]=t.far;break}default:logWarn("未处理的属性",e,t);break}}}class BillboardStyleConver extends BaseStyleConver{_getExcludedStyle(){return["outlineColor","backgroundColor","font_style","font_weight","font_size","font_family",_0x2397ca(3184),"fill","outline"]}static toCesiumVal(e,t,x){const i=_0x2397ca;return!this.billboardStyleConver&&(this[i(1458)]=new BillboardStyleConver),this.billboardStyleConver[i(3150)]=x,this.billboardStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x={_0x4ef9d0:3999},i=_0x2397ca;t[i(x._0x4ef9d0)]=t.horizontalOrigin??Cesium__namespace.HorizontalOrigin.CENTER,t.verticalOrigin=t.verticalOrigin??Cesium__namespace.HorizontalOrigin.BOTTOM}_toOneCesiumVal(e,t,x,i){const s={_0x5a2551:1089,_0x476f07:396,_0x44a659:2587,_0x194927:518,_0x5d51db:2665,_0x4d8067:639},o=_0x2397ca;switch(e){case"color":{i[o(s._0x5a2551)]=this.getColorByStyle(x);break}case"opacity":Cesium__namespace[o(639)](x.globalAlpha)&&x.globalAlpha!==1?i.color=Cesium__namespace[o(2134)].WHITE.withAlpha(x[o(2182)]*(t??1)):i.color=Cesium__namespace.Color.WHITE[o(s._0x476f07)](t??1);break;case"rotationDegree":i.rotation=Cesium__namespace.Math.toRadians(t);break;case o(s._0x44a659):!t&&(i.pixelOffset=new Cesium__namespace[o(s._0x194927)](0,0));break;case"pixelOffsetX":case o(165):i.pixelOffset=new Cesium__namespace.Cartesian2(x.pixelOffsetX||0,x.pixelOffsetY||0);break;case o(s._0x5d51db):Cesium__namespace[o(s._0x4d8067)](t[0])&&Cesium__namespace[o(s._0x4d8067)](t[1])?i.pixelOffset=new Cesium__namespace[o(518)](t[0],t[1]):i.pixelOffset=t;break;default:this._toOneCesiumVal_Point(e,t,x,i);break}}static toJSON(e,t,x){const i={_0x154950:1458},s=_0x2397ca;return!this.billboardStyleConver&&(this.billboardStyleConver=new BillboardStyleConver),this.billboardStyleConver[s(3150)]=x,this[s(i._0x154950)][s(1180)](e,t)}_toOneJson(e,t,x){const i={_0x2e4bec:1749},s=_0x2397ca;switch(e){case"pixelOffset":{x.pixelOffsetX=t.x,x.pixelOffsetY=t.y;break}default:this[s(i._0x2e4bec)](e,t,x);break}}}class CloudStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t){const x={_0x583266:2662},i=_0x2397ca;return!this.cloudStyleConver&&(this.cloudStyleConver=new CloudStyleConver),this[i(x._0x583266)].toCesiumVal(e,t)}[_0x2397ca(2697)](e,t){}_toOneCesiumVal(e,t,x,i){const s={_0x194f15:301,_0x57af91:518,_0x187f4f:417},o=_0x2397ca;switch(e){case"scaleX":case o(s._0x194f15):i.scale=new Cesium__namespace[o(s._0x57af91)](x.scaleX||1,x.scaleY||1);break;case"maximumSizeX":case"maximumSizeY":case"maximumSizeZ":i[o(3861)]=new Cesium__namespace.Cartesian3(x[o(3119)]||1,x.maximumSizeY||1,x[o(s._0x187f4f)]||1);break;default:this._toOneCesiumVal_Point(e,t,x,i);break}}static toJSON(e,t){return!this[_0x2397ca({_0x574ddf:2662}._0x574ddf)]&&(this.cloudStyleConver=new CloudStyleConver),this.cloudStyleConver.toJSON(e,t)}_toOneJson(e,t,x){const i={_0x38f1ec:1760,_0x3d7c16:1076},s=_0x2397ca;switch(e){case s(i._0x38f1ec):x.scaleX=formatNum$1(t.x,2),x.scaleY=formatNum$1(t.y,2);break;case"maximumSize":x.maximumSizeX=formatNum$1(t.x,2),x[s(i._0x3d7c16)]=formatNum$1(t.y,2),x.maximumSizeZ=formatNum$1(t.z,2);break;default:this._toOneJson_Point(e,t,x);break}}}class BoxStyleConver extends BaseStyleConver{static toCesiumVal(e,t,x){const i={_0x13bdf7:1050,_0x5988d3:3150},s=_0x2397ca;return!this[s(i._0x13bdf7)]&&(this.boxStyleConver=new BoxStyleConver),this.boxStyleConver[s(i._0x5988d3)]=x,this.boxStyleConver[s(2868)](e,t)}[_0x2397ca(2118)](){return[_0x2397ca(4010),"dimensions_y","dimensions_z"]}[_0x2397ca(4065)](e,t,x,i){const s=_0x2397ca;switch(e){case s(209):{i.outlineColor=this.getOutlineColorByStyle(x);break}case"dimensions_x":{const o=x[s(4005)]??100,r=x[s(3857)]??100,c=x.dimensions_z??100;i.dimensions=new Cesium__namespace.Cartesian3(o,r,c);break}default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static[_0x2397ca(1180)](e,t,x){return!this[_0x2397ca({_0xa17544:1050}._0xa17544)]&&(this.boxStyleConver=new BoxStyleConver),this.boxStyleConver.isEntity=x,this.boxStyleConver.toJSON(e,t)}_toOneJson(e,t,x){switch(e){case"dimensions":{x.dimensions_x=t.x,x.dimensions_y=t.y,x.dimensions_z=t.z;break}default:this._toOneJson_Poly(e,t,x);break}}}class CircleStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){return!this.circleStyleConver&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=x,this.circleStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x={_0x9efd95:2444},i=_0x2397ca;super._toCesiumValBefore(e,t),e.clampToGround&&(e.hasOwnProperty(i(3872))&&delete e.height,e[i(x._0x9efd95)]("extrudedHeight")&&delete e.extrudedHeight,e.hasOwnProperty("diffHeight")&&delete e.diffHeight),Cesium__namespace.defined(e.height)&&(e[i(1034)]=!1)}[_0x2397ca(4065)](e,t,x,i){const s={_0x2e0aa2:2353,_0x57f533:2167,_0x40e273:3872,_0x4af93a:2437,_0x16626a:639,_0x58bb9b:3189,_0x33fb6d:1034,_0x4a60eb:3161},o=_0x2397ca;switch(e){case"rotation":i.rotation=t,!x[o(2353)]&&(i[o(s._0x2e0aa2)]=i.rotation);break;case o(s._0x57f533):i.rotation=Cesium__namespace.Math.toRadians(t),!x.stRotation&&(i.stRotation=i.rotation);break;case o(248):i.stRotation=Cesium__namespace.Math[o(2500)](t);break;case"height":i[o(s._0x40e273)]=t,x[o(2437)]&&(i.extrudedHeight=Number(x.diffHeight)+Number(t));break;case o(s._0x4af93a):Cesium__namespace[o(s._0x16626a)](x.height)&&(i.extrudedHeight=x.height+t);break;case o(s._0x58bb9b):this.isEntity?(i.semiMinorAxis=Number(t),i.semiMajorAxis=Number(t)):i[o(3189)]=Number(t);break;case o(s._0x33fb6d):t?i.heightReference=Cesium__namespace[o(s._0x4a60eb)][o(2913)]:i.heightReference=Cesium__namespace.HeightReference[o(3298)];break;default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static[_0x2397ca(1180)](e,t,x){const i={_0x375efb:921},s=_0x2397ca;return!this[s(i._0x375efb)]&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=x,this.circleStyleConver[s(1180)](e,t)}_toOneJson(e,t,x){const i=_0x2397ca;switch(e){case"rotation":{x.rotationDegree=formatNum$1(Cesium__namespace[i(3876)].toDegrees(t),1);break}case"stRotation":{x.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}default:this[i(2373)](e,t,x);break}}}class CorridorStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){return!this.corridorStyleConver&&(this.corridorStyleConver=new CorridorStyleConver),this.corridorStyleConver.isEntity=x,this.corridorStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x={_0x3007e1:1034,_0x2cc94d:3872,_0x3bc6e9:2437,_0x2d168d:2437},i=_0x2397ca;super._toCesiumValBefore(e,t),e[i(x._0x3007e1)]&&(e.hasOwnProperty(i(3872))&&delete e[i(x._0x2cc94d)],e.hasOwnProperty(i(3791))&&delete e.extrudedHeight,e.hasOwnProperty(i(x._0x3bc6e9))&&delete e[i(x._0x2d168d)])}_toOneCesiumVal(e,t,x,i){const s={_0x17428e:3872},o=_0x2397ca;switch(e){case"outlineColor":{i.outlineColor=this.getOutlineColorByStyle(x);break}case"height":i.height=t,x.diffHeight&&(i[o(3791)]=Number(x.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace.defined(x[o(s._0x17428e)])&&(i.extrudedHeight=x.height+t);break;default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static toJSON(e,t,x){const i={_0x3c4e04:2610},s=_0x2397ca;return!this[s(i._0x3c4e04)]&&(this.corridorStyleConver=new CorridorStyleConver),this[s(i._0x3c4e04)].isEntity=x,this.corridorStyleConver.toJSON(e,t)}_toOneJson(e,t,x){this[_0x2397ca({_0x3385c2:2373}._0x3385c2)](e,t,x)}}class CylinderStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){const i={_0x3b6d4e:2093},s=_0x2397ca;return!this[s(2093)]&&(this.cylinderStyleConver=new CylinderStyleConver),this[s(i._0x3b6d4e)].isEntity=x,this.cylinderStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x=_0x2397ca;super._toCesiumValBefore(e,t),!e[x(1142)]&&(e.topRadius=0)}[_0x2397ca(4065)](e,t,x,i){const s={_0x563d66:3390},o=_0x2397ca;switch(e){case"diffHeight":i.length instanceof Cesium__namespace.CallbackProperty||(i[o(2027)]=Number(t));break;default:this[o(s._0x563d66)](e,t,x,i);break}}static toJSON(e,t,x){const i=_0x2397ca;return!this.cylinderStyleConver&&(this.cylinderStyleConver=new CylinderStyleConver),this.cylinderStyleConver.isEntity=x,this[i(2093)].toJSON(e,t)}_toOneJson(e,t,x){this[_0x2397ca(2373)](e,t,x)}}class DivGraphicStyleConver extends BaseStyleConver{static toCesiumVal(e,t){const x={_0x3dc52b:695},i=_0x2397ca;return!this.divGraphicStyleConver&&(this.divGraphicStyleConver=new DivGraphicStyleConver),this[i(x._0x3dc52b)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){}_toOneCesiumVal(e,t,x,i){this._toOneCesiumVal_Point(e,t,x,i)}static toJSON(e,t){const x={_0x1e99fb:695},i=_0x2397ca;return!this.divGraphicStyleConver&&(this[i(x._0x1e99fb)]=new DivGraphicStyleConver),this.divGraphicStyleConver[i(1180)](e,t)}_toOneJson(e,t,x){this._toOneJson_Point(e,t,x)}}class EllipsoidStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){const i=_0x2397ca;return!this.ellipsoidStyleConver&&(this[i(2190)]=new EllipsoidStyleConver),this.ellipsoidStyleConver.isEntity=x,this.ellipsoidStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x=_0x2397ca;super[x(2697)](e,t)}_getExcludedStyle(){return["radii_y",_0x2397ca(525),"innerRadii_y","innerRadii_z"]}[_0x2397ca(4065)](e,t,x,i){const s={_0x1aab7c:1246,_0x5315c6:525,_0x35b0f4:173,_0x4beb88:1487},o=_0x2397ca;switch(e){case"radii":i[o(s._0x1aab7c)]=new Cesium__namespace.Cartesian3(t,t,t);break;case"radii_x":i.radii=new Cesium__namespace[o(295)](x.radii_x??100,x.radii_y??100,x[o(s._0x5315c6)]??100);break;case"innerRadii":i.innerRadii=new Cesium__namespace.Cartesian3(t,t,t);break;case"innerRadii_x":x.innerRadii_x>0&&x.innerRadii_y>0&&x.innerRadii_z>0?i.innerRadii=new Cesium__namespace.Cartesian3(x[o(3904)]??0,x.innerRadii_y??0,x.innerRadii_z??0):i[o(1269)]=new Cesium__namespace[o(295)](.001,.001,.001);break;case"minimumClockDegree":case o(s._0x35b0f4):case"minimumConeDegree":case"maximumConeDegree":i[e[o(s._0x4beb88)]("Degree","")]=Cesium__namespace.Math.toRadians(t||0);break;default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static toJSON(e,t,x){const i={_0x26f81b:2190,_0xe44ed:3150},s=_0x2397ca;return!this.ellipsoidStyleConver&&(this.ellipsoidStyleConver=new EllipsoidStyleConver),this[s(i._0x26f81b)][s(i._0xe44ed)]=x,this.ellipsoidStyleConver.toJSON(e,t)}[_0x2397ca(1316)](e,t,x){const i={_0x50ad8f:3874},s=_0x2397ca;switch(e){case"radii":{x.radii_x=t.x,x.radii_y=t.y,x.radii_z=t.z;break}case"innerRadii":{x.innerRadii_x=t.x,x[s(1836)]=t.y,x.innerRadii_z=t.z;break}case"minimumClock":case"maximumClock":case s(3775):case s(i._0x50ad8f):x[e+"Degree"]=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;default:this._toOneJson_Poly(e,t,x);break}}}class LabelStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){const i={_0x55b73c:2929},s=_0x2397ca;return!this[s(2929)]&&(this[s(i._0x55b73c)]=new LabelStyleConver),this.labelStyleConver[s(1578)]=x,t=this.labelStyleConver.toCesiumVal(e,t),t}[_0x2397ca(2697)](e,t){const x=_0x2397ca;t.horizontalOrigin=t.horizontalOrigin??Cesium__namespace.HorizontalOrigin.CENTER,t[x(2026)]=t.verticalOrigin??Cesium__namespace[x(653)].BOTTOM}_toCesiumValEnd(e,t){const x=_0x2397ca;!Cesium__namespace.defined(e[x(2378)])&&(t.font=(e.font_style||"")+" "+(e.font_weight||"")+" "+(e.font_size||18)+"px  "+(e[x(1188)]||"微软雅黑")),!Cesium__namespace.defined(e.style)&&(e.fill??!0)&&(e[x(3472)]?t.style=Cesium__namespace.LabelStyle.FILL_AND_OUTLINE:t.style=Cesium__namespace.LabelStyle.FILL)}_getExcludedStyle(){return["font_style","font_weight",_0x2397ca(2826),"font_family","backgroundOpacity","fill"]}_toOneCesiumVal(e,t,x,i){const s={_0xa9d88f:1487,_0x196592:2599,_0x1ce350:2238,_0xa4e080:1004,_0x1683fd:2665,_0x2c708a:4003,_0x46a958:2665},o=_0x2397ca;switch(e){case"text":{this.attr&&(t=template(t,this.attr,x.templateEmptyStr??!0)),i.text=String(t||"")[o(s._0xa9d88f)](/<br \/>/gm,`
`);break}case"color":{i[o(1102)]=this.getColorByStyle(x);break}case"outlineColor":{i.outlineColor=this[o(3868)](x);break}case"strokeColor":case"fillColor":{i[e]=getCesiumColor(t);break}case"background":i[o(s._0x196592)]=t,i.showBackground=t;break;case o(s._0x1ce350):{let r=getCesiumColor(t,Cesium__namespace.Color.BLACK);Cesium__namespace[o(639)](x.backgroundOpacity)?r=r.withAlpha(Number(x.backgroundOpacity)):Cesium__namespace.defined(x.opacity)&&(r=r.withAlpha(Number(x.opacity))),i.backgroundColor=r;break}case o(1376):i.backgroundPadding=new Cesium__namespace.Cartesian2(t*1.2,t),i[o(s._0xa4e080)]=t;break;case o(2587):!t&&(i.pixelOffset=new Cesium__namespace[o(518)](0,0));break;case"pixelOffsetX":case"pixelOffsetY":i[o(s._0x1683fd)]=new Cesium__namespace.Cartesian2(x[o(s._0x2c708a)]||0,x.pixelOffsetY||0);break;case o(s._0x46a958):Cesium__namespace[o(639)](t[0])&&Cesium__namespace.defined(t[1])?i[o(2665)]=new Cesium__namespace.Cartesian2(t[0],t[1]):i[o(2665)]=t;break;default:this._toOneCesiumVal_Point(e,t,x,i);break}}static toJSON(e,t){const x=_0x2397ca;return!this.labelStyleConver&&(this[x(2929)]=new LabelStyleConver),this.labelStyleConver.toJSON(e,t)}[_0x2397ca(1316)](e,t,x){const i={_0x40d032:1749},s=_0x2397ca;switch(e){case"pixelOffset":{x.pixelOffsetX=t.x,x.pixelOffsetY=t.y;break}case"disableDepthTestDistance":{t===Number.POSITIVE_INFINITY?x.visibleDepth=!1:x.disableDepthTestDistance=t;break}default:this[s(i._0x40d032)](e,t,x);break}}static setOpacity(e,t){const x={_0x63aef1:1102,_0x242803:1263,_0x3d4191:2238,_0x5b7c62:2134},i=_0x2397ca,s=getCesiumValue(e.fillColor,Cesium__namespace.Color);s?(!Cesium__namespace.defined(e._fillColor_alpha_bak)&&(e._fillColor_alpha_bak=s.alpha??1),e[i(x._0x63aef1)]=s.withAlpha(t*e._fillColor_alpha_bak)):e.fillColor=Cesium__namespace.Color.WHITE.withAlpha(t);const o=getCesiumValue(e.outlineColor,Cesium__namespace.Color);o&&(!Cesium__namespace.defined(e._outlineColor_alpha_bak)&&(e[i(x._0x242803)]=o.alpha??1),e.outlineColor=o.withAlpha(t*e[i(x._0x242803)]));const r=getCesiumValue(e[i(x._0x3d4191)],Cesium__namespace[i(x._0x5b7c62)]);r&&(!Cesium__namespace.defined(e[i(4038)])&&(e._backgroundColor_alpha_bak=r[i(2708)]??1),e.backgroundColor=r.withAlpha(t*e._backgroundColor_alpha_bak))}}class ModelStyleConver extends BaseStyleConver{static toCesiumVal(e,t,x){const i={_0x37e179:2735},s=_0x2397ca;return!this.modelStyleConver&&(this.modelStyleConver=new ModelStyleConver),this[s(i._0x37e179)].isEntity=x,this.modelStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){}[_0x2397ca(2118)](){return["silhouette","silhouetteColor","silhouetteAlpha","silhouetteSize","fill","opacity"]}[_0x2397ca(4065)](e,t,x,i){const s={_0x34380a:914},o=_0x2397ca;switch(e){case"url":case"modelUrl":case o(2315):t=replaceOnlineUrlDomain({url:t})[o(s._0x34380a)],this.isEntity?i.uri=t:i.url=t;break;case"scale":!isNaN(t)&&(i[e]=t);break;default:this._toOneCesiumVal_Point(e,t,x,i);break}}_toCesiumValEnd(e,t){const x={_0x13ef7f:241,_0x51ca66:4010,_0x2a7d62:3970,_0x488e48:396,_0x17ee28:639,_0x3c9d90:2034},i=_0x2397ca;if(t[i(3482)]=!!(t.uri||t.url),e[i(x._0x13ef7f)]?t.color=getColorByStyle(e,Cesium__namespace.Color.WHITE):Cesium__namespace.defined(e[i(x._0x51ca66)])&&e.opacity!==1?t[i(1089)]=Cesium__namespace.Color[i(x._0x2a7d62)][i(x._0x488e48)](e.opacity):t.color=Cesium__namespace.Color.WHITE,e[i(762)]){let s=getCesiumColor(e[i(1115)],Cesium__namespace.Color[i(x._0x2a7d62)]);Cesium__namespace[i(x._0x17ee28)](e.silhouetteAlpha)&&(s=s.withAlpha(Number(e[i(x._0x3c9d90)]))),Cesium__namespace.defined(e.globalAlpha)&&e.globalAlpha!==1&&(s=s[i(396)](s.alpha*e.globalAlpha)),t.silhouetteColor=s,t.silhouetteSize=Number(e.silhouetteSize||1)}else t.silhouetteColor=void 0,t[i(2656)]=0}static toJSON(e,t,x){return!this.modelStyleConver&&(this.modelStyleConver=new ModelStyleConver),this.modelStyleConver.isEntity=x,this.modelStyleConver.toJSON(e,t)}[_0x2397ca(1316)](e,t,x){const i={_0x1f4493:2315,_0xb21e7e:914},s=_0x2397ca;switch(e){case s(i._0x1f4493):{x[s(i._0xb21e7e)]=t;break}default:this._toOneJson_Point(e,t,x);break}}static[_0x2397ca(2732)](e,t){const x={_0x324598:3121,_0x173b95:1115,_0x401675:396},i=_0x2397ca,s=getCesiumValue(e[i(1089)],Cesium__namespace.Color);!Cesium__namespace.defined(e._color_alpha_bak)&&(e[i(x._0x324598)]=(s==null?void 0:s.alpha)??1),s?e.color=s.withAlpha(t*e[i(3121)]):e.color=Cesium__namespace.Color.WHITE[i(396)](t);const o=getCesiumValue(e[i(x._0x173b95)],Cesium__namespace.Color);o&&(!Cesium__namespace.defined(e._silhouetteColor_alpha_bak)&&(e[i(2442)]=o.alpha??1),e.silhouetteColor=o[i(x._0x401675)](t*e._silhouetteColor_alpha_bak))}}class PathStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){return!this.pathStyleConver&&(this.pathStyleConver=new PathStyleConver),this.pathStyleConver.isEntity=x,this.pathStyleConver.toCesiumVal(e,t)}[_0x2397ca(4065)](e,t,x,i){this._toOneCesiumVal_Poly(e,t,x,i)}static toJSON(e,t,x){const i={_0x12795a:3150},s=_0x2397ca;return!this.pathStyleConver&&(this.pathStyleConver=new PathStyleConver),this.pathStyleConver[s(i._0x12795a)]=x,this.pathStyleConver.toJSON(e,t)}_toOneJson(e,t,x){this[_0x2397ca(2373)](e,t,x)}}class PlaneStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this.planeStyleConver.isEntity=x,this.planeStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x=_0x2397ca;super[x(2697)](e,t)}_toOneCesiumVal(e,t,x,i){const s=_0x2397ca;switch(e){case"dimensions_x":{const o=x[s(4005)]??100,r=x.dimensions_y??100;i.dimensions=new Cesium__namespace.Cartesian2(o,r);break}case"plane_normal":{let o;switch(t){case"x":o=Cesium__namespace.Cartesian3.UNIT_X;break;case"y":o=Cesium__namespace.Cartesian3[s(3729)];break;case"z":o=Cesium__namespace.Cartesian3.UNIT_Z;break;default:o=t;break}const r=x.plane_distance??0;i.plane=new Cesium__namespace.Plane(o,r);break}default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static[_0x2397ca(1180)](e,t,x){return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this.planeStyleConver.isEntity=x,this.planeStyleConver.toJSON(e,t)}static toOneJson(e,t,x){const i={_0x140604:3920},s=_0x2397ca;return!this.planeStyleConver&&(this[s(i._0x140604)]=new PlaneStyleConver),this.planeStyleConver._toOneJson(e,t,x)}_toOneJson(e,t,x){const i={_0x456c48:3742,_0x1c4951:2883,_0x1156fc:295,_0x55a1ab:3742,_0x448185:230},s=_0x2397ca;switch(e){case"dimensions":{x.dimensions_x=t.x,x.dimensions_y=t.y;break}case"plane_normal":{t[s(1043)](Cesium__namespace.Cartesian3.UNIT_X)?x.plane_normal="x":t.equals(Cesium__namespace[s(295)].UNIT_Y)?x[s(i._0x456c48)]="y":(t[s(1043)](Cesium__namespace[s(295)].UNIT_Z)||logWarn("plane类型未识别",t),x.plane_normal="z");break}case"plane":{t[s(i._0x1c4951)].equals(Cesium__namespace[s(i._0x1156fc)][s(3890)])?x.plane_normal="x":t.normal[s(1043)](Cesium__namespace.Cartesian3[s(3729)])?x.plane_normal="y":t.normal.equals(Cesium__namespace[s(i._0x1156fc)][s(3594)])?x[s(i._0x55a1ab)]="z":(logWarn("plane类型未识别",t),x.plane_normal="z"),x.plane_distance=t[s(i._0x448185)];break}default:this[s(2373)](e,t,x);break}}}class PointStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){const i=_0x2397ca;return!this[i(567)]&&(this.pointStyleConver=new PointStyleConver),this.pointStyleConver.isEntity=x,this.pointStyleConver[i(2868)](e,t)}_toCesiumValBefore(e,t){t.pixelSize=6}_toCesiumValEnd(e,t){const x={_0x69f1e6:1724},i=_0x2397ca;e.outline===!1&&(t[i(x._0x69f1e6)]=0)}_toOneCesiumVal(e,t,x,i){const s={_0x5112ff:3868,_0x2d9266:219},o=_0x2397ca;switch(e){case"color":case o(994):{i.color=this.getColorByStyle(x);break}case"outlineColor":{i.outlineColor=this[o(s._0x5112ff)](x);break}default:this[o(s._0x2d9266)](e,t,x,i);break}}static[_0x2397ca(1180)](e,t,x){const i=_0x2397ca;return!this.pointStyleConver&&(this.pointStyleConver=new PointStyleConver),this[i(567)].isEntity=x,this[i(567)][i(1180)](e,t)}_toOneJson(e,t,x){this._toOneJson_Point(e,t,x)}}class PolygonStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){const i={_0x3977b5:3150},s=_0x2397ca;return!this[s(3624)]&&(this[s(3624)]=new PolygonStyleConver),this.polygonStyleConver[s(i._0x3977b5)]=x,this.polygonStyleConver.toCesiumVal(e,t)}[_0x2397ca(2697)](e,t){const x={_0x4de210:3872,_0xc2fbf0:2444,_0x18296f:3791,_0x42e9a8:1034},i=_0x2397ca;super[i(2697)](e,t),e.clampToGround?(t.arcType=Cesium__namespace[i(400)].GEODESIC,e.hasOwnProperty(i(x._0x4de210))&&delete e[i(3872)],e[i(2444)]("diffHeight")&&delete e.diffHeight,e[i(x._0xc2fbf0)](i(x._0x18296f))&&delete e.extrudedHeight):Cesium__namespace.defined(e.height)?(e.clampToGround=!1,t.perPositionHeight=!1):(e[i(x._0x42e9a8)]=!1,t.perPositionHeight=!0)}_toOneCesiumVal(e,t,x,i){const s={_0x2d363f:503,_0x37869d:2437,_0x346c30:2353},o=_0x2397ca;switch(e){case"outlineColor":{i.outlineColor=this[o(3868)](x);break}case"height":{i[e]=t,i[o(s._0x2d363f)]=!1;break}case o(s._0x37869d):{Cesium__namespace[o(639)](x.height)&&(i.extrudedHeight=x.height+t);break}case"clampToGround":i[e]=t,i[o(s._0x2d363f)]=!t&&!Cesium__namespace.defined(x.height);break;case"stRotation":i.stRotation=t;break;case"stRotationDegree":i[o(s._0x346c30)]=Cesium__namespace.Math[o(2500)](t);break;default:this[o(3390)](e,t,x,i);break}}static toJSON(e,t,x){const i=_0x2397ca;return!this[i(3624)]&&(this.polygonStyleConver=new PolygonStyleConver),this[i(3624)].isEntity=x,this[i(3624)][i(1180)](e,t)}[_0x2397ca(1316)](e,t,x){const i={_0x5e61f4:3876},s=_0x2397ca;switch(e){case"stRotation":{x[s(248)]=formatNum$1(Cesium__namespace[s(i._0x5e61f4)].toDegrees(t),1);break}default:this._toOneJson_Poly(e,t,x);break}}}class PolylineStyleConver extends BaseStyleConver{static toCesiumVal(e,t,x){return!this.polylineStyleConver&&(this.polylineStyleConver=new PolylineStyleConver),this.polylineStyleConver.isEntity=x,this.polylineStyleConver.toCesiumVal(e,t)}[_0x2397ca(2697)](e,t){super._toCesiumValBefore(e,t),e.clampToGround&&(t.arcType=Cesium__namespace.ArcType.GEODESIC),e.materialType===Color$2&&e.outline&&e.outlineColor&&(e.materialType=PolylineOutline)}_toOneCesiumVal(e,t,x,i){const s={_0x52d24e:2134,_0x58e1dd:639,_0x5230d9:2624,_0x1ba05d:1202},o=_0x2397ca;switch(e){case"depthFail":if(t){let r=getCesiumColor(x.depthFailColor||x[o(1089)],Cesium__namespace[o(s._0x52d24e)].YELLOW);Cesium__namespace[o(s._0x58e1dd)](x.depthFailOpacity)&&(r=r.withAlpha(Number(x.depthFailOpacity))),this.isEntity?i[o(s._0x5230d9)]=r:i.depthFailColor=r,x.opacity===1&&(x.opacity=.98)}else i.depthFailMaterial=void 0;i[e]=t;break;case"closure":!this.isEntity&&(i[o(s._0x1ba05d)]=t),i.closure=t;break;default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static toJSON(e,t,x){const i={_0x282213:1180},s=_0x2397ca;return!this.polylineStyleConver&&(this.polylineStyleConver=new PolylineStyleConver),this.polylineStyleConver.isEntity=x,this[s(2629)][s(i._0x282213)](e,t)}_toOneJson(e,t,x){switch(e){case"loop":x.closure=t;break;default:this._toOneJson_Poly(e,t,x);break}}}class PolylineVolumeStyleConver extends BaseStyleConver{static toCesiumVal(e,t,x){const i={_0x30d5c3:3150},s=_0x2397ca;return!this.polylineVolumeStyleConver&&(this.polylineVolumeStyleConver=new PolylineVolumeStyleConver),this.polylineVolumeStyleConver[s(i._0x30d5c3)]=x,this.polylineVolumeStyleConver.toCesiumVal(e,t)}[_0x2397ca(2905)](e,t){const x={_0x4f47a5:3465,_0x4c0c25:2829},i=_0x2397ca,s=e[i(x._0x4f47a5)]||e.shapePositions;switch(e.radius=e.radius||10,s){case"pipeline":t[i(3465)]=PolylineVolumeStyleConver.getShapeForPipeline(e);break;case i(x._0x4c0c25):t.shape=PolylineVolumeStyleConver.getShapeForCircle(e);break;case"star":t.shape=PolylineVolumeStyleConver.getShapeForStar(e);break;default:t.shape=s;break}}[_0x2397ca(4065)](e,t,x,i){this[_0x2397ca({_0x39d3db:3390}._0x39d3db)](e,t,x,i)}static toJSON(e,t,x){const i=_0x2397ca;return!this[i(1814)]&&(this[i(1814)]=new PolylineVolumeStyleConver),this[i(1814)].isEntity=x,this.polylineVolumeStyleConver.toJSON(e,t)}_toOneJson(e,t,x){this._toOneJson_Poly(e,t,x)}static[_0x2397ca(381)](e){const t={_0xbf65f3:1200,_0x2665fe:2212},x=_0x2397ca,i=e.radius??1,s=e[x(t._0xbf65f3)]??i/3,o=Math.ceil(360/(e.slices??60)),r=e[x(393)]??0,c=e.endAngle??r+360,_=e.vscale??1,l=e.hscale??1,h=[];for(let d=r;d<=c;d+=o){const u=Cesium__namespace.Math.toRadians(d);h.push(new Cesium__namespace.Cartesian2(i*l*Math.cos(u),i*_*Math[x(t._0x2665fe)](u)))}for(let d=c;d>=r;d-=o){const u=Cesium__namespace.Math[x(2500)](d);h.push(new Cesium__namespace.Cartesian2((i-s)*l*Math.cos(u),(i-s)*_*Math.sin(u)))}return h}static getShapeForCircle(e){const t={_0xf16094:1064,_0x29469e:393,_0xefc8c5:1032,_0x1c6dec:2500,_0x683f47:1314},x=_0x2397ca,i=e.radius??1,s=Math[x(t._0xf16094)](360/(e.slices??60)),o=e[x(t._0x29469e)]??0,r=e.endAngle??o+360,c=e[x(t._0xefc8c5)]??1,_=e.hscale??1,l=[];for(let h=o;h<=r;h+=s){const d=Cesium__namespace.Math[x(t._0x1c6dec)](h);l.push(new Cesium__namespace.Cartesian2(i*_*Math[x(t._0x683f47)](d),i*c*Math.sin(d)))}return l}static getShapeForStar(e){const t={_0x1c6a53:3189,_0x58a902:1200,_0x31ed63:393},x=_0x2397ca,i=e[x(t._0x1c6a53)]??1,s=i-(e[x(t._0x58a902)]??i/3),o=e.slices??6,r=Cesium__namespace.Math[x(2500)](e[x(t._0x31ed63)]??0),c=Math.PI/o,_=2*o,l=new Array(_);for(let h=0;h<_;h++){const d=h%2===0?i:s,u=r+h*c;l[h]=new Cesium__namespace.Cartesian2(Math.cos(u)*d,Math[x(2212)](u)*d)}return l}}class RectangleStyleConver extends BaseStyleConver{static[_0x2397ca(2868)](e,t,x){return!this[_0x2397ca({_0x333fa2:2709}._0x333fa2)]&&(this.rectangleStyleConver=new RectangleStyleConver),this.rectangleStyleConver.isEntity=x,this.rectangleStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const x={_0x2d5461:3872,_0x353819:2444,_0x1f46a0:3791},i=_0x2397ca;super._toCesiumValBefore(e,t),e.clampToGround?(e.hasOwnProperty(i(3872))&&delete e[i(x._0x2d5461)],e.hasOwnProperty("diffHeight")&&delete e.diffHeight,e[i(x._0x353819)](i(x._0x1f46a0))&&delete e.extrudedHeight):(e.clampToGround=!1,t.height=0)}[_0x2397ca(4065)](e,t,x,i){const s={_0x41e5e2:2722,_0x995ffb:2353},o=_0x2397ca;switch(e){case"height":i.height=t,x.diffHeight&&(i[o(3791)]=Number(x.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace.defined(x.height)&&(i.extrudedHeight=x.height+t);break;case o(s._0x41e5e2):i[o(2722)]=t,!x.stRotation&&(i.stRotation=i.rotation);break;case"rotationDegree":i.rotation=Cesium__namespace.Math.toRadians(t),!x[o(s._0x995ffb)]&&(i.stRotation=i.rotation);break;case"stRotation":i.stRotation=t;break;case"stRotationDegree":i[o(2353)]=Cesium__namespace[o(3876)].toRadians(t);break;case"clampToGround":t?i.heightReference=Cesium__namespace.HeightReference.CLAMP_TO_GROUND:i.heightReference=Cesium__namespace.HeightReference.NONE;break;default:this._toOneCesiumVal_Poly(e,t,x,i);break}}static[_0x2397ca(1180)](e,t,x){const i={_0x4704de:2709},s=_0x2397ca;return!this[s(2709)]&&(this[s(i._0x4704de)]=new RectangleStyleConver),this.rectangleStyleConver[s(3150)]=x,this.rectangleStyleConver.toJSON(e,t)}_toOneJson(e,t,x){this._toOneJson_Poly(e,t,x)}}class RectangularSensorStyleConver extends BaseStyleConver{static toCesiumVal(e,t){return!this[_0x2397ca({_0x466389:1852}._0x466389)]&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver.isEntity=!0,this.rectangularSensorStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){super._toCesiumValBefore(e,t)}[_0x2397ca(2118)](){return["lineOpacity","scanPlaneOpacity"]}_toOneCesiumVal(e,t,x,i){const s={_0x490bb3:3935,_0x15c72f:396,_0x178e40:214,_0x4a7149:4010,_0x58bcad:396,_0x3a748a:1135,_0x5afac1:2134,_0x4f64ec:1131,_0x2e2663:3876},o=_0x2397ca;switch(e){case"lineColor":{let r=Cesium__namespace.Color.fromCssColorString(t||o(s._0x490bb3));Cesium__namespace.defined(x[o(214)])?r=r[o(s._0x15c72f)](Number(x[o(s._0x178e40)])):Cesium__namespace.defined(x[o(s._0x4a7149)])&&(r=r[o(s._0x58bcad)](Number(x.opacity))),Cesium__namespace.defined(x.globalAlpha)&&x.globalAlpha!==1&&(r=r[o(396)](r.alpha*x[o(2182)])),i.lineColor=r;break}case o(s._0x3a748a):{let r=Cesium__namespace[o(s._0x5afac1)].fromCssColorString(t||"#ffffff");Cesium__namespace.defined(x.scanPlaneOpacity)?r=r.withAlpha(Number(x[o(2820)])):Cesium__namespace.defined(x.opacity)&&(r=r[o(396)](Number(x.opacity))),Cesium__namespace.defined(x[o(2182)])&&x.globalAlpha!==1&&(r=r.withAlpha(r.alpha*x.globalAlpha)),i[o(s._0x3a748a)]=r;break}case o(s._0x4f64ec):i[o(818)]=Cesium__namespace.Math[o(2500)](t);break;case"yHalfAngleDegree":i.yHalfAngle=Cesium__namespace[o(s._0x2e2663)].toRadians(t);break;case o(2491):i.showThroughEllipsoid=!t;break;default:this[o(3390)](e,t,x,i);break}}static toJSON(e,t){const x={_0x17c102:1180},i=_0x2397ca;return!this[i(1852)]&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver.isEntity=!0,this.rectangularSensorStyleConver[i(x._0x17c102)](e,t)}_toOneJson(e,t,x){this[_0x2397ca({_0x4c9e20:2373}._0x4c9e20)](e,t,x)}}class WallStyleConver extends BaseStyleConver{static toCesiumVal(e,t,x){const i={_0x381879:389},s=_0x2397ca;return!this.wallStyleConver&&(this[s(i._0x381879)]=new WallStyleConver),this.wallStyleConver.isEntity=x,this.wallStyleConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,x,i){this[_0x2397ca(3390)](e,t,x,i)}static toJSON(e,t,x){const i={_0x5a0180:389,_0x51b1b4:389,_0xc6d456:1180},s=_0x2397ca;return!this[s(i._0x5a0180)]&&(this[s(i._0x51b1b4)]=new WallStyleConver),this[s(i._0x51b1b4)].isEntity=x,this.wallStyleConver[s(i._0xc6d456)](e,t)}_toOneJson(e,t,x){this._toOneJson_Poly(e,t,x)}}var czm_cellular=`
// Permutation polynomial: (34x^2 + x) mod 289
vec3 _czm_permute289(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec2 czm_cellular(vec2 P) {
  #define K 0.142857142857 // 1/7
  #define Ko 0.428571428571 // 3/7
  #define jitter 1.0 // Less gives more regular pattern
  vec2 Pi = mod(floor(P), 289.0);
  vec2 Pf = fract(P);
  vec3 oi = vec3(-1.0, 0.0, 1.0);
  vec3 of = vec3(-0.5, 0.5, 1.5);
  vec3 px = _czm_permute289(Pi.x + oi);
  vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13
  vec3 ox = fract(p * K) - Ko;
  vec3 oy = mod(floor(p * K), 7.0) * K - Ko;
  vec3 dx = Pf.x + 0.5 + jitter * ox;
  vec3 dy = Pf.y - of + jitter * oy;
  vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared
  p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 0.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared
  p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 1.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared
    // Sort out the two smallest distances (F1, F2)
  vec3 d1a = min(d1, d2);
  d2 = max(d1, d2); // Swap to keep candidates for F2
  d2 = min(d2, d3); // neither F1 nor F2 are now in d3
  d1 = min(d1a, d2); // F1 is now in d1
  d2 = max(d1a, d2); // Swap to keep candidates for F2
  d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller
  d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x
  d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz
  d1.y = min(d1.y, d1.z); // nor in  d1.z
  d1.y = min(d1.y, d2.x); // F2 is in d1.y, we're done.
  return sqrt(d1.xy);
}
`,czm_snoise=`/**
 * @license
 * Description : Array and textureless GLSL 2D/3D/4D simplex
 *               noise functions.
 *      Author : Ian McEwan, Ashima Arts.
 *  Maintainer : ijm
 *     Lastmod : 20110822 (ijm)
 *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
 *               Distributed under the MIT License. See LICENSE file.
 *               https://github.com/ashima/webgl-noise
 */

vec4 _czm_mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec3 _czm_mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec2 _czm_mod289(vec2 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

float _czm_mod289(float x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 _czm_permute(vec4 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec3 _czm_permute(vec3 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

float _czm_permute(float x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec4 _czm_taylorInvSqrt(vec4 r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

float _czm_taylorInvSqrt(float r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 _czm_grad4(float j, vec4 ip) {
  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
  vec4 p, s;

  p.xyz = floor(fract(vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
  s = vec4(lessThan(p, vec4(0.0)));
  p.xyz = p.xyz + (s.xyz * 2.0 - 1.0) * s.www;

  return p;
}

/**
 * DOC_TBA
 *
 * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}
 *
 * @name czm_snoise
 * @glslFunction
 *
 * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>
 * @see Stefan Gustavson's paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>
 */
float czm_snoise(vec2 v) {
  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0
  0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)
  -0.577350269189626,  // -1.0 + 2.0 * C.x
  0.024390243902439); // 1.0 / 41.0
    // First corner
  vec2 i = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);

    // Other corners
  vec2 i1;
    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0
    //i1.y = 1.0 - i1.x;
  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    // x0 = x0 - 0.0 + 0.0 * C.xx ;
    // x1 = x0 - i1 + 1.0 * C.xx ;
    // x2 = x0 - 1.0 + 2.0 * C.xx ;
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;

    // Permutations
  i = _czm_mod289(i); // Avoid truncation effects in permutation
  vec3 p = _czm_permute(_czm_permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));

  vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
  m = m * m;
  m = m * m;

    // Gradients: 41 points uniformly over a line, mapped onto a diamond.
    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)
  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;

    // Normalise gradients implicitly by scaling m
    // Approximation of: m *= inversesqrt( a0*a0 + h*h );
  m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);

    // Compute final noise value at P
  vec3 g;
  g.x = a0.x * x0.x + h.x * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

float czm_snoise(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

    // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  vec3 x1 = x0 - i1 + C.xxx;
  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y

    // Permutations
  i = _czm_mod289(i);
  vec4 p = _czm_permute(_czm_permute(_czm_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0)) + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;
    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;
  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

    //Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

    // Mix final noise value
  vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));
}

float czm_snoise(vec4 v) {
  const vec4 C = vec4(0.138196601125011,  // (5 - sqrt(5))/20  G4
  0.276393202250021,  // 2 * G4
  0.414589803375032,  // 3 * G4
  -0.447213595499958); // -1 + 4 * G4

    // (sqrt(5) - 1)/4 = F4, used once below
    #define F4 0.309016994374947451

    // First corner
  vec4 i = floor(v + dot(v, vec4(F4)));
  vec4 x0 = v - i + dot(i, C.xxxx);

    // Other corners

    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)
  vec4 i0;
  vec3 isX = step(x0.yzw, x0.xxx);
  vec3 isYZ = step(x0.zww, x0.yyz);
    //  i0.x = dot( isX, vec3( 1.0 ) );
  i0.x = isX.x + isX.y + isX.z;
  i0.yzw = 1.0 - isX;
    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );
  i0.y += isYZ.x + isYZ.y;
  i0.zw += 1.0 - isYZ.xy;
  i0.z += isYZ.z;
  i0.w += 1.0 - isYZ.z;

    // i0 now contains the unique values 0,1,2,3 in each channel
  vec4 i3 = clamp(i0, 0.0, 1.0);
  vec4 i2 = clamp(i0 - 1.0, 0.0, 1.0);
  vec4 i1 = clamp(i0 - 2.0, 0.0, 1.0);

    //  x0 = x0 - 0.0 + 0.0 * C.xxxx
    //  x1 = x0 - i1  + 1.0 * C.xxxx
    //  x2 = x0 - i2  + 2.0 * C.xxxx
    //  x3 = x0 - i3  + 3.0 * C.xxxx
    //  x4 = x0 - 1.0 + 4.0 * C.xxxx
  vec4 x1 = x0 - i1 + C.xxxx;
  vec4 x2 = x0 - i2 + C.yyyy;
  vec4 x3 = x0 - i3 + C.zzzz;
  vec4 x4 = x0 + C.wwww;

    // Permutations
  i = _czm_mod289(i);
  float j0 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w) + i.z) + i.y) + i.x);
  vec4 j1 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w + vec4(i1.w, i2.w, i3.w, 1.0)) + i.z + vec4(i1.z, i2.z, i3.z, 1.0)) + i.y + vec4(i1.y, i2.y, i3.y, 1.0)) + i.x + vec4(i1.x, i2.x, i3.x, 1.0));

    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope
    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.
  vec4 ip = vec4(1.0 / 294.0, 1.0 / 49.0, 1.0 / 7.0, 0.0);

  vec4 p0 = _czm_grad4(j0, ip);
  vec4 p1 = _czm_grad4(j1.x, ip);
  vec4 p2 = _czm_grad4(j1.y, ip);
  vec4 p3 = _czm_grad4(j1.z, ip);
  vec4 p4 = _czm_grad4(j1.w, ip);

    // Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;
  p4 *= _czm_taylorInvSqrt(dot(p4, p4));

    // Mix contributions from the five corners
  vec3 m0 = max(0.6 - vec3(dot(x0, x0), dot(x1, x1), dot(x2, x2)), 0.0);
  vec2 m1 = max(0.6 - vec2(dot(x3, x3), dot(x4, x4)), 0.0);
  m0 = m0 * m0;
  m1 = m1 * m1;
  return 49.0 * (dot(m0 * m0, vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2))) + dot(m1 * m1, vec2(dot(p3, x3), dot(p4, x4))));
}
`,LineDotDashMaterial=`uniform vec4 color;
uniform vec4 gapColor;
uniform float dashLength;
uniform float dashPattern;
in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;

  float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
  float maskIndex = floor(dashPosition * maskLength);
  float maskTest = floor(dashPattern / pow(2.0, maskIndex));

  vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;
  if(fragColor.a < 0.005) {
    float dashPosition2 = fract(pos.x / (dashLength * 0.25 * czm_pixelRatio));
    float maskIndex2 = floor(dashPosition2 * maskLength);
    float maskTest2 = floor(dashPattern / pow(2.0, maskIndex2));
    fragColor = (mod(maskTest2, 2.0) < 1.0) ? gapColor : color;
    if(fragColor.a < 0.005) {
      discard;
    }
  }

  fragColor = czm_gammaCorrect(fragColor);
  material.emission = fragColor.rgb;
  material.alpha = fragColor.a;
  return material;
}
`,LineFlowMaterial=_0x2397ca(1706),LineFlowColorMaterial=`uniform vec4 color;
uniform float speed;
uniform float startTime;
uniform float percent;
uniform float alpha;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);
  t *= (1.0 + percent);
  float alpha1 = smoothstep(t - percent, t, st.s) * step(-t, -st.s);
  alpha1 += alpha;
  material.diffuse = color.rgb;
  material.alpha = alpha1 * globalAlpha;
  return material;
}
`,ODLineMaterial=`uniform vec4 color;
uniform vec4 bgColor;
uniform float speed;
uniform float startTime;
uniform float bidirectional;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);

  t *= 1.03;
  float alpha0 = smoothstep(t - 0.03, t, st.s) * step(st.s, t);
  float mt = 1. - t;
  float alpha1 = smoothstep(mt + 0.03, mt, st.s) * step(mt, st.s);

  float a0 = step(abs(bidirectional - 0.0) - 0.001, 0.);
  float a1 = step(abs(bidirectional - 1.0) - 0.001, 0.);
  float db = step(abs(bidirectional - 2.0) - 0.001, 0.);
  float alpha = alpha0 * (a0 + db) + alpha1 * (a1 + db);
  alpha = clamp(alpha, 0., 1.);

  material.diffuse = color.rgb * alpha + bgColor.rgb * (1. - alpha);
  material.alpha = (color.a * alpha + bgColor.a * (1. - alpha)) * globalAlpha;

    // if (useImageAndRepeat.x != 0.) {
    //     float repeat = useImageAndRepeat.y;
    //     vec4 marsImageColor = texture(image, fract(vec2(fract((st.s-t)*repeat), st.t)));
    //     material.diffuse = marsImageColor.rgb;
    //     material.alpha = marsImageColor.a;
    // }

  return material;
}
`,LineFlickerMaterial=_0x2397ca(3e3),LineTrailMaterial=`uniform vec4 bgColor;
uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec3 fragColor = color.rgb;
  if(st.t > 0.45 && st.t < 0.55) {
    fragColor = vec3(1.0);
  }
  material.alpha = color.a * 1.5 * smoothstep(.0, 1., fract(st.s - time));
  material.diffuse = max(fragColor.rgb * material.alpha, fragColor.rgb);

  if(material.alpha < bgColor.a) {
    material.alpha = bgColor.a;
    material.diffuse = bgColor.rgb;
  }
  material.alpha = material.alpha * globalAlpha;

  return material;
}
`,LineBloomMaterial=`uniform vec4 color;
uniform float speed;
uniform float glow;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float t = fract(speed * czm_frameNumber / 1000.0);
  t *= 1.03;

  float alpha = smoothstep(t - 0.03, t, st.s) * step(-t, -st.s);
  alpha += 0.1;

  vec4 fragColor;
  fragColor.rgb = (color.rgb) / 0.5;
  fragColor = czm_gammaCorrect(fragColor);
  material.diffuse = fragColor.rgb;
  material.alpha = alpha * globalAlpha;
  material.emission = fragColor.rgb * glow;
  return material;
}
`,DigitalFlowMaterial=_0x2397ca(202),LineThreeDashMaterial=_0x2397ca(2723),WallScrollMaterial=`uniform sampler2D image;
uniform float speed;
uniform vec4 color;
uniform float count;
uniform bool axisY;
uniform bool reverse;
uniform bool bloom;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec4 colorImage;
  if(axisY) {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.s - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.s + time)));
  } else {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.t - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.t + time)));
  }

  float perDis = 1.0 / count / 3.0;
  material.alpha = colorImage.a * color.a * smoothstep(.2, 1., distance(st.t * perDis, 1. + perDis)) * globalAlpha;

  if(bloom) {
    //泛光
    vec4 fragColor;
    fragColor.rgb = (colorImage.rgb + color.rgb) / 1.0;
    fragColor = czm_gammaCorrect(fragColor);

    material.diffuse = colorImage.rgb;
    material.emission = fragColor.rgb;
  } else {
    material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);
    material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);
  }
  return material;
}
`,ScanLineMaterial=`uniform vec4 color;
uniform float globalAlpha;

float circle(vec2 uv, float r, float blur) {
  float d = length(uv) * 2.0;
  float c = smoothstep(r + blur, r, d);
  return c;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st - .5;
  material.diffuse = color.rgb;
  material.emission = vec3(0);

  float t = fract(czm_frameNumber * speed / 1000.0);
  float s = 0.3;
  float radius1 = smoothstep(.0, s, t) * 0.9;
  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);
  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);
  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;
  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);

  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2 * 0.1 + alpha3 * 0.1);
  material.alpha *= color.a * globalAlpha;

  return material;
}
`,CircleScanMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 imgC = texture(image, st);
  if(imgC.a > .0) {
    material.diffuse = color.rgb;
  }
  material.alpha = imgC.a * color.a * globalAlpha;
  return material;
}
`,CircleWaveMaterial=`uniform float globalAlpha;
uniform vec4 color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  material.diffuse = 1.5 * color.rgb;

  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5, 0.5));
  float currTime;
  if(time < 0.0) {
    currTime = speed * czm_frameNumber / 1000.0;
  } else {
    currTime = time;
  }

  float per = fract(currTime);
  if(count == 1.0) {
    if(dis > per * 0.5) {
      discard;
    } else {
      material.alpha = color.a * dis / per / 2.0 * globalAlpha;
    }
  } else {
    vec3 str = materialInput.str;
    if(abs(str.z) > 0.001) {
      discard;
    }
    if(dis > 0.5) {
      discard;
    } else {
      float perDis = 0.5 / count;
      float disNum;
      float bl = 0.0;
      for(float i = 0.0; i <= 99.0; i+=1.0) {
        if(i <= count) {
          disNum = perDis * i - dis + per / count;
          if(disNum > 0.0) {
            if(disNum < perDis) {
              bl = 1.0 - disNum / perDis;
            } else if(disNum - perDis < perDis) {
              bl = 1.0 - abs(1.0 - disNum / perDis);
            }
            material.alpha = pow(bl, (1.0 + 10.0 * (1.0 - gradient))) * color.a * globalAlpha;
          }
        }
      }
    }
  }
  return material;
}
`,RadarLineMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st * 2.0 - 1.0;
  float t = czm_frameNumber * speed / 1000.0;
  vec3 col = vec3(0.0);
  vec2 p = vec2(sin(t), cos(t));
  float d = length(st - dot(p, st) * p);
  if(dot(st, p) < 0.) {
    d = length(st);
  }

  col = .006 / d * color.rgb;

  if(distance(st, vec2(0)) > 0.99) {
    col = color.rgb;
  }

  material.alpha = pow(length(col), 2.0) * globalAlpha;
  material.diffuse = col * 3.0;
  return material;
}
`,RadarWaveMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

#define PI 3.14159265359

float rand(vec2 co) {
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 pos = st - vec2(0.5);
  float time = czm_frameNumber * speed / 1000.0;
  float r = length(pos);
  float t = atan(pos.y, pos.x) - time * 2.5;
  float a = (atan(sin(t), cos(t)) + PI) / (2.0 * PI);
  float ta = 0.5;
  float v = smoothstep(ta - 0.05, ta + 0.05, a) * smoothstep(ta + 0.05, ta - 0.05, a);
  vec3 flagColor = color.rgb * v;
  float blink = pow(sin(time * 1.5) * 0.5 + 0.5, 0.8);
  flagColor = color.rgb * pow(a, 8.0 * (.2 + blink)) * (sin(r * 500.0) * .5 + .5);
  flagColor = flagColor * pow(r, 0.4);
  material.alpha = length(flagColor) * 1.3 * globalAlpha;
  material.diffuse = flagColor * 3.0;
  return material;
}
`,RectSlideMaterial=_0x2397ca(978),EllipsoidElectricMaterial=`precision highp float;
precision highp int;

#define pi 3.1415926535
#define PI2RAD 0.01745329252
#define TWO_PI (2. * PI)

uniform vec4 marscolor;
uniform float speed;
uniform float globalAlpha;

float time;
float rands(float p) {
  return fract(sin(p) * 10000.0);
}
float noise(vec2 p) {
  float t = time / 20000.0;
  if(t > 1.0)
    t -= floor(t);
  return rands(p.x * 14. + p.y * sin(t) * 0.5);
}
vec2 sw(vec2 p) {
  return vec2(floor(p.x), floor(p.y));
}
vec2 se(vec2 p) {
  return vec2(ceil(p.x), floor(p.y));
}
vec2 nw(vec2 p) {
  return vec2(floor(p.x), ceil(p.y));
}
vec2 ne(vec2 p) {
  return vec2(ceil(p.x), ceil(p.y));
}
float smoothNoise(vec2 p) {
  vec2 inter = smoothstep(0.0, 1.0, fract(p));
  float s = mix(noise(sw(p)), noise(se(p)), inter.x);
  float n = mix(noise(nw(p)), noise(ne(p)), inter.x);
  return mix(s, n, inter.y);
}
float fbm(vec2 p) {
  float z = 2.0;
  float rz = 0.0;
  vec2 bp = p;
  for(float i = 1.0; i < 6.0; i++) {
    rz += abs((smoothNoise(p) - 0.5) * 2.0) / z;
    z *= 2.0;
    p *= 2.0;
  }
  return rz;
}
czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber * speed / 100.0;

  vec2 uv = vUv;
  vec2 uv2 = vUv;
  // if (uv.y < 0.5) {
  //     discard;
  // }
  uv *= 4.;
  float rz = fbm(uv);
  uv /= exp(mod(time * 2.0, pi));
  rz *= pow(15., 1.0);
  vec4 marscolor = mix(vec4(color.rgb, 1.0) / rz, vec4(color.rgb, 0.1), 0.5);
  if(uv2.x < 0.05) {
    marscolor = mix(vec4(color.rgb, 0.1), marscolor, uv2.x / 0.05);
  }
  if(uv2.x > 0.95) {
    marscolor = mix(marscolor, vec4(color.rgb, 0.1), (uv2.x - 0.95) / 0.05);
  }

  material.alpha = marscolor.a * 2.0 * globalAlpha;
  material.diffuse = max(marscolor.rgb + marscolor.rgb * material.alpha, marscolor.rgb);

  return material;
}
`,EllipsoidWaveMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);
  float alpha = abs(smoothstep(0.5, 1., fract(-st.t - time)));
  alpha += .1;
  material.alpha = alpha * globalAlpha;
  material.diffuse = color.rgb;
  return material;
}
`,PolyGradientMaterial=_0x2397ca(1132),AsphaltMaterial=_0x2397ca(2149),BlobMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 1.0 - F.x * F.x;

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,FacetMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 0.1 + (F.y - F.x);

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,PolyGrassMaterial=_0x2397ca(1301),PolyWoodMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform vec2 noiseScale;
uniform float grainFrequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455
  vec2 st = materialInput.st;

  vec2 noisevec;
  noisevec.x = czm_snoise(st * noiseScale.x);
  noisevec.y = czm_snoise(st * noiseScale.y);

  vec2 location = st + noisevec;
  float dist = sqrt(location.x * location.x + location.y * location.y);
  dist *= frequency;

  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;
  if(r > 1.0)
    r = 2.0 - r;

  vec4 color = mix(evenColor, oddColor, r);

  //streaks
  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;
  color.rgb += evenColor.rgb * r;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,ImageMaterial=`uniform sampler2D image;
uniform float opacity;
uniform vec4 color;
uniform float globalAlpha;
uniform bool flipx;
uniform bool flipy;
uniform bool noWhite;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(flipx){
    st.x = st.x + (0.5 - st.x) * 2.0;
  }
  if(flipy){
    st.y = st.y + (0.5 - st.y) * 2.0;
  }

  vec4 colorImage;
  if(speed != 0.0)
    colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));
  else
    colorImage = texture(image, st);

  if(noWhite && colorImage.rgb == vec3(1.0)) {
    discard;
  }
  material.alpha = colorImage.a * opacity * color.a * globalAlpha;
  material.diffuse = colorImage.rgb * color.rgb;
  return material;
}
`,WaterLightMaterial=`uniform float globalAlpha;

float time = 0.0;
mat2 m2 = mat2(0.80, 0.60, -0.60, 0.80);

mat2 mars3d_makem(in float theta) {
  float c = cos(theta);
  float s = sin(theta);
  return mat2(c, -s, s, c);
}

float noise(in vec2 x) {
  return texture(specularMap, x * .01).x;
}

float mars3d_fbm(in vec2 p) {
  float z = 2.;
  float rz = 0.;
  for(float i = 1.; i < 7.; i++) {
    rz += abs((noise(p) - 0.5) * 2.) / z;
    z = z * 2.;
    p = p * 2.;
    p *= m2;
  }
  return rz;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber / 200.0;
  vec2 p = 2. * vUv.xy - vec2(1., 1.);
  vec2 bp = p;

  #ifndef CENTERED
  p += 5.;
  p *= 30.;
  #endif
  float rb = mars3d_fbm(p * .5 + time * .17) * .1;
  rb = sqrt(rb);
  #ifndef CENTERED
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 1.);
  #else
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 2.);
  #endif

    //coloring
  float rz = mars3d_fbm(p * .9 - time * .7);
  rz *= dot(bp * 5., bp) + .5;
  rz *= sin(p.x * .5 + time * 4.) * 1.5;
  vec3 col = vec3(.04, 0.07, 0.45) / (.1 - rz);
  vec4 fragColor = vec4(sqrt(abs(col)), 1.0);
  material.alpha = fragColor.a * alpha * globalAlpha;
  material.diffuse = fragColor.rgb * .5;

    // cesium
  float frequency = 2000.0;
  float amplitude = 10.0;
  float fadeFactor = 1.0;
  vec4 mapColor = texture(normalMap, materialInput.st);
  float specularMapValue = texture(normalMap, materialInput.st).r;
  specularMapValue = 1.0;

  float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);
  vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);
  vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));
  normalTangentSpace.xy /= fade;
  normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);
  normalTangentSpace = normalize(normalTangentSpace);

  float mars3dPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 0.1)), 0.0, 1.0);
  material.diffuse += (0.1 * mars3dPerturbationRatio);
  material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);
  material.specular = 0.5;
  material.shininess = 10.0;

  return material;
}
`,NeonLightMaterial=`uniform float globalAlpha;

float marsstepping(float t) {
  if(t < 0.)
    return -1. + pow(1. + t, 2.);
  else
    return 1. - pow(1. - t, 2.);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  vec2 uv = 2. * vUv.xy - vec2(1., 1.);

  uv *= 2.0;
  vec4 fragColor = vec4(0.);
  uv = normalize(uv) * length(uv);

  float time = czm_frameNumber / speed;
  for(float i = 0.0; i < 12.0; i+=1.0) {
    float t = time + i * 3.141592 / 12. * (5. + 1. * marsstepping(sin(time * 3.)));
    vec2 p = vec2(cos(t), sin(t));
    p *= cos(time + i * 3.141592 * cos(time / 8.));
    vec3 col = cos(vec3(0, 1, -1) * 3.141592 * 2. / 3. + 3.141925 * (time / 2. + i / 5.)) * 0.5 + 0.5;
    fragColor += vec4(0.05 / length(uv - p * 0.9) * col, 1.0);
  }
  fragColor.xyz = pow(fragColor.xyz, vec3(3.));
  fragColor.w = 1.0;

  vec4 baseColor = vec4(fragColor.rgb + color.rgb * 2.0, fragColor.r * 0.2);
  material.alpha = baseColor.a * globalAlpha;
  material.diffuse = baseColor.rgb;

  return material;
}
`;Cesium__namespace.ShaderSource._czmBuiltinsAndUniforms.czm_cellular=czm_cellular,Cesium__namespace.ShaderSource[_0x2397ca(1786)].czm_snoise=czm_snoise,register$3(LineDotDash,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,1,1),gapColor:new Cesium__namespace[_0x2397ca(2134)](0,0,0,0),dashLength:16,dashPattern:255},source:LineDotDashMaterial},translucent:!0}),register$3(LineFlow,{fabric:{uniforms:{image:Cesium__namespace[_0x2397ca(2206)][_0x2397ca(1029)],color:new Cesium__namespace.Color(1,1,1,0),repeat:new Cesium__namespace.Cartesian2(1,1),axisY:!1,mixt:!1,speed:10,time:-1,hasImage2:!1,image2:Cesium__namespace.Material.DefaultImageId,color2:new Cesium__namespace.Color(1,1,1),globalAlpha:1},source:LineFlowMaterial},translucent:!0}),register$3(LineFlowColor,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),startTime:0,speed:2,percent:.04,alpha:.1,globalAlpha:1},source:LineFlowColorMaterial},translucent:!0}),register$3(ODLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,.7),startTime:0,speed:20,bgColor:new Cesium__namespace.Color(1,1,0,.1),bidirectional:0,globalAlpha:1},source:ODLineMaterial},translucent:!0}),register$3(LineFlicker,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](1,0,0,.7),speed:10,globalAlpha:1},source:LineFlickerMaterial},translucent:!0}),register$3(LineTrail,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),bgColor:new Cesium__namespace.Color(0,0,0,0),speed:5,globalAlpha:1},source:LineTrailMaterial},translucent:!0}),register$3(LineBloom,{fabric:{uniforms:{color:Cesium__namespace.Color.ORANGE,glow:1,speed:5,globalAlpha:1},source:LineBloomMaterial},translucent:!0}),register$3(DigitalFlow,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](0,0,0,.8),image:Cesium__namespace.Material.DefaultImageId,speed:10,glow:10,flowGlow:1,segment:3,globalAlpha:1},source:DigitalFlowMaterial},translucent:!0}),register$3(LineThreeDash,{fabric:{uniforms:{color:Cesium__namespace.Color[_0x2397ca(2084)],dashLength:64,widthRatio:.1,sidesColor:Cesium__namespace[_0x2397ca(2134)].WHITE,sidesDashLength:32,sidesWidthRatio:.1,dashPattern:255,globalAlpha:1},source:LineThreeDashMaterial},translucent:!0}),register$3(WallScroll,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](0,0,0,1),image:Cesium__namespace.Material[_0x2397ca(1029)],count:1,speed:5,reverse:!1,axisY:!1,bloom:!1,globalAlpha:1},source:WallScrollMaterial},translucent:!0}),register$3(ScanLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,1),speed:10,globalAlpha:1},source:ScanLineMaterial},translucent:!0}),register$3(CircleScan,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,1),image:Cesium__namespace.Material.DefaultImageId,globalAlpha:1},source:CircleScanMaterial},translucent:!0}),register$3(CircleWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](1,1,0,1),speed:10,time:-1,count:1,gradient:.1,globalAlpha:1},source:CircleWaveMaterial},translucent:!0}),register$3(RadarLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:RadarLineMaterial},translucent:!0}),register$3(RadarWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](0,1,1,.7),speed:5,globalAlpha:1},source:RadarWaveMaterial},translucent:!0}),register$3(RectSlide,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x2397ca(1029)],color:Cesium__namespace[_0x2397ca(2134)].WHITE,speed:10,pure:!1,diffusePower:1.3,globalAlpha:1},source:RectSlideMaterial},translucent:!0}),register$3(EllipsoidElectric,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidElectricMaterial},translucent:!0}),register$3(EllipsoidWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidWaveMaterial},translucent:!0}),register$3(PolyGradient,{fabric:{uniforms:{color:new Cesium__namespace[_0x2397ca(2134)](1,1,0,.5),diffusePower:1.6,alphaPower:1.5,center:new Cesium__namespace.Cartesian2(.5,.5),globalAlpha:1},source:PolyGradientMaterial},translucent:!0}),register$3(PolyAsphalt,{fabric:{uniforms:{color:new Cesium__namespace.Color(.15,.15,.15,1),size:.02,frequency:.2,globalAlpha:1},source:AsphaltMaterial},translucent:function(n){const e={_0x4059ca:1089},t=_0x2397ca;return n.uniforms[t(e._0x4059ca)].alpha<1}}),register$3(PolyBlob,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(1,1,1,.5),oddColor:new Cesium__namespace.Color(0,0,1,.5),frequency:10,globalAlpha:1},source:BlobMaterial},translucent:function(n){const e=_0x2397ca,t=n[e(2554)];return t.evenColor.alpha<1||t[e(869)].alpha<0}}),register$3(PolyFacet,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.25,.25,.75),oddColor:new Cesium__namespace.Color(.75,.75,.75,.75),frequency:10,globalAlpha:1},source:FacetMaterial},translucent:function(n){const e={_0x3e5158:2708,_0x1ba2af:2708},t=_0x2397ca,x=n[t(2554)];return x.evenColor[t(e._0x3e5158)]<1||x.oddColor[t(e._0x1ba2af)]<0}}),register$3(PolyGrass,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.4,.1,1),oddColor:new Cesium__namespace.Color(.1,.1,.1,1),frequency:1.5,globalAlpha:1},source:PolyGrassMaterial},translucent:function(n){const e={_0x2379e3:869},t=_0x2397ca,x=n.uniforms;return x.evenColor.alpha<1||x[t(e._0x2379e3)].alpha<1}}),register$3(PolyWood,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.6,.3,.1,1),oddColor:new Cesium__namespace.Color(.4,.2,.07,1),frequency:3,noiseScale:new Cesium__namespace.Cartesian2(.7,.5),grainFrequency:27,globalAlpha:1},source:PolyWoodMaterial},translucent:function(n){const e={_0x14130e:2554},t=_0x2397ca,x=n[t(e._0x14130e)];return x.evenColor[t(2708)]<1||x.oddColor.alpha<1}}),register$3(Image2,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x2397ca(1029)],color:Cesium__namespace.Color.WHITE,opacity:1,speed:0,flipx:!1,flipy:!1,noWhite:!0,globalAlpha:1},source:ImageMaterial},translucent:!0}),register$3(WaterLight,{fabric:{uniforms:{alpha:.3,specularMap:Cesium__namespace.Material.DefaultImageId,normalMap:Cesium__namespace.buildModuleUrl("Assets/Textures/waterNormals.jpg"),globalAlpha:1},source:WaterLightMaterial},translucent:!0}),register$3(NeonLight,{fabric:{uniforms:{color:Cesium__namespace.Color[_0x2397ca(3970)],speed:1,globalAlpha:1},source:NeonLightMaterial},translucent:!0}),registerPropertyClass(Color$2,Cesium__namespace.ColorMaterialProperty),registerPropertyClass(Image$1,Cesium__namespace.ImageMaterialProperty),registerPropertyClass(PolylineArrow,Cesium__namespace.PolylineArrowMaterialProperty),registerPropertyClass(PolylineOutline,Cesium__namespace.PolylineOutlineMaterialProperty),registerPropertyClass(PolylineDash,Cesium__namespace.PolylineDashMaterialProperty),registerPropertyClass(PolylineGlow,Cesium__namespace.PolylineGlowMaterialProperty),registerPropertyClass(Grid,Cesium__namespace.GridMaterialProperty),registerPropertyClass(Checkerboard,Cesium__namespace.CheckerboardMaterialProperty),registerPropertyClass(Stripe,Cesium__namespace.StripeMaterialProperty);class TextMaterial extends Cesium__namespace.Material{constructor(e={}){super(conventOptions$1(e))}}function conventOptions$1(n){const e=n.text;n.font_size=n.font_size||70;const t=LabelStyleConver.toCesiumVal(n,{fill:!0,fillColor:new Cesium__namespace.Color(1,1,0,1),textBaseline:"middle",padding:10}),x=getTextImage(e,t);let i;return x&&(i=x.toDataURL("image/png")),{fabric:{uniforms:{image:i,opacity:1,color:Cesium__namespace.Color.WHITE,speed:n.speed||0,flipx:!1,flipy:!1,noWhite:!0,globalAlpha:1},source:ImageMaterial},translucent:!0}}registerClass(Text,TextMaterial);var CylinderWaveMaterialGlsl=`uniform vec4 color;
uniform float repeat;
uniform float offset;
uniform float thickness;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float sp = 1.0 / repeat;
  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5));
  float m = mod(dis + offset, sp);
  float a = step(sp * (1.0 - thickness), m);
  material.diffuse = color.rgb;
  material.alpha = a * color.a * globalAlpha;
  return material;
}
`;class CylinderWaveMaterial extends Cesium__namespace.Material{constructor(e={}){const t={_0x23ba26:3071},x=_0x2397ca;super(conventOptions(e)),this._frameTime=1e3/(e.frameRate||60),this._speed=e[x(t._0x23ba26)]??10;const i=this;let s=Date.now();(function o(){const r=x;i[r(3510)]=window.requestAnimationFrame(o);const c=Date.now(),_=c-s;_>i[r(2978)]&&(s=c-_%i._frameTime,i.updateOffset())})()}updateOffset(){const e={_0x813fd:314},t=_0x2397ca;let x=this.uniforms.offset;x-=1e-4*this._speed,x>1&&(x=0),this.uniforms[t(e._0x813fd)]=x}destroy(e){return window.cancelAnimationFrame(this.animateFrame),delete this.animateFrame,super.destroy(e)}}function conventOptions(n){const e={_0x2b0c6a:2134},t=_0x2397ca;return{fabric:{uniforms:{color:getCesiumColor(n.color,new Cesium__namespace[t(e._0x2b0c6a)](2,1,0,.8)),repeat:n[t(1345)]??30,thickness:n[t(1193)]??.3,offset:n.offset??0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:function(x){const i=t;return x.uniforms[i(1089)].alpha<1}}}registerClass(CylinderWave,CylinderWaveMaterial);class BaseMaterialProperty{constructor(e={}){const t={_0x5bf415:483,_0x93b964:3226},x=_0x2397ca;this.options=e,this[x(t._0x5bf415)]=new Cesium__namespace[x(t._0x93b964)]}get[_0x2397ca(700)](){return!0}get definitionChanged(){return this._definitionChanged}getType(e){return null}getValue(e,t={}){return t}equals(e){return this===e}}class CircleScanMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x248442:1089},x=_0x2397ca;super(e),this[x(1437)]=e.image??e[x(914)],this[x(t._0x248442)]=e.color,this.globalAlpha=e[x(2182)]??1}getType(e){return CircleScan}[_0x2397ca(2893)](e,t){return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this.color,new Cesium__namespace.Color(1,0,0,.5),e),t.image=this.image,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x4d2cfa:582},x=_0x2397ca;return this===e||e instanceof CircleScanMaterialProperty&&Cesium__namespace[x(t._0x4d2cfa)][x(1043)](this.color,e.color)&&this.image===e.image}}registerPropertyClass(CircleScan,CircleScanMaterialProperty);class CircleWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x21991a:2182,_0x4fd963:1892},x=_0x2397ca;super(e),this.color=e.color,this.speed=e.speed??10,this.duration=e.duration,this.count=e.count??1,this.gradient=e.gradient??.1,this[x(t._0x21991a)]=e[x(t._0x21991a)]??1,this[x(3088)]<=0&&(this.count=1),this.gradient<0&&(this.gradient=0),this[x(t._0x4fd963)]>1&&(this[x(t._0x4fd963)]=1)}getType(e){return CircleWave}[_0x2397ca(2893)](e,t){const x={_0x78421:1892,_0x27fe91:3071,_0x3d8c51:3836},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this.color,Cesium__namespace.Color.YELLOW,e),t.count=this.count,t[i(x._0x78421)]=this.gradient,t[i(x._0x27fe91)]=this[i(x._0x27fe91)],t.globalAlpha=this.globalAlpha,this.duration?(this._time===void 0&&(this._time=new Date().getTime()),t.time=(new Date()[i(x._0x3d8c51)]()-this._time)/(this.duration*1e3)):t.time=-1,t}equals(e){const t=_0x2397ca;return this===e||e instanceof CircleWaveMaterialProperty&&Cesium__namespace.Property[t(1043)](this[t(1089)],e.color)&&this[t(3088)]===e.count&&this[t(3071)]===e.speed&&this.gradient===e.gradient}}registerPropertyClass(CircleWave,CircleWaveMaterialProperty),register$3(CylinderWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(2,1,0,.8),repeat:30,thickness:.3,offset:0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:!0});class CylinderWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x525986:1345,_0x9fba0c:1193,_0x38e2eb:314,_0x1e629e:2182},x=_0x2397ca;super(e),this.color=e.color,this[x(t._0x525986)]=e.repeat??30,this.thickness=e[x(t._0x9fba0c)]??.3,this.speed=e[x(3071)]??10,this[x(t._0x38e2eb)]=0,this[x(t._0x1e629e)]=e.globalAlpha??1}[_0x2397ca(2630)](e){return CylinderWave}[_0x2397ca(2893)](e,t){const x={_0x4c2c6b:314,_0x1fb521:1089,_0x27087b:1345,_0x598147:1193,_0x2cf088:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),this.offset-=1e-4*this.speed,this[i(x._0x4c2c6b)]>1&&(this[i(x._0x4c2c6b)]=0),t[i(x._0x1fb521)]=getCesiumColor(this.color,new Cesium__namespace.Color(2,1,0,.8),e),t.repeat=this[i(x._0x27087b)],t[i(314)]=this.offset,t[i(x._0x598147)]=this.thickness,t.globalAlpha=this[i(x._0x2cf088)],t}[_0x2397ca(1043)](e){const t={_0x38b1f4:1345,_0x1c0aee:1193},x=_0x2397ca;return this===e||e instanceof CylinderWaveMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this[x(t._0x38b1f4)]===e.repeat&&this[x(t._0x1c0aee)]===e.thickness}}registerPropertyClass(CylinderWave,CylinderWaveMaterialProperty);class DigitalFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x40d52e:2678,_0x4f0129:2481},x=_0x2397ca;super(e),this[x(1089)]=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this[x(3071)]=e.speed??5,this.glow=e.glow??1,this[x(t._0x40d52e)]=e.flowGlow??1,this[x(t._0x4f0129)]=e.segment??3,this.globalAlpha=e.globalAlpha??1}[_0x2397ca(2630)](e){return DigitalFlow}[_0x2397ca(2893)](e,t){const x={_0x5314b4:1089,_0x1ec05c:3071,_0x587d5a:2144,_0x5c5623:2481},i=_0x2397ca;return!Cesium__namespace[i(639)](t)&&(t={}),t[i(x._0x5314b4)]=this[i(1089)],t.speed=this[i(x._0x1ec05c)],t[i(x._0x587d5a)]=this[i(2144)],t.flowGlow=this.flowGlow,t.segment=this[i(x._0x5c5623)],t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x2397ca;return this===e||e instanceof DigitalFlowMaterialProperty&&Cesium__namespace.Property.equals(this[t(1089)],e[t(1089)])&&this.glow===e[t(2144)]&&this[t(3071)]===e.speed}}registerPropertyClass(DigitalFlow,DigitalFlowMaterialProperty);class EllipsoidElectricMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e.speed??5,this[t(2182)]=e.globalAlpha??1}getType(e){return EllipsoidElectric}getValue(e,t){const x={_0x4d3753:1089},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(x._0x4d3753)]=this[i(1089)],t.speed=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x43bfa1:1089},x=_0x2397ca;return this===e||e instanceof EllipsoidElectricMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[x(t._0x43bfa1)])&&this.speed===e[x(3071)]}}registerPropertyClass(EllipsoidElectric,EllipsoidElectricMaterialProperty);class EllipsoidWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x166042:1089,_0x5b9509:1089,_0x274ebe:3071},x=_0x2397ca;super(e),this[x(t._0x166042)]=getCesiumColor(e[x(t._0x5b9509)],new Cesium__namespace.Color(0,0,0,0)),this[x(t._0x274ebe)]=e.speed??5,this.globalAlpha=e.globalAlpha??1}[_0x2397ca(2630)](e){return EllipsoidWave}getValue(e,t){const x=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this.speed,t.globalAlpha=this[x(2182)],t}equals(e){const t={_0x5dce91:3071},x=_0x2397ca;return this===e||e instanceof EllipsoidWaveMaterialProperty&&Cesium__namespace.Property[x(1043)](this.color,e[x(1089)])&&this.speed===e[x(t._0x5dce91)]}}registerPropertyClass(EllipsoidWave,EllipsoidWaveMaterialProperty);class Image2MaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x199448:4010,_0x1298c8:488},x=_0x2397ca;super(e),this.image=e.image,this[x(t._0x199448)]=e.opacity??1,this.color=e.color??Cesium__namespace.Color[x(3970)],this.speed=e.speed??0,this.flipx=e[x(4055)]??!1,this.flipy=e.flipy??!1,this.noWhite=e[x(t._0x1298c8)]??!0,this.globalAlpha=e.globalAlpha??1}[_0x2397ca(2630)](e){return Image2}[_0x2397ca(2893)](e,t){const x={_0x1d46e1:639,_0x57f8a8:2486},i=_0x2397ca;return!Cesium__namespace[i(x._0x1d46e1)](t)&&(t={}),t.image=this.image,t.color=this[i(1089)],t.opacity=this.opacity,t.speed=this.speed,t[i(4055)]=this.flipx,t.flipy=this[i(x._0x57f8a8)],t.noWhite=this[i(488)],t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x2397ca;return this===e||e instanceof Image2MaterialProperty&&Cesium__namespace[t(582)].equals(this.color,e.color)&&this.opacity===e[t(4010)]&&this.image===e.image}}registerPropertyClass(Image2,Image2MaterialProperty);class LineBloomMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this[t(3071)]=e.speed??5,this.glow=e.glow??1,this.globalAlpha=e.globalAlpha??1}getType(e){return LineBloom}[_0x2397ca(2893)](e,t){const x={_0x2644d3:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this.speed,t.glow=this.glow,t.globalAlpha=this[i(x._0x2644d3)],t}equals(e){const t={_0x51511e:1043},x=_0x2397ca;return this===e||e instanceof LineBloomMaterialProperty&&Cesium__namespace.Property[x(t._0x51511e)](this.color,e.color)&&this.glow===e.glow&&this.speed===e.speed}}registerPropertyClass(LineBloom,LineBloomMaterialProperty);class LineFlickerMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x1628d5:2182},x=_0x2397ca;super(e),this.color=e.color,this.speed=e.speed??2,this[x(t._0x1628d5)]=e.globalAlpha??1}[_0x2397ca(2630)](e){return LineFlicker}getValue(e,t){const x={_0x115dc0:3071,_0x500523:2182,_0x4e9405:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this.color,new Cesium__namespace.Color(0,0,0,0),e),t[i(x._0x115dc0)]=this.speed,t[i(x._0x500523)]=this[i(x._0x4e9405)],t}equals(e){const t={_0x435f94:1043},x=_0x2397ca;return this===e||e instanceof LineFlickerMaterialProperty&&Cesium__namespace.Property[x(t._0x435f94)](this.color,e.color)&&this.speed===e[x(3071)]}}registerPropertyClass(LineFlicker,LineFlickerMaterialProperty);class LineFlowColorMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x875d8e:3071},x=_0x2397ca;super(e),this.color=e.color,this[x(t._0x875d8e)]=e[x(3071)]??2,this.percent=e.percent??.04,this.alpha=e.alpha??.1,this.startTime=e[x(3764)]??0,this.globalAlpha=e.globalAlpha??1}getType(e){return LineFlowColor}getValue(e,t){const x={_0xfda53e:2708,_0x2330dd:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this.color,new Cesium__namespace.Color(1,0,0,1),e),t[i(3071)]=this.speed,t[i(2843)]=this.percent,t.alpha=this[i(x._0xfda53e)],t.startTime=this.startTime,t[i(2182)]=this[i(x._0x2330dd)],t}[_0x2397ca(1043)](e){const t={_0x2c8715:2843,_0x255174:3764},x=_0x2397ca;return this===e||e instanceof LineFlowColorMaterialProperty&&Cesium__namespace.Property[x(1043)](this.color,e[x(1089)])&&this[x(3071)]===e[x(3071)]&&this.percent===e[x(t._0x2c8715)]&&this.startTime===e[x(t._0x255174)]&&this.alpha===e.alpha}}registerPropertyClass(LineFlowColor,LineFlowColorMaterialProperty);class LineFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x576a80:1437,_0x30349d:1012,_0x288fa7:639,_0x492e90:3097,_0x302496:2182},x=_0x2397ca;super(e),this[x(t._0x576a80)]=e.image??e.url,this.color=e.color??new Cesium__namespace.Color(1,1,1,0),this[x(2435)]=e.axisY??!1,this.mixt=e.mixt??!1,this.speed=e.speed??10,this.duration=e.duration,this.repeat=e.repeat??new Cesium__namespace[x(518)](1,1),this.image2=e.image2??e.bgUrl,this[x(2357)]=e.color2??e.bgColor??new Cesium__namespace.Color(1,1,1),this[x(t._0x30349d)]=Cesium__namespace[x(t._0x288fa7)](this[x(t._0x492e90)]),this[x(t._0x302496)]=e.globalAlpha??1}getType(e){return LineFlow}getValue(e,t){const x={_0x353629:1345,_0x5b4531:1183,_0x145e1a:3836},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(1437)]=this.image,t.color=getCesiumColor(this[i(1089)],new Cesium__namespace.Color(1,1,1,0),e),t.repeat=getCesiumValue(this[i(x._0x353629)],Cesium__namespace.Cartesian2,e),t.axisY=this[i(2435)],t.mixt=this[i(3817)],t.speed=getCesiumValue(this.speed,Number,e),this[i(x._0x5b4531)]?(this[i(633)]===void 0&&(this._time=new Date()[i(x._0x145e1a)]()),t[i(3531)]=(new Date()[i(3836)]()-this._time)/(this.duration*1e3)):t.time=-1,t.hasImage2=this.hasImage2,t.image2=this.image2,t[i(2357)]=getCesiumColor(this.color2,new Cesium__namespace.Color(1,1,1),e),t.globalAlpha=this.globalAlpha,t}[_0x2397ca(1043)](e){const t={_0x1e7597:1089,_0x3fd849:1345,_0x30e571:3097},x=_0x2397ca;return this===e||e instanceof LineFlowMaterialProperty&&Cesium__namespace.Property[x(1043)](this[x(t._0x1e7597)],e.color)&&Cesium__namespace.Property.equals(this.repeat,e[x(t._0x3fd849)])&&this.image===e.image&&this[x(2435)]===e[x(2435)]&&this.speed===e.speed&&this[x(1012)]===e.hasImage2&&this[x(t._0x30e571)]===e[x(t._0x30e571)]&&Cesium__namespace[x(582)].equals(this.color2,e.color2)}}registerPropertyClass(LineFlow,LineFlowMaterialProperty);class LineTrailMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x50ca64:1089,_0x2bac31:2182,_0x1822dd:2182},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[x(2134)](0,0,0,0)),this.bgColor=getCesiumColor(e.bgColor,this[x(t._0x50ca64)].withAlpha(.1)),this.speed=e.speed??2,this[x(t._0x2bac31)]=e[x(t._0x1822dd)]??1}getType(e){return LineTrail}getValue(e,t){const x={_0x318418:639,_0x2f71ee:1089,_0x158e7d:3071},i=_0x2397ca;return!Cesium__namespace[i(x._0x318418)](t)&&(t={}),t.color=this[i(x._0x2f71ee)],t.bgColor=this.bgColor,t[i(3071)]=this[i(x._0x158e7d)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x410bd1:1167},x=_0x2397ca;return this===e||e instanceof LineTrailMaterialProperty&&Cesium__namespace.Property.equals(this[x(1089)],e.color)&&Cesium__namespace.Property.equals(this[x(1167)],e[x(t._0x410bd1)])&&this.speed===e.speed}}registerPropertyClass(LineTrail,LineTrailMaterialProperty);class LineDotDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x5e70d3:2513,_0x80cc16:2583,_0x138c12:572},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.gapColor=getCesiumColor(e.gapColor,Cesium__namespace.Color[x(t._0x5e70d3)]),this[x(t._0x80cc16)]=e.dashLength??16,this[x(t._0x138c12)]=e.dashPattern??255,this.globalAlpha=e[x(2182)]??1}getType(e){return LineDotDash}[_0x2397ca(2893)](e,t){const x={_0x2ecbfb:572,_0x4ce2ab:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(1089)]=this.color,t[i(1119)]=this.gapColor,t.dashLength=this.dashLength,t[i(x._0x2ecbfb)]=this[i(x._0x2ecbfb)],t[i(x._0x4ce2ab)]=this[i(x._0x4ce2ab)],t}equals(e){const t={_0x4f0633:1043,_0x452440:2583},x=_0x2397ca;return this===e||e instanceof LineDotDashMaterialProperty&&Cesium__namespace[x(582)][x(t._0x4f0633)](this[x(1089)],e[x(1089)])&&Cesium__namespace.Property.equals(this.gapColor,e.gapColor)&&this[x(t._0x452440)]===e.dashLength&&this.dashPattern===e.dashPattern}}registerPropertyClass(LineDotDash,LineDotDashMaterialProperty);class NeonLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2a0f9e:2134,_0x16f65a:1053,_0x3bbc6e:2182},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,Cesium__namespace[x(t._0x2a0f9e)][x(t._0x16f65a)]("#9b08fd")),this[x(3071)]=e.speed??2,this.globalAlpha=e[x(t._0x3bbc6e)]??1}getType(e){return NeonLight}getValue(e,t){const x={_0x24805c:1089,_0x520c3a:3071},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(x._0x24805c)]=this[i(1089)],t[i(x._0x520c3a)]=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){return this===e||e instanceof NeonLightMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this.speed===e.speed}}registerPropertyClass(NeonLight,NeonLightMaterialProperty);class LineThreeDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x1ecbb3:2084,_0x51e534:2583},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,Cesium__namespace.Color[x(t._0x1ecbb3)]),this[x(t._0x51e534)]=e.dashLength??16,this.widthRatio=e.widthRatio??.1,this.sidesColor=getCesiumColor(e.sidesColor,Cesium__namespace.Color.WHITE),this.sidesDashLength=e.sidesDashLength??32,this[x(2247)]=e.sidesWidthRatio??.1,this.dashPattern=e[x(572)]??255,this.globalAlpha=e.globalAlpha??1}getType(e){return LineThreeDash}getValue(e,t){const x={_0xd62756:1089,_0x6e80e7:2084,_0x1a7a0f:2583},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(x._0xd62756)]=getCesiumColor(this[i(1089)],Cesium__namespace.Color[i(x._0x6e80e7)],e),t.dashLength=this.dashLength,t[i(378)]=this[i(378)],t.sidesColor=getCesiumColor(this[i(1711)],Cesium__namespace.Color[i(3970)],e),t.sidesDashLength=this.sidesDashLength,t.sidesWidthRatio=this.sidesWidthRatio,t.dashLength=this[i(x._0x1a7a0f)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x21da78:1043,_0x139d96:1089},x=_0x2397ca;return this===e||e instanceof LineThreeDashMaterialProperty&&Cesium__namespace.Property[x(t._0x21da78)](this[x(t._0x139d96)],e.color)&&this.speed===e.speed}}registerPropertyClass(LineThreeDash,LineThreeDashMaterialProperty);class ODLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x30a0b1:396,_0x2d1595:3692},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(Math.random()*.5+.5,Math.random()*.8+.2,0,1)),this.bgColor=getCesiumColor(e.bgColor,this.color[x(t._0x30a0b1)](.1)),this.speed=e.speed??20+10*Math.random(),this[x(3764)]=e[x(3764)]??Math[x(3129)](),this.bidirectional=e[x(t._0x2d1595)]??0,this.globalAlpha=e.globalAlpha??1}getType(e){return ODLine}getValue(e,t){const x={_0x33e82c:2182},i=_0x2397ca;return!t&&(t={}),t.color=this.color,t.speed=this.speed,t.startTime=this.startTime,t.bgColor=this.bgColor,t.bidirectional=this.bidirectional,t[i(x._0x33e82c)]=this.globalAlpha,t}equals(e){const t={_0x1c22de:3071},x=_0x2397ca;return this===e||e instanceof ODLineMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&Cesium__namespace.Property[x(1043)](this.bgColor,e.bgColor)&&this[x(t._0x1c22de)]===e.speed&&this.startTime===e[x(3764)]&&this.bidirectional===e.bidirectional}}registerPropertyClass(ODLine,ODLineMaterialProperty);class PolyAsphaltMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x391b03:2127,_0x11babf:2182},x=_0x2397ca;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[x(2134)](0,0,0,0)),this.size=e.size??.02,this.frequency=e[x(t._0x391b03)]??.2,this[x(t._0x11babf)]=e.globalAlpha??1}getType(e){return PolyAsphalt}getValue(e,t){const x={_0x41a0d2:1089},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(x._0x41a0d2)]=this[i(1089)],t.size=this.size,t.frequency=this[i(2127)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x569e41:1005},x=_0x2397ca;return this===e||e instanceof PolyAsphaltMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[x(1089)])&&this[x(2127)]===e.frequency&&this[x(t._0x569e41)]===e.size}}registerPropertyClass(PolyAsphalt,PolyAsphaltMaterialProperty);class PolyBlobMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x2397ca;super(e),this.evenColor=getCesiumColor(e[t(181)],new Cesium__namespace.Color(1,1,1,.5)),this.oddColor=getCesiumColor(e.evenColor,new Cesium__namespace.Color(0,0,1,.5)),this[t(2127)]=e.frequency??10,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyBlob}getValue(e,t){const x={_0xa65f09:639,_0x27bde3:181,_0x58b210:869},i=_0x2397ca;return!Cesium__namespace[i(x._0xa65f09)](t)&&(t={}),t.evenColor=this.evenColor,t[i(x._0x27bde3)]=this[i(x._0x58b210)],t[i(2127)]=this[i(2127)],t.globalAlpha=this.globalAlpha,t}[_0x2397ca(1043)](e){const t={_0x286752:869},x=_0x2397ca;return this===e||e instanceof PolyBlobMaterialProperty&&Cesium__namespace.Property.equals(this.evenColor,e.evenColor)&&Cesium__namespace.Property.equals(this.oddColor,e[x(t._0x286752)])&&this.frequency===e.frequency}}registerPropertyClass(PolyBlob,PolyBlobMaterialProperty);class PolyFacetMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyFacet}}registerPropertyClass(PolyFacet,PolyFacetMaterialProperty);class PolyGradientMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x2397ca;super(e),this.color=getCesiumColor(e[t(1089)],new Cesium__namespace.Color(1,1,0,.5)),this.diffusePower=e.diffusePower??1.6,this.alphaPower=e.alphaPower??1.5,this.center=e[t(2006)]??new Cesium__namespace.Cartesian2(.5,.5),this.globalAlpha=e.globalAlpha??1}getType(e){return PolyGradient}getValue(e,t){const x={_0x3bd7c3:1785},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=this[i(1089)],t.diffusePower=this[i(x._0x3bd7c3)],t.alphaPower=this.alphaPower,t.center=this.center,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x1a87dd:1089},x=_0x2397ca;return this===e||e instanceof PolyGradientMaterialProperty&&Cesium__namespace.Property.equals(this[x(t._0x1a87dd)],e.color)&&this.diffusePower===e[x(1785)]}}registerPropertyClass(PolyGradient,PolyGradientMaterialProperty);class PolyGrassMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyGrass}}registerPropertyClass(PolyGrass,PolyGrassMaterialProperty);class PolyWoodMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x791fe4:181},x=_0x2397ca;super(e),this.evenColor=getCesiumColor(e.evenColor,new Cesium__namespace.Color(1,1,1,.5)),this.oddColor=getCesiumColor(e[x(t._0x791fe4)],new Cesium__namespace.Color(0,0,1,.5)),this.frequency=e.frequency??10,this.noiseScale=e.noiseScale??new Cesium__namespace.Cartesian2(.7,.5),this.grainFrequency=e.grainFrequency??27,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyWood}getValue(e,t){const x={_0x56400a:869},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.evenColor=this[i(181)],t.evenColor=this[i(x._0x56400a)],t.frequency=this.frequency,t[i(187)]=this[i(187)],t.grainFrequency=this.grainFrequency,t.globalAlpha=this[i(2182)],t}[_0x2397ca(1043)](e){const t={_0xed81b7:1043},x=_0x2397ca;return this===e||e instanceof PolyWoodMaterialProperty&&Cesium__namespace.Property[x(t._0xed81b7)](this.evenColor,e.evenColor)&&Cesium__namespace.Property.equals(this.oddColor,e.oddColor)&&this.frequency===e.frequency}}registerPropertyClass(PolyWood,PolyWoodMaterialProperty);class RadarLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2ff8f5:1089,_0x3b6479:2182},x=_0x2397ca;super(e),this.color=getCesiumColor(e[x(t._0x2ff8f5)],new Cesium__namespace[x(2134)](0,0,0,0)),this.speed=e.speed??5,this[x(t._0x3b6479)]=e.globalAlpha??1}getType(e){return RadarLine}getValue(e,t){const x={_0x5dc742:2182},i=_0x2397ca;return!Cesium__namespace[i(639)](t)&&(t={}),t.color=this.color,t.speed=this[i(3071)],t[i(x._0x5dc742)]=this.globalAlpha,t}equals(e){const t={_0x283b1d:1043},x=_0x2397ca;return this===e||e instanceof RadarLineMaterialProperty&&Cesium__namespace[x(582)][x(t._0x283b1d)](this.color,e[x(1089)])&&this.speed===e.speed}}registerPropertyClass(RadarLine,RadarLineMaterialProperty);class RadarWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x276afb:1089,_0x3bfd68:2134},x=_0x2397ca;super(e),this.color=getCesiumColor(e[x(t._0x276afb)],new Cesium__namespace[x(t._0x3bfd68)](0,0,0,0)),this[x(3071)]=e.speed??5,this.globalAlpha=e.globalAlpha??1}getType(e){return RadarWave}getValue(e,t){const x={_0x4e7188:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t[i(1089)]=this.color,t.speed=this.speed,t.globalAlpha=this[i(x._0x4e7188)],t}equals(e){const t={_0x2f49b9:1043},x=_0x2397ca;return this===e||e instanceof RadarWaveMaterialProperty&&Cesium__namespace.Property[x(t._0x2f49b9)](this.color,e[x(1089)])&&this.speed===e[x(3071)]}}registerPropertyClass(RadarWave,RadarWaveMaterialProperty);class RectSlideMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4ab5c2:1089,_0x9cb199:3071},x=_0x2397ca;super(e),this.image=e.image,this.color=getCesiumColor(e[x(t._0x4ab5c2)],new Cesium__namespace.Color(1,1,1,.9)),this.speed=e[x(t._0x9cb199)]??1,this.pure=!!e[x(3760)],this[x(2182)]=e.globalAlpha??1}getType(e){return RectSlide}getValue(e,t){const x=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.image=this[x(1437)],t[x(1089)]=this.color,t.speed=this.speed,t.pure=this.pure,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x226110:1437},x=_0x2397ca;return this===e||e instanceof RectSlideMaterialProperty&&Cesium__namespace[x(582)].equals(this.color,e.color)&&this[x(t._0x226110)]===e.image&&this.pure===e.pure&&this.speed===e[x(3071)]}}registerPropertyClass(RectSlide,RectSlideMaterialProperty);class ScanLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x2397ca;super(e),this.color=getCesiumColor(e.color,Cesium__namespace.Color.YELLOW),this.speed=e.speed??10,this.globalAlpha=e[t(2182)]??1}[_0x2397ca(2630)](e){return ScanLine}[_0x2397ca(2893)](e,t){const x={_0x3f1d20:3071},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t[i(x._0x3f1d20)]=this.speed,t.globalAlpha=this[i(2182)],t}equals(e){const t={_0x577ecd:1043},x=_0x2397ca;return this===e||e instanceof ScanLineMaterialProperty&&Cesium__namespace.Property[x(t._0x577ecd)](this.color,e.color)&&this[x(3071)]===e[x(3071)]}}registerPropertyClass(ScanLine,ScanLineMaterialProperty);class TextMaterialProperty extends Image2MaterialProperty{constructor(e={}){const t={_0x5e0276:2510},x=_0x2397ca;e.font_size=e.font_size??70,super(e),this[x(3418)]=e.transparent??!0,this._textStyles=LabelStyleConver.toCesiumVal(e,{fill:!0,fillColor:new Cesium__namespace.Color(1,1,0,1),textBaseline:"middle",padding:10}),this[x(t._0x5e0276)]()}get text(){return this.options.text}set text(e){const t={_0x47b013:3044},x=_0x2397ca;this[x(t._0x47b013)][x(484)]=e,this._updateImage()}get textStyles(){return this[_0x2397ca({_0x12b2ea:1717}._0x12b2ea)]}set textStyles(e){this._textStyles=LabelStyleConver.toCesiumVal(e,this._textStyles),this._updateImage()}[_0x2397ca(2510)](){const e={_0x517c1f:2153,_0x2f3309:484},t=_0x2397ca;if(this[t(e._0x517c1f)]=getTextImage(this.options[t(e._0x2f3309)],this[t(1717)]),this._canvas){var x;this.image=this._canvas;const i=(x=this.options)===null||x===void 0?void 0:x.onCustomCanvas;i&&i(this._canvas,this).then(s=>{this.image=copyCanvas(s)})}}}registerPropertyClass(Text,TextMaterialProperty);class WallScrollMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x57ff40:2134,_0x388ce3:3071,_0x4039d2:2435},x=_0x2397ca;super(e),this.image=e[x(1437)],this.color=getCesiumColor(e.color,new Cesium__namespace[x(t._0x57ff40)](0,0,0,1)),this.speed=e[x(t._0x388ce3)]??10,this.count=e.count??1,this.reverse=e.reverse??!1,this.axisY=e[x(t._0x4039d2)]??!1,this[x(1796)]=e.bloom??!1,this.globalAlpha=e.globalAlpha??1}getType(e){return WallScroll}getValue(e,t){const x={_0x5ae2bd:3071},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.image=this.image,t.color=this.color,t[i(x._0x5ae2bd)]=this[i(3071)],t.count=this.count,t[i(3223)]=this.reverse,t.axisY=this.axisY,t.bloom=this.bloom,t.globalAlpha=this.globalAlpha,t}[_0x2397ca(1043)](e){const t={_0x5120f8:3071},x=_0x2397ca;return this===e||e instanceof WallScrollMaterialProperty&&Cesium__namespace.Property[x(1043)](this.color,e.color)&&this[x(1437)]===e.image&&this[x(3088)]===e.count&&this.reverse===e[x(3223)]&&this.bloom===e.bloom&&this.speed===e[x(t._0x5120f8)]}}registerPropertyClass(WallScroll,WallScrollMaterialProperty);class WaterLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x844a42:3266,_0x329b3f:2182},x=_0x2397ca;super(e),this.specularMap=e[x(t._0x844a42)],this.normalMap=e.normalMap||Cesium__namespace[x(2206)].DefaultImageId,this.alpha=e.alpha??.2,this[x(t._0x329b3f)]=e.globalAlpha??1}[_0x2397ca(2630)](e){return WaterLight}getValue(e,t){const x={_0x5e39a2:2182},i=_0x2397ca;return!Cesium__namespace.defined(t)&&(t={}),t.specularMap=this.specularMap,t.normalMap=this[i(1494)],t.alpha=this[i(2708)],t.globalAlpha=this[i(x._0x5e39a2)],t}equals(e){const t={_0x36c69e:3266,_0x191806:1494,_0x7d6bd0:2708},x=_0x2397ca;return this===e||e instanceof WaterLightMaterialProperty&&this[x(t._0x36c69e)]===e[x(3266)]&&this.normalMap===e[x(t._0x191806)]&&this.alpha===e[x(t._0x7d6bd0)]}}registerPropertyClass(WaterLight,WaterLightMaterialProperty);class WaterMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x18be24:3501,_0x3a816a:2134,_0x128ecb:3266,_0x332904:2206,_0x2b865a:2127,_0x239130:3637},x=_0x2397ca;super(e),this[x(t._0x18be24)]=getCesiumColor(e.baseWaterColor,new Cesium__namespace[x(t._0x3a816a)](.2,.3,.6,1)),this.blendColor=getCesiumColor(e.blendColor,new Cesium__namespace.Color(0,1,.699,1)),this[x(t._0x128ecb)]=e[x(t._0x128ecb)]||Cesium__namespace.Material.DefaultImageId,this.normalMap=e.normalMap||Cesium__namespace[x(t._0x332904)][x(1029)],this.frequency=e[x(t._0x2b865a)]??1e3,this.animationSpeed=e[x(3232)]??.01,this.amplitude=e[x(929)]??10,this.specularIntensity=e.specularIntensity??.5,this.fadeFactor=e[x(t._0x239130)]??1,this.globalAlpha=e.globalAlpha??1}getType(e){return Water$1}[_0x2397ca(2893)](e,t){const x={_0x762d5e:3501,_0x68b7c5:3853,_0x5dd1ff:929,_0x185dcf:2708,_0x576f9b:3853},i=_0x2397ca;return!t&&(t={}),t[i(x._0x762d5e)]=this[i(x._0x762d5e)],t.blendColor=this[i(x._0x68b7c5)],t.specularMap=this.specularMap,t[i(1494)]=this.normalMap,t.frequency=this.frequency,t.animationSpeed=this.animationSpeed,t.amplitude=this[i(x._0x5dd1ff)],t.specularIntensity=this.specularIntensity,t.fadeFactor=this.fadeFactor,this.globalAlpha!==1&&(t.baseWaterColor[i(x._0x185dcf)]*=this.globalAlpha,t[i(x._0x576f9b)].alpha*=this.globalAlpha),t}equals(e){const t={_0x10b18b:1043,_0x1fb1f9:3266,_0x1ccba6:1494,_0x4dbbfd:1778,_0x385ca8:3637},x=_0x2397ca;return this===e||e instanceof WaterMaterialProperty&&this.baseWaterColor[x(t._0x10b18b)](e.baseWaterColor)&&this.blendColor.equals(e[x(3853)])&&this[x(t._0x1fb1f9)]===e.specularMap&&this[x(t._0x1ccba6)]===e[x(t._0x1ccba6)]&&this[x(2127)]===e.frequency&&this.animationSpeed===e[x(3232)]&&this.amplitude===e.amplitude&&this.specularIntensity===e[x(t._0x4dbbfd)]&&this.fadeFactor===e[x(t._0x385ca8)]}}registerPropertyClass(Water$1,WaterMaterialProperty);var index$7={__proto__:null,TextMaterial,CylinderWaveMaterial,BaseMaterialProperty,CircleScanMaterialProperty,CircleWaveMaterialProperty,CylinderWaveMaterialProperty,DigitalFlowMaterialProperty,EllipsoidElectricMaterialProperty,EllipsoidWaveMaterialProperty,Image2MaterialProperty,LineBloomMaterialProperty,LineFlickerMaterialProperty,LineFlowColorMaterialProperty,LineFlowMaterialProperty,LineTrailMaterialProperty,LineDotDashMaterialProperty,NeonLightMaterialProperty,LineThreeDashMaterialProperty,ODLineMaterialProperty,PolyAsphaltMaterialProperty,PolyBlobMaterialProperty,PolyFacetMaterialProperty,PolyGradientMaterialProperty,PolyGrassMaterialProperty,PolyWoodMaterialProperty,RadarLineMaterialProperty,RadarWaveMaterialProperty,RectSlideMaterialProperty,ScanLineMaterialProperty,TextMaterialProperty,WallScrollMaterialProperty,WaterLightMaterialProperty,WaterMaterialProperty};class BaseGraphic extends BaseClass{constructor(e={}){const t={_0x44d24c:357,_0x59e487:1578,_0x221a67:3135,_0x47d69f:2995,_0xc10b9c:384},x=_0x2397ca;e.style=e[x(t._0x44d24c)]||{},e[x(1578)]=e[x(1578)]||{},super(e),this[x(3044)]=e,this._id=e.id??e[x(t._0x59e487)].id??createGuid(),this._name=e.name||e[x(1578)].name||"",this._show=e.show??!0,this._private=e[x(3724)],e.popup&&this[x(t._0x221a67)](e.popup,e.popupOptions),e.tooltip&&this.bindTooltip(e.tooltip,e[x(t._0x47d69f)]),e.contextmenuItems&&this[x(t._0xc10b9c)](e.contextmenuItems,e.contextmenuItemsOptions),this._state=State[x(252)]}get type(){return this._type}get id(){return this._id}set id(e){this._id=e}get[_0x2397ca(1849)](){return this._id}get state(){return this._state}get isAdded(){return this._state===State.ADDED}get isDestroy(){const e={_0x564d8b:2910},t=_0x2397ca;return this._state===State[t(e._0x564d8b)]||!this.options}get isPrivate(){return!!this._private}get czmObject(){return null}get czmObjectEx(){return null}get show(){return this[_0x2397ca(767)]}set show(e){const t={_0x108e03:3279,_0x7d081e:446},x=_0x2397ca;this._show!==e&&(this._show=e,this.czmObject&&(this.czmObject[x(3482)]=this[x(767)]),this.czmObjectEx&&this[x(t._0x108e03)].forEach(function(i){i.show=e}),this[x(t._0x7d081e)]&&this._showHook(e),e?this.fire(EventType.show):this[x(1788)](EventType.hide))}get[_0x2397ca(2044)](){return this[_0x2397ca({_0x59802f:2968}._0x59802f)]}set name(e){this._name=e}get attr(){return this.options.attr}set attr(e){const t={_0x52fbab:1578},x=_0x2397ca;this.options[x(t._0x52fbab)]=e,this[x(1788)](EventType.updateAttr,{attr:e},!0)}get style(){const e=_0x2397ca;var t;return(t=this.options)===null||t===void 0?void 0:t[e(357)]}set[_0x2397ca(357)](e){this.setStyle(e)}get allowDrillPick(){return this.options.allowDrillPick}set allowDrillPick(e){this.options.allowDrillPick=e}get hasEdit(){const e=_0x2397ca;return this._hasEdit&&!!(this[e(1710)]||this._getDrawEntityClass)}set hasEdit(e){this._hasEdit=e}get enabledEvent(){return this._layer?this._layer.enabledEvent&&this._enabledEvent:this._enabledEvent}set enabledEvent(e){const t=_0x2397ca;this[t(1551)]=e}get center(){return null}get centerPoint(){return LngLatPoint[_0x2397ca(2145)](this.center)}get[_0x2397ca(1842)](){return!0}addTo(e){return e&&e.addGraphic&&e.addGraphic(this),this}remove(e){this._layer&&this._layer.removeGraphic(this,e)}bindPickId(e){var t;return e._mars3d_layerId=(t=this._layer)===null||t===void 0?void 0:t.id,e._mars3d_graphicId=this.id,this}_onAdd(e){const t={_0xa76ebd:558,_0x77a093:1812,_0xde8c3b:2670,_0x2b88cf:3831,_0x3c19e8:357,_0x437ddd:3044,_0x4b8191:1788},x={_0x40cd61:1425},i=_0x2397ca;var s,o;this.isAdded||(this._state=State.ADD,this._layer=e,this._map=e._map,!this[i(t._0xa76ebd)]&&logWarn("BaseGraphic:为了避免异常问题，请将图层添加到Map上再进行添加矢量数据的操作！"),this.options[i(1847)]?this[i(t._0x77a093)](this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s.eventParent)===!1||this[i(t._0x77a093)](e),!this.czmObject&&this._mountedHook&&this._mountedHook(),this[i(t._0xde8c3b)]&&this._addedHook(this[i(357)]),(o=this[i(t._0x2b88cf)])!==null&&o!==void 0&&o._highlightOptions||(this.style.highlight?this.bindHighlight(this[i(t._0x3c19e8)].highlight):this[i(t._0x437ddd)].highlight&&this.bindHighlight(this.options.highlight)),this[i(3735)]&&this.bindPickId(this.czmObject),this.czmObjectEx&&this.czmObjectEx.forEach(r=>{this[i(x._0x40cd61)](r)}),this.options.flyTo&&this.flyTo({duration:0}),this._state=State.ADDED,this.fire(EventType.add),!this[i(1731)]&&this.enabledEvent&&this._layer[i(t._0x4b8191)](EventType.addGraphic,{graphic:this},!0))}[_0x2397ca(2175)](){const e={_0x1e3200:3831,_0x148673:1847},t=_0x2397ca;var x,i;this._state===State.ADDED&&(!this[t(e._0x1e3200)]||!this.options||(this._closeAllControl(),this.unbindHighlight(),this[t(1653)]&&this.unbindUpdateEvent(),this._removedHook&&this._removedHook(),this[t(3044)]&&(this._state=State.REMOVED,this.fire(EventType.remove),!this.isPrivate&&this.enabledEvent&&this._layer[t(1788)](EventType.removeGraphic,{graphic:this},!0),(x=this[t(3044)])!==null&&x!==void 0&&x.eventParent?this.removeEventParent(this.options.eventParent):((i=this.options)===null||i===void 0?void 0:i[t(e._0x148673)])===!1||this.removeEventParent(this._layer),this._layer=null,this._map=null)))}[_0x2397ca(2645)](){}[_0x2397ca(2670)](e){}_removedHook(){}[_0x2397ca(3237)](e){const t={_0x5eb2fe:1508,_0x13500d:407,_0x3d2a08:3660,_0x483afc:1342},x=_0x2397ca;this._map[x(t._0x5eb2fe)].enabledMoveTarget=e,this._map.popup&&(this._map.popup[x(t._0x13500d)]=e),this[x(558)][x(t._0x3d2a08)]&&(this._map.tooltip.enabled=e),this._map[x(t._0x483afc)]&&(this._map[x(t._0x483afc)][x(407)]=e)}[_0x2397ca(2403)](e){const t={_0x4b04d7:1091,_0x5300d6:1578,_0x52910b:357,_0x1a31fd:357,_0x3d0e8b:1788,_0x2e2b16:2072,_0x3ebe6a:3044,_0x34bd3e:3044},x=_0x2397ca;if(!e||Object.keys(e).length===0)return this;for(const i in e){const s=e[i];switch(i){case"name":case x(3482):case x(760):case x(t._0x4b04d7):case"targetPosition":this.options[i]=s,this[i]=s;break;case"orientation":this.options[i]=s,this.czmObject[i]=s;break;case"attr":{this.options.attr=merge(this.options[x(t._0x5300d6)],e.attr),this[x(1788)](EventType.updateAttr,{attr:e.attr},!0);break}case x(t._0x52910b):{this.options.style=merge(this.options[x(357)],e[x(t._0x1a31fd)]),this._updateStyleBaseHook(e[x(t._0x1a31fd)]),this[x(t._0x3d0e8b)](EventType[x(t._0x2e2b16)],{style:e.style},!0);break}default:{isObject(s)?this.options[i]=merge(this[x(3044)][i],s):this.options[i]=s;break}}}return(e.popup||e.popupOptions)&&this.bindPopup(this.options.popup,this[x(3044)].popupOptions),(e.tooltip||e.tooltipOptions)&&this.bindTooltip(this.options.tooltip,this[x(t._0x3ebe6a)].tooltipOptions),(e.contextmenuItems||e.contextmenuItemsOptions)&&this.bindContextMenu(this.options.contextmenuItems,this[x(t._0x3ebe6a)].contextmenuItemsOptions),this._setOptionsHook&&this[x(3535)](this[x(t._0x34bd3e)],e),this}setStyle(e){const t={_0xadbe05:3044,_0x1e696f:3044},x=_0x2397ca;var i;return e.material&&delete this[x(t._0xadbe05)].style.material,e[x(2248)]&&this[x(t._0x1e696f)][x(357)][x(3028)]&&delete this.options.style.materialOptions,this[x(t._0x1e696f)].style=merge(this.options.style,e),!((i=this[x(3831)])!==null&&i!==void 0&&i._highlightOptions)&&Cesium__namespace.defined(e.highlight)&&(e.highlight?this[x(1764)](this[x(357)].highlight):this.unbindHighlight()),this._updateStyleBaseHook(e),this.fire(EventType.updateStyle,{style:e},!0),this}_updateStyleBaseHook(e){}setOpacity(e){const t={_0x107537:2191,_0x11dc89:2191},x=_0x2397ca;clearTimeout(this[x(t._0x107537)]),this[x(t._0x11dc89)]=setTimeout(()=>{this.isAdded&&this.setStyle({globalAlpha:e})},500)}[_0x2397ca(2777)](e){const t={_0x2103d5:3910,_0x3391f1:3910,_0xca6c1d:746,_0x38b22d:639,_0xe11cb3:3044,_0x19cf0d:1018,_0x39081b:1018},x=_0x2397ca,i={type:"Feature",properties:{name:this.name,...this.attr,id:this.id,type:this[x(968)],style:this._style2JsonBase(this.style,!0)}};return this[x(4036)]?i[x(t._0x2103d5)]=this._getGeoJsonGeometry(e):this.position?i[x(t._0x3391f1)]={type:x(1125),coordinates:this[x(t._0xca6c1d)](e==null?void 0:e.noAlt)}:this[x(1091)]&&(i.geometry={type:"LineString",coordinates:this[x(3711)](e==null?void 0:e.noAlt)}),Cesium__namespace[x(t._0x38b22d)](this[x(t._0xe11cb3)].styleType)&&(i.properties.styleType=this.options.styleType),this[x(t._0x19cf0d)]&&this[x(t._0x39081b)](i.properties),i}toJSON(){const e={_0x1f4140:1091,_0x14ad34:1743,_0x251fb6:3044},t=_0x2397ca,x={...getAttrVal(this.options,{onlySimpleType:!0}),id:this.id,name:this.name,type:this.type,attr:this.attr,style:this._style2JsonBase(this.style,!1)};return this._getJsonPositions?this._getJsonPositions(x):this.coordinate?x.position=this.coordinate:this.coordinates?x[t(e._0x1f4140)]=this.coordinates:logError$1(t(e._0x14ad34),this),Cesium__namespace.defined(this.options.styleType)&&this.options.styleType!==this.type&&(x.styleType=this[t(e._0x251fb6)].styleType),this._toJSON_Ex&&this._toJSON_Ex(x),x}_style2JsonBase(e,t){const x={_0x25d6cd:743,_0x15b9f4:3930},i=_0x2397ca;let s;return this[i(198)]?(s=this._style2Json(e),e.highlight&&(s.highlight=this._style2Json(e[i(480)]))):s=getAttrVal(e,{onlySimpleType:!0}),e.label&&(s.label=LabelStyleConver.toJSON(e[i(x._0x25d6cd)])),e[i(x._0x15b9f4)]&&(s[i(3930)]=PolylineStyleConver.toJSON(e[i(3930)])),s}bindUpdateEvent(){const e={_0x15fdd6:558,_0x2bf2d5:1153},t=_0x2397ca;!this.update||!this._map||(this.unbindUpdateEvent(),this[t(e._0x15fdd6)].on(EventType[t(e._0x2bf2d5)],this._map_preRenderHandler,this),this[t(3477)](this._map.scene))}unbindUpdateEvent(){const e={_0x3008c0:3573},t=_0x2397ca;this._map&&this._map[t(e._0x3008c0)](EventType.preRender,this._map_preRenderHandler,this)}[_0x2397ca(3477)](e){const t={_0x3a3ad5:2406,_0xbc2f03:291},x=_0x2397ca;var i;this._map&&((i=this.options)!==null&&i!==void 0&&i[x(t._0x3a3ad5)]&&this._last_preUpdateTime&&e._frameState[x(t._0xbc2f03)]-this._last_preUpdateTime<this.options.frameRate||(this._last_preUpdateTime=e[x(4034)].frameNumber,this.update(e[x(4034)])))}getRectangle(e){const t={_0x2af456:1091},x=_0x2397ca,i=this.positionsShow||this[x(t._0x2af456)];if(i&&i[x(2027)]>0)return getRectangle(i,e==null?void 0:e.isFormat);if(this[x(760)])return getRectangle([this.position],e==null?void 0:e[x(3768)])}getMaxHeight(){const e={_0xcc2622:760},t=_0x2397ca,x=this.positionsShow||this.positions;return x&&x.length>0?getMaxHeight(x):this[t(e._0xcc2622)]?getRectangle(this[t(760)]):0}fire(e,t={},x){const i=_0x2397ca;return t.graphic=this,super[i(1788)](e,t,x)}[_0x2397ca(2729)](e={}){const t={_0x35e1a8:982},x=_0x2397ca;if(!this._map)return Promise[x(3863)](!1);this.options.flyToOptions&&(e={...this[x(3044)].flyToOptions,...e});let i;return this.positionsShow?i=this[x(t._0x35e1a8)]:this.positions?i=this.positions:this.position&&(i=[this.position]),e.clampToGround=this.style.clampToGround,this._map.flyToPositions(i,e)}getAddHeight(e=0){const t={_0x5babfa:2841},x=_0x2397ca;let i=this.style[x(t._0x5babfa)];return Cesium__namespace[x(639)](i)?(isString(i)?(i=Number(template(i,this.attr,!0)),isNaN(i)&&(i=0)):Array.isArray(i)&&(i=i[e]||0),i):0}bindHighlight(e){const t=_0x2397ca;this.unbindHighlight(),this._highlightOptions=e,this[t(895)].type===EventType.click?this.on(EventType.click,this._highlight_mouseEventHandler,this):(this.on(EventType.mouseOver,this._highlight_mouseEventHandler,this),this.on(EventType.mouseOut,this._highlight_mouseOutHandler,this))}unbindHighlight(){const e={_0x17e488:895,_0x58224b:811,_0x4dfea0:3573,_0x16e8e1:3152,_0x24b058:3015},t=_0x2397ca;this[t(e._0x17e488)]&&(this._highlightOptions.type===EventType.click?this[t(3573)](EventType.click,this._highlight_mouseEventHandler,this):(this.off(EventType[t(e._0x58224b)],this._highlight_mouseEventHandler,this),this[t(e._0x4dfea0)](EventType[t(e._0x16e8e1)],this[t(e._0x24b058)],this)),this._map[t(1212)](),this[t(e._0x17e488)]=null)}_highlight_mouseEventHandler(e){const t={_0x3e49f6:895,_0x61be6c:558},x=_0x2397ca;if(!this[x(558)])return;const i=e==null?void 0:e.graphic;i?this._map[x(464)](i,this[x(t._0x3e49f6)],e):this[x(t._0x61be6c)].closeHighlight()}_highlight_mouseOutHandler(e){const t={_0x4c2096:1212},x=_0x2397ca;this._map[x(t._0x4c2096)]()}[_0x2397ca(1238)](){this.closePopup(),this.closeTooltip(),this.closeSmallTooltip(),this.closeContextMenu()}[_0x2397ca(1151)](){return this.position||this.center}hasPopup(e){return!!this[_0x2397ca(2639)](e)}getPopupConfig(e=!0){const t={_0x268dd6:3831},x=_0x2397ca;var i;return this._popupConfig?{...this._popupConfig}:e&&(i=this._layer)!==null&&i!==void 0&&i._popupConfig?{...this[x(t._0x268dd6)]._popupConfig}:null}bindPopup(e,t={}){const x={_0x42eab2:3831,_0x1951cc:3413},i=_0x2397ca;return this._popupConfig={content:e,options:t||this.options[i(3255)],graphic:this,layer:this[i(x._0x42eab2)]},this[i(x._0x1951cc)]&&this._onEventHook("popup"),this}[_0x2397ca(1930)](e){return e?this._popupConfig=!1:this._popupConfig=null,this._onEventHook&&this._onEventHook("popup"),this}[_0x2397ca(3875)](e,t){const x={_0x4dce12:3831,_0x17da31:3848},i=_0x2397ca,s=this[i(2639)]();return s&&this._map&&(t&&(s.event=t),s[i(2996)]=this,s.layer=this[i(x._0x4dce12)],this[i(558)][i(x._0x17da31)].open(e||this[i(1151)](),s)),this}closePopup(){const e={_0x2e4cc0:3848},t=_0x2397ca;return this._map&&this._map[t(e._0x2e4cc0)][t(810)](this),this}[_0x2397ca(3898)](){const e=_0x2397ca;if(this._map)return this[e(558)][e(3848)].getPopup(this)}[_0x2397ca(1611)](e){return!!this[_0x2397ca(2793)](e)}getTooltipConfig(e=!0){const t=_0x2397ca;var x;return this._tooltipConfig?{...this[t(1001)]}:e&&(x=this._layer)!==null&&x!==void 0&&x._tooltipConfig?{...this._layer._tooltipConfig}:null}[_0x2397ca(1489)](e,t){const x=_0x2397ca;return this._tooltipConfig={content:e,options:t||this.options.tooltipOptions},this._onEventHook&&this[x(3413)]("tooltip"),this}[_0x2397ca(481)](e){const t={_0x425d0b:1001},x=_0x2397ca;return e?this[x(t._0x425d0b)]=!1:this._tooltipConfig=null,this[x(3413)]&&this._onEventHook("tooltip"),this}openTooltip(e,t){const x={_0x32248a:2793,_0x5c88cd:2996},i=_0x2397ca,s=this[i(x._0x32248a)]();return s&&this._map&&(s[i(x._0x5c88cd)]=this,s.layer=this._layer,t&&(s.event=t),this._map.tooltip.open(e||this._getPopupPosition(),s)),this}closeTooltip(){const e={_0xe1067d:3660},t=_0x2397ca;return this._map&&this._map[t(e._0xe1067d)].close(this),this}getTooltip(){const e={_0xd113ba:1017},t=_0x2397ca;if(this._map)return this._map.tooltip[t(e._0xd113ba)](this)}hasContextMenu(e){return!!this.getContextMenu(e)}[_0x2397ca(647)](e=!0){const t={_0x4c5a19:1590},x=_0x2397ca;var i;return this[x(t._0x4c5a19)]?this[x(1590)]:e&&(i=this._layer)!==null&&i!==void 0&&i[x(t._0x4c5a19)]?this._layer._contextmenuConfig:null}[_0x2397ca(384)](e,t){return this._contextmenuConfig={content:e,options:t||this.options.contextmenuOptions,graphic:this,layer:this._layer},this._onEventHook&&this._onEventHook("contextMenu"),this}[_0x2397ca(832)](e){const t={_0x5eef87:1590,_0x50a7c0:3413},x=_0x2397ca;return e?this[x(t._0x5eef87)]=!1:this[x(1590)]=null,this._onEventHook&&this[x(t._0x50a7c0)]("contextMenu"),this}[_0x2397ca(2299)](e){const t={_0x47b606:2407},x=_0x2397ca,i=this.getContextMenu();return i&&this._map&&(i.graphic=this,i[x(t._0x47b606)]=this._layer,this._map.contextmenu.open(e||this._getPopupPosition(),i)),this}closeContextMenu(){const e={_0x8edc4e:558},t=_0x2397ca;return this.hasContextMenu()&&this._map&&this[t(e._0x8edc4e)].contextmenu[t(810)](this),this}openSmallTooltip(e,t){const x={_0x33b2ca:558,_0x5c8a4f:1882},i=_0x2397ca;return this[i(x._0x33b2ca)]&&this[i(x._0x33b2ca)][i(x._0x5c8a4f)](e,t),this}closeSmallTooltip(){const e=_0x2397ca;return this[e(558)]&&this[e(558)].closeSmallTooltip(),this}destroy(e){const t=_0x2397ca;this._state===State.DESTROY||this._noDestroy||(this._state!==State.REMOVED&&(this.clear&&this[t(2265)](),this[t(2689)]()),super.destroy(e),this._state=State.DESTROY)}}class FlickerEntity{constructor(e={}){this.color=Cesium__namespace.Color.YELLOW.withAlpha(0)}startFlicker(e,t={}){const x={_0x3bc587:1916,_0x421987:1089},i={_0x57b286:3977,_0x261f3b:428,_0x5ecf5e:392,_0x2ecae5:1782,_0x38f9f5:1613,_0x10b769:1358,_0x21a886:3958,_0x3a2843:1089,_0x80398e:2974},s=_0x2397ca,o=this;return this.stopFlicker(),this.entitys=e,this.maxAlpha=t[s(x._0x3bc587)]??.3,this.time=t.time,this[s(x._0x421987)]=t.color??Cesium__namespace.Color.YELLOW,this.color=this[s(x._0x421987)].withAlpha(this.maxAlpha),this[s(3029)]=t.onEnd,this._startTime(),loopArrayForFun(e,function(r){const c=s;r[c(i._0x57b286)]&&(r.polygon.material_bak=r.polygon.material,r[c(3977)][c(3816)]=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace[c(i._0x261f3b)](_=>o.color,!1))),r.polyline&&(r.polyline.material_bak=r.polyline[c(3816)],r[c(i._0x5ecf5e)].material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(_=>o.color,!1))),r[c(i._0x2ecae5)]&&(r.ellipsoid.material_bak=r[c(1782)].material,r[c(1782)].material=new Cesium__namespace[c(3900)](new Cesium__namespace[c(428)](_=>o.color,!1))),r.ellipse&&(r.ellipse.material_bak=r[c(i._0x38f9f5)].material,r.ellipse.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(_=>o.color,!1))),r[c(i._0x10b769)]&&(r.rectangle.material_bak=r.rectangle.material,r.rectangle.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(_=>o[c(1089)],!1))),r[c(3958)]&&(r.wall.material_bak=r.wall.material,r[c(i._0x21a886)].material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(_=>o.color,!1))),r.point&&(r.point.color_bak=r.point.color,r.point[c(1089)]=o.color),r[c(824)]&&(r[c(824)].color_bak=r.billboard.color,r.billboard.color=o[c(i._0x3a2843)]),r[c(1243)]&&(r.model.color_bak=r[c(1243)].color,r.model.color=o[c(1089)]),r.label&&(r.label[c(i._0x80398e)]=r.label.fillColor,r.label.fillColor=o.color)}),this}[_0x2397ca(831)](){const e={_0x2930cf:366,_0x25469:3029},t={_0x21d931:3977,_0x1a8098:2410,_0x3f3143:3816,_0x287054:2410,_0x49f5e6:3958,_0x2395d2:2800,_0x2d1ff9:824,_0x35b80e:1089,_0x427f84:1243,_0x529cc1:743},x=_0x2397ca;return this[x(e._0x2930cf)](),this[x(3630)]&&(loopArrayForFun(this.entitys,function(i){const s=x;i[s(3977)]&&i[s(t._0x21d931)][s(2410)]&&(i[s(3977)].material=i.polygon.material_bak),i.polyline&&i.polyline.material_bak&&(i[s(392)].material=i.polyline[s(t._0x1a8098)]),i.ellipsoid&&i.ellipsoid.material_bak&&(i.ellipsoid.material=i.ellipsoid.material_bak),i.ellipse&&i.ellipse[s(2410)]&&(i.ellipse[s(t._0x3f3143)]=i.ellipse[s(t._0x287054)]),i.rectangle&&i.rectangle[s(2410)]&&(i[s(1358)][s(t._0x3f3143)]=i.rectangle[s(t._0x287054)]),i.wall&&i.wall.material_bak&&(i[s(t._0x49f5e6)][s(t._0x3f3143)]=i[s(t._0x49f5e6)][s(2410)]),i.point&&i.point.color_bak&&(i[s(t._0x2395d2)].color=i[s(2800)].color_bak),i.billboard&&(i[s(t._0x2d1ff9)].color_bak?i.billboard.color=i.billboard.color_bak:i.billboard.color=void 0),i.model&&(i[s(1243)][s(4006)]?i.model[s(t._0x35b80e)]=i[s(t._0x427f84)].color_bak:i.model.color=void 0),i.label&&i[s(743)].fillColor_bak&&(i.label.fillColor=i[s(t._0x529cc1)][s(2974)])}),this[x(e._0x25469)]&&this.onEnd(this.entitys),delete this.entitys),this}[_0x2397ca(3468)](){const e={_0x14ca44:824,_0x27693d:1243},t=this;this.entitys&&loopArrayForFun(this.entitys,function(x){const i=_0x3361;x.point&&(x.point[i(1089)]=t.color),x.billboard&&(x[i(e._0x14ca44)].color=t.color),x[i(1243)]&&(x[i(e._0x27693d)].color=t.color),x.label&&(x.label.fillColor=t.color)})}[_0x2397ca(1205)](){const e={_0xafb9d9:3531},t={_0x5be880:3468},x=_0x2397ca,i=30,s=this.maxAlpha/i;let o=0;this.interVal=setInterval(()=>{const r=_0x3361;o+=s,o>this.maxAlpha&&(o=0),this.color=this.color.withAlpha(o),this[r(t._0x5be880)]()},i),this[x(e._0xafb9d9)]&&(this[x(1586)]=setTimeout(()=>{this.stopFlicker()},this[x(3531)]*1e3))}_stopTime(){const e={_0x49f4dc:2363},t=_0x2397ca;this[t(e._0x49f4dc)]&&(clearInterval(this.interVal),this[t(2363)]=null),this.timeEndVal&&(clearTimeout(this.timeEndVal),this[t(1586)]=null)}}function loopArrayForFun(n,e){if(n!=null)if(Array.isArray(n)){const t=[];for(let x=0,i=n.length;x<i;x++)t.push(e(n[x]));return t}else return e(n)}class BaseEntity extends BaseGraphic{get[_0x2397ca(809)](){const e={_0x532286:809},t=_0x2397ca;var x;return(x=this._layer)===null||x===void 0?void 0:x[t(e._0x532286)]}get czmObject(){return this._entity}get czmObjectEx(){let e=[];return this._primitive_label&&e.push(this._primitive_label),this._entity_outlines&&(e=e.concat(this._entity_outlines)),e}get entity(){return this._entity}get entityGraphic(){const e={_0xa123d:773,_0x3cb4f0:2800},t=_0x2397ca;var x;return(x=this[t(e._0xa123d)])===null||x===void 0?void 0:x[t(e._0x3cb4f0)]}get label(){const e=_0x2397ca;var t,x;if(this._primitive_label)return this[e(2737)];if((t=this[e(773)])!==null&&t!==void 0&&t[e(743)])return this[e(773)][e(743)];if((x=this[e(357)])!==null&&x!==void 0&&x.label){var i;return(i=this[e(357)])===null||i===void 0?void 0:i.label}return{}}get[_0x2397ca(3408)](){return this._enabledEdit}[_0x2397ca(3804)](){const e={_0x530dab:3044,_0x40b57b:760},t=_0x2397ca;this.enabledEvent=!1;const x=this._layer;this._entity.show=!1,this._onRemove(),delete this[t(773)],this.options.positions&&(this.positions=this.options.positions),this[t(3044)][t(760)]&&(this.position=this[t(e._0x530dab)][t(e._0x40b57b)]),this._onAdd(x),this.enabledEvent=!0}_mountedHook(){}_addedHook(e){const t={_0x5aedcb:809,_0x583223:3998},x={_0x33a1fa:2796,_0x682fce:809},i=_0x2397ca;this[i(t._0x5aedcb)][i(t._0x583223)].add(this.czmObject),this.czmObjectEx[i(1255)](s=>{const o=i;s instanceof Cesium__namespace[o(x._0x33a1fa)]&&this[o(x._0x682fce)].entities[o(565)](s)}),this._clampToGround_reload&&(this._clampToGround_last=this.style.clampToGround)}_removedHook(){const e={_0x48b569:2689},t=_0x2397ca;this.stopDraw(),this.stopEditing(),this.czmObject&&this.dataSource.entities[t(e._0x48b569)](this.czmObject),this.czmObjectEx&&this.czmObjectEx[t(1255)](x=>{x instanceof Cesium__namespace[t(2796)]&&this.dataSource.entities.remove(x)}),this[t(2737)]&&(this._layer.labelCollection.remove(this._primitive_label),delete this._primitive_label)}_initFromEntity(e){const t={_0x3b6aed:2565},x=_0x2397ca;return e[x(t._0x3b6aed)]&&e.entityCollection.remove(e),e[x(3826)]=this.id,e}[_0x2397ca(3291)](){const e={_0x238eb2:3654},t=_0x2397ca;var x;(x=this.editing)!==null&&x!==void 0&&x.enabled&&this[t(e._0x238eb2)][t(4009)]()}_updateStyleBaseHook(e){const t={_0x2fc42e:3408,_0x47f3f4:2841,_0x179181:1091,_0x1a7284:2182,_0x4b0ead:449},x=_0x2397ca;var i;if(!(!this[x(3735)]||!e)){if(this[x(3428)]&&Cesium__namespace.defined(e.clampToGround)&&e.clampToGround!==this._clampToGround_last){const s=this[x(t._0x2fc42e)];this.reload(),this._clampToGround_last=e.clampToGround,s&&this.startEditing();return}return(Cesium__namespace.defined(e.setHeight)||Cesium__namespace.defined(e[x(t._0x47f3f4)]))&&(this._positions_draw?(this.positions=this._positions_draw,this.updateAttrForDrawing(!1)):this[x(t._0x179181)]=this.positionsShow),this._updateStyleHook(this.style,e),this._updateLabelStyleHook(this[x(357)],e),this._getOutlinePositions&&this._updateOutlineStyle(this._getOutlinePositions(),this.style),this._updateExOpacity&&Cesium__namespace.defined(e.globalAlpha)&&this._updateExOpacity(e[x(t._0x1a7284)]),this[x(t._0x4b0ead)]&&this[x(1179)](),(i=this.editing)!==null&&i!==void 0&&i.enabled&&this.editing[x(353)](e),this}}_updateDistanceDisplayConditionByEdit(){const e={_0x2548c6:2006,_0x220725:449,_0x4e5f71:3769,_0x153eb5:3274,_0xca2532:392,_0x43d329:169,_0x2b833d:1091,_0x1823ba:357,_0x228249:1034,_0x584afe:1894},t=_0x2397ca;let x;const i=this[t(e._0x2548c6)];if(i?x=Cesium__namespace.Cartesian3[t(230)](i,new Cesium__namespace.Cartesian3):x=(Cesium__namespace.Ellipsoid.WGS84.minimumRadius+Cesium__namespace.Ellipsoid.WGS84.maximumRadius)/2,this[t(e._0x220725)]?this[t(e._0x4e5f71)](x):this.updateDistanceDisplayCondition(),this._entity_outlines)for(let s=0,o=this[t(e._0x153eb5)].length;s<o;s++){const r=this[t(e._0x153eb5)][s][t(e._0xca2532)];this[t(357)][t(e._0x43d329)]?r[t(e._0x2b833d)]instanceof Cesium__namespace[t(428)]&&this[t(e._0x1823ba)][t(e._0x228249)]?this[t(e._0x584afe)](r,x):this.updateOutlinesDistanceDisplayCondition(r):r[t(e._0x43d329)]=void 0}}updateDistanceDisplayCondition(e=0){const t={_0x403e8a:169,_0x5acf21:357,_0x1f50c0:642},x=_0x2397ca;this.style[x(t._0x403e8a)]?this.entityGraphic.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number((this[x(t._0x5acf21)].distanceDisplayCondition_near??0)+e),Number((this.style.distanceDisplayCondition_far??Number[x(t._0x1f50c0)])+e)):this.entityGraphic.distanceDisplayCondition=void 0}[_0x2397ca(1894)](e,t=0){const x={_0x371917:2388,_0x5d56eb:642},i=_0x2397ca;e.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number((this.style.distanceDisplayCondition_near??0)+t),Number((this.style[i(x._0x371917)]??Number[i(x._0x5d56eb)])+t))}[_0x2397ca(353)](e,t){}openHighlight(e,t=!0){const x={_0x3ef0d7:1212,_0x1dff8f:895,_0x50e462:2720,_0x36d64f:357},i=_0x2397ca;var s;t&&(this._map[i(x._0x3ef0d7)](),this[i(558)].last_highlighGraphic=this);const o=e||this[i(x._0x1dff8f)]||((s=this._layer)===null||s===void 0?void 0:s._highlightOptions);if(o){const r=[];for(const _ in o)_!==i(968)&&!Cesium__namespace.defined(this.style[_])&&r.push(_);r.length>0&&logWarn(i(x._0x50e462),r);const c=merge(clone(this[i(x._0x36d64f)]),o);this._updateStyleHook(c,o),this._updateLabelStyleHook(c,o),this._getOutlinePositions&&this._updateOutlineStyle(this[i(1885)](),c),this.fire(EventType.highlightOpen,{},!0)}}[_0x2397ca(1212)](){const e={_0x507ed0:2691,_0x1c0a05:2915},t=_0x2397ca;var x;!this[t(3401)]||((x=this._map)===null||x===void 0?void 0:x[t(e._0x507ed0)])!==this||(this._updateStyleHook(this[t(357)],this.style),this[t(1484)](this.style,this.style),this._getOutlinePositions&&this[t(e._0x1c0a05)](this._getOutlinePositions(),this.style),this._map._clearLastHighlight(),this.fire(EventType[t(507)],{},!0))}_createEntity(e){const t={_0x472ef9:2365,_0x1f7d35:3085,_0x44b312:3044},x=_0x2397ca;this.options.onBeforeCreate&&(e=this[x(3044)].onBeforeCreate(e)||e),this._onBeforeCreate&&(e=this._onBeforeCreate(e)||e);const i={id:this.id,name:this[x(2044)]||this.id,properties:this.attr,show:this.show,parent:this.options[x(3085)]};return this.options[x(2166)]&&(i.availability=this.options.availability),this.options.description&&(i.description=this.options[x(t._0x472ef9)]),this.options[x(1686)]&&(i.viewFrom=this.options.viewFrom),this.options.parent&&(i[x(t._0x1f7d35)]=this[x(t._0x44b312)].parent),new Cesium__namespace.Entity({...i,...e})}[_0x2397ca(1484)](e,t){const x={_0x195e37:743,_0x34ef14:2737,_0x15afba:1578,_0x34b28d:639,_0xb574e3:743,_0x380900:639,_0x38926d:2692},i=_0x2397ca;if(t!=null&&t[i(743)])if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace[i(639)](e.label.clampToGround)&&(t.label.clampToGround=e.clampToGround),this._primitive_label){var s,o,r,c;LabelStyleConver.toCesiumVal(e[i(x._0x195e37)],this[i(x._0x34ef14)],this[i(x._0x15afba)]),(Cesium__namespace.defined(t==null||(s=t.label)===null||s===void 0?void 0:s.position)||Cesium__namespace.defined(t==null||(o=t.label)===null||o===void 0?void 0:o.height)||Cesium__namespace.defined(t==null||(r=t.label)===null||r===void 0?void 0:r.addHeight)||Cesium__namespace[i(x._0x34b28d)](t==null||(c=t.label)===null||c===void 0?void 0:c.setHeight))&&this._updateLabelPosition()}else if(this._entity.label){var _,l,h;LabelStyleConver.toCesiumVal(e[i(x._0x195e37)],this._entity[i(x._0x195e37)],this[i(1578)]),(Cesium__namespace.defined(t==null||(_=t[i(x._0xb574e3)])===null||_===void 0?void 0:_.height)||Cesium__namespace[i(x._0x380900)](t==null||(l=t.label)===null||l===void 0?void 0:l.addHeight)||Cesium__namespace.defined(t==null||(h=t.label)===null||h===void 0?void 0:h.setHeight))&&this[i(x._0x38926d)]()}else this._addLabel();else Cesium__namespace.defined(t==null?void 0:t.globalAlpha)&&this._updateLabelOpacity(t.globalAlpha)}[_0x2397ca(856)](){const e={_0x54a9eb:357,_0x28f3fc:2737},t=_0x2397ca,x=this.style.label;if(!x||!x.text)return;Cesium__namespace[t(639)](this.style.clampToGround)&&!Cesium__namespace.defined(x[t(1034)])&&!Cesium__namespace.defined(x.height)&&(x.clampToGround=this.style.clampToGround);const i=LabelStyleConver.toCesiumVal(this[t(e._0x54a9eb)].label,{},this.attr);return i.show=this.show,i.position=this._getLablePosition(),this._primitive_label&&this._layer.labelCollection.remove(this[t(e._0x28f3fc)]),this._primitive_label=this._layer.labelCollection.add(i),this.bindPickId(this._primitive_label),this._primitive_label}_updateLabelPosition(){const e={_0x24f818:760},t=_0x2397ca;this._primitive_label&&(this._primitive_label[t(e._0x24f818)]=this[t(981)]())}[_0x2397ca(1426)](e){const t=_0x2397ca;var x;(x=this._entity)!==null&&x!==void 0&&x[t(743)]&&LabelStyleConver[t(2732)](this._entity.label,e),this._primitive_label&&this._primitive_label[t(3482)]&&LabelStyleConver.setOpacity(this._primitive_label,e)}_getLablePosition(){const e={_0x329887:1364,_0x119368:1364,_0x45348a:295,_0x2e5c7d:357},t=_0x2397ca,x=this.style.label;let i;if(x.position)if(x[t(760)]===t(2006))i=this.centerOfMass;else if(isString(x.position)){const r=template(x.position,this.attr,!0);r&&(i=LngLatPoint[t(e._0x329887)](r).toCartesian())}else i=LngLatPoint[t(e._0x119368)](x[t(760)]).toCartesian();if(!i&&(i=this.center),!i)return new Cesium__namespace[t(e._0x45348a)];if(Cesium__namespace.defined(x.height)||Cesium__namespace.defined(this[t(e._0x2e5c7d)].height)){const r=x.height??this.style.height;i=setPositionsHeight(i,r)}Cesium__namespace.defined(this.style[t(2437)])&&(i=addPositionsHeight(i,this.style[t(2437)]));let s=x[t(440)];Cesium__namespace.defined(s)&&(isString(s)&&(s=Number(template(s,this[t(1578)],!0)),isNaN(s)&&(s=0)),i=setPositionsHeight(i,s));let o=x.addHeight;return Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this.attr,!0)),isNaN(o)&&(o=0)),i=addPositionsHeight(i,o)),i}_createLabel(e={},t){const x={_0x3e5445:3935,_0x3555bb:1425,_0x415fef:1897},i={_0x959df2:1578,_0x36de33:484},s={_0xd270ef:728},o=_0x2397ca;if(e.type&&e.type!=="label"){const r=create$4(e[o(968)],{position:t,style:e,hasEdit:!1,isPrivate:!0});return Object.defineProperties(r,{text:{set:function(c){const _=o;this.attr.text=c,this[_(357)][_(s._0xd270ef)](c,this)},get:function(){const c=o;return this[c(i._0x959df2)][c(i._0x36de33)]}}}),this._layer[o(340)](r),r}else{const r=LabelStyleConver.toCesiumVal({color:o(x._0x3e5445),font_size:20,outline:!0,outlineColor:"#000000",outlineWidth:3,background:!0,backgroundColor:"#000000",backgroundOpacity:.5,scaleByDistance:!0,scaleByDistance_far:8e5,scaleByDistance_farValue:.5,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,pixelOffsetY:-15,horizontalOrigin:Cesium__namespace.HorizontalOrigin.LEFT,verticalOrigin:Cesium__namespace.VerticalOrigin.BOTTOM,visibleDepth:!1,...e});t&&(r.position=t);const c=this._layer.labelCollection.add(r);return this[o(x._0x3555bb)](c),c[o(x._0x415fef)]=!0,c.hasEdit=!1,c}}_removeLabel(e){const t=_0x2397ca;e.isAdded?this[t(3831)].removeGraphic(e,!0):this._layer.labelCollection.remove(e)}_getOutlineStyle(e,t){const x={_0x4eb09c:3930,_0x170161:1724},i=_0x2397ca,s={...e};return delete s[i(3816)],delete s.materialType,delete s.materialOptions,delete s.outline,delete s.outlineColor,delete s.outlineOpacity,delete s[i(1724)],delete s[i(x._0x4eb09c)],{...s,show:e.outline??!1,color:e.outlineColor??Cesium__namespace.Color[i(3970)],opacity:e[i(168)],width:e[i(x._0x170161)]??1,arcType:e.arcType??e.clampToGround?Cesium__namespace.ArcType.GEODESIC:Cesium__namespace.ArcType.NONE,...e[i(3930)],...t}}_updateOutlineStyle(e,t,x){const i={_0x5194a0:3274,_0x4d0a7e:2027,_0x14e916:428,_0x478a10:3872,_0x235889:3210,_0x8e4df9:809,_0x19ca7a:392,_0x307d2b:2812,_0x2ead74:209},s=_0x2397ca;var o;if(!this.entityGraphic)return;const r=this[s(1833)](t,x);if(r.show&&(this[s(357)][s(2437)]??0)===0&&(r[s(1526)]>1||t.clampToGround||((o=this[s(i._0x5194a0)])===null||o===void 0?void 0:o[s(i._0x4d0a7e)])>0)){if(this[s(2812)].outline=!1,this[s(3274)])for(let c=0,_=this._entity_outlines.length;c<_;c++){const l=this._entity_outlines[c].polyline;if(e&&e[c]){let h=e[c];h instanceof Cesium__namespace[s(i._0x14e916)]?l[s(1091)]=h:Array.isArray(h)&&h.length>0&&(Cesium__namespace.defined(r[s(i._0x478a10)])&&(h=setPositionsHeight(h,r.height)),Cesium__namespace.defined(r.setHeight)&&(h=setPositionsHeight(h,r.setHeight)),Cesium__namespace[s(639)](r.addHeight)&&(h=addPositionsHeight(h,r[s(2841)])),r.closure??!0?l[s(1091)]=h.concat(h[0]):l.positions=h)}PolylineStyleConver[s(2868)](r,l,!0)}else if(e){this._entity_outlines=[];for(let c=0,_=e.length;c<_;c++){let l=e[c];const h=PolylineStyleConver.toCesiumVal(r,{},!0);l instanceof Cesium__namespace.CallbackProperty?h.positions=l:Array.isArray(l)&&l.length>0&&(Cesium__namespace.defined(r.height)&&(l=setPositionsHeight(l,r.height)),Cesium__namespace.defined(r.setHeight)&&(l=setPositionsHeight(l,r.setHeight)),Cesium__namespace[s(639)](r.addHeight)&&(l=addPositionsHeight(l,r.addHeight)),r.closure??!0?h.positions=l[s(i._0x235889)](l[0]):h.positions=l);const d=this._createEntity({id:this.id+"-outline"+c,polyline:h,show:this.show});this.bindPickId(d),this._entity_outlines.push(d),this.isAdded&&this[s(i._0x8e4df9)][s(3998)].add(d)}}return!0}else{if(this[s(3274)])for(let c=0,_=this._entity_outlines.length;c<_;c++){const l=this._entity_outlines[c][s(i._0x19ca7a)];l[s(3482)]=!1}return this.entityGraphic[s(3472)]=r.show,this.entityGraphic.outlineWidth=r.width,r.show&&(this[s(i._0x307d2b)][s(i._0x2ead74)]=getCesiumColor(r.color,Cesium__namespace.Color[s(3970)])),!1}}[_0x2397ca(1705)](e){const t={_0x437410:396,_0x1ceff3:2812},x=_0x2397ca;var i;if(this._entity_outlines&&this._entity_outlines.length>0)for(let o=0,r=this._entity_outlines.length;o<r;o++){var s;const c=this._entity_outlines[o].polyline;Cesium__namespace.defined(c==null||(s=c.material)===null||s===void 0?void 0:s.globalAlpha)?c[x(3816)].globalAlpha=e:this._updateOutlineStyle(null,this.style)}if((i=this[x(2812)])!==null&&i!==void 0&&i[x(3472)]&&this[x(2812)].outline.getValue()){const o=getCesiumColor(this[x(2812)].outlineColor,Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this[x(2812)]._outlineColor_alpha)&&(this.entityGraphic._outlineColor_alpha=o[x(2708)]),this.entityGraphic.outlineColor=o[x(t._0x437410)](this[x(t._0x1ceff3)]._outlineColor_alpha*e)}}_updateOutlineToCallback(){const e={_0x4b8fc4:3274},t=_0x2397ca;if(this._entity_outlines)for(let x=0,i=this._entity_outlines.length;x<i;x++){const s=this[t(e._0x4b8fc4)][x];s.polyline.positions instanceof Cesium__namespace.CallbackProperty||(s.polyline[t(1091)]=new Cesium__namespace[t(428)](o=>this.outlinePositions,!1))}}[_0x2397ca(3320)](){const e=_0x2397ca;if(this._entity_outlines)for(let t=0,x=this._entity_outlines[e(2027)];t<x;t++){const i=this._entity_outlines[t];i.polyline.positions instanceof Cesium__namespace.CallbackProperty&&(i.polyline[e(1091)]=this.outlinePositions)}}setOpacity(e){const t={_0x5a0e25:357,_0x37bfe3:2812},x=_0x2397ca;if(this[x(t._0x5a0e25)].globalAlpha=e,this[x(2359)](this[x(t._0x37bfe3)],e)){this._updateLabelOpacity(e),this._updateOutlineOpacity(e),this._updateExOpacity&&this._updateExOpacity(e);return}super[x(2732)](e)}_updateEntityOpacity(e,t){const x={_0x164d9a:3970,_0x5dbb44:1261},i=_0x2397ca,s=e==null?void 0:e.material;if(!s)return!1;if(Cesium__namespace.defined(s==null?void 0:s.globalAlpha))return s.globalAlpha=t,!0;if(s._mars_type==="Color"||s._mars_type==="Image"){const o=getCesiumColor(s.color,Cesium__namespace[i(2134)][i(x._0x164d9a)]);return!Cesium__namespace.defined(s._color_alpha)&&(s[i(x._0x5dbb44)]=o.alpha),s.color=o.withAlpha(s[i(1261)]*t),!0}return!1}startFlicker(e){const t={_0x223521:3062,_0x492b1c:3279,_0x1868e8:3466},x=_0x2397ca;!this.flickerEntity&&(this[x(t._0x223521)]=new FlickerEntity);const i=this[x(t._0x492b1c)].concat(this[x(3735)]);return this.flickerEntity[x(t._0x1868e8)](i,e),this.flickerEntity}stopFlicker(){return this[_0x2397ca({_0x2a6803:3062}._0x2a6803)]?this.flickerEntity.stopFlicker():null}startDraw(e){const t={_0x24212a:558},x=_0x2397ca;if(this._enabledDraw)return this;if(this._enabledDraw=!0,e&&this[x(2717)](e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._drawEndEventType=e.options[x(2825)]??EventType.dblClick,this._drawDelEventType=e.options.drawDelEventType??EventType.rightClick,this[x(t._0x24212a)].mouseEvent.noPickEntity=this._entity,this[x(558)]._setEditCursor(!0),this.enableControl(!1),this._setPositionsToCallback(),this._startDrawHook(),this.fire(EventType.drawStart,{drawtype:this.type,graphic:this},!0)}[_0x2397ca(1740)](){const e={_0x2982b5:2728,_0x49c50d:558,_0x53a0b4:1047,_0xaa99a6:1047,_0x5307a2:3503,_0x332022:3044,_0x213a30:3044},t=_0x2397ca;var x,i,s,o;if(!this[t(e._0x2982b5)])return this;if(this._stopDrawHook(),this._updateLabelPosition(),this[t(e._0x49c50d)]._setEditCursor(!1),this[t(3237)](!0),this[t(e._0x49c50d)][t(1888)](),this._map.mouseEvent.noPickEntity=null,this[t(e._0x2982b5)]=!1,this[t(1962)]){var r;((r=this._positions_draw)===null||r===void 0?void 0:r.length)>0&&this[t(e._0x53a0b4)].pop(),this._position_draw&&(this._position_draw=void 0)}if(this.lastPointTemporary=!1,!this._position_draw&&(!this._positions_draw||((x=this[t(e._0xaa99a6)])===null||x===void 0?void 0:x[t(2027)])===0))return this.remove(!0),void 0;if(this._positions_draw&&this._positions_draw.length<this._minPointNum)return this[t(2689)](!0),void 0;this._layer.options.isRestorePositions&&this._cancelPositionsCallback(),this.fire(EventType.drawCreated,{drawtype:this.type,positions:this[t(1047)]},!0),(i=this.options)!==null&&i!==void 0&&i[t(e._0x5307a2)]&&this[t(3044)].success(this),(s=this[t(e._0x332022)])!==null&&s!==void 0&&(o=s._promise)!==null&&o!==void 0&&o.resolve&&this[t(e._0x213a30)]._promise.resolve(this)}[_0x2397ca(3394)](){}[_0x2397ca(1182)](){}_startDrawHook(){}_stopDrawHook(){}_showDrawMouseMoveSmallTooltip(e){const t={_0x90a13b:1047,_0x291030:558,_0x6075ce:3676,_0xb89af3:1337,_0x244bab:2037,_0xc7652c:1337},x=_0x2397ca,i=e.endPosition??e.position;if(this._positions_draw.length<=1&&isPCBroswer())this._map.openSmallTooltip(i,this._map.getLangText("_单击开始绘制"));else if(this[x(t._0x90a13b)].length<this._minPointNum)this[x(558)][x(1882)](i,this[x(t._0x291030)].getLangText(x(2037)));else if(this[x(t._0x90a13b)][x(2027)]>=this._maxPointNum)this._map.openSmallTooltip(i,this[x(t._0x291030)].getLangText(x(t._0x6075ce)));else{let s;if(isPCBroswer()){let o="";(this.options.hasDrawDelPoint??!0)&&(o=", "+this._map.getLangText(x(3282))),s=this._map[x(t._0xb89af3)](x(t._0x244bab))+o+"<br/>"+this._map.getLangText("_双击完成绘制")}else s=this._map[x(t._0xc7652c)]("_单击增加点");this._map.openSmallTooltip(i,s)}}_onMouseMoveHandler(e){const t={_0x544e52:3044,_0x2a8f8d:3855,_0x3ae571:1047},x=_0x2397ca;this._showDrawMouseMoveSmallTooltip(e);const i=e.cartesian;if(i){if(this[x(t._0x544e52)].validDrawPosition&&!this.options[x(t._0x2a8f8d)](i,this))return;this.lastPointTemporary&&this._positions_draw.pop(),this.lastPointTemporary=!0,this[x(t._0x3ae571)].push(i),this.updateAttrForDrawing(!1),this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,positions:this[x(1047)]},!0)}}[_0x2397ca(1230)](e){const t={_0x3e8d19:3836,_0x316a45:3024,_0x570a37:3354,_0xfabe96:273,_0x4affba:3354,_0x3eb8f4:641,_0x1b7a21:1962,_0x33aec7:3855,_0x1ca716:1047,_0xe75689:3449,_0x5ce4a4:2841,_0x598cc4:3044,_0xcdb6ff:3487},x=_0x2397ca,i=new Date()[x(t._0x3e8d19)]()-(this[x(3024)]||0);if(this._last_clickTime&&i<200||(this[x(t._0x316a45)]=new Date().getTime(),this._last_clickPositionX&&Math.abs(this[x(t._0x570a37)]-e.windowPosition.x)<10&&Math.abs(this._last_clickPositionY-e[x(t._0xfabe96)].y)<10))return;this[x(t._0x4affba)]=e.windowPosition.x,this._last_clickPositionY=e.windowPosition.y;let s=e[x(t._0x3eb8f4)];if(!s&&this[x(t._0x1b7a21)]&&(s=this._positions_draw[this._positions_draw.length-1]),s){var o;if(this.options[x(3855)]&&!this.options[x(t._0x33aec7)](s,this))return;this[x(1962)]&&this[x(t._0x1ca716)][x(3978)](),this[x(1962)]=!1,this[x(t._0xe75689)](),(o=this.options)!==null&&o!==void 0&&o[x(t._0x5ce4a4)]&&(s=addPositionsHeight(s,this[x(t._0x598cc4)].addHeight)),this._positions_draw.push(s),this[x(2140)](!1),!isPCBroswer()&&this[x(t._0xcdb6ff)](e),this[x(1788)](EventType.drawAddPoint,{...e,drawtype:this.type,positions:this._positions_draw},!0),this._positions_draw.length>=this._maxPointNum&&this.stopDraw()}}_onRightClickHandler(e){const t={_0x11f10a:1047,_0x4e2482:3978,_0x26682b:1962,_0x5b3222:2434},x=_0x2397ca;this[x(t._0x11f10a)][x(t._0x4e2482)]();const i=e.cartesian;i&&(this[x(t._0x26682b)]&&this._positions_draw.pop(),this[x(1962)]=!0,this.fire(EventType.drawRemovePoint,{...e,drawtype:this.type,positions:this._positions_draw},!0),this._positions_draw[x(t._0x5b3222)](i),this.updateAttrForDrawing(!1))}[_0x2397ca(3770)](e){e.type!==EventType.dblClick&&(this.lastPointTemporary=!1),this.removeNearPoint(),this.endDraw()}removeNearPoint(){const e=_0x2397ca;if(!(this._positions_draw.length<3))for(let t=this._positions_draw.length-1;t>0;t--){const x=this._positions_draw[t],i=this._positions_draw[t-1];if(Cesium__namespace[e(295)].distance(x,i)<.01)this._positions_draw.splice(t,1);else break}}endDraw(){const e={_0xa6e201:1047},t=_0x2397ca;return!this[t(2728)]||this[t(e._0xa6e201)]&&this._positions_draw.length<this._minPointNum?!1:(this.updateAttrForDrawing(!1),this.stopDraw(),!0)}[_0x2397ca(2140)](e){}[_0x2397ca(1615)](){const e={_0x47ee4d:1508,_0x27886e:1456,_0x5842fb:3654,_0x5a1e6d:3654},t=_0x2397ca;if(this._enabledEdit)return this;if(this._enabledEdit=!0,!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map[t(e._0x47ee4d)].noPickEntity=this._entity,this._map[t(e._0x47ee4d)][t(e._0x27886e)]=!1,!this[t(e._0x5842fb)]&&(this[t(e._0x5842fb)]=new this.EditClass(this)),this.editing.activate&&this[t(e._0x5a1e6d)].activate(),this._isCallbackPositions&&this._updateDistanceDisplayConditionByEdit()}stopEditing(){const e={_0x2d5dd4:1806,_0x341d3e:2219,_0x6c15ce:558},t=_0x2397ca;var x;if(!this._enabledEdit||!this.isAdded)return this;(x=this[t(3654)])!==null&&x!==void 0&&x.disable&&this.editing[t(e._0x2d5dd4)](),this[t(3044)]&&(this.style.distanceDisplayCondition&&this._updateDistanceDisplayConditionByEdit(),this[t(2219)]&&this[t(e._0x341d3e)](),this[t(e._0x6c15ce)]&&(this[t(e._0x6c15ce)].closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this._map.mouseEvent.enabledMoveTarget=!0),this[t(371)]=!1)}}class BasePrimitive extends BaseGraphic{get czmObject(){return this._primitive}get czmObjectEx(){const e={_0x4c2746:2434},t=_0x2397ca,x=[];return this._primitive_label&&x[t(e._0x4c2746)](this._primitive_label),this[t(940)]&&x[t(2434)](this._primitive_outline),x}get[_0x2397ca(3595)](){var e;return(e=this._layer)===null||e===void 0?void 0:e.primitiveCollection}get primitive(){return this[_0x2397ca(2417)]}get geometryInstanceAttributes(){return this._primitive?this.getGeometryInstanceAttributes(this.id):this._primitive_outline?this.getGeometryInstanceAttributes(this.id,this._primitive_outline):null}get uniforms(){const e={_0x36675b:957,_0x1efa39:3816},t=_0x2397ca;var x,i,s;return(x=this[t(e._0x36675b)])===null||x===void 0||(i=x.appearance)===null||i===void 0||(s=i[t(e._0x1efa39)])===null||s===void 0?void 0:s[t(2554)]}get label(){const e={_0x85d91b:2737},t=_0x2397ca;return this._primitive_label?this[t(e._0x85d91b)]:this[t(357)].label}get isEditing(){return this._enabledEdit}_isColorMaterial(e,t){var x;const i=e.materialType||(t==null?void 0:t.materialType)||(t==null||(x=t.material)===null||x===void 0?void 0:x.type);return!(Cesium__namespace.defined(i)&&i!==Color$2)}_addedHook(e){const t={_0x1ebab5:2248,_0x2109b3:2064,_0x122687:3358,_0x316ab7:2417,_0x1217a3:940,_0x26065a:2437,_0x430012:743,_0x5309fa:856},x=_0x2397ca;if(!this[x(3482)])return;!e.material&&!e.materialType&&(e.color||e.randomColor?e[x(t._0x1ebab5)]=Color$2:e.image&&(e.materialType=Image$1));const i=this[x(t._0x2109b3)](e);if(i[x(t._0x122687)]=this._isColorMaterial(e,i),this._primitive&&this.primitiveCollection.remove(this[x(t._0x316ab7)]),(e[x(241)]??!0)&&(this[x(2417)]=this._createPrimitive(i)),this[x(t._0x1217a3)]&&(this.primitiveCollection.remove(this[x(940)]),delete this._primitive_outline),e.outline){const s=this._getOutlineStyle(e);s[x(1526)]>1&&(this[x(357)][x(t._0x26065a)]??0)===0||s.clampToGround?this._primitive_outline=this._createPolylineOutline(s):(i.outlineStyle=s,this._primitive_outline=this._createPrimitive(i,!0))}e[x(t._0x430012)]&&this[x(t._0x5309fa)]()}[_0x2397ca(380)](){const e={_0x540ad0:2055,_0x3e82c6:613,_0x2fb221:2689,_0x511e86:2737},t=_0x2397ca;!this[t(e._0x540ad0)]&&(this.stopDraw(),this[t(3220)]()),this[t(2417)]&&(this.primitiveCollection.remove(this._primitive),delete this._primitive),this._primitive_outline&&(this[t(3595)].remove(this._primitive_outline),delete this._primitive_outline),this._primitive_label&&(this._layer[t(e._0x3e82c6)][t(e._0x2fb221)](this._primitive_label),delete this[t(e._0x511e86)])}_showHook(e){const t=_0x2397ca;this.isAdded&&(e?(this._addedHook(this.style),this.czmObject&&this.bindPickId(this.czmObject),this.czmObjectEx&&this.czmObjectEx[t(1255)](x=>{this.bindPickId(x)})):(this._noDestroy=!0,this._removedHook(),this._noDestroy=!1))}_conversionStyle(e){return e}_createPrimitive(e,t){const x={_0x251e73:3358,_0x5d4067:2870,_0x2ebea6:3482,_0x160f9e:169,_0x50002b:3799,_0x5d2e30:357,_0x8770f3:3629,_0x24ea6f:1425},i=_0x2397ca;(!e.vertexFormat&&e[i(x._0x251e73)]||t)&&(e[i(3612)]=this.defaultVertexFormat||Cesium__namespace.PerInstanceColorAppearance[i(3333)]);const s={...this.options,geometryInstances:this._createGeometryInstance(e,t),show:this.show,shadows:e[i(3982)]};delete s.style,delete s.attr,delete s.modelMatrix,s.geometryInstances[i(2870)]=s.geometryInstances.attributes||{},s.geometryInstances[i(x._0x5d4067)].show=new Cesium__namespace.ShowGeometryInstanceAttribute(this[i(x._0x2ebea6)]),e[i(x._0x160f9e)]&&(s[i(3500)][i(2870)].distanceDisplayCondition=e.distanceDisplayCondition),!s[i(945)]&&(s.appearance=this._createAppearance(e,s,t)),e[i(x._0x50002b)]&&!s[i(3542)]&&(s.depthFailAppearance=this._createAppearance(e,s,t));let o;return this[i(x._0x5d2e30)].clampToGround?(s.classificationType=e.classificationType,this[i(968)]==="polylineP"||this.type===i(2461)?o=this[i(3595)].add(new Cesium__namespace[i(2626)](s)):o=this.primitiveCollection[i(565)](new Cesium__namespace.GroundPrimitive(s))):e[i(4029)]?(s.classificationType=e.classificationType||Cesium__namespace.ClassificationType.CESIUM_3D_TILE,o=this.primitiveCollection[i(565)](new Cesium__namespace[i(3555)](s))):o=this.primitiveCollection.add(new Cesium__namespace[i(x._0x8770f3)](s)),this[i(x._0x24ea6f)](o),o}[_0x2397ca(2226)](e,t=Cesium__namespace[_0x2397ca(2134)].WHITE[_0x2397ca(396)](.5)){const x={_0x2b3cc2:3816},i=_0x2397ca;var s,o,r,c;return((s=e.material)===null||s===void 0||(o=s.uniforms)===null||o===void 0?void 0:o.color)||((r=e[i(x._0x2b3cc2)])===null||r===void 0||(c=r[i(3044)])===null||c===void 0?void 0:c[i(1089)])||e.color||t}[_0x2397ca(3198)](e,t,x){const i={_0x35513e:3500,_0x58e443:2870,_0x37917f:2870},s=_0x2397ca;if(e[s(3816)]&&!e._isColorMaterial&&!x)return new Cesium__namespace.MaterialAppearance({...e});if(t[s(3500)]instanceof Cesium__namespace.GeometryInstance){let o;x&&e.outlineStyle?o=getColorByStyle(e.outlineStyle,Cesium__namespace.Color[s(3970)]):o=this._getColorByColorMaterial(e),e.translucent=o[s(2708)]!==1,t.geometryInstances.attributes=t[s(i._0x35513e)][s(i._0x58e443)]||{},t.geometryInstances.attributes.color=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(o),e.depthFail&&(t.geometryInstances[s(i._0x37917f)][s(658)]=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(e[s(658)]||o))}return Cesium__namespace.defined(this.translucent)&&(e.translucent=this.translucent),new Cesium__namespace.PerInstanceColorAppearance({...e})}[_0x2397ca(2195)](e,t){return this.options.geometryInstances}_updateDiffHeight(e,t){const x={_0x27f150:357,_0x39ac72:639,_0x4d48a7:1091},i=_0x2397ca;if(!this[i(x._0x27f150)][i(1034)]){if(t){let s=0;Cesium__namespace.defined(this.style.height)?s=this.style[i(3872)]:s=getMaxHeight(this.positions),e.height=s}if(Cesium__namespace.defined(this[i(357)].diffHeight)&&!Cesium__namespace[i(639)](e.extrudedHeight)){let s=0;Cesium__namespace.defined(e.height)?s=e.height:Cesium__namespace[i(x._0x39ac72)](this[i(357)].height)?s=this.style.height:s=getMaxHeight(this[i(x._0x4d48a7)]),e.extrudedHeight=s+this.style.diffHeight}}}_updateStyleBaseHook(e){const t={_0x5c2ea7:907,_0x13cf5f:3602,_0x280883:639,_0x444314:982,_0x1a2599:353},x=_0x2397ca;e&&(this[x(t._0x5c2ea7)]&&this.type[x(t._0x13cf5f)](this[x(t._0x5c2ea7)].type)?this._editing_entity.setStyle(e):this.czmObject&&(this._updateLabelStyleHook(this.style,e),this[x(3546)]&&Cesium__namespace.defined(e[x(2182)])&&this._updateExOpacity(e.globalAlpha),(Cesium__namespace.defined(e.setHeight)||Cesium__namespace[x(t._0x280883)](e.addHeight))&&(this.positions=this[x(t._0x444314)]),this[x(t._0x1a2599)](this.style,e)))}_updateStyleHook(e,t){const x={_0x524ccd:1089},i=_0x2397ca;if(e.materialType===Color$2&&(Cesium__namespace[i(639)](t[i(x._0x524ccd)])||Cesium__namespace.defined(t[i(4010)]))){const s=getColorByStyle(e);if(s&&this._updatePrimitiveForColorMaterial(this[i(2417)],s,e))if(Cesium__namespace.defined(t[i(3472)])){if(this._primitive_outline){const r=this._getOutlineStyle(e);if(!r[i(2248)])if(r.show){if(this._updatePrimitiveForColorMaterial(this._primitive_outline,getCesiumColor(r.color),e))return}else{this._primitive_outline&&(this.primitiveCollection[i(2689)](this._primitive_outline),delete this[i(940)]);return}}}else return}this.redraw(e)}[_0x2397ca(3012)](e,t,x){const i={_0x3b6d71:3816,_0x300ee4:1089,_0x403ffb:431},s=_0x2397ca;var o,r;if(!e)return!1;const c=e==null||(o=e.appearance)===null||o===void 0||(r=o.material)===null||r===void 0?void 0:r.uniforms;if(Cesium__namespace.defined(c==null?void 0:c.color)&&e.appearance[s(i._0x3b6d71)].type===Color$2)return e.appearance[s(666)]=t.alpha!==1,c[s(i._0x300ee4)]=t,!0;const _=this.getGeometryInstanceAttributes(this.id,e);return _!=null&&_.color?(_.color=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(t),_[s(658)]&&(x.depthFailColor||x.depthFail)&&(_.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute[s(i._0x403ffb)](getCesiumColor(x[s(658)],t))),!0):!1}setOpacity(e){const t={_0x292e1f:1426},x=_0x2397ca;if(this.style.globalAlpha=e,this._updatePrimitiveOpacity(this._primitive,e)){this._updatePrimitiveOpacity(this._primitive_outline,e),this[x(t._0x292e1f)](e),this[x(3546)]&&this._updateExOpacity(e);return}super.setOpacity(e)}_updatePrimitiveOpacity(e,t){const x={_0x102cca:3816,_0x596e9a:666,_0x2749a7:945,_0x2f659e:3816,_0x498133:968,_0x620758:1089,_0x18c3e0:2708,_0x386515:3501,_0x28bec5:2708,_0x397fbf:945,_0x4ae468:658,_0xf49aef:658,_0x5a2891:1010},i=_0x2397ca;if(!e)return!1;try{var s,o;const r=e==null||(s=e.appearance)===null||s===void 0||(o=s[i(x._0x102cca)])===null||o===void 0?void 0:o.uniforms;if(r){if(Cesium__namespace.defined(r.globalAlpha))return e[i(945)][i(x._0x596e9a)]=t!==1,r.globalAlpha=t,!0;if((e[i(x._0x2749a7)].material.type===Color$2||e[i(945)][i(x._0x2f659e)][i(x._0x498133)]===Image$1)&&Cesium__namespace.defined(r[i(x._0x620758)]))return!Cesium__namespace.defined(e._uniforms_color_alpha)&&(e._uniforms_color_alpha=r[i(1089)].alpha),r.color[i(2708)]=e._uniforms_color_alpha*t,e.appearance[i(666)]=r.color.alpha!==1,!0;if(e.appearance[i(3816)].type===Water$1)return!Cesium__namespace.defined(e[i(2938)])&&(e._uniforms_baseWaterColor_alpha=r.baseWaterColor.alpha,e._uniforms_blendColor_alpha=r.blendColor[i(x._0x18c3e0)]),this.globalAlpha!==1&&(r[i(x._0x386515)].alpha=e._uniforms_baseWaterColor_alpha*t,r.blendColor[i(x._0x28bec5)]=e._uniforms_blendColor_alpha*t),!0}const c=this.getGeometryInstanceAttributes(this.id,e);if(c!=null&&c.color){!Cesium__namespace.defined(e._attributes_color_alpha)&&(e._attributes_color_alpha=c[i(x._0x620758)][3]/255);const _=e._attributes_color_alpha*t;return c.color=new Uint8Array([c.color[0],c.color[1],c.color[2],Cesium__namespace.Color.floatToByte(_)]),e[i(x._0x397fbf)].translucent=_!==1,c[i(x._0x4ae468)]&&(!Cesium__namespace.defined(e._attributes_depthFailColor_alpha)&&(e._attributes_depthFailColor_alpha=c.depthFailColor[3]/255),c.depthFailColor=new Uint8Array([c.depthFailColor[0],c[i(x._0xf49aef)][1],c.depthFailColor[2],Cesium__namespace[i(2134)][i(x._0x5a2891)](e._attributes_depthFailColor_alpha*t)])),!0}}catch{}return!1}[_0x2397ca(1695)](e,t){const x={_0x590b82:357},i=_0x2397ca;return t=t||this._primitive,!t||!t.getGeometryInstanceAttributes||this[i(x._0x590b82)].clampToGround&&!t._primitive?null:t.getGeometryInstanceAttributes(e)}_updateLabelOpacity(e){this._primitive_label&&this._primitive_label.show&&LabelStyleConver.setOpacity(this._primitive_label,e)}[_0x2397ca(2921)](e){const t={_0x5e1b90:3735},x=_0x2397ca;return this.isAdded&&this.show&&(this._noDestroy=!0,this._removedHook(),this._noDestroy=!1,this[x(2670)](e||this.style),this[x(3735)]&&this.bindPickId(this[x(t._0x5e1b90)]),this.czmObjectEx&&this.czmObjectEx[x(1255)](i=>{this.bindPickId(i)})),this}_updatePositionsHook(){this.redraw()}_updateLabelStyleHook(e,t){const x={_0x5e8e42:743,_0x1d561a:2182},i=_0x2397ca;if(t!=null&&t.label)if(this._primitive_label){var s,o,r,c;LabelStyleConver.toCesiumVal(e.label,this._primitive_label,this.attr),(Cesium__namespace.defined(t==null||(s=t.label)===null||s===void 0?void 0:s.position)||Cesium__namespace[i(639)](t==null||(o=t.label)===null||o===void 0?void 0:o.height)||Cesium__namespace.defined(t==null||(r=t.label)===null||r===void 0?void 0:r.addHeight)||Cesium__namespace.defined(t==null||(c=t[i(x._0x5e8e42)])===null||c===void 0?void 0:c.setHeight))&&this._updateLabelPosition()}else this._addLabel();else Cesium__namespace[i(639)](t==null?void 0:t[i(x._0x1d561a)])&&this._updateLabelOpacity(t.globalAlpha)}[_0x2397ca(856)](){const e={_0x3733d8:357,_0x20557a:1034,_0x3bf9ff:3482,_0x40db73:2737},t=_0x2397ca,x=this[t(e._0x3733d8)].label;if(!x||!x[t(484)])return;Cesium__namespace.defined(this.style[t(e._0x20557a)])&&!Cesium__namespace.defined(x.clampToGround)&&!Cesium__namespace.defined(x.height)&&(x.clampToGround=this.style.clampToGround);const i=LabelStyleConver.toCesiumVal(x,{},this.attr);return i.show=this[t(e._0x3bf9ff)],i.position=this[t(981)](),this._primitive_label&&this._layer.labelCollection[t(2689)](this._primitive_label),this[t(e._0x40db73)]=this._layer.labelCollection[t(565)](i),this[t(1425)](this._primitive_label),this._primitive_label}_updateLabelPosition(){const e=_0x2397ca;this._primitive_label&&!this._primitive_label.isDestroyed()&&(this._primitive_label.position=this[e(981)]())}_getLablePosition(){const e={_0x3f5c7f:760,_0x14bdfe:760,_0x29ce1a:2507,_0x5f27e9:1364,_0x5db213:357,_0x592f2c:2437,_0x259f0d:639},t=_0x2397ca,x=this.style[t(743)];let i;if(x[t(e._0x3f5c7f)])if(x[t(e._0x14bdfe)]==="center")i=this[t(e._0x29ce1a)];else if(isString(x[t(e._0x3f5c7f)])){const r=template(x.position,this.attr,!0);r&&(i=LngLatPoint[t(e._0x5f27e9)](r).toCartesian())}else i=LngLatPoint.parse(x.position).toCartesian();if(!i&&(i=this[t(2006)]),!i)return new Cesium__namespace.Cartesian3;if(Cesium__namespace.defined(x[t(3872)])||Cesium__namespace.defined(this[t(e._0x5db213)].height)){const r=x.height??this.style.height;i=setPositionsHeight(i,r)}Cesium__namespace[t(639)](this.style[t(e._0x592f2c)])&&(i=addPositionsHeight(i,this.style.diffHeight));let s=x.setHeight;Cesium__namespace[t(639)](s)&&(isString(s)&&(s=Number(template(s,this.attr,!0)),isNaN(s)&&(s=0)),i=setPositionsHeight(i,s));let o=x.addHeight;return Cesium__namespace[t(e._0x259f0d)](o)&&(isString(o)&&(o=Number(template(o,this.attr,!0)),isNaN(o)&&(o=0)),i=addPositionsHeight(i,o)),i}_getOutlineStyle(e,t){const x={_0xa1ddbb:3028,_0x4f7fee:2134,_0x4ea16d:3298},i=_0x2397ca,s={...e};return delete s.material,delete s.materialType,delete s[i(x._0xa1ddbb)],delete s.outline,delete s.outlineColor,delete s.outlineOpacity,delete s.outlineWidth,delete s.outlineStyle,{...s,show:e.outline??!1,color:e.outlineColor??Cesium__namespace[i(x._0x4f7fee)].WHITE,opacity:e.outlineOpacity,width:e.outlineWidth??1,arcType:e.arcType??e.clampToGround?Cesium__namespace.ArcType.GEODESIC:Cesium__namespace.ArcType[i(x._0x4ea16d)],...e[i(3930)],...t}}_getPolylineOutlinePositions(){return[this.positions]}_createPolylineOutline(e){const t={_0x1a406d:440,_0x1c8364:1034,_0x224a1e:3595,_0x475c49:1425},x=_0x2397ca,i=PolylineStyleConver.toCesiumVal(e),s=i[x(1034)]?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry,o=[],r=this._getPolylineOutlinePositions();for(let l=0,h=r.length;l<h;l++){let d=r[l];if(!d||d[x(2027)]===0)continue;Cesium__namespace.defined(e.height)&&(d=setPositionsHeight(d,e.height)),Cesium__namespace[x(639)](e.setHeight)&&(d=setPositionsHeight(d,e[x(t._0x1a406d)])),Cesium__namespace.defined(e.addHeight)&&(d=addPositionsHeight(d,e.addHeight)),d.length>0&&(d=d.concat(d[0]));const u={...i};u[x(1091)]=d,(!u.material||u[x(3816)].type==="Color")&&(u.vertexFormat=Cesium__namespace.PolylineColorAppearance.VERTEX_FORMAT);const m=this[x(2226)](u),f=new Cesium__namespace[x(3953)]({id:this.id,geometry:new s(u),attributes:{color:Cesium__namespace[x(1293)].fromColor(m),distanceDisplayCondition:i.distanceDisplayCondition,show:new Cesium__namespace.ShowGeometryInstanceAttribute(this.show)}});o.push(f)}if(o.length===0)return;const c={...this.options,geometryInstances:o,show:this.show,shadows:i.shadows};delete c.style,delete c.attr,i[x(3816)]&&!i[x(4029)]?c.appearance=new Cesium__namespace.PolylineMaterialAppearance({...i}):c[x(945)]=new Cesium__namespace.PolylineColorAppearance({...i});let _;return this.style[x(t._0x1c8364)]?(c.classificationType=i.classificationType,_=this[x(3595)][x(565)](new Cesium__namespace[x(2626)](c))):_=this[x(t._0x224a1e)].add(new Cesium__namespace[x(3629)](c)),this[x(t._0x475c49)](_),_}[_0x2397ca(464)](e,t=!0){const x={_0x280a1b:1212,_0x1a757f:558,_0x591738:895,_0x10aad0:968,_0x1d10fd:2434,_0x36f5e6:1036},i=_0x2397ca;var s;t&&(this._map[i(x._0x280a1b)](),this[i(x._0x1a757f)].last_highlighGraphic=this);const o=e||this[i(895)]||((s=this._layer)===null||s===void 0?void 0:s[i(x._0x591738)]);if(o){const r=[];for(const _ in o)_!==i(x._0x10aad0)&&!Cesium__namespace.defined(this.style[_])&&r[i(x._0x1d10fd)](_);r.length>0&&logWarn("openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复",r);const c=merge(clone(this.style),o);this[i(353)](c,o),this._updateLabelStyleHook(c,o),this.fire(EventType[i(x._0x36f5e6)],{},!0)}}closeHighlight(){const e={_0xf9e547:1788},t=_0x2397ca;var x;!this.isAdded||((x=this[t(558)])===null||x===void 0?void 0:x.last_highlighGraphic)!==this||(this[t(353)](this.style,this.style),this[t(1484)](this[t(357)],this.style),this._map._clearLastHighlight(),this[t(e._0xf9e547)](EventType.highlightClose,{},!0))}_replaceFragmentShaderSourceByStyle(e){const t={_0x3ddfb3:357},x=_0x2397ca;return this.style.flat&&(e=`#define FLAT
`+e),this[x(t._0x3ddfb3)].faceForward&&(e=`#define FACE_FORWARD
`+e),e}[_0x2397ca(1421)](e){const t={_0x2d1f91:199,_0x4f8fb0:907,_0x54188b:1788,_0x117044:3669},x=_0x2397ca;if(!this[x(1120)]){logInfo("对象不支持标绘",this);return}if(this._enabledDraw)return this;if(this._enabledDraw=!0,this.show=!1,e&&this.addTo(e),!this._map)throw new Error(x(t._0x2d1f91));this[x(907)]=this._getDrawEntityClass({minPointNum:this[x(3044)].minPointNum,maxPointNum:this.options.maxPointNum,style:this._getDrawEntityStyle(),private:!0},!0),this._editing_entity.parent=this,this[x(t._0x4f8fb0)].once(EventType.drawCreated,i=>{this[x(1740)]()}),this._editing_entity.on([EventType[x(2669)],EventType.drawMouseMove,EventType.drawRemovePoint],i=>{i.graphic=this,i.drawtype=this.type,this.fire(i.type,i,!0)}),this._editing_entity[x(1421)](this._map.graphicLayer),this[x(t._0x54188b)](EventType[x(t._0x117044)],{drawtype:this.type},!0)}[_0x2397ca(1740)](){const e={_0x1b9d45:907,_0x79d51e:2728,_0x568433:907,_0x55f1fc:968,_0x18322f:1259,_0x49913e:3863},t=_0x2397ca;var x,i,s;if(!this[t(2728)]||!this[t(e._0x1b9d45)])return this;if(this[t(e._0x79d51e)]=!1,!this[t(e._0x568433)].stopDraw()){this.remove(!0);return}this._updateDrawEntityToThis(),this.fire(EventType[t(913)],{drawtype:this[t(e._0x55f1fc)],positions:this.positions},!0),(x=this.options)!==null&&x!==void 0&&x.success&&this.options.success(this),(i=this[t(3044)])!==null&&i!==void 0&&(s=i._promise)!==null&&s!==void 0&&s.resolve&&this.options[t(e._0x18322f)][t(e._0x49913e)](this)}[_0x2397ca(1474)](){const e={_0x3877d9:2728,_0x56a328:1474},t=_0x2397ca;return!(!this[t(e._0x3877d9)]||!this._editing_entity||!this[t(907)][t(e._0x56a328)]())}_getDrawEntityStyle(){const e=_0x2397ca,t=this._style2JsonBase(this.style,!1);return delete t[e(480)],t}_getDrawPointEntityClass(e,t){const x=_0x2397ca;return e.drawShow=!t,e.style=getEditPointStyle(),create$4(x(2800),e)}_updateDrawEntityToThis(){const e={_0x38edfc:357,_0x47f2cd:1091},t=_0x2397ca,x=this[t(907)].toJSON();this._editing_entity.remove(!0),delete this._editing_entity,x.style&&this[t(968)].startsWith(x.type)?(this.options.style=merge(this.options.style,x.style),this._updateStyleBaseHook(this[t(3044)].style)):this._updateStyleByEdit&&this._updateStyleByEdit(x[t(e._0x38edfc)],x),x.position?this.position=x.position:x.positions&&(this.positions=x[t(e._0x47f2cd)]),this.show=!0}startEditing(){const e={_0x4c50dd:907,_0x3c5c93:3174,_0x4c0812:3482},t={_0x156cf3:578,_0x5025c4:578,_0x5ca841:907,_0x519f8e:907},x={_0xfad367:3044,_0x1dde88:576},i={_0x1bdc91:3220},s=_0x2397ca;if(this._enabledEdit)return this;if(this._enabledEdit=!0,!this._map)throw new Error(s(2426));this._editing_entity=this._getDrawEntityClass({hasMoveEdit:this.options.hasMoveEdit,hasHeightEdit:this[s(3044)].hasHeightEdit,style:this[s(3939)](),position:this.position,positions:this.positions,private:!0},!1),this._startEditingHook&&this._startEditingHook(this[s(907)]),this._editing_entity.parent=this;const o=this.type.startsWith(this[s(e._0x4c50dd)].type);this[s(e._0x4c50dd)].once(EventType.editStop,r=>{this[s(i._0x1bdc91)]()}),this._editing_entity.on(EventType.editStyle,r=>{const c=s,_=this._editing_entity[c(1180)]();_.style&&o?this[c(x._0xfad367)].style=merge(this[c(3044)].style,_.style):this._updateStyleByEdit&&this[c(x._0x1dde88)](_.style,_)}),this._editing_entity.on([EventType.editAddPoint,EventType[s(e._0x3c5c93)],EventType.editRemovePoint],r=>{const c=s;this._editing_entity[c(t._0x156cf3)]?o?(this[c(1556)]=LngLatPoint[c(1364)](this._editing_entity[c(t._0x5025c4)]),this._position=this[c(t._0x5ca841)]._position_draw):this.position=this._editing_entity._position_draw:this[c(t._0x519f8e)]._positions_draw&&(o?(this._points=LngLatArray.toPoints(this._editing_entity._positions_draw),this._positions=this._editing_entity._positions_draw):this.positions=this._editing_entity._positions_draw)}),this[s(558)][s(3248)].addGraphic(this[s(e._0x4c50dd)]),this._editing_entity.startEditing(),o?this[s(e._0x4c0812)]=!1:this._editing_entity.type!=="point"&&(this[s(e._0x4c50dd)].entityGraphic.show=!1)}stopEditing(){const e={_0x527f2b:371},t=_0x2397ca;if(!this._enabledEdit||!this._editing_entity)return this;this[t(e._0x527f2b)]=!1,this[t(2289)]()}}class BasePointPrimitive extends BasePrimitive{constructor(e={}){const t={_0x38c6ca:1091,_0x2352cc:1091,_0x407fcb:1364,_0x461e6e:1620,_0x285e81:295,_0x938a42:295,_0x6065c3:3695,_0x45446f:295},x=_0x2397ca;if(super(e),this[x(3331)]=this.options[x(1e3)]??!0,e[x(t._0x38c6ca)]&&(this.positions=e[x(t._0x2352cc)]),e.position)this.position=e.position;else if(e.modelMatrix&&(this._position=Cesium__namespace.Matrix4.getTranslation(e.modelMatrix,new Cesium__namespace.Cartesian3),this._point=LngLatPoint[x(t._0x407fcb)](this._position),!Cesium__namespace.defined(this.style.heading))){const i=Cesium__namespace.Matrix4.getMatrix3(e.modelMatrix,new Cesium__namespace.Matrix3),s=Cesium__namespace.Matrix4.getMatrix3(Cesium__namespace[x(t._0x461e6e)].eastNorthUpToFixedFrame(this._position),new Cesium__namespace.Matrix3),o=Cesium__namespace.Matrix3.getColumn(s,0,new Cesium__namespace[x(t._0x285e81)]),r=Cesium__namespace[x(3596)].getColumn(s,1,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix3.getColumn(s,2,new Cesium__namespace[x(t._0x938a42)]);let _=Cesium__namespace.Matrix3[x(t._0x6065c3)](i,0,new Cesium__namespace[x(295)]);_=Cesium__namespace.Cartesian3.cross(_,c,_),_=Cesium__namespace[x(t._0x938a42)].cross(c,_,_),_=Cesium__namespace.Cartesian3.normalize(_,_);let l=Cesium__namespace[x(t._0x285e81)].angleBetween(o,_);Cesium__namespace[x(t._0x45446f)].angleBetween(r,_)>Math.PI*.5&&(l=2*Math.PI-l),this.style.heading=Cesium__namespace[x(3876)].toDegrees(l)}}get position(){const e={_0x18c25c:558},t=_0x2397ca;if(this[t(1173)])return this._position;if(this.property){var x,i;return this.property.getValue((x=this[t(e._0x18c25c)])===null||x===void 0||(i=x.clock)===null||i===void 0?void 0:i.currentTime)}}set position(e){const t={_0x48b32d:440,_0x2a0325:1788},x=_0x2397ca;var i;if(this._forPositionProperty(e))return this._position;if(this[x(1556)]=LngLatPoint.parse(e),this[x(1556)]){let s=this.style[x(t._0x48b32d)];Cesium__namespace.defined(s)&&(isString(s)&&(s=Number(template(s,this.attr,!0)),isNaN(s)&&(s=0)),this._point.alt=s);const o=this.getAddHeight();o!==0&&(this._point.alt=this[x(1556)].alt+o)}this[x(1173)]=(i=this[x(1556)])===null||i===void 0?void 0:i[x(799)](),this.options.modelMatrix&&delete this.options.modelMatrix,this.czmObject&&this._updatePositionsHook(),this._primitive_label&&this._updateLabelPosition(),this._editing_entity&&(this._editing_entity.position=this._position),this[x(t._0x2a0325)](EventType.updatePosition,{position:this._position})}get positionsShow(){return this[_0x2397ca({_0x5babdf:1091}._0x5babdf)]}get positionShow(){return this[_0x2397ca({_0x7e65fd:1173}._0x7e65fd)]}get[_0x2397ca(2800)](){return this._point}get coordinate(){return this.getCoordinate()}get center(){return this.position}get centerPoint(){return this.point}get height(){var e;return(e=this.point)===null||e===void 0?void 0:e.alt}set height(e){const t=_0x2397ca;this[t(2800)].alt=e,this.position=this.point}get positions(){const e={_0x5538b3:760},t=_0x2397ca;return this[t(e._0x5538b3)]?[this[t(760)]]:null}set positions(e){const t={_0x33133b:2027},x=_0x2397ca;e&&e[x(t._0x33133b)]>0&&(this[x(760)]=e[0])}get points(){return[this[_0x2397ca(2800)]]}get[_0x2397ca(1245)](){return[this[_0x2397ca(1139)]]}get orientation(){const e={_0x2b7b96:885,_0x5c0255:3044},t=_0x2397ca;return this[t(e._0x2b7b96)]||this[t(e._0x5c0255)].orientation}set[_0x2397ca(3190)](e){this._orientation=e}get modelMatrix(){const e={_0xcafc4d:3455,_0x3f469d:760},t=_0x2397ca;return this.options.modelMatrix?this.options[t(e._0xcafc4d)]:this._getModelMatrix(this[t(e._0x3f469d)],this._orientation)}get[_0x2397ca(1722)](){const e={_0x43946e:778},t=_0x2397ca;return Cesium__namespace.defined(this._heading_reality)?Cesium__namespace.Math[t(e._0x43946e)](this._heading_reality):this.style.heading??0}set[_0x2397ca(1722)](e){const t=_0x2397ca;this.style[t(1722)]=e,this.updateModelMatrix()}get[_0x2397ca(227)](){const e={_0x3655e7:639},t=_0x2397ca;return Cesium__namespace[t(e._0x3655e7)](this._pitch_reality)?Cesium__namespace.Math[t(778)](this._pitch_reality):this.style.pitch??0}set pitch(e){const t=_0x2397ca;this.style.pitch=e,this[t(3009)]()}get roll(){const e={_0x1a8067:3508,_0x15cc94:778},t=_0x2397ca;return Cesium__namespace.defined(this[t(e._0x1a8067)])?Cesium__namespace[t(3876)][t(e._0x15cc94)](this._roll_reality):this.style.roll??0}set roll(e){this.style.roll=e,this.updateModelMatrix()}get objectsToExclude(){const e={_0x3f44c0:3044},t=_0x2397ca;if(this.options.objectsToExclude)return this[t(e._0x3f44c0)].objectsToExclude;if(this[t(2014)])return this[t(404)]}set[_0x2397ca(3656)](e){const t=_0x2397ca;this[t(404)]=e}get[_0x2397ca(610)](){const e={_0x4d15a3:565},t=_0x2397ca;return!this._trackedEntity&&(this._trackedEntity=this[t(3831)].dataSource.entities[t(e._0x4d15a3)]({position:this[t(3777)]||new Cesium__namespace.CallbackProperty(x=>this[t(1173)],!1),point:{pixelSize:2,color:Cesium__namespace.Color.WHITE.withAlpha(.01)}})),this._trackedEntity}get[_0x2397ca(878)](){return this._debugAxis}set debugAxis(e){const t={_0x2bf226:1899,_0x57104f:2145,_0x175a5a:3750},x=_0x2397ca;if(this._debugAxis=e,!this.debugAxisPrimitive){const i=Math.max(Cesium__namespace[x(t._0x2bf226)][x(t._0x57104f)](this.positionShow).height*.06,100);this.debugAxisPrimitive=this._layer.primitiveCollection.add(new Cesium__namespace.DebugModelMatrixPrimitive({modelMatrix:this.modelMatrix,length:i,width:5})),this.debugAxisPrimitive._tooltipConfig={content:`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,options:this.options.tooltipOptions},this.property&&(this.debugAxisPrimitive._timeTik=setInterval(()=>{this.debugAxisPrimitive.modelMatrix=this.modelMatrix},300)),this.bindPickId(this[x(t._0x175a5a)])}this.debugAxisPrimitive.show=e}get debugAxisLength(){return this.debugAxisPrimitive?this.debugAxisPrimitive.length:0}set debugAxisLength(e){const t=_0x2397ca;!this.debugAxisPrimitive&&(this.debugAxis=!0),this[t(3750)].length=e}[_0x2397ca(2670)](e){!this.show||!this.position||(this._forPositionProperty(this.options.position),super._addedHook(e))}_removedHook(e){const t={_0x7bac3a:558},x=_0x2397ca;this._trackedEntity&&(this._map.trackedEntity===this._trackedEntity&&(this[x(t._0x7bac3a)][x(610)]=void 0),this._layer.dataSource.entities.remove(this._trackedEntity),delete this._trackedEntity),super[x(380)](e)}updateModelMatrix(){this[_0x2397ca(2417)]&&(this._primitive.modelMatrix=this.modelMatrix)}_getModelMatrix(e,t){const x={_0x186415:1722,_0x509d11:357,_0x4aa04d:295},i=_0x2397ca;if(!e)return Cesium__namespace.Matrix4.IDENTITY;let s=Cesium__namespace.Math.toRadians(this.style[i(x._0x186415)]||0),o=Cesium__namespace.Math.toRadians(this.style[i(227)]||0),r=Cesium__namespace.Math[i(2500)](this[i(x._0x509d11)].roll||0);if(t){if(t.getValue){var c,_;t=t.getValue((c=this[i(558)])===null||c===void 0||(_=c.clock)===null||_===void 0?void 0:_.currentTime)}if(t){const h=getHeadingPitchRollByOrientation(e,t);this.style.mergeOrientation?(s+=h.heading,r+=h[i(2969)],o+=h.pitch):(!Cesium__namespace.defined(this[i(357)].heading)&&(s=h.heading),!Cesium__namespace.defined(this.style.roll)&&(r=h.roll),!Cesium__namespace.defined(this.style.pitch)&&(o=h.pitch))}}this._heading_reality=s,this._pitch_reality=o,this._roll_reality=r;const l=Cesium__namespace.Transforms.headingPitchRollToFixedFrame(e,new Cesium__namespace[i(845)](s,o,r),Cesium__namespace.Ellipsoid.WGS84,this.options.fixedFrameTransform);return Cesium__namespace.defined(this.scaleX)&&Cesium__namespace.defined(this[i(301)])&&Cesium__namespace.defined(this.scaleZ)?Cesium__namespace.Matrix4.multiplyByScale(l,new Cesium__namespace[i(295)](this[i(3748)],this.scaleY,this[i(2278)]),l):Cesium__namespace.defined(this[i(x._0x509d11)][i(1760)])&&Cesium__namespace.Matrix4.multiplyByScale(l,new Cesium__namespace[i(x._0x4aa04d)](this[i(357)].scale,this.style.scale,this.style.scale),l),l}_getGeoJsonGeometry(e){return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}[_0x2397ca(232)](e){const t=_0x2397ca;return e instanceof Cesium__namespace.CallbackProperty||e instanceof Cesium__namespace.SampledPositionProperty?(this.options.frameRate=this.options.frameRate??20,this._orientation=this.options.orientation||new Cesium__namespace[t(2509)](e),this.property=e,this[t(2171)](),!0):!1}update(e){const t={_0x41f321:2893},x=_0x2397ca;this.show&&this.property&&(this._position=this.property[x(t._0x41f321)](e.time),this.czmObject&&this._updatePositionsHook(),this._primitive_label&&this._updateLabelPosition())}_getPopupPosition(){const e=_0x2397ca;return this.property||this.position||this[e(2006)]}addDynamicPosition(e,t){const x={_0x1df9a6:3703,_0x14eda0:3718,_0x1114c0:1522,_0x57aefa:1579,_0x193d10:1364,_0x554e4b:652,_0x3c8764:2027},i=_0x2397ca;var s,o,r,c;!this._sampledPositionProperty&&this[i(1436)](),this._removeDynamicPosition();const _=((s=this._map)===null||s===void 0||(o=s[i(x._0x1df9a6)])===null||o===void 0?void 0:o[i(x._0x14eda0)])||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace.JulianDate.addSeconds(_,t,new Cesium__namespace.JulianDate):isString(t)?t[i(884)]("Z")===-1?t=Cesium__namespace[i(x._0x1114c0)][i(x._0x57aefa)](new Date(t)):t=Cesium__namespace.JulianDate[i(2528)](t):t instanceof Date&&(t=Cesium__namespace.JulianDate.fromDate(t)):t=_,e=LngLatPoint[i(x._0x193d10)](e);const l=(r=this[i(x._0x554e4b)])===null||r===void 0||(c=r._property)===null||c===void 0?void 0:c._times;if(this.options.autoMiddleDynamicPosition&&(l==null?void 0:l[i(x._0x3c8764)])>0&&this[i(1173)]){const d=l[l[i(2027)]-1];if(Cesium__namespace[i(1522)].secondsDifference(_,d)>.3){let u=this._position;this[i(835)]&&(u=getOnLinePointByLen(this._lastDynamicPosition,this._position,.01,!0)),u=setPositionsHeight(u,e.alt||0),this._sampledPositionProperty.addSample(_,u)}}const h=e[i(799)]();return this._sampledPositionProperty.addSample(t,h),this._lastDynamicPosition=h,this}[_0x2397ca(1436)](){const e={_0x50e62d:3044,_0x5a1244:413,_0x2cc9b4:1577,_0x5b24ca:3190},t=_0x2397ca;this[t(3866)]=-1,this._frameRateHeight=this[t(e._0x50e62d)][t(e._0x5a1244)]??30,this[t(3355)]=this.options[t(3928)]??50;let x;this._sampledPositionProperty?x=this._sampledPositionProperty:(x=new Cesium__namespace[t(3387)](this.options.referenceFrame,this.options[t(4058)]),x[t(e._0x2cc9b4)]=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType.NONE,x.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace[t(3884)].NONE,this._sampledPositionProperty=x),this[t(3777)]=new Cesium__namespace[t(428)](i=>{const s=t;if(!this._map)return;let o=x.getValue(i);if(o&&this[s(3044)].clampToTileset){if(this._clampToTilesetFrame++,!this._clampToTilesetHeight||this[s(3866)]%this._frameRateHeight===0){const r=getHeight(this._map.scene,o,{objectsToExclude:this._layer[s(3656)],has3dtiles:!0});r&&(this._clampToTilesetHeight=r)}if(this._clampToTilesetHeight){const r=Cesium__namespace.Cartographic.fromCartesian(o);o=Cesium__namespace.Cartesian3.fromRadians(r.longitude,r[s(489)],this._clampToTilesetHeight+this.getAddHeight())}}return o},!1),this._orientation=this.options[t(e._0x5b24ca)]||new Cesium__namespace[t(2509)](x),this[t(2171)]()}_removeDynamicPosition(){const e={_0xd35d4d:2062},t=_0x2397ca;var x,i;if(this._maxCacheCount<1)return;const s=(x=this._sampledPositionProperty)===null||x===void 0||(i=x[t(e._0xd35d4d)])===null||i===void 0?void 0:i[t(764)];if(!s||s.length===0)return;const o=s[t(2027)]-this._maxCacheCount-1;o>0&&this._sampledPositionProperty.removeSamples(new Cesium__namespace.TimeInterval({start:s[0],stop:s[o]}))}autoSurfaceHeight(e={}){const t=_0x2397ca;return getSurfaceHeight(this._map[t(3399)],this[t(760)],e).then(x=>{const i=t;x[i(760)]&&(this.position=x[i(760)])})}clampToGround(e){return this.autoSurfaceHeight(e)}getCoordinate(e){return this.point?this.point.toArray(e):[]}}class PointPrimitive extends BasePointPrimitive{get primitiveCollection(){const e={_0x4a4b45:3831,_0x384369:194},t=_0x2397ca;var x;return(x=this[t(e._0x4a4b45)])===null||x===void 0?void 0:x[t(e._0x384369)]}_showHook(e){this._primitive?this._primitive.show=e:e&&super._showHook(e)}_addedHook(e){const t={_0x5514b8:3482,_0x419fff:3044,_0x229c29:760,_0x48e63e:3595,_0x9554d6:2417,_0x4b0a3f:357,_0x2737ca:743,_0x5a69f9:856},x=_0x2397ca;if(!this[x(t._0x5514b8)])return;this._forPositionProperty(this[x(t._0x419fff)][x(t._0x229c29)]),this._calculateAsynSurfacePosition(),this._primitive&&this[x(t._0x48e63e)].remove(this._primitive);const i=PointStyleConver.toCesiumVal(this.style,{show:this.show,position:this.position});this[x(t._0x9554d6)]=this.primitiveCollection.add(i),this[x(t._0x4b0a3f)][x(t._0x2737ca)]&&this[x(t._0x5a69f9)]()}_updateStyleHook(e,t){PointStyleConver[_0x2397ca(2868)](e,this.primitive)}_style2Json(e,t){return PointStyleConver.toJSON(e,t)}_updatePositionsHook(){const e={_0x3e6326:2417},t=_0x2397ca;this[t(e._0x3e6326)].position=this.position}_calculateAsynSurfacePosition(){const e={_0x5a034b:3161},t={_0x86bdac:2416},x=_0x2397ca;this._hasAsynSurfacePosition=!1;const i=this.position;i instanceof Cesium__namespace.Cartesian3&&(this.style.clampToGround||this.style.heightReference===Cesium__namespace.HeightReference.CLAMP_TO_GROUND||this.style.heightReference===Cesium__namespace[x(e._0x5a034b)].RELATIVE_TO_GROUND)&&getSurfaceHeight(this._map.scene,i,this.style).then(s=>{const o=x;this[o(1002)]||(this.style[o(3102)]===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND&&(s.point[o(1155)]+=s.height_original),this.position=s.point,this[o(t._0x86bdac)]=!0)})}_getDrawEntityClass(e,t){return create$4(_0x2397ca(2800),e)}}register$4("pointP",PointPrimitive,!0);class BasePolyPrimitive extends BasePrimitive{constructor(e={}){const t=_0x2397ca;super(e),this._hasEdit=this.options.hasEdit??!0,e.positions&&(this.style.buffer>0?this.positions=bufferPoints(e.positions,this[t(357)][t(3593)],this.style.bufferSteps):this.positions=e[t(1091)])}get center(){const e=_0x2397ca;return this.style.closure?this.centerOfMass:this[e(2160)]}get centerOfMass(){return centerOfMass(this.positions)}get[_0x2397ca(2160)](){const e={_0x2c4d3a:2027},t=_0x2397ca,x=this.positions;return!x||x[t(2027)]===0?null:x[t(2027)]===1?x[0]:x.length<10?sliceByMaxDistance(x,this.distance/2,{point:!0}):x[Math.floor(x[t(e._0x2c4d3a)]/2)]}get[_0x2397ca(230)](){return getDistance(this.positions)}get[_0x2397ca(2290)](){return getSurfaceArea(this.positions)}get positions(){return this._positions}set positions(e){const t={_0x48ceae:907},x={_0xb31136:1364,_0x14a774:2434},i=_0x2397ca;if(!e)return;const s=[],o=[];e.forEach((r,c)=>{const _=_0x3361,l=LngLatPoint[_(x._0xb31136)](r);if(!l||!l[_(2025)]())return;let h=this[_(357)].setHeight;Cesium__namespace.defined(h)&&(isString(h)?(h=Number(template(h,this.attr,!0)),isNaN(h)&&(h=0)):Array.isArray(h)&&(h=h[c]||0),l.alt=h);const d=this.getAddHeight(c);d!==0&&(l.alt=l.alt+d),s[_(x._0x14a774)](l),o.push(l.toCartesian())}),this._points=s,this[i(2526)]=o,this._primitive&&this[i(325)](),this[i(2737)]&&this._updateLabelPosition(),this._editing_entity&&(this[i(t._0x48ceae)].positions=o),this.fire(EventType.updatePosition,{positions:this._positions})}get[_0x2397ca(982)](){return this[_0x2397ca(1091)]}get points(){const e={_0x45571f:3772,_0x3a8e7d:1428},t=_0x2397ca;return!this._points&&(this._points=LngLatArray[t(e._0x45571f)](this._positions)),this[t(e._0x3a8e7d)]}get coordinates(){return this.getCoordinates()}get[_0x2397ca(1358)](){const e={_0x275528:1091},t=_0x2397ca;return Cesium__namespace.Rectangle.fromCartesianArray(this[t(e._0x275528)])}[_0x2397ca(4036)](e){return{type:_0x2397ca(2749),coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}[_0x2397ca(3711)](e){const t={_0x44b73e:1255},x=_0x2397ca,i=[];return this.points[x(t._0x44b73e)](s=>{i.push(s.toArray(e))}),i}[_0x2397ca(2556)](e){const t={_0x1011db:1924},x=_0x2397ca,i=LngLatPoint.parse(e);return Cesium__namespace.Rectangle[x(741)](Cesium__namespace.Rectangle[x(t._0x1011db)](this[x(1091)]),i.toCartographic())?isInPoly(i,this.coordinates):!1}autoSurfaceHeight(e={}){return computeSurfacePoints({...e,map:this._map,positions:this.positions}).then(t=>{const x=_0x3361;return!t.noHeight&&(this[x(1091)]=t.positions),t})}clampToGround(e){return this[_0x2397ca(3513)](e)}}class PolylinePrimitive extends BasePolyPrimitive{[_0x2397ca(2064)](e){return PolylineStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const x={_0x19541e:509,_0x2c9d83:1091,_0x114b18:1034},i=_0x2397ca;var s;e.positions=this[i(1091)]||[],e[i(x._0x19541e)]&&((s=e.positions)===null||s===void 0?void 0:s.length)>0&&(e[i(1091)]=e.positions.concat(e[i(x._0x2c9d83)][0]));const o=e[i(x._0x114b18)]?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new o(e),attributes:this[i(3044)].attributes})}_createAppearance(e,t){const x={_0x5dc46d:3612},i=_0x2397ca;if(e._isColorMaterial){if(t.geometryInstances.geometry[i(x._0x5dc46d)]=Cesium__namespace.PolylineColorAppearance[i(3333)],!e.colors){const s=this._getColorByColorMaterial(e);t.geometryInstances[i(2870)]=t.geometryInstances.attributes||{},t.geometryInstances.attributes.color=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(s),e.depthFail&&(t.geometryInstances.attributes.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(e.depthFailColor||s))}return new Cesium__namespace.PolylineColorAppearance({...e})}else return new Cesium__namespace.PolylineMaterialAppearance({...e})}[_0x2397ca(353)](e,t){const x=_0x2397ca;Cesium__namespace[x(639)](t.color)&&Object.keys(t)===1?super[x(353)](e,t):this.redraw(e)}_getDrawEntityClass(e,t){return create$4("polyline",e)}}register$4("polylineP",PolylinePrimitive);class BaseLayer extends BaseClass{constructor(e={}){const t={_0x1a742e:3788,_0x226ef9:996,_0x3e43dc:639,_0x2a2a77:2708,_0x2d5ab4:1482,_0x36f5cb:2137,_0x2628fd:1103},x=_0x2397ca;super(e),this.options=e,e.id=e.id??createGuid(),e[x(t._0x1a742e)]=e[x(3788)]??-1,this._show=e.show??!0,this._private=e.private,this[x(t._0x226ef9)]=e.opacity??1,Cesium__namespace[x(t._0x3e43dc)](e.alpha)&&(this._opacity=e[x(t._0x2a2a77)]),this.options.proxy&&(isString(this.options[x(t._0x2d5ab4)])?this._proxy=new Cesium__namespace.DefaultProxy(this.options.proxy):this[x(t._0x36f5cb)]=this.options.proxy),replaceOnlineUrlDomain(this.options),this._bindControl(),this[x(2276)]=Cesium__namespace.defer(),this[x(t._0x2628fd)]=State.INITIALIZED}get id(){return this.options.id}set id(e){const t={_0x219aa8:3044},x=_0x2397ca;this[x(t._0x219aa8)].id=e}get[_0x2397ca(1849)](){return this.options.id}get name(){return this.options.name}set name(e){const t={_0x10dbff:3044},x=_0x2397ca;this[x(t._0x10dbff)].name=e}get pid(){const e={_0x2caa8e:3044,_0x16e027:3788},t=_0x2397ca;return this[t(e._0x2caa8e)][t(e._0x16e027)]}set pid(e){const t=_0x2397ca;this[t(3044)].pid=e}get type(){return this[_0x2397ca(3157)]}get state(){return this._state}get isAdded(){return this[_0x2397ca({_0x350b63:1103}._0x350b63)]===State.ADDED}get isDestroy(){const e=_0x2397ca;return this[e(1103)]===State[e(2910)]}get[_0x2397ca(1731)](){return!!this._private}get readyPromise(){return this[_0x2397ca(2276)].promise}get layer(){return null}get show(){return this._show}set[_0x2397ca(3482)](e){const t={_0x42021c:767,_0x3bcc1c:1002,_0x15bfe5:2407,_0x4d9df3:3401},x=_0x2397ca;this[x(t._0x42021c)]===e||this[x(t._0x3bcc1c)]||(this[x(3044)].show=e,this._show=e,this.layer&&(Array.isArray(this.layer)?this[x(2407)].forEach(function(i){i.show=e}):this[x(t._0x15bfe5)].show=e),this[x(t._0x4d9df3)]&&(this._showHook&&this[x(446)](e),e?this.fire(EventType.show):this.fire(EventType.hide)))}get hasOpacity(){const e=_0x2397ca;return this.options.hasOpacity===!1?!1:!!this[e(2732)]}get opacity(){return this._opacity}set opacity(e){this._opacity=e,this.setOpacity&&this.setOpacity(e)}addTo(e){return e&&e.addLayer&&e.addLayer(this),this}remove(e){const t={_0x1f43bf:2911},x=_0x2397ca;this._map&&this._map[x(t._0x1f43bf)](this,e)}_onAdd(e){const t={_0x504535:1103,_0x4b62c0:1812,_0x2d68a9:2645,_0x35d0a:1375,_0xe7045e:3026},x=_0x2397ca;var i;this.isAdded||this._state===State.ADD||(this[x(t._0x504535)]=State.ADD,this[x(558)]=e,this.options.eventParent?this[x(1812)](this.options.eventParent):((i=this.options)===null||i===void 0?void 0:i.eventParent)===!1||this[x(t._0x4b62c0)](e),this[x(t._0x2d68a9)]&&!this[x(1375)]&&(this._mountedHook(),this[x(t._0x35d0a)]=!0),this._addedHook&&this._addedHook(),this[x(3044)].flyTo&&this[x(t._0xe7045e)]({duration:0}),this._state=State[x(1273)],this.fire(EventType.add),this.fire(EventType.addLayer,{},!0))}_onRemove(){const e={_0x3fb145:1103,_0x28df4b:1273,_0x25e27c:380,_0x4f7af8:1225,_0x792b28:1788},t=_0x2397ca;var x,i;this[t(e._0x3fb145)]===State[t(e._0x28df4b)]&&this[t(558)]&&(this[t(e._0x25e27c)]&&this._removedHook(),this._state=State[t(e._0x4f7af8)],this.fire(EventType.remove),this[t(e._0x792b28)](EventType.removeLayer,{},!0),(x=this.options)!==null&&x!==void 0&&x[t(1847)]?this.removeEventParent(this[t(3044)][t(1847)]):((i=this.options)===null||i===void 0?void 0:i.eventParent)===!1||this.removeEventParent(this[t(558)]),this._map=null)}[_0x2397ca(2645)](){}[_0x2397ca(2670)](){}_removedHook(){}fire(e,t={},x){return!t[_0x2397ca({_0x4703a3:2407}._0x4703a3)]&&(t.layer=this),super.fire(e,t,x)}flyToByAnimationEnd(e){const t={_0x41f5fa:1207,_0x560f25:558},x=_0x2397ca;return!this._map||!this.show?this:(this._map[x(t._0x41f5fa)]()?this[x(t._0x560f25)].openFlyAnimationEndFun=()=>{this.flyTo(e)}:this.flyTo(e),this)}[_0x2397ca(2729)](e){const t=this._flyTo(e);return t||this.readyPromise.then(x=>this._flyTo(e))}_flyTo(e={}){const t={_0x285257:3044,_0x2bc1ef:558,_0x209967:3044,_0x8ad6e6:2907,_0x108abd:1595,_0x4dec12:1587},x=_0x2397ca;if(!this._map)return Promise.resolve(!1);if(this.options[x(628)]&&(e={...this[x(t._0x285257)].flyToOptions,...e}),this[x(558)].cancelFlyTo(),this.options.center)return this[x(t._0x2bc1ef)].setCameraView(this[x(t._0x285257)].center,e);const i=this[x(t._0x209967)][x(t._0x8ad6e6)]||this[x(1061)]||this[x(t._0x108abd)]&&this.getRectangle();if(i)return this._map[x(t._0x4dec12)](i,e)}[_0x2397ca(2403)](e){const t={_0x4fea90:390,_0x254f5e:3535,_0x3c3a23:3044},x=_0x2397ca;return!e||Object[x(t._0x4fea90)](e).length===0?this:(this.options=merge(this[x(3044)],e),Cesium__namespace.defined(e.opacity)&&(this.opacity=e.opacity),Cesium__namespace[x(639)](e.name)&&(this.name=e.name),Cesium__namespace.defined(e.show)&&(this.show=e.show),this._bindControl(),this[x(t._0x254f5e)]&&this._setOptionsHook(this[x(t._0x3c3a23)],e),this)}toJSON(){const e={_0x21b1d0:968},t=_0x2397ca,x=clone(this.options,["parent","eventParent"]);return x.id=this.id,x.type=this[t(e._0x21b1d0)],x.show=this.show,this._toJsonEx(x),x}[_0x2397ca(3318)](e){}_bindControl(){const e={_0x41ec72:3044,_0xbd5096:3044,_0x4d6ebd:1001},t=_0x2397ca;if(Cesium__namespace.defined(this.options.contextmenuItems)&&(this.options.contextmenuItems?this._contextmenuConfig={content:this[t(e._0x41ec72)].contextmenuItems,options:this.options[t(3754)],layer:this}:this._contextmenuConfig=null),Cesium__namespace.defined(this[t(3044)].popup))if(this.options.popup){const x=this[t(3044)].popupOptions||{};this._popupConfig={options:x,content:bindLayerPopup(x,this.options.popup,this.name),layer:this}}else this[t(4051)]=null;if(Cesium__namespace.defined(this[t(e._0xbd5096)][t(3660)]))if(this.options.tooltip){const x=this[t(e._0x41ec72)].tooltipOptions||{};this._tooltipConfig={options:x,content:bindLayerPopup(x,this.options[t(3660)],this.name),layer:this}}else this[t(e._0x4d6ebd)]=null}_filterPropagateEvent(e,t){return t[_0x2397ca({_0x5c9ac2:968}._0x5c9ac2)]!=="load"}destroy(e){const t={_0x3d2221:2689},x=_0x2397ca;this._state!==State.DESTROY&&(this._state!==State.REMOVED&&(this[x(2265)]&&this.clear(),this[x(t._0x3d2221)]()),super.destroy(e),this._state=State.DESTROY)}}function bindLayerPopup(n,e,t){const x={_0x16b5dd:1026},i={_0x25cb65:2112},s={_0x6760aa:897},o=_0x2397ca;return typeof e===o(x._0x16b5dd)?function(r){return e(r)}:function(r){const c=o;let _=_getAttrForPopup(r);if(_ instanceof Promise)return _[c(1286)](l=>{const h=c;_={layer_name:t,...l};let d=t;return n[h(s._0x6760aa)]?d=null:n.title?d=n.title:n.titleField&&(d=_[n.titleField]),getTemplateHtml({title:d,template:e,attr:_})});{_={layer_name:t,..._};let l=t;return n[c(897)]?l=null:n[c(i._0x25cb65)]?l=n[c(2112)]:n.titleField&&(l=_[n.titleField]),getTemplateHtml({title:l,template:e,attr:_})}}}function _getAttrForPopup(n){const e={_0x22de97:1578},t=_0x2397ca;var x;if(n!=null&&n[t(e._0x22de97)])return n.attr;if(n!=null&&(x=n.graphic)!==null&&x!==void 0&&x[t(1578)])return n.graphic[t(1578)];if(!n.czmObject)return{};let i=n.czmObject._attr||n.czmObject.properties||n.czmObject.attribute;return i&&i.type&&i.attr&&(i=i.attr),i??{}}class BaseGraphicLayer extends BaseLayer{constructor(e={}){const t={_0x4d1f08:914,_0x328b69:1248},x=_0x2397ca;e[x(t._0x4d1f08)]&&e.templateValues&&(e[x(t._0x4d1f08)]=template(e.url,e[x(t._0x328b69)])),super(e)}_showHook(e){!e&&this._closeAllControl()}_addedHook(){const e={_0x4dc0ae:3044},t=_0x2397ca;var x,i;this.options.highlight?this.bindHighlight(this[t(3044)].highlight):(x=this[t(e._0x4dc0ae)].symbol)!==null&&x!==void 0&&(i=x.styleOptions)!==null&&i!==void 0&&i.highlight&&this.bindHighlight(this.options.symbol.styleOptions.highlight)}_removedHook(){this._closeAllControl(),this.unbindHighlight()}[_0x2397ca(3535)](e,t){const x={_0x4914b4:1764},i=_0x2397ca;var s,o;this._highlightOptions&&this.unbindHighlight(),t.highlight?this[i(1764)](e.highlight):(s=t.symbol)!==null&&s!==void 0&&(o=s.styleOptions)!==null&&o!==void 0&&o.highlight&&this[i(x._0x4914b4)](e.symbol.styleOptions.highlight)}_closeAllControl(){const e={_0x520172:2643,_0x20cd90:1888},t=_0x2397ca;this[t(1673)](),this[t(e._0x520172)](),this[t(e._0x20cd90)](),this.closeContextMenu()}[_0x2397ca(1764)](e){const t={_0x1d3a63:2852,_0x1a3dbe:811},x=_0x2397ca;this.unbindHighlight(),this._highlightOptions=e,this._highlightOptions.type===EventType[x(2031)]?this.on(EventType.click,this[x(t._0x1d3a63)],this):(this.on(EventType[x(t._0x1a3dbe)],this._highlight_mouseEventHandler,this),this.on(EventType.mouseOut,this[x(3015)],this))}[_0x2397ca(164)](){const e={_0x5e3726:2031,_0x1409ba:2852,_0x1ff49f:3573,_0x51f9d7:811},t=_0x2397ca;this._highlightOptions&&(this[t(3573)](EventType[t(e._0x5e3726)],this[t(e._0x1409ba)],this),this[t(e._0x1ff49f)](EventType[t(e._0x51f9d7)],this[t(e._0x1409ba)],this),this.off(EventType.mouseOut,this._highlight_mouseOutHandler,this),this[t(558)][t(1212)](),this._highlightOptions=null)}[_0x2397ca(2852)](e){const t={_0x3f957d:2996},x=_0x2397ca;if(!this._map)return;const i=e==null?void 0:e[x(t._0x3f957d)];i?this._map.openHighlight(i,this._highlightOptions,e):this._map.closeHighlight()}_highlight_mouseOutHandler(e){this._map.closeHighlight()}[_0x2397ca(464)](e,t){const x=_0x2397ca;!this._map||!e||this._map[x(464)](e,this._highlightOptions,t)}[_0x2397ca(1212)](){this._map.closeHighlight()}[_0x2397ca(2070)](){const e=_0x2397ca;if(this._popupConfig)return!0;if(this._graphicList){const t=this._graphicList[e(1354)];for(let x=0,i=t[e(2027)];x<i;x++)if(t[x]._popupConfig)return!0}return!1}[_0x2397ca(3135)](e,t){const x={_0x57f904:4051,_0x5babd5:3044},i=_0x2397ca;return this[i(x._0x57f904)]={content:e,options:t||this[i(x._0x5babd5)].popupOptions,layer:this},this}unbindPopup(e){return this[_0x2397ca(1673)](),e?this._popupConfig=!1:this._popupConfig=null,this}openPopup(e){const t={_0x4ef64c:4051,_0x4be934:3848},x=_0x2397ca;return e.openPopup?e.openPopup():this[x(t._0x4ef64c)]&&e&&this._map&&(this._popupConfig.graphic=null,this._map[x(t._0x4be934)].open(e,this._popupConfig)),this}[_0x2397ca(1673)](){const e={_0xfddaca:558},t=_0x2397ca;return this._map&&this.hasPopup()&&this[t(e._0xfddaca)].popup.close(null,this),this}hasTooltip(){const e={_0x245bdb:1001,_0xc6633a:1354},t=_0x2397ca;if(this[t(e._0x245bdb)])return!0;if(this._graphicList){const x=this._graphicList[t(e._0xc6633a)];for(let i=0,s=x.length;i<s;i++)if(x[i]._tooltipConfig)return!0}return!1}bindTooltip(e,t){const x={_0xa53d90:1001,_0x5d2743:3044,_0x511114:2995},i=_0x2397ca;return this[i(x._0xa53d90)]={content:e,options:t||this[i(x._0x5d2743)][i(x._0x511114)],layer:this},this}unbindTooltip(e){const t={_0x1e654d:1001},x=_0x2397ca;return e?this._tooltipConfig=!1:this[x(t._0x1e654d)]=null,this.closeTooltip(),this}[_0x2397ca(804)](e){const t={_0x2f88c6:1001},x=_0x2397ca;return e.openTooltip?e.openTooltip():this._tooltipConfig&&e&&this._map&&(this[x(t._0x2f88c6)].graphic=null,this._map.tooltip[x(681)](e,this._tooltipConfig)),this}[_0x2397ca(2643)](){const e={_0x2f9da5:1611,_0x55a6fe:810},t=_0x2397ca;return this._map&&this[t(e._0x2f9da5)]()&&this._map.tooltip[t(e._0x55a6fe)](null,this),this}hasContextMenu(){const e={_0x22fdd8:3850},t=_0x2397ca;if(this._contextmenuConfig)return!0;if(this[t(e._0x22fdd8)]){const x=this._graphicList[t(1354)];for(let i=0,s=x.length;i<s;i++)if(x[i]._contextmenuConfig)return!0}return!1}getContextMenu(){return this._contextmenuConfig}[_0x2397ca(384)](e,t){return this._contextmenuConfig={content:e,options:t||this.options.contextmenuOptions,layer:this},this}unbindContextMenu(e){const t={_0x2fa1b7:1590},x=_0x2397ca;return e?this._contextmenuConfig=!1:this[x(t._0x2fa1b7)]=null,this[x(904)](),this}[_0x2397ca(2299)](e){const t={_0x370ac9:2299,_0x555db2:1590,_0x4b78ac:2996},x=_0x2397ca;return e.openContextMenu?e[x(t._0x370ac9)]():this[x(t._0x555db2)]&&e&&this._map&&(this._contextmenuConfig[x(t._0x4b78ac)]=null,this[x(558)].contextmenu[x(681)](e,this._contextmenuConfig)),this}closeContextMenu(){return this._map&&this.hasContextMenu()&&this._map.contextmenu.close(null,this),this}[_0x2397ca(1882)](e,t){return this[_0x2397ca({_0x281afa:558}._0x281afa)]&&this._map.openSmallTooltip(e,t),this}closeSmallTooltip(){return this._map&&this._map.closeSmallTooltip(),this}}class GraphicLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x2397ca;super(e),this._setOptionsHook(e,e),this[t(3850)]=new MarsArray}_setOptionsHook(e,t){const x={_0x37fa00:3011},i=_0x2397ca;super[i(3535)](e,t),this[i(1e3)]=e.hasEdit??!1,this.isAutoEditing=e[i(2771)]??!0,this[i(x._0x37fa00)]=e.isContinued??!1}get[_0x2397ca(2407)](){const e={_0x2a7c69:2434,_0x272a90:549},t=_0x2397ca,x=[];return this._dataSource&&x[t(2434)](this._dataSource),this._primitiveCollection&&x[t(e._0x2a7c69)](this._primitiveCollection),this[t(3616)]&&x[t(2434)](this[t(3616)]),this._billboardCollection&&x[t(2434)](this[t(e._0x272a90)]),this._cloudCollection&&x[t(e._0x2a7c69)](this._cloudCollection),this._pointCollection&&x.push(this._pointCollection),this._polylineCollection&&x[t(2434)](this._polylineCollection),x}get clustering(){var e,t;return(e=this.dataSource)===null||e===void 0||(t=e.clustering)===null||t===void 0?void 0:t.enabled}set[_0x2397ca(2048)](e){const t={_0x3255fe:809},x=_0x2397ca;var i;(i=this[x(t._0x3255fe)])!==null&&i!==void 0&&i.clustering&&(this[x(809)][x(2048)].enabled=e)}get dataSource(){const e={_0x3c06f9:2667,_0x5d1b0a:2132,_0x39aabe:3482,_0x2351d3:2132,_0x4b5d70:3044,_0x452d60:952},t=_0x2397ca;return!this._dataSource&&(this[t(2132)]=new Cesium__namespace[t(e._0x3c06f9)](this.id),this[t(e._0x5d1b0a)][t(e._0x39aabe)]=this.show,this._map&&(this[t(558)].dataSources.add(this[t(e._0x2351d3)]),Cesium__namespace.defined(this[t(e._0x4b5d70)][t(e._0x452d60)])&&(this.zIndex=this.options.zIndex))),this._dataSource}get primitiveCollection(){const e={_0x1532ad:952,_0x75a8:952,_0x137c01:1961},t=_0x2397ca;return!this._primitiveCollection&&(this[t(1961)]=new Cesium__namespace.PrimitiveCollection(this.options),this._primitiveCollection.show=this.show,this[t(558)]&&(this._map.scene.primitives.add(this._primitiveCollection),Cesium__namespace.defined(this[t(3044)][t(e._0x1532ad)])&&(this[t(e._0x75a8)]=this[t(3044)].zIndex))),this[t(e._0x137c01)]}get[_0x2397ca(613)](){const e=_0x2397ca;return!this._labelCollection&&(this._labelCollection=new Cesium__namespace.LabelCollection({...this.options,scene:this._map.scene}),this._labelCollection[e(3482)]=this.show,this[e(558)]&&this[e(558)].scene.primitives.add(this[e(3616)])),this._labelCollection}get pointCollection(){const e={_0x5af9e6:2302,_0x2ac887:3482,_0x134ed1:558,_0x367476:1187,_0x214bc6:888},t=_0x2397ca;return!this._pointCollection&&(this._pointCollection=new Cesium__namespace[t(e._0x5af9e6)](this[t(3044)]),this[t(888)].show=this[t(e._0x2ac887)],this[t(e._0x134ed1)]&&this._map.scene[t(e._0x367476)][t(565)](this._pointCollection)),this[t(e._0x214bc6)]}get billboardCollection(){const e={_0x458c2c:549,_0x2df4e4:3044},t=_0x2397ca;return!this[t(e._0x458c2c)]&&(this._billboardCollection=new Cesium__namespace.BillboardCollection({...this[t(e._0x2df4e4)],scene:this[t(558)].scene}),this._billboardCollection.show=this.show,this._map&&this._map.scene.primitives.add(this._billboardCollection)),this._billboardCollection}get cloudCollection(){const e={_0x56caa8:3044},t=_0x2397ca;return!this._cloudCollection&&(this[t(1799)]=new Cesium__namespace[t(1688)](this[t(e._0x56caa8)].cloud),this._cloudCollection.show=this[t(3482)],this._map&&this._map.scene.primitives.add(this._cloudCollection)),this._cloudCollection}get polylineCollection(){const e={_0xc93ce5:1424,_0x4add3a:3044,_0x599c41:558},t=_0x2397ca;return!this[t(e._0xc93ce5)]&&(this._polylineCollection=new Cesium__namespace.PolylineCollection(this[t(e._0x4add3a)]),this[t(1424)].show=this[t(3482)],this._map&&this[t(e._0x599c41)].scene.primitives.add(this._polylineCollection)),this._polylineCollection}get container(){const e={_0x492df0:785,_0x453e0e:1537,_0x400355:516},t=_0x2397ca;return!this[t(e._0x492df0)]&&(this[t(e._0x492df0)]=create$3(t(215),t(e._0x453e0e)),this.show?this._container.style.display=t(e._0x400355):this._container[t(357)].display="none",this._map&&this[t(558)].container.appendChild(this._container)),this._container}get pointerEvents(){return this[_0x2397ca(514)]}set pointerEvents(e){const t={_0x31398e:3259,_0x4aff47:807},x=_0x2397ca;this._pointerEvents=e,e?this[x(571)].style[x(t._0x31398e)]=x(t._0x4aff47):this.container.style[x(t._0x31398e)]="none"}get objectsToExclude(){const e={_0x4094bb:404},t={_0x185027:3735,_0x2a80d3:3655,_0x67ff2c:884},x=_0x2397ca;return this._objectsToExclude?this[x(e._0x4094bb)]:(!this._objectsToExclude_auto&&(this._objectsToExclude_auto=[],this._graphicList.forEach(i=>{const s=x,o=i.objectsToExclude;if(o&&o.length>0)o[s(1255)](r=>{const c=s;this._objectsToExclude_auto.indexOf(r)===-1&&this._objectsToExclude_auto[c(2434)](r)});else if(i[s(t._0x185027)]){const r=i.czmObject;this[s(t._0x2a80d3)][s(t._0x67ff2c)](r)===-1&&this[s(t._0x2a80d3)].push(r)}},this)),this[x(3655)])}set objectsToExclude(e){const t={_0x440f36:404},x=_0x2397ca;this[x(t._0x440f36)]=e}get hasZIndex(){return!0}get zIndex(){return this.options.zIndex}set[_0x2397ca(952)](e){const t={_0xb49c53:2047};this.options.zIndex=e,e!=null&&setTimeout(()=>{this[_0x3361(t._0xb49c53)](e)},100)}_setZIndex(e){const t={_0x3ab24d:1187,_0xd4e4f5:1745,_0x5dc235:2001,_0x1784a4:558},x=_0x2397ca;if(this.isAdded){if(this._primitiveCollection){this[x(1961)].zIndex=e,this._map.scene.primitives.raiseToTop(this._primitiveCollection);const i=this._map.scene[x(t._0x3ab24d)];for(let s=i.length-1;s>=0;s--){const o=i.get(s);o!==this._primitiveCollection&&Cesium__namespace.defined(o[x(952)])&&e<o.zIndex&&this._map[x(3399)].primitives.lower(this._primitiveCollection)}}if(this._dataSource){this[x(2132)].zIndex=e,this._map.dataSources[x(t._0xd4e4f5)](this._dataSource);const i=this._map.dataSources;for(let s=i.length-1;s>=0;s--){const o=i[x(t._0x5dc235)](s);o!==this._dataSource&&Cesium__namespace.defined(o.zIndex)&&e<o.zIndex&&this[x(t._0x1784a4)][x(2193)].lower(this._dataSource)}}}}toTop(){const e={_0x54e5fd:2132},t=_0x2397ca;if(this[t(558)]){if(this._primitiveCollection)return this._map.scene.primitives.raiseToTop(this._primitiveCollection);if(this[t(e._0x54e5fd)])return this._map.dataSources.raiseToTop(this._dataSource)}}toBottom(){const e={_0x2b385b:3399},t=_0x2397ca;if(this._map){if(this._primitiveCollection)return this._map[t(e._0x2b385b)].primitives[t(1769)](this._primitiveCollection);if(this._dataSource)return this[t(558)].dataSources.lowerToBottom(this._dataSource)}}get length(){return this[_0x2397ca({_0x21945d:3850}._0x21945d)].length}get[_0x2397ca(2300)](){return this.getGraphics()}get hasEdit(){return this[_0x2397ca(3331)]}set hasEdit(e){e?this.activateEdit():this[_0x2397ca(2408)]()}get isDrawing(){return this[_0x2397ca(3426)]!=null}get isEditing(){return this._graphic_editing!=null}get[_0x2397ca(1932)](){const e={_0x3a5aa7:1932},t=_0x2397ca;return this[t(3044)][t(e._0x3a5aa7)]}set allowDrillPick(e){const t=_0x2397ca;this[t(3044)].allowDrillPick=e}_onAdd(e){const t={_0x369f7f:558,_0x44f03e:1187,_0x3cd8c3:558,_0xa6b0e:3399,_0x4d88c0:3850,_0x524511:3615},x=_0x2397ca;var i;this._map||(this._state=State.ADD,this[x(t._0x369f7f)]=e,this.options.eventParent?this.addEventParent(this.options[x(1847)]):((i=this.options)===null||i===void 0?void 0:i.eventParent)===!1||this.addEventParent(e),this._dataSource&&this._map.dataSources[x(565)](this._dataSource),this._primitiveCollection&&this[x(t._0x369f7f)].scene.primitives.add(this._primitiveCollection),this._labelCollection&&this._map.scene.primitives.add(this._labelCollection),this._billboardCollection&&this._map.scene[x(t._0x44f03e)].add(this._billboardCollection),this._cloudCollection&&this[x(t._0x369f7f)].scene[x(1187)].add(this._cloudCollection),this._pointCollection&&this._map.scene.primitives.add(this[x(888)]),this[x(1424)]&&this[x(t._0x3cd8c3)][x(t._0xa6b0e)][x(t._0x44f03e)].add(this._polylineCollection),this._container&&this._map.container.appendChild(this._container),this._mountedHook&&!this._createOK&&(this._createOK=!0,this._mountedHook()),this._addedHook&&this._addedHook(),this[x(t._0x4d88c0)].forEach(s=>{const o=x;s!=null&&s[o(4061)]&&s._onAdd(this)},this),Cesium__namespace[x(639)](this.options.zIndex)&&(this.zIndex=this.options.zIndex),this._state=State.ADDED,this.fire(EventType[x(t._0x524511)],{layer:this},!0))}[_0x2397ca(2175)](){const e={_0x166cb7:3850,_0x17b521:2689,_0x5e1347:549,_0x523d90:888,_0x46201b:3399,_0x3f427d:1187,_0x5d8849:3399,_0x12ff82:1103,_0x4ab82e:3044},t=_0x2397ca;var x,i;this[t(1103)]===State.ADDED&&this._map&&(this[t(e._0x166cb7)].forEach(s=>{s!=null&&s._onRemove&&s._onRemove()},this),this._dataSource&&this._map.dataSources.remove(this._dataSource),this._primitiveCollection&&this[t(558)].scene.primitives.remove(this._primitiveCollection),this[t(3616)]&&this._map.scene.primitives.remove(this._labelCollection),this[t(549)]&&this._map.scene.primitives[t(e._0x17b521)](this[t(e._0x5e1347)]),this._cloudCollection&&this._map.scene[t(1187)].remove(this._cloudCollection),this[t(e._0x523d90)]&&this[t(558)][t(e._0x46201b)][t(e._0x3f427d)][t(2689)](this._pointCollection),this._polylineCollection&&this._map[t(e._0x5d8849)].primitives.remove(this._polylineCollection),this._container&&this._container.parentNode&&this._map.container.removeChild(this._container),this._map[t(3399)].primitives.destroyPrimitives&&(this._primitiveCollection=null,this[t(3616)]=null,this._billboardCollection=null,this._cloudCollection=null,this[t(888)]=null,this[t(1424)]=null),this._removedHook&&this._removedHook(),this[t(e._0x12ff82)]=State[t(1225)],this.fire(EventType.remove),this.fire(EventType.removeLayer,{layer:this},!0),(x=this.options)!==null&&x!==void 0&&x.eventParent?this.removeEventParent(this[t(3044)].eventParent):((i=this[t(e._0x4ab82e)])===null||i===void 0?void 0:i.eventParent)===!1||this.removeEventParent(this._map),this._map=null)}_showHook(e){const t={_0x1e1902:785,_0x3af5a0:1740},x=_0x2397ca;super._showHook(e),e?this[x(t._0x1e1902)]&&(this._container.style.display="block",this[x(3850)].forEach(i=>{i[x(2281)]&&i.updateDivPosition()},this)):(this._container&&(this._container.style.display="none"),this[x(t._0x3af5a0)]())}_mountedHook(){const e={_0x8f37dc:2645,_0xbd7bd8:2909,_0x38d1b8:2276,_0x1e6975:3863},t={_0x3872eb:1804,_0x5af0db:2996},x={_0x7ffda7:3426},i={_0x5579d3:2996,_0x20af22:1615},s={_0x385a3d:2996},o=_0x2397ca;super[o(e._0x8f37dc)](),this.on(EventType.drawCreated,r=>{const c=o;this.stopDraw(),this.isContinued?this.startDraw(clone(r.graphic.options)):this.hasEdit&&this.isAutoEditing&&this.startEditing(r[c(s._0x385a3d)])},this),this.on(EventType.load,r=>{const c=o;this.hasEdit&&this.isAutoEditing&&this._graphic_editing===r[c(i._0x5579d3)]&&this[c(i._0x20af22)](r[c(i._0x5579d3)])},this),this.on(EventType.removeGraphic,r=>{this[o(x._0x7ffda7)]===r.graphic&&(this._graphic_drawing=null),this._graphic_editing===r.graphic&&(this._graphic_editing=null)},this),this.on(EventType.editStart,r=>{const c=o;this[c(t._0x3872eb)]=r[c(t._0x5af0db)]},this),this.on(EventType[o(e._0xbd7bd8)],r=>{this._graphic_editing=null},this),this.options.clustering&&this._bindClustering(this.options.clustering),this.type==="graphic"&&(this.options[o(2069)]&&this.addGraphic(this.options.data),this[o(e._0x38d1b8)][o(e._0x1e6975)](this)),this.options[o(3511)]&&this.loadGeoJSON(this.options.geojson)}[_0x2397ca(2670)](){const e={_0x5d5ca3:3044},t=_0x2397ca;super._addedHook(),this._hasEdit&&this._bindEditEvent(),this[t(e._0x5d5ca3)].flyTo&&this.flyToByAnimationEnd()}_removedHook(){const e={_0xd70777:1740,_0x491e2b:917},t=_0x2397ca;super._removedHook(),this[t(3331)]&&(this[t(e._0xd70777)](),this[t(e._0x491e2b)]())}getRectangle(e){const t=_0x2397ca;let x;return this[t(3850)].forEach(i=>{const s=t;if(!i.getRectangle)return;const o=i.getRectangle();Cesium__namespace.defined(o)&&(x?x=Cesium__namespace[s(3520)].union(o,x):x=o)},this),e?formatRectangle(x):x}[_0x2397ca(3842)](){const e={_0x55c7af:3842},t=_0x2397ca;let x=0;return this._graphicList[t(1255)](i=>{const s=t;i[s(e._0x55c7af)]&&(x=Math.max(i[s(3842)](),x))},this),x}toGeoJSON(e){const t={_0xdc6068:2777},x=_0x2397ca;e!=null&&e.stopEdit&&this.stopEditing();let i=[];return this._graphicList[x(1255)](s=>{const o=x;if(s.isPrivate)return;const r=s[o(t._0xdc6068)](e);r&&(Array.isArray(r)?i=i.concat(r):i.push(r))},this),{type:"FeatureCollection",layer:{id:this.id,name:this.name},features:i}}_toJsonEx(e){const t={_0x503005:2069},x=_0x2397ca;this.stopEditing();let i=[];this._graphicList.forEach(s=>{const o=_0x3361;if(s[o(1731)]||!s.state)return;const r=s.toJSON();r&&(Array.isArray(r)?i=i[o(3210)](r):i.push(r))},this),e[x(t._0x503005)]=i}loadGeoJSON(e,t={}){const x={_0x26a9b7:1364,_0x52738c:558,_0x2dfbdd:3044},i=_0x2397ca;var s;try{isString(e)&&(e=JSON[i(x._0x26a9b7)](e))}catch(l){logError$1("loadGeoJSON:请确认json文件格式正确!",l);return}const o=(s=this[i(x._0x52738c)])===null||s===void 0?void 0:s.chinaCRS,r=this.options[i(2394)],c=getTransFun(r,o),_=geoJsonToGraphics(e,{...t,symbol:this[i(x._0x2dfbdd)].symbol,crs:this.options.crs,onPointTrans:c});return this[i(2445)](_,t)}_addGraphicByArrOptions(e,t={}){const x={_0x45ba3d:3923,_0xec7e2d:968,_0x38b49a:2718},i=_0x2397ca;t.clear&&this.clear();let s=[];if(e.length===0)return s;let o;t.enabledEvent===!1&&(this[i(x._0x45ba3d)]=!1,o=!0);const r=e[0][i(x._0xec7e2d)],c=this.options[i(910)]||{};if(isCombineType(r)){const _={...c,type:r,instances:e};t.onEachFeature&&t.onEachFeature(_);const l=this._addGraphic(_,!1);s.push(l)}else for(let _=0,l=e[i(2027)];_<l;_++){const h={...c,...e[_]};if(t.onEachFeature&&t.onEachFeature(h),this.options.onCreateGraphic){const d=this.options.onCreateGraphic(h);d&&(this.addGraphic(d),Array.isArray(d)?s=s.concat(d):s[i(2434)](d))}else{const d=this._addGraphic(h,!1);s[i(2434)](d)}}return o&&(this.enabledEvent=!0),t.flyTo&&this.show&&this._map[i(x._0x38b49a)](s),s}_bindClustering(e={}){const t={_0x216487:2347},x={_0x25be06:3170,_0x161acb:760,_0x5d5936:1286},i=_0x2397ca;var s;const o=(s=this.dataSource)===null||s===void 0?void 0:s.clustering;if(!o)return;o.enabled=e.enabled??!1,o[i(t._0x216487)]=e[i(2347)]??20;let r=setInterval(function(){o._cluster&&o._cluster()},800);o.clusterEvent.addEventListener((c,_)=>{const l=i;if(r&&(clearInterval(r),r=null),_.label[l(x._0x25be06)]=this.id,_.label[l(3482)]=!1,_.point._mars3d_layerId=this.id,_.billboard[l(3170)]=this.id,_.billboard.show=!0,_.billboard.id=_.label.id,_.billboard.verticalOrigin=Cesium__namespace.VerticalOrigin.BOTTOM,_.billboard.heightReference=e.clampToGround?Cesium__namespace.HeightReference.CLAMP_TO_GROUND:Cesium__namespace.HeightReference.NONE,_.billboard[l(1760)]=.5,e.style&&(BillboardStyleConver.toCesiumVal(e.style,_.billboard),e.style.setHeight&&(_.billboard.position=setPositionsHeight(_[l(824)].position,e[l(357)].setHeight)),e.style[l(2841)]&&(_.billboard.position=addPositionsHeight(_.billboard[l(x._0x161acb)],e.style.addHeight))),e[l(3166)]){const u=e.getImage(c[l(2027)],e);u.then?u[l(x._0x5d5936)](function(m){_.billboard.image=m}):_.billboard.image=u}else _.billboard.image=getCircleImage(c.length,e);const h=this,d={entities:c,cluster:_,getGraphics:function(){const u=[],m=this.entities;for(let f=0,g=m.length;f<g;f++){const b=m[f],y=h.getGraphicById(b._mars3d_graphicId);u.push(y)}return u}};_[l(824)]._clusterData=d,this[l(1788)](l(2048),d)})}getClusterList(){const e=_0x2397ca;var t;const x=(t=this.dataSource)===null||t===void 0?void 0:t.clustering;if(!x)return;const i=x._clusterBillboardCollection,s=x._previousClusters,o=[];for(let r=0,c=i[e(2027)];r<c;r++){const _=i.get(r);o.push({...s[r],..._._clusterData,billboard:_})}return o}setOpacity(e){const t={_0x3684e7:3850,_0x270290:1255},x={_0x3ef9bb:2732,_0x2b814b:2732},i=_0x2397ca;this._opacity=e,this[i(t._0x3684e7)][i(t._0x270290)](s=>{const o=i;s[o(x._0x3ef9bb)]&&s[o(x._0x2b814b)](e)},this)}[_0x2397ca(340)](e){const t={_0x18cc5c:1257,_0x1eadf6:2434},x=_0x2397ca;if(!this._createOK&&this._mountedHook&&(this._createOK=!0,this._mountedHook()),Array.isArray(e)){if(e[x(2027)]===0)return;const i=e[0].type;if(isCombineType(i)&&!e[0][x(t._0x18cc5c)]){const s={type:i,instances:e};return this._addGraphic(s)}else{const s=[];for(let o=0,r=e.length;o<r;o++){const c=this._addGraphic(e[o]);c&&s[x(t._0x1eadf6)](c)}return s}}else return this._addGraphic(e)}_addGraphic(e,t=!0){const x={_0x526f18:2001,_0x19ace3:968,_0x5394be:3628,_0x50cdd9:968},i=_0x2397ca;var s;return delete this._objectsToExclude_auto,this._graphicList[i(x._0x526f18)]((s=e)===null||s===void 0?void 0:s.id)&&(e.id=createGuid(),logWarn("addGraphic:数据id存在冲突，已重新赋值id",e)),!e._onAdd&&(e[i(x._0x19ace3)]||this.options.symbol)&&(t&&this.options.symbol&&(e=mergeSymbolToGraphic(e,this.options[i(x._0x5394be)])),e=create$4(e[i(x._0x50cdd9)],e)),e&&(e[i(4061)](this),this._graphicList[i(1912)](e.id,e)),e}removeGraphic(e,t){return this._removeGraphic(e,t),this}[_0x2397ca(1988)](e,t,x){const i={_0x1d303a:3850,_0x5ea3ac:2689},s=_0x2397ca;if(!e||!e[s(2175)])return this;delete this._objectsToExclude_auto,!x&&this[s(i._0x1d303a)][s(i._0x5ea3ac)](e.id),e._onRemove(),t&&e[s(2941)]()}getGraphicById(e){const t=_0x2397ca;return this[t(3850)][t(2001)](e)}getGraphicByAttr(e,t){return this._graphicList.getByAttr(e,t,"attr")}getGraphicsByAttr(e,t){const x={_0x579448:1578},i=_0x2397ca;return this._graphicList.getListByAttr(e,t,i(x._0x579448))}getGraphicsByStyle(e,t){const x=[];return this._graphicList.forEach(i=>{i.style[e]===t&&x.push(i)},this),x}[_0x2397ca(1991)](e,t){return this._graphicList.forEach(e,t||this),this}getGraphics(e=!1){const t={_0x23eb0a:3850,_0x38e1d0:3850,_0xa74f4a:1255},x=_0x2397ca;if(e)return this[x(t._0x23eb0a)].values;{const i=[];return this[x(t._0x38e1d0)][x(t._0xa74f4a)](s=>{!s[x(1731)]&&i.push(s)},this),i}}clear(e=!0){const t={_0x3c31bb:1859,_0x2e2eda:1961,_0x55e836:1920,_0x86c9c9:2027,_0x486ddb:1961},x=_0x2397ca;if(this.stopDraw(),this._graphicList&&(this._graphicList.forEach(o=>{this._removeGraphic(o,e,!0)},this),this._graphicList[x(1859)]()),this._dataSource&&this[x(2132)].entities[x(t._0x3c31bb)](),this._primitiveCollection)try{this[x(t._0x2e2eda)].removeAll()}catch{const r=this._primitiveCollection[x(t._0x55e836)],c=r[x(t._0x86c9c9)];for(let _=0;_<c;++_){var i,s;(i=r[_])!==null&&i!==void 0&&(s=i._external)!==null&&s!==void 0&&s._composites&&(delete r[_]._external._composites[this._guid],this[x(t._0x486ddb)].destroyPrimitives&&r[_].destroy())}this._primitiveCollection._primitives=[]}this._labelCollection&&this[x(3616)].removeAll(),this._billboardCollection&&this._billboardCollection.removeAll(),this[x(1799)]&&this._cloudCollection.removeAll(),this._pointCollection&&this._pointCollection[x(1859)](),this[x(1424)]&&this[x(1424)].removeAll(),this._closeAllControl()}autoSurfaceHeight(e={}){const t={_0x39702e:1568};return new Promise((x,i)=>{const s=this.getGraphics();let o=-1;const r=s.length;function c(){const _=_0x3361;if(o++,o>=r){e[_(t._0x39702e)]&&e.end({index:o,count:r,graphics:s}),x(s);return}const l=s[o];l[_(3513)]?l[_(3513)](e).then(()=>{e.endItem&&e.endItem({graphic:l,index:o,count:r}),c()}):(e.endItem&&e.endItem({graphic:l,index:o,count:r}),c())}c()})}clampToGround(e){return this.autoSurfaceHeight(e)}[_0x2397ca(1421)](e){const t={_0x61eb11:1259,_0x51a41c:3426};return new Promise((x,i)=>{const s=_0x3361;if(this.stopDraw(),!this._map)throw new Error("startDraw:需要 map.addLayer(当前图层) 后，才行使用本方法");e[s(t._0x61eb11)]={resolve:x,reject:i};const o=fromDraw(this,e);o!=null&&(this[s(t._0x51a41c)]=o)})}[_0x2397ca(1474)](){const e=_0x2397ca;if(this.stopEditing(),this._graphic_drawing){const t=this[e(3426)].endDraw();return t&&(this._graphic_drawing=null),t}return!1}stopDraw(){const e={_0x25a765:1740},t=_0x2397ca;return this.stopEditing(),this._graphic_drawing?(this._graphic_drawing[t(e._0x25a765)](),this._graphic_drawing=null,!0):!1}[_0x2397ca(3456)](){const e={_0x508601:3426},t=_0x2397ca;return this._graphic_drawing?(this[t(e._0x508601)].remove(!0),this._graphic_drawing=null,!0):!1}[_0x2397ca(1312)](){const e=_0x2397ca;if(!this._hasEdit)return this[e(3331)]=!0,this._map&&this[e(758)](),this}disableEdit(){const e={_0x58609a:3331,_0x38cbd4:917},t=_0x2397ca;if(this[t(e._0x58609a)])return this._hasEdit=!1,this[t(e._0x38cbd4)](),this[t(3220)](),this}_bindEditEvent(){const e=_0x2397ca;this[e(558)].on(EventType.click,this._onClickHandler,this),this._map.on(EventType.mouseMoveTarget,this[e(1174)],this)}_unbindEditEvent(){const e={_0x54051f:558,_0x270fe9:1230},t=_0x2397ca;this[t(e._0x54051f)][t(3573)](EventType[t(2031)],this[t(e._0x270fe9)],this),this._map[t(3573)](EventType.mouseMoveTarget,this._onMouseMoveHandler,this)}_onMouseMoveHandler(e){const t={_0x311570:3399,_0x156423:3374,_0x80df1c:558,_0x1901d2:1e3,_0x4a7fdf:1342,_0x18d2c0:3887,_0x14f696:558,_0x395511:2002},x=_0x2397ca;if(!this._hasEdit||!this._map[x(t._0x311570)].screenSpaceCameraController[x(t._0x156423)])return;let i=e[x(2996)];if(!i){const o=this._map.mouseEvent.getPickTarget(e.endPosition,e);i=o==null?void 0:o.graphic}if(i==null||i._layer!==this){this[x(t._0x80df1c)][x(1888)]();return}if(i._enabledDraw||i.isPrivate||!i[x(t._0x1901d2)]||this._map[x(t._0x4a7fdf)].show&&this[x(t._0x80df1c)][x(1342)][x(t._0x18d2c0)]===i)return;let s;isPCBroswer()?s=this[x(558)].getLangText(x(2002))+"<br/>"+this._map.getLangText("_右击菜单删除"):s=this[x(t._0x14f696)].getLangText(x(t._0x395511)),this._map.openSmallTooltip(e.windowPosition,s)}_onClickHandler(e){const t=_0x2397ca;if(this._graphic_drawing)return;const x=e.graphic;x&&(x.isPrivate||!x.hasEdit)||(this.hasEdit&&x&&e.layer===this?this[t(1615)](x,e):this.stopEditing())}[_0x2397ca(1615)](e,t){const x={_0x4a35fc:1e3},i=_0x2397ca;if(!(!e||!e.startEditing||!e.isAdded||!e[i(x._0x4a35fc)])&&!(this._graphic_editing===e||e._enabledDraw))return this.stopEditing(),e.startEditing(),t&&e._draw_tooltip&&this._map[i(1882)](t.position,e._draw_tooltip),this._graphic_editing=e,this}[_0x2397ca(3220)](){const e=_0x2397ca;return this._graphic_editing&&(this._graphic_editing.stopEditing(),this[e(1804)]=null),this}}register$2("graphic",GraphicLayer);class MatrixMove extends BaseThing{constructor(e={}){const t={_0x580626:3596},x=_0x2397ca;super(e),this[x(3894)]=new Cesium__namespace.Cartesian3(0,0,0),this.rotateMatrix=new Cesium__namespace[x(t._0x580626)](1,0,0,0,1,0,0,0,1),e.position&&(this.position=e[x(760)])}get position(){return this._position}set[_0x2397ca(760)](e){const t={_0x34cbba:2122},x=_0x2397ca;this._position=LngLatPoint.toCartesian(e),this[x(t._0x34cbba)](),this._updatePositionHook(!0)}get isMoveing(){return this._map?this._hasChangeEnableInputs:!1}_mountedHook(){this._graphicLayer=new GraphicLayer({private:!0})}_addedHook(){const e={_0x1d877a:558},t=_0x2397ca;this[t(e._0x1d877a)].addLayer(this[t(3886)]),this._updatePositionHook(!0),this._createGraphics(),this._bindEvent()}_removedHook(){const e=_0x2397ca;this._graphic_move_x&&delete this._graphic_move_x,this[e(3118)]&&delete this._graphic_move_y,this._graphic_move_z&&delete this._graphic_move_z,this._graphic_dragger_ing&&delete this._graphic_dragger_ing,this[e(3886)].clear(),this._map.removeLayer(this._graphicLayer),this._unbindEvent()}[_0x2397ca(840)](){const e={_0x2f1cdb:340,_0x405306:2120,_0x4d0625:3739},t=_0x2397ca;this[t(3886)][t(2265)](),this[t(442)]=new PolylinePrimitive({positions:this._positions_line_x,style:{width:15,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineArrow,color:Cesium__namespace.Color.RED,depthFail:!0},attr:{move:!0,type:Cesium__namespace.Axis.X},asynchronous:!1}),this[t(3886)][t(e._0x2f1cdb)](this._graphic_move_x),this._graphic_move_y=new PolylinePrimitive({positions:this._positions_line_y,style:{width:15,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineArrow,color:Cesium__namespace[t(2134)].GREEN,depthFail:!0},attr:{move:!0,type:Cesium__namespace.Axis.Y},asynchronous:!1}),this[t(3886)].addGraphic(this._graphic_move_y),this._graphic_move_z=new PolylinePrimitive({positions:this._positions_line_z,style:{width:15,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineArrow,color:Cesium__namespace.Color.BLUE,depthFail:!0},attr:{move:!0,type:Cesium__namespace.Axis.Z},asynchronous:!1}),this[t(3886)].addGraphic(this[t(e._0x405306)]),this[t(3739)]=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineDash,color:Cesium__namespace.Color[t(1819)],depthFail:!0},asynchronous:!1,show:!1}),this._graphicLayer[t(340)](this[t(e._0x4d0625)])}_initByPosition(){const e={_0x1a6bd8:3475,_0x66aff5:1046},t=_0x2397ca;this.modelToWorld=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),this.worldToModel=Cesium__namespace.Matrix4.inverse(this.modelToWorld,new Cesium__namespace.Matrix4),this.matrix=this.modelToWorld.clone(),this.inverseMatrix=Cesium__namespace.Matrix4.inverse(this[t(e._0x1a6bd8)],new Cesium__namespace.Matrix4),this.normalX=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[t(3475)],Cesium__namespace.Cartesian3[t(3890)],new Cesium__namespace.Cartesian3),this.normalY=Cesium__namespace[t(e._0x66aff5)][t(705)](this.matrix,Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace[t(295)]),this.normalZ=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),this._positions_line_x=[],this._positions_line_y=[],this._positions_line_z=[]}_updatePositionHook(e){const t={_0x1231d4:3966,_0x4d58bd:3400,_0x2d8d2d:1733,_0x2e4e82:3475,_0x228698:267,_0x53918d:3475,_0x18174a:1046},x=_0x2397ca;if(!this._map)return;const i=this.position.clone();if(e){const s=new Cesium__namespace.Matrix4[x(2933)](this._map.camera.viewMatrix,i,new Cesium__namespace.Cartesian3),o=-s.z*Math[x(t._0x1231d4)](this._map[x(t._0x4d58bd)].frustum.fov/2)*2,r=o/this._map[x(t._0x2d8d2d)][x(1526)];this.radius=200*r}this._positions_line_x=[i,Cesium__namespace[x(1046)].multiplyByPoint(this[x(t._0x2e4e82)],new Cesium__namespace.Cartesian3(this.radius,0,0),new Cesium__namespace.Cartesian3)],this[x(t._0x228698)]=[i,Cesium__namespace.Matrix4.multiplyByPoint(this[x(t._0x53918d)],new Cesium__namespace.Cartesian3(0,this.radius,0),new Cesium__namespace.Cartesian3)],this._positions_line_z=[i,Cesium__namespace[x(t._0x18174a)].multiplyByPoint(this.matrix,new Cesium__namespace.Cartesian3(0,0,this.radius),new Cesium__namespace.Cartesian3)],this._graphic_move_x&&(this._graphic_move_x.positions=this._positions_line_x),this._graphic_move_y&&(this._graphic_move_y.positions=this._positions_line_y),this[x(2120)]&&(this._graphic_move_z.positions=this[x(1168)])}[_0x2397ca(3003)](){const e={_0x2f91ba:755},t=_0x2397ca;this._graphicLayer.on(EventType.leftDown,this._onMap_leftDown,this),this._map.on(EventType[t(3353)],this._onMap_leftUp,this),this[t(558)].on(EventType[t(551)],this._onMap_middleClick,this),this[t(558)].on(EventType.wheel,this[t(e._0x2f91ba)],this)}_unbindEvent(){const e={_0x1926c1:3573,_0x5dc495:1283,_0x375838:558},t=_0x2397ca;this._graphicLayer.off(EventType.leftDown,this._onMap_leftDown,this),this._map[t(e._0x1926c1)](EventType[t(3353)],this._onMap_leftUp,this),this._map.off(EventType.mouseMove,this[t(e._0x5dc495)],this),this[t(e._0x375838)].off(EventType.middleClick,this._onMap_middleClick,this),this[t(558)].off(EventType.wheel,this._onMap_wheel,this)}_onMap_leftDown(e){const t={_0x44abbd:357,_0x5d2ed9:3739,_0x320ee7:3482,_0xa86ccd:3645,_0x283e43:1788,_0x39183c:558},x=_0x2397ca;if(this._graphic=void 0,e[x(2407)]!==this._graphicLayer)return;const i=e.graphic;if(!i||!(i.attr.move||i.attr[x(1940)]))return;this._graphic=i,!i[x(t._0x44abbd)].color_bak&&(i.style.color_bak=i.style[x(1089)]),i.setStyle({color:Cesium__namespace.Color[x(1819)]}),this[x(t._0x5d2ed9)].positions=[this.position,this.position],this[x(t._0x5d2ed9)][x(t._0x320ee7)]=!0;const s=this[x(t._0xa86ccd)].attr[x(968)];this[x(t._0x283e43)](EventType.start,{...e,editType:s,graphic:i}),this._map.scene.screenSpaceCameraController.enableInputs&&(this[x(558)][x(3399)].screenSpaceCameraController.enableInputs=!1,this[x(2392)]=!0),this[x(t._0x39183c)].on(EventType[x(2479)],this._onMap_mouseMove,this)}[_0x2397ca(1283)](e){const t={_0x1f52f6:3400,_0x2f3d71:760,_0x3918d9:558,_0xcc4208:1733,_0x526eeb:3975,_0x5ab60e:3872,_0x1a6de6:1046,_0x1a435f:705,_0x105bd4:565,_0x5d955f:1620,_0x24189c:1046,_0x1b0abd:705,_0x226e89:3729,_0x5709a4:705,_0x12d2e4:295,_0x1354ff:3596,_0x3f1b0e:3566,_0x57e999:3101,_0x3e04cc:466,_0x3dc691:295,_0x4e9e20:3596},x=_0x2397ca;if(!this._graphic)return;const i=e.startPosition,s=e.endPosition;let o;const r=this._graphic.attr.type;r===Cesium__namespace[x(3975)].X&&(o=this.normalX),r===Cesium__namespace.Axis.Y&&(o=this[x(1675)]),r===Cesium__namespace.Axis.Z&&(o=this.normalZ);const c=new Cesium__namespace.Cartesian3(s.x-i.x,-(s.y-i.y),0),_=new Cesium__namespace.Matrix4.multiplyByPointAsVector(this._map[x(t._0x1f52f6)].inverseViewMatrix,c,new Cesium__namespace.Cartesian3),l=new Cesium__namespace.Matrix4.multiplyByPoint(this._map.camera[x(2503)],this[x(t._0x2f3d71)],new Cesium__namespace.Cartesian3),h=-l.z*Math.tan(this._map.camera[x(1209)].fov/2)*2,d=h/this[x(t._0x3918d9)][x(t._0xcc4208)].width,u=Cesium__namespace.Cartesian3.dot(_,o)*d,m=Cesium__namespace.Cartographic.fromCartesian(this.position);let f=new Cesium__namespace[x(295)](this.position.x+o.x*u,this.position.y+o.y*u,this[x(760)].z+o.z*u);r!==Cesium__namespace[x(t._0x526eeb)].Z&&(f=Cesium__namespace.Cartographic.fromCartesian(f),f[x(t._0x5ab60e)]=m.height,r===Cesium__namespace.Axis.X?f.latitude=m[x(489)]:f.longitude=m.longitude,f=Cesium__namespace.Cartesian3.fromRadians(f.longitude,f.latitude,f.height));const g=Cesium__namespace.Matrix4.multiplyByPoint(this.inverseMatrix,f,new Cesium__namespace.Cartesian3);Cesium__namespace[x(t._0x1a6de6)][x(t._0x1a435f)](this.matrix,g,g),Cesium__namespace[x(t._0x1a6de6)].multiplyByVector(this.worldToModel,new Cesium__namespace.Cartesian4(g.x,g.y,g.z,0),g),Cesium__namespace.Cartesian3[x(t._0x105bd4)](this.translation,g,this.translation),this.position=f,this.matrix=Cesium__namespace[x(t._0x5d955f)].eastNorthUpToFixedFrame(this.position),Cesium__namespace.Matrix4.inverse(this.matrix,this.inverseMatrix);const b=this.normalX,y=this.normalY,C=this.normalZ;if(this.normalX=Cesium__namespace[x(t._0x24189c)][x(t._0x1b0abd)](this.matrix,Cesium__namespace.Cartesian3.UNIT_X,new Cesium__namespace[x(295)]),this.normalY=Cesium__namespace.Matrix4[x(705)](this.matrix,Cesium__namespace[x(295)][x(t._0x226e89)],new Cesium__namespace.Cartesian3),this.normalZ=Cesium__namespace.Matrix4[x(t._0x5709a4)](this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),r===Cesium__namespace.Axis.X){let M=Cesium__namespace[x(t._0x12d2e4)][x(466)](y,this.normalY),w=Cesium__namespace.Cartesian3.angleBetween(C,this.normalZ);u<0&&(w=-w,M=-M);const H=Cesium__namespace[x(1046)].multiplyByPointAsVector(this.worldToModel,C,new Cesium__namespace.Cartesian3);let D=Cesium__namespace.Matrix3.inverse(this.rotateMatrix,new Cesium__namespace.Matrix3),F=Cesium__namespace.Matrix3.multiplyByVector(D,H,new Cesium__namespace.Cartesian3),L=this._axisRotation(F,M);Cesium__namespace[x(t._0x1354ff)][x(t._0x3f1b0e)](this[x(1157)],L,this.rotateMatrix);const B=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,y,new Cesium__namespace.Cartesian3);D=Cesium__namespace.Matrix3.inverse(this.rotateMatrix,new Cesium__namespace.Matrix3),F=Cesium__namespace.Matrix3[x(t._0x57e999)](D,B,new Cesium__namespace[x(295)]),L=this[x(3948)](F,w),Cesium__namespace.Matrix3[x(3566)](this[x(1157)],L,this.rotateMatrix)}if(r===Cesium__namespace.Axis.Y){let M=Cesium__namespace.Cartesian3[x(t._0x3e04cc)](C,this[x(2654)]);u>0&&(M=-M);const w=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,b,new Cesium__namespace[x(t._0x3dc691)]),H=Cesium__namespace[x(t._0x1354ff)].inverse(this.rotateMatrix,new Cesium__namespace[x(t._0x4e9e20)]),D=Cesium__namespace.Matrix3.multiplyByVector(H,w,new Cesium__namespace.Cartesian3),F=this._axisRotation(D,M);Cesium__namespace.Matrix3.multiply(this.rotateMatrix,F,this[x(1157)])}this[x(3739)].positions=[this._graphic_dragger_ing[x(1091)][0],f],this._updatePositionHook();const v={...e,editType:r,position:f};this.onChange(v)}_onMap_leftUp(e){const t={_0x3e5cfd:1091,_0x22117a:3739,_0x5f089e:3482,_0x1241b1:3374},x=_0x2397ca;this._graphic&&(this._graphic[x(657)]({color:this._graphic.style[x(4006)]}),this._graphic=null,this._graphic_dragger_ing[x(t._0x3e5cfd)]=[],this[x(t._0x22117a)][x(t._0x5f089e)]=!1,this._hasChangeEnableInputs&&(this._map[x(3399)].screenSpaceCameraController[x(t._0x1241b1)]=!0,delete this._hasChangeEnableInputs),this._map.off(EventType.mouseMove,this._onMap_mouseMove,this),this[x(1788)](EventType.stop,e))}_axisRotation(e,t,x){const i={_0x5bef94:2880,_0x53c666:3596,_0x47cf47:459,_0x9a802:2009},s=_0x2397ca;let o=e.x,r=e.y,c=e.z;const _=Math[s(i._0x5bef94)](o*o+r*r+c*c);o=o/_,r=r/_,c=c/_;const l=o*o,h=r*r,d=c*c,u=Math.cos(t),m=Math.sin(t),f=1-u;return x=x||new Cesium__namespace[s(3596)],x[Cesium__namespace.Matrix3.COLUMN0ROW0]=l+(1-l)*u,x[Cesium__namespace.Matrix3.COLUMN0ROW1]=o*r*f+c*m,x[Cesium__namespace[s(i._0x53c666)].COLUMN0ROW2]=o*c*f-r*m,x[Cesium__namespace[s(i._0x53c666)].COLUMN1ROW0]=o*r*f-c*m,x[Cesium__namespace.Matrix3.COLUMN1ROW1]=h+(1-h)*u,x[Cesium__namespace.Matrix3.COLUMN1ROW2]=r*c*f+o*m,x[Cesium__namespace.Matrix3[s(i._0x47cf47)]]=o*c*f+r*m,x[Cesium__namespace.Matrix3[s(i._0x9a802)]]=r*c*f-o*m,x[Cesium__namespace.Matrix3[s(2576)]]=d+(1-d)*u,x}[_0x2397ca(755)](){this._updatePositionHook(!0)}_onMap_middleClick(e){const t={_0x49b25e:1620,_0x2a6b15:3475},x=_0x2397ca,i=this._map.scene.pickPosition(e.position);i&&(this[x(760)]=i,this.matrix=Cesium__namespace[x(t._0x49b25e)].eastNorthUpToFixedFrame(this.position),Cesium__namespace.Matrix4.inverse(this[x(t._0x2a6b15)],this.inverseMatrix),this._updatePositionHook())}[_0x2397ca(4030)](e){const t={_0x40f989:4030,_0x483629:1788},x=_0x2397ca;this.options[x(t._0x40f989)]&&this.options.onChange(e),this[x(t._0x483629)](EventType.change,e,!0)}}class MatrixRotate extends MatrixMove{get heading(){return this[_0x2397ca(3044)].heading??0}set heading(e){const t={_0x281846:3044},x=_0x2397ca;this[x(t._0x281846)].heading=e}get[_0x2397ca(227)](){const e={_0x18fa36:227},t=_0x2397ca;return this.options[t(e._0x18fa36)]??0}set pitch(e){this.options.pitch=e}get roll(){return this.options.roll??0}set roll(e){const t=_0x2397ca;this.options[t(2969)]=e}_removedHook(){const e={_0x59d4ba:2215,_0x3a0930:893},t=_0x2397ca;delete this[t(e._0x59d4ba)],delete this._graphic_rotate_x,delete this[t(e._0x3a0930)],super[t(380)]()}[_0x2397ca(840)](){const e={_0x1b26bb:1543,_0x13b4dd:340,_0x5a47f4:1819,_0x1eb3a3:3739},t=_0x2397ca;this._graphicLayer.clear(),this._graphic_rotate_x=new PolylinePrimitive({positions:this[t(e._0x1b26bb)],style:{width:8,color:Cesium__namespace.Color.RED,depthFail:!0,depthFailColor:Cesium__namespace.Color[t(2084)][t(396)](.5)},attr:{rotate:!0,type:Cesium__namespace.Axis.X},asynchronous:!1}),this._graphicLayer[t(e._0x13b4dd)](this._graphic_rotate_x),this._graphic_rotate_y=new PolylinePrimitive({positions:this._positions_circle_y,style:{width:8,color:Cesium__namespace.Color.GREEN,depthFail:!0,depthFailColor:Cesium__namespace.Color.GREEN[t(396)](.5)},attr:{rotate:!0,type:Cesium__namespace.Axis.Y},asynchronous:!1}),this._graphicLayer.addGraphic(this[t(893)]),this._graphic_rotate_z=new PolylinePrimitive({positions:this._positions_circle_z,style:{width:8,color:Cesium__namespace.Color[t(3905)],depthFail:!0,depthFailColor:Cesium__namespace.Color.BLUE.withAlpha(.5)},attr:{rotate:!0,type:Cesium__namespace.Axis.Z},asynchronous:!1}),this[t(3886)].addGraphic(this._graphic_rotate_z),this[t(3739)]=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineDash,color:Cesium__namespace.Color[t(e._0x5a47f4)],depthFail:!0},asynchronous:!1,show:!1}),this[t(3886)].addGraphic(this[t(e._0x1eb3a3)])}[_0x2397ca(2122)](){const e={_0x246be1:2488,_0x19bd27:295,_0x1316a5:3729,_0x1b59a4:2654},t=_0x2397ca;this.modelToWorld=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),this.worldToModel=Cesium__namespace.Matrix4[t(e._0x246be1)](this.modelToWorld,new Cesium__namespace[t(1046)]),this.matrix=this.modelToWorld.clone(),this.inverseMatrix=Cesium__namespace.Matrix4.inverse(this.matrix,new Cesium__namespace.Matrix4),this.normalX=Cesium__namespace.Matrix4[t(705)](this.matrix,Cesium__namespace[t(e._0x19bd27)][t(3890)],new Cesium__namespace[t(295)]),this.normalY=Cesium__namespace.Matrix4[t(705)](this.matrix,Cesium__namespace.Cartesian3[t(e._0x1316a5)],new Cesium__namespace.Cartesian3),this[t(e._0x1b59a4)]=Cesium__namespace.Matrix4[t(705)](this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),this._positions_circle_z=[],this[t(1543)]=[],this._positions_circle_y=[]}_updatePositionHook(e){const t={_0x4b3c55:760,_0x32fd04:2933,_0x1722e0:3400,_0x23d493:2503,_0x309a81:558,_0x3dbb6f:3189,_0x2dc09c:1314,_0x376e9b:2212,_0x551c98:565,_0xcebf21:2580,_0x4ba886:1675,_0x3a781b:295,_0x37c101:295,_0x4a1a80:565,_0x5390d1:3423,_0x36171b:1091},x=_0x2397ca;if(!this[x(558)])return;const i=this[x(t._0x4b3c55)].clone();if(e){const s=new Cesium__namespace.Matrix4[x(t._0x32fd04)](this[x(558)][x(t._0x1722e0)][x(t._0x23d493)],i,new Cesium__namespace.Cartesian3),o=-s.z*Math.tan(this._map.camera.frustum.fov/2)*2,r=o/this[x(t._0x309a81)].canvas.width;this[x(t._0x3dbb6f)]=200*r}this[x(1066)]=[],this._positions_circle_x=[],this._positions_circle_y=[];for(let s=0;s<=360;s++){const o=this[x(3189)]*Math[x(t._0x2dc09c)](s/180*Math.PI),r=this.radius*Math[x(t._0x376e9b)](s/180*Math.PI),c=new Cesium__namespace.Cartesian3;Cesium__namespace.Cartesian3[x(t._0x551c98)](i,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalX,o,new Cesium__namespace.Cartesian3),c),Cesium__namespace.Cartesian3.add(c,Cesium__namespace.Cartesian3[x(t._0xcebf21)](this[x(t._0x4ba886)],r,new Cesium__namespace.Cartesian3),c),this._positions_circle_z.push(c);const _=new Cesium__namespace[x(295)];Cesium__namespace.Cartesian3.add(i,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalX,o,new Cesium__namespace[x(t._0x3a781b)]),_),Cesium__namespace.Cartesian3.add(_,Cesium__namespace[x(t._0x37c101)].multiplyByScalar(this.normalZ,r,new Cesium__namespace.Cartesian3),_),this[x(1543)].push(_);const l=new Cesium__namespace.Cartesian3;Cesium__namespace.Cartesian3.add(i,Cesium__namespace[x(295)].multiplyByScalar(this.normalY,o,new Cesium__namespace.Cartesian3),l),Cesium__namespace[x(295)][x(t._0x4a1a80)](l,Cesium__namespace[x(t._0x37c101)].multiplyByScalar(this[x(2654)],r,new Cesium__namespace[x(295)]),l),this._positions_circle_y.push(l)}this._graphic_rotate_z&&(this._graphic_rotate_z.positions=this._positions_circle_z),this._graphic_rotate_x&&(this[x(t._0x5390d1)].positions=this[x(1543)]),this._graphic_rotate_y&&(this._graphic_rotate_y[x(t._0x36171b)]=this._positions_circle_y)}[_0x2397ca(1283)](e){const t={_0x14d240:1881,_0x4fb25c:558,_0x467947:3966,_0x362190:466,_0x57cc19:3475,_0xda15ca:295,_0x482b6a:295,_0x466c84:3400,_0x171bfa:1526,_0x822d87:558,_0x37050f:1733,_0x2ccc8b:1046,_0x2d93e0:2654,_0x184d70:778,_0x549444:1046,_0x4a4dce:778,_0x471d7f:1157},x=_0x2397ca,i=e[x(t._0x14d240)],s=e.endPosition,o=new Cesium__namespace.Matrix4[x(2933)](this[x(t._0x4fb25c)].camera.viewMatrix,this.position,new Cesium__namespace.Cartesian3);let c=-o.z*Math[x(t._0x467947)](this._map.camera.frustum.fov/2)*2/this._map.canvas.width;const _=new Cesium__namespace.Cartesian3(1,1,1);let l;const h=this._graphic.attr.type;h===Cesium__namespace[x(3975)].Z&&(_.z=0,l=Cesium__namespace.Cartesian3[x(t._0x362190)](Cesium__namespace.Matrix4[x(705)](this[x(t._0x57cc19)],new Cesium__namespace[x(t._0xda15ca)](0,0,1),new Cesium__namespace.Cartesian3),this._map.camera.direction)),h===Cesium__namespace.Axis.X&&(_.y=0,l=Cesium__namespace[x(t._0x482b6a)].angleBetween(Cesium__namespace.Matrix4[x(705)](this.matrix,new Cesium__namespace.Cartesian3(0,1,0),new Cesium__namespace.Cartesian3),this._map.camera.direction)),h===Cesium__namespace.Axis.Y&&(_.x=0,l=Cesium__namespace[x(t._0x482b6a)][x(t._0x362190)](Cesium__namespace[x(1046)].multiplyByPointAsVector(this.matrix,new Cesium__namespace.Cartesian3(1,0,0),new Cesium__namespace.Cartesian3),this._map[x(t._0x466c84)].direction)),Math.abs(l-Math.PI/2)<.1&&(c=1,o.z=0);let d=new Cesium__namespace.Cartesian3((i.x-this._map[x(1733)][x(t._0x171bfa)]/2)*c,(-i.y+this._map.canvas[x(3872)]/2)*c,o.z),u=new Cesium__namespace.Cartesian3((s.x-this._map.canvas.width/2)*c,(-s.y+this[x(t._0x822d87)][x(t._0x37050f)].height/2)*c,o.z);Cesium__namespace.Matrix4[x(2933)](this[x(t._0x822d87)][x(t._0x466c84)].inverseViewMatrix,d,d),Cesium__namespace.Matrix4.multiplyByPoint(this._map.camera[x(2308)],u,u),Cesium__namespace[x(1046)].multiplyByPoint(this.inverseMatrix,d,d),Cesium__namespace.Matrix4.multiplyByPoint(this.inverseMatrix,u,u),d=new Cesium__namespace[x(t._0x482b6a)](d.x*_.x,d.y*_.y,d.z*_.z),u=new Cesium__namespace.Cartesian3(u.x*_.x,u.y*_.y,u.z*_.z),l=Cesium__namespace.Cartesian3.angleBetween(d,u);let m;if(h===Cesium__namespace.Axis.Z){const C=d.x*u.y-d.y*u.x;m=Cesium__namespace[x(t._0x2ccc8b)].multiplyByPointAsVector(this.worldToModel,this[x(t._0x2d93e0)],new Cesium__namespace.Cartesian3),C>0&&(l=-l),this[x(1722)]=(this.heading+Cesium__namespace.Math[x(t._0x184d70)](l))%360}else if(h===Cesium__namespace.Axis.X){const C=d.x*u.z-d.z*u.x;m=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,this[x(1675)],new Cesium__namespace.Cartesian3),C>0&&(l=-l),this.pitch=(this.pitch+Cesium__namespace.Math.toDegrees(l))%360}else if(h===Cesium__namespace.Axis.Y){const C=d.y*u.z-d.z*u.y;m=Cesium__namespace[x(t._0x549444)].multiplyByPointAsVector(this[x(1810)],this.normalX,new Cesium__namespace.Cartesian3),C<0&&(l=-l),this.roll=(this.roll+Cesium__namespace[x(3876)][x(t._0x4a4dce)](l))%360}const f=Cesium__namespace.Matrix3[x(2488)](this[x(t._0x471d7f)],new Cesium__namespace[x(3596)]),g=Cesium__namespace.Matrix3.multiplyByVector(f,m,new Cesium__namespace.Cartesian3),b=this._axisRotation(g,l);Cesium__namespace.Matrix3.multiply(this.rotateMatrix,b,this.rotateMatrix);const y={...e,editType:h,position:this[x(760)],heading:this.heading,pitch:this.pitch,roll:this.roll};this.onChange(y)}_onMap_middleClick(e){}}class EditBase{constructor(e){const t={_0x508232:3645,_0x570498:558},x=_0x2397ca;this[x(t._0x508232)]=e,this[x(t._0x570498)]=e._map,this.draggers=[]}get enabled(){return this._enabled}get map(){return this._map}get layer(){const e=_0x2397ca;return this._graphic[e(3831)]}get style(){return this._graphic.style}get[_0x2397ca(1034)](){var e,t;return(e=this._graphic)===null||e===void 0||(t=e.style)===null||t===void 0?void 0:t.clampToGround}get type(){return this._graphic.type}get entityGraphic(){return this._graphic.entityGraphic}set[_0x2397ca(1091)](e){this._graphic._positions_draw=e}get positions(){const e=_0x2397ca;return this[e(3645)]._positions_draw||this[e(3645)]._positions||[]}get hasRotateMatrix(){return!!this._matrixRotate}get hasMoveMatrix(){return!!this._matrixMove}fire(e,t={},x=!0){const i={_0x239ec5:3645},s=_0x2397ca;if(this._graphic){const o=this[s(i._0x239ec5)][s(3085)];t.editType=this.type,this._graphic.fire(e,t,x),o&&(t.editType=o.type,o.fire(e,t,x))}}[_0x2397ca(3794)](e,t){return formatNum$1(e,t)}[_0x2397ca(3559)](){const e={_0x321985:3645,_0x1bcaae:1788},t=_0x2397ca;return this._enabled?this:(this._enabled=!0,this._graphic._setPositionsToCallback&&this[t(e._0x321985)]._setPositionsToCallback(),this.destroyDraggers(),this.bindDraggers(),this.bindEvent(),this[t(e._0x1bcaae)](EventType.editStart),this)}[_0x2397ca(1806)](){const e={_0x50a5db:502,_0x5921e4:3044,_0x5b05ce:1788},t=_0x2397ca;var x,i,s;return this[t(1322)]?(this._enabled=!1,this[t(e._0x50a5db)](),this[t(1156)](),this.unbindEvent(),this.destroyDraggers(),this.finish(),(x=this[t(3645)])!==null&&x!==void 0&&(i=x._layer)!==null&&i!==void 0&&(s=i[t(e._0x5921e4)])!==null&&s!==void 0&&s.isRestorePositions&&this._graphic._cancelPositionsCallback(),this[t(e._0x5b05ce)](EventType.editStop),this):this}finish(){}bindEvent(){const e={_0x12e210:558,_0x441d23:3353,_0x32ff02:421},t=_0x2397ca;this._map.on(EventType.leftDown,this._onLeftDownHandler,this),this[t(e._0x12e210)].on(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.on(EventType[t(e._0x441d23)],this[t(e._0x32ff02)],this)}unbindEvent(){const e={_0x4c60dd:558,_0x5f3b55:3482},t=_0x2397ca;this._map.off(EventType.leftDown,this._onLeftDownHandler,this),this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.off(EventType.leftUp,this._onLeftUpHandler,this),this._hasChangeEnableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=!0,delete this._hasChangeEnableInputs),this[t(e._0x4c60dd)]._setEditCursor(!1),!this._graphic.show&&(this._graphic[t(e._0x5f3b55)]=!0)}[_0x2397ca(2900)](e){const t={_0x5adecc:1228,_0x5c834e:2407,_0x22700e:2996,_0x509782:558,_0x9a151f:3830},x=_0x2397ca,i=this._map.mouseEvent[x(t._0x5adecc)](e.position,e);if(i.layer!==this[x(t._0x5c834e)])return;const s=i==null?void 0:i[x(t._0x22700e)];!s||!s._isDragger||(this[x(t._0x509782)].scene[x(t._0x9a151f)].enableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=!1,this[x(2392)]=!0),this[x(558)]._setEditCursor(!0),s._closeAllControl(),this._draggerIng=s,this._draggerIng.show=s.options.drawShow??!1,s.onDragStart&&s.onDragStart(s,i.cartesian||s.position),this.fire(EventType.editMouseDown,{...e,...i,index:this._draggerIng.index}))}_onMouseMoveHandler(e){this._draggerIng?this._onMouseMoveDraggerHandler(e):this._onMouseMoveMapHandler(e)}[_0x2397ca(4020)](e){const t={_0x29b00b:4050,_0x5ec1f2:1457,_0x36ada1:295,_0xc266bd:2006,_0x276a50:558,_0x31942a:3913,_0xb2c940:295,_0x2deaf8:1337,_0xfdc04c:3645,_0x5e9033:3053,_0x4a1332:4050},x=_0x2397ca;let i;switch(this._draggerIng._pointType){case PointType.MoveHeight:{var s;const o=e[x(t._0x29b00b)].y-e.startPosition.y,r=getPositionValue(this[x(3053)].position,(s=this._map)===null||s===void 0?void 0:s.clock.currentTime),c=new Cesium__namespace.EllipsoidTangentPlane(r),_=new Cesium__namespace[x(t._0x5ec1f2)],l=new Cesium__namespace[x(t._0x36ada1)];_[x(t._0xc266bd)]=r,_.radius=1;const h=this[x(t._0x276a50)][x(3399)].frameState.camera[x(t._0x31942a)](_,this._map[x(3399)][x(2895)].context.drawingBufferWidth,this._map[x(3399)].frameState.context[x(901)])*1.5;Cesium__namespace.Cartesian3.multiplyByScalar(c.zAxis,-o*h,l),i=Cesium__namespace.Cartesian3.clone(r),Cesium__namespace[x(t._0xb2c940)].add(r,l,i),this._draggerIng.position=i,this._draggerIng.onDrag&&this[x(3053)].onDrag(this._draggerIng,i,r),this.updateAttrForEditing(),this.fire(EventType[x(3820)],e);break}default:{this[x(t._0x276a50)].openSmallTooltip(e[x(4050)],this._map[x(t._0x2deaf8)](x(268)));let o=this[x(t._0xfdc04c)]._entity;if(this.clampToGround&&(o=null),i=getCurrentMousePosition(this._map.scene,e.endPosition,o),i){if(this[x(3645)].options.validDrawPosition&&!this._graphic.options[x(3855)](i,this._graphic))return;this._draggerIng.position=i,this[x(t._0x5e9033)].onDrag&&this._draggerIng.onDrag(this._draggerIng,i),this.updateAttrForEditing()}}break}this.fire(EventType.editMouseMove,{...e,index:this[x(t._0x5e9033)][x(3124)],cartesian:i,windowPosition:e[x(t._0x4a1332)]})}[_0x2397ca(2274)](e){const t={_0x3739e3:4050,_0x1ad6e8:2679,_0x53198e:1337},x=_0x2397ca;var i,s;const o=this._map.mouseEvent.getPickTarget(e[x(t._0x3739e3)],e),r=o==null?void 0:o.graphic;if(r==null){this[x(558)].closeSmallTooltip();return}if(o.layer!==this.layer||!r[x(1910)]||this._map.contextmenu[x(3482)]&&this[x(558)].contextmenu.target===r)return;let c=r[x(t._0x1ad6e8)];c&&(PointType.Control===r._pointType&&((i=this._graphic)===null||i===void 0||(s=i._positions_draw)===null||s===void 0?void 0:s.length)>this._graphic._minPointNum&&(c+=x(3895)+this._map[x(t._0x53198e)]("_右击删除点")),this._map.openSmallTooltip(e.endPosition,c))}_onLeftUpHandler(e){const t={_0x4389b7:3053,_0x317537:3718,_0x1c0d79:3673,_0x53ba0a:3174},x=_0x2397ca;var i;if(!this[x(t._0x4389b7)])return;this._draggerIng.show=!0;const s=getPositionValue(this[x(3053)].position,(i=this._map)===null||i===void 0?void 0:i.clock[x(t._0x317537)]),o=this._draggerIng.index;this._draggerIng[x(t._0x1c0d79)]&&this._draggerIng.onDragEnd(this[x(3053)],s),this.updateAttrForEditing(),this.fire(EventType[x(t._0x53ba0a)],{...e,index:o,cartesian:s}),this._draggerIng=null,this._map._setEditCursor(!1),this._hasChangeEnableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=!0,delete this._hasChangeEnableInputs)}openSmallTooltipByMinPointNum(e){const t={_0x437f16:916},x=_0x2397ca;this._map.openSmallTooltip(e,this._map[x(1337)]("_无法删除不能少于最小点数")+" "+this._graphic[x(t._0x437f16)])}createDragger(e){const t={_0x7ac2e0:3645,_0x2f197f:2679,_0xeedb7b:558,_0x2d6169:3660,_0x435d30:3142,_0x20e402:3673,_0x5a060d:1363,_0x3bf4e8:3895},x=_0x2397ca;let i;return e.dragger?i=e.dragger:(i=new PointPrimitive({position:e.position??Cesium__namespace[x(295)][x(737)],style:getEditPointStyle(e.type),hasEdit:!1,private:!0}),i.parent=this[x(t._0x7ac2e0)],this[x(2407)].addGraphic(i)),i[x(t._0x2f197f)]=this[x(t._0xeedb7b)].getLangText("_拖动该点后")+" "+(e[x(t._0x2d6169)]||this._map.getLangText("_修改位置")),i._isDragger=!0,i._noMousePick=!0,i[x(t._0x435d30)]=e.type||PointType.Control,i.onDragStart=e.onDragStart,i[x(726)]=e.onDrag,i[x(t._0x20e402)]=e.onDragEnd,(i._pointType===PointType[x(t._0x5a060d)]||i._pointType===PointType.MoveAll)&&(this._graphic.options.hasEditContextMenu??!0)&&(i._draw_tooltip+=x(t._0x3bf4e8)+this[x(558)][x(1337)](x(1707)),i.bindContextMenu(this.getDraggerContextMenu(i))),i}bindDraggers(){}[_0x2397ca(1848)](){for(let e=0,t=this.draggers.length;e<t;e++)this.layer.removeGraphic(this.draggers[e],!0);this.draggers=[]}updateDraggers(){const e={_0x521302:2611},t=_0x2397ca;if(!this[t(1322)])return this;clearTimeout(this._updateDraggersTimeTik),this[t(e._0x521302)]=setTimeout(()=>{this._updateDraggers()},20)}_updateDraggers(){const e={_0x52d0a8:639,_0xad8da8:2027,_0x45acdc:2249},t=_0x2397ca;var x;if(!this._enabled)return this;const i=(x=this._matrixMove)===null||x===void 0?void 0:x._dragger_index;if(this.destroyDraggers(),this.bindDraggers(),Cesium__namespace[t(e._0x52d0a8)](i))for(let s=0,o=this.draggers[t(e._0xad8da8)];s<o;s++){const r=this.draggers[s];if(!(r._pointType!==PointType.Control&&r._pointType!==PointType[t(e._0x45acdc)])&&r.index===i){this.startMoveMatrix(r);break}}}[_0x2397ca(2588)](){const e={_0x5b79b2:3645},t=_0x2397ca;this._graphic[t(2140)]&&this._graphic.updateAttrForDrawing(!0),this._graphic._updateLabelPosition&&this[t(e._0x5b79b2)]._updateLabelPosition()}getDraggerContextMenu(e){const t={_0x3c0ca9:2436,_0x25299c:3110,_0xc3acfb:1690},x={_0x5b091d:2996,_0x3b2b53:760},i={_0x30aaa3:3645},s={_0x33ff71:1047},o=_0x2397ca;return[{text:this._map.getLangText(o(t._0x3c0ca9)),icon:Icon[o(t._0x25299c)],show:r=>{var c;return(c=this._graphic)===null||c===void 0?void 0:c.isEditing},callback:r=>{const c=o;this._graphic[c(3220)]()}},{text:this._map.getLangText(o(t._0xc3acfb)),icon:Icon.Delete,show:r=>{const c=o;var _;return!((_=this._graphic)!==null&&_!==void 0&&_[c(s._0x33ff71)])||e[c(3142)]===PointType.MoveAll?!1:this[c(3645)]._positions_draw.length-1<this._graphic._minPointNum?(this.openSmallTooltipByMinPointNum(r.position),!1):!0},callback:r=>{const c=o,_=r.graphic;if(_){const l=_.index;l>=0&&l<this[c(3645)]._positions_draw.length&&(this[c(i._0x30aaa3)]._positions_draw.splice(l,1),this.updateDraggers(),this.updateAttrForEditing(),this[c(1788)](EventType.editRemovePoint,{...r,index:l}))}}},{text:this._map.getLangText("_按轴平移"),icon:Icon.DrawEditYes,show:r=>{const c=o;return!this._matrixMove||this[c(2802)]._dragger_index!==e.index},callback:r=>{const c=o;var _;const l=(_=r[c(x._0x5b091d)])!==null&&_!==void 0&&_[c(x._0x3b2b53)]?r.graphic:r.layer;this.startMoveMatrix(l,r)}},{text:this[o(558)].getLangText("_停止按轴平移"),icon:Icon.DrawEditNo,show:r=>this._matrixMove&&this._matrixMove._dragger_index===e.index,callback:r=>{this.stopMoveMatrix()}}]}[_0x2397ca(353)](e){const t={_0x3d51b5:502},x=_0x2397ca;Cesium__namespace.defined(e[x(1034)])&&(this[x(t._0x3d51b5)](),this[x(1156)](),this.updateDraggers())}_fireAddPoint(e,t){const x={_0x1a0ed4:372},i=_0x2397ca;this.fire(EventType[i(x._0x1a0ed4)],{index:e.index,cartesian:t})}startMoveMatrix(e,t={}){const x={_0x260966:558,_0x235045:2375,_0x32c478:2802,_0x373099:3270,_0x2b53a4:3124},i={_0x2fc159:3645,_0x5c3355:3975,_0x37dc44:2738,_0x295d2e:1788},s={_0x174f18:2802,_0x212685:760,_0x38293e:2802,_0x26d741:1788,_0x48dea:222,_0x537986:760,_0x35797a:3124},o={_0x56c484:3952},r=_0x2397ca;this.stopMoveMatrix(),this.stopRotateMatrix(),!e&&(e=this._graphic);let c=e.positionShow||e.position;this.clampToGround&&(c=getSurfacePosition(this[r(x._0x260966)][r(3399)],c)),this._matrixMove=new MatrixMove({position:c}),this._map[r(x._0x235045)](this._matrixMove),this[r(2802)][r(3886)].bindContextMenu([{text:this._map.getLangText("_停止按轴平移"),icon:Icon.DrawEditNo,show:_=>this._matrixMove,callback:_=>{this.stopMoveMatrix()}}]),this.clampToGround&&this[r(x._0x32c478)]._graphic_move_z&&(this._matrixMove._graphic_move_z.show=!1),this._matrixMove[r(x._0x373099)]=e[r(x._0x2b53a4)],this._matrixMove.on(EventType.start,_=>{const l=r;e.onDragStart&&e[l(o._0x56c484)](e,this._matrixMove.position)}),this._matrixMove.on(EventType.stop,_=>{const l=r;e.onDragEnd?e.onDragEnd(e,this[l(s._0x174f18)][l(s._0x212685)],_):e.position=this[l(s._0x38293e)].position,e[l(s._0x26d741)](EventType[l(s._0x48dea)],{position:this[l(2802)][l(s._0x537986)]}),this.fire(EventType.editMovePoint,{...t,..._,index:e[l(s._0x35797a)],cartesian:c})}),this._matrixMove.on(EventType.change,_=>{const l=r;var h;const d=this._matrixMove.position;if(e[l(1731)]?e.position=d:Cesium__namespace[l(639)]((h=this[l(i._0x2fc159)])===null||h===void 0?void 0:h._position_draw)?this[l(3645)][l(578)]=d:e.position=d,_.editType===Cesium__namespace[l(i._0x5c3355)].Z&&this[l(i._0x37dc44)]){const u=Cesium__namespace[l(1899)].fromCartesian(d).height;this._updateHeight(u)}else e.onDrag&&e.onDrag(e,d);this.updateAttrForEditing(),this[l(i._0x295d2e)](EventType.editMouseMove,{...t,..._,index:e.index,cartesian:d})}),e.off(EventType.updatePosition,this._updateMatrixMovePosition,this),e.off(EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType[r(222)],this._updateMatrixMovePosition,this)}_updateMatrixMovePosition(e){const t={_0x233c50:2996,_0x40157a:2802,_0x13e2ba:760},x=_0x2397ca;var i;!this[x(2802)]||this._matrixMove.isMoveing||!e.position||this._matrixMove._dragger_index!==((i=e[x(t._0x233c50)])===null||i===void 0?void 0:i.index)||(this[x(t._0x40157a)].position=e[x(t._0x13e2ba)])}stopMoveMatrix(){const e=_0x2397ca;this._matrixMove&&(this[e(558)].removeThing(this._matrixMove,!0),delete this._matrixMove)}startRotateMatrix(e){const t={_0x578d25:502,_0x3a5da8:3796,_0x2ddcf1:222},x={_0xa9dc3d:357,_0x1312b3:2969,_0x3b1500:1788},i={_0x247691:1156},s=_0x2397ca;this[s(t._0x578d25)](),this.stopRotateMatrix(),!e&&(e=this._graphic),this._matrixRotate=new MatrixRotate({position:e.positionShow||e[s(760)],heading:this[s(357)][s(1722)]||0,pitch:this.style.pitch||0,roll:this.style.roll||0}),this._map.addThing(this._matrixRotate),this._matrixRotate._graphicLayer.bindContextMenu([{text:this._map.getLangText("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:o=>this[s(3888)],callback:o=>{this[s(i._0x247691)]()}}]),this._matrixRotate.on(EventType[s(t._0x3a5da8)],o=>{const r=s;this[r(x._0xa9dc3d)].heading=formatNum$1(o.heading,2),this.style.pitch=formatNum$1(o.pitch,2),this.style[r(x._0x1312b3)]=formatNum$1(o.roll,2),this._graphic.updateOrientation(),this[r(x._0x3b1500)](EventType.editStyle)}),e[s(3573)](EventType.updatePosition,this._updateMatrixMovePosition,this),e.off(EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType[s(t._0x2ddcf1)],this._updateMatrixRotatePosition,this)}_updateMatrixRotatePosition(e){const t=_0x2397ca;var x;!this._matrixRotate||this._matrixRotate.isMoveing||!e[t(760)]||this._matrixRotate._dragger_index!==((x=e.graphic)===null||x===void 0?void 0:x[t(3124)])||(this._matrixRotate.position=e.position)}stopRotateMatrix(){const e=_0x2397ca;this._matrixRotate&&(this._map.removeThing(this[e(3888)],!0),delete this._matrixRotate)}[_0x2397ca(2941)](){this.disable();for(const e in this)delete this[e]}}class EditPoint extends EditBase{bindDraggers(){this[_0x2397ca(3089)]({dragger:this._graphic,onDrag:(t,x)=>{this._graphic._position_draw=x}})}finish(){const e={_0x70f67d:3645,_0xd861dd:832},t=_0x2397ca;delete this._graphic[t(2679)],delete this._graphic[t(1910)],delete this._graphic._noMousePick,delete this[t(e._0x70f67d)]._pointType,delete this._graphic.onDrag,this._graphic[t(e._0xd861dd)]()}}class BasePointEntity extends BaseEntity{constructor(e={}){const t={_0x9d907e:586,_0x531dfb:3331,_0x3b45e7:1091},x=_0x2397ca;e.drawShow=e[x(t._0x9d907e)]??!0,super(e),this._minPointNum=e.minPointNum??1,this._maxPointNum=e.maxPointNum??1,this[x(t._0x531dfb)]=this.options[x(1e3)]??!0,e.positions&&(this.positions=e[x(t._0x3b45e7)]),e[x(760)]&&(this.position=e.position)}get[_0x2397ca(1710)](){return EditPoint}get position(){return this._position}set position(e){const t={_0x1eb021:1556,_0x20a137:440,_0x1efd86:1155,_0x571dba:799,_0x38d0fb:1047,_0x226a2d:1182,_0x12553e:1788,_0x265b24:222},x=_0x2397ca;var i,s;if(this._point=LngLatPoint[x(1364)](e),this._point&&!(this._point.lat===0&&this[x(t._0x1eb021)].lng===0)){let c=this[x(357)][x(t._0x20a137)];Cesium__namespace.defined(c)&&(isString(c)&&(c=Number(template(c,this.attr,!0)),isNaN(c)&&(c=0)),this[x(1556)][x(1155)]=c);const _=this[x(2799)]();_!==0&&(this._point.alt=this._point[x(t._0x1efd86)]+_)}const o=(i=this._point)===null||i===void 0?void 0:i[x(t._0x571dba)]();if((s=this.editing)!==null&&s!==void 0&&s.enabled&&o instanceof Cesium__namespace[x(295)]){var r;this[x(578)]=o,o&&((r=this[x(t._0x38d0fb)])===null||r===void 0?void 0:r[x(2027)])>0&&(this._positions_draw[0]=o)}else this._isCallbackPositions&&o instanceof Cesium__namespace.Cartesian3&&this[x(t._0x226a2d)](),this._position=o;this._entity&&this._updatePositionsHook(),this[x(t._0x12553e)](EventType[x(t._0x265b24)],{position:this._position})}get positionShow(){const e={_0x395b6a:3703,_0x10df0d:3718},t=_0x2397ca;var x;return getPositionValue(this.position,(x=this._map)===null||x===void 0?void 0:x[t(e._0x395b6a)][t(e._0x10df0d)])}get point(){const e=_0x2397ca;return!(this._position instanceof Cesium__namespace.Cartesian3)&&(this._point=LngLatPoint.parse(this[e(703)])),this._point}get coordinate(){return this.getCoordinate()}get[_0x2397ca(2006)](){const e={_0x134d7b:558,_0x385589:3703},t=_0x2397ca;var x;return getPositionValue(this.positionShow,(x=this[t(e._0x134d7b)])===null||x===void 0?void 0:x[t(e._0x385589)].currentTime)}get centerPoint(){return this.point}get positions(){return this.position?[this.position]:[]}set positions(e){e&&e[_0x2397ca(2027)]>0&&(this.position=e[0])}get[_0x2397ca(1483)](){const e={_0x3098dd:2800},t=_0x2397ca;return this.point?[this[t(e._0x3098dd)]]:[]}get coordinates(){const e=_0x2397ca;return this[e(1139)]?[this[e(1139)]]:[]}get[_0x2397ca(982)](){return this.positionShow?[this.positionShow]:[]}get orientation(){return this.getOrientation()}set orientation(e){this._orientation=e,this.updateOrientation()}get[_0x2397ca(1722)](){return this.style.heading??0}set[_0x2397ca(1722)](e){const t={_0x526559:357},x=_0x2397ca;this[x(t._0x526559)].heading=e,this[x(3618)]()}get pitch(){return this.style.pitch??0}set pitch(e){this.style.pitch=e,this.updateOrientation()}get roll(){const e={_0xb140ad:2969},t=_0x2397ca;return this.style[t(e._0xb140ad)]??0}set roll(e){const t={_0x1447fe:2969},x=_0x2397ca;this.style[x(t._0x1447fe)]=e,this.updateOrientation()}get[_0x2397ca(3872)](){const e={_0x1dc055:2800},t=_0x2397ca;var x;return(x=this[t(e._0x1dc055)])===null||x===void 0?void 0:x.alt}set height(e){const t={_0x399245:1155},x=_0x2397ca;this[x(2800)][x(t._0x399245)]=e,this[x(760)]=this.point}get modelMatrix(){const e={_0x2ed029:773,_0x2734b2:1454,_0x1cd0e0:3703},t=_0x2397ca;if(this[t(e._0x2ed029)]){var x,i;return this._entity[t(e._0x2734b2)]((x=this._map)===null||x===void 0||(i=x[t(e._0x1cd0e0)])===null||i===void 0?void 0:i[t(3718)],new Cesium__namespace.Matrix4)}else return}get debugAxis(){return this._debugAxis}set[_0x2397ca(878)](e){const t={_0x1a4a35:1021,_0x3eaefd:3750,_0x2f8596:1899,_0x5a0ac1:1001,_0x3e7eaf:2995},x={_0xe10ab6:3455},i=_0x2397ca;if(this[i(t._0x1a4a35)]=e,!this[i(t._0x3eaefd)]){const s=Math[i(1146)](Cesium__namespace[i(t._0x2f8596)].fromCartesian(this.positionShow).height*.06,100);this.debugAxisPrimitive=this._layer.primitiveCollection.add(new Cesium__namespace[i(3303)]({modelMatrix:this.modelMatrix,length:s,width:5})),this.debugAxisPrimitive[i(t._0x5a0ac1)]={content:`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,options:this.options[i(t._0x3e7eaf)]},(this.position instanceof Cesium__namespace.CallbackProperty||this.position instanceof Cesium__namespace.SampledPositionProperty)&&(this[i(t._0x3eaefd)]._timeTik=setInterval(()=>{const o=i;this.debugAxisPrimitive.modelMatrix=this[o(x._0xe10ab6)]},300)),this.bindPickId(this[i(3750)])}this.debugAxisPrimitive.show=e}get[_0x2397ca(3249)](){return this.debugAxisPrimitive?this.debugAxisPrimitive.length:0}set[_0x2397ca(3249)](e){const t={_0xa1e303:3750,_0x25b0ad:878},x=_0x2397ca;!this[x(t._0xa1e303)]&&(this[x(t._0x25b0ad)]=!0),this.debugAxisPrimitive.length=e}get objectsToExclude(){const e={_0x46cb8a:3656},t=_0x2397ca;if(this.options[t(e._0x46cb8a)])return this.options.objectsToExclude;if(this._objectsToExcludee)return this._objectsToExclude}set[_0x2397ca(3656)](e){this._objectsToExclude=e}_mountedHook(){}_removedHook(){const e={_0x48267f:3595},t=_0x2397ca;super._removedHook(),this[t(3750)]&&(clearInterval(this.debugAxisPrimitive._timeTik),this._layer[t(e._0x48267f)][t(2689)](this.debugAxisPrimitive),delete this[t(3750)])}[_0x2397ca(325)](){const e=_0x2397ca;this._entity[e(760)]=this._position,this[e(3750)]&&(this.debugAxisPrimitive.modelMatrix=this.modelMatrix),this[e(3291)](),this._updateLabelPosition()}updateOrientation(){const e={_0xff5bbb:3190},t=_0x2397ca;return this._entity.orientation=this.getOrientation(),this.debugAxisPrimitive&&(this.debugAxisPrimitive.modelMatrix=this.modelMatrix),this._entity[t(e._0xff5bbb)]}getOrientation(e){const t={_0x283f37:3876,_0x315b90:2500,_0xb1a2ad:428,_0x43066e:2500,_0x40724a:2500},x={_0x1c0ad0:2893,_0x52c3d3:639,_0x5f0d90:2969,_0x1e2abb:1620,_0x47865f:558,_0xd7f16f:1782},i=_0x2397ca;e=e||this.style;let s=this.options[i(3190)]||this[i(885)];if(s){const h=e.mergeOrientation||Cesium__namespace.defined(e.heading)||Cesium__namespace[i(639)](e.pitch)||Cesium__namespace[i(639)](e.roll);if(s instanceof Cesium__namespace[i(2509)]&&h){const d=s,u=Cesium__namespace[i(3876)].toRadians(this[i(1722)]),m=Cesium__namespace.Math.toRadians(this.pitch),f=Cesium__namespace[i(t._0x283f37)][i(t._0x315b90)](this.roll);s=new Cesium__namespace[i(t._0xb1a2ad)](g=>{const b=i;var y,C;const v=getPositionValue(this.position,g),M=d[b(x._0x1c0ad0)](g);if(!v||!M)return null;const w=getHeadingPitchRollByOrientation(v,M);return e.mergeOrientation?(w.heading+=u,w.roll+=f,w[b(227)]+=m):(Cesium__namespace.defined(e.heading)&&(w.heading=u),Cesium__namespace[b(x._0x52c3d3)](e[b(x._0x5f0d90)])&&(w.roll=f),Cesium__namespace.defined(e.pitch)&&(w[b(227)]=m)),Cesium__namespace[b(x._0x1e2abb)].headingPitchRollQuaternion(v,w,(y=this[b(x._0x47865f)])===null||y===void 0||(C=y.scene)===null||C===void 0?void 0:C.globe[b(x._0xd7f16f)])},!1)}return s}const o=this[i(703)];if(o==null)return;const r=Cesium__namespace.Math.toRadians(e.heading??0),c=Cesium__namespace.Math[i(t._0x43066e)](e[i(227)]??0),_=Cesium__namespace[i(3876)][i(t._0x40724a)](e.roll??0),l=new Cesium__namespace.HeadingPitchRoll(r,c,_);return Cesium__namespace[i(1620)].headingPitchRollQuaternion(o,l)}[_0x2397ca(4036)](e){const t={_0x13daaa:2381},x=_0x2397ca;return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[x(t._0x13daaa)])}}clearDynamicPosition(){const e=_0x2397ca;return this[e(885)]=void 0,this.property=null,this.position=void 0,this}_initSampledPositionProperty(){const e={_0xc366ba:3044},t={_0x7e752a:558,_0x5749b7:3125,_0x2d7a16:559,_0x1483fb:3866,_0x5a7959:2013,_0x2569fc:1900,_0x5a1e74:760},x=_0x2397ca;this[x(3866)]=-1,this._frameRateHeight=this[x(3044)].frameRateHeight??30,this[x(3355)]=this.options.maxCacheCount??50;const i=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame,this.options.numberOfDerivatives);i[x(1577)]=this.options[x(1577)]??Cesium__namespace[x(3884)][x(330)],i.backwardExtrapolationType=this[x(e._0xc366ba)].backwardExtrapolationType??Cesium__namespace.ExtrapolationType.HOLD,!this._orientation&&(this._orientation=new Cesium__namespace.VelocityOrientationProperty(i),this._entity&&(this._entity.orientation=this.getOrientation())),this.property=i,this.position=new Cesium__namespace.CallbackProperty(s=>{const o=x;if(!this[o(t._0x7e752a)])return;let r=i.getValue(s);if(!r)return!this[o(t._0x5749b7)]&&this[o(366)]&&Cesium__namespace.JulianDate[o(t._0x2d7a16)](s,this._stopTime)&&(this.fire(EventType.stop),this._last_isFireStop=!0),this._last_position;if(r&&this.options.clampToTileset){if(this[o(t._0x1483fb)]++,!this._clampToTilesetHeight||this._clampToTilesetFrame%this[o(t._0x5a7959)]===0){const c=getHeight(this[o(t._0x7e752a)][o(3399)],r,{objectsToExclude:this._layer.objectsToExclude,has3dtiles:!0});c&&(this[o(t._0x2569fc)]=c)}if(this._clampToTilesetHeight){const c=Cesium__namespace.Cartographic[o(2145)](r);r=Cesium__namespace.Cartesian3[o(238)](c[o(1184)],c.latitude,this._clampToTilesetHeight+this.getAddHeight())}}return this._primitive_label&&(this._primitive_label[o(t._0x5a1e74)]=r),this._last_position=r,this._last_isFireStop=!1,r},!1)}[_0x2397ca(771)](e,t){const x={_0x35eada:3703,_0x494fe8:1522,_0x6c24fb:2528,_0x306f6c:652,_0xa25d63:2062,_0x32bcb6:2027,_0x2079c7:1173},i=_0x2397ca;var s,o,r,c;!this.property&&this._initSampledPositionProperty(),this[i(1758)]();const _=((s=this._map)===null||s===void 0||(o=s[i(x._0x35eada)])===null||o===void 0?void 0:o.currentTime)||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace[i(1522)].addSeconds(_,t,new Cesium__namespace[i(x._0x494fe8)]):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace.JulianDate.fromDate(new Date(t)):t=Cesium__namespace.JulianDate[i(x._0x6c24fb)](t):t instanceof Date&&(t=Cesium__namespace.JulianDate.fromDate(t)):t=_,e=LngLatPoint.parse(e);const l=(r=this[i(x._0x306f6c)])===null||r===void 0||(c=r[i(x._0xa25d63)])===null||c===void 0?void 0:c._times;if(this.options.autoMiddleDynamicPosition&&(l==null?void 0:l[i(2027)])>0&&this._position){const d=l[l[i(x._0x32bcb6)]-1];if(Cesium__namespace.JulianDate.secondsDifference(_,d)>.3){let u=this[i(x._0x2079c7)];this._lastDynamicPosition&&(u=getOnLinePointByLen(this._lastDynamicPosition,this._position,.01,!0)),u=setPositionsHeight(u,e.alt||0),this._sampledPositionProperty.addSample(_,u)}}const h=e.toCartesian();return this.property.addSample(t,h),this._lastDynamicPosition=h,this[i(366)]=t,this}[_0x2397ca(1758)](){const e={_0x50647b:2062,_0x569978:2066},t=_0x2397ca;var x,i;if(this._maxCacheCount<1)return;const s=(x=this.property)===null||x===void 0||(i=x[t(e._0x50647b)])===null||i===void 0?void 0:i._times;if(!s||(s==null?void 0:s.length)===0)return;const o=s.length-this._maxCacheCount-1;o>0&&this.property.removeSamples(new Cesium__namespace[t(e._0x569978)]({start:s[0],stop:s[o]}))}_getPopupPosition(){return this.property||this.position||this.center}[_0x2397ca(3513)](e={}){return getSurfaceHeight(this._map.scene,this.position,{objectsToExclude:this._layer.objectsToExclude,...e}).then(t=>{t.position&&(this.position=t.position)})}[_0x2397ca(1034)](e){return this[_0x2397ca(3513)](e)}getCoordinate(e){return this[_0x2397ca({_0x30394a:2800}._0x30394a)]?this.point.toArray(e):[]}setCallbackPosition(e){const t={_0x19310e:3394,_0x786a5f:799,_0x318538:578},x=_0x2397ca;return this[x(t._0x19310e)](),e&&(this._position_draw=LngLatPoint[x(t._0x786a5f)](e)),this[x(t._0x318538)]}_setPositionsToCallback(){const e={_0x16b682:578,_0x2fde57:1841},t=_0x2397ca;this._isCallbackPositions||(this._isCallbackPositions=!0,this.show=this.options.drawShow,this[t(e._0x16b682)]=this.positionShow,this[t(760)]=new Cesium__namespace.CallbackProperty(x=>this._position_draw,!1),this.updateAttrForDrawing&&this.updateAttrForDrawing(!0),this[t(e._0x2fde57)](),this._updateLabelPosition())}_cancelPositionsCallback(){const e={_0xb88ab3:2145,_0x2a9a27:1173},t=_0x2397ca;this[t(449)]&&(this._isCallbackPositions=!1,this._position=this._position_draw,this._point=LngLatPoint[t(e._0xb88ab3)](this._position),delete this._position_draw,this._entity[t(760)]=this[t(e._0x2a9a27)])}[_0x2397ca(2173)](){const e={_0x30c5ae:2840,_0x50fa8e:558,_0x142536:297},t=_0x2397ca;this._map.on(EventType.mouseMove,this[t(e._0x30c5ae)],this),this[t(e._0x50fa8e)].on(EventType.click,this[t(e._0x142536)],this)}_stopDrawHook(){const e={_0x142d4a:3573,_0x183109:2031,_0x22528a:3482},t=_0x2397ca;this[t(558)].off(EventType[t(2479)],this._onMouseMoveHandler_point,this),this._map[t(e._0x142d4a)](EventType[t(e._0x183109)],this._onClickHandler_point,this),this[t(e._0x22528a)]=!0}_onMouseMoveHandler_point(e){const t={_0x3490f3:641,_0x123a23:578,_0x12114b:1962,_0x5ec248:1882,_0x56442e:4050,_0x1b960f:558},x=_0x2397ca,i=e[x(t._0x3490f3)];i&&(this[x(t._0x123a23)]=i,this[x(t._0x12114b)]=!0),this._map[x(t._0x5ec248)](e[x(t._0x56442e)],this._draw_tooltip||this[x(t._0x1b960f)].getLangText("_单击完成绘制")),this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!0)}_onClickHandler_point(e){const t=_0x2397ca,x=e.cartesian;x&&(this._position_draw=x),this._position_draw&&(this[t(1962)]=!1,this.stopDraw())}}class EditPoly extends EditBase{get hasClosure(){return this.style.closure}get hasMidPoint(){const e={_0x59e3b2:3645},t=_0x2397ca;return this.positions.length<this[t(e._0x59e3b2)]._maxPointNum}[_0x2397ca(239)](){const e={_0x4a6eb7:1478,_0x4e709e:1154},t={_0x403f53:3124},x={_0x5b7fa8:760,_0x313668:1091,_0x266831:2027,_0xf0ca9e:2208,_0x489477:3124},i=_0x2397ca,s=this.positions;for(let o=0,r=s.length;o<r;o++){const c=this.updatePositionsHeightByAttr(s[o]),_=this.createDragger({position:c,onDrag:(l,h)=>{const d=_0x3361;var u;if(h=this.updatePositionsHeightByAttr(h),l[d(x._0x5b7fa8)]=h,this[d(x._0x313668)][l.index]=h,!(((u=this._heightDraggers)===null||u===void 0?void 0:u[d(x._0x266831)])>0)){if(this.hasMidPoint){let m,f,g;if(this.hasClosure||!this[d(x._0xf0ca9e)]&&l[d(x._0x489477)]!==0){l[d(3124)]===0?(m=r*2-1,f=r-1):(m=l.index*2-1,f=l.index-1);const b=s[f];g=getMidpoint(h,b),g=this.updatePositionsHeightByAttr(g),this.draggers[m][d(760)]=g}(this[d(2208)]||!this.hasClosure&&l.index!==r-1)&&(l.index===r-1?(m=l.index*2+1,f=0):(m=l.index*2+1,f=l[d(3124)]+1),g=getMidpoint(h,s[f]),g=this.updatePositionsHeightByAttr(g),this.draggers[m][d(760)]=g)}if(this[d(3357)]){let m=centerOfMass(s);m=this.updatePositionsHeightByAttr(m),this[d(3357)][d(760)]=m}}},onDragStart:(l,h)=>{var d;if(((d=this._heightDraggers)===null||d===void 0?void 0:d.length)>0)for(let u=0,m=this.draggers.length;u<m;u++)this.draggers[u].show=!1},onDragEnd:(l,h)=>{var d;((d=this._heightDraggers)===null||d===void 0?void 0:d.length)>0&&this.updateDraggers()}});if(_[i(3124)]=o,this.draggers.push(_),this.hasMidPoint&&(this[i(2208)]||!this[i(2208)]&&o<r-1)){const l=(o+1)%r;let h=getMidpoint(c,s[l]);h=this.updatePositionsHeightByAttr(h);const d=this.createDragger({position:h,type:PointType[i(e._0x4a6eb7)],tooltip:this._map.getLangText("_增加点"),onDragStart:(u,m)=>{this.positions.splice(u.index,0,m)},onDrag:(u,m)=>{const f=i;this[f(1091)][u[f(t._0x403f53)]]=m},onDragEnd:(u,m)=>{this[i(432)](u,m),this.updateDraggers()}});d.index=l,this[i(e._0x4e709e)].push(d)}}this._bindMoveAllDragger(),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}_bindMoveAllDragger(){const e={_0x41684f:3278},t={_0x201ab7:1091,_0xc0e42d:1255,_0x3ad047:760,_0x845723:1837},x=_0x2397ca;if(!this._graphic._hasMoveEdit)return;let i=centerOfMass(this.positions);i=this.updatePositionsHeightByAttr(i);const s=this.createDragger({position:i,type:PointType.MoveAll,tooltip:this._map[x(1337)](x(e._0x41684f)),onDragStart:(o,r)=>{i=r},onDrag:(o,r)=>{const c={_0xf558c:295},_=x;var l;const h=Cesium__namespace.Cartesian3.subtract(r,i,new Cesium__namespace.Cartesian3);if(i=r,this[_(t._0x201ab7)][_(t._0xc0e42d)]((d,u,m)=>{const f=_,g=this[f(1646)](Cesium__namespace[f(c._0xf558c)].add(d,h,new Cesium__namespace[f(c._0xf558c)]));this.positions[u]=g}),((l=this._graphic._draw_holes)===null||l===void 0?void 0:l.length)>0)for(let d=0,u=this._graphic._draw_holes.length;d<u;d++){const m=this._graphic._draw_holes[d];m.forEach((f,g,b)=>{const y=_,C=this[y(1646)](Cesium__namespace[y(295)].add(f,h,new Cesium__namespace.Cartesian3));m[g]=C})}for(let d=0,u=this.draggers.length;d<u;d++)s!==this.draggers[d]&&(this.draggers[d].position=this[_(1646)](Cesium__namespace.Cartesian3.add(this.draggers[d][_(t._0x3ad047)],h,new Cesium__namespace.Cartesian3)));this[_(t._0x845723)](r)}});this._draggerMove=s,this.draggers.push(s)}_updateMoveAllHook(e){}[_0x2397ca(2634)](e){const t={_0x11db49:1091,_0x56942a:558,_0x4dadb2:3718,_0x1385c2:2027,_0x50a98e:2532,_0x1ee895:1337,_0x52226b:2434},x={_0x4e3b49:2812,_0x102c3b:3363},i=_0x2397ca;if(!this._graphic._hasHeightEdit)return;this._heightDraggers=[],e=e||this[i(t._0x11db49)];const s=getCesiumValue(this[i(2812)].extrudedHeight,Number,this[i(t._0x56942a)].clock[i(t._0x4dadb2)]);for(let o=0,r=e[i(t._0x1385c2)];o<r;o++){const c=setPositionsHeight(e[o],s),_=this.createDragger({position:c,type:PointType[i(t._0x50a98e)],tooltip:this[i(558)][i(t._0x1ee895)]("_修改高度"),onDrag:(l,h)=>{const d=i,u=Cesium__namespace.Cartographic.fromCartesian(h).height;this[d(x._0x4e3b49)].extrudedHeight=u;const m=getMaxHeight(this.positions);this.style[d(2437)]=this[d(3794)](u-m,2),this[d(x._0x102c3b)](u),this.updateAttrForEditing(),this.fire(EventType.editStyle)}});this.draggers[i(t._0x52226b)](_),this._heightDraggers.push(_)}}updateHeightDraggers(e){const t={_0x25139b:3703},x=_0x2397ca;for(let s=0;s<this._heightDraggers.length;s++){var i;const o=this._heightDraggers[s],r=setPositionsHeight(getPositionValue(o.position,(i=this[x(558)])===null||i===void 0?void 0:i[x(t._0x25139b)].currentTime),e);o.position=r}}updatePositionsHeightByAttr(e){const t=_0x2397ca;return this.clampToGround&&(e=getSurfacePosition(this._map[t(3399)],e,{has3dtiles:!0})),e}_updateStyleHook(e){const t={_0x1d5612:1034,_0x5e8a55:4009},x=_0x2397ca;super._updateStyleHook(e),(Cesium__namespace.defined(e.diffHeight)||Cesium__namespace.defined(e.height)||Cesium__namespace.defined(e[x(t._0x1d5612)]))&&this[x(t._0x5e8a55)]()}}class BasePolyEntity extends BaseEntity{constructor(e={}){const t={_0x58635e:1922,_0x5b08e3:690,_0x432053:1091},x=_0x2397ca;super(e),this._hasEdit=this[x(3044)].hasEdit??!0,this._minPointNum=e.minPointNum??2,this._maxPointNum=e[x(t._0x58635e)]??9999,this[x(t._0x5b08e3)]=e.hasMoveEdit??!0,this._hasHeightEdit=e.hasHeightEdit??!0,e.positions&&(this.style.buffer>0?this.positions=bufferPoints(e.positions,this.style.buffer,this.style.bufferSteps):this[x(t._0x432053)]=e.positions)}get hasMoveEdit(){return this._hasMoveEdit}get[_0x2397ca(3010)](){return this._hasHeightEdit}get EditClass(){return EditPoly}get center(){const e={_0x370e93:509},t=_0x2397ca;return this.style[t(e._0x370e93)]?this.centerOfMass:this.centerOfLine}get centerOfMass(){return centerOfMass(this.positionsShow)}get centerOfLine(){const e={_0x440cb1:230},t=_0x2397ca,x=this[t(982)];return!x||x.length===0?null:x[t(2027)]===1?x[0]:x[t(2027)]<10?sliceByMaxDistance(x,this[t(e._0x440cb1)]/2,{point:!0}):x[Math.floor(x[t(2027)]/2)]}get distance(){return getDistance(this[_0x2397ca({_0x2ed4a5:982}._0x2ed4a5)])}get area(){return getSurfaceArea(this.positionsShow)}get positions(){const e=_0x2397ca;return this._getPositions?this[e(3914)]():this._positions}set[_0x2397ca(1091)](e){const t={_0x580f8a:2526},x=_0x2397ca;if(e){if(Array.isArray(e)){var i;const s=[],o=[];e.forEach((r,c)=>{const _=_0x3361,l=LngLatPoint.parse(r);if(!l||!l.valid())return;let h=this.style[_(440)];Cesium__namespace.defined(h)&&(isString(h)?(h=Number(template(h,this[_(1578)],!0)),isNaN(h)&&(h=0)):Array[_(4056)](h)&&(h=h[c]||0),l.alt=h);const d=this.getAddHeight(c);d!==0&&(l.alt=l.alt+d),s.push(l),o.push(l.toCartesian())}),(i=this.editing)!==null&&i!==void 0&&i.enabled?this._positions_draw=o:(this[x(1047)]&&this._cancelPositionsCallback(),this._positions=o),this._points=s}else this[x(t._0x580f8a)]=e;this._entity&&this._updatePositionsHook(),this.fire(EventType.updatePosition,{positions:this._positions})}}get positionsShow(){let e=getCesiumValue(this._positions);return e instanceof Cesium__namespace.Rectangle&&(e=this.outlinePositions),e}get points(){const e={_0x548e4f:1047,_0x561a68:1428},t=_0x2397ca;if(this._positions instanceof Cesium__namespace.CallbackProperty){let x;this[t(1047)]?x=this[t(e._0x548e4f)]:(x=this[t(982)],this.style.closure&&x[t(3978)]());const i=[];x[t(1255)](function(s){const o=LngLatPoint.parse(s);o&&i.push(o)}),this._points=i}return!this._points&&(this[t(e._0x561a68)]=LngLatArray.toPoints(this._positions)),this._points}get coordinates(){return this.getCoordinates()}get rectangle(){const e={_0xaa20ca:1091},t=_0x2397ca;return Cesium__namespace.Rectangle.fromCartesianArray(this[t(e._0xaa20ca)])}getEntityPositions(){const e={_0xfad4d8:1091},t=_0x2397ca;return this.entityGraphic[t(e._0xfad4d8)]}_mountedHook(){}_updatePositionsHook(){const e={_0x583eab:3291},t=_0x2397ca;this._updateLabelPosition(),this[t(e._0x583eab)]()}_getGeoJsonGeometry(e){return{type:"LineString",coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}getCoordinates(e){const t=[];return this.points.forEach(x=>{t.push(x.toArray(e))}),t}isInPoly(e){const t=_0x2397ca,x=LngLatPoint.parse(e);return Cesium__namespace.Rectangle[t(741)](Cesium__namespace.Rectangle.fromCartesianArray(this.positionsShow),x.toCartographic())?isInPoly(x,this.coordinates):!1}autoSurfaceHeight(e={}){const t={_0x1081da:1091};return computeSurfacePoints({...e,map:this._map,positions:this.positionsShow}).then(x=>{const i=_0x3361;return!x.noHeight&&(this.positions=x[i(t._0x1081da)]),x})}clampToGround(e){return this[_0x2397ca({_0x694f05:3513}._0x694f05)](e)}[_0x2397ca(1941)](e){const t=_0x2397ca;return this._setPositionsToCallback(),e&&(this._positions_draw=LngLatArray[t(1169)](e)),this._positions_draw}_setPositionsToCallback(){const e={_0x51a875:1841},t=_0x2397ca;if(this._isCallbackPositions)return;this._isCallbackPositions=!0;let x=getCesiumValue(this._positions);x instanceof Cesium__namespace.PolygonHierarchy?x=x.positions:x instanceof Cesium__namespace.Rectangle&&(x=this.outlinePositions),this._positions_draw=x||this[t(982)]||[],this.positions=new Cesium__namespace.CallbackProperty(i=>this._positions_CallbackProperty(),!1),this[t(e._0x51a875)](),this.updateAttrForDrawing&&this.updateAttrForDrawing(!0),this._updateLabelPosition()}[_0x2397ca(3524)](){return this._positions_draw}_cancelPositionsCallback(){this._isCallbackPositions&&(this._isCallbackPositions=!1,this._positions=this._positions_draw,this._points=LngLatArray.toPoints(this._positions_draw),delete this._positions_draw,this._updatePositionsHook(),this._cancelOutlinePositionsCallback())}_startDrawHook(){const e={_0xd54ad9:533,_0x38634c:558},t=_0x2397ca;this[t(558)].on(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(558)].on(EventType.click,this[t(1230)],this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this.options[t(e._0xd54ad9)]??!0)&&this[t(e._0x38634c)].on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0x510cb4:3573,_0x156ee1:1230},t=_0x2397ca;this[t(558)][t(e._0x510cb4)](EventType.mouseMove,this._onMouseMoveHandler,this),this[t(558)].off(EventType[t(2031)],this[t(e._0x156ee1)],this),this[t(558)][t(e._0x510cb4)](this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!0)&&this._map.off(this._drawDelEventType,this._onRightClickHandler,this)}}class PointEntity extends BasePointEntity{get entityGraphic(){const e={_0x23d23b:2800},t=_0x2397ca;var x;return(x=this[t(773)])===null||x===void 0?void 0:x[t(e._0x23d23b)]}[_0x2397ca(2645)](){const e={_0x55a0f8:3044,_0x1d54d2:621,_0x488b16:2027,_0xd0dde8:1522,_0x327318:2066},t=_0x2397ca,x={position:this.position,point:PointStyleConver.toCesiumVal(this.style)};if(this.style.label&&(x[t(743)]=LabelStyleConver.toCesiumVal(this[t(357)].label,{},this[t(1578)])),this.options.billboard&&(x.billboard=BillboardStyleConver.toCesiumVal(this.options[t(824)],{},!0)),this.options.circle&&(x.ellipse=CircleStyleConver.toCesiumVal(this[t(e._0x55a0f8)].circle,{},!0)),this.options.model&&(x.orientation=this[t(e._0x1d54d2)](this[t(3044)].model),x.model=ModelStyleConver.toCesiumVal(this.options.model,{},!0)),this[t(e._0x55a0f8)][t(2875)]){var i,s;const r=PathStyleConver.toCesiumVal(this[t(e._0x55a0f8)].path,{},!0);!r.isAll&&(r.leadTime=0),x[t(2875)]=r;const c=(i=this.position)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times;if(c&&c[t(e._0x488b16)]>0){var o;const _=c[0];let l=c[c.length-1];((o=this[t(760)])===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace[t(3884)][t(330)]&&(l=Cesium__namespace[t(e._0xd0dde8)].fromDate(new Date(2100,1,1))),x[t(2166)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[t(e._0x327318)]({start:_,stop:l})])}}this[t(773)]=this._createEntity(x)}[_0x2397ca(856)](){const e={_0x4b7df2:743,_0xf17302:357,_0x866647:743},t=_0x2397ca;this._entity.label=this._entity[t(e._0x4b7df2)]||{},LabelStyleConver.toCesiumVal(this[t(e._0xf17302)][t(e._0x4b7df2)],this._entity[t(e._0x866647)],this.attr)}_updateStyleHook(e,t){PointStyleConver.toCesiumVal(e,this.entityGraphic)}_style2Json(e,t){return PointStyleConver.toJSON(e,t,!0)}[_0x2397ca(3535)](e,t){const x={_0x5041a4:2875,_0x509c92:2829},i=_0x2397ca;t[i(1243)]&&ModelStyleConver.toCesiumVal(e.model,this[i(773)].model,!0),t.billboard&&BillboardStyleConver.toCesiumVal(e[i(824)],this._entity[i(824)],!0),t.path&&PathStyleConver.toCesiumVal(e.path,this._entity[i(x._0x5041a4)],!0),t.circle&&CircleStyleConver[i(2868)](e[i(x._0x509c92)],this._entity.ellipse,!0)}[_0x2397ca(1018)](e){const t={_0x4e3113:3044,_0x2ecc73:1180,_0x3cb8ca:1243,_0x25a668:824,_0x4704cc:2875,_0x32c3d7:1180,_0x2fe140:2829},x=_0x2397ca;this[x(t._0x4e3113)].model&&(e.model={},ModelStyleConver[x(t._0x2ecc73)](this.options[x(t._0x3cb8ca)],e.model,!0)),this.options[x(t._0x25a668)]&&(e.billboard={},BillboardStyleConver.toJSON(this.options.billboard,e[x(824)],!0)),this.options.path&&(e[x(t._0x4704cc)]={},PathStyleConver[x(t._0x32c3d7)](this[x(3044)][x(t._0x4704cc)],e.path,!0)),this.options.circle&&(e.circle={},CircleStyleConver.toJSON(this.options[x(2829)],e[x(t._0x2fe140)],!0))}_updateExOpacity(e){const t={_0x3bc6db:396,_0x207f81:773,_0x18b862:2875,_0x15bc44:2829,_0x6861d0:773},x=_0x2397ca;this._entity[x(1243)]&&(this._entity[x(1243)].color=Cesium__namespace.Color.WHITE[x(t._0x3bc6db)](e)),this[x(t._0x207f81)].billboard&&(this._entity.billboard.color=Cesium__namespace.Color.WHITE.withAlpha(e)),this._entity.path&&!this[x(2359)](this._entity[x(t._0x18b862)],e)&&PathStyleConver.toCesiumVal({...this.options.path,globalAlpha:e},this._entity.path,!0),this._entity.circle&&!this._updateEntityOpacity(this._entity[x(t._0x15bc44)],e)&&CircleStyleConver.toCesiumVal({...this[x(3044)].circle,globalAlpha:e},this[x(t._0x6861d0)].ellipse,!0)}[_0x2397ca(1179)](){}}register$4("point",PointEntity,!0);class BillboardEntity extends BasePointEntity{get[_0x2397ca(2812)](){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t.billboard}get image(){return this[_0x2397ca(357)].image}set image(e){const t={_0x484e68:773,_0xd6823f:1437},x=_0x2397ca;this.style.image=e,this[x(773)]&&(this[x(t._0x484e68)].billboard[x(t._0xd6823f)]=e)}_mountedHook(){const e={_0x2157e5:357,_0x2a8b9b:639,_0x289c15:1034,_0x400856:2868,_0x5a79d1:3044,_0x38b4d1:2875,_0x4eaaee:760,_0x2542f2:330},t=_0x2397ca,x={position:this.position,billboard:BillboardStyleConver.toCesiumVal(this[t(357)])};if(this.style[t(743)]&&(Cesium__namespace.defined(this[t(e._0x2157e5)][t(1034)])&&!Cesium__namespace[t(e._0x2a8b9b)](this.style[t(743)][t(e._0x289c15)])&&(this.style.label.clampToGround=this.style.clampToGround),x.label=LabelStyleConver[t(e._0x400856)](this[t(e._0x2157e5)][t(743)],{},this.attr)),this.options[t(2800)]&&(x.point=PointStyleConver.toCesiumVal(this[t(e._0x5a79d1)].point,{},!0)),this[t(e._0x5a79d1)].circle&&(x.ellipse=CircleStyleConver[t(2868)](this.options.circle,{},!0)),this.options.model&&(x.orientation=this.getOrientation(this.options.model),x.model=ModelStyleConver[t(e._0x400856)](this.options.model,{},!0)),this.options.path){var i,s;const r=PathStyleConver[t(e._0x400856)](this.options.path,{},!0);!r.isAll&&(r[t(2197)]=0),x[t(e._0x38b4d1)]=r;const c=(i=this.position)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times;if(c&&c.length>0){var o;const _=c[0];let l=c[c.length-1];((o=this[t(e._0x4eaaee)])===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(e._0x2542f2)]&&(l=Cesium__namespace[t(1522)].fromDate(new Date(2100,1,1))),x.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:_,stop:l})])}}this._entity=this._createEntity(x)}_addLabel(){const e={_0x5439e9:773,_0xc49c39:743},t=_0x2397ca;this._entity.label=this[t(e._0x5439e9)].label||{},LabelStyleConver.toCesiumVal(this.style[t(e._0xc49c39)],this._entity.label,this[t(1578)])}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t,!0)}_updateStyleHook(e,t){BillboardStyleConver.toCesiumVal(e,this.entityGraphic)}_setOptionsHook(e,t){const x={_0x524b15:1243,_0x240155:2868,_0x5d675f:773,_0x4444d6:2875},i=_0x2397ca;t.model&&ModelStyleConver.toCesiumVal(e[i(x._0x524b15)],this[i(773)].model,!0),t.point&&PointStyleConver[i(x._0x240155)](e.point,this[i(x._0x5d675f)].point,!0),t[i(2875)]&&PathStyleConver.toCesiumVal(e[i(2875)],this._entity[i(x._0x4444d6)],!0),t.circle&&CircleStyleConver.toCesiumVal(e[i(2829)],this._entity[i(1613)],!0)}_updateExOpacity(e){const t={_0x12c628:773,_0x49b7aa:2134,_0x1cf009:3970,_0x551e56:2800,_0xa3a6ea:2800,_0x594129:2359,_0x2cea7a:2875,_0x571af2:773},x=_0x2397ca;this[x(t._0x12c628)].model&&(this[x(773)][x(1243)].color=Cesium__namespace[x(t._0x49b7aa)][x(t._0x1cf009)].withAlpha(e)),this._entity.point&&!this._updateEntityOpacity(this[x(t._0x12c628)].point,e)&&PointStyleConver.toCesiumVal({...this[x(3044)][x(t._0x551e56)],globalAlpha:e},this._entity[x(t._0xa3a6ea)],!0),this._entity.path&&!this[x(t._0x594129)](this._entity.path,e)&&PathStyleConver[x(2868)]({...this.options[x(2875)],globalAlpha:e},this._entity[x(t._0x2cea7a)],!0),this._entity.circle&&!this._updateEntityOpacity(this[x(t._0x571af2)][x(2829)],e)&&CircleStyleConver.toCesiumVal({...this.options[x(2829)],globalAlpha:e},this._entity.ellipse,!0)}_toJSON_Ex(e){const t={_0x6fd396:3044,_0xc3d42a:2800,_0x4e9131:2800},x=_0x2397ca;this[x(t._0x6fd396)].model&&(e.model={},ModelStyleConver.toJSON(this.options.model,e.model,!0)),this.options[x(t._0xc3d42a)]&&(e[x(t._0x4e9131)]={},PointStyleConver.toJSON(this.options.point,e.point,!0)),this.options.path&&(e[x(2875)]={},PathStyleConver.toJSON(this[x(3044)].path,e.path,!0)),this[x(t._0x6fd396)][x(2829)]&&(e[x(2829)]={},CircleStyleConver.toJSON(this.options.circle,e[x(2829)],!0))}_updateDistanceDisplayConditionByEdit(){}setOpacity(e){const t={_0x4b6d3e:3970},x=_0x2397ca;this[x(357)].globalAlpha=e,this._entity&&(this._entity.billboard.color=Cesium__namespace.Color[x(t._0x4b6d3e)][x(396)](e)),this._updateLabelOpacity(e)}startBounce(e={}){const t={_0x265c84:2665,_0x34e7fb:385,_0x62ade3:3069},x=_0x2397ca;if(!this._entity)return;let i=-(e.maxHeight||50);const s=e.step||1,o=e.autoStop;let r=i,c=-1;const _=this;function l(){r<=i&&c!==1?(c=1,o&&(i*=.55,s*2>=-i&&_.stopBounce())):r>=0&&c!==-1&&(c=-1),r+=s*c}const h=getCesiumValue(this.entityGraphic[x(t._0x265c84)],Cesium__namespace.Cartesian2)||new Cesium__namespace.Cartesian2(0,0),d=h.clone();if(this.entityGraphic[x(t._0x34e7fb)]=h,this[x(2812)].pixelOffset=new Cesium__namespace.CallbackProperty(u=>(l(),d.y=h.y+r,d)),this._entity.label){const u=getCesiumValue(this._entity.label.pixelOffset,Cesium__namespace.Cartesian2)||new Cesium__namespace.Cartesian2(0,0),m=u[x(t._0x62ade3)]();this._entity.label.pixelOffset_original=u,this[x(773)].label.pixelOffset=new Cesium__namespace.CallbackProperty(f=>(m.y=u.y+r,m))}}stopBounce(){const e={_0x237bc1:773},t=_0x2397ca;this.entityGraphic.pixelOffset=this[t(2812)].pixelOffset_original,this._entity[t(743)]&&(this[t(e._0x237bc1)][t(743)].pixelOffset=this._entity.label.pixelOffset_original)}}register$4("billboard",BillboardEntity,!0);class DivBillboardEntity extends BillboardEntity{_mountedHook(){const e=_0x2397ca;super._mountedHook(),this[e(157)]()}_updateStyleHook(e,t){delete e.image,super._updateStyleHook(e,t),t&&(t.html||t.iconSize||t.color)&&this._updateImage_delay()}_updateImage_delay(){const e={_0x26a2b0:1501},t={_0x28715d:1501},x=_0x2397ca;this.updateTimer&&clearTimeout(this.updateTimer),this[x(e._0x26a2b0)]=setTimeout(()=>{const i=x;delete this[i(t._0x28715d)],this._entity&&this._updateImage()},300)}_updateImage(){const e={_0x46ca1d:2598,_0x1b3ffc:290},t={_0x3d9b12:692},x={_0xcd3d38:692,_0x38f8bf:962},i=_0x2397ca,s=create$3("div","mars3d-hideDiv"),o=this.style[i(2384)];isString(o)?s[i(3437)]=o:o instanceof Element&&s.appendChild(o),document.body[i(e._0x46ca1d)](s),this[i(1268)]=!0,window[i(e._0x1b3ffc)]?window.domtoimage.toPng(s).then(r=>{const c=i;this.entityGraphic.image=""+r,document.body.removeChild(s),this[c(1268)]=!1,this.fire("image",{image:r})})[i(2443)](r=>{logError$1("未知原因，导出失败!",r),document.body.removeChild(s),this._islosdImg=!1}):window.html2canvas&&window[i(2857)](s,{backgroundColor:null,allowTaint:!0}).then(r=>{const c=i;this.entityGraphic.image=r,document[c(x._0xcd3d38)][c(x._0x38f8bf)](s),this._islosdImg=!1,this.fire("image",{canvas:r})}).catch(r=>{const c=i;logError$1("未知原因，导出失败!",r),document[c(t._0x3d9b12)].removeChild(s),this._islosdImg=!1})}}register$4("divBillboard",DivBillboardEntity,!0);class FontBillboardEntity extends DivBillboardEntity{[_0x2397ca(2510)](){const e={_0x2c0dc0:3031,_0x4b31c1:3022,_0x57fb71:290,_0x51e128:2857,_0x1bfd37:2443},t={_0xb75fb:962},x={_0x2d08f5:1437,_0x93223b:1437},i={_0x176989:1437},s=_0x2397ca,o=this.style.iconSize??50,r=this.style.iconPadding??10,c=this.style.color??"#ff0000",_=create$3("div","mars3d-hideDiv");_[s(e._0x2c0dc0)](s(357),"padding: "+r+"px;text-align:center;max-width:"+o+s(1542)+o+s(e._0x4b31c1));const l=document.createElement("i");l.setAttribute(s(2519),this.style.iconClass),l.setAttribute("style","font-size:"+o+"px;color:"+c+";"),_[s(2598)](l),document[s(692)].appendChild(_),this._islosdImg=!0,window[s(e._0x57fb71)]?window.domtoimage.toPng(_).then(h=>{const d=s;this.entityGraphic.image=""+h,document.body.removeChild(_),this._islosdImg=!1,this.fire(d(i._0x176989),{image:h})})[s(2443)](h=>{logError$1(s(1434),h),document.body.removeChild(_),this._islosdImg=!1}):window.html2canvas&&window[s(e._0x51e128)](_,{backgroundColor:null,allowTaint:!0})[s(1286)](h=>{const d=s;this.entityGraphic[d(x._0x2d08f5)]=h,document.body.removeChild(_),this._islosdImg=!1,this[d(1788)](d(x._0x93223b),{canvas:h})})[s(e._0x1bfd37)](h=>{const d=s;logError$1("未知原因，导出失败!",h),document.body[d(t._0xb75fb)](_),this._islosdImg=!1})}}register$4("fontBillboard",FontBillboardEntity,!0);class LabelEntity extends BasePointEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.label}get[_0x2397ca(743)](){return this._entity?this._entity.label:this.style}get text(){return this[_0x2397ca({_0x347774:357}._0x347774)].text}set text(e){const t={_0x291b85:773},x=_0x2397ca;this.style.text=e,this[x(t._0x291b85)]&&(this[x(2812)].text=e)}[_0x2397ca(2645)](){const e=_0x2397ca,t={position:this[e(760)],label:LabelStyleConver[e(2868)](this[e(357)])};this._entity=this._createEntity(t),this._bindMorphComplete()}[_0x2397ca(380)](){const e={_0x2086d2:380},t=_0x2397ca;super[t(e._0x2086d2)](),this[t(3094)]()}_addLabel(){}[_0x2397ca(198)](e,t){return LabelStyleConver[_0x2397ca(1180)](e,t,!0)}_updateStyleHook(e,t){const x={_0xc22d79:2868,_0x46f9d8:639,_0x1f1047:3238},i=_0x2397ca;LabelStyleConver[i(x._0xc22d79)](e,this.entityGraphic),Cesium__namespace[i(x._0x46f9d8)](t.clampToGround)&&(this._bindMorphComplete(),this[i(x._0x1f1047)]())}[_0x2397ca(1179)](){}_bindMorphComplete(){const e={_0x2e62da:3238},t=_0x2397ca;this._unbindMorphComplete(),this.style.clampToGround&&this[t(558)].on(EventType.morphComplete,this[t(e._0x2e62da)],this)}_unbindMorphComplete(){this[_0x2397ca(558)].off(EventType.morphComplete,this._map_morphCompleteHandler,this)}_map_morphCompleteHandler(e){const t={_0x2411f1:357,_0x73c9de:1034},x=_0x2397ca;this._map.scene.mode===Cesium__namespace[x(1721)][x(3114)]?this.entityGraphic.heightReference=Cesium__namespace.HeightReference.NONE:this[x(2812)][x(3102)]=this[x(t._0x2411f1)][x(t._0x73c9de)]?Cesium__namespace.HeightReference.CLAMP_TO_GROUND:Cesium__namespace[x(3161)].NONE}startBounce(e={}){const t={_0x31d701:385,_0x44a814:428},x=_0x2397ca;if(!this._entity)return;let i=-(e.maxHeight||50);const s=e[x(3151)]||1,o=e.autoStop;let r=i,c=-1;const _=this;function l(){r<=i&&c!==1?(c=1,o&&(i*=.55,s*2>=-i&&_.stopBounce())):r>=0&&c!==-1&&(c=-1),r+=s*c}const h=getCesiumValue(this.entityGraphic.pixelOffset,Cesium__namespace.Cartesian2)||new Cesium__namespace.Cartesian2(0,0),d=h.clone();this[x(2812)][x(t._0x31d701)]=h,this[x(2812)][x(2665)]=new Cesium__namespace[x(t._0x44a814)](u=>(l(),d.y=h.y+r,d))}stopBounce(){const e=_0x2397ca;this[e(2812)].pixelOffset=this.entityGraphic.pixelOffset_original}setOpacity(e){const t={_0x510583:2732},x=_0x2397ca;this.style.globalAlpha=e,this[x(773)]&&LabelStyleConver[x(t._0x510583)](this.entityGraphic,e)}}register$4("label",LabelEntity,!0);class CanvasLabelEntity extends BillboardEntity{_mountedHook(){const e=_0x2397ca;super[e(2645)](),this._updateImage_delay(this.style)}[_0x2397ca(3883)](e){const t=_0x2397ca;var x,i;return Cesium__namespace.defined(e==null||(x=e[t(824)])===null||x===void 0?void 0:x.image)&&delete e.billboard[t(1437)],Cesium__namespace.defined(e==null||(i=e.billboard)===null||i===void 0?void 0:i[t(1089)])&&delete e.billboard.color,e}[_0x2397ca(353)](e,t){const x={_0x4cab34:1437},i=_0x2397ca,s={...e};delete s[i(x._0x4cab34)],delete s.color,super._updateStyleHook(s,t),this._updateImage_delay(e)}_updateImage_delay(e){const t={_0x529872:1501,_0xa38e6d:1501},x=_0x2397ca;this.updateTimer&&clearTimeout(this[x(t._0x529872)]),this[x(t._0xa38e6d)]=setTimeout(()=>{const i=x;delete this.updateTimer,this[i(773)]&&this._updateImage(e)},100)}_updateImage(e){const t={_0x13be8a:2868},x=_0x2397ca,i=LabelStyleConver[x(t._0x13be8a)](e),s=getTextImage(i.text,i);s&&(this.entityGraphic.image=s)}}register$4("canvasLabel",CanvasLabelEntity,!0);class EditCircle extends EditPoly{[_0x2397ca(239)](){const e={_0x24b901:3781,_0x447958:1337,_0x2329cd:558},t={_0x4a5bc4:1154,_0xbe25e8:2027},x={_0x21ed38:1379,_0x2cbc4d:3645,_0x4c5e10:357,_0x31ee79:357},i={_0x91d51:1390},s={_0x2e6796:2812,_0x5e240e:1379},o={_0x57737e:1390,_0x352418:3482},r=_0x2397ca,c=this.positions,_=this.updatePositionsHeightByAttr(c[0]),l=this._map.clock.currentTime,h=getEllipseOuterPositions({position:_,semiMajorAxis:getCesiumValue(this.entityGraphic[r(e._0x24b901)],Number,l),semiMinorAxis:getCesiumValue(this.entityGraphic.semiMinorAxis,Number,l),rotation:getCesiumValue(this.entityGraphic.rotation,Number,l)??0,count:1}),d=this.updatePositionsHeightByAttr(h[1]);c[1]=d;const u=this.createDragger({position:d,type:PointType.EditAttr,tooltip:this._map[r(e._0x447958)]("_修改半径"),onDragStart:(f,g)=>{const b=r;if(this._heightDraggers)for(let y=0,C=this[b(o._0x57737e)].length;y<C;y++)this._heightDraggers[y][b(o._0x352418)]=!1},onDrag:(f,g)=>{const b=r;if(this.entityGraphic.height!==void 0){const C=getCesiumValue(this.entityGraphic.height,Number,l);g=setPositionsHeight(g,C),f.position=g}c[f.index]=g;const y=this[b(3794)](Cesium__namespace.Cartesian3.distance(c[0],g),2);this.entityGraphic.semiMajorAxis=y,this._graphic[b(2770)]===3||!Cesium__namespace.defined(this.style.radius)?this.style[b(3781)]=y:(this[b(s._0x2e6796)][b(s._0x5e240e)]=y,this.style.radius=y),this.fire(EventType.editStyle)},onDragEnd:(f,g)=>{this.updateDraggers()}});u.index=1,this.draggers.push(u);let m;if(this._graphic._maxPointNum===3){const f=this.updatePositionsHeightByAttr(h[0]);c[2]=f,m=this.createDragger({position:f,type:PointType.EditAttr,tooltip:this[r(e._0x2329cd)].getLangText("_修改半径"),onDragStart:(g,b)=>{const y=r;if(this._heightDraggers)for(let C=0,v=this._heightDraggers.length;C<v;C++)this[y(i._0x91d51)][C].show=!1},onDrag:(g,b)=>{const y=r;if(this[y(2812)][y(3872)]!==void 0){const M=getCesiumValue(this[y(2812)].height,Number,l);b=setPositionsHeight(b,M),g.position=b}c[g.index]=b;let C=this.formatNum(Cesium__namespace.Cartesian3.distance(c[0],b),2);const v=getCesiumValue(this.entityGraphic.semiMajorAxis,Number,l);C>v&&(C=v),this.entityGraphic[y(x._0x21ed38)]=C,this[y(x._0x2cbc4d)]._maxPointNum===3||!Cesium__namespace.defined(this.style[y(3189)])?this[y(x._0x4c5e10)][y(1379)]=C:(this.entityGraphic.semiMajorAxis=C,this[y(x._0x31ee79)].radius=C),this.fire(EventType.editStyle)},onDragEnd:(g,b)=>{this.updateDraggers()}}),m.index=2,this[r(1154)].push(m)}if(this._graphic._hasMoveEdit){const f=this.createDragger({position:_,onDragStart:(g,b)=>{const y=r;for(let C=0,v=this[y(t._0x4a5bc4)][y(t._0xbe25e8)];C<v;C++)this.draggers[C].show=!1},onDrag:(g,b)=>{c[0]=b},onDragEnd:(g,b)=>{this.updateDraggers()}});f.index=0,this[r(1154)].push(f),f.majorDragger=u,f.minorDragger=m}if(this.entityGraphic[r(3791)]){const f=this._graphic._maxPointNum===3?[c[1],c[2]]:[c[1]];this._bindHeightDraggers(f)}}[_0x2397ca(1646)](e){const t={_0x568820:3703},x=_0x2397ca;if(this.clampToGround&&(e=getSurfacePosition(this._map.scene,e)),this.entityGraphic.height!==void 0){const i=getCesiumValue(this.entityGraphic.height,Number,this._map[x(t._0x568820)].currentTime);e=setPositionsHeight(e,i)}return e}_updateStyleHook(e){const t={_0x4eb4ae:639},x=_0x2397ca;super[x(353)](e),(Cesium__namespace[x(639)](e.radius)||Cesium__namespace[x(t._0x4eb4ae)](e.semiMinorAxis)||Cesium__namespace.defined(e.semiMajorAxis)||Cesium__namespace.defined(e.height)||Cesium__namespace.defined(e.diffHeight))&&this.updateDraggers()}[_0x2397ca(2244)](e){}}class CircleEntity extends BasePointEntity{constructor(e={}){const t={_0x46d3f6:3044},x=_0x2397ca;super(e),this[x(916)]=2,this._maxPointNum=2,this._hasMoveEdit=e.hasMoveEdit??!0,this._clampToGround_reload=!0,this[x(t._0x46d3f6)].drawShowRadius=this[x(3044)].drawShowRadius??!0}get entityGraphic(){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t.ellipse}get EditClass(){return EditCircle}get outlinePositions(){const e={_0x1bdda5:2480,_0x1f5aa0:3304},t=_0x2397ca;return this._entity&&(this[t(e._0x1bdda5)]=this[t(e._0x1f5aa0)]()),this[t(2480)]}set outlinePositions(e){this._outlinePositions=e}get outlineCoordinates(){return cartesians2lonlats(this.outlinePositions)}get distance(){return Math.PI*2*this.radius}get area(){const e=_0x2397ca,t=this[e(3189)];return Math.PI*t*t}get radius(){const e={_0x5ceb5b:357},t=_0x2397ca;var x;return this.style.radius?this[t(e._0x5ceb5b)].radius:getCesiumValue((x=this.entityGraphic)===null||x===void 0?void 0:x.semiMajorAxis,Number,Cesium__namespace.JulianDate.now())}set[_0x2397ca(3189)](e){const t={_0x2b8602:357,_0x6a800f:2812},x=_0x2397ca;this[x(t._0x2b8602)].radius=e,this[x(t._0x6a800f)]&&(this.entityGraphic[x(3781)]=e,this.entityGraphic.semiMinorAxis=e,this._updateOutlineStyle(this._getOutlinePositions(),this.style))}get[_0x2397ca(3872)](){var e;return this.style.height?this.style.height:getCesiumValue((e=this.entityGraphic)===null||e===void 0?void 0:e.height,Number)??0}set height(e){const t=_0x2397ca;this.style.height=e,this.entityGraphic&&(this.entityGraphic[t(3872)]=e)}_mountedHook(){const e={_0x595a8f:743,_0x5b327b:639,_0x432922:357,_0x180f10:1578,_0x26a216:773},t=_0x2397ca,x={position:this.position,ellipse:CircleStyleConver.toCesiumVal(this.style,{},!0)},i=this.style[t(e._0x595a8f)];i&&(Cesium__namespace[t(e._0x5b327b)](this[t(e._0x432922)].clampToGround)&&!Cesium__namespace.defined(i.clampToGround)&&(i.clampToGround=this.style.clampToGround),Cesium__namespace.defined(i.setHeight)||Cesium__namespace[t(639)](i.addHeight)?this._addLabel():x[t(743)]=LabelStyleConver.toCesiumVal(this.style[t(e._0x595a8f)],{},this[t(e._0x180f10)])),this[t(e._0x26a216)]=this._createEntity(x),this._updateHeight(),this._updateOutlineStyle(this._getOutlinePositions(),this.style),(this.position instanceof Cesium__namespace.CallbackProperty||this.position instanceof Cesium__namespace[t(3387)])&&this._updateOutlineToCallback()}_addLabel(){const e={_0x279769:856,_0x33567d:1578},t=_0x2397ca,x=this.style.label;if(Cesium__namespace.defined(x.setHeight)||Cesium__namespace.defined(x.addHeight)){var i;(i=this._entity)!==null&&i!==void 0&&i.label&&(this._entity.label.show=!1),super[t(e._0x279769)]()}else this._entity.label=this._entity.label||{},LabelStyleConver[t(2868)](this.style.label,this._entity.label,this[t(e._0x33567d)])}_style2Json(e,t){return CircleStyleConver[_0x2397ca(1180)](e,t,!0)}toGeoJSON(e){return super.toGeoJSON(e)}_getGeoJsonGeometry(e){const t={_0x3b0075:3472,_0x5b0cde:3088,_0x15a03e:2381,_0x34fd41:2381},x=_0x2397ca;return e!=null&&e[x(t._0x3b0075)]?{type:"Polygon",coordinates:[this.getOutlineCoordinates(e==null?void 0:e.closure,e==null?void 0:e[x(t._0x5b0cde)],e==null?void 0:e[x(t._0x15a03e)])]}:{type:"Point",coordinates:this[x(746)](e==null?void 0:e[x(t._0x34fd41)])}}_updateStyleHook(e,t){const x={_0x3238ec:3872,_0x1bb566:2738,_0xbc06ac:639,_0x1baf0b:1034,_0x3d68b4:743},i=_0x2397ca;if(CircleStyleConver.toCesiumVal(e,this.entityGraphic,!0),(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace.defined(t[i(x._0x3238ec)]))&&this[i(x._0x1bb566)](),t!=null&&t.label)if(Cesium__namespace[i(x._0xbc06ac)](e[i(x._0x1baf0b)])&&!Cesium__namespace.defined(e.label.clampToGround)&&(e.label.clampToGround=e[i(x._0x1baf0b)]),Cesium__namespace.defined(e[i(743)].setHeight)||Cesium__namespace[i(639)](e.label.addHeight)){var s;(s=this._entity)!==null&&s!==void 0&&s.label&&(this[i(773)].label.show=!1),this._addLabel()}else this._entity.label=this._entity[i(x._0x3d68b4)]||{},LabelStyleConver.toCesiumVal(e.label,this._entity.label,this.attr)}_updatePositionsHook(){const e={_0x39a3ae:3291},t=_0x2397ca;this._entity.position=this.position,this._updateHeight(),this._updateOutlineStyle(this._getOutlinePositions(),this.style),this._updateLabelPosition(),this[t(e._0x39a3ae)]()}_getOutlinePositions(){return[this[_0x2397ca({_0x1fc022:649}._0x1fc022)]]}[_0x2397ca(3394)](){const e={_0x247680:760},t={_0xa2cafc:2027},x=_0x2397ca;this._isCallbackPositions||(this._isCallbackPositions=!0,this._positions_draw=this[x(1091)]||[],this[x(e._0x247680)]=new Cesium__namespace.CallbackProperty(i=>{const s=x;return this._positions_draw[s(t._0xa2cafc)]<1?null:this._positions_draw[0]},!1),this._updateOutlineToCallback())}[_0x2397ca(1182)](){const e={_0xc156d7:2145},t=_0x2397ca;this[t(449)]&&(this[t(449)]=!1,this[t(1173)]=this._positions_draw[0],this[t(1556)]=LngLatPoint[t(e._0xc156d7)](this._position),this._updatePositionsHook())}[_0x2397ca(2738)](){const e={_0x494390:2437,_0x33bda7:2812,_0x34b45c:3820},t=_0x2397ca;var x;if(this[t(357)].clampToGround)return;let i=this._position;if(((x=this._positions_draw)===null||x===void 0?void 0:x.length)>0&&(i=this[t(1047)][0]),!i)return;const s=this[t(357)].height??LngLatPoint[t(2145)](i).alt;this.entityGraphic.height=s,Cesium__namespace[t(639)](this.style.diffHeight)&&(Cesium__namespace.defined(this[t(357)].diffHeight)&&this.style.diffHeight!==0?this.entityGraphic.extrudedHeight=s+this.style[t(e._0x494390)]:this[t(e._0x33bda7)].extrudedHeight=void 0),this.fire(EventType[t(e._0x34b45c)])}_startDrawHook(){const e={_0x1c9cd0:1174,_0x549884:1925},t=_0x2397ca;this._map.on(EventType.mouseMove,this[t(e._0x1c9cd0)],this),this[t(558)].on(EventType.click,this._onClickHandler,this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!0)&&this._map.on(this[t(e._0x549884)],this._onRightClickHandler,this)}_stopDrawHook(){const e={_0x3104b0:3573,_0x1df8b2:3573},t=_0x2397ca;this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(558)][t(e._0x3104b0)](EventType.click,this._onClickHandler,this),this._map.off(this._drawEndEventType,this._onDbClickHandler,this),(this.options[t(533)]??!0)&&this._map[t(e._0x1df8b2)](this._drawDelEventType,this._onRightClickHandler,this)}_showDrawMouseMoveSmallTooltip(e){const t={_0x1cd55e:4050,_0xd0d529:1882},x=_0x2397ca;if(this._positions_draw.length<=1){this._map.openSmallTooltip(e[x(t._0x1cd55e)],this._map.getLangText(x(2982)));return}let i="";if(this.options.drawShowRadius&&this[x(1047)].length>0&&e.cartesian){const s=Cesium__namespace.Cartesian3.distance(this._positions_draw[0],e.cartesian);s>0&&(i=x(1370)+formatDistance(s)+"<br />")}this._map[x(t._0xd0d529)](e.endPosition,i+this._map.getLangText("_单击完成绘制"))}updateAttrForDrawing(e){const t={_0xed7592:3189},x=_0x2397ca;if(!(this._positions_draw.length<2)){if(this._updateHeight(),!e){const i=formatNum$1(Cesium__namespace.Cartesian3.distance(this[x(1047)][0],this[x(1047)][1]),2);if(i<1)return;if(this._maxPointNum===3){let s=i,o=i;if(this._positions_draw.length===3&&(o=formatNum$1(Cesium__namespace.Cartesian3[x(230)](this._positions_draw[0],this._positions_draw[2]),2)),s>o){const r=s;s=o,o=r}this.entityGraphic.semiMajorAxis=o,this.entityGraphic[x(1379)]=s,this.style[x(3781)]=o,this.style.semiMinorAxis=s}else this.entityGraphic.semiMajorAxis=i,this.entityGraphic[x(1379)]=i,this.style[x(t._0xed7592)]=i}this[x(3274)]&&(this[x(2480)]=this.getOutlinePositions(),this._updateOutlineToCallback())}}_onRightClickHandler(e){const t={_0x18d77c:2812,_0x2b7376:3781},x=_0x2397ca;super._onRightClickHandler(e),this[x(t._0x18d77c)][x(t._0x2b7376)]=0,this.entityGraphic.semiMinorAxis=0,this.style.radius=0}getOutlinePositions(e=!0,t){const x={_0x500013:760},i=_0x2397ca;var s,o,r,c;const _=Cesium__namespace.JulianDate.now(),l=getEllipseOuterPositions({position:getPositionValue(this._entity[i(x._0x500013)]),semiMajorAxis:getCesiumValue((s=this._entity.ellipse)===null||s===void 0?void 0:s.semiMajorAxis,Number,_),semiMinorAxis:getCesiumValue((o=this._entity.ellipse)===null||o===void 0?void 0:o.semiMinorAxis,Number,_),rotation:getCesiumValue((r=this[i(773)].ellipse)===null||r===void 0?void 0:r.rotation,Number,_)??0,granularity:getCesiumValue((c=this._entity.ellipse)===null||c===void 0?void 0:c.granularity,Number,_),count:t});if(e&&l){var h;l[i(2434)](l[0]),(this.style.outlineWidth>4||((h=this.style.outlineStyle)===null||h===void 0?void 0:h[i(1526)])>4)&&l.push(l[1])}return l}getOutlineCoordinates(e,t,x){return cartesians2lonlats(this.getOutlinePositions(e,t),x)}_getOutlineStyle(e,t){const x=super._getOutlineStyle(e,t);return x.arcType=Cesium__namespace.ArcType.RHUMB,x}getRectangle(e){const t={_0x2439c0:3768},x=_0x2397ca,i=this.getOutlinePositions(!1,1);return!i||i.length===0?void 0:getRectangle(i,e==null?void 0:e[x(t._0x2439c0)])}[_0x2397ca(2556)](e){return e=LngLatPoint[_0x2397ca(1364)](e).toCartesian(),e=setPositionsHeight(e,this.height),Cesium__namespace.Cartesian3.distance(this.positionShow,e)<=this.radius}flyTo(e={}){const t={_0x303213:3863,_0x536453:3189},x=_0x2397ca;return this[x(558)]?(e.radius=this[x(t._0x536453)]*2*(e.scale||1.8),this[x(558)].flyToPoint(this.point,e)):Promise[x(t._0x303213)](!1)}}register$4("circle",CircleEntity,!0);class EditModel extends EditBase{get[_0x2397ca(760)](){return this._graphic._position_draw}set position(e){const t={_0xb958c6:578},x=_0x2397ca;this._graphic[x(t._0xb958c6)]=e}updatePositionsHeightByAttr(e){return this[_0x2397ca(1034)]&&(e=getSurfacePosition(this._map.scene,e)),e}[_0x2397ca(239)](){const e={_0x21876f:1646,_0x148926:2090,_0x34fd68:428,_0x2a7d63:1175,_0x4f034f:1337,_0x32af4f:1603,_0x12fbb8:1154},t={_0x35fd28:4009},x={_0x537251:295,_0xbc5539:357,_0x4c8d65:2812,_0x2bcdd9:3189},i={_0x25368:598,_0xf51e7b:3482,_0x3a8f92:1154},s={_0x177b74:1722},o={_0x2757a0:760},r={_0x1ccbbf:2027},c=_0x2397ca;this[c(3645)][c(2679)]=this._map.getLangText("_拖动该点后")+"<br/>"+this._map.getLangText("_修改位置"),this.createDragger({dragger:this._graphic,onDragStart:(d,u)=>{const m=c;for(let f=0,g=this.draggers[m(r._0x1ccbbf)];f<g;f++)this[m(1154)][f].show=!1},onDrag:(d,u)=>{const m=c;this[m(o._0x2757a0)]=u},onDragEnd:(d,u)=>{this.updateDraggers()}});const _=this.style.radius,l=this[c(e._0x21876f)](this.position),h=Cesium__namespace[c(1899)].fromCartesian(l).height;if(this._hasEditHeading){this.entityAngle=new CircleEntity({name:c(e._0x148926),position:new Cesium__namespace[c(e._0x34fd68)](m=>l,!1),style:{fill:!1,outline:!0,outlineColor:"#ffff00",outlineOpacity:.8,radius:_,height:h},private:!0}),this[c(2407)].addGraphic(this.entityAngle);const d=getPositionByDirectionAndLen(l,this.style.heading,_),u=this.createDragger({position:d,type:PointType[c(e._0x2a7d63)],tooltip:this._map[c(e._0x4f034f)](c(e._0x32af4f)),onDrag:(m,f)=>{const g=c,b=getAngle(l,f);this.style[g(s._0x177b74)]=formatNum$1(b,2),m.position=getPositionByDirectionAndLen(l,this.style.heading,this.style.radius),this[g(3645)].updateOrientation(l)}});this[c(e._0x12fbb8)].push(u)}if(this._hasEditScale){const d=addPositionsHeight(l,_),u=this.createDragger({position:d,type:PointType.MoveHeight,tooltip:this._map.getLangText("_修改缩放比例"),onDragStart:(m,f)=>{const g=c;this.entityAngle&&(this[g(i._0x25368)][g(i._0xf51e7b)]=!1);for(let b=0,y=this[g(i._0x3a8f92)].length;b<y;b++)this.draggers[b].show=!1},onDrag:(m,f)=>{const g=c,b=Cesium__namespace[g(x._0x537251)].distance(f,l),y=m.radius/(this.style.scale||1);let C=formatNum$1(b/y,3);isNaN(C)||(C<=0&&(C=.001),this[g(x._0xbc5539)][g(1760)]=C,this[g(x._0x4c8d65)].scale=C,m.radius=b,this.style[g(x._0x2bcdd9)]=b)},onDragEnd:(m,f)=>{this[c(t._0x35fd28)](),this.fire(EventType.editStyle)}});u.radius=_,this[c(1154)].push(u)}}destroyDraggers(){const e=_0x2397ca;super.destroyDraggers(),this.entityAngle&&(this[e(2407)].removeGraphic(this.entityAngle,!0),delete this.entityAngle)}[_0x2397ca(3740)](e){const t={_0x94b423:3740,_0x6527c2:3044,_0x4562d5:3645,_0x3d1d1a:558,_0x51ef89:1337},x={_0xb91649:229},i={_0x4656d6:3270},s={_0x49c401:598},o=_0x2397ca,r=super[o(t._0x94b423)](e);return(this[o(357)].hasEditRotate??!0)&&(r.push({text:this._map.getLangText("_按轴旋转"),icon:Icon.BloomEffectYes,show:c=>{const _=o;return!this[_(3888)]||this._matrixRotate[_(3270)]!==e.index},callback:c=>{const _=o;this.entityAngle&&(this.layer.removeGraphic(this.entityAngle,!0),delete this[_(s._0x49c401)],this._hasEditHeading=!1,this.updateDraggers()),this.startRotateMatrix(c.graphic,c)}}),r.push({text:this._map.getLangText("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:c=>{const _=o;return this[_(3888)]&&this._matrixRotate[_(i._0x4656d6)]===e.index},callback:c=>{this.stopRotateMatrix()}})),!Cesium__namespace.defined(this._hasEditHeading)&&(this._hasEditHeading=this._graphic[o(t._0x6527c2)].hasEditHeading??!1),r.push({text:"编辑方向",icon:Icon.DrawCircle,show:c=>!this._hasEditHeading,callback:c=>{this.stopRotateMatrix(),this._hasEditHeading=!0,this.updateDraggers()}}),r.push({text:"停止编辑方向",icon:Icon.DrawCircle,show:c=>this[o(3182)],callback:c=>{const _=o;this[_(3182)]=!1,this.updateDraggers()}}),!Cesium__namespace[o(639)](this._hasEditScale)&&(this._hasEditScale=this[o(t._0x4562d5)].options.hasEditScale??!1),r.push({text:this[o(t._0x3d1d1a)].getLangText("_调整比例"),icon:Icon.UndergroundYes,show:c=>!this._hasEditScale,callback:c=>{const _=o;this._hasEditScale=!0,this[_(4009)]()}}),r.push({text:this[o(558)][o(t._0x51ef89)]("_停止调整比例"),icon:Icon.UndergroundNo,show:c=>this[o(x._0xb91649)],callback:c=>{this._hasEditScale=!1,this.updateDraggers()}}),r}finish(){const e={_0x432edc:3142,_0x16b5e9:3645},t=_0x2397ca;delete this[t(3645)]._draw_tooltip,delete this._graphic._isDragger,delete this._graphic._noMousePick,delete this._graphic[t(e._0x432edc)],delete this._graphic.onDrag,this[t(e._0x16b5e9)].unbindContextMenu()}}class ModelEntity extends BasePointEntity{constructor(e={}){const t=_0x2397ca;e.drawShow=e.drawShow??!0,super(e),this.style.radius=this[t(357)].radius??50,this._readyPromise=Cesium__namespace.defer()}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.model}get EditClass(){return EditModel}get[_0x2397ca(1760)](){return this[_0x2397ca(357)].scale??1}set scale(e){const t={_0x28532b:357,_0x37e1ed:1760,_0x5b83f7:353},x=_0x2397ca;this[x(t._0x28532b)][x(t._0x37e1ed)]=e,this[x(t._0x5b83f7)](this.style,{scale:e})}get readyPromise(){return this._readyPromise.promise}_mountedHook(){const e={_0x1f7128:743,_0x5eaa4e:1034,_0x3cec96:440,_0x9b858f:2841,_0xf3ea0c:357,_0x5a4105:824,_0x96e33b:1613,_0x8b53b:357,_0x928f7d:450,_0x581a9e:3082},t={_0x5b5566:3421,_0x224d11:3189,_0x581e88:968},x=_0x2397ca,i={occlusion:this.style.marsOcclusion};isMars3DCesium&&(this.loadOk=!1,this[x(2679)]=this._map.getLangText("_加载模型中"),this.fire(EventType.loadBefore,{url:this.options.url}),i[x(2459)]=(l,h)=>{const d=x;delete this._draw_tooltip,this.loadOk=!0,this._model=h,h.boundingSphere.radius<(this.style[d(t._0x5b5566)],1e3)&&(this.style.radius=h.boundingSphere[d(t._0x224d11)]),this.fire(EventType.load,{drawtype:this[d(t._0x581e88)],entity:l,model:h,graphic:this},!0),this._readyPromise[d(3863)](this)});const s={position:this.position,orientation:this.getOrientation(),model:ModelStyleConver.toCesiumVal(this.style,{},!0)};!s.model.uri&&this.options[x(914)]&&(s.model.uri=this.options.url,s.model.show=!0);const o=this.style[x(e._0x1f7128)];if(o&&(Cesium__namespace.defined(this.style.clampToGround)&&!Cesium__namespace.defined(o.clampToGround)&&(o.clampToGround=this.style[x(e._0x5eaa4e)]),Cesium__namespace.defined(o[x(e._0x3cec96)])||Cesium__namespace.defined(o[x(e._0x9b858f)])?this._addLabel():s.label=LabelStyleConver.toCesiumVal(this[x(e._0xf3ea0c)].label,{},this.attr)),this.options[x(824)]&&(s[x(e._0x5a4105)]=BillboardStyleConver[x(2868)](this.options.billboard,{},!0)),this.options.point&&(s[x(2800)]=PointStyleConver.toCesiumVal(this[x(3044)].point,{},!0)),this.options[x(2829)]&&(s[x(e._0x96e33b)]=CircleStyleConver.toCesiumVal(this.options.circle,{},!0)),this.options.path){var r,c;const l=PathStyleConver.toCesiumVal(this.options.path,{},!0);!l.isAll&&(l.leadTime=0),s.path=l;const h=(r=this[x(760)])===null||r===void 0||(c=r._property)===null||c===void 0?void 0:c._times;if(h&&h.length>0){var _;const d=h[0];let u=h[h.length-1];((_=this[x(760)])===null||_===void 0?void 0:_.forwardExtrapolationType)===Cesium__namespace[x(3884)].HOLD&&(u=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),s.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:d,stop:u})])}}this[x(357)][x(169)]&&(this[x(357)][x(1564)]?(s.point=PointStyleConver.toCesiumVal(this.style.distanceDisplayPoint),s.point.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this[x(e._0x8b53b)].distanceDisplayPoint)):this[x(357)][x(e._0x928f7d)]&&(s.billboard=BillboardStyleConver[x(2868)](this.style.distanceDisplayBillboard),s[x(824)].distanceDisplayCondition=this[x(e._0x581a9e)](this.style.distanceDisplayBillboard))),s.model.marsOptions=i,this._entity=this._createEntity(s)}[_0x2397ca(380)](){this.rotateStop(),super._removedHook()}_style2Json(e,t){const x={_0x2011e2:1180,_0x1dc914:450,_0x92fa45:1180},i=_0x2397ca,s=ModelStyleConver.toJSON(e,t,!0);return this.style.distanceDisplayPoint?s.distanceDisplayPoint=PointStyleConver[i(x._0x2011e2)](this.style.distanceDisplayPoint,{},!0):this.style.distanceDisplayBillboard&&(s[i(x._0x1dc914)]=BillboardStyleConver[i(x._0x92fa45)](this.style[i(x._0x1dc914)],{},!0)),s}_updateStyleHook(e,t){const x={_0x39920f:639,_0x16d4b1:743},i=_0x2397ca;if(t!=null&&t.url&&(this.loadOk=!1,this.entityGraphic._readyOk=!1,this.fire(EventType.loadBefore,{url:t==null?void 0:t.url})),this._entity.orientation=this.getOrientation(),ModelStyleConver.toCesiumVal(e,this[i(2812)],!0),t!=null&&t[i(743)])if(Cesium__namespace.defined(e[i(1034)])&&!Cesium__namespace[i(x._0x39920f)](e.label.clampToGround)&&(e.label.clampToGround=e.clampToGround),Cesium__namespace.defined(e[i(743)].setHeight)||Cesium__namespace.defined(e.label.addHeight)){var s;(s=this[i(773)])!==null&&s!==void 0&&s[i(743)]&&(this._entity.label.show=!1),this._addLabel()}else this._entity.label=this._entity.label||{},LabelStyleConver.toCesiumVal(e[i(x._0x16d4b1)],this._entity.label,this[i(1578)])}_updatePositionsHook(){const e={_0x5ef5c1:325,_0x20fe37:1579,_0x431ae5:4001},t=_0x2397ca;if(super[t(e._0x5ef5c1)](),this._entity.path){var x,i;const o=(x=this.position)===null||x===void 0||(i=x[t(2062)])===null||i===void 0?void 0:i._times;if(o&&o.length>0){var s;const r=o[0];let c=o[o.length-1];((s=this.position)===null||s===void 0?void 0:s[t(1577)])===Cesium__namespace[t(3884)].HOLD&&(c=Cesium__namespace[t(1522)][t(e._0x20fe37)](new Date(2100,1,1))),this[t(773)].availability=new Cesium__namespace[t(e._0x431ae5)]([new Cesium__namespace.TimeInterval({start:r,stop:c})])}}}[_0x2397ca(3535)](e,t){const x={_0x1202ad:2875},i=_0x2397ca;t.billboard&&BillboardStyleConver.toCesiumVal(e.billboard,this._entity.billboard,!0),t[i(2800)]&&PointStyleConver.toCesiumVal(e[i(2800)],this._entity.point,!0),t.path&&(PathStyleConver.toCesiumVal(e.path,this._entity[i(2875)],!0),!e[i(2875)].isAll&&(this._entity[i(x._0x1202ad)].leadTime=0)),t.circle&&CircleStyleConver.toCesiumVal(e.circle,this._entity[i(1613)],!0)}_toJSON_Ex(e){const t={_0x3a5d7f:3044,_0xfb8eb4:2800,_0xe41f41:2829},x=_0x2397ca;this.options.billboard&&(e.billboard={},BillboardStyleConver[x(1180)](this.options.billboard,e.billboard,!0)),this[x(t._0x3a5d7f)].point&&(e.point={},PointStyleConver.toJSON(this.options.point,e[x(t._0xfb8eb4)],!0)),this[x(3044)].path&&(e.path={},PathStyleConver[x(1180)](this.options.path,e.path,!0)),this[x(3044)][x(2829)]&&(e[x(t._0xe41f41)]={},CircleStyleConver.toJSON(this.options[x(2829)],e[x(2829)],!0))}_addLabel(){const e={_0x5d6e28:639,_0x2f227c:773,_0x21d8f4:743,_0x257a9c:3482,_0x1e6e55:743,_0x1be795:773},t=_0x2397ca,x=this.style.label;if(Cesium__namespace.defined(x[t(440)])||Cesium__namespace[t(e._0x5d6e28)](x[t(2841)])){var i;(i=this[t(e._0x2f227c)])!==null&&i!==void 0&&i.label&&(this[t(e._0x2f227c)][t(e._0x21d8f4)][t(e._0x257a9c)]=!1),super._addLabel()}else this._entity.label=this[t(773)][t(e._0x1e6e55)]||{},LabelStyleConver.toCesiumVal(this.style.label,this[t(e._0x1be795)][t(743)],this.attr)}[_0x2397ca(2140)](e){}_updateDistanceDisplayConditionByEdit(){}_getTargetDistanceDisplayCondition(e){const t={_0x161194:2776},x=_0x2397ca;let i;return this.style.distanceDisplayCondition instanceof Cesium__namespace[x(t._0x161194)]?i=this.style.distanceDisplayCondition.far:this.style.distanceDisplayCondition_far&&(i=this[x(357)].distanceDisplayCondition_far),new Cesium__namespace.DistanceDisplayCondition((e[x(1290)],i),(e[x(2388)],Number[x(642)]))}getHeadingPitchRoll(){const e={_0x2b42e6:1546,_0x25cacf:3190},t=_0x2397ca,x=this._map[t(3703)].currentTime,i=this[t(703)],s=Cesium__namespace.Property[t(e._0x2b42e6)](this._entity[t(e._0x25cacf)],x,new Cesium__namespace.Quaternion);return getHeadingPitchRollByOrientation(i,s)}rotateStart(e={}){const t={_0x8dffb7:3188,_0x36db39:3531,_0x119ddf:1626,_0x32021f:394,_0x423561:1895},x={_0x471acf:3964,_0x233f71:3399},i=_0x2397ca;this._isRotateStart&&this.rotateStop(),this[i(t._0x8dffb7)]=e.direction?1:-1,this._rotateAngle=360/(60*(e[i(t._0x36db39)]||60)),this[i(259)]=e.autoStopAngle,this[i(3964)]=this.getHeadingPitchRoll(),this[i(t._0x119ddf)]=this._rotateHpr[i(1722)],this._tikRender=0,this._isRotateStart=!0,this[i(t._0x32021f)].orientation=new Cesium__namespace.CallbackProperty(s=>{const o=i;var r,c;const _=getPositionValue(this[o(760)],s);return Cesium__namespace.Transforms.headingPitchRollQuaternion(_,this[o(x._0x471acf)],(r=this[o(558)])===null||r===void 0||(c=r[o(x._0x233f71)])===null||c===void 0?void 0:c.globe.ellipsoid)},!1),this._map.on(EventType.preRender,this[i(t._0x423561)],this)}[_0x2397ca(1895)](e){const t={_0x245f15:1722},x=_0x2397ca;if(!this._map)return;this[x(1637)]++;const i=this._tikRender*this._rotateAngle;if(this._rotateAutoStopAngle&&i>=this._rotateAutoStopAngle){this.rotateStop();return}const s=Cesium__namespace.Math.toRadians(i*this._rotateDirection)+this._startHeading;this._rotateHpr[x(t._0x245f15)]=s}[_0x2397ca(1935)](){const e={_0x374244:2936,_0x3e92b0:558},t=_0x2397ca;this[t(e._0x374244)]&&(this._isRotateStart=!1,this[t(e._0x3e92b0)].off(EventType[t(1153)],this._rotate_onPreRenderHandler,this),this.heading=Cesium__namespace.Math.toDegrees(this._rotateHpr.heading),delete this._rotateDirection,delete this._rotateAngle,delete this._rotateAutoStopAngle,delete this._rotateHpr,delete this._startHeading,delete this._tikRender)}moveTo(e){const t={_0x2b08ac:3387,_0x3800ac:3684,_0x2aa1e4:773,_0x7a92ad:558},x={_0x43311e:3284};return new Promise((i,s)=>{const o=_0x3361,r=new Cesium__namespace[o(t._0x2b08ac)];r.forwardExtrapolationType=Cesium__namespace.ExtrapolationType.HOLD;const c=this._map.clock.currentTime[o(3069)](),_=this.positionShow;r[o(t._0x3800ac)](c,_);const l=LngLatPoint.parse(e.position).toCartesian(),h=e.time||5,d=Cesium__namespace.JulianDate.addSeconds(c,h,new Cesium__namespace.JulianDate);r[o(t._0x3800ac)](d,l),this[o(t._0x2aa1e4)].position=r;const u=this._map.clock.multiplier;this[o(t._0x7a92ad)].clock.shouldAnimate=!0,this._map[o(3703)].multiplier=e.speed||1,setTimeout(()=>{const m=o;this._map&&(this.position=l,this._map.clock[m(x._0x43311e)]=u,e.onEnd&&e.onEnd(),i(this))},h*1e3)})}_getPopupPosition(){return this._entity.position}flyTo(e={}){const t={_0x2bfa62:1760},x=_0x2397ca;return this._map?(!Cesium__namespace.defined(e.radius)&&(e.radius=this[x(357)].radius*2*(e[x(t._0x2bfa62)]||1.8)),this._map.flyToPoint(this.point,e)):Promise.resolve(!1)}setOpacity(e){const t={_0x189fc9:1426},x=_0x2397ca;this.style.globalAlpha=e,this._entity&&(ModelStyleConver.setOpacity(this.entityGraphic,e),this[x(t._0x189fc9)](e))}}register$4("model",ModelEntity,!0);class EditBox extends EditBase{get position(){return this._graphic._position_draw}set position(e){const t=_0x2397ca;this._graphic[t(578)]=e}bindDraggers(){const e={_0x3e37bc:3876,_0x3271e3:3645,_0x4e8b33:2500,_0x5180fa:1337,_0x363f4c:2434,_0x4ef4ad:3089,_0x5575dc:1175,_0xa5f60e:2508},t={_0x395a8d:3794},x={_0x353896:295,_0x1e8c78:230,_0x44eb9d:547,_0x50049c:3820},i={_0x2317e6:2145,_0x4650a8:760,_0xc7d6fc:295,_0x15b877:547,_0x5ee1e1:3820},s={_0x54598f:2527,_0x43cf66:565,_0x4dbda7:295},o=_0x2397ca,r=this.style;let c;const _=this.position;c=this[o(3089)]({position:_,onDrag:(b,y)=>{const C=o,v=Cesium__namespace.Cartesian3[C(s._0x54598f)](y,this.position,new Cesium__namespace.Cartesian3);this.position=y;for(let M=0,w=this.draggers.length;M<w;M++)this.draggers[M]!==b&&(this.draggers[M].position=Cesium__namespace.Cartesian3[C(s._0x43cf66)](this.draggers[M].position,v,new Cesium__namespace[C(s._0x4dbda7)]))}}),this.draggers[o(2434)](c);const l=Cesium__namespace.Math.toRadians(this._graphic[o(1722)]),h=Cesium__namespace[o(e._0x3e37bc)].toRadians(this[o(e._0x3271e3)].pitch),d=Cesium__namespace.Math[o(e._0x4e8b33)](this[o(3645)].roll),u=new Cesium__namespace[o(845)](l,h,d),m=getPositionByHprAndOffset(_,new Cesium__namespace.Cartesian3(r.dimensions_x/2,0,0),u);c=this.createDragger({position:m,type:PointType.EditAttr,tooltip:this._map[o(e._0x5180fa)]("_修改长度"),onDrag:(b,y)=>{const C=o,v=Cesium__namespace[C(1899)][C(i._0x2317e6)](this[C(i._0x4650a8)])[C(3872)];y=setPositionsHeight(y,v),b[C(760)]=y;const M=this.formatNum(Cesium__namespace[C(i._0xc7d6fc)].distance(this[C(760)],y),2);r.dimensions_x=M*2,this[C(i._0x15b877)](r),this.fire(EventType[C(i._0x5ee1e1)])},onDragEnd:(b,y)=>{this.updateDraggers()}}),this.draggers[o(e._0x363f4c)](c);const f=getPositionByHprAndOffset(_,new Cesium__namespace.Cartesian3(0,r[o(3857)]/2,0),u);c=this[o(e._0x4ef4ad)]({position:f,type:PointType[o(e._0x5575dc)],tooltip:this[o(558)].getLangText("_修改宽度"),onDrag:(b,y)=>{const C=o,v=Cesium__namespace[C(1899)].fromCartesian(_).height;y=setPositionsHeight(y,v),b.position=y;const M=this.formatNum(Cesium__namespace[C(x._0x353896)][C(x._0x1e8c78)](this[C(760)],y),2);r.dimensions_y=M*2,this[C(x._0x44eb9d)](r),this.fire(EventType[C(x._0x50049c)])},onDragEnd:(b,y)=>{this.updateDraggers()}}),this.draggers[o(2434)](c);const g=getPositionByHprAndOffset(_,new Cesium__namespace.Cartesian3(0,0,r[o(e._0xa5f60e)]/2),u);c=this.createDragger({position:g,type:PointType[o(2532)],tooltip:this._map.getLangText("_修改高度"),onDrag:(b,y)=>{const C=o,v=this[C(t._0x395a8d)](Cesium__namespace.Cartesian3.distance(this.position,y),2);r.dimensions_z=v*2,this.updateBox(r),this.fire(EventType[C(3820)])},onDragEnd:(b,y)=>{this[o(4009)]()}}),this[o(1154)].push(c)}[_0x2397ca(547)](e){const t={_0x5f9f8c:3857,_0x3dc0a3:3568},x=_0x2397ca,i=new Cesium__namespace.Cartesian3(e.dimensions_x,e[x(t._0x5f9f8c)],e.dimensions_z);this.entityGraphic[x(t._0x3dc0a3)][x(3382)](i)}_updateStyleHook(e){const t={_0x53ffa5:353,_0x21a67a:639,_0x127ad4:2508},x=_0x2397ca;super[x(t._0x53ffa5)](e),(Cesium__namespace[x(t._0x21a67a)](e[x(4005)])||Cesium__namespace[x(639)](e.dimensions_y)||Cesium__namespace.defined(e[x(t._0x127ad4)]))&&this[x(4009)]()}}class BoxEntity extends BasePointEntity{get entityGraphic(){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t[e(2971)]}get EditClass(){return EditBox}_mountedHook(){const e={_0x2b0d56:2868},t=_0x2397ca,x={position:this[t(760)],orientation:this.getOrientation(),box:BoxStyleConver[t(e._0x2b0d56)](this.style,{},!0)};this._entity=this._createEntity(x),this.style[t(743)]&&this._addLabel()}_style2Json(e,t){return BoxStyleConver.toJSON(e,t,!0)}_updateStyleHook(e,t){const x={_0x3b81e0:2812},i=_0x2397ca;t&&(Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t.pitch)||Cesium__namespace.defined(t.roll))&&(this._entity.orientation=this.getOrientation()),BoxStyleConver.toCesiumVal(e,this[i(x._0x3b81e0)],!0)}_setPositionsToCallback(){const e={_0x4d4ef0:3718,_0x3018fb:357,_0x4a77c8:3857,_0x1d4594:2508,_0x2a990c:3568},t=_0x2397ca;super._setPositionsToCallback();const x=getCesiumValue(this.entityGraphic.dimensions,Number,this._map.clock[t(e._0x4d4ef0)]);this[t(e._0x3018fb)].dimensions_x=this.style.dimensions_x??x.x,this.style.dimensions_y=this[t(357)][t(e._0x4a77c8)]??x.y,this[t(357)][t(e._0x1d4594)]=this[t(357)].dimensions_z??x.z,delete this.style[t(e._0x2a990c)]}}register$4("box",BoxEntity,!0);class EditPlane extends EditBase{get[_0x2397ca(760)](){return this._graphic._position_draw}set position(e){this._graphic._position_draw=e}bindDraggers(){const e={_0x181155:1722,_0x4b8353:227,_0x271f06:2500,_0x1854a2:4005,_0xac43fa:3089,_0x1b76fd:558},t={_0x47ff11:1899,_0x15561f:760},x={_0x345c2c:4009},i={_0x348ae9:3872,_0x3e029f:230},s=_0x2397ca,o=this[s(357)];let r;const c=this.position;r=this.createDragger({position:c,onDrag:(m,f)=>{const g=s,b=Cesium__namespace.Cartesian3.subtract(f,this.position,new Cesium__namespace.Cartesian3);this.position=f;for(let y=0,C=this.draggers.length;y<C;y++)this[g(1154)][y]!==m&&(this.draggers[y].position=Cesium__namespace.Cartesian3.add(this.draggers[y].position,b,new Cesium__namespace.Cartesian3))}}),this.draggers.push(r);const _=Cesium__namespace.Math.toRadians(this._graphic[s(e._0x181155)]),l=Cesium__namespace.Math.toRadians(this._graphic[s(e._0x4b8353)]),h=Cesium__namespace.Math[s(e._0x271f06)](this._graphic[s(2969)]),d=new Cesium__namespace[s(845)](_,l,h),u=new Cesium__namespace.Cartesian3;switch(o.plane_normal){case"x":u.y=o.dimensions_x/2;break;default:u.x=o[s(e._0x1854a2)]/2;break}if(r=this.createDragger({position:getPositionByHprAndOffset(c,u,d),type:PointType[s(1175)],tooltip:this._map.getLangText(s(1351)),onDrag:(m,f)=>{const g=s,b=Cesium__namespace.Cartographic.fromCartesian(this.position)[g(i._0x348ae9)];f=setPositionsHeight(f,b),m.position=f;const y=this.formatNum(Cesium__namespace.Cartesian3[g(i._0x3e029f)](this.position,f),2);o[g(4005)]=y*2,this.updatePlane(o)},onDragEnd:(m,f)=>{this[s(x._0x345c2c)]()}}),this[s(1154)][s(2434)](r),o.plane_normal==="z")r=this[s(e._0xac43fa)]({position:getPositionByHprAndOffset(c,new Cesium__namespace[s(295)](0,o.dimensions_y/2,0),d),type:PointType.EditAttr,tooltip:this[s(e._0x1b76fd)].getLangText("_修改宽度"),onDrag:(m,f)=>{const g=s,b=Cesium__namespace[g(t._0x47ff11)].fromCartesian(this[g(t._0x15561f)]).height;f=setPositionsHeight(f,b),m[g(t._0x15561f)]=f;const y=this.formatNum(Cesium__namespace.Cartesian3.distance(this.position,f),2);o.dimensions_y=y*2,this.updatePlane(o)},onDragEnd:(m,f)=>{this.updateDraggers()}}),this.draggers.push(r);else{const m={x:0,y:0,z:0};switch(o[s(3742)]){case"x":case"y":m.z=o[s(3857)]/2;break;default:m.y=o.dimensions_y/2;break}r=this.createDragger({position:getPositionByHprAndOffset(c,m,d),type:PointType[s(2532)],tooltip:this._map.getLangText("_修改宽度"),onDrag:(f,g)=>{const b=s,y=this.formatNum(Cesium__namespace.Cartesian3.distance(this.position,g),2);o.dimensions_y=y*2,this[b(3587)](o)},onDragEnd:(f,g)=>{this.updateDraggers()}}),this[s(1154)].push(r)}}[_0x2397ca(3587)](e){const t={_0x15b643:518},x=_0x2397ca,i=new Cesium__namespace[x(t._0x15b643)](e.dimensions_x,e.dimensions_y);this.entityGraphic.dimensions.setValue(i),this.fire(EventType.editStyle)}_updateStyleHook(e){super._updateStyleHook(e),(Cesium__namespace.defined(e.dimensions_x)||Cesium__namespace.defined(e.dimensions_y))&&this.updateDraggers()}}class PlaneEntity extends BasePointEntity{get[_0x2397ca(2812)](){const e={_0x88e0c5:773},t=_0x2397ca;var x;return(x=this[t(e._0x88e0c5)])===null||x===void 0?void 0:x.plane}get EditClass(){return EditPlane}[_0x2397ca(2645)](){const e={_0x4c531c:343},t=_0x2397ca,x={position:this.position,orientation:this.getOrientation(),plane:PlaneStyleConver[t(2868)](this[t(357)],{},!0)};this._entity=this[t(e._0x4c531c)](x),this.style.label&&this._addLabel()}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t,!0)}_updateStyleHook(e,t){const x={_0x228308:1722,_0x3f89f3:3190},i=_0x2397ca;t&&(Cesium__namespace.defined(t[i(x._0x228308)])||Cesium__namespace.defined(t[i(227)])||Cesium__namespace.defined(t.roll))&&(this._entity[i(x._0x3f89f3)]=this.getOrientation()),PlaneStyleConver[i(2868)](e,this[i(2812)],!0)}_setPositionsToCallback(){const e={_0x50f485:558,_0x1dcdff:3326,_0x35753e:3326},t=_0x2397ca;super._setPositionsToCallback();const x=getCesiumValue(this.entityGraphic.dimensions,Cesium__namespace.Cartesian2,this[t(e._0x50f485)].clock.currentTime);x&&PlaneStyleConver.toOneJson("dimensions",x,this.style);const i=getCesiumValue(this.entityGraphic[t(e._0x1dcdff)],Cesium__namespace.Plane,this._map[t(3703)][t(3718)]);i&&PlaneStyleConver.toOneJson(t(e._0x35753e),i,this[t(357)])}}register$4("plane",PlaneEntity,!0);class EditCylinder extends EditPoly{[_0x2397ca(239)](){const e={_0x1cd5a2:2498,_0x20afc4:2722,_0x9ee722:1337,_0x100ba1:1517},t={_0x41bcea:3124,_0x1d9636:3820},x={_0x42d47a:3794},i={_0x1ef429:3482},s=_0x2397ca,o=this.positions,r=o[0];let c=0;const _=this.createDragger({position:r,onDragStart:(f,g)=>{const b=_0x3361;for(let y=0,C=this.draggers.length;y<C;y++)this.draggers[y][b(i._0x1ef429)]=!1},onDrag:(f,g)=>{o[0]=g},onDragEnd:(f,g)=>{this.updateDraggers()}});_.index=c,this.draggers.push(_);const l=getEllipseOuterPositions({position:r,semiMajorAxis:this.style.bottomRadius,semiMinorAxis:this[s(357)][s(e._0x1cd5a2)],rotation:Cesium__namespace.Math.toRadians(Number(this.style[s(e._0x20afc4)]||0))});c=1;const h=l[0];o[c]=h;const d=this.createDragger({position:h,type:PointType[s(1175)],tooltip:this._map[s(e._0x9ee722)]("_修改半径"),onDrag:(f,g)=>{const b=s;o[1]=g;const y=this[b(x._0x42d47a)](Cesium__namespace[b(295)].distance(o[0],g),2);this.style.bottomRadius=y,this.fire(EventType.editStyle)},onDragEnd:(f,g)=>{this[s(4009)]()}});d.index=c,this.draggers.push(d),c=2;const u=addPositionsHeight(r,this[s(357)].length);o[c]=u;const m=this.createDragger({position:u,type:PointType.MoveHeight,tooltip:this[s(558)].getLangText(s(e._0x100ba1)),onDrag:(f,g)=>{const b=s;o[f[b(t._0x41bcea)]]=g;const y=this.formatNum(Cesium__namespace.Cartesian3.distance(o[0],g),2);this.style.length=y,this.fire(EventType[b(t._0x1d9636)])},onDragEnd:(f,g)=>{this.updateDraggers()}});m.index=c,this.draggers.push(m)}[_0x2397ca(353)](e){const t={_0x3d04a6:2027},x=_0x2397ca;super[x(353)](e),(Cesium__namespace.defined(e.topRadius)||Cesium__namespace[x(639)](e.bottomRadius)||Cesium__namespace.defined(e[x(t._0x3d04a6)])||Cesium__namespace.defined(e[x(2437)]))&&this.updateDraggers()}}class CylinderEntity extends BasePointEntity{constructor(e={}){const t=_0x2397ca;super(e),this._minPointNum=2,this[t(2770)]=2}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.cylinder}get EditClass(){return EditCylinder}_mountedHook(){const e={_0x514a0f:773,_0x1abe0d:2579},t=_0x2397ca;this[t(e._0x514a0f)]=this[t(343)](this[t(e._0x1abe0d)]()),this.style.label&&this._addLabel()}[_0x2397ca(2579)](){return{position:this.position,orientation:this.getOrientation(),cylinder:CylinderStyleConver.toCesiumVal(this.style,{},!0)}}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t,!0)}_updateStyleHook(e,t){const x={_0x53c196:639,_0x43ee79:227},i=_0x2397ca;if(CylinderStyleConver.toCesiumVal(e,this.entityGraphic,{},!0),(Cesium__namespace.defined(t.heading)||Cesium__namespace[i(x._0x53c196)](t[i(x._0x43ee79)])||Cesium__namespace.defined(t.roll))&&(this._entity.orientation=this.getOrientation()),Cesium__namespace.defined(t.length)||Cesium__namespace[i(639)](t.diffHeight)){var s;((s=this._positions_draw)===null||s===void 0?void 0:s[i(2027)])>0&&(this._position_show=addPositionsHeight(this._positions_draw[0],e.length/2))}}_updatePositionsHook(){const e={_0x4b1bb5:3556,_0x1579b8:325},t=_0x2397ca;var x,i;(x=this.editing)!==null&&x!==void 0&&x.enabled&&((i=this._positions_draw)===null||i===void 0?void 0:i.length)>0&&(this[t(e._0x4b1bb5)]=addPositionsHeight(this._positions_draw[0],this[t(357)].length/2)),super[t(e._0x1579b8)]()}_setPositionsToCallback(){const e={_0x37446b:449,_0x586a00:2812,_0x4860ec:357,_0x1b2f3d:2027,_0x4e4f35:1047,_0x4a9d40:3556},t={_0x5146f8:3556},x={_0x646bf7:2027},i={_0x1b2dc7:2498},s=_0x2397ca;if(this._isCallbackPositions)return;this[s(e._0x37446b)]=!0;const o=this._map.clock.currentTime;this.style.topRadius=getCesiumValue(this.entityGraphic.topRadius,Number,o),this[s(e._0x586a00)].topRadius=new Cesium__namespace[s(428)](r=>this.style.topRadius,!1),this[s(e._0x4860ec)].bottomRadius=getCesiumValue(this.entityGraphic.bottomRadius,Number,o),this.entityGraphic[s(2498)]=new Cesium__namespace.CallbackProperty(r=>{const c=s;return this.style[c(i._0x1b2dc7)]},!1),this.style.length=getCesiumValue(this.entityGraphic[s(2027)],Number,o),this.entityGraphic[s(e._0x1b2f3d)]=new Cesium__namespace.CallbackProperty(r=>{const c=s;return this[c(357)][c(x._0x646bf7)]},!1),this.position?(this[s(1047)]=this.positions,this._positions_draw[0]=addPositionsHeight(this.position,-this.style.length/2)):this[s(e._0x4e4f35)]=[],this[s(e._0x4a9d40)]=this.position,this.position=new Cesium__namespace.CallbackProperty(r=>this[s(t._0x5146f8)],!1)}_cancelPositionsCallback(){const e={_0x209ae5:2027,_0x3ff8d9:2498},t=_0x2397ca;this._isCallbackPositions&&(this._isCallbackPositions=!1,this.entityGraphic.length=this.style[t(e._0x209ae5)],this[t(2812)][t(1142)]=this.style.topRadius,this.entityGraphic.bottomRadius=this.style[t(e._0x3ff8d9)],this._position=this._position_show,this._point=LngLatPoint.fromCartesian(this._position),this._updatePositionsHook())}[_0x2397ca(2173)](){const e={_0x1ae067:1174,_0x2be4b0:558},t=_0x2397ca;this._map.on(EventType.mouseMove,this[t(e._0x1ae067)],this),this[t(e._0x2be4b0)].on(EventType.click,this[t(1230)],this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!0)&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0xabccc2:558,_0x19275d:3573,_0x55ce2f:3732,_0x18e401:3770},t=_0x2397ca;this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(e._0xabccc2)][t(e._0x19275d)](EventType[t(2031)],this._onClickHandler,this),this._map[t(e._0x19275d)](this[t(e._0x55ce2f)],this[t(e._0x18e401)],this),(this.options[t(533)]??!0)&&this._map.off(this._drawDelEventType,this._onRightClickHandler,this)}[_0x2397ca(2140)](e){const t={_0x51b131:1047,_0x2c4be3:2027,_0x5243b8:2027},x=_0x2397ca;if(this[x(3556)]=addPositionsHeight(this[x(t._0x51b131)][0],this.style[x(t._0x2c4be3)]/2),!e&&this._positions_draw[x(t._0x5243b8)]>1){const i=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);this.style.bottomRadius=i,this.style.length=i*2}}_onRightClickHandler(e){const t={_0x773280:1905},x=_0x2397ca;super[x(t._0x773280)](e),this.style.bottomRadius=0,this[x(357)].length=0}}register$4("cylinder",CylinderEntity,!0);class ConeTrack extends CylinderEntity{constructor(e={}){super(e),e.targetPosition&&(this.targetPosition=e.targetPosition)}get hasEdit(){return!1}get[_0x2397ca(1710)](){}get[_0x2397ca(2683)](){return this._targetPosition}set targetPosition(e){const t={_0x1c70ff:1086},x=_0x2397ca;this[x(t._0x1c70ff)]=LngLatPoint.parse(e),this._targetPosition=this._targetPoint.toCartesian()}get[_0x2397ca(207)](){return this._targetPoint}get[_0x2397ca(3143)](){return this[_0x2397ca({_0x526a55:357}._0x526a55)].angle}set angle(e){const t={_0x58a688:3143},x=_0x2397ca;this.style[x(t._0x58a688)]=e}_mountedHook(){const e={_0x4b6afb:2645},t=_0x2397ca;super[t(e._0x4b6afb)](),this._updateDistanceDisplayConditionByEdit()}[_0x2397ca(2579)](){const e={_0x463083:639,_0x33cb81:704},t={_0x287ef4:2695},x={_0x4c996e:885},i=_0x2397ca,s=super._getCreateEntityAttr();return s.position=new Cesium__namespace[i(428)](o=>(this._update(o),this._cylinderPosition),!1),s.orientation=new Cesium__namespace.CallbackProperty(o=>this[i(x._0x4c996e)],!1),s.cylinder.length=new Cesium__namespace.CallbackProperty(o=>this[i(176)],!1),!Cesium__namespace[i(e._0x463083)](s.cylinder.topRadius)&&(s[i(e._0x33cb81)].topRadius=0),Cesium__namespace.defined(this.style[i(3143)])&&(s.cylinder.bottomRadius=new Cesium__namespace.CallbackProperty(o=>this[i(t._0x287ef4)],!1)),this._isCallbackPositions=!0,s}_update(e){const t={_0x4976ac:1155,_0x2033cf:3399,_0x41bfd1:1620,_0x1ec912:176,_0x20bf19:3143},x=_0x2397ca,i=getPositionValue(this.position,e);if(!i){this._cylinderPosition=void 0;return}if(Cesium__namespace.defined(this.targetPosition)){const s=getPositionValue(this.targetPosition,e);s&&(this._cylinderLength=Cesium__namespace.Cartesian3.distance(i,s),this._cylinderPosition=Cesium__namespace.Cartesian3.midpoint(i,s,new Cesium__namespace[x(295)]),this._orientation=Cesium__namespace.Transforms.headingPitchRollQuaternion(s,getHeadingPitchRollForLine(s,i)))}else{if(this._cylinderLength=this.style.length,!this._cylinderLength){const o=LngLatPoint.parse(i);this._cylinderLength=o[x(t._0x4976ac)]-getHeight(this._map[x(t._0x2033cf)],o,{has3dtiles:!1})}const s=new Cesium__namespace[x(845)](Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace.Math.toRadians(this.pitch),Cesium__namespace.Math.toRadians(this.roll));this._orientation=Cesium__namespace[x(t._0x41bfd1)].headingPitchRollQuaternion(i,s),this[x(3774)]=getPositionByHprAndLen(i,s,this[x(t._0x1ec912)]/2)}Cesium__namespace.defined(this.style.angle)&&(this[x(2695)]=this[x(t._0x1ec912)]*Math.cos(Cesium__namespace[x(3876)].toRadians(90-this[x(t._0x20bf19)])))}_updatePositionsHook(){}}register$4("coneTrack",ConeTrack);class EditEllipsoid extends EditBase{bindDraggers(){const e={_0x3be45e:3645,_0x5807b:1175,_0x2e1a0c:2434,_0x241db6:3089},t={_0x4baf58:1788},x={_0x340d2e:1788},i={_0x1c27c:3482},s=_0x2397ca;let o;const r=this.positions[0];if(o=this.createDragger({position:r,onDragStart:(_,l)=>{const h=_0x3361;for(let d=0,u=this.draggers.length;d<u;d++)this.draggers[d][h(i._0x1c27c)]=!1},onDrag:(_,l)=>{const h=_0x3361;this[h(1091)][0]=l},onDragEnd:(_,l)=>{this.updateDraggers()}}),o[s(3124)]=0,this.draggers.push(o),this[s(e._0x3be45e)].options.hasEditRadii??!0){o=this.createDragger({position:addPositionsHeight(r,this.style.radii_z),type:PointType.MoveHeight,tooltip:this._map.getLangText("_修改半径"),onDrag:(m,f)=>{const g=s,b=this.positions[0],y=this.formatNum(Cesium__namespace.Cartesian3[g(230)](b,f),2);this.style.radii_z=y,this._graphic.updateRadii(this.style),this[g(x._0x340d2e)](EventType.editStyle)}}),this.draggers.push(o);const _=getEllipseOuterPositions({position:r,semiMajorAxis:Number(this.style.radii_x),semiMinorAxis:Number(this.style.radii_y),rotation:Cesium__namespace[s(3876)].toRadians(Number(this.style[s(2722)]||0))}),l=_[0],h=this.createDragger({position:l,type:PointType[s(e._0x5807b)],tooltip:this._map.getLangText("_修改半径"),onDrag:(m,f)=>{const g=s,b=this.positions[0],y=Cesium__namespace.Cartographic[g(2145)](b)[g(3872)];f=setPositionsHeight(f,y),m.position=f;const C=this.formatNum(Cesium__namespace[g(295)].distance(b,f),2);this.style.radii_y=C,this._graphic.updateRadii(this.style),this[g(t._0x4baf58)](EventType.editStyle)}});o[s(2405)]=h,this[s(1154)][s(e._0x2e1a0c)](h);const d=_[1],u=this[s(e._0x241db6)]({position:d,type:PointType.EditAttr,tooltip:this[s(558)][s(1337)](s(733)),onDrag:(m,f)=>{const g=s,b=this.positions[0],y=Cesium__namespace.Cartographic.fromCartesian(b).height;f=setPositionsHeight(f,y),m.position=f;const C=this.formatNum(Cesium__namespace.Cartesian3.distance(b,f),2);this.style.radii_x=C,this._graphic.updateRadii(this.style),this.fire(EventType[g(3820)])}});o.minorDragger=u,this[s(1154)].push(u)}}[_0x2397ca(353)](e){const t={_0x2735a0:525},x=_0x2397ca;super[x(353)](e),(Cesium__namespace.defined(e.radii_x)||Cesium__namespace.defined(e.radii_y)||Cesium__namespace[x(639)](e[x(t._0x2735a0)]))&&this.updateDraggers()}}class EllipsoidEntity extends BasePointEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=3}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.ellipsoid}get EditClass(){return EditEllipsoid}get czmObjectEx(){const e=_0x2397ca;let t=[];return this._primitive_label&&t.push(this._primitive_label),this[e(1854)]&&(t=t.concat(this[e(1854)])),t}_mountedHook(){const e={_0x25a214:760,_0xd64313:343},t=_0x2397ca,x={position:this[t(e._0x25a214)],orientation:this.getOrientation(),ellipsoid:EllipsoidStyleConver[t(2868)](this.style,{},!0)};this[t(773)]=this[t(e._0xd64313)](x),this.style.label&&this._addLabel();const i=this.options.scanPlane||this.style.scanPlane;i&&(Array.isArray(i)?i.forEach(s=>{this.addScanPlane(s)}):this.addScanPlane(i))}_style2Json(e,t){const x=_0x2397ca;if(t=EllipsoidStyleConver.toJSON(e,t,!0),this._entity_scanPlane&&this[x(1854)].length>0){const i=[];this._entity_scanPlane.forEach(s=>{i.push(s._planeOptions)}),t.scanPlane=i}return t}_updateStyleHook(e,t){const x={_0x42760a:639,_0x42592c:3190,_0x33468c:639},i=_0x2397ca;EllipsoidStyleConver[i(2868)](e,this.entityGraphic,!0),(Cesium__namespace.defined(t.heading)||Cesium__namespace[i(639)](t.pitch)||Cesium__namespace[i(x._0x42760a)](t.roll))&&(this._entity[i(x._0x42592c)]=this[i(621)]()),(Cesium__namespace.defined(t.radii_x)||Cesium__namespace[i(x._0x33468c)](t.radii_y)||Cesium__namespace.defined(t.radii_z))&&this.updateRadii(e)}_updatePositionsHook(){const e={_0xb365ab:1255},t=_0x2397ca;super._updatePositionsHook(),this._entity_scanPlane&&this._entity_scanPlane[t(e._0xb365ab)](x=>{const i=t;x[i(760)]=this[i(760)]})}[_0x2397ca(3535)](e,t){const x=_0x2397ca;if(t.scanPlane){this.removeAllScanPlan();const i=e[x(593)];Array.isArray(i)?i.forEach(s=>{this.addScanPlane(s)}):this.addScanPlane(i)}}_updateExOpacity(e){const t={_0x29199c:1854},x={_0x583399:1782},i=_0x2397ca;var s;((s=this._entity_scanPlane)===null||s===void 0?void 0:s.length)>0&&this[i(t._0x29199c)].forEach(o=>{const r=i;!this._updateEntityOpacity(o[r(x._0x583399)],e)&&(o[r(1185)].style.globalAlpha=e,EllipsoidStyleConver[r(2868)](o[r(1185)].style,o.ellipsoid,!0))})}updateRadii(e){const t={_0x30bd06:1966},x=_0x2397ca,i=new Cesium__namespace.Cartesian3(e[x(t._0x30bd06)],e.radii_y,e.radii_z);this[x(2812)].radii?this.entityGraphic.radii.setValue(i):this[x(2812)].radii=i}_setPositionsToCallback(){const e={_0x394541:1966,_0x4bb45c:357,_0xe9bda:525},t=_0x2397ca;if(this._isCallbackPositions)return;this._isCallbackPositions=!0;const x=getCesiumValue(this.entityGraphic[t(1246)],Cesium__namespace.Cartesian3,this._map.clock.currentTime);x&&(this.style.radii_x=this.style[t(e._0x394541)]??x.x,this.style.radii_y=this.style.radii_y??x.y,this[t(e._0x4bb45c)][t(e._0xe9bda)]=this.style.radii_z??x.z),this._positions_draw=this.positions||[],this.position=new Cesium__namespace.CallbackProperty(i=>{const s=t;return this._positions_draw[s(2027)]<1?null:this._positions_draw[0]},!1)}_cancelPositionsCallback(){const e={_0x15c86b:449,_0x2976bf:1173,_0x4eb1a1:1556},t=_0x2397ca;this[t(449)]&&(this[t(e._0x15c86b)]=!1,this[t(e._0x2976bf)]=this._positions_draw[0],this[t(e._0x4eb1a1)]=LngLatPoint.fromCartesian(this._position),this._updatePositionsHook())}_startDrawHook(){const e={_0xf63c6c:558},t=_0x2397ca;this[t(e._0xf63c6c)].on(EventType[t(2479)],this._onMouseMoveHandler,this),this._map.on(EventType.click,this._onClickHandler,this),this[t(558)].on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!0)&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0x543e83:3573,_0x426176:558,_0x181a28:3732,_0xaa5e30:3044},t=_0x2397ca;this._map[t(e._0x543e83)](EventType.mouseMove,this._onMouseMoveHandler,this),this[t(e._0x426176)].off(EventType.click,this._onClickHandler,this),this._map.off(this[t(e._0x181a28)],this._onDbClickHandler,this),(this[t(e._0xaa5e30)].hasDrawDelPoint??!0)&&this._map.off(this._drawDelEventType,this._onRightClickHandler,this)}updateAttrForDrawing(e){const t=_0x2397ca;if(!(this._positions_draw.length<2)&&!e){const x=formatNum$1(Cesium__namespace.Cartesian3[t(230)](this._positions_draw[0],this._positions_draw[1]),2);this.style.radii_x=x,this.style.radii_z=x;let i;this._positions_draw.length===3?i=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this[t(1047)][2]),2):i=x,this[t(357)].radii_y=i,this.updateRadii(this.style)}}[_0x2397ca(1905)](e){const t={_0x339f01:2716},x=_0x2397ca;super[x(1905)](e),this.style[x(t._0x339f01)]=0,this._positions_draw[x(2027)]===1&&(this.style.radii_x=0,this.style.radii_z=0),this.updateRadii(this[x(357)])}addScanPlane(e={}){const t={_0x373a3b:1089,_0x81f501:357,_0xaeaf33:845,_0x3364de:3876,_0x48d122:2500,_0x579974:1722,_0x1596d1:3876,_0x37db34:2500,_0x1a9ed4:968,_0x908c90:1146,_0x216b8d:3876,_0x1c7ea0:809,_0xf28954:1854},x={_0xe9d3be:1620},i={_0xbe206e:3703,_0x4ca5b6:3240},s={_0x5e35da:703},o=_0x2397ca;this._entity_scanPlane=this[o(1854)]||[],e.style=e.style||{};const r={radii:this.entityGraphic.radii,innerRadii:1e-5,minimumClockDegree:-1e-5,maximumClockDegree:1e-5,minimumConeDegree:this.style.minimumConeDegree||0,maximumConeDegree:this.style.maximumConeDegree||90,outline:!1};this.style.color?(r[o(t._0x373a3b)]=this[o(t._0x81f501)].color,this.style.opacity&&(r.opacity=this.style.opacity)):this[o(357)][o(209)]&&(r.color=this.style.outlineColor,this.style.outlineOpacity&&(r.opacity=this.style.outlineOpacity));let c;const _=Cesium__namespace.Math.toRadians(e.step||.5),l=new Cesium__namespace[o(t._0xaeaf33)](Cesium__namespace[o(t._0x3364de)][o(t._0x48d122)](e[o(357)].heading||this[o(t._0x579974)]),Cesium__namespace[o(t._0x1596d1)][o(t._0x37db34)](e.style.pitch||this.pitch),Cesium__namespace.Math.toRadians(e.style[o(2969)]||this.roll));let h=Cesium__namespace.Transforms.headingPitchRollQuaternion(this.positionShow,l);switch(e[o(t._0x1a9ed4)]){case"pitch":{const m=Cesium__namespace.Math[o(t._0x48d122)](e[o(3173)]??0),f=Cesium__namespace.Math.toRadians(e.max??180);c=new Cesium__namespace.CallbackProperty(g=>{const b=o;return this._map.clock.shouldAnimate&&(l.pitch+=_,l.pitch>=f&&(l.pitch=m),h=Cesium__namespace.Transforms.headingPitchRollQuaternion(this[b(s._0x5e35da)],l)),h},!1)}break;case"roll":{const m=Cesium__namespace.Math.toRadians(e[o(3173)]??-90),f=Cesium__namespace.Math.toRadians(e[o(t._0x908c90)]??90);c=new Cesium__namespace.CallbackProperty(g=>{const b=o;return this._map[b(i._0xbe206e)].shouldAnimate&&(l.roll+=_,l.roll>=f&&(l.roll=m),h=Cesium__namespace.Transforms[b(i._0x4ca5b6)](this.positionShow,l)),h},!1)}break;case"heading":default:{const m=Cesium__namespace.Math.toRadians(e[o(3173)]??-180),f=Cesium__namespace[o(t._0x216b8d)].toRadians(e.max??180);c=new Cesium__namespace.CallbackProperty(g=>{const b=o;return this[b(558)][b(3703)].shouldAnimate&&(l.heading+=_,l.heading>=f&&(l[b(1722)]=m),h=Cesium__namespace[b(x._0xe9d3be)].headingPitchRollQuaternion(this.positionShow,l)),h},!1);break}}const d={id:"scanPlane-"+createGuid(),position:this[o(760)],orientation:c,ellipsoid:EllipsoidStyleConver.toCesiumVal({...r,...e.style},{},!0)},u=this._createEntity(d);return this[o(t._0x1c7ea0)]&&this.isAdded&&this[o(809)].entities.add(u),this[o(1425)](u),u._planeOptions=e,this[o(t._0xf28954)].push(u),u}removeScanPlan(e){const t=_0x2397ca;this.dataSource&&this[t(3401)]&&this.dataSource[t(3998)].remove(e),removeArrayItem(this._entity_scanPlane,e)}removeAllScanPlan(){const e=_0x2397ca;this.dataSource&&this.isAdded&&this[e(1854)].forEach(t=>{this.dataSource.entities.remove(t)}),this._entity_scanPlane=[]}}register$4("ellipsoid",EllipsoidEntity,!0);class PolylineEntity extends BasePolyEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.polyline}_mountedHook(){const e={_0x3919b9:357,_0x23c037:367,_0x314492:343},t=_0x2397ca;this._positions_show=this.getShowPositions(this.positions);const x={polyline:PolylineStyleConver.toCesiumVal(this[t(e._0x3919b9)],{},!0)};x[t(392)].positions=this[t(e._0x23c037)],this._entity=this[t(e._0x314492)](x),this.style.label&&this._addLabel()}getShowPositions(e){const t={_0x4478c2:2027},x=_0x2397ca;return this.style[x(509)]&&(e==null?void 0:e[x(t._0x4478c2)])>0?e.concat(e[0]):e}_style2Json(e,t){return PolylineStyleConver.toJSON(e,t,!0)}[_0x2397ca(353)](e,t){const x={_0x1dc8d8:2526},i=_0x2397ca;PolylineStyleConver.toCesiumVal(e,this.entityGraphic,!0),Cesium__namespace.defined(t==null?void 0:t.closure)&&(!this._isCallbackPositions&&(this._positions_show=this.getShowPositions(this[i(x._0x1dc8d8)]),this.entityGraphic.positions=this._positions_show),this.updateAttrForDrawing())}_updatePositionsHook(){const e=_0x2397ca;this._positions instanceof Cesium__namespace.CallbackProperty?this.entityGraphic.positions=this._positions:(this._positions_show=this.getShowPositions(this._positions),this.entityGraphic.positions=this._positions_show),this._updateLabelPosition(),this[e(3291)]()}[_0x2397ca(3524)](){return this._positions_show}[_0x2397ca(2140)](e){Cesium__namespace.defined(this.entityGraphic.depthFailMaterial)&&(this.entityGraphic.positions=this._positions_CallbackProperty()),this._positions_show=this.getShowPositions(this._positions_draw)}_stopDrawHook(){const e=_0x2397ca;super._stopDrawHook(),Cesium__namespace[e(639)](this[e(2812)].depthFailMaterial)&&(this.positions=this._positions_draw)}_updateDistanceDisplayConditionByEdit(){const e={_0x5d4e84:230,_0x10d1cf:3769},t=_0x2397ca;if(this._isCallbackPositions&&this.style.clampToGround){let x;const i=this.center;i?x=Cesium__namespace[t(295)][t(e._0x5d4e84)](i,new Cesium__namespace.Cartesian3):x=(Cesium__namespace.Ellipsoid.WGS84.minimumRadius+Cesium__namespace.Ellipsoid.WGS84.maximumRadius)/2,this[t(e._0x10d1cf)](x)}else this.updateDistanceDisplayCondition()}}register$4(_0x2397ca(392),PolylineEntity);class CurveEntity extends PolylineEntity{getShowPositions(e){const t=_0x2397ca;return!e||e.length<2?e:getBezierCurve(e,this[t(357)])}}register$4(_0x2397ca(3342),CurveEntity);class EditPolylineVolume extends EditPoly{}class PolylineVolumeEntity extends BasePolyEntity{get entityGraphic(){const e={_0x23cee1:2613},t=_0x2397ca;var x;return(x=this._entity)===null||x===void 0?void 0:x[t(e._0x23cee1)]}get[_0x2397ca(1710)](){return EditPolylineVolume}_mountedHook(){const e={_0x5d6acd:1091},t=_0x2397ca,x={polylineVolume:PolylineVolumeStyleConver.toCesiumVal(this.style,{},!0)};x.polylineVolume.positions=this[t(e._0x5d6acd)],this._entity=this._createEntity(x),this[t(357)].label&&this[t(856)]()}[_0x2397ca(198)](e,t){return PolylineVolumeStyleConver.toJSON(e,t,!0)}[_0x2397ca(353)](e,t){PolylineVolumeStyleConver[_0x2397ca(2868)](e,this.entityGraphic,!0)}_updatePositionsHook(){const e={_0x2e9e42:1091},t=_0x2397ca;this.entityGraphic[t(e._0x2e9e42)]=this[t(e._0x2e9e42)],this[t(2692)](),this._updateEditDraggers()}}register$4("polylineVolume",PolylineVolumeEntity);class PathEntity extends BasePointEntity{constructor(e={}){const t={_0xd37d1d:1615},x=_0x2397ca;super(e),delete this[x(t._0xd37d1d)],this._hasEdit=!1}get[_0x2397ca(2812)](){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t.path}get orientationShow(){const e={_0x1e8004:3190,_0xbf2f84:3703,_0x40a551:1772},t=_0x2397ca;return Cesium__namespace.Property.getValueOrUndefined(this[t(e._0x1e8004)],this._map[t(e._0xbf2f84)].currentTime,new Cesium__namespace[t(e._0x40a551)])}get[_0x2397ca(654)](){return getHeadingPitchRollByOrientation(this.positionShow,this.orientationShow)}get pitch(){return this.style.pitch??0}set pitch(e){const t={_0xf76173:227},x=_0x2397ca;this.style[x(t._0xf76173)]=e,this.updateOrientation()}get[_0x2397ca(2969)](){return this[_0x2397ca({_0x40a087:357}._0x40a087)].roll??0}set roll(e){const t={_0x46d148:357},x=_0x2397ca;this[x(t._0x46d148)][x(2969)]=e,this.updateOrientation()}get[_0x2397ca(1091)](){return this._positions}set positions(e){const t={_0x18db4f:3387},x={_0x40174d:295},i=_0x2397ca;if(!e)return;const s=new Cesium__namespace[i(t._0x18db4f)];e.forEach((o,r)=>{const c=i,_=Cesium__namespace[c(1522)].fromDate(new Date(o[3]));s.addSample(_,Cesium__namespace[c(x._0x40174d)].fromDegrees(o[0],o[1],o[2]))}),this.position=s}get coordinates(){return this[_0x2397ca({_0x593ea8:3711}._0x593ea8)]()}_updatePositionsHook(){const e={_0x4c1b25:655,_0x3f284a:1522},t=_0x2397ca;if(super._updatePositionsHook(),!this.position||this.position instanceof Cesium__namespace.Cartesian3)this._entity.orientation=void 0,this._entity.availability=void 0;else{var x,i,s;if(this.options[t(e._0x4c1b25)]&&(this._entity.orientation=new Cesium__namespace.VelocityOrientationProperty(this.position)),this.options._auto_availability&&((x=this.position)===null||x===void 0||(i=x[t(2062)])===null||i===void 0||(s=i._times)===null||s===void 0?void 0:s.length)>0){var o;const r=this.position[t(2062)][t(764)],c=r[0];let _=r[r.length-1];((o=this.position)===null||o===void 0?void 0:o[t(1577)])===Cesium__namespace.ExtrapolationType.HOLD&&(_=Cesium__namespace[t(e._0x3f284a)][t(1579)](new Date(2100,1,1))),this._entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:c,stop:_})])}}}_mountedHook(){const e={_0x27831:2509,_0x5a42bd:760,_0x372bc0:2166,_0x5a1268:2166,_0x2281e8:2066,_0x342301:558,_0x52137a:3884,_0x46b1bd:2166,_0x1aadba:4001,_0x634f9a:3044,_0x2a90ed:2868,_0x2c6d1d:743,_0x4f09b1:824,_0x21478c:824,_0x34d96a:3044,_0x1cae67:639},t={_0x5e21b7:3797},x=_0x2397ca;this.position&&!this[x(3044)].orientation&&(this.options.orientation=new Cesium__namespace[x(e._0x27831)](this.position),this._auto_orientation=!0);const i={position:this[x(e._0x5a42bd)],orientation:this.options.orientation,path:PathStyleConver.toCesiumVal(this.style||this[x(3044)].path,{},!0)};if(!this.options[x(e._0x372bc0)]){var s,o,r;if(((s=this.position)===null||s===void 0||(o=s._property)===null||o===void 0||(r=o._times)===null||r===void 0?void 0:r[x(2027)])>0){var c;const l=this[x(760)]._property._times,h=l[0];let d=l[l.length-1];((c=this.position)===null||c===void 0?void 0:c[x(1577)])===Cesium__namespace.ExtrapolationType.HOLD&&(d=Cesium__namespace[x(1522)].fromDate(new Date(2100,1,1))),i[x(e._0x5a1268)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[x(e._0x2281e8)]({start:h,stop:d})]),this._auto_availability=!0}else{var _;const l=this[x(e._0x342301)].clock.currentTime;let h=Cesium__namespace[x(1522)][x(2731)](l,1,new Cesium__namespace.JulianDate);((_=this.position)===null||_===void 0?void 0:_.forwardExtrapolationType)===Cesium__namespace[x(e._0x52137a)].HOLD&&(h=Cesium__namespace.JulianDate.addDays(h,365,new Cesium__namespace.JulianDate)),i[x(e._0x46b1bd)]=new Cesium__namespace[x(e._0x1aadba)]([new Cesium__namespace.TimeInterval({start:l,stop:h})])}}if(this.options.label&&(this[x(e._0x634f9a)].label.text=this.options.label.text||this[x(2044)],i.label=LabelStyleConver[x(e._0x2a90ed)](this[x(3044)][x(e._0x2c6d1d)])),this.options[x(e._0x4f09b1)]&&(i[x(e._0x21478c)]=BillboardStyleConver.toCesiumVal(this.options.billboard)),this.options.point&&(i[x(2800)]=PointStyleConver.toCesiumVal(this.options.point)),this.options[x(2829)]&&(i.ellipse=CircleStyleConver[x(e._0x2a90ed)](this[x(e._0x34d96a)][x(2829)],{},!0)),this.options.model){i.model=ModelStyleConver.toCesiumVal(this.options.model,{},!0);const l=this.options[x(1243)];(l.mergeOrientation||Cesium__namespace.defined(l.heading)||Cesium__namespace.defined(l.pitch)||Cesium__namespace[x(e._0x1cae67)](l[x(2969)]))&&(i.orientation=new Cesium__namespace.CallbackProperty(h=>this[x(t._0x5e21b7)](this.position,this.options.orientation),!1))}this._entity=this._createEntity(i)}_getCustomQuaternion(e,t){const x={_0x5ba954:2893,_0x30318b:558,_0x2a70e8:1722,_0x3a6ad9:679,_0x20f043:1782},i=_0x2397ca;var s,o;if(e[i(x._0x5ba954)]){var r,c;e=e.getValue((r=this[i(x._0x30318b)])===null||r===void 0||(c=r[i(3703)])===null||c===void 0?void 0:c.currentTime)}if(t[i(2893)]){var _,l;t=t.getValue((_=this._map)===null||_===void 0||(l=_.clock)===null||l===void 0?void 0:l.currentTime)}const h=this.options.model;let d=Cesium__namespace.Math.toRadians(h.heading||0),u=Cesium__namespace.Math.toRadians(h.pitch||0),m=Cesium__namespace.Math.toRadians(h.roll||0);if(t){const f=getHeadingPitchRollByOrientation(e,t);h.mergeOrientation?(d+=f[i(1722)],m+=f.roll,u+=f.pitch):(!Cesium__namespace[i(639)](h.heading)&&(d=f[i(x._0x2a70e8)]),!Cesium__namespace.defined(h.roll)&&(m=f.roll),!Cesium__namespace.defined(h.pitch)&&(u=f.pitch))}return Cesium__namespace.Transforms.headingPitchRollQuaternion(e,new Cesium__namespace[i(845)](d,u,m),(s=this._map)===null||s===void 0||(o=s.scene)===null||o===void 0?void 0:o[i(x._0x3a6ad9)][i(x._0x20f043)])}_initSampledPositionProperty(){const e={_0x524c5d:3928,_0x33a4f3:1577,_0x16a282:1294,_0x486f37:3884,_0x195f60:773,_0x8ab3f3:3703,_0x3ca592:1522,_0x4673ce:3777},t=_0x2397ca;if(this.options){if(this._maxCacheCount=this.options[t(e._0x524c5d)]??50,!this.position){const i=new Cesium__namespace[t(3387)](this.options.referenceFrame);if(i.forwardExtrapolationType=this.options[t(e._0x33a4f3)]??Cesium__namespace.ExtrapolationType.HOLD,i[t(e._0x16a282)]=this.options.backwardExtrapolationType??Cesium__namespace[t(e._0x486f37)].HOLD,!this.options.orientation&&(this.options.orientation=new Cesium__namespace[t(2509)](i),this._entity&&(this[t(773)][t(3190)]=this.getOrientation())),this[t(773)]&&!this[t(e._0x195f60)].availability&&this._map){var x;const s=this._map[t(e._0x8ab3f3)].currentTime;let o=Cesium__namespace.JulianDate[t(2731)](s,1,new Cesium__namespace.JulianDate);((x=this.position)===null||x===void 0?void 0:x.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(330)]&&(o=Cesium__namespace[t(e._0x3ca592)].addDays(o,365,new Cesium__namespace.JulianDate)),this._entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:s,stop:o})])}this.position=i}this[t(e._0x4673ce)]=this[t(760)]}}[_0x2397ca(353)](e,t){PathStyleConver.toCesiumVal(e,this.entityGraphic,{},!0)}_style2Json(e,t){return PathStyleConver[_0x2397ca(1180)](e,t,!0)}[_0x2397ca(4036)](e){return{type:"LineString",coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}[_0x2397ca(3448)](e){const t={_0xc86e47:3711},x=_0x2397ca;e.positions=this[x(t._0xc86e47)]()}_toJSON_Ex(e){const t={_0x45fce5:743,_0x3eb45b:743,_0x12c5b0:1180},x=_0x2397ca;this.options.label&&(e[x(t._0x45fce5)]={},LabelStyleConver.toJSON(this.options.label,e[x(t._0x3eb45b)],!0)),this.options.model&&(e.model={},ModelStyleConver[x(1180)](this.options.model,e[x(1243)],!0)),this.options.billboard&&(e[x(824)]={},BillboardStyleConver[x(t._0x12c5b0)](this.options.billboard,e.billboard,!0)),this[x(3044)].point&&(e.point={},PointStyleConver[x(1180)](this.options.point,e.point,!0)),this.options.circle&&(e.circle={},CircleStyleConver.toJSON(this[x(3044)].circle,e[x(2829)],!0))}_setOptionsHook(e,t){const x={_0x18dfdb:2868,_0x3c3200:773,_0x512c4c:824,_0x3d8794:824,_0x1f1456:2868,_0x5f4bc0:2800},i=_0x2397ca;t[i(743)]&&LabelStyleConver[i(2868)](e.label,this[i(773)].label,this),t.model&&ModelStyleConver[i(x._0x18dfdb)](e.model,this[i(x._0x3c3200)].model,!0),t[i(x._0x512c4c)]&&BillboardStyleConver.toCesiumVal(e.billboard,this._entity[i(x._0x3d8794)],!0),t[i(2800)]&&PointStyleConver[i(x._0x1f1456)](e[i(x._0x5f4bc0)],this[i(x._0x3c3200)].point,!0),t.circle&&CircleStyleConver.toCesiumVal(e.circle,this[i(x._0x3c3200)].ellipse,!0)}_updateExOpacity(e){const t={_0x2c8a82:824,_0xc39d95:773,_0x3d272a:1089,_0x1de68c:773},x=_0x2397ca;this._entity.model&&(this._entity.model.color=Cesium__namespace.Color[x(3970)].withAlpha(e)),this._entity[x(t._0x2c8a82)]&&(this[x(t._0xc39d95)][x(824)][x(t._0x3d272a)]=Cesium__namespace.Color.WHITE.withAlpha(e)),this._entity[x(2800)]&&!this._updateEntityOpacity(this._entity[x(2800)],e)&&PointStyleConver[x(2868)]({...this.options.point,globalAlpha:e},this[x(t._0x1de68c)].point,!0),this._entity[x(2829)]&&!this._updateEntityOpacity(this._entity.circle,e)&&CircleStyleConver.toCesiumVal({...this.options.circle,globalAlpha:e},this._entity.ellipse,!0)}[_0x2397ca(2861)](e){const t={_0x10816f:760,_0x909063:2116},x=_0x2397ca;var i,s,o,r;const c=(i=this[x(t._0x10816f)])===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times,_=c.length;if(_===0)return 0;const l=e||((o=this._map)===null||o===void 0||(r=o.clock)===null||r===void 0?void 0:r[x(3718)])||Cesium__namespace.JulianDate[x(t._0x909063)]();let h=Cesium__namespace.binarySearch(c,l,Cesium__namespace.JulianDate.compare);return h<0&&(h=~h),h<0&&(h=0),h>=_&&(h=_-1),h}getRectangle(e){const t={_0x5ef9e9:2062,_0x59f0c7:2434,_0x1d217f:295},x=_0x2397ca;var i,s,o,r;const c=(i=this[x(760)])===null||i===void 0||(s=i[x(t._0x5ef9e9)])===null||s===void 0?void 0:s._times,_=(o=this.position)===null||o===void 0||(r=o._property)===null||r===void 0?void 0:r._values;if(!c||c.length===0)return;const l=[];for(let d=0,u=c.length;d<u;d++)l[x(t._0x59f0c7)](new Cesium__namespace[x(t._0x1d217f)](_[d*3],_[d*3+1],_[d*3+2]));return getRectangle(l,e==null?void 0:e.isFormat)}[_0x2397ca(3711)](e){const t={_0x66586d:2062},x=_0x2397ca;var i,s,o,r;const c=(i=this.position)===null||i===void 0||(s=i[x(t._0x66586d)])===null||s===void 0?void 0:s._times,_=(o=this.position)===null||o===void 0||(r=o[x(2062)])===null||r===void 0?void 0:r._values;if(!c||c.length===0)return[];const l=[];for(let h=0,d=c.length;h<d;h++){const u=LngLatPoint.fromCartesian(new Cesium__namespace.Cartesian3(_[h*3],_[h*3+1],_[h*3+2])),m=u.toArray(e);m.push(Cesium__namespace.JulianDate.toDate(c[h]).getTime()),l.push(m)}return l}[_0x2397ca(2703)](e={}){const t={_0x329286:2703},x=_0x2397ca;if(!this._map)return Promise.resolve(!1);const i=this[x(703)];if(!i)return Promise.resolve(!1);let s;if(Cesium__namespace.defined(e.heading)){var o;s=e.heading+Cesium__namespace.Math.toDegrees(((o=this[x(654)])===null||o===void 0?void 0:o.heading)||0)}return this[x(558)][x(t._0x329286)](i,{...e,heading:s})}}register$4(_0x2397ca(2875),PathEntity,!0);class EditCorridor extends EditPoly{updatePositionsHeightByAttr(e){const t={_0x5a3988:3872},x=_0x2397ca;if(this.entityGraphic[x(t._0x5a3988)]!==void 0){const i=getCesiumValue(this.entityGraphic.height,Number,this._map.clock.currentTime);e=setPositionsHeight(e,i)}return e}createDragger(e){const t={_0x1c2301:3089},x=_0x2397ca;return this.clampToGround&&(e.position=getSurfacePosition(this._map.scene,e.position)),super[x(t._0x1c2301)](e)}[_0x2397ca(1837)](e){const t={_0x2ce310:3872},x=_0x2397ca;if(this.clampToGround)return;const i=Cesium__namespace.Cartographic.fromCartesian(e)[x(t._0x2ce310)];this[x(2812)].height=i,this.style.height=this.formatNum(i,2)}_updateHeight(e){const t={_0x293059:3872},x=_0x2397ca;this.entityGraphic.height=e,this.style[x(t._0x293059)]=this.formatNum(e,2);const i=this[x(1091)];for(let s=0,o=i.length;s<o;s++)i[s]=setPositionsHeight(i[s],e);for(let s=0,o=this.draggers[x(2027)];s<o;s++){const r=this.draggers[s];r.position=setPositionsHeight(r.position,e)}this[x(1788)](EventType.editStyle)}}class CorridorEntity extends BasePolyEntity{get entityGraphic(){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t[e(873)]}get EditClass(){return EditCorridor}_mountedHook(){const e={_0x4f04e2:357},t=_0x2397ca,x={corridor:CorridorStyleConver.toCesiumVal(this.style,{},!0)};x[t(873)].positions=this.positions,this[t(773)]=this._createEntity(x),this[t(e._0x4f04e2)].label&&this._addLabel()}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t,!0)}_updateStyleHook(e,t){const x=_0x2397ca;CorridorStyleConver.toCesiumVal(e,this.entityGraphic,!0),t&&(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace[x(639)](t.height))&&this[x(2738)]()}_updatePositionsHook(){const e={_0x27dc24:1091,_0x20b738:3291},t=_0x2397ca;this.entityGraphic[t(e._0x27dc24)]=this.positions,this._updateLabelPosition(),this[t(e._0x20b738)]()}_updateHeight(e=!0){const t={_0x3b0bfc:3872,_0x33523d:3872,_0x36ceb3:357,_0x2d4562:639,_0x5af538:2437,_0x36df43:2812},x=_0x2397ca;if(this.style.clampToGround)return;let i=0;e&&Cesium__namespace.defined(this.style[x(t._0x3b0bfc)])?i=this.style.height:i=getMaxHeight(this._positions_draw||this._positions),this[x(2812)][x(t._0x33523d)]=i,this[x(t._0x36ceb3)][x(3872)]=i,Cesium__namespace.defined(this.style.diffHeight)&&(Cesium__namespace[x(t._0x2d4562)](this.style[x(t._0x5af538)])&&this[x(357)].diffHeight!==0?this[x(2812)].extrudedHeight=i+this.style.diffHeight:this[x(t._0x36df43)].extrudedHeight=void 0)}[_0x2397ca(2140)](e){const t={_0x2bde99:1034,_0x3040de:357,_0x5ee8b2:3791,_0x16b269:2437,_0x701e7e:2812},x=_0x2397ca;if(e)this._updateHeight();else if(!this.style[x(t._0x2bde99)]){const i=getMaxHeight(this._positions_draw);i!==0&&(this[x(2812)].height=i,this[x(t._0x3040de)].height=i,Cesium__namespace.defined(this.style.diffHeight)&&(Cesium__namespace.defined(this[x(t._0x3040de)][x(2437)])&&this[x(357)].diffHeight!==0?this.entityGraphic[x(t._0x5ee8b2)]=i+Number(this.style[x(t._0x16b269)]):this[x(t._0x701e7e)].extrudedHeight=void 0))}}}register$4("corridor",CorridorEntity);class EditWall extends EditPoly{bindDraggers(){const e={_0x187172:2208,_0x456dcc:2412,_0xd9796a:2634},t={_0x3f6942:1390,_0x35cf64:3124,_0x2199de:2437,_0x3ca6da:760,_0xe97716:760},x=_0x2397ca,i=this.positions,s=this.style,o=this[x(1505)];for(let r=0,c=i.length;r<c;r++){const _=i[r],l=this.createDragger({position:_,onDrag:(h,d)=>{const u=x;i[h.index]=d,this._heightDraggers&&this[u(t._0x3f6942)].length>0&&(this[u(t._0x3f6942)][h[u(t._0x35cf64)]].position=addPositionsHeight(d,s[u(t._0x2199de)])),o&&(h.index>0&&(this.draggers[h[u(3124)]*2-1][u(t._0x3ca6da)]=getMidpoint(d,i[h.index-1],new Cesium__namespace.Cartesian3)),h.index<i.length-1&&(this.draggers[h.index*2+1].position=getMidpoint(d,i[h.index+1])));const m=centerOfMass(i);this[u(3357)][u(t._0xe97716)]=m}});if(l.index=r,this.draggers.push(l),this.hasMidPoint&&(this.hasClosure||!this[x(e._0x187172)]&&r<c-1)){const h=(r+1)%c,d=getMidpoint(_,i[h]),u=this.createDragger({position:d,type:PointType[x(1478)],tooltip:this._map.getLangText("_增加点"),onDragStart:(m,f)=>{this.positions.splice(m.index,0,f),this.updateAttrForEditing()},onDrag:(m,f)=>{this.positions[m.index]=f},onDragEnd:(m,f)=>{this._fireAddPoint(m,f),this.updateDraggers()}});u.index=h,this.draggers[x(2434)](u)}}this[x(e._0x456dcc)](),this[x(e._0xd9796a)]()}[_0x2397ca(2634)](){const e={_0x1f5c49:3124},t={_0x755169:2437,_0x368ff5:3124},x=_0x2397ca;if(!this._graphic._hasHeightEdit)return;this._heightDraggers=[];const i=this.positions,s=Number(this.style.diffHeight);for(let o=0,r=i.length;o<r;o++){const c=addPositionsHeight(i[o],s),_=this[x(3089)]({position:c,type:PointType.MoveHeight,tooltip:this._map.getLangText(x(1517)),onDrag:(l,h)=>{const d=x,u=Cesium__namespace.Cartographic.fromCartesian(h).height;this.style[d(t._0x755169)]=formatNum$1(u-this._graphic[d(3375)][l.index],2);for(let m=0;m<i[d(2027)];m++)m!==l[d(t._0x368ff5)]&&(this._heightDraggers[m].position=addPositionsHeight(i[m],this.style.diffHeight));this.updateAttrForEditing(),this.fire(EventType.editStyle)}});_[x(e._0x1f5c49)]=o,this.draggers.push(_),this._heightDraggers.push(_)}}}class WallEntity extends BasePolyEntity{get entityGraphic(){const e=_0x2397ca;var t;return(t=this[e(773)])===null||t===void 0?void 0:t.wall}get EditClass(){return EditWall}_mountedHook(){const e={_0x35c535:1091,_0x5506eb:2990,_0x2ddcb3:357},t=_0x2397ca;var x;this.style.diffHeight=this.style.diffHeight||100;const i={wall:WallStyleConver.toCesiumVal(this.style,{},!0)};this.style[t(509)]&&((x=this.positions)===null||x===void 0?void 0:x[t(2027)])>0?i.wall.positions=this[t(1091)][t(3210)](this[t(e._0x35c535)][0]):i.wall.positions=this.positions,(!this.style.maximumHeights||!this.style[t(e._0x5506eb)])&&this._updateMaxMinHeights(i),this._entity=this._createEntity(i),this[t(e._0x2ddcb3)].label&&this._addLabel()}_style2Json(e,t){return WallStyleConver[_0x2397ca(1180)](e,t,!0)}_updateStyleHook(e,t){const x={_0x5618af:2868,_0x155041:325},i=_0x2397ca;WallStyleConver[i(x._0x5618af)](e,this.entityGraphic,!0),Cesium__namespace.defined(t[i(509)])&&this[i(x._0x155041)](),Cesium__namespace.defined(t==null?void 0:t.diffHeight)&&this[i(3528)](this._entity)}_updatePositionsHook(){const e={_0x1e3274:1091,_0x701e4f:3528,_0x5370d5:3291},t=_0x2397ca;var x;this.style.closure&&((x=this.positions)===null||x===void 0?void 0:x.length)>0?this.entityGraphic.positions=this.positions[t(3210)](this.positions[0]):this[t(2812)].positions=this[t(e._0x1e3274)],(!this.style.maximumHeights||!this[t(357)].minimumHeights)&&this[t(e._0x701e4f)](this._entity),this._updateLabelPosition(),this[t(e._0x5370d5)]()}_updateMaxMinHeights(e){const t={_0x593d90:3958},x=_0x2397ca,i=this.points;if(!i||i.length===0)return;const s=i.length,o=new Array(s),r=new Array(s);for(let c=0;c<s;c++){const _=i[c].alt;o[c]=_,this.style.fixedTop?r[c]=i[0].alt+this.style.diffHeight:r[c]=_+this.style.diffHeight}this[x(357)].closure&&s>0&&(o.push(o[0]),r.push(r[0])),this._minimumHeights=o,this._maximumHeights=r,e&&(!(e[x(3958)].minimumHeights instanceof Cesium__namespace[x(428)])&&(e.wall.minimumHeights=o),!(e[x(t._0x593d90)].maximumHeights instanceof Cesium__namespace.CallbackProperty)&&(e[x(t._0x593d90)][x(1539)]=r))}_setPositionsToCallback(){this._isCallbackPositions||(super._setPositionsToCallback(),this.entityGraphic.minimumHeights=new Cesium__namespace.CallbackProperty(e=>this._minimumHeights,!1),this.entityGraphic.maximumHeights=new Cesium__namespace.CallbackProperty(e=>this[_0x3361(3543)],!1))}_positions_CallbackProperty(){const e={_0x2b44d7:357,_0x3d0ef1:1047,_0x556c19:2027},t=_0x2397ca;var x;return this[t(e._0x2b44d7)].closure&&((x=this[t(e._0x3d0ef1)])===null||x===void 0?void 0:x[t(e._0x556c19)])>0?this[t(1047)].concat(this._positions_draw[0]):this[t(1047)]}[_0x2397ca(1182)](){const e={_0x29a160:2812,_0x24fdab:1539},t=_0x2397ca;this._isCallbackPositions&&(super[t(1182)](),this[t(e._0x29a160)].minimumHeights=this._minimumHeights,this.entityGraphic[t(e._0x24fdab)]=this._maximumHeights)}updateAttrForDrawing(e){this[_0x2397ca({_0x27c9c9:3528}._0x27c9c9)](this._entity)}}register$4("wall",WallEntity);class EditRectangle extends EditPoly{bindDraggers(){const e={_0x2c08e0:1091,_0x506741:3089,_0x26a51f:2412},t={_0x534a8b:2812,_0x5a961d:760,_0x2a17ad:3124},x=_0x2397ca,i=this[x(e._0x2c08e0)];for(let s=0,o=i.length;s<o;s++){const r=this.updatePositionsHeightByAttr(i[s]),c=this[x(e._0x506741)]({position:r,onDrag:(_,l)=>{const h=x,d=this._map.clock.currentTime,u=getCesiumValue(this.entityGraphic.height,Number,d);if(this.positions[_.index]=l,this[h(t._0x534a8b)].height!==void 0)for(let f=0,g=this.draggers.length;f<g;f++){const b=this.draggers[f],y=setPositionsHeight(this.positions[b.index],u);b[h(t._0x5a961d)]=y,this.positions[b.index]=y}if(this._heightDraggers&&this._heightDraggers[h(2027)]>0){const f=getCesiumValue(this.entityGraphic.extrudedHeight,Number,d);this._heightDraggers[_[h(t._0x2a17ad)]].position=setPositionsHeight(l,f)}let m=centerOfMass(this.positions);m=this.updatePositionsHeightByAttr(m),this._draggerMove.position=m}});c.index=s,this[x(1154)].push(c)}this[x(e._0x26a51f)](),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}[_0x2397ca(1646)](e){const t=_0x2397ca;if(this.clampToGround&&(e=getSurfacePosition(this._map.scene,e)),this[t(2812)].height!==void 0){const x=getCesiumValue(this[t(2812)].height,Number,this._map.clock.currentTime);e=setPositionsHeight(e,x)}return e}[_0x2397ca(2738)](e){const t={_0x2cfa87:2027,_0x27a38e:760},x=_0x2397ca;this.entityGraphic.height=e,this.style[x(3872)]=this.formatNum(e,2);const i=this.positions;for(let s=0,o=i.length;s<o;s++)i[s]=setPositionsHeight(i[s],e);for(let s=0,o=this.draggers[x(t._0x2cfa87)];s<o;s++){const r=this.draggers[s];r[x(t._0x27a38e)]=setPositionsHeight(r.position,e)}this.fire(EventType.editStyle)}}class RectangleEntity extends BasePolyEntity{constructor(e={}){const t=_0x2397ca;super(e),this[t(916)]=2,this._maxPointNum=2,this._clampToGround_reload=!0,this.options.rectangle?this._rectangle=this.options.rectangle:this.options.coordinates&&(this[t(1784)]=this.options.coordinates)}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.rectangle}get EditClass(){return EditRectangle}get center(){const e={_0x47ecc3:2006},t=_0x2397ca,x=getCesiumValue(this[t(1358)]);return x?Cesium__namespace.Cartographic.toCartesian(Cesium__namespace.Rectangle[t(e._0x47ecc3)](x)):null}get outlinePositions(){const e=_0x2397ca;return this._entity&&(this[e(2480)]=getOutlinePositions(this._entity)),this._outlinePositions}set[_0x2397ca(649)](e){const t={_0x17486d:2480},x=_0x2397ca;this[x(t._0x17486d)]=e}get outlineCoordinates(){return cartesians2lonlats(this.outlinePositions)}get rectangle(){return!this[_0x2397ca(1784)]&&this.positions&&(this._rectangle=Cesium__namespace.Rectangle.fromCartesianArray(this.positions)),this._rectangle}set rectangle(e){const t={_0x5a3662:3654,_0x244b71:2812},x=_0x2397ca;var i;(i=this[x(t._0x5a3662)])!==null&&i!==void 0&&i.enabled&&!(e instanceof Cesium__namespace.CallbackProperty)?this._rectangle_draw=e:(this._rectangle=e,this._entity&&(this[x(t._0x244b71)].coordinates=e))}get points(){const e={_0x239d7d:1047},t=_0x2397ca,x=[];let i;return this[t(e._0x239d7d)]?i=this._positions_draw:i=this._positions,!i&&(i=getOutlinePositions(this._entity,!1)),i[t(1255)](function(s){const o=LngLatPoint.parse(s);!o||!o.valid()||x.push(o)}),this._points=x,this._points}get distance(){return getDistance(this.outlinePositions,!0)}get area(){return getSurfaceArea(this.outlinePositions)}getEntityPositions(){const e={_0x7f3d33:773,_0x2dac2d:295,_0x840333:2999,_0x2d3f42:1464},t=_0x2397ca;if(!this[t(e._0x7f3d33)].rectangle)return null;const x=getCesiumValue(this[t(e._0x7f3d33)][t(1358)][t(1245)],Cesium__namespace.Rectangle),i=getCesiumValue(this[t(773)].rectangle[t(3872)],Number)||0,s=Cesium__namespace.Cartesian3.fromRadians(x.west,x.south,i),o=Cesium__namespace[t(e._0x2dac2d)].fromRadians(x[t(e._0x840333)],x[t(e._0x2d3f42)],i);return[s,o]}[_0x2397ca(2645)](){const e={_0xee7738:1358,_0x425b6c:1245,_0xfc574f:428,_0x2957c6:343,_0x2433d6:856},t=_0x2397ca,x={rectangle:RectangleStyleConver.toCesiumVal(this[t(357)],{},!0)};x[t(1358)].coordinates=this[t(e._0xee7738)],this._positions instanceof Cesium__namespace.CallbackProperty&&(x.rectangle[t(e._0x425b6c)]=new Cesium__namespace[t(e._0xfc574f)](i=>{const s=t,o=this[s(2526)].getValue(i);return o&&o.length>0?(this[s(1784)]=Cesium__namespace.Rectangle.fromCartesianArray(o),this[s(1784)]):void 0},!1)),this._entity=this[t(e._0x2957c6)](x),this[t(2738)](),this._updateOutlineStyle(this._getOutlinePositions(),this.style),this._entity_outlines&&this.entityGraphic.coordinates instanceof Cesium__namespace.CallbackProperty&&this._updateOutlineToCallback(),this.style.label&&this[t(e._0x2433d6)]()}_style2Json(e,t){return RectangleStyleConver.toJSON(e,t,!0)}[_0x2397ca(353)](e,t){const x={_0xa66287:2437},i=_0x2397ca;RectangleStyleConver.toCesiumVal(e,this.entityGraphic,!0),(Cesium__namespace.defined(t[i(x._0xa66287)])||Cesium__namespace.defined(t.height))&&this._updateHeight()}[_0x2397ca(325)](){const e={_0x30e982:1924,_0x4e3be7:773,_0x5f4677:2738},t=_0x2397ca;this.positions?this.rectangle=Cesium__namespace.Rectangle.fromCartesianArray(this.positions):this._rectangle_draw=Cesium__namespace.Rectangle[t(e._0x30e982)](this._positions_draw),this.outlinePositions=getOutlinePositions(this[t(e._0x4e3be7)]),this[t(2915)](this._getOutlinePositions(),this.style),this._updateLabelPosition(),this[t(e._0x5f4677)](),this._updateEditDraggers()}_getOutlineStyle(e,t){const x=_0x2397ca,i=super._getOutlineStyle(e,t);return i.arcType=Cesium__namespace.ArcType[x(1190)],i}_getOutlinePositions(){return[this.outlinePositions]}toGeoJSON(e){return super.toGeoJSON(e)}[_0x2397ca(4036)](e){const t={_0x803b35:2381},x=_0x2397ca;return e!=null&&e.outline?{type:"Polygon",coordinates:[this.getOutlineCoordinates(e==null?void 0:e.closure,e==null?void 0:e.noAlt)]}:{type:"LineString",coordinates:this[x(3711)](e==null?void 0:e[x(t._0x803b35)])}}_setPositionsToCallback(){const e={_0x4dbbe9:1047,_0x3f36a5:1091,_0x58ca51:3520},t={_0x4951e8:2724},x=_0x2397ca;if(this._isCallbackPositions)return;this._isCallbackPositions=!0;const i=this.positions;i?(i instanceof Cesium__namespace.CallbackProperty?this[x(e._0x4dbbe9)]=this.getEntityPositions():this._positions_draw=this[x(e._0x3f36a5)],this._rectangle_draw=Cesium__namespace[x(e._0x58ca51)][x(1924)](this[x(e._0x4dbbe9)])):(this._positions_draw=[],this._rectangle_draw=null),this.rectangle=new Cesium__namespace[x(428)](s=>this[x(t._0x4951e8)],!1),this._updateOutlineToCallback()}[_0x2397ca(1182)](){const e={_0x72d3ed:2526,_0x10d913:2724},t=_0x2397ca;this._isCallbackPositions&&(this._isCallbackPositions=!1,this[t(e._0x72d3ed)]=this._positions_draw,this._rectangle=this[t(e._0x10d913)],this._entity&&(this[t(2812)].coordinates=this[t(2724)]),delete this[t(1047)],delete this._rectangle_draw,this._cancelOutlinePositionsCallback())}updateAttrForDrawing(e){const t={_0x3f43dc:2738},x=_0x2397ca;this._rectangle_draw=Cesium__namespace.Rectangle.fromCartesianArray(this._positions_draw),this._entity_outlines&&(this._updateOutlineToCallback(),this._outlinePositions=getOutlinePositions(this._entity)),this[x(t._0x3f43dc)](!1)}_updateHeight(e=!0){const t={_0x525022:357,_0x326d0d:2437,_0x5b73d4:2437},x=_0x2397ca;if(this.style.clampToGround)return;let i=0;e&&Cesium__namespace[x(639)](this.style.height)?i=this[x(t._0x525022)][x(3872)]:i=getMaxHeight(this._positions_draw||this._positions),this.entityGraphic.height=i,this.style.height=i,Cesium__namespace.defined(this.style.diffHeight)&&(Cesium__namespace.defined(this.style[x(t._0x326d0d)])&&this[x(357)][x(t._0x326d0d)]!==0?this.entityGraphic.extrudedHeight=i+this.style[x(t._0x5b73d4)]:this.entityGraphic[x(3791)]=void 0),this.fire(EventType.editStyle)}getOutlinePositions(e){return getOutlinePositions(this._entity,e)}getOutlineCoordinates(e,t){return cartesians2lonlats(this.getOutlinePositions(e),t)}getRectangle(e){const t=_0x2397ca,x=this._rectangle_draw||this[t(1358)];return e!=null&&e.isFormat?formatRectangle(x):x}isInPoly(e){const t=_0x2397ca;var x;const i=getCesiumValue((x=this._entity[t(1358)])===null||x===void 0?void 0:x[t(1245)],Cesium__namespace[t(3520)]);return Cesium__namespace[t(3520)].contains(i,LngLatPoint.parse(e).toCartographic())}flyTo(e={}){const t=_0x2397ca;if(this._map)return e.clampToGround=this[t(357)].clampToGround,this._map.flyToExtent(getCesiumValue(this[t(1358)],Cesium__namespace.Rectangle),e),this}}register$4("rectangle",RectangleEntity);function getOutlinePositions(n,e=!0){const t={_0x445ef7:3520,_0x259dcc:3872},x=_0x2397ca;if(!n||!n.rectangle)return[];const i=getCesiumValue(n.rectangle.coordinates,Cesium__namespace[x(t._0x445ef7)]);if(!i)return[];const s=getCesiumValue(n[x(1358)].rotation,Number)||0,o=getCesiumValue(n.rectangle[x(t._0x259dcc)],Number)||0,r=getRectangleOuterPositions({rectangle:i,rotation:s,height:o});return e&&r.push(r[0]),r}function getAllPositions(n){const e=getCesiumValue(n.polygon.hierarchy,Cesium__namespace.PolygonHierarchy);return getHierarchyVal(e)}function getPositions(n,e){const t=_0x2397ca;if(!e&&n._positions_draw&&n._positions_draw.length>0)return n._positions_draw;let x=getCesiumValue(n.polygon.hierarchy,Cesium__namespace[t(2164)]);return x&&x instanceof Cesium__namespace.PolygonHierarchy&&(x=x[t(1091)]),x}function getHolesPositions(n){const e=getCesiumValue(n.polygon.hierarchy,Cesium__namespace.PolygonHierarchy),t=getHierarchyVal(e);return t.length>1?t.slice(1):null}function getHierarchyVal(n){const e={_0x4e5fd5:2027},t=_0x2397ca;if(!n)return[];if(n&&n instanceof Cesium__namespace[t(2164)]){let x=[n.positions];for(let i=0,s=n.holes[t(e._0x4e5fd5)];i<s;i++){const o=n.holes[i];x=x[t(3210)](getHierarchyVal(o))}return x}else return[n]}function getPolygonHierarchy(n,e){const t={_0x4b56e9:2027,_0x550a5c:2027},x=_0x2397ca;if(n.length===0)return new Cesium__namespace.PolygonHierarchy;const i=[];if(n[x(t._0x4b56e9)]>1)for(let r=1,c=n[x(t._0x550a5c)];r<c;r++)i.push(new Cesium__namespace[x(2164)](lonlats2cartesians(n[r],e)));const s=n[0];return new Cesium__namespace.PolygonHierarchy(lonlats2cartesians(s,e),i)}function getPolygonHierarchy2(n){const e=_0x2397ca;if(n.length===0)return new Cesium__namespace.PolygonHierarchy;const t=[];if(n.length>1)for(let s=1,o=n.length;s<o;s++)t[e(2434)](new Cesium__namespace.PolygonHierarchy(LngLatArray.toCartesians(n[s])));const x=n[0];return new Cesium__namespace[e(2164)](LngLatArray.toCartesians(x),t)}class EditPolygon extends EditPoly{get[_0x2397ca(2208)](){const e=_0x2397ca;return this[e(3645)][e(2208)]??!0}get clampToGround(){const e=_0x2397ca;var t,x;return this[e(357)][e(1034)]??!getCesiumValue((t=this._graphic)===null||t===void 0||(x=t.entityGraphic)===null||x===void 0?void 0:x.perPositionHeight,Boolean)}[_0x2397ca(239)](){const e={_0x49dba1:3645,_0x53037a:2584},t=_0x2397ca;var x;if(super.bindDraggers(),((x=this[t(3645)]._draw_holes)===null||x===void 0?void 0:x.length)>0)for(let i=0,s=this._graphic._draw_holes.length;i<s;i++)this.bindHolesDraggers(this[t(e._0x49dba1)][t(e._0x53037a)][i],i)}[_0x2397ca(1511)](e,t){const x={_0x1ebd7a:1646,_0x56c044:1646,_0x4fa8b1:2053},i={_0x376380:432},s=_0x2397ca;for(let o=0,r=e[s(2027)];o<r;o++){const c=this[s(x._0x1ebd7a)](e[o]),_=this.createDragger({position:c,onDrag:(l,h)=>{h=this.updatePositionsHeightByAttr(h),l.position=h,e[l.index]=h},onDragEnd:(l,h)=>{this.updateDraggers()}});if(_.index=o,this.draggers.push(_),this.hasMidPoint&&(this.hasClosure||!this.hasClosure&&o<r-1)){const l=(o+1)%r;let h=getMidpoint(c,e[l]);h=this[s(x._0x56c044)](h);const d=this[s(3089)]({position:h,type:PointType[s(1478)],tooltip:this[s(558)].getLangText(s(x._0x4fa8b1)),onDragStart:(u,m)=>{const f=s;e.splice(u[f(3124)],0,m)},onDrag:(u,m)=>{e[u.index]=m},onDragEnd:(u,m)=>{this[s(i._0x376380)](u,m),this.updateDraggers()}});d.index=l,this.draggers.push(d)}}}}const nullColor$1=new Cesium__namespace.Color(0,0,0,.01);class PolygonEntity extends BasePolyEntity{constructor(e={}){super(e),this._minPointNum=e.minPointNum??3,this._clampToGround_reload=!0}get[_0x2397ca(2812)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.polygon}get EditClass(){return EditPolygon}get center(){return this[_0x2397ca(2507)]}get distance(){return getDistance(this.positionsShow,!0)}get positionsShow(){let e=getCesiumValue(this._positions);return e instanceof Cesium__namespace.PolygonHierarchy&&(e=e.positions),this._positions_show??this.getShowPositions(e)}get[_0x2397ca(1679)](){const e=_0x2397ca;var t;return this._hierarchy||((t=this[e(2812)])===null||t===void 0?void 0:t.hierarchy)}get positions(){return this._positions}set positions(e){const t={_0x1adc00:295,_0x32994a:1091,_0x2ab747:1788},x={_0x554950:2799},i=_0x2397ca;var s;if(e){if(!((s=this.editing)!==null&&s!==void 0&&s.enabled)&&(this[i(1019)]=null,this._positions_show=null),e instanceof Cesium__namespace.PolygonHierarchy&&(this._hierarchy=e,e=this[i(1019)].positions),Array.isArray(e)){var o;if(e.length>0&&Array.isArray(e[0])&&e[0].length>0){const _=e[0][0];Array.isArray(_)&&isNumber(_[0])?(this._hierarchy=getPolygonHierarchy(e,this.style[i(3872)]||this.style.setHeight||this[i(357)].addHeight),e=this._hierarchy.positions):_ instanceof Cesium__namespace[i(t._0x1adc00)]&&(this._hierarchy=getPolygonHierarchy2(e),e=this._hierarchy[i(t._0x32994a)])}const r=[],c=[];e.forEach((_,l)=>{const h=i,d=LngLatPoint.parse(_);if(!d)return;let u=this.style.setHeight;Cesium__namespace.defined(u)&&(isString(u)?(u=Number(template(u,this.attr,!0)),isNaN(u)&&(u=0)):Array.isArray(u)&&(u=u[l]||0),d.alt=u);const m=this[h(x._0x554950)](l);m!==0&&(d.alt=d.alt+m),r.push(d),c.push(d.toCartesian())}),this._points=r,(o=this.editing)!==null&&o!==void 0&&o.enabled?this._positions_draw=c:this._positions=c}else this._positions=e;this[i(773)]&&this[i(325)](),this[i(t._0x2ab747)](EventType[i(222)],{positions:this._positions})}}getEntityPositions(){return getPositions(this._entity)}[_0x2397ca(1992)](e){return e}[_0x2397ca(2645)](){const e={_0x12b580:3703,_0x17e9be:3718,_0x3ec9d3:2164,_0x3a397b:367,_0x3170f2:357},t={_0x165f53:1992},x=_0x2397ca,i={polygon:PolygonStyleConver.toCesiumVal(this.style,{},!0)};if(this._positions instanceof Cesium__namespace.CallbackProperty){const s=this._positions[x(2893)](this._map[x(e._0x12b580)][x(e._0x17e9be)]);if(s&&Array[x(4056)](s)){const o=new Cesium__namespace[x(e._0x3ec9d3)];i.polygon.hierarchy=new Cesium__namespace.CallbackProperty(r=>{const c=x;var _;const l=this._positions[c(2893)](r);if(this._positions_show=this[c(t._0x165f53)](l),o.positions=this[c(367)],this._entity_outlines&&((_=this._positions_show)===null||_===void 0?void 0:_.length)>0){var h;((h=this.style.outlineStyle)===null||h===void 0?void 0:h[c(509)])??!0?this.outlinePositions=this._positions_show.concat(this._positions_show[0]):this.outlinePositions=this[c(367)]}return o},!1),this._hierarchy=o}else i.polygon.hierarchy=this[x(2526)]}else this._hierarchy?i.polygon.hierarchy=this._hierarchy:(!this._positions_show&&(this._positions_show=this.getShowPositions(this.positions)),i.polygon[x(1679)]=new Cesium__namespace.PolygonHierarchy(this[x(e._0x3a397b)]));this._entity=this._createEntity(i),this[x(3162)](),this._bindExType(),this[x(2915)](this._getOutlinePositions(),this.style),this._entity.polygon[x(1679)]instanceof Cesium__namespace.CallbackProperty&&this._updateOutlineToCallback(),this[x(e._0x3170f2)].label&&this._addLabel()}_bindExType(){const e={_0x1168e8:3044,_0x1e6463:407,_0x9081a8:3872,_0x396f5a:1597,_0x8aac43:3977,_0x192098:3872,_0x154734:3977,_0xacb2fa:639},t=_0x2397ca,x=this[t(3044)].buildings||this._layer[t(e._0x1168e8)].buildings;if(x&&(x[t(e._0x1e6463)]??!0)){if(x.bottomHeight){let c;isNumber(x.bottomHeight)?c=x.bottomHeight:isString(x.bottomHeight)&&(c=Number(this.attr[x[t(4060)]]||0)),this[t(773)].polygon[t(e._0x9081a8)]=c}const s=Number(this.attr[x[t(e._0x396f5a)]]||1);let o;isNumber(x.height)?o=x.height:isString(x[t(e._0x9081a8)])?o=this[t(1578)][x[t(3872)]]||o:o=3.5;const r=getCesiumValue(this._entity[t(e._0x8aac43)][t(e._0x192098)])||0;this._entity.polygon.extrudedHeight=r+s*o}(this[t(e._0x1168e8)].dth||this._layer.options.dth)&&(this[t(773)][t(e._0x154734)].classificationType=Cesium__namespace[t(1574)].BOTH,!Cesium__namespace.defined(this.style.color)&&(this._entity.polygon[t(3816)]=nullColor$1),!Cesium__namespace[t(e._0xacb2fa)](this.style.height)&&(this._entity.polygon[t(503)]=!1),this[t(773)].polygon.zIndex=99)}[_0x2397ca(3162)](){const e={_0x5b019b:2812,_0x34ce63:357,_0x50046b:2812,_0x571f37:3791},t=_0x2397ca;if(!(!Cesium__namespace[t(639)](this.style.diffHeight)||this[t(e._0x5b019b)].extrudedHeight instanceof Cesium__namespace.CallbackProperty))if(Cesium__namespace.defined(this.style[t(2437)])&&this.style.diffHeight!==0){let x=0;Cesium__namespace.defined(this.style.height)?x=this[t(e._0x34ce63)].height:x=getMaxHeight(this._positions_draw||this._positions),this[t(e._0x50046b)][t(e._0x571f37)]=x+this.style.diffHeight}else this[t(e._0x50046b)].extrudedHeight=void 0}[_0x2397ca(198)](e,t){return PolygonStyleConver[_0x2397ca({_0x444919:1180}._0x444919)](e,t,!0)}[_0x2397ca(353)](e,t){const x={_0x1c52a5:3872},i=_0x2397ca;PolygonStyleConver.toCesiumVal(e,this.entityGraphic,!0),(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace[i(639)](t[i(x._0x1c52a5)]))&&this._updateDiffHeight()}[_0x2397ca(325)](){const e={_0x14c752:2526,_0x5efc40:367,_0x31bbe1:1019,_0x3ad7e2:2812,_0x41c06f:3291},t=_0x2397ca;if(this[t(e._0x14c752)]instanceof Cesium__namespace.CallbackProperty){var x;this.entityGraphic.hierarchy=this._positions,(x=this.editing)!==null&&x!==void 0&&x.enabled&&this._hierarchy&&(this[t(e._0x5efc40)]=this.getShowPositions(this._positions_draw),this._hierarchy.positions=this._positions_show)}else this._hierarchy?this.entityGraphic[t(1679)]=this[t(e._0x31bbe1)]:(this._positions_show=this.getShowPositions(this.positions),this[t(e._0x3ad7e2)][t(1679)]=new Cesium__namespace[t(2164)](this._positions_show));this[t(2915)](this._getOutlinePositions(),this.style),this._updateLabelPosition(),this._updateDiffHeight(),this[t(e._0x41c06f)]()}_getOutlinePositions(){return getAllPositions(this[_0x2397ca({_0x12566f:773}._0x12566f)])}toGeoJSON(e){const t={_0x30c5cc:2777},x=_0x2397ca;return super[x(t._0x30c5cc)](e)}_getGeoJsonGeometry(e){const t={_0x25a540:2434},x={_0x13f66f:2434},i=_0x2397ca;var s,o;let r=this.getCoordinates(e==null?void 0:e.noAlt);return e!=null&&e.closure&&r.length>0&&r[i(t._0x25a540)](r[0]),((s=this._hierarchy)===null||s===void 0||(o=s.holes)===null||o===void 0?void 0:o.length)>0&&(r=[r],getHolesPositions(this._entity).forEach(_=>{const l=i;r[l(x._0x13f66f)](LngLatArray[l(2221)](_))})),{type:i(3938),coordinates:[r]}}setCallbackPositions(e){const t=_0x2397ca;return this._setPositionsToCallback(),e&&(e&&(e=LngLatArray.toCartesians(e)),this[t(1047)]=e,this[t(1019)][t(1091)]=e),this[t(1047)]}_positions_CallbackProperty(){return this[_0x2397ca({_0x51664e:1019}._0x51664e)]}[_0x2397ca(1182)](){const e=_0x2397ca;super[e(1182)](),this._hierarchy=null}[_0x2397ca(2173)](){const e={_0x10dbf0:1089},t=_0x2397ca;super._startDrawHook(),this[t(2915)]([new Cesium__namespace[t(428)](x=>this.outlinePositions,!1)],this.style,{show:!0,width:2,color:this.style[t(e._0x10dbf0)]})}_setPositionsToCallback(){const e={_0x165ee7:773},t=_0x2397ca;this._isCallbackPositions||(this[t(2584)]=getHolesPositions(this[t(e._0x165ee7)]),super._setPositionsToCallback())}updateAttrForDrawing(e){const t={_0x30824a:1019,_0x184535:916,_0x4c37c1:2915},x=_0x2397ca;var i;if(!this[x(1019)]&&(this[x(t._0x30824a)]=new Cesium__namespace.PolygonHierarchy,this._draw_holes)){const r=[];this._draw_holes.forEach(c=>{r[x(2434)](new Cesium__namespace.PolygonHierarchy(c))}),this._hierarchy.holes=r}if(this._positions_show=this.getShowPositions(this._positions_draw),this._hierarchy.positions=this._positions_show,((i=this._positions_show)===null||i===void 0?void 0:i.length)>0){var s;((s=this.style.outlineStyle)===null||s===void 0?void 0:s.closure)??!0?this.outlinePositions=this._positions_show.concat(this._positions_show[0]):this.outlinePositions=this._positions_show}let o;this._positions_draw.length<this[x(t._0x184535)]&&(o={show:!0,width:2,color:this[x(357)].color}),this._updateOutlineToCallback(),this[x(t._0x4c37c1)](null,this.style,o),this[x(3162)]()}}register$4("polygon",PolygonEntity),PolygonEntity.getPositions=getPositions,PolygonEntity[_0x2397ca(2947)]=getAllPositions;class EllipseEntity extends CircleEntity{constructor(e={}){const t=_0x2397ca;super(e),this[t(2770)]=3}}register$4(_0x2397ca(1613),EllipseEntity,!0);function RectangularSensorGraphics(n){const e={_0x5c9c46:3553},t=_0x2397ca;this._show=void 0,this[t(1270)]=void 0,this._xHalfAngle=void 0,this._yHalfAngle=void 0,this._lineColor=void 0,this._showSectorLines=void 0,this._showSectorSegmentLines=void 0,this[t(341)]=void 0,this._material=void 0,this._showDomeSurfaces=void 0,this[t(2922)]=void 0,this._showIntersection=void 0,this._intersectionColor=void 0,this._intersectionWidth=void 0,this[t(2696)]=void 0,this._gaze=void 0,this._showScanPlane=void 0,this[t(e._0x5c9c46)]=void 0,this._scanPlaneMode=void 0,this._scanPlaneRate=void 0,this._definitionChanged=new Cesium__namespace.Event,this.merge(Cesium__namespace.defaultValue(n,Cesium__namespace.defaultValue.EMPTY_OBJECT))}Object.defineProperties(RectangularSensorGraphics[_0x2397ca(2121)],{definitionChanged:{get:function(){return this._definitionChanged}},show:Cesium__namespace[_0x2397ca(3798)]("show"),radius:Cesium__namespace.createPropertyDescriptor("radius"),xHalfAngle:Cesium__namespace[_0x2397ca(3798)](_0x2397ca(818)),yHalfAngle:Cesium__namespace.createPropertyDescriptor("yHalfAngle"),lineColor:Cesium__namespace.createPropertyDescriptor(_0x2397ca(2545)),showSectorLines:Cesium__namespace[_0x2397ca(3798)]("showSectorLines"),showSectorSegmentLines:Cesium__namespace[_0x2397ca(3798)]("showSectorSegmentLines"),showLateralSurfaces:Cesium__namespace.createPropertyDescriptor("showLateralSurfaces"),material:Cesium__namespace.createMaterialPropertyDescriptor(_0x2397ca(3816)),showDomeSurfaces:Cesium__namespace.createPropertyDescriptor("showDomeSurfaces"),showDomeLines:Cesium__namespace[_0x2397ca(3798)]("showDomeLines"),showIntersection:Cesium__namespace.createPropertyDescriptor("showIntersection"),intersectionColor:Cesium__namespace[_0x2397ca(3798)]("intersectionColor"),intersectionWidth:Cesium__namespace.createPropertyDescriptor(_0x2397ca(3229)),showThroughEllipsoid:Cesium__namespace.createPropertyDescriptor("showThroughEllipsoid"),gaze:Cesium__namespace.createPropertyDescriptor(_0x2397ca(1118)),showScanPlane:Cesium__namespace.createPropertyDescriptor(_0x2397ca(2089)),scanPlaneColor:Cesium__namespace.createPropertyDescriptor("scanPlaneColor"),scanPlaneMode:Cesium__namespace[_0x2397ca(3798)]("scanPlaneMode"),scanPlaneRate:Cesium__namespace.createPropertyDescriptor("scanPlaneRate")}),RectangularSensorGraphics[_0x2397ca(2121)].clone=function(n){const e={_0x182c21:639,_0x712e5d:427,_0xb559fe:2374,_0x4017b2:3849,_0x24226b:3229,_0x5b5208:3229,_0x2158dd:1135},t=_0x2397ca;return!Cesium__namespace[t(e._0x182c21)](n)&&(n=new RectangularSensorGraphics),n.show=this[t(3482)],n.radius=this.radius,n.xHalfAngle=this.xHalfAngle,n.yHalfAngle=this[t(e._0x712e5d)],n[t(2545)]=this[t(2545)],n.showSectorLines=this.showSectorLines,n.showSectorSegmentLines=this[t(e._0xb559fe)],n.showLateralSurfaces=this.showLateralSurfaces,n.material=this.material,n[t(e._0x4017b2)]=this.showDomeSurfaces,n[t(859)]=this.showDomeLines,n[t(2806)]=this.showIntersection,n.intersectionColor=this.intersectionColor,n[t(e._0x24226b)]=this[t(e._0x5b5208)],n[t(3243)]=this.showThroughEllipsoid,n[t(1118)]=this.gaze,n[t(2089)]=this[t(2089)],n[t(1135)]=this[t(e._0x2158dd)],n.scanPlaneMode=this.scanPlaneMode,n.scanPlaneRate=this.scanPlaneRate,n},RectangularSensorGraphics.prototype.merge=function(n){const e={_0x3f7ed9:2242,_0x4a5ad5:818,_0x30870e:818,_0x441895:3690,_0x3ab3e0:3849,_0xa8ed5f:3229,_0x5128fc:3243,_0x336b07:2089,_0x322b54:2773,_0x17b09f:1135},t=_0x2397ca;if(!Cesium__namespace[t(639)](n))throw new Cesium__namespace.DeveloperError("source is required.");this.slice=Cesium__namespace.defaultValue(this[t(e._0x3f7ed9)],n[t(2242)]),this[t(3482)]=Cesium__namespace.defaultValue(this.show,n.show),this.radius=Cesium__namespace.defaultValue(this.radius,n.radius),this[t(e._0x4a5ad5)]=Cesium__namespace.defaultValue(this[t(e._0x30870e)],n.xHalfAngle),this.yHalfAngle=Cesium__namespace.defaultValue(this.yHalfAngle,n.yHalfAngle),this.lineColor=Cesium__namespace.defaultValue(this.lineColor,n[t(2545)]),this[t(3415)]=Cesium__namespace.defaultValue(this.showSectorLines,n.showSectorLines),this.showSectorSegmentLines=Cesium__namespace[t(2773)](this.showSectorSegmentLines,n.showSectorSegmentLines),this[t(3690)]=Cesium__namespace.defaultValue(this.showLateralSurfaces,n[t(e._0x441895)]),this.material=Cesium__namespace.defaultValue(this.material,n[t(3816)]),this.showDomeSurfaces=Cesium__namespace[t(2773)](this[t(e._0x3ab3e0)],n.showDomeSurfaces),this[t(859)]=Cesium__namespace.defaultValue(this.showDomeLines,n.showDomeLines),this[t(2806)]=Cesium__namespace.defaultValue(this.showIntersection,n.showIntersection),this.intersectionColor=Cesium__namespace.defaultValue(this.intersectionColor,n.intersectionColor),this[t(e._0xa8ed5f)]=Cesium__namespace.defaultValue(this[t(3229)],n.intersectionWidth),this[t(e._0x5128fc)]=Cesium__namespace.defaultValue(this[t(3243)],n.showThroughEllipsoid),this.gaze=Cesium__namespace.defaultValue(this.gaze,n.gaze),this[t(e._0x336b07)]=Cesium__namespace[t(e._0x322b54)](this[t(e._0x336b07)],n.showScanPlane),this[t(e._0x17b09f)]=Cesium__namespace.defaultValue(this[t(1135)],n.scanPlaneColor),this.scanPlaneMode=Cesium__namespace.defaultValue(this.scanPlaneMode,n.scanPlaneMode),this.scanPlaneRate=Cesium__namespace.defaultValue(this.scanPlaneRate,n.scanPlaneRate)};var RectangularSensorVS=`in vec4 position;
in vec3 normal;
out vec3 v_position;
out vec3 v_positionWC;
out vec3 v_positionEC;
out vec3 v_normalEC;

void main() {
  gl_Position = czm_modelViewProjection * position;
  v_position = vec3(position);
  v_positionWC = (czm_model * position).xyz;
  v_positionEC = (czm_modelView * position).xyz;
  v_normalEC = czm_normal * normal;
}
`,RectangularSensorFS=`uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform float u_type;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  if(u_type == 1.0) {
    return getLineColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.00001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.00001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);
  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }

  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`,RectangularSensor$1=_0x2397ca(2917),RectangularSensorScanPlaneFS=_0x2397ca(3751);const BoundingSphere$1=Cesium__namespace.BoundingSphere,Cartesian3$3=Cesium__namespace.Cartesian3,Color$1=Cesium__namespace.Color,combine$1=Cesium__namespace.combine,ComponentDatatype$1=Cesium__namespace.ComponentDatatype,defaultValue$1=Cesium__namespace.defaultValue,defined$3=Cesium__namespace[_0x2397ca(639)],DeveloperError$1=Cesium__namespace.DeveloperError,Matrix4$1=Cesium__namespace[_0x2397ca(1046)],PrimitiveType$1=Cesium__namespace.PrimitiveType,Buffer=Cesium__namespace[_0x2397ca(3160)],BufferUsage=Cesium__namespace.BufferUsage,DrawCommand=Cesium__namespace.DrawCommand,Pass=Cesium__namespace.Pass,RenderState=Cesium__namespace[_0x2397ca(1298)],ShaderProgram=Cesium__namespace[_0x2397ca(3862)],ShaderSource=Cesium__namespace.ShaderSource,VertexArray=Cesium__namespace.VertexArray,BlendingState=Cesium__namespace.BlendingState,CullFace=Cesium__namespace[_0x2397ca(1435)],Material=Cesium__namespace.Material,SceneMode=Cesium__namespace.SceneMode,VertexFormat$1=Cesium__namespace[_0x2397ca(1565)],CesiumMath$2=Cesium__namespace.Math,Matrix3$2=Cesium__namespace[_0x2397ca(3596)],JulianDate=Cesium__namespace[_0x2397ca(1522)],sin=Math.sin,cos=Math.cos,tan=Math.tan,atan=Math.atan,attributeLocations={position:0,normal:1};function RectangularSensorPrimitive(n){const e={_0x297fd9:1107,_0x5d1e13:3189,_0x3b91b2:3047,_0x1b2295:1270,_0xa03674:2301,_0x395a52:2374,_0x4de4dd:3816,_0x3e4959:1779,_0x40f546:937,_0xd3d58b:3323,_0x3de447:2696,_0x15e790:3970,_0x59393e:1112,_0x3b1187:2651,_0x184e4b:4066,_0x41a171:4066,_0x58fb1a:2912,_0x3733b9:4066,_0x5f3a23:1199},t={_0xc2d63c:221},x={_0x449a92:3222},i=_0x2397ca,s=this;n=defaultValue$1(n,defaultValue$1.EMPTY_OBJECT),this.show=defaultValue$1(n.show,!0),this.slice=defaultValue$1(n[i(2242)],32),this.modelMatrix=Matrix4$1.clone(n.modelMatrix,new Matrix4$1),this[i(1239)]=new Matrix4$1,this[i(e._0x297fd9)]=new Matrix4$1,this._computedScanPlaneModelMatrix=new Matrix4$1,this.radius=defaultValue$1(n[i(e._0x5d1e13)],Number[i(e._0x3b91b2)]),this[i(e._0x1b2295)]=void 0,this.xHalfAngle=defaultValue$1(n[i(818)],0),this[i(e._0xa03674)]=void 0,this.yHalfAngle=defaultValue$1(n.yHalfAngle,0),this._yHalfAngle=void 0,this.lineColor=defaultValue$1(n.lineColor,Color$1.WHITE),this[i(3415)]=defaultValue$1(n.showSectorLines,!0),this[i(e._0x395a52)]=defaultValue$1(n.showSectorSegmentLines,!0),this.showLateralSurfaces=defaultValue$1(n.showLateralSurfaces,!0),this[i(3816)]=defined$3(n[i(3816)])?n[i(e._0x4de4dd)]:Material[i(e._0x3e4959)](Material.ColorType),this._material=void 0,this[i(2432)]=void 0,this.lateralSurfaceMaterial=defined$3(n.lateralSurfaceMaterial)?n[i(1056)]:Material.fromType(Material.ColorType),this._lateralSurfaceMaterial=void 0,this[i(e._0x40f546)]=void 0,this.showDomeSurfaces=defaultValue$1(n.showDomeSurfaces,!0),this.domeSurfaceMaterial=defined$3(n.domeSurfaceMaterial)?n[i(3792)]:Material.fromType(Material[i(1003)]),this[i(e._0xd3d58b)]=void 0,this.showDomeLines=defaultValue$1(n[i(859)],!0),this[i(2806)]=defaultValue$1(n[i(2806)],!0),this.intersectionColor=defaultValue$1(n.intersectionColor,Color$1.WHITE),this.intersectionWidth=defaultValue$1(n.intersectionWidth,5),this.showThroughEllipsoid=defaultValue$1(n.showThroughEllipsoid,!1),this[i(e._0x3de447)]=void 0,this.showScanPlane=defaultValue$1(n[i(2089)],!0),this[i(1135)]=defaultValue$1(n[i(1135)],Color$1[i(e._0x15e790)]),this.scanPlaneMode=defaultValue$1(n[i(e._0x59393e)],"horizontal"),this.scanPlaneRate=defaultValue$1(n[i(3432)],10),this._scanePlaneXHalfAngle=0,this._scanePlaneYHalfAngle=0,this._time=JulianDate.now(),this._boundingSphere=new BoundingSphere$1,this._boundingSphereWC=new BoundingSphere$1,this._sectorFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this._sectorBackCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(e._0x3b1187)],boundingVolume:this._boundingSphereWC}),this._sectorVA=void 0,this._sectorLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this[i(e._0x184e4b)]}),this._sectorLineVA=void 0,this._sectorSegmentLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this[i(e._0x41a171)]}),this._sectorSegmentLineVA=void 0,this[i(2595)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this[i(4066)]}),this._domeBackCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this[i(4066)]}),this._domeVA=void 0,this._domeLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this._boundingSphereWC}),this[i(e._0x58fb1a)]=void 0,this[i(2596)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(2651)],boundingVolume:this[i(e._0x3733b9)]}),this._scanPlaneBackCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this._scanRadialCommand=void 0,this._colorCommands=[],this._frontFaceRS=void 0,this._backFaceRS=void 0,this[i(3205)]=void 0,this._uniforms={u_type:function(){return 0},u_xHalfAngle:function(){return s[i(818)]},u_yHalfAngle:function(){return s.yHalfAngle},u_radius:function(){return s.radius},u_showThroughEllipsoid:function(){return s.showThroughEllipsoid},u_showIntersection:function(){return s.showIntersection},u_intersectionColor:function(){return s[i(x._0x449a92)]},u_intersectionWidth:function(){return s.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return s.lineColor}},this[i(e._0x5f3a23)]={u_xHalfAngle:function(){return s._scanePlaneXHalfAngle},u_yHalfAngle:function(){return s[i(t._0xc2d63c)]},u_radius:function(){return s[i(3189)]},u_color:function(){return s.scanPlaneColor},u_showThroughEllipsoid:function(){return s.showThroughEllipsoid},u_showIntersection:function(){return s.showIntersection},u_intersectionColor:function(){return s[i(3222)]},u_intersectionWidth:function(){return s.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return s[i(2545)]}}}RectangularSensorPrimitive.prototype[_0x2397ca(1653)]=function(n){const e={_0x1e5913:1144,_0x29249a:2301,_0x26b1bf:3189,_0x282b94:1239,_0xc9883f:3243,_0x3db850:2696,_0x4b9e7e:3280,_0x23b9f9:3425,_0x4db842:2538},t=_0x2397ca,x=n.mode;if(!this.show||x!==SceneMode[t(e._0x1e5913)])return;let i=!1,s=!1,o=!1;const r=this.xHalfAngle,c=this.yHalfAngle;if(r<0||c<0)throw new DeveloperError$1(t(1302));if(r===0||c===0)return;(this._xHalfAngle!==r||this._yHalfAngle!==c)&&(this[t(e._0x29249a)]=r,this._yHalfAngle=c,i=!0);const _=this[t(e._0x26b1bf)];if(_<0)throw new DeveloperError$1("this.radius must be greater than or equal to zero.");let l=!1;this._radius!==_&&(l=!0,this._radius=_,this._boundingSphere=new BoundingSphere$1(Cartesian3$3.ZERO,this[t(3189)])),(!Matrix4$1.equals(this.modelMatrix,this._modelMatrix)||l)&&(Matrix4$1[t(3069)](this[t(3455)],this[t(e._0x282b94)]),Matrix4$1[t(1816)](this.modelMatrix,this.radius,this._computedModelMatrix),BoundingSphere$1.transform(this._boundingSphere,this.modelMatrix,this._boundingSphereWC));const d=this.showThroughEllipsoid;this[t(2696)]!==this[t(e._0xc9883f)]&&(this[t(e._0x3db850)]=d,s=!0);const u=this[t(3816)];this[t(3280)]!==u&&(this[t(e._0x4b9e7e)]=u,s=!0,o=!0);const m=u.isTranslucent();if(this._translucent!==m&&(this._translucent=m,s=!0),this[t(2089)]){const y=n.time,C=JulianDate.secondsDifference(y,this._time);C<0&&(this[t(633)]=JulianDate.clone(y,this._time));const v=Math.max(C%this.scanPlaneRate/this[t(3432)],0);let M;const w=new Matrix3$2;if(this.scanPlaneMode==="horizontal"){M=2*c*v-c;const H=cos(M),D=tan(r),F=atan(H*D);this._scanePlaneXHalfAngle=F,this._scanePlaneYHalfAngle=M,Cesium__namespace.Matrix3.fromRotationX(this[t(221)],w)}else{M=2*r*v-r;const H=tan(c),D=cos(M),F=atan(D*H);this[t(e._0x23b9f9)]=M,this[t(221)]=F,Cesium__namespace.Matrix3.fromRotationY(this._scanePlaneXHalfAngle,w)}Cesium__namespace.Matrix4.multiplyByMatrix3(this.modelMatrix,w,this[t(e._0x4db842)]),Matrix4$1.multiplyByUniformScale(this._computedScanPlaneModelMatrix,this[t(3189)],this._computedScanPlaneModelMatrix)}i&&createVertexArray(this,n),s&&createRenderState(this,d,m),o&&createShaderProgram(this,n,u),(s||o)&&createCommands(this,m);const f=n.commandList,g=n.passes,b=this._colorCommands;if(g.render)for(let y=0,C=b[t(2027)];y<C;y++){const v=b[y];f.push(v)}};const nScratch=new Cartesian3$3;function computeUnitPosiiton(n,e,t){const x={_0x41da7f:2434},i=_0x2397ca,s=n.slice,o=cos(t),r=tan(t),c=cos(e),_=tan(e),l=atan(c*r),h=atan(o*_),d=[];for(let m=0;m<s;m++){const f=2*l*m/(s-1)-l;d.push(new Cartesian3$3(0,sin(f),cos(f)))}const u=[];for(let m=0;m<s;m++){const f=2*h*m/(s-1)-h;u[i(x._0x41da7f)](new Cartesian3$3(sin(f),0,cos(f)))}return{zoy:d,zox:u}}function computeSectorPositions(n,e){const t={_0x4c473a:818,_0x96ad9c:427},x={_0xdd039b:295},i=_0x2397ca,s=n[i(t._0x4c473a)],o=n[i(t._0x96ad9c)],r=e[i(2567)],c=e[i(853)],_=[],l=new Matrix3$2;let h=Matrix3$2.fromRotationY(s,l);return _.push(r.map(function(d){return Matrix3$2.multiplyByVector(h,d,new Cesium__namespace.Cartesian3)})),h=Matrix3$2.fromRotationX(-o,l),_.push(c.map(function(d){return Matrix3$2.multiplyByVector(h,d,new Cesium__namespace.Cartesian3)}).reverse()),h=Matrix3$2.fromRotationY(-s,l),_.push(r.map(function(d){const u=i;return Matrix3$2.multiplyByVector(h,d,new Cesium__namespace[u(x._0xdd039b)])})[i(3223)]()),h=Matrix3$2.fromRotationX(o,l),_.push(c.map(function(d){return Matrix3$2.multiplyByVector(h,d,new Cesium__namespace.Cartesian3)})),_}function createSectorVertexArray(n,e){const t={_0x18f759:254},x=_0x2397ca,i=Array.prototype.concat.apply([],e).length-e[x(2027)],s=new Float32Array(2*3*3*i);let o=0;for(let l=0,h=e.length;l<h;l++){const d=e[l],u=Cartesian3$3.normalize(Cartesian3$3.cross(d[0],d[d.length-1],nScratch),nScratch);for(let m=0,f=d.length-1;m<f;m++)s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=-u.x,s[o++]=-u.y,s[o++]=-u.z,s[o++]=d[m].x,s[o++]=d[m].y,s[o++]=d[m].z,s[o++]=-u.x,s[o++]=-u.y,s[o++]=-u.z,s[o++]=d[m+1].x,s[o++]=d[m+1].y,s[o++]=d[m+1].z,s[o++]=-u.x,s[o++]=-u.y,s[o++]=-u.z}const r=Buffer.createVertexBuffer({context:n,typedArray:s,usage:BufferUsage.STATIC_DRAW}),c=2*3*Float32Array[x(868)],_=[{index:attributeLocations.position,vertexBuffer:r,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[x(254)],offsetInBytes:0,strideInBytes:c},{index:attributeLocations[x(2883)],vertexBuffer:r,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[x(t._0x18f759)],offsetInBytes:3*Float32Array.BYTES_PER_ELEMENT,strideInBytes:c}];return new VertexArray({context:n,attributes:_})}function createSectorLineVertexArray(n,e){const t={_0x176f44:1455,_0x13a496:868,_0x466643:760},x=_0x2397ca,i=e.length,s=new Float32Array(3*3*i);let o=0;for(let l=0,h=e[x(2027)];l<h;l++){const d=e[l];s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=d[0].x,s[o++]=d[0].y,s[o++]=d[0].z}const r=Buffer[x(3902)]({context:n,typedArray:s,usage:BufferUsage[x(t._0x176f44)]}),c=3*Float32Array[x(t._0x13a496)],_=[{index:attributeLocations[x(t._0x466643)],vertexBuffer:r,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:c}];return new VertexArray({context:n,attributes:_})}function createSectorSegmentLineVertexArray(n,e){const t={_0x5155bd:254},x=_0x2397ca,i=Array.prototype.concat.apply([],e).length-e.length,s=new Float32Array(3*3*i);let o=0;for(let l=0,h=e.length;l<h;l++){const d=e[l];for(let u=0,m=d[x(2027)]-1;u<m;u++)s[o++]=d[u].x,s[o++]=d[u].y,s[o++]=d[u].z,s[o++]=d[u+1].x,s[o++]=d[u+1].y,s[o++]=d[u+1].z}const r=Buffer.createVertexBuffer({context:n,typedArray:s,usage:BufferUsage.STATIC_DRAW}),c=3*Float32Array[x(868)],_=[{index:attributeLocations.position,vertexBuffer:r,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[x(t._0x5155bd)],offsetInBytes:0,strideInBytes:c}];return new VertexArray({context:n,attributes:_})}function createDomeVertexArray(n){const e=_0x2397ca,t=Cesium__namespace.EllipsoidGeometry[e(2054)](new Cesium__namespace.EllipsoidGeometry({vertexFormat:VertexFormat$1[e(1346)],stackPartitions:32,slicePartitions:32}));return VertexArray.fromGeometry({context:n,geometry:t,attributeLocations,bufferUsage:BufferUsage[e(1455)],interleave:!1})}function createDomeLineVertexArray(n){const e={_0x2f9476:3404,_0x4542cb:1346,_0x37ba3e:676},t=_0x2397ca,x=Cesium__namespace[t(3404)].createGeometry(new Cesium__namespace[t(e._0x2f9476)]({vertexFormat:VertexFormat$1[t(e._0x4542cb)],stackPartitions:32,slicePartitions:32}));return VertexArray[t(e._0x37ba3e)]({context:n,geometry:x,attributeLocations,bufferUsage:BufferUsage.STATIC_DRAW,interleave:!1})}function createScanPlaneVertexArray(n,e){const t={_0x16e26c:760,_0x23987d:254},x=_0x2397ca,i=e.length-1,s=new Float32Array(3*3*i);let o=0;for(let l=0;l<i;l++)s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=e[l].x,s[o++]=e[l].y,s[o++]=e[l].z,s[o++]=e[l+1].x,s[o++]=e[l+1].y,s[o++]=e[l+1].z;const r=Buffer.createVertexBuffer({context:n,typedArray:s,usage:BufferUsage[x(1455)]}),c=3*Float32Array.BYTES_PER_ELEMENT,_=[{index:attributeLocations[x(t._0x16e26c)],vertexBuffer:r,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[x(t._0x23987d)],offsetInBytes:0,strideInBytes:c}];return new VertexArray({context:n,attributes:_})}function createVertexArray(n,e){const t={_0x33dd51:3634,_0x22c1b3:1835},x=_0x2397ca,i=e.context,s=computeUnitPosiiton(n,n[x(818)],n.yHalfAngle),o=computeSectorPositions(n,s);if(n[x(3690)]&&(n._sectorVA=createSectorVertexArray(i,o)),n.showSectorLines&&(n[x(2597)]=createSectorLineVertexArray(i,o)),n.showSectorSegmentLines&&(n._sectorSegmentLineVA=createSectorSegmentLineVertexArray(i,o)),n.showDomeSurfaces&&(n._domeVA=createDomeVertexArray(i)),n.showDomeLines&&(n[x(2912)]=createDomeLineVertexArray(i)),n.showScanPlane)if(n.scanPlaneMode===x(t._0x33dd51)){const r=computeUnitPosiiton(n,CesiumMath$2.PI_OVER_TWO,0);n[x(t._0x22c1b3)]=createScanPlaneVertexArray(i,r.zox)}else{const r=computeUnitPosiiton(n,0,CesiumMath$2.PI_OVER_TWO);n._scanPlaneVA=createScanPlaneVertexArray(i,r.zoy)}}function createCommonShaderProgram(n,e,t){const x=_0x2397ca,i=e.context,s=RectangularSensorVS,o=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorFS]});n._sp=ShaderProgram[x(342)]({context:i,shaderProgram:n._sp,vertexShaderSource:s,fragmentShaderSource:o,attributeLocations});const r=new ShaderSource({sources:[RectangularSensor$1,t[x(2612)],RectangularSensorFS],pickColorQualifier:"uniform"});n._pickSP=ShaderProgram.replaceCache({context:i,shaderProgram:n._pickSP,vertexShaderSource:s,fragmentShaderSource:r,attributeLocations})}function createScanPlaneShaderProgram(n,e,t){const x={_0x56aa7c:305},i=_0x2397ca,s=e.context,o=RectangularSensorVS,r=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorScanPlaneFS]});n._scanePlaneSP=ShaderProgram[i(342)]({context:s,shaderProgram:n[i(x._0x56aa7c)],vertexShaderSource:o,fragmentShaderSource:r,attributeLocations})}function createShaderProgram(n,e,t){const x={_0x183b77:2089},i=_0x2397ca;createCommonShaderProgram(n,e,t),n[i(x._0x183b77)]&&createScanPlaneShaderProgram(n,e,t)}function createRenderState(n,e,t){const x={_0x48ff23:2298,_0x38ce23:1625,_0x129d90:1981},i=_0x2397ca;t?(n._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:!1,blending:BlendingState[i(x._0x48ff23)],cull:{enabled:!0,face:CullFace.BACK}}),n[i(x._0x38ce23)]=RenderState.fromCache({depthTest:{enabled:!e},depthMask:!1,blending:BlendingState.ALPHA_BLEND,cull:{enabled:!0,face:CullFace.FRONT}}),n._pickRS=RenderState[i(x._0x129d90)]({depthTest:{enabled:!e},depthMask:!1,blending:BlendingState.ALPHA_BLEND})):(n._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:!0}),n._pickRS=RenderState[i(1981)]({depthTest:{enabled:!0},depthMask:!0}))}function createCommand(n,e,t,x,i,s,o,r,c,_,l,h){const d={_0x5e294e:233,_0x2e27c7:3043,_0x1797e4:2767},u=_0x2397ca;_&&t&&(t.vertexArray=o,t.renderState=i,t.shaderProgram=s,t[u(d._0x5e294e)]=combine$1(r,n._material._uniforms),t.uniformMap[u(d._0x2e27c7)]=function(){return-1},t.pass=l,t.modelMatrix=c,n._colorCommands.push(t)),e.vertexArray=o,e.renderState=x,e.shaderProgram=s,e.uniformMap=combine$1(r,n._material._uniforms),h&&(e.uniformMap.u_type=function(){return 1}),e.pass=l,e[u(3455)]=c,n[u(d._0x1797e4)].push(e)}function createCommands(n,e){const t={_0x340b71:2767,_0x1c3e6b:1665,_0x4cbb1c:1625,_0x144f0f:3086,_0x610163:3106,_0x4cc8e4:1107,_0x31027:3849,_0x1e6663:218,_0x3583ee:1625,_0x5066f0:3205,_0x339f79:2538},x=_0x2397ca;n[x(t._0x340b71)].length=0;const i=e?Pass[x(2966)]:Pass.OPAQUE;n.showLateralSurfaces&&createCommand(n,n._sectorFrontCommand,n[x(t._0x1c3e6b)],n._frontFaceRS,n[x(t._0x4cbb1c)],n._sp,n._sectorVA,n[x(t._0x144f0f)],n[x(1107)],e,i),n.showSectorLines&&createCommand(n,n._sectorLineCommand,void 0,n[x(t._0x610163)],n[x(t._0x4cbb1c)],n._sp,n._sectorLineVA,n._uniforms,n._computedModelMatrix,e,i,!0),n.showSectorSegmentLines&&createCommand(n,n._sectorSegmentLineCommand,void 0,n._frontFaceRS,n[x(t._0x4cbb1c)],n._sp,n._sectorSegmentLineVA,n._uniforms,n[x(t._0x4cc8e4)],e,i,!0),n[x(t._0x31027)]&&createCommand(n,n._domeFrontCommand,n._domeBackCommand,n._frontFaceRS,n._backFaceRS,n._sp,n._domeVA,n._uniforms,n._computedModelMatrix,e,i),n.showDomeLines&&createCommand(n,n[x(t._0x1e6663)],void 0,n._frontFaceRS,n[x(t._0x3583ee)],n[x(t._0x5066f0)],n._domeLineVA,n._uniforms,n._computedModelMatrix,e,i,!0),n.showScanPlane&&createCommand(n,n._scanPlaneFrontCommand,n._scanPlaneBackCommand,n[x(3106)],n._backFaceRS,n._scanePlaneSP,n[x(1835)],n[x(1199)],n[x(t._0x339f79)],e,i)}const AssociativeArray=Cesium__namespace.AssociativeArray,Cartesian3$2=Cesium__namespace.Cartesian3,Color=Cesium__namespace.Color,defined$2=Cesium__namespace.defined,DeveloperError=Cesium__namespace.DeveloperError,Matrix3$1=Cesium__namespace.Matrix3,Matrix4=Cesium__namespace.Matrix4,Quaternion$1=Cesium__namespace.Quaternion,MaterialProperty=Cesium__namespace.MaterialProperty,Property=Cesium__namespace[_0x2397ca(582)],matrix3Scratch=new Matrix3$1,cachedPosition=new Cartesian3$2,cachedGazePosition=new Cartesian3$2,cachedOrientation=new Quaternion$1,diffVectorScratch=new Cartesian3$2,orientationScratch=new Quaternion$1;function removePrimitive(n,e,t){const x={_0x18c117:2689,_0x34bfa8:2511},i=_0x2397ca,s=e[n.id];if(Cesium__namespace.defined(s)){const o=s.primitive;try{t[i(x._0x18c117)](o)}catch{}o[i(x._0x34bfa8)]&&!o.isDestroyed()&&o.destroy(),delete e[n.id]}}function RectangularSensorVisualizer(n,e){const t={_0x216734:2121,_0x231a3b:3216},x=_0x2397ca;if(!defined$2(n))throw new DeveloperError(x(770));if(!defined$2(e))throw new DeveloperError("entityCollection is required.");e[x(1994)].addEventListener(RectangularSensorVisualizer[x(t._0x216734)][x(1950)],this),this._scene=n,this._primitives=n[x(1187)],this._entityCollection=e,this[x(t._0x231a3b)]={},this._entitiesToVisualize=new AssociativeArray,this._onCollectionChanged(e,e.values,[],[])}RectangularSensorVisualizer.prototype.update=function(n){const e={_0x38f929:1546,_0x69b788:2301,_0x3ecfb8:3482,_0x56442c:1546,_0x439d85:2628,_0x4f0292:851,_0x39a8d0:3185,_0x485b69:3690,_0x1aef6b:3816,_0xfe8a8f:3280,_0x28008b:3849,_0x458b23:859,_0x1f3414:3222,_0x2ed708:1713,_0x125f14:3970},t=_0x2397ca;if(!defined$2(n))throw new DeveloperError("time is required.");const x=this._entitiesToVisualize.values,i=this[t(3216)],s=this[t(1920)];let o,r,c,_,l;for(let h=0,d=x.length;h<d;h++){const u=x[h],m=u._rectangularSensorMars;let f=i[u.id],g=u[t(3395)]&&u.isAvailable(n)&&Property.getValueOrDefault(m._show,n,!0);if(g&&(o=Property[t(e._0x38f929)](u._position,n,cachedPosition),r=Property.getValueOrUndefined(u._orientation,n,cachedOrientation),c=Property.getValueOrUndefined(m._radius,n),_=Property[t(e._0x38f929)](m[t(e._0x69b788)],n),l=Property[t(e._0x38f929)](m._yHalfAngle,n),g=defined$2(o)&&defined$2(_)&&defined$2(l)),!g){defined$2(f)&&(f.primitive[t(e._0x3ecfb8)]=!1);continue}let b=defined$2(f)?f.primitive:void 0;!defined$2(b)&&(b=new RectangularSensorPrimitive,b.id=u,s[t(565)](b),f={primitive:b,position:void 0,orientation:void 0},i[u.id]=f);const y=Property[t(e._0x56442c)](m._gaze,n);if(defined$2(y)){const C=Property.getValueOrUndefined(y._position,n,cachedGazePosition);if(!defined$2(o)||!defined$2(C))continue;const v=Cartesian3$2.subtract(o,C,diffVectorScratch),M=Cartesian3$2.angleBetween(Cesium__namespace.Cartesian3.UNIT_Z,v),w=Cartesian3$2.cross(Cesium__namespace.Cartesian3.UNIT_Z,v,diffVectorScratch);r=Quaternion$1[t(e._0x439d85)](w,M-Math.PI,orientationScratch),c=Cartesian3$2.distance(o,C),b.modelMatrix=Matrix4[t(e._0x4f0292)](Matrix3$1.fromQuaternion(r,matrix3Scratch),o,b.modelMatrix)}else(!Cartesian3$2.equals(o,f.position)||!Quaternion$1.equals(r,f.orientation))&&(defined$2(r)?(b.modelMatrix=Matrix4[t(851)](Matrix3$1.fromQuaternion(r,matrix3Scratch),o,b.modelMatrix),f.position=Cartesian3$2.clone(o,f.position),f.orientation=Quaternion$1.clone(r,f.orientation)):(b.modelMatrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(o),f.position=Cartesian3$2.clone(o,f.position)));b[t(3482)]=!0,b.gaze=y,b.radius=c,b.xHalfAngle=_,b.yHalfAngle=l,b.lineColor=Property.getValueOrDefault(m._lineColor,n,Color.WHITE),b[t(3415)]=Property[t(1713)](m[t(e._0x39a8d0)],n,!0),b.showSectorSegmentLines=Property.getValueOrDefault(m._showSectorSegmentLines,n,!0),b[t(e._0x485b69)]=Property.getValueOrDefault(m[t(341)],n,!0),b[t(e._0x1aef6b)]=MaterialProperty.getValue(n,m[t(e._0xfe8a8f)],b.material),b[t(e._0x28008b)]=Property.getValueOrDefault(m._showDomeSurfaces,n,!0),b[t(e._0x458b23)]=Property.getValueOrDefault(m[t(2922)],n,!0),b.showIntersection=Property.getValueOrDefault(m._showIntersection,n,!0),b[t(e._0x1f3414)]=Property[t(e._0x2ed708)](m._intersectionColor,n,Color[t(e._0x125f14)]),b.intersectionWidth=Property.getValueOrDefault(m._intersectionWidth,n,1),b.showThroughEllipsoid=Property.getValueOrDefault(m._showThroughEllipsoid,n,!1),b.scanPlaneMode=Property.getValueOrDefault(m._scanPlaneMode,n),b[t(1135)]=Property[t(1713)](m._scanPlaneColor,n,Color.WHITE),b.showScanPlane=Property[t(1713)](m._showScanPlane,n,!0),b.scanPlaneRate=Property.getValueOrDefault(m._scanPlaneRate,n,1)}return!0},RectangularSensorVisualizer.prototype[_0x2397ca(2511)]=function(){return!1},RectangularSensorVisualizer.prototype.destroy=function(){const n={_0x417774:2451},e=_0x2397ca,t=this[e(n._0x417774)].values,x=this._hash,i=this._primitives;for(let s=t.length-1;s>-1;s--)removePrimitive(t[s],x,i);for(const s in this)delete this[s];return Cesium__namespace.destroyObject(this)},RectangularSensorVisualizer.prototype._onCollectionChanged=function(n,e,t,x){const i={_0x50e775:3216,_0x17e552:1173},s=_0x2397ca,o=this._entitiesToVisualize;if(!o)return;const r=this[s(i._0x50e775)],c=this[s(1920)];let _,l;for(_=e.length-1;_>-1;_--)l=e[_],defined$2(l[s(1327)])&&defined$2(l._position)&&o.set(l.id,l);for(_=x.length-1;_>-1;_--)l=x[_],defined$2(l._rectangularSensorMars)&&defined$2(l[s(i._0x17e552)])?o.set(l.id,l):(removePrimitive(l,r,c),o.remove(l.id));for(_=t.length-1;_>-1;_--)l=t[_],removePrimitive(l,r,c),o.remove(l.id)};const originalDefaultVisualizersCallback=Cesium__namespace.DataSourceDisplay.defaultVisualizersCallback;Cesium__namespace.DataSourceDisplay.defaultVisualizersCallback=function(n,e,t){const x={_0xf007f3:3210},i=_0x2397ca,s=t.entities;return originalDefaultVisualizersCallback(n,e,t)[i(x._0xf007f3)]([new RectangularSensorVisualizer(n,s)])};class RectangularSensor extends BasePointEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.rectangularSensorMars}get[_0x2397ca(3189)](){return this[_0x2397ca({_0x2d4d3c:357}._0x2d4d3c)].radius}set radius(e){this.style.radius=e,this._entity&&(this.entityGraphic.radius=e)}_mountedHook(){const e={_0x1f131a:760,_0x5b3eec:357,_0x3c533b:856},t=_0x2397ca,x={position:this[t(e._0x1f131a)],orientation:this.getOrientation(),rectangularSensorMars:new RectangularSensorGraphics(RectangularSensorStyleConver.toCesiumVal(this[t(e._0x5b3eec)]))};this._entity=this._createEntity(x),this[t(e._0x5b3eec)].label&&this[t(e._0x3c533b)]()}_updateStyleHook(e,t){const x=_0x2397ca;if(this._entity&&this.isAdded){const i=this[x(3831)].dataSource;i.entities.remove(this[x(773)]),delete this._entity,this._mountedHook(),i.entities[x(565)](this[x(773)])}}_updateEntityOpacity(e,t){const x={_0x2626c0:396},i=_0x2397ca,s=e==null?void 0:e.material;if(!s)return!1;const o=getCesiumColor(s.color,Cesium__namespace.Color.WHITE);return!Cesium__namespace.defined(this._material_color_alpha)&&(this._material_color_alpha=o.alpha),s.color=o[i(x._0x2626c0)](this._material_color_alpha*t),!0}_updateExOpacity(e){const t={_0x53d4a7:3600,_0x260faa:2708,_0x17cc19:639},x=_0x2397ca,i=getCesiumColor(this.entityGraphic.lineColor,Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this._lineColor_alpha)&&(this[x(t._0x53d4a7)]=i[x(t._0x260faa)]),this[x(2812)].lineColor=i.withAlpha(this._lineColor_alpha*e);const s=getCesiumColor(this.entityGraphic.scanPlaneColor,Cesium__namespace.Color.WHITE);!Cesium__namespace[x(t._0x17cc19)](this._scanPlaneColor_alpha)&&(this[x(2589)]=s.alpha),this.entityGraphic[x(1135)]=s.withAlpha(this._scanPlaneColor_alpha*e)}_style2Json(e,t){return RectangularSensorStyleConver.toJSON(e,t,!0)}}register$4(_0x2397ca(3221),RectangularSensor,!0);class EditVideo2D extends EditBase{bindDraggers(){const e=_0x2397ca,t=this._graphic[e(760)],x=this.createDragger({position:t,onDragEnd:(i,s)=>{const o=e;this[o(3645)].position=s}});this.draggers.push(x)}}const DEF_STYLE$m={distance:.1,perPositionHeight:!0,showFrustum:!1,opacity:1,flipx:!1,flipy:!1};class Video2D extends PolygonEntity{constructor(e={}){const t={_0x561295:760,_0x47ded8:1641},x=_0x2397ca;e.style={...DEF_STYLE$m,...e[x(357)]},super(e),e[x(760)]&&(this[x(t._0x561295)]=e[x(760)]),this[x(t._0x47ded8)]=!0}get czmObjectEx(){const e={_0x2f99bd:2923,_0x8b023e:668},t=_0x2397ca;let x=[];return this[t(e._0x2f99bd)]&&x.push(this._frustumPrimitive),this[t(e._0x8b023e)]&&x.push(this[t(668)]),this._entity_outlines&&(x=x[t(3210)](this._entity_outlines)),x}get EditClass(){return EditVideo2D}get position(){return getPositionValue(this[_0x2397ca({_0x440ca9:1173}._0x440ca9)])}set position(e){const t=_0x2397ca;var x;this._point=LngLatPoint.parse(e),this._position=(x=this._point)===null||x===void 0?void 0:x[t(799)](),this[t(773)]&&(this._updateDraw(),this[t(325)](),this._bindHierarchy())}get[_0x2397ca(2800)](){return this._point}get coordinate(){const e=_0x2397ca;return this.point[e(2221)]()}get targetPosition(){return this.options.targetPosition}set targetPosition(e){const t={_0x707b23:230,_0x5784fa:295,_0x19031e:2527,_0x2c63b9:357},x=_0x2397ca;var i;if(this.options.targetPosition=e,!this._map)return;const s=this.position;if(!s)return;const o=LngLatPoint.toCartesian(e,(i=this._map)===null||i===void 0?void 0:i[x(3718)]);this.distance=Cesium__namespace[x(295)][x(t._0x707b23)](s,o);const r=Cesium__namespace.Cartesian3[x(960)](Cesium__namespace[x(t._0x5784fa)][x(t._0x19031e)](o,s,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3.normalize(s,new Cesium__namespace[x(295)]),_=new Cesium__namespace.Camera(this._map.scene);_.position=s,_.direction=r,_.up=c,this[x(t._0x2c63b9)].heading=Cesium__namespace.Math.toDegrees(_.heading),this.style.pitch=Cesium__namespace.Math[x(778)](_.pitch),this._updateDraw(),this[x(1996)]()}get[_0x2397ca(1722)](){return this.style.heading??0}set heading(e){const t=_0x2397ca;this.style.heading=e,this[t(519)](),this._bindHierarchy()}get[_0x2397ca(227)](){const e=_0x2397ca;return this.style[e(227)]??0}set pitch(e){const t=_0x2397ca;this.style.pitch=e,this._updateDraw(),this[t(1996)]()}get roll(){const e={_0x44db58:2969},t=_0x2397ca;return this[t(357)][t(e._0x44db58)]??0}set roll(e){const t=_0x2397ca;this.style[t(2969)]=e,this._updateDraw(),this[t(1996)]()}get angle(){const e={_0x26c004:357},t=_0x2397ca;return this[t(e._0x26c004)][t(3143)]}set angle(e){const t={_0x4fa765:3143,_0x5d8f69:519},x=_0x2397ca;this.style[x(t._0x4fa765)]=e,this[x(t._0x5d8f69)](),this._bindHierarchy()}get angle2(){return this[_0x2397ca(357)].angle2??this.style.angle}set angle2(e){const t={_0x17949c:357,_0x4fbdbe:2924,_0x2697be:519},x=_0x2397ca;this[x(t._0x17949c)][x(t._0x4fbdbe)]=e,this[x(t._0x2697be)](),this._bindHierarchy()}get distance(){const e={_0x43841d:230},t=_0x2397ca;return this.style[t(e._0x43841d)]}set distance(e){const t=_0x2397ca;this.style.distance=e,this._updateDraw(),this[t(1996)]()}get opacity(){return this[_0x2397ca(357)].opacity}set opacity(e){const t={_0x511240:3977},x=_0x2397ca;this.style.opacity=e,this._entity&&(this._entity[x(t._0x511240)][x(3816)]._color._value.alpha=e,this._entity.polygon.material[x(3418)]=e!==1)}get[_0x2397ca(4055)](){return this.style.flipx}set flipx(e){const t={_0xf02b16:4055,_0x36cd62:3816},x=_0x2397ca;this.style[x(t._0xf02b16)]=e,this._entity&&(this._entity.polygon[x(t._0x36cd62)].flipx=e)}get showFrustum(){const e={_0x15fb06:1541},t=_0x2397ca;return this.style[t(e._0x15fb06)]}set[_0x2397ca(1541)](e){const t=_0x2397ca;this.style.showFrustum=e,this._frustumPrimitive[t(3482)]=e}get[_0x2397ca(3533)](){return this._videoPlay}set play(e){const t=_0x2397ca;if(this._videoPlay=e,!!this._videoContainer)try{this[t(1641)]?this._videoContainer[t(3533)]():this._videoContainer[t(1328)]()}catch{}}updateVideoContainer(){const e={_0x9b6389:3405,_0x1f53ec:527,_0x3cb4b7:527,_0x2e9271:357,_0x62f82b:1267,_0x631ef:4010,_0x5a0e55:2486},t=_0x2397ca;var x;this._hasRemoveElement&&(x=this._videoContainer)!==null&&x!==void 0&&x.parentNode&&(this._videoContainer[t(e._0x9b6389)].removeChild(this[t(e._0x1f53ec)]),delete this._hasRemoveElement,delete this[t(e._0x3cb4b7)]),this.style.url?(this._videoContainer=createVideo(this.style.url,this.style.fileType,"",document[t(692)]),this[t(e._0x1f53ec)][t(e._0x2e9271)].display="none",this[t(e._0x62f82b)]=!0):this.style.container&&(this._videoContainer=this.style.container),this._videoContainer&&(this[t(773)][t(3977)][t(3816)]=new Image2MaterialProperty({image:this[t(e._0x3cb4b7)],color:Cesium__namespace[t(2134)].WHITE.withAlpha(this.style.opacity),transparent:this.style[t(e._0x631ef)]!==1,flipx:this[t(357)].flipx,flipy:this.style[t(e._0x5a0e55)]}))}_mountedHook(){const e={_0x252f7a:2645},t=_0x2397ca;super[t(e._0x252f7a)](),this.options[t(2683)]&&(this.targetPosition=this.options.targetPosition),this.updateVideoContainer()}[_0x2397ca(353)](e,t){const x={_0x227bed:353,_0x363532:914},i=_0x2397ca;super[i(x._0x227bed)](e,t),(t[i(x._0x363532)]||t.container)&&this.updateVideoContainer()}_addedHook(e){const t={_0x7ae134:1996},x=_0x2397ca;this._updateDraw(),this[x(t._0x7ae134)](),this.dataSource.entities.add(this._entity)}[_0x2397ca(380)](){const e={_0x1c8344:2923,_0x348cf2:773},t=_0x2397ca;var x;this[t(e._0x1c8344)]&&(this._layer.primitiveCollection.remove(this._frustumPrimitive),delete this._frustumPrimitive),this.dataSource.entities.remove(this[t(e._0x348cf2)]),this._hasRemoveElement&&(x=this._videoContainer)!==null&&x!==void 0&&x.parentNode&&(this._videoContainer.parentNode.removeChild(this[t(527)]),delete this._hasRemoveElement,delete this._videoContainer)}_updateDraw(){const e={_0x29dda0:3399,_0x334fb3:3876,_0x18cbc1:2032,_0x570b44:2969,_0x105541:1110,_0x1507a3:1110,_0x31081a:230,_0x2ff9cd:2500,_0x4c8e62:1340,_0x1c7592:2880,_0x1cb289:607,_0x104ebf:295,_0x125b37:2527,_0x1f0d83:295,_0x368851:2526},t=_0x2397ca;if(!this._map)return;const x=this.position;if(!x)return;const i=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace.Math[t(2500)](this.pitch),Cesium__namespace.Math.toRadians(this.roll)),s=new Cesium__namespace.Camera(this[t(558)][t(e._0x29dda0)]);s.position=x,s[t(1209)].fov=Cesium__namespace[t(e._0x334fb3)].toRadians(this.angle*2),s.frustum.aspectRatio=this.angle/this.angle2,s.frustum.near=.01,s.frustum[t(e._0x18cbc1)]=this.style.distance,s.setView({destination:x,orientation:{heading:i[t(1722)],pitch:i[t(227)],roll:i[t(e._0x570b44)]}}),this._createFrustumPrimitive(s);const o=s.directionWC,r=s.upWC,c=s.rightWC,_=new Cesium__namespace[t(e._0x105541)](x,o),l=Cesium__namespace[t(e._0x1507a3)].getPoint(_,this.style[t(e._0x31081a)],new Cesium__namespace.Cartesian3),h=Cesium__namespace[t(3876)][t(e._0x2ff9cd)](this[t(3143)]),d=Math.tan(h),u=this.style.distance*d,m=u/s[t(1209)][t(e._0x4c8e62)],f=Math[t(e._0x1c7592)](u*u+m*m),g=new Cesium__namespace.Cartesian3,b=new Cesium__namespace.Ray(l,c),y=Cesium__namespace.Ray[t(e._0x1cb289)](b,u,new Cesium__namespace.Cartesian3),C=new Cesium__namespace.Ray(y,r);Cesium__namespace.Ray.getPoint(C,m,g);const v=new Cesium__namespace[t(e._0x104ebf)],M=Cesium__namespace[t(295)].negate(r,new Cesium__namespace.Cartesian3),w=new Cesium__namespace.Ray(y,M);Cesium__namespace.Ray.getPoint(w,m,v);const H=new Cesium__namespace.Cartesian3,D=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3[t(e._0x125b37)](l,g,new Cesium__namespace[t(e._0x1f0d83)]),new Cesium__namespace.Cartesian3),F=new Cesium__namespace[t(e._0x1507a3)](l,D);Cesium__namespace.Ray.getPoint(F,f,H);const L=new Cesium__namespace.Cartesian3,B=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(l,v,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),Y=new Cesium__namespace[t(1110)](l,B);Cesium__namespace.Ray.getPoint(Y,f,L);const j=[L,g,v,H];this._positions=j,this._positions_draw&&(this._positions_draw=this[t(e._0x368851)])}_bindHierarchy(){const e={_0x39a67e:1173},t=_0x2397ca;if(this._entity)if(this[t(e._0x39a67e)]instanceof Cesium__namespace.CallbackProperty||this[t(1173)]instanceof Cesium__namespace.SampledPositionProperty){const x=new Cesium__namespace[t(2164)];this._entity.polygon.hierarchy=new Cesium__namespace.CallbackProperty(i=>(this._updateDraw(),x.positions=this._positions,x),!1)}else this._entity.polygon.hierarchy=new Cesium__namespace.PolygonHierarchy(this[t(2526)])}[_0x2397ca(3277)](e){const t={_0x296398:3596,_0x2f9991:3596,_0x1b0576:2689,_0x5ba247:3629,_0x5edeee:4028,_0x503714:3831},x=_0x2397ca,i=e[x(1943)],s=e.upWC;let o=e.rightWC;o=Cesium__namespace[x(295)].negate(o,new Cesium__namespace.Cartesian3);const r=new Cesium__namespace[x(t._0x296398)];Cesium__namespace.Matrix3.setColumn(r,0,o,r),Cesium__namespace[x(t._0x296398)][x(1137)](r,1,s,r),Cesium__namespace[x(t._0x2f9991)].setColumn(r,2,i,r);const c=Cesium__namespace.Quaternion.fromRotationMatrix(r,new Cesium__namespace.Quaternion);this._frustumPrimitive&&this._layer.primitiveCollection[x(t._0x1b0576)](this._frustumPrimitive),this._frustumPrimitive=new Cesium__namespace[x(t._0x5ba247)]({geometryInstances:new Cesium__namespace[x(3953)]({id:this.id,geometry:new Cesium__namespace.FrustumOutlineGeometry({origin:e.position,orientation:c,frustum:e.frustum,_drawNearPlane:!0}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[x(t._0x5edeee)](Cesium__namespace.Color.AZURE)}}),appearance:new Cesium__namespace.PerInstanceColorAppearance({translucent:!1,flat:!0}),asynchronous:!1,show:this.showFrustum&&this.show}),this[x(t._0x503714)].primitiveCollection.add(this._frustumPrimitive)}_style2JsonBase(e,t){const x={_0x3af732:571,_0x7fb88:571,_0xf50555:2953,_0x556ad9:527},i=_0x2397ca,s=getAttrVal(e,{onlySimpleType:!0});return this.style[i(x._0x3af732)]&&(s[i(x._0x7fb88)]=i(x._0xf50555)+this[i(x._0x556ad9)].id+")"),s}[_0x2397ca(4036)](e){const t=_0x2397ca;return{type:"Point",coordinates:this[t(746)](e==null?void 0:e[t(2381)])}}[_0x2397ca(746)](e){return this[_0x2397ca(2800)]?this.point.toArray(e):[]}setView(){const e={_0x2f71d8:3400,_0x22c5c1:3876,_0x3a1b69:2500,_0x384f6e:2500},t=_0x2397ca;this._map&&this._map[t(e._0x2f71d8)].setView({destination:this.position,orientation:{heading:Cesium__namespace[t(e._0x22c5c1)].toRadians(this.heading),pitch:Cesium__namespace.Math[t(e._0x3a1b69)](this.pitch),roll:Cesium__namespace[t(3876)][t(e._0x384f6e)](this.roll)}})}startDraw(e){const t={_0x24e61e:3417},x=_0x2397ca;if(this._enabledDraw)return this;if(this._enabledDraw=!0,e&&this.addTo(e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map[x(t._0x24e61e)](!0),this.enableControl(!1),this._startDrawHook(),this.fire(EventType[x(3669)],{drawtype:this.type,graphic:this},!0)}[_0x2397ca(1740)](){const e={_0x5d7775:558,_0x5c9df0:3237,_0x1ce8e0:3503,_0x46815a:3503},t=_0x2397ca;var x,i,s;if(!this._enabledDraw)return this;if(this._stopDrawHook(),this[t(e._0x5d7775)]._setEditCursor(!1),this[t(e._0x5c9df0)](!0),this._map.closeSmallTooltip(),this[t(2728)]=!1,!this.position||!this.distance){this.remove(!0);return}this.fire(EventType[t(913)],{drawtype:this[t(968)],graphic:this},!0),(x=this.options)!==null&&x!==void 0&&x[t(e._0x1ce8e0)]&&this.options[t(e._0x46815a)](this),(i=this.options)!==null&&i!==void 0&&(s=i[t(1259)])!==null&&s!==void 0&&s.resolve&&this[t(3044)]._promise.resolve(this)}[_0x2397ca(2173)](){const e={_0x4ebe8a:558,_0x441cc7:1174},t=_0x2397ca;this[t(e._0x4ebe8a)].on(EventType.click,this._onClickHandler,this),this._map.on(EventType.mouseMove,this[t(e._0x441cc7)],this)}_stopDrawHook(){const e={_0x39027c:2031,_0x41b20e:1230,_0x395931:3573},t=_0x2397ca;this._map[t(3573)](EventType[t(e._0x39027c)],this[t(e._0x41b20e)],this),this._map[t(e._0x395931)](EventType.mouseMove,this._onMouseMoveHandler,this)}_onClickHandler(e){const t={_0x53a736:2669,_0x48f839:760},x=_0x2397ca,i=e[x(641)];if(i){if(this[x(1788)](EventType[x(t._0x53a736)],{...e,drawtype:this.type,graphic:this},!0),!this[x(t._0x48f839)]){this[x(760)]=i;return}this.targetPosition=i,this.stopDraw(),this.fire(EventType.drawCreated,e)}}_onMouseMoveHandler(e){const t={_0x4f40c8:1882,_0x25fbbd:558},x=_0x2397ca,i=e.cartesian;if(!i)return;this.position?(this[x(2683)]=i,this.fire(EventType[x(3821)],{...e,drawtype:this.type,graphic:this},!0),this._map[x(t._0x4f40c8)](e.endPosition,this[x(t._0x25fbbd)].getLangText(x(3676)))):this._map.openSmallTooltip(e.endPosition,this._map[x(1337)](x(2982)))}}register$4("video2D",Video2D,!0);class PitEntity extends BasePolyEntity{constructor(e={}){const t=_0x2397ca;super(e),this.style.diffHeight=this.style[t(2437)]??10,this[t(357)].splitNum=this.style.splitNum??50}get[_0x2397ca(2437)](){return this.style.diffHeight}set[_0x2397ca(2437)](e){const t={_0xcb85bd:357},x=_0x2397ca;if(this[x(t._0xcb85bd)].diffHeight=e,this._entity){const i=this._minHeight-this.style.diffHeight;this._entity.polygon.height=i;const s=Array(this._positionsWall[x(2027)]).fill(i);this._entity.wall.minimumHeights=s}}[_0x2397ca(2645)](){const e={_0xceae6e:2164,_0x11c19d:1539},t=_0x2397ca,x=this.options.data||this._getPitData();this.data=x;const i={polygon:new Cesium__namespace.PolygonGraphics({hierarchy:new Cesium__namespace[t(e._0xceae6e)](this.positions),perPositionHeight:!1,height:x.height,material:new Cesium__namespace.ImageMaterialProperty({image:this.style.imageBottom,repeat:new Cesium__namespace.Cartesian2(2,2),transparent:!1}),fill:!0,outline:!1}),wall:{positions:x.positionsWall,minimumHeights:x.minimumHeights,maximumHeights:x[t(e._0x11c19d)],fill:!0,material:new Cesium__namespace.ImageMaterialProperty({image:this[t(357)].image,repeat:new Cesium__namespace.Cartesian2(1,1)}),outline:!1}};this._entity=this[t(343)](i),this._minHeight=x.minHeight,this[t(2848)]=x.positionsWall,this[t(247)]=x.maximumHeights,this.style.label&&this._addLabel()}_getPitData(){const e={_0x21ae58:642,_0xdd6820:2027,_0x25a338:1899},t=_0x2397ca,x=this[t(1091)],i=interPolyline({scene:this._map.scene,positions:x[t(3210)](x[0]),splitNum:this.style.splitNum}),s=[];let o=Number[t(e._0x21ae58)];for(let _=0,l=i[t(e._0xdd6820)];_<l;_++){const h=Cesium__namespace[t(e._0x25a338)].fromCartesian(i[_]);o=Math.min(o,h.height),s[t(2434)](h.height)}const r=o-this.style.diffHeight,c=Array(i.length).fill(r);return{height:r,minHeight:o,positionsWall:i,minimumHeights:c,maximumHeights:s}}setUpHeight(e){const t={_0x4e30ca:247,_0x8fdc0c:3977,_0x779bbe:2990,_0x21e93b:773},x=_0x2397ca,i=this._minHeight-this.style.diffHeight,s=i+e,o=[],r=[];for(let c=0,_=this._wallHeights[x(2027)];c<_;c++){const l=this[x(t._0x4e30ca)][c];r.push(l+e),o.push(s)}this._entity&&(this._entity[x(t._0x8fdc0c)][x(3872)]=i,this._entity.wall[x(t._0x779bbe)]=o,this[x(t._0x21e93b)].wall.maximumHeights=r)}}register$4("pitEntity",PitEntity);class AlgorithmUtil{constructor(){const e=_0x2397ca;this.HALF_PI=Math.PI/2,this[e(3755)]=1e-4}toRadians(e){return e*Math.PI/180}getThirdPoint(e,t,x,i,s){const o=_0x2397ca,r=this[o(1395)](e,t),c=s?r+x:r-x,_=i*Math.cos(c),l=i*Math.sin(c);return[t[0]+_,t[1]+l]}getAzimuth(e,t){const x=_0x2397ca;let i=0;const s=Math.asin(Math[x(889)](t[1]-e[1])/this.MathDistance(e,t));return t[1]>=e[1]&&t[0]>=e[0]?i=s+Math.PI:t[1]>=e[1]&&t[0]<e[0]?i=Math.PI*2-s:t[1]<e[1]&&t[0]<e[0]?i=s:t[1]<e[1]&&t[0]>=e[0]&&(i=Math.PI-s),i}MathDistance(e,t){const x={_0x19ec8c:2880,_0x21dbcb:1274},i=_0x2397ca;return Math[i(x._0x19ec8c)](Math[i(x._0x21dbcb)](e[0]-t[0],2)+Math[i(1274)](e[1]-t[1],2))}isClockWise(e,t,x){return x?(x[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(x[0]-e[0]):!1}[_0x2397ca(1172)](e,t,x,i){const s=_0x2397ca,o=this.getNormal(t,x,i);let r=null,c=null,_=null,l=null,h=null;const d=Math.sqrt(o[0]*o[0]+o[1]*o[1]),u=o[0]/d,m=o[1]/d,f=this.MathDistance(t,x),g=this[s(3638)](x,i);return d>this.ZERO_TOLERANCE?this.isClockWise(t,x,i)?(_=e*f,l=x[0]-_*m,h=x[1]+_*u,r=[l,h],_=e*g,l=x[0]+_*m,h=x[1]-_*u,c=[l,h]):(_=e*f,l=x[0]+_*m,h=x[1]-_*u,r=[l,h],_=e*g,l=x[0]-_*m,h=x[1]+_*u,c=[l,h]):(l=x[0]+e*(t[0]-x[0]),h=x[1]+e*(t[1]-x[1]),r=[l,h],l=x[0]+e*(i[0]-x[0]),h=x[1]+e*(i[1]-x[1]),c=[l,h]),[r,c]}[_0x2397ca(3445)](e,t,x,i,s){e=Math.max(Math.min(e,1),0);const o=1-e,r=e*e,c=r*e,_=o*o,l=_*o,h=l*t[0]+3*_*e*x[0]+3*o*r*i[0]+c*s[0],d=l*t[1]+3*_*e*x[1]+3*o*r*i[1]+c*s[1];return[h,d]}[_0x2397ca(2424)](e,t,x){let i=e[0]-t[0],s=e[1]-t[1];const o=Math.sqrt(i*i+s*s);i/=o,s/=o;let r=x[0]-t[0],c=x[1]-t[1];const _=Math.sqrt(r*r+c*c);r/=_,c/=_;const l=i+r,h=s+c;return[l,h]}[_0x2397ca(611)](e,t,x,i){let s=null,o=null;const r=[];let c=i-x;c=c<0?c+Math.PI*2:c;for(let _=0;_<=100;_++){const l=x+c*_/100;s=e[0]+t*Math.cos(l),o=e[1]+t*Math.sin(l),r.push([s,o])}return r}getPointByAngleAndLen(e,t,x){const i=e[0]+t*Math.cos(x),s=e[1]+t*Math.sin(x);return[i,s]}[_0x2397ca(1647)](e){return Math.pow(this.wholeDistance(e),.99)}wholeDistance(e){let t=0;const x=this;return e&&Array.isArray(e)&&e.length>0&&e.forEach(function(i,s){s<e.length-1&&(t+=x.MathDistance(i,e[s+1]))}),t}getArrowHeadPoints(e){const t={_0x143232:1872,_0x553b62:2027,_0x12bd8c:1218},x=_0x2397ca;if(!e)return[];const i=e.points;if(i.length<2)return[];const s=e[x(t._0x143232)],o=e.tailRight,r=e[x(2685)],c=e[x(2859)],_=e.neckHeightFactor,l=e.headWidthFactor,h=e.headHeightFactor;let d=this[x(1647)](i),u=d*h;const m=i[i.length-1];d=this[x(3638)](m,i[i[x(t._0x553b62)]-2]);const f=this.MathDistance(s,o);u>f*r&&(u=f*r);const g=u*l,b=u*c;u=u>d?d:u;const y=u*_,C=this[x(t._0x12bd8c)](i[i.length-2],m,0,u,!0),v=this.getThirdPoint(i[i.length-2],m,0,y,!0),M=this[x(1218)](m,C,this.HALF_PI,g,!1),w=this.getThirdPoint(m,C,this[x(2646)],g,!0),H=this[x(1218)](m,v,this[x(2646)],b,!1),D=this.getThirdPoint(m,v,this.HALF_PI,b,!0);return[H,M,m,w,D]}getTailPoints(e){const t={_0x150b54:1483,_0x37ec65:1647,_0x31bc4d:2646},x=_0x2397ca;if(!e)return;const i=e[x(t._0x150b54)],s=e.tailWidthFactor,o=e.swallowTailFactor,r=this[x(t._0x37ec65)](i),c=r*s,_=this.getThirdPoint(i[1],i[0],this.HALF_PI,c,!1),l=this[x(1218)](i[1],i[0],this[x(t._0x31bc4d)],c,!0),h=c*o,d=this.getThirdPoint(i[1],i[0],0,h,!0);return[_,d,l]}getArrowBodyPoints(e,t,x,i){const s={_0x2b52c1:1218,_0x3629b3:2434,_0x56036f:2434},o=_0x2397ca,r=this.wholeDistance(e),c=this.getBaseLength(e),_=c*i,l=this.MathDistance(t,x),h=(_-l)/2;let d=0;const u=[],m=[];for(let f=1;f<e[o(2027)]-1;f++){const g=this.getAngleOfThreePoints(e[f-1],e[f],e[f+1])/2;d+=this.MathDistance(e[f-1],e[f]);const b=(_/2-d/r*h)/Math[o(2212)](g),y=this[o(s._0x2b52c1)](e[f-1],e[f],Math.PI-g,b,!0),C=this.getThirdPoint(e[f-1],e[f],g,b,!1);u[o(s._0x3629b3)](y),m[o(s._0x56036f)](C)}return u.concat(m)}getAngleOfThreePoints(e,t,x){const i={_0x1d6c23:1395},s=_0x2397ca,o=this[s(i._0x1d6c23)](t,e)-this.getAzimuth(t,x);return o<0?o+Math.PI*2:o}getQBSplinePoints(e){if(e.length<=2)return e;{const x=[],i=e.length-2-1;x.push(e[0]);for(let s=0;s<=i;s++)for(let o=0;o<=1;o+=.05){let r=0,c=0;for(let _=0;_<=2;_++){const l=this.getQuadricBSplineFactor(_,o);r+=l*e[s+_][0],c+=l*e[s+_][1]}x.push([r,c])}return x.push(e[e.length-1]),x}}getQuadricBSplineFactor(e,t){const x=_0x2397ca;let i=0;return e===0?i=Math[x(1274)](t-1,2)/2:e===1?i=(-2*Math.pow(t,2)+2*t+1)/2:e===2&&(i=Math.pow(t,2)/2),i}Mid(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]||0+t[2]||0)/2]}[_0x2397ca(648)](e,t,x){const i={_0x5e5527:1033},s=_0x2397ca,o=e[2]||0,r=[(e[0]+t[0])/2,(e[1]+t[1])/2,o],c=[r[0]-e[1]+t[1],r[1]+e[0]-t[0],o],_=[(e[0]+x[0])/2,(e[1]+x[1])/2,o],l=[_[0]-e[1]+x[1],_[1]+e[0]-x[0],o];return this[s(i._0x5e5527)](r,c,_,l)}getIntersectPoint(e,t,x,i){if(e[1]===t[1]){const _=(i[0]-x[0])/(i[1]-x[1]),l=_*(e[1]-x[1])+x[0],h=e[1];return[l,h]}if(x[1]===i[1]){const _=(t[0]-e[0])/(t[1]-e[1]),l=_*(x[1]-e[1])+e[0],h=x[1];return[l,h]}const s=(t[0]-e[0])/(t[1]-e[1]),o=(i[0]-x[0])/(i[1]-x[1]),r=(s*e[1]-e[0]-o*x[1]+x[0])/(s-o);return[s*r-s*e[1]+e[0],r,e[2]||0]}getBezierPoints(e){const t={_0x2b8647:191},x=_0x2397ca;if(e[x(2027)]<=2)return e;{const i=[],s=e.length-1;for(let o=0;o<=1;o+=.01){let r=0,c=0;for(let _=0;_<=s;_++){const l=this[x(t._0x2b8647)](s,_),h=Math.pow(o,_),d=Math.pow(1-o,s-_);r+=l*h*d*e[_][0],c+=l*h*d*e[_][1]}i.push([r,c])}return i}}getFactorial(e){let t=1;switch(e){case e<=1:t=1;break;case e===2:t=2;break;case e===3:t=6;break;case e===24:t=24;break;case e===5:t=120;break;default:for(let x=1;x<=e;x++)t*=x;break}return t}[_0x2397ca(191)](e,t){const x=_0x2397ca;return this.getFactorial(e)/(this.getFactorial(t)*this[x(3050)](e-t))}}const algorithmUtil=new AlgorithmUtil,minAnalge=algorithmUtil.toRadians(20),maxAnalge=algorithmUtil[_0x2397ca(2500)](160);class ArrowParentUtil{constructor(){this.algorithmUtil=algorithmUtil}getMaxHeight(e){let t=e[0][2]||0;for(let x=0;x<e.length;x++)e[2]>t&&(t=e[2]);return t}getArrowHeadPoints(e,t,x){const i={_0x4db5f0:4017,_0x14a2a8:2859,_0x92183c:1218,_0x1b771e:1218,_0x8aa972:4017},s=_0x2397ca;if(!e||e.length<2)return null;let o=this.algorithmUtil.getBaseLength(e)*this.headHeightFactor;const r=this[s(i._0x4db5f0)].MathDistance(t,x);o>r*this.headTailFactor&&(o=r*this.headTailFactor);const c=e[e.length-1],_=e[e.length-2],l=this.algorithmUtil.MathDistance(c,_);o=o>l?l:o;const h=o*this.headWidthFactor,d=o*this[s(i._0x14a2a8)],u=o*this.neckHeightFactor,m=this[s(4017)][s(i._0x92183c)](_,c,0,o,!0),f=this.algorithmUtil[s(i._0x1b771e)](_,c,0,u,!0),g=this[s(i._0x8aa972)][s(i._0x92183c)](c,m,Math.PI/2,h,!1),b=this.algorithmUtil.getThirdPoint(c,m,Math.PI/2,h,!0),y=this.algorithmUtil.getThirdPoint(c,f,Math.PI/2,d,!1),C=this.algorithmUtil.getThirdPoint(c,f,Math.PI/2,d,!0);return[y,g,c,b,C]}[_0x2397ca(2088)](e,t,x,i){const s={_0x3ece9c:4017},o=_0x2397ca,r=this[o(s._0x3ece9c)].wholeDistance(e),c=this.algorithmUtil.getBaseLength(e),_=c*i,l=this.algorithmUtil[o(3638)](t,x),h=(_-l)/2;let d=0;const u=[],m=[];for(let f=1;f<e.length-1;f++){let g=this.algorithmUtil.getAngleOfThreePoints(e[f-1],e[f],e[f+1])/2;g<minAnalge?g=minAnalge:g>maxAnalge&&(g=maxAnalge),d+=this.algorithmUtil[o(3638)](e[f-1],e[f]);const b=(_/2-d/r*h)/Math.sin(g),y=this.algorithmUtil[o(1218)](e[f-1],e[f],Math.PI-g,b,!0),C=this[o(s._0x3ece9c)].getThirdPoint(e[f-1],e[f],g,b,!1);u[o(2434)](y),m.push(C)}return u[o(3210)](m)}}class AttackArrowUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x3ba3d7:2859,_0x34c348:2685},x=_0x2397ca;this.headHeightFactor=e[x(521)]||.18,this.headWidthFactor=e.headWidthFactor||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this[x(t._0x3ba3d7)]=e.neckWidthFactor||.15,this[x(2685)]=e[x(t._0x34c348)]||.8}startCompute(e,t){const x={_0xefbf98:2027,_0x553652:4017,_0x13f9be:2242,_0x39a3c2:2434,_0x422f8f:3795,_0x55491a:3795},i=_0x2397ca;if(!e||e.length===0)return e;this[i(1091)]=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=s[s.length-1],c=s[s[i(x._0xefbf98)]-2];this[i(x._0x553652)].MathDistance(r,c)<1&&s.length>2&&s.splice(s.length-2,1);let l=s[0],h=s[1];this.algorithmUtil.isClockWise(s[0],s[1],s[2])&&(l=s[1],h=s[0]);const d=this.algorithmUtil[i(776)](l,h),u=[d][i(3210)](s[i(x._0x13f9be)](2)),m=this.getArrowHeadPoints(u,l,h);if(!m||m.length<4)return e;const f=m[0],g=m[4],b=this.algorithmUtil.MathDistance(l,h)/this[i(4017)].getBaseLength(u),y=this.getArrowBodyPoints(u,f,g,b),C=y.length;let v=[l].concat(y.slice(0,C/2));v[i(x._0x39a3c2)](f);let M=[h].concat(y.slice(C/2,C));M.push(g),v=this.algorithmUtil[i(x._0x422f8f)](v),M=this.algorithmUtil[i(x._0x55491a)](M);const w=v.concat(m,M.reverse());return mercators2cartesians(w,o)}}const attackArrowUtil$1=new AttackArrowUtil;class AttackArrow extends PolygonEntity{get hasClosure(){return!1}[_0x2397ca(1992)](e){return!e||e[_0x2397ca(2027)]<2?e:attackArrowUtil$1.startCompute(e,this.style)}}register$4("attackArrow",AttackArrow);class AttackArrowPWUtil extends ArrowParentUtil{[_0x2397ca(2403)](e={}){const t={_0x22d7d9:2515},x=_0x2397ca;this.headHeightFactor=e.headHeightFactor||.18,this[x(t._0x22d7d9)]=e.headWidthFactor||.3,this[x(2954)]=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15,this[x(2202)]=e[x(2202)]||.1}startCompute(e,t){const x={_0x4a5ad3:2403,_0x4c9645:3842,_0x2b12f5:2027,_0x5d5c7a:3210,_0x445b8a:2434},i=_0x2397ca;if(!e||e.length===0)return e;this[i(1091)]=e,this[i(x._0x4a5ad3)](t);const s=cartesians2mercators(e),o=this[i(x._0x4c9645)](s),r=this.getTailPoints(s),c=this.getArrowHeadPoints(s,r[0],r[1]);if(!c||c[i(x._0x2b12f5)]<4)return e;const _=c[0],l=c[4],h=this.getArrowBodyPoints(s,_,l,this.tailWidthFactor),d=h.length;let u=[r[0]].concat(h.slice(0,d/2));u[i(2434)](_);let m=[r[1]][i(x._0x5d5c7a)](h.slice(d/2,d));m[i(x._0x445b8a)](l),u=this.algorithmUtil.getQBSplinePoints(u),m=this.algorithmUtil[i(3795)](m);const f=u.concat(c,m[i(3223)]());return mercators2cartesians(f,o)}getTailPoints(e){const t={_0x15ce1f:1647,_0xf07868:1218},x=_0x2397ca,i=this.algorithmUtil[x(t._0x15ce1f)](e),s=i*this.tailWidthFactor,o=this.algorithmUtil.getThirdPoint(e[1],e[0],Math.PI/2,s,!1),r=this.algorithmUtil[x(t._0xf07868)](e[1],e[0],Math.PI/2,s,!0);return[o,r]}}const attackArrowPWUtil=new AttackArrowPWUtil;class AttackArrowPW extends PolygonEntity{get hasClosure(){return!1}getShowPositions(e){const t={_0x2eaf2a:357},x=_0x2397ca;return!e||e.length<2?e:attackArrowPWUtil[x(3505)](e,this[x(t._0x2eaf2a)])}static getOutlinePositions(e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),attackArrowPWUtil.startCompute(e,t))}}register$4("attackArrowPW",AttackArrowPW);class AttackArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x3dc3e3:521,_0x7606a:2859},x=_0x2397ca;this[x(521)]=e[x(t._0x3dc3e3)]||.18,this.headWidthFactor=e.headWidthFactor||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this[x(t._0x7606a)]=e.neckWidthFactor||.15,this[x(2202)]=e.tailWidthFactor||.1,this.headTailFactor=e.headTailFactor||.8,this[x(3211)]=e[x(3211)]||1}[_0x2397ca(3505)](e,t){const x={_0x5dce9c:4017,_0x57ca36:776},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=[s[0],s[1]];let c=r[0],_=r[1];this.algorithmUtil.isClockWise(s[0],s[1],s[2])&&(c=s[1],_=s[0]);const l=this[i(x._0x5dce9c)][i(x._0x57ca36)](c,_),h=[l][i(3210)](s.slice(2)),d=this.getArrowHeadPoints(h,c,_);if(!d||d.length<4)return e;const u=[d[0],d[4]],m=u[0],f=u[1],g=this.algorithmUtil.MathDistance(c,_),b=this.algorithmUtil[i(1647)](h),y=b*this.tailWidthFactor*this.swallowTailFactor,C=this.algorithmUtil[i(1218)](h[1],h[0],0,y,!0),v=g/b,M=this.getArrowBodyPoints(h,m,f,v),w=M.length;let H=[c].concat(M[i(2242)](0,w/2));H.push(m);let D=[_].concat(M.slice(w/2,w));D.push(f),H=this.algorithmUtil.getQBSplinePoints(H),D=this.algorithmUtil[i(3795)](D);const F=H.concat(d,D.reverse(),[C,H[0]]);return mercators2cartesians(F,o)}}const attackArrowUtil=new AttackArrowYWUtil;class AttackArrowYW extends PolygonEntity{get hasClosure(){return!1}getShowPositions(e){return!e||e.length<3?e:attackArrowUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){return!e||e.length<3?e:(e=LngLatArray.toCartesians(e),attackArrowUtil.startCompute(e,t))}}register$4("attackArrowYW",AttackArrowYW);class CloseCurveUtil{constructor(){const e=_0x2397ca;this[e(4017)]=algorithmUtil}[_0x2397ca(3505)](e,t){const x={_0x5cdac7:3842,_0x3f84ac:1172,_0xa09ade:3210},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e;const s=cartesians2mercators(e),o=this[i(x._0x5cdac7)](s);s.push(s[0],s[1]);let r=[];const c=[];for(let h=0;h<s.length-2;h++){const d=this.algorithmUtil[i(x._0x3f84ac)](.3,s[h],s[h+1],s[h+2]);r=r[i(x._0xa09ade)](d)}const _=r.length;r=[r[_-1]].concat(r.slice(0,_-1));for(let h=0;h<s.length-2;h++){const d=s[h],u=s[h+1];c.push(d);for(let m=0;m<=100;m++){const f=this.algorithmUtil.getCubicValue(m/100,d,r[h*2],r[h*2+1],u);c.push(f)}c.push(u)}return mercators2cartesians(c,o)}getMaxHeight(e){let t=e[0][2]||0;for(let x=0;x<e.length;x++)e[2]>t&&(t=e[2]);return t}}const closeCurveUtil=new CloseCurveUtil;class CloseVurve extends PolygonEntity{getShowPositions(e){const t={_0x266f3e:2027,_0x2dd4d4:357},x=_0x2397ca;return!e||e[x(t._0x266f3e)]<2?e:closeCurveUtil.startCompute(e,this[x(t._0x2dd4d4)])}static getOutlinePositions(e,t){const x=_0x2397ca;return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),closeCurveUtil[x(3505)](e,t))}}register$4("closeVurve",CloseVurve);class DoubleArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}setOptions(e={}){const t={_0x35149b:2954},x=_0x2397ca;this.headHeightFactor=e[x(521)]||.25,this.headWidthFactor=e[x(2515)]||.3,this.neckHeightFactor=e[x(t._0x35149b)]||.85,this.neckWidthFactor=e.neckWidthFactor||.15}startCompute(e,t){const x={_0x41e0a7:3856,_0x4ebee0:2339,_0x2fa3fb:2242,_0x5d5153:3210},i=_0x2397ca;if(!e||e.length<3)return e;this.positions=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=[s[0],s[1],s[2]],c=r[0],_=r[1],l=r[2],h=this.positions[i(2027)];let d,u;if(h===3)d=this[i(x._0x41e0a7)](c,_,l),u=this[i(4017)].Mid(c,_);else if(h===4)d=s[3],u=this.algorithmUtil.Mid(c,_);else{const B=this.algorithmUtil[i(3638)](s[3],s[4]),Y=this.algorithmUtil.MathDistance(s[2],s[3]);B<Y*.1?(d=s[3],u=this[i(4017)].Mid(c,_)):(d=s[3],u=s[4])}let m,f;this.algorithmUtil[i(x._0x4ebee0)](c,_,l)?(m=this.getArrowPoints(c,u,d,!1),f=this.getArrowPoints(u,_,l,!0)):(m=this[i(2065)](_,u,l,!1),f=this.getArrowPoints(u,c,d,!0));const g=m.length,b=(g-5)/2,y=m.slice(0,b),C=m[i(2242)](b,b+5);let v=m.slice(b+5,g),M=f[i(x._0x2fa3fb)](0,b);const w=f.slice(b,b+5),H=f.slice(b+5,g);M=this.algorithmUtil.getBezierPoints(M);const D=this.algorithmUtil.getBezierPoints(H.concat(y.slice(1)));v=this.algorithmUtil.getBezierPoints(v);const F=M[i(x._0x5d5153)](w,D,C,v);return mercators2cartesians(F,o)}getTempPoint4(e,t,x){const i=_0x2397ca,s=this.algorithmUtil.Mid(e,t),o=this.algorithmUtil.MathDistance(s,x),r=this.algorithmUtil[i(1902)](e,s,x);let c,_,l,h;return r<Math.PI/2?(_=o*Math.sin(r),l=o*Math[i(1314)](r),h=this[i(4017)].getThirdPoint(e,s,Math.PI/2,_,!1),c=this.algorithmUtil.getThirdPoint(s,h,Math.PI/2,l,!0)):r>=Math.PI/2&&r<Math.PI?(_=o*Math.sin(Math.PI-r),l=o*Math.cos(Math.PI-r),h=this.algorithmUtil.getThirdPoint(e,s,Math.PI/2,_,!1),c=this[i(4017)].getThirdPoint(s,h,Math.PI/2,l,!1)):r>=Math.PI&&r<Math.PI*1.5?(_=o*Math.sin(r-Math.PI),l=o*Math.cos(r-Math.PI),h=this[i(4017)].getThirdPoint(e,s,Math.PI/2,_,!0),c=this[i(4017)].getThirdPoint(s,h,Math.PI/2,l,!0)):(_=o*Math.sin(Math.PI*2-r),l=o*Math.cos(Math.PI*2-r),h=this.algorithmUtil.getThirdPoint(e,s,Math.PI/2,_,!0),c=this[i(4017)].getThirdPoint(s,h,Math.PI/2,l,!1)),c}getArrowPoints(e,t,x,i){const s={_0x1b0295:2242,_0x58604d:2434,_0x3a1c07:3210},o=_0x2397ca,r=this[o(4017)][o(776)](e,t),c=this.algorithmUtil[o(3638)](r,x);let _=this[o(4017)].getThirdPoint(x,r,0,c*.3,!0),l=this[o(4017)].getThirdPoint(x,r,0,c*.5,!0);_=this[o(4017)][o(1218)](r,_,Math.PI/2,c/5,i),l=this.algorithmUtil.getThirdPoint(r,l,Math.PI/2,c/4,i);const h=[r,_,l,x],d=this.getArrowHeadPoints(h);if(d&&Array.isArray(d)&&d.length>3){const u=[d[0],d[4]],m=u[0],f=u[1],g=this.algorithmUtil.MathDistance(e,t)/this.algorithmUtil[o(1647)](h)/2,b=this[o(2088)](h,m,f,g);if(b){const y=b.length;let C=b[o(s._0x1b0295)](0,y/2),v=b.slice(y/2,y);return C[o(s._0x58604d)](m),v.push(f),C=C.reverse(),C[o(2434)](t),v=v.reverse(),v.push(e),C.reverse()[o(s._0x3a1c07)](d,v)}}else console[o(855)]("getArrowPoints:插值出错",d)}getArrowHeadPoints(e){const t=_0x2397ca;if(!e||e.length<2)return[];const x=this[t(4017)][t(1647)](e),i=x*this.headHeightFactor,s=e[e.length-1],o=i*this.headWidthFactor,r=i*this.neckWidthFactor,c=i*this.neckHeightFactor,_=this.algorithmUtil[t(1218)](e[e.length-2],s,0,i,!0),l=this.algorithmUtil.getThirdPoint(e[e.length-2],s,0,c,!0),h=this.algorithmUtil.getThirdPoint(s,_,Math.PI/2,o,!1),d=this.algorithmUtil.getThirdPoint(s,_,Math.PI/2,o,!0),u=this.algorithmUtil[t(1218)](s,l,Math.PI/2,r,!1),m=this[t(4017)].getThirdPoint(s,l,Math.PI/2,r,!0);return[u,h,s,d,m]}getArrowBodyPoints(e,t,x,i){const s={_0x1acaf8:3638,_0x40f554:2212,_0x5d0312:3210},o=_0x2397ca,r=this.algorithmUtil.wholeDistance(e),c=this.algorithmUtil.getBaseLength(e),_=c*i,l=this[o(4017)].MathDistance(t,x),h=(_-l)/2;let d=0;const u=[],m=[];for(let f=1;f<e.length-1;f++){const g=this.algorithmUtil.getAngleOfThreePoints(e[f-1],e[f],e[f+1])/2;d+=this.algorithmUtil[o(s._0x1acaf8)](e[f-1],e[f]);const b=(_/2-d/r*h)/Math[o(s._0x40f554)](g),y=this[o(4017)][o(1218)](e[f-1],e[f],Math.PI-g,b,!0),C=this.algorithmUtil.getThirdPoint(e[f-1],e[f],g,b,!1);u[o(2434)](y),m.push(C)}return u[o(s._0x5d0312)](m)}[_0x2397ca(3842)](e){const t=_0x2397ca;let x=e[0][2]||0;for(let i=0;i<e[t(2027)];i++)e[2]>x&&(x=e[2]);return x}}const doubleArrowUtil=new DoubleArrowUtil;class DoubleArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=3,this._maxPointNum=5}getShowPositions(e){const t={_0x5aecc0:916},x=_0x2397ca;return!e||e[x(2027)]<this[x(t._0x5aecc0)]?e:doubleArrowUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){const x={_0x47a9da:1169},i=_0x2397ca;return!e||e.length<3?e:(e=LngLatArray[i(x._0x47a9da)](e),doubleArrowUtil.startCompute(e,t))}}register$4(_0x2397ca(2635),DoubleArrow);class FineArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}[_0x2397ca(2403)](e={}){const t={_0x433fe5:2810,_0x274332:1738,_0x1f02cd:1738,_0x36e534:2202},x=_0x2397ca;this[x(t._0x433fe5)]=e.headAngle||Math.PI/8.5,this[x(t._0x274332)]=e[x(t._0x1f02cd)]||Math.PI/13,this[x(t._0x36e534)]=e.tailWidthFactor||.1,this.neckWidthFactor=e[x(2859)]||.2,this.headWidthFactor=e.headWidthFactor||.25,this.neckHeightFactor=e.neckHeightFactor||.85}[_0x2397ca(3505)](e,t){const x={_0x2e6393:2810,_0x20c93e:4017},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=[s[0],s[1]],c=r[0],_=r[1],l=this[i(4017)].getBaseLength(s),h=l*this.tailWidthFactor,d=l*this.neckWidthFactor,u=l*this[i(2515)],m=this[i(4017)].getThirdPoint(_,c,Math.PI/2,h,!0),f=this[i(4017)].getThirdPoint(_,c,Math.PI/2,h,!1),g=this.algorithmUtil.getThirdPoint(c,_,this[i(x._0x2e6393)],u,!1),b=this[i(x._0x20c93e)].getThirdPoint(c,_,this.headAngle,u,!0),y=this[i(x._0x20c93e)].getThirdPoint(c,_,this.neckAngle,d,!1),C=this.algorithmUtil.getThirdPoint(c,_,this.neckAngle,d,!0);return mercators2cartesians([m,y,g,_,b,C,f],o)}[_0x2397ca(3842)](e){let t=e[0][2]||0;for(let x=0;x<e.length;x++)e[2]>t&&(t=e[2]);return t}}const fineArrowUtil=new FineArrowUtil;class FineArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}[_0x2397ca(1992)](e){return!e||e.length<2?e:fineArrowUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){const x=_0x2397ca;return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),fineArrowUtil[x(3505)](e,t))}}register$4("fineArrow",FineArrow);class FineArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x259060:2954,_0x4f6126:2859,_0xdb39aa:3211},x=_0x2397ca;this[x(521)]=e.headHeightFactor||.18,this.headWidthFactor=e.headWidthFactor||.3,this.neckHeightFactor=e[x(t._0x259060)]||.85,this[x(t._0x4f6126)]=e.neckWidthFactor||.15,this.tailWidthFactor=e.tailWidthFactor||.1,this.swallowTailFactor=e[x(t._0xdb39aa)]||1}startCompute(e,t){const x={_0xf7c2c4:3490,_0x5ca189:2088,_0x232fde:2202,_0x5e6b1f:2434,_0x3634d8:4017},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=this.getTailPoints(s),c=this[i(x._0xf7c2c4)](s,r[0],r[2]);if(!c||c.length<4)return e;const _=c[0],l=c[4],h=this[i(x._0x5ca189)](s,_,l,this[i(x._0x232fde)]),d=h.length;let u=[r[0]].concat(h.slice(0,d/2));u.push(_);let m=[r[2]][i(3210)](h.slice(d/2,d));m[i(x._0x5e6b1f)](l),u=this[i(x._0x3634d8)].getQBSplinePoints(u),m=this[i(4017)].getQBSplinePoints(m);const f=u.concat(c,m.reverse(),[r[1],u[0]]);return mercators2cartesians(f,o)}[_0x2397ca(2577)](e){const t=_0x2397ca,x=this.algorithmUtil[t(1647)](e),i=x*this.tailWidthFactor,s=this.algorithmUtil[t(1218)](e[1],e[0],Math.PI/2,i,!1),o=this.algorithmUtil.getThirdPoint(e[1],e[0],Math.PI/2,i,!0),r=i*this.swallowTailFactor,c=this.algorithmUtil.getThirdPoint(e[1],e[0],0,r,!0);return[s,c,o]}}const fineArrowYWUtil=new FineArrowYWUtil;class FineArrowYW extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}[_0x2397ca(1992)](e){return!e||e[_0x2397ca({_0x38f763:2027}._0x38f763)]<2?e:fineArrowYWUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){const x=_0x2397ca;return!e||e.length<2?e:(e=LngLatArray[x(1169)](e),fineArrowYWUtil.startCompute(e,t))}}register$4("fineArrowYW",FineArrowYW);class GatheringPlaceUtil{constructor(){const e={_0x4d83a6:4017},t=_0x2397ca;this[t(e._0x4d83a6)]=algorithmUtil}[_0x2397ca(3505)](e,t){const x={_0x443a87:2027,_0x3c92ed:1172},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e;const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=this[i(4017)].Mid(s[0],s[2]);s.push(r,s[0],s[1]);let c=[],_,l,h;const d=[];for(let f=0;f<s[i(x._0x443a87)]-2;f++){_=s[f],l=s[f+1],h=s[f+2];const g=this.algorithmUtil[i(x._0x3c92ed)](.4,_,l,h);c=c.concat(g)}const u=c.length;c=[c[u-1]].concat(c.slice(0,u-1));for(let f=0;f<s[i(2027)]-2;f++){_=s[f],l=s[f+1],d.push(_);for(let g=0;g<=100;g++){const b=this.algorithmUtil.getCubicValue(g/100,_,c[f*2],c[f*2+1],l);d.push(b)}d[i(2434)](l)}return mercators2cartesians(d,o)}getMaxHeight(e){let t=e[0][2]||0;for(let x=0;x<e.length;x++)e[2]>t&&(t=e[2]);return t}}const gatheringPlaceUtil=new GatheringPlaceUtil;class GatheringPlace extends PolygonEntity{constructor(e={}){const t={_0x3dd087:916},x=_0x2397ca;super(e),this[x(t._0x3dd087)]=3,this._maxPointNum=3}getShowPositions(e){const t={_0xa4c7bc:357},x=_0x2397ca;return!e||e.length<this._minPointNum?e:gatheringPlaceUtil.startCompute(e,this[x(t._0xa4c7bc)])}static getOutlinePositions(e,t){const x={_0xe00158:1169},i=_0x2397ca;return!e||e.length<2?e:(e=LngLatArray[i(x._0xe00158)](e),gatheringPlaceUtil.startCompute(e,t))}}register$4("gatheringPlace",GatheringPlace);class IsosTriangle extends PolygonEntity{constructor(e={}){const t={_0xb59a46:916},x=_0x2397ca;super(e),this[x(t._0xb59a46)]=3,this._maxPointNum=3}getShowPositions(e){const t={_0x1b9347:3304},x=_0x2397ca;return!e||e[x(2027)]<this[x(916)]?e:IsosTriangle[x(t._0x1b9347)](e,this.style)}static getOutlinePositions(e,t){const x=_0x2397ca;if(!e||e.length<3)return e;const i=e[0],s=e[1],o=e[2],r=Cesium__namespace.Cartesian3[x(1499)](i,s,new Cesium__namespace.Cartesian3),c=getAngle(r,s),_=getAngle(r,o),l=c-_-90,h=getRotateCenterPoint(r,o,l);return[i,s,h]}}register$4("isosTriangle",IsosTriangle);class LuneUtil{constructor(){const e=_0x2397ca;this[e(4017)]=algorithmUtil}startCompute(e,t){const x={_0x55a990:3842},i=_0x2397ca;if(!e||e[i(2027)]===0)return e;this.positions=e;let s=cartesians2mercators(e);const o=this[i(x._0x55a990)](s),r=[s[0],s[1],s[2],void 0,void 0],c=r[0],_=r[1],l=r[2];let h=r[3],d=r[4];const u=this.algorithmUtil.getCircleCenterOfThreePoints(c,_,l),m=this.algorithmUtil.MathDistance(c,u),f=this.algorithmUtil.getAzimuth(c,u),g=this.algorithmUtil.getAzimuth(_,u);return this.algorithmUtil.isClockWise(c,_,l)?(h=g,d=f):(h=f,d=g),s=this[i(4017)].getArcPoints(u,m,h,d),s.push(s[0]),mercators2cartesians(s,o)}getMaxHeight(e){const t={_0x31993d:2027},x=_0x2397ca;let i=e[0][2]||0;for(let s=0;s<e[x(t._0x31993d)];s++)e[2]>i&&(i=e[2]);return i}}const luneUtil=new LuneUtil;class Lune extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=3,this._maxPointNum=3}getShowPositions(e){return!e||e.length<this._minPointNum?e:luneUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){return!e||e[_0x2397ca({_0x2ed82c:2027}._0x2ed82c)]<3?e:(e=LngLatArray.toCartesians(e),luneUtil.startCompute(e,t))}}register$4("lune",Lune);class EditRegular extends EditPolygon{bindDraggers(){const e={_0x553cb7:357,_0x57b1be:3089,_0x1c67cd:1154},t={_0x310149:1646},x={_0x53b48a:2527},i=_0x2397ca,s=this.positions;let o=this.updatePositionsHeightByAttr(s[0]);const r=this.createDragger({position:o,type:PointType.MoveAll,tooltip:this._map.getLangText("_整体平移"),onDrag:(l,h)=>{const d=_0x3361;h=this.updatePositionsHeightByAttr(h),l.position=h;const u=Cesium__namespace.Cartesian3[d(x._0x53b48a)](h,o,new Cesium__namespace.Cartesian3);o=h,this.positions[d(1255)]((m,f,g)=>{const b=Cesium__namespace.Cartesian3.add(m,u,new Cesium__namespace.Cartesian3);this.positions[f]=b});for(let m=0,f=this.draggers.length;m<f;m++)this[d(1154)][m].position=Cesium__namespace.Cartesian3[d(565)](this.draggers[m].position,u,new Cesium__namespace.Cartesian3)}});r.index=0,this[i(1154)].push(r);const c=getPositionByDirectionAndLen(o,this.style.startAngle,this[i(e._0x553cb7)].radius);s[1]=c;const _=this[i(e._0x57b1be)]({position:this.updatePositionsHeightByAttr(c),onDrag:(l,h)=>{const d=i;h=this[d(t._0x310149)](h),l[d(760)]=h,this.positions[l.index]=h,this.style.radius=Cesium__namespace.Cartesian3.distance(s[0],h),this.style.startAngle=formatNum$1(getAngle(s[0],h),2)},onDragStart:(l,h)=>{for(let d=0,u=this.draggers.length;d<u;d++)this.draggers[d].show=!1},onDragEnd:(l,h)=>{this[i(4009)]()}});_[i(3124)]=1,this[i(e._0x1c67cd)].push(_),this.entityGraphic.extrudedHeight&&this[i(2634)]()}_updateHeight(e){const t=_0x2397ca;this.entityGraphic.height=e,this.style.height=this[t(3794)](e,2);const x=this.positions;for(let i=0,s=x.length;i<s;i++)x[i]=setPositionsHeight(x[i],e);this.fire(EventType[t(3820)])}}class Regular extends PolygonEntity{constructor(e={}){const t={_0xac54bf:357,_0xc17572:3189,_0x4ae015:760},x=_0x2397ca;super(e),this._minPointNum=2,this._maxPointNum=2,this[x(t._0xac54bf)][x(t._0xc17572)]=this.style.radius??1e3,this[x(t._0xac54bf)].startAngle=this.style[x(393)]??0,e[x(760)]&&(this.positions=[e[x(t._0x4ae015)]])}get[_0x2397ca(1710)](){return EditRegular}updateAttrForDrawing(e){const t={_0x4ab6cd:393,_0x4abeb4:1047},x=_0x2397ca;var i;if(!e&&((i=this._positions_draw)===null||i===void 0?void 0:i.length)>1){const s=this._positions_draw[0];this.style.radius=Cesium__namespace.Cartesian3.distance(s,this._positions_draw[1]),this.style[x(t._0x4ab6cd)]=formatNum$1(getAngle(s,this[x(t._0x4abeb4)][1]),2)}super[x(2140)](e)}getShowPositions(e){const t={_0x5268c4:357},x=_0x2397ca;return!e||e.length<1?e:Regular.getOutlinePositions(e[0],this[x(t._0x5268c4)])}[_0x2397ca(4036)](e){const t={_0x253d1b:3711,_0x18d9e0:2381},x=_0x2397ca;return{type:"Point",coordinates:this[x(t._0x253d1b)](e==null?void 0:e[x(t._0x18d9e0)])[0]}}static getOutlinePositions(e,t){const x={_0x2bdc28:2434},i=_0x2397ca,s=t.border||3,o=t.radius||1e3,r=t.startAngle||0,c=360/s,_=[];for(let l=0;l<=s;l++){const h=r+c*l;_[i(x._0x2bdc28)](getPositionByDirectionAndLen(e,h,o))}return _}}register$4("regular",Regular,!0);class EditSector extends EditPolygon{bindDraggers(){const e={_0x1294bc:3189,_0xe325ad:1646,_0x3cd22f:2434},t={_0x3a8b93:1154},x={_0x19e3f7:357,_0x402281:230},i={_0x5431af:4009},s={_0x39aebf:1154},o={_0x1d8a8b:3189,_0x330288:357},r={_0x359173:295,_0x1218cb:1255,_0x192e8b:295},c={_0x286722:295},_=_0x2397ca,l=this.positions;let h=this.updatePositionsHeightByAttr(l[0]);const d=this.createDragger({position:h,type:PointType[_(2249)],tooltip:this._map.getLangText(_(3278)),onDrag:(b,y)=>{const C=_;y=this.updatePositionsHeightByAttr(y),b.position=y;const v=Cesium__namespace.Cartesian3.subtract(y,h,new Cesium__namespace[C(r._0x359173)]);h=y,this.positions[C(r._0x1218cb)]((M,w,H)=>{const D=C,F=Cesium__namespace[D(c._0x286722)].add(M,v,new Cesium__namespace.Cartesian3);this.positions[w]=F});for(let M=0,w=this.draggers[C(2027)];M<w;M++)this.draggers[M].position=Cesium__namespace.Cartesian3.add(this[C(1154)][M].position,v,new Cesium__namespace[C(r._0x192e8b)])}});d[_(3124)]=0,this[_(1154)][_(2434)](d);const u=getPositionByDirectionAndLen(h,this.style.startAngle,this[_(357)][_(e._0x1294bc)]);l[1]=u;const m=this.createDragger({position:this[_(e._0xe325ad)](u),onDrag:(b,y)=>{const C=_;y=this.updatePositionsHeightByAttr(y),b.position=y,this.positions[b.index]=y,this.style[C(o._0x1d8a8b)]=Cesium__namespace[C(295)].distance(l[0],y),this.style[C(393)]=formatNum$1(getAngle(l[0],y),2),l[2]=getPositionByDirectionAndLen(l[0],this.style.endAngle,this[C(o._0x330288)][C(3189)])},onDragStart:(b,y)=>{const C=_;for(let v=0,M=this[C(s._0x39aebf)].length;v<M;v++)this.draggers[v][C(3482)]=!1},onDragEnd:(b,y)=>{this[_(i._0x5431af)]()}});m[_(3124)]=1,this.draggers.push(m);const f=getPositionByDirectionAndLen(h,this[_(357)].endAngle,this.style.radius);l[2]=f;const g=this.createDragger({position:this.updatePositionsHeightByAttr(f),onDrag:(b,y)=>{const C=_;y=this.updatePositionsHeightByAttr(y),b[C(760)]=y,this.positions[b.index]=y,this[C(x._0x19e3f7)].radius=Cesium__namespace[C(295)][C(x._0x402281)](l[0],y),this.style.endAngle=getAngle(l[0],y),l[1]=getPositionByDirectionAndLen(l[0],this.style.startAngle,this.style.radius)},onDragStart:(b,y)=>{const C=_;for(let v=0,M=this[C(t._0x3a8b93)].length;v<M;v++)this[C(t._0x3a8b93)][v].show=!1},onDragEnd:(b,y)=>{this[_(4009)]()}});g.index=2,this.draggers[_(e._0x3cd22f)](g),this.entityGraphic.extrudedHeight&&this[_(2634)]()}[_0x2397ca(2738)](e){const t={_0x100de1:3872},x=_0x2397ca;this.entityGraphic[x(3872)]=e,this.style[x(t._0x100de1)]=this.formatNum(e,2);const i=this.positions;for(let s=0,o=i.length;s<o;s++)i[s]=setPositionsHeight(i[s],e);this.fire(EventType[x(3820)])}}class Sector extends PolygonEntity{constructor(e={}){const t={_0x6af965:3189,_0x2c2e57:357,_0x4868de:963},x=_0x2397ca;super(e),this._minPointNum=2,this._maxPointNum=3,this.style.radius=this.style[x(t._0x6af965)]??1e3,this[x(357)][x(393)]=this.style.startAngle??0,this[x(t._0x2c2e57)].endAngle=this.style[x(t._0x4868de)]??0,e.position&&(this.positions=[e.position])}get[_0x2397ca(1710)](){return EditSector}updateAttrForDrawing(e){const t={_0x47ce98:1047,_0x2bed69:230,_0x20dce0:393,_0x260f9c:357},x=_0x2397ca;var i;if(!e&&((i=this._positions_draw)===null||i===void 0?void 0:i.length)>1){var s;const o=this[x(t._0x47ce98)][0];this.style.radius=formatNum$1(Cesium__namespace.Cartesian3[x(t._0x2bed69)](o,this._positions_draw[1]),2),this.style[x(t._0x20dce0)]=formatNum$1(getAngle(o,this._positions_draw[1]),2),((s=this._positions_draw)===null||s===void 0?void 0:s.length)>2?this[x(t._0x260f9c)][x(963)]=formatNum$1(getAngle(o,this._positions_draw[2]),2):this.style.endAngle=this[x(357)].startAngle}super.updateAttrForDrawing(e)}getShowPositions(e){return!e||e.length<1?e:Sector.getOutlinePositions(e[0],this.style)}_updateStyleHook(e,t){const x={_0x1ec68b:353,_0x54cd0a:325},i=_0x2397ca;super[i(x._0x1ec68b)](e,t),(Cesium__namespace.defined(t.radius)||Cesium__namespace.defined(t.startAngle)||Cesium__namespace.defined(t.endAngle)||Cesium__namespace[i(639)](t.noCenter))&&this[i(x._0x54cd0a)]()}autoSurfaceHeight(e={}){const t={_0x5c29aa:3656},x=_0x2397ca;return getSurfaceHeight(this._map.scene,this[x(1091)][0],{objectsToExclude:this[x(3831)][x(t._0x5c29aa)],...e}).then(i=>{i.position&&(this.positions=[i.position])})}_getGeoJsonGeometry(e){const t=_0x2397ca,x=this.getCoordinates(e==null?void 0:e.noAlt);return{type:t(1125),coordinates:x[0]}}static getOutlinePositions(e,t){const x={_0x436197:2434},i=_0x2397ca,s=t[i(3189)],o=t.startAngle;let r=t.endAngle;r<=o&&(r+=360);const c=[];!t.noCenter&&c[i(x._0x436197)](e);for(let _=o;_<=r;_++)c.push(getPositionByDirectionAndLen(e,_,s));return!t.noCenter&&c.push(e),c}}register$4("sector",Sector,!0);class StraightArrowUtil{constructor(){const e={_0x4c93f4:4017},t=_0x2397ca;this[t(e._0x4c93f4)]=algorithmUtil}setOptions(e={}){const t=_0x2397ca;this.tailWidthFactor=e.tailWidthFactor||.05,this.neckWidthFactor=e.neckWidthFactor||.1,this.headWidthFactor=e.headWidthFactor||.15,this.headAngle=Math.PI/4,this[t(1738)]=Math.PI*.17741}startCompute(e,t){const x={_0x1c1b0e:2202,_0x3980f5:4017,_0x29a326:1218},i=_0x2397ca;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const s=cartesians2mercators(e),o=this.getMaxHeight(s),r=[s[0],s[1]],c=r[0],_=r[1],l=this[i(4017)].getBaseLength(s),h=l*this[i(x._0x1c1b0e)],d=l*this.neckWidthFactor,u=l*this.headWidthFactor,m=this[i(x._0x3980f5)].getThirdPoint(_,c,Math.PI/2,h,!0),f=this.algorithmUtil.getThirdPoint(_,c,Math.PI/2,h,!1),g=this.algorithmUtil.getThirdPoint(c,_,this.headAngle,u,!1),b=this.algorithmUtil[i(x._0x29a326)](c,_,this.headAngle,u,!0),y=this.algorithmUtil.getThirdPoint(c,_,this.neckAngle,d,!1),C=this.algorithmUtil.getThirdPoint(c,_,this.neckAngle,d,!0);return mercators2cartesians([m,y,g,_,b,C,f],o)}getMaxHeight(e){let t=e[0][2]||0;for(let x=0;x<e.length;x++)e[2]>t&&(t=e[2]);return t}}const straightArrowUtil=new StraightArrowUtil;class StraightArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}getShowPositions(e){const t={_0x5c67f2:3505},x=_0x2397ca;return!e||e[x(2027)]<2?e:straightArrowUtil[x(t._0x5c67f2)](e,this.style)}static[_0x2397ca(3304)](e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),straightArrowUtil.startCompute(e,t))}}register$4("straightArrow",StraightArrow);const DEF_STYLE$l={color:"#3388ff",pixelSize:8,outlineColor:"#ffffff",outlineWidth:2,visibleDepth:!1};class PointMeasure extends PointEntity{constructor(e={}){const t={_0x53694f:357},x=_0x2397ca;e[x(t._0x53694f)]={...DEF_STYLE$l,...e.style},super(e)}_addedHook(e){const t={_0x49cfdb:1256},x={_0x562757:3736,_0x5cd5ea:1023},i=_0x2397ca;super._addedHook(e);const s=this._map;this[i(3135)](o=>{const r=i,c=this.point;c.format();const _=degree2dms(c.lng).str,l=degree2dms(c.lat).str;let h="";if(this.options.crs!==!1){const d=proj4Trans([c[r(3409)],c[r(x._0x562757)]],"EPSG:4326",this.options.crs??CRS.CGCS2000_GK_Zone_3);d[0]!==c.lng&&d[1]!==c.lat&&(h=r(2766)+d[0].toFixed(1)+`</div>
                   <div title="大地2000坐标"><label>纵坐标</label>`+d[1].toFixed(1)+"</div>")}return'<div class="mars3d-template-titile">'+s.getLangText(r(x._0x5cd5ea))+`</div>
                <div class="mars3d-template-content">
                    <div><label>`+s.getLangText("_经度")+"</label>"+c.lng+"&nbsp;&nbsp;"+_+`</div>
                    <div><label>`+s.getLangText("_纬度")+"</label>"+c.lat+"&nbsp;&nbsp;&nbsp;&nbsp;"+l+`</div>
                     `+h+`
                    <div><label>`+s[r(1337)](r(2684))+"</label>"+c.alt+s.getLangText("_米")+`</div>
                </div>`},{autoClose:this[i(357)].autoClose??!1,closeOnClick:this.style.closeOnClick??!1}),this.on(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.once(EventType.drawCreated,this[i(t._0x49cfdb)],this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType.editRemovePoint,this._editPointHandler,this),this.position&&this[i(3875)]()}_updatePositionsHook(){const e={_0x119d1a:3875},t=_0x2397ca;super._updatePositionsHook(),this[t(e._0x119d1a)]()}_removedHook(){const e={_0x18504f:3174},t=_0x2397ca;this.off(EventType.drawMouseMove,this[t(1403)],this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType[t(e._0x18504f)],this[t(184)],this),this.off(EventType.editRemovePoint,this._editPointHandler,this),super._removedHook()}_drawMouseMoveHandler(e){this.openPopup()}_drawCreatedHandler(e){const t={_0x5a7f83:1568},x=_0x2397ca;this.openPopup(),this.fire(EventType[x(t._0x5a7f83)],{mtype:this[x(968)],graphic:this},!0)}[_0x2397ca(184)](e){this[_0x2397ca(3875)]()}}register$4("pointMeasure",PointMeasure,!0);const DEF_STYLE$k={materialType:"PolylineGlow",glowPower:.1,color:"#ebe12c",width:9,clampToGround:!1};class DistanceMeasure extends PolylineEntity{constructor(e={}){const t={_0x376033:2172},x=_0x2397ca;e.hasMoveEdit=!1,e[x(2566)]=e.showAddText??!0,e[x(t._0x376033)]=e.decimal??2,e.style={...DEF_STYLE$k,...e.style},super(e),this._measured={}}get measured(){return this._measured}_addedHook(e){const t={_0x1f7625:3831,_0x3c0154:1403,_0x2492ba:913,_0x7aa5c5:1256,_0x289317:1091},x=_0x2397ca;var i,s;super._addedHook(e),this._arrPartMeasureLable=[],this._measureLable=this._createLabel(this.options.label||((i=this[x(t._0x1f7625)])===null||i===void 0||(s=i[x(3044)])===null||s===void 0?void 0:s.label)),this._measureLable.show=!1,this.on(EventType.drawAddPoint,this[x(1889)],this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType[x(3821)],this[x(t._0x3c0154)],this),this.once(EventType[x(t._0x2492ba)],this[x(t._0x7aa5c5)],this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType.editRemovePoint,this[x(184)],this),this.options[x(t._0x289317)]&&(this[x(3020)].show=!0,this._editPointHandler())}_updatePositionsHook(){super._updatePositionsHook(),this._measureLable.show=!0,this._editPointHandler()}_removedHook(){const e={_0x17975f:2669,_0x2debd6:3573,_0x3df19a:3174,_0x470ac0:3020,_0x445e71:2027},t=_0x2397ca;if(this.off(EventType[t(e._0x17975f)],this._drawAddPointHandler,this),this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.off(EventType[t(976)],this._drawRemovePointHandler,this),this[t(e._0x2debd6)](EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType[t(e._0x3df19a)],this[t(184)],this),this.off(EventType[t(3007)],this._editPointHandler,this),Cesium__namespace.defined(this._measureLable)&&(this._removeLabel(this[t(e._0x470ac0)]),delete this._measureLable),Cesium__namespace.defined(this._arrPartMeasureLable)&&this._arrPartMeasureLable[t(e._0x445e71)]>0){const x=this._arrPartMeasureLable;if(x&&x.length>0)for(let i=0,s=x[t(e._0x445e71)];i<s;i++)this._removeLabel(x[i]);delete this._arrPartMeasureLable}super[t(380)]()}[_0x2397ca(1018)](e){e.measured=getAttrVal(this.measured,{onlySimpleType:!0})}updateText(e){const t={_0x322fa0:230,_0x7f203d:3020,_0x41bd42:1648},x=_0x2397ca;e&&(this.options.unit=e);const i={unit:this.options.unit,lang:this._map.lang,decimal:this.options[x(2172)]};if(this._measured.distanceStr=formatDistance(this._measured.distance,i),this._measured[x(t._0x322fa0)]!==this._measured.distanceLastFd){if(this[x(t._0x7f203d)][x(484)]=this._map.getLangText("_总长")+":"+this._measured.distanceStr,this.options[x(2566)]){const s=formatDistance(this._measured.distanceLastFd,i);this._measured[x(324)]=s,this._measureLable.text+=`
(+`+s+")"}}else this._measureLable.text=this._map.getLangText("_总长")+":"+this._measured[x(2018)];if(e)for(let s=1,o=this._arrPartMeasureLable.length;s<o;s++){const r=this._arrPartMeasureLable[s];r[x(t._0x41bd42)]&&r.showText()}}_drawAddPointHandler(e){const t={_0x99eb:3831,_0x5ea1d6:2027,_0x4973c8:484,_0x55a870:230,_0x4722da:230},x={_0x3b2334:303,_0x42a5e2:423,_0x1c8a45:484},i=_0x2397ca;var s,o;const r=this,c=this.positionsShow,_=this._createLabel(this.options.label||((s=this[i(t._0x99eb)])===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.label),c[c[i(t._0x5ea1d6)]-1]);if(this[i(2846)].push(_),c[i(t._0x5ea1d6)]===1)_[i(t._0x4973c8)]=this._map.getLangText(i(912));else{const l=getSurfaceDistance(c),h=getSurfaceDistance([c[c.length-2],c[c.length-1]]);_.attr={},_.attr.value=l,_.attr[i(423)]=h,_.showText=function(){const d=i,u={unit:r.options.unit,lang:r[d(558)].lang,decimal:r[d(3044)].decimal},m=formatDistance(this[d(1578)][d(x._0x3b2334)],u);if(this.attr.value!==this[d(1578)].valueFD){if(this.text=m,r.options.showAddText){const f=formatDistance(this.attr[d(x._0x42a5e2)],u);this[d(x._0x1c8a45)]+=d(2602)+f+")"}}else this.text=m},_[i(1648)](),this._measured[i(t._0x55a870)]=l,this._measured.distanceLastFd=h,this._measured.distanceStr=formatDistance(this[i(253)][i(t._0x4722da)],{unit:this.options.unit,lang:this._map.lang,decimal:this.options.decimal})}}_drawRemovePointHandler(e){const t={_0x554610:1307,_0x50e56a:3020,_0x273070:760,_0x4d4a72:641},x=_0x2397ca,i=this._arrPartMeasureLable[x(3978)]();this[x(t._0x554610)](i),this._drawMouseMoveHandler(e),this[x(t._0x50e56a)][x(t._0x273070)]=e[x(t._0x4d4a72)]}_drawMouseMoveHandler(e){const t={_0x3ec799:3482,_0x4541e5:2018},x=_0x2397ca,i=this.positionsShow;if(!i||i.length<2){this._measureLable[x(t._0x3ec799)]=!1;return}const s=getSurfaceDistance(i);let o=getSurfaceDistance([i[i.length-2],i[i.length-1]]);o===0&&i.length>2&&(o=getSurfaceDistance([i[i.length-3],i[i.length-2]])),this._measured.distance=s,this._measured.distanceLastFd=o,this.updateText(),this._measureLable.position=i[i[x(2027)]-1],this.fire(EventType[x(3796)],{mtype:this.type,value:this[x(253)].distance,label:this[x(253)][x(t._0x4541e5)]},!0)}[_0x2397ca(1256)](e,t=!0){const x={_0x5cb991:2027,_0x253d8d:2713},i=_0x2397ca,s=this.positionsShow,o=this._arrPartMeasureLable[i(2027)]-s[i(x._0x5cb991)];if(o>=0){for(let r=this._arrPartMeasureLable.length-1;r>=s.length-1;r--)this._removeLabel(this[i(2846)][r]);this._arrPartMeasureLable[i(x._0x253d8d)](s.length-1,o+1)}this.updateText(),this._measureLable.position=s[s.length-1],this._measureLable.show=!0,t&&this[i(1788)](EventType.end,{mtype:this.type,value:this._measured[i(230)],label:this._measured.distanceStr},!0)}_editPointHandler(e,t=!0){const x={_0x2caaba:967,_0x56f24e:3831,_0x595c65:3831,_0x408ec1:253,_0x16c240:2018},i={_0x43fcff:558,_0x33a37d:2172,_0x599432:303,_0x5153c2:484,_0x4ad421:484},s=_0x2397ca,o=this,r=this[s(982)];if(!r||r.length<2)return;let c=this._arrPartMeasureLable;if(c&&c.length>0)for(let g=1,b=c[s(2027)];g<b;g++)this[s(1307)](c[g]);else{var _,l;const g=this[s(x._0x2caaba)](this.options.label||((_=this[s(x._0x56f24e)])===null||_===void 0||(l=_.options)===null||l===void 0?void 0:l.label),r[0]);g.text=this._map.getLangText("_起点"),c=[g]}const h=c[0];h.position=r[0],this._arrPartMeasureLable=[h];let d=0;for(let g=1,b=r[s(2027)]-1;g<b;g++){var u,m;const y=getSurfaceDistance([r[g-1],r[g]]);d+=y;const C=this._createLabel(this.options.label||((u=this[s(x._0x595c65)])===null||u===void 0||(m=u.options)===null||m===void 0?void 0:m.label),r[g]);this._arrPartMeasureLable.push(C),C.attr={},C.attr[s(303)]=d,C.attr.valueFD=y,C.showText=function(){const v=s,M={unit:o.options.unit,lang:o[v(i._0x43fcff)].lang,decimal:o.options[v(i._0x33a37d)]},w=formatDistance(this.attr.value,M);if(this.attr[v(i._0x599432)]!==this.attr.valueFD){const H=formatDistance(this.attr.valueFD,M);this[v(484)]=w,o.options[v(2566)]&&(this[v(i._0x5153c2)]+=`
(+`+H+")")}else this[v(i._0x4ad421)]=w},C.showText()}const f=getSurfaceDistance([r[r.length-2],r[r.length-1]]);d+=f,this[s(253)].distance=d,this._measured.distanceLastFd=f,this.updateText(),this._measureLable.position=r[r.length-1],this._measureLable.show=!0,t&&this.fire(EventType.change,{mtype:this[s(968)],value:this._measured[s(230)],label:this[s(x._0x408ec1)][s(x._0x16c240)]},!0)}}register$4("distanceMeasure",DistanceMeasure);class DistanceSurfaceMeasure extends DistanceMeasure{constructor(e={}){const t={_0x3403a0:1259},x=_0x2397ca;super(e),e._promise&&(this[x(t._0x3403a0)]=e._promise,delete e._promise),e.style.clampToGround=!0,e.splitNum=e.splitNum??200,this.disTerrainScale=1.2}_drawCreatedHandler(e){super._drawCreatedHandler(e,!1),this.updateLengthForTerrain(e)}_editPointHandler(e){const t={_0x2c6405:184},x=_0x2397ca;super[x(t._0x2c6405)](e,!1),this.updateLengthForTerrain(e)}[_0x2397ca(3299)](e){const t={_0x1aa195:3044,_0x42c27c:713},x={_0x1d81af:253},i={_0xa8eeac:558,_0x157775:423,_0x2f8fb9:1648,_0x40bab2:253},s=_0x2397ca,o=this.positionsShow;!o||o.length<2||(this.fire(EventType.start,{mtype:this.type,graphic:this},!0),getClampDistance(o,{scene:this._map.scene,splitNum:this[s(t._0x1aa195)].splitNum,has3dtiles:this[s(3044)][s(t._0x42c27c)],exact:this[s(3044)].exact,disTerrainScale:this.disTerrainScale,endItem:r=>{const c=s;if(!this[c(i._0xa8eeac)]||!this._measureLable)return;let _=r.index;const l=r.all_distance,h=r.distance;_++;const d=this._arrPartMeasureLable[_];d?(d.attr.value=l,d[c(1578)][c(i._0x157775)]=h,d[c(i._0x2f8fb9)]()):_===o.length-1&&this._measureLable&&(this[c(253)].distance=l,this[c(i._0x40bab2)][c(1903)]=h,this.updateText())},end:r=>{const c=s;var _;if(!this._map||!this._measureLable)return;this[c(253)][c(230)]=r;const l={mtype:this.type,graphic:this,value:this[c(x._0x1d81af)][c(230)],label:this._measured.distanceStr};this.fire(EventType.change,l,!0),this.fire(EventType.end,l,!0),(_=this[c(1259)])!==null&&_!==void 0&&_.resolve&&this._promise[c(3863)](this)}}))}}register$4(_0x2397ca(1965),DistanceSurfaceMeasure);class SectionMeasure extends DistanceMeasure{constructor(e={}){const t=_0x2397ca;super(e),e._promise&&(this._promise=e._promise,delete e._promise),e.style[t(1034)]=!0,e.splitNum=e.splitNum??200}_drawCreatedHandler(e){super._drawCreatedHandler(e,!1),this.updateSectionForTerrain(e)}_editPointHandler(e){const t={_0x2214e0:3753},x=_0x2397ca;super._editPointHandler(e,!1),this[x(t._0x2214e0)](e)}[_0x2397ca(3753)](e){const t={_0x5a9954:968,_0x54651d:3044,_0x353efb:3044},x={_0x149b67:558,_0x2eac26:3020,_0x54a4e2:3796},i={_0x40f770:2145,_0x42f38a:3872},s=_0x2397ca,o=this.positionsShow;if(!o||o.length<2)return;this.fire(EventType[s(546)],{mtype:this[s(t._0x5a9954)],graphic:this},!0);let r=0;const c=[],_=[],l=[],h=[];computeStepSurfaceLine({map:this._map,positions:o,splitNum:this[s(3044)].splitNum,has3dtiles:this[s(t._0x54651d)].has3dtiles,exact:this[s(t._0x353efb)].exact,endItem:(d,u,m)=>{const f=s;var g,b;if(!this._map||!this._measureLable)return;const y=(g=Cesium__namespace.Cartographic[f(i._0x40f770)](o[m]))===null||g===void 0?void 0:g[f(i._0x42f38a)],C=(b=Cesium__namespace.Cartographic.fromCartesian(o[m+1]))===null||b===void 0?void 0:b.height,v=(C-y)/d.length;let M=0;for(let H=0;H<d.length;H++){if(H!==0){const L=Cesium__namespace.Cartesian3[f(230)](d[H],d[H-1]);r+=L,M+=L}c.push(Number(r.toFixed(1)));const D=LngLatPoint.fromCartesian(d[H]);_.push(D.alt),h.push(D);const F=Number((y+v*H).toFixed(1));l.push(F)}m++;const w=this._arrPartMeasureLable[m];w?(w.attr.value=r,w.attr.valueFD=M,w.showText()):m===o.length-1&&this._measureLable&&(this._measured.distance=r,this._measured.distanceLastFd=M,this.updateText())},end:()=>{const d=s;var u;if(!this[d(x._0x149b67)]||!this[d(x._0x2eac26)])return;this.updateText(),this._measured.arrLen=c,this._measured[d(3245)]=l,this._measured[d(2468)]=_,this._measured.arrPoint=h;const m={mtype:this.type,graphic:this,value:r,label:this[d(253)].distanceStr,...this[d(253)]};this.fire(EventType[d(x._0x54a4e2)],m,!0),this.fire(EventType.end,m,!0),(u=this[d(1259)])!==null&&u!==void 0&&u.resolve&&this._promise.resolve(this)}})}}register$4("sectionMeasure",SectionMeasure);const DEF_STYLE$j={materialType:"PolylineArrow",color:"#ebe967",width:9,clampToGround:!0};class AngleMeasure extends PolylineEntity{constructor(e={}){const t={_0x5f5c8e:2438},x=_0x2397ca;e.hasMoveEdit=!1,e.maxPointNum=2,e.decimal=e.decimal??2,e.angleDecimal=e[x(t._0x5f5c8e)]??1,e.style={...DEF_STYLE$j,...e.style},super(e),this._measured={}}get measured(){return this[_0x2397ca({_0x5a4984:253}._0x5a4984)]}[_0x2397ca(2670)](e){const t={_0x589461:2670,_0x246202:3831,_0x3298da:743,_0x4775ab:3482,_0x455ee4:3821,_0x7189da:3007,_0x525f99:1403},x=_0x2397ca;var i,s;super[x(t._0x589461)](e),this._measureLable=this[x(967)](this.options.label||((i=this[x(t._0x246202)])===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s[x(t._0x3298da)])),this._measureLable[x(t._0x4775ab)]=!1,this.on(EventType.drawAddPoint,this[x(1889)],this),this.on(EventType.drawRemovePoint,this[x(3759)],this),this.on(EventType[x(t._0x455ee4)],this._drawMouseMoveHandler,this),this[x(1898)](EventType.drawCreated,this[x(1256)],this),this.on(EventType.editMovePoint,this._drawMouseMoveHandler,this),this.on(EventType[x(t._0x7189da)],this[x(t._0x525f99)],this),this.on(EventType.editMouseMove,this._drawMouseMoveHandler,this),this.options.positions&&(this[x(3020)].show=!0,this._drawMouseMoveHandler())}_updatePositionsHook(){const e=_0x2397ca;super._updatePositionsHook(),this._measureLable[e(3482)]=!0,this._drawMouseMoveHandler()}_removedHook(){const e={_0x12c53a:3573,_0x27c999:1403,_0x173d6c:3020,_0xdb0449:380},t=_0x2397ca;this.off(EventType.drawAddPoint,this._drawAddPointHandler,this),this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.off(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this[t(e._0x12c53a)](EventType[t(3174)],this[t(e._0x27c999)],this),this.off(EventType.editRemovePoint,this[t(1403)],this),this.off(EventType.editMouseMove,this._drawMouseMoveHandler,this),Cesium__namespace.defined(this._measureLable)&&(this._removeLabel(this._measureLable),delete this[t(e._0x173d6c)]),super[t(e._0xdb0449)]()}_toJSON_Ex(e){const t={_0x2b9401:1006},x=_0x2397ca;e[x(t._0x2b9401)]=getAttrVal(this.measured,{onlySimpleType:!0})}updateText(e){const t={_0x91f9f4:223,_0x169a4c:253,_0x417f2b:253,_0x71f8c4:1908,_0x2f3cf6:1954,_0x1539e4:2172,_0x3b3172:356},x=_0x2397ca;e&&(this.options.unit=e),this._measured[x(t._0x91f9f4)]=this[x(253)].angle.toFixed(this.options.angleDecimal)+"°",this[x(t._0x169a4c)].distanceStr=formatDistance(this[x(t._0x417f2b)].distance,{unit:this[x(3044)][x(t._0x71f8c4)],lang:this._map[x(t._0x2f3cf6)],decimal:this.options[x(t._0x1539e4)]}),this._measureLable.text=this._map.getLangText(x(t._0x3b3172))+":"+this[x(253)][x(223)]+`
`+this._map.getLangText("_距离")+":"+this._measured.distanceStr}_drawAddPointHandler(e){this._drawMouseMoveHandler(e)}[_0x2397ca(3759)](e){const t={_0xbf6b65:3482},x=_0x2397ca;this._measureLable&&(this._measureLable[x(t._0xbf6b65)]=!1)}_drawMouseMoveHandler(e){const t={_0x4111b4:230,_0x380c07:3143,_0x743e3d:223},x=_0x2397ca,i=this[x(982)];if(!i||i[x(2027)]<2){this._measureLable.show=!1;return}this._measured[x(230)]=Cesium__namespace.Cartesian3[x(t._0x4111b4)](i[0],i[1]),this._measured[x(t._0x380c07)]=getAngle(i[0],i[1],!0),this.updateText(),this._measureLable.position=i[1],this[x(3020)].show=!0,this.fire(EventType.change,{mtype:this[x(968)],value:this._measured.angle,label:this._measured[x(t._0x743e3d)]},!0)}_drawCreatedHandler(e){const t={_0x32af1c:253},x=_0x2397ca;this.fire(EventType.end,{mtype:this.type,value:this._measured.angle,label:this[x(t._0x32af1c)].angleStr},!0)}}register$4("angleMeasure",AngleMeasure);const DEF_STYLE$i={materialType:"PolylineGlow",glowPower:.1,color:"#ebe12c",width:9};class HeightMeasure extends PolylineEntity{constructor(e={}){const t={_0x9d2e51:2172},x=_0x2397ca;e.hasMoveEdit=!1,e.maxPointNum=2,e.decimal=e[x(t._0x9d2e51)]??2,e.style={...DEF_STYLE$i,...e.style},super(e),this[x(253)]={}}get measured(){return this._measured}_addedHook(e){const t={_0xacab38:2670,_0x57eeb8:1165,_0x235521:2669,_0x2c94a5:1091,_0x49f925:184},x=_0x2397ca;super[x(t._0xacab38)](e),this[x(t._0x57eeb8)](),this.on(EventType[x(t._0x235521)],this[x(1889)],this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType[x(3821)],this._drawMouseMoveHandler,this),this[x(1898)](EventType.drawCreated,this._drawCreatedHandler,this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType.editRemovePoint,this._editPointHandler,this),this.on(EventType.editMouseMove,this._editPointHandler,this),this.options[x(t._0x2c94a5)]&&(this._measureLable.show=!0,this[x(t._0x49f925)]())}[_0x2397ca(325)](){super._updatePositionsHook(),this._measureLable.show=!0,this._editPointHandler()}_removedHook(){const e={_0x2d59ee:3821,_0x3c9915:3759,_0x2ff7f1:1256,_0x2b8a28:3174,_0x3ca566:3573},t=_0x2397ca;this.off(EventType.drawAddPoint,this._drawAddPointHandler,this),this[t(3573)](EventType[t(e._0x2d59ee)],this[t(1403)],this),this.off(EventType[t(976)],this[t(e._0x3c9915)],this),this[t(3573)](EventType.drawCreated,this[t(e._0x2ff7f1)],this),this[t(3573)](EventType[t(e._0x2b8a28)],this._editPointHandler,this),this.off(EventType.editRemovePoint,this._editPointHandler,this),this[t(e._0x3ca566)](EventType.editMouseMove,this._editPointHandler,this),this._removeMeasureLabelAndEx(),super._removedHook()}_toJSON_Ex(e){const t={_0x406feb:1006},x=_0x2397ca;e.measured=getAttrVal(this[x(t._0x406feb)],{onlySimpleType:!0})}[_0x2397ca(1165)](){const e={_0x1e88c2:743},t=_0x2397ca;var x,i;this._measureLable=this._createLabel(this.options[t(e._0x1e88c2)]||((x=this._layer)===null||x===void 0||(i=x.options)===null||i===void 0?void 0:i.label)),this[t(3020)].show=!1}_removeMeasureLabelAndEx(){const e={_0x3b1e20:1307,_0x535ad5:3020},t=_0x2397ca;Cesium__namespace.defined(this._measureLable)&&(this[t(e._0x3b1e20)](this._measureLable),delete this[t(e._0x535ad5)])}updateText(e){const t={_0x283362:253,_0x952687:1337},x=_0x2397ca;e&&(this.options[x(1908)]=e),this[x(t._0x283362)].heightStr=formatDistance(this._measured.height,{unit:this[x(3044)].unit,lang:this._map.lang,decimal:this.options.decimal}),this._measureLable.text=this._map[x(t._0x952687)]("_高度差")+":"+this._measured.heightStr}_drawAddPointHandler(e){this[_0x2397ca({_0x495d88:1403}._0x495d88)](e)}[_0x2397ca(3759)](e){const t=_0x2397ca;this._measureLable&&(this._measureLable[t(3482)]=!1)}_drawMouseMoveHandler(e){const t={_0x1a24c9:728,_0x382d88:3020,_0x1b87f1:3796,_0x2b5b5c:968,_0xff53ec:253},x=_0x2397ca,i=this.positionsShow;if(!i||i.length<2){this[x(3020)][x(3482)]=!1;return}const s=Cesium__namespace.Cartographic[x(2145)](i[0]),o=Cesium__namespace[x(1899)].fromCartesian(i[1]);this._measured.height=this._map.getRealAlt(Math[x(889)](o.height-s[x(3872)])),this[x(t._0x1a24c9)](),this._measureLable.position=Cesium__namespace.Cartesian3.midpoint(i[0],i[1],new Cesium__namespace.Cartesian3),this[x(t._0x382d88)].show=!0,this.fire(EventType[x(t._0x1b87f1)],{mtype:this[x(t._0x2b5b5c)],value:this[x(t._0xff53ec)].height,label:this._measured.heightStr},!0)}_drawCreatedHandler(e){const t={_0xe0b052:1788,_0x174c89:968},x=_0x2397ca;this[x(t._0xe0b052)](EventType.end,{mtype:this[x(t._0x174c89)],value:this._measured.height,label:this._measured.heightStr},!0)}_editPointHandler(e){this._drawMouseMoveHandler(e)}}register$4(_0x2397ca(2205),HeightMeasure);class HeightTriangleMeasure extends HeightMeasure{_initMeasureLable(){const e={_0x154d92:1165,_0x10c2c7:2665,_0x534190:3044},t=_0x2397ca;var x,i,s,o;super[t(e._0x154d92)](),this[t(1771)]=this._createLabel(this.options.label||((x=this[t(3831)])===null||x===void 0||(i=x.options)===null||i===void 0?void 0:i.label)),this._measureDistanceLable[t(e._0x10c2c7)]=new Cesium__namespace.Cartesian2(0,0),this._measureHorLable=this._createLabel(this.options.label||((s=this[t(3831)])===null||s===void 0||(o=s[t(e._0x534190)])===null||o===void 0?void 0:o.label)),this._measureHorLable[t(2665)]=new Cesium__namespace.Cartesian2(0,0)}[_0x2397ca(1467)](){const e=_0x2397ca;super._removeMeasureLabelAndEx(),this._measureDistanceLable!=null&&(this._removeLabel(this._measureDistanceLable),delete this._measureDistanceLable),this._measureHorLable!=null&&(this._removeLabel(this[e(1460)]),delete this._measureHorLable),this._measureExLine!=null&&(this[e(809)].entities.remove(this[e(782)]),delete this._measureExLine)}[_0x2397ca(728)](e){const t={_0x35bc2e:558,_0x3aa068:253,_0x33ba16:1460,_0x581cd7:484,_0x1d1b74:558},x=_0x2397ca;super.updateText(e);const i={unit:this.options[x(1908)],lang:this._map.lang,decimal:this.options.decimal};this[x(253)].distanceStr=formatDistance(this._measured.distance,i),this._measureDistanceLable[x(484)]=this[x(t._0x35bc2e)].getLangText("_空间距离")+":"+this._measured.distanceStr,this[x(t._0x3aa068)][x(2687)]=formatDistance(this[x(t._0x3aa068)].distanceHor,i),this[x(t._0x33ba16)][x(t._0x581cd7)]=this[x(t._0x1d1b74)].getLangText("_水平距离")+":"+this._measured.distanceHorStr}_drawRemovePointHandler(e){const t={_0x29e117:3020,_0x3d3205:1460,_0x329e65:3482},x=_0x2397ca;this[x(t._0x29e117)]&&(this._measureLable.show=!1),this._measureHorLable&&(this[x(t._0x3d3205)][x(t._0x329e65)]=!1),this._measureDistanceLable&&(this[x(1771)].show=!1),this._measureExLine&&(this._measureExLine_positions=null)}_drawMouseMoveHandler(e){const t={_0x199b5e:1899,_0x2e08fa:3872,_0x250288:295,_0x3fd451:238,_0x1eb1a8:238,_0x37f60f:230,_0x4f7cfb:1499,_0x1399cc:542,_0x4cb85e:230,_0x54abe2:253,_0x4dc36b:2681},x=_0x2397ca,i=this.positionsShow;if(!i||i.length<2){this._measureLable.show=!1;return}const s=Cesium__namespace[x(t._0x199b5e)].fromCartesian(i[0]),o=s.height,r=Cesium__namespace[x(t._0x199b5e)][x(2145)](i[1]),c=r[x(t._0x2e08fa)];let _,l,h;o>c?(l=Cesium__namespace[x(t._0x250288)][x(t._0x3fd451)](r.longitude,r.latitude,o),h=i[0],_=i[1]):(l=Cesium__namespace.Cartesian3[x(t._0x1eb1a8)](s.longitude,s.latitude,c),h=i[1],_=i[0]),this._measured.height=this._map.getRealAlt(Math.abs(c-o)),this._measureLable.position=Cesium__namespace.Cartesian3.midpoint(l,_,new Cesium__namespace.Cartesian3),this._measureLable.show=!0,this._measured.distance=Cesium__namespace[x(t._0x250288)][x(t._0x37f60f)](h,_),this._measureDistanceLable.position=Cesium__namespace.Cartesian3[x(t._0x4f7cfb)](h,_,new Cesium__namespace.Cartesian3),this._measureDistanceLable.show=!0,this._measured[x(t._0x1399cc)]=Cesium__namespace[x(t._0x250288)][x(t._0x4cb85e)](l,h),this._measureHorLable.position=Cesium__namespace.Cartesian3[x(1499)](l,h,new Cesium__namespace.Cartesian3),this._measureHorLable.show=!0,this.updateText(),this.updateExLine([_,l,h]),this.fire(EventType.change,{mtype:this[x(968)],value:this._measured.height,label:this[x(t._0x54abe2)][x(t._0x4dc36b)]},!0)}updateExLine(e){const t={_0x207c12:782},x=_0x2397ca;if(this._measureExLine_positions=e,!this[x(t._0x207c12)]){const i={id:this.id+"-ex",polyline:PolylineStyleConver.toCesiumVal(this.options.style,{},!0)};i.polyline.positions=new Cesium__namespace[x(428)](s=>this._measureExLine_positions,!1),this._measureExLine=this._createEntity(i),this.dataSource.entities[x(565)](this[x(t._0x207c12)]),this.bindPickId(this._measureExLine)}}[_0x2397ca(184)](e){this._drawMouseMoveHandler(e)}}register$4("heightTriangleMeasure",HeightTriangleMeasure);const DEF_STYLE$h={color:"#00fff2",outline:!0,outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:!1};class AreaMeasure extends PolygonEntity{constructor(e={}){const t=_0x2397ca;e.hasMoveEdit=!1,e[t(2172)]=e.decimal??2,e.style={...DEF_STYLE$h,...e.style},e.label&&(e.label={horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,...e.label}),super(e),this._measured={}}get[_0x2397ca(1006)](){return this._measured}[_0x2397ca(2670)](e){const t={_0x1d3071:3831,_0x3b7268:913},x=_0x2397ca;var i,s;super._addedHook(e),this._measureLable=this._createLabel(this.options.label||((i=this[x(t._0x1d3071)])===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s.label)),this._measureLable.show=!1,this.on(EventType[x(2669)],this._drawAddPointHandler,this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.once(EventType[x(t._0x3b7268)],this._drawCreatedHandler,this),this.on(EventType.editMovePoint,this[x(184)],this),this.on(EventType.editRemovePoint,this._editPointHandler,this),this.options.positions&&(this._measureLable.show=!0,this._editPointHandler())}_updatePositionsHook(){const e={_0x1e7cbd:3020},t=_0x2397ca;super._updatePositionsHook(),this[t(e._0x1e7cbd)]&&(this[t(3020)].show=!0,this._editPointHandler())}[_0x2397ca(380)](){const e={_0x5eded8:3759},t=_0x2397ca;this[t(3573)](EventType[t(2669)],this._drawAddPointHandler,this),this[t(3573)](EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.off(EventType.drawRemovePoint,this[t(e._0x5eded8)],this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this._editPointHandler,this),this.off(EventType.editRemovePoint,this._editPointHandler,this),this._removeMeasureLabelAndEx(),super._removedHook()}[_0x2397ca(1018)](e){e.measured=getAttrVal(this.measured,{onlySimpleType:!0,noArray:!0})}[_0x2397ca(1467)](){const e={_0x41773d:3020},t=_0x2397ca;Cesium__namespace[t(639)](this._measureLable)&&(this._removeLabel(this[t(e._0x41773d)]),delete this[t(e._0x41773d)])}updateText(e){const t={_0x2bc912:3044,_0x5eaf33:484,_0x38d0a0:558},x=_0x2397ca;e&&(this.options.unit=e),this[x(253)].areaStr=formatArea(this._measured.area,{unit:this.options.unit,lang:this._map.lang,decimal:this[x(t._0x2bc912)].decimal}),this._measureLable[x(t._0x5eaf33)]=this[x(t._0x38d0a0)].getLangText("_面积")+":"+this._measured.areaStr}[_0x2397ca(1421)](e){const t={_0x22d0d3:1421},x=_0x2397ca;var i;super[x(t._0x22d0d3)](e),this._drawMouseMoveHandler(),((i=this.options.positions)===null||i===void 0?void 0:i[x(2027)])>2&&this[x(1740)]()}_drawAddPointHandler(e){this._drawMouseMoveHandler(e)}[_0x2397ca(3759)](e){const t={_0x27422a:982},x=_0x2397ca,i=this[x(t._0x27422a)];(i==null?void 0:i[x(2027)])<3&&(this._measureLable.show=!1)}_drawMouseMoveHandler(e){const t={_0x42e7c0:3020,_0x4ee0ad:3020,_0x1c935c:3482},x=_0x2397ca,i=this.positionsShow;if(i.length<3){this[x(t._0x42e7c0)]&&(this[x(3020)].show=!1);return}this._measured.area=getArea(i),this.updateText();const s=centerOfMass(i);this._measureLable[x(760)]=s,this[x(t._0x4ee0ad)][x(t._0x1c935c)]=!0,this.fire(EventType[x(3796)],{mtype:this.type,value:this[x(253)].area,label:this[x(253)].areaStr},!0)}[_0x2397ca(1256)](e){const t={_0x137999:253,_0xf86805:1570},x=_0x2397ca;this[x(1788)](EventType.end,{mtype:this.type,value:this[x(t._0x137999)].area,label:this._measured[x(t._0xf86805)]},!0)}_editPointHandler(e){const t={_0x2ed660:253,_0xf9c9f1:760},x=_0x2397ca,i=this.positionsShow;!i||i.length<3||(this[x(t._0x2ed660)].area=getArea(i),this.updateText(),this._measureLable[x(t._0xf9c9f1)]=centerOfMass(i),this.fire(EventType.change,{mtype:this[x(968)],value:this._measured.area,label:this._measured.areaStr},!0))}}register$4("areaMeasure",AreaMeasure);class AreaSurfaceMeasure extends AreaMeasure{constructor(e={}){const t={_0xeac1e5:357},x=_0x2397ca;super(e),e._promise&&(this._promise=e._promise,delete e._promise),e[x(t._0xeac1e5)][x(1034)]=!0}_drawCreatedHandler(e){this.updateAreaForTerrain(e)}_editPointHandler(e){const t={_0x2b9a7a:184},x=_0x2397ca;super[x(t._0x2b9a7a)](e),this.updateAreaForTerrain(e)}updateAreaForTerrain(e){const t={_0x4b1fa8:713,_0x2fb8c9:1286},x={_0x188f07:760,_0x3e6a25:1295,_0x55bbb6:3020,_0x284529:1568},i=_0x2397ca,s=this.positionsShow;!s||s.length<3||(this.fire(EventType.start,{mtype:this.type,graphic:this},!0),getClampArea(s,{scene:this._map.scene,splitNum:this[i(3044)].splitNum,has3dtiles:this.options[i(t._0x4b1fa8)],exact:this[i(3044)][i(584)]})[i(t._0x2fb8c9)](o=>{const r=i;var c,_;if(!this._map||!this._measureLable)return;const l=getPositionValue(this._measureLable[r(x._0x188f07)],(c=this[r(558)])===null||c===void 0?void 0:c.clock.currentTime);l&&o!==null&&o!==void 0&&o[r(x._0x3e6a25)]&&(this[r(x._0x55bbb6)].position=setPositionsHeight(l,o[r(1295)])),this._measured.area=o.area,this.updateText();const h={...o,mtype:this.type,value:this._measured.area,label:this._measured.areaStr};this.fire(EventType[r(3796)],h,!0),this.fire(EventType[r(x._0x284529)],h,!0),(_=this._promise)!==null&&_!==void 0&&_.resolve&&this[r(1259)].resolve(this)}))}}register$4("areaSurfaceMeasure",AreaSurfaceMeasure);class VolumeMeasure extends AreaMeasure{constructor(e={}){const t={_0x596901:1259,_0x3cc8fc:428,_0x2a2fe6:3525},x=_0x2397ca;super(e),e._promise&&(this[x(t._0x596901)]=e[x(1259)],delete e._promise),this.labelHeightStyle={...this.options.label,font_size:15,background:!1},Cesium__namespace.defined(e.labelHeight)&&(this.labelHeightStyle={...this.labelHeightStyle,...e.labelHeight}),this.polygonWallStyle={color:"#00ff00",opacity:.3,closeTop:!1,closeBottom:!0,perPositionHeight:!1,height:new Cesium__namespace[x(428)](i=>this.minHeight,!1),extrudedHeight:new Cesium__namespace[x(t._0x3cc8fc)](i=>this[x(1295)],!1)},Cesium__namespace.defined(e[x(747)])&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e[x(t._0x2a2fe6)]??!0,this.offsetLabel=e.offsetLabel??!1,this.showArea=e.showArea??!0,this.showFillVolume=e.showFillVolume??!0,this[x(3461)]=e.showDigVolume??!0,this._hasFX=!1}get hasEdit(){return!1}get polygonMaxHeight(){const e={_0x1c9083:1634},t=_0x2397ca;return this[t(e._0x1c9083)]?this[t(e._0x1c9083)].maxHeight:this.maxHeight}get height(){return this._jzmHeight}set height(e){const t={_0x95f948:3892},x=_0x2397ca;if(this._jzmHeight=e,e>this.maxHeight&&(this.maxHeight=e),e<this[x(t._0x95f948)]&&(this.minHeight=e),!this._hasFX)return;const i=updateVolume(this.interPolygonObj,this.height);for(const o in i)this[x(253)][o]=i[o];if(this.updateText(),this[x(2846)])for(let o=0;o<this._arrPartMeasureLable[x(2027)];o++)this._arrPartMeasureLable[o].showText();const s={...i,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,s,!0)}get minHeight(){return this[_0x2397ca({_0xcc05b0:476}._0xcc05b0)]||0}set minHeight(e){const t={_0x558c72:476,_0x456ea2:1634},x=_0x2397ca;if(this[x(t._0x558c72)]=e,!this._hasFX)return;this.interPolygonObj&&(this.interPolygonObj.minHeight=e,this[x(t._0x456ea2)]=updateVolumeByMinHeight(this.interPolygonObj));const i=updateVolume(this[x(1634)],this.height);for(const o in i)this._measured[o]=i[o];this.updateText();const s={...i,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,s,!0)}get maxHeight(){return this._maxHeight||0}set maxHeight(e){this._maxHeight=e}_showHook(e){const t={_0x3f099e:3020,_0xc24e30:2846},x=_0x2397ca;if(this._wallEntity&&(this._wallEntity.show=e),this._measureLable&&(this[x(t._0x3f099e)][x(3482)]=e),this[x(2846)])for(let i=0;i<this[x(t._0xc24e30)].length;i++)this._arrPartMeasureLable[i].show=e}_removedHook(){const e={_0x5e65a8:1691,_0x4ae6f0:679,_0x5d12cb:1691},t=_0x2397ca;this[t(e._0x5e65a8)]&&(this[t(558)].scene[t(e._0x4ae6f0)][t(1583)]=!1,delete this[t(e._0x5d12cb)]),super._removedHook()}_removeMeasureLabelAndEx(){const e={_0x265b72:1467,_0x61f8c5:2846,_0x2a78d2:844},t=_0x2397ca;if(super[t(e._0x265b72)](),Cesium__namespace.defined(this[t(e._0x61f8c5)])&&this._arrPartMeasureLable.length>0){const x=this[t(2846)];if(x&&x.length>0)for(let i=0,s=x.length;i<s;i++)this[t(1307)](x[i]);delete this._arrPartMeasureLable}Cesium__namespace.defined(this._wallEntity)&&(this.dataSource.entities[t(2689)](this[t(e._0x2a78d2)]),delete this._wallEntity)}_drawCreatedHandler(e){const t=_0x2397ca;this._measureLable.text=this[t(558)].getLangText("_正在计算体积")+"…";const x=this.positionsShow;setTimeout(()=>{this.calcVolume(x)},100)}_editPointHandler(e){this._drawCreatedHandler(e)}updateText(e){const t={_0x14b3ec:3076,_0xdb1344:3044,_0x4a1629:1658,_0x480d6e:253},x=_0x2397ca;e&&(this.options[x(1908)]=e);const i={unit:this.options.unit,lang:this._map.lang,decimal:this.options.decimal};let s="";this.showFillVolume&&this[x(253)].fillVolume>0&&(this[x(253)].fillVolumeStr=formatVolume(this._measured[x(t._0x14b3ec)],i),s+=(this[x(t._0xdb1344)].fillVolumeName||this._map.getLangText("_填方体积"))+"："+this._measured.fillVolumeStr+`
`),this.showDigVolume&&this._measured[x(2059)]>0&&(this._measured.digVolumeStr=formatVolume(this._measured[x(2059)],i),s+=(this.options.digVolumeName||this._map.getLangText(x(t._0x4a1629)))+"："+this._measured.digVolumeStr+`
`),this.showArea&&this._measured.totalArea>0&&(this[x(t._0x480d6e)].totalAreaStr=formatArea(this._measured[x(742)],i),s+=(this.options.areaName||this._map.getLangText("_横切面积"))+"："+this._measured.totalAreaStr),this._measureLable.text=s}calcVolume(e){const t={_0x502f32:2027,_0x26446a:3044},x={_0xaab34a:1583},i=_0x2397ca;!this._map||!e||e[i(t._0x502f32)]<3||(this.fire(EventType.start,{mtype:this.type,sourceTarget:this,positions:e},!0),this._hasFX=!0,interPolygon({positions:e,scene:this._map.scene,exact:!0,...this[i(t._0x26446a)]}).then(s=>{const o=i;!this._map||!this[o(455)]||(s[o(713)]?this._map[o(3399)].globe.depthTestAgainstTerrain=!1:!this._map.scene.globe[o(x._0xaab34a)]&&(this._map.scene.globe[o(x._0xaab34a)]=!0,this._depthTestAgainstTerrain_reset=!0),this.showVolume(e,s))}))}showVolume(e,t){const x={_0x326b33:3892,_0x16de6e:476,_0x29874d:476,_0x9c507c:3872,_0x1fe880:3020,_0x2097aa:809,_0x133a78:1568,_0x43eb10:3863},i=_0x2397ca;var s;this._jzmHeight=this.options.height??t.minHeight,this._jzmHeight<t[i(x._0x326b33)]&&(t.minHeight=this._jzmHeight),this.interPolygonObj=updateVolumeByMinHeight(t),this[i(x._0x16de6e)]=this.options[i(3892)]??this.interPolygonObj[i(x._0x326b33)],this._maxHeight=this.options[i(1295)]??this.interPolygonObj[i(1295)];const o=Math[i(3927)](.3*Cesium__namespace.Math.chordLength(t.granularity,this._map[i(3399)].globe.ellipsoid.maximumRadius));this._maxHeight-this[i(x._0x29874d)]<o&&(this._maxHeight=this[i(476)]+o);const r=updateVolume(this.interPolygonObj,this[i(x._0x9c507c)]);for(const l in r)this._measured[l]=r[l];this.updateText(),this[i(x._0x1fe880)].position=centerOfMass(e,this.interPolygonObj.maxHeight),this.heightLabel&&this.showPointHeightLabel(e,this.interPolygonObj.minHeight),this._entity[i(1897)]=!0,this.entityGraphic.perPositionHeight=!1,this.entityGraphic.hierarchy=new Cesium__namespace[i(2164)](e),this.entityGraphic.height=new Cesium__namespace.CallbackProperty(l=>this.height,!1);const c=PolygonStyleConver.toCesiumVal(this.polygonWallStyle,{},!0);c.hierarchy=new Cesium__namespace.PolygonHierarchy(e),Cesium__namespace.defined(this._wallEntity)&&this.dataSource.entities[i(2689)](this._wallEntity),this._wallEntity=this[i(x._0x2097aa)].entities.add({polygon:c,show:this.show}),this[i(844)]._noMousePick=!0,this.bindPickId(this._wallEntity);const _={...r,sourceTarget:this,mtype:this[i(968)],graphic:this};this.fire(EventType[i(3796)],_,!0),this.fire(EventType[i(x._0x133a78)],_,!0),(s=this._promise)!==null&&s!==void 0&&s.resolve&&this[i(1259)][i(x._0x43eb10)](this)}showPointHeightLabel(e,t){const x={_0x1c6949:2846,_0x1129a3:2027,_0x565eb7:558},i={_0x55ce1c:1337,_0x45ca2:1337,_0xa44c4f:558,_0x2990d1:1337},s=_0x2397ca,o=this;if(Cesium__namespace.defined(this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const c=this[s(x._0x1c6949)];if(c&&c[s(x._0x1129a3)]>0)for(let _=0,l=c[s(2027)];_<l;_++)this._removeLabel(c[_]);delete this._arrPartMeasureLable}const r=[];for(let c=0;c<e.length;c++){const _=Math.max(getHeight(this[s(x._0x565eb7)].scene,e[c]),t),l=Cesium__namespace[s(1899)].fromCartesian(e[c]),h=Cesium__namespace.Cartesian3.fromRadians(l.longitude,l.latitude,_),d=this._createLabel(this.labelHeightStyle,h);d.attr={value:_},r.push(d),d.showText=function(){const u=s,m=this.attr.value;let f=o._map[u(i._0x55ce1c)]("_海拔")+"："+m.toFixed(2)+o._map[u(i._0x45ca2)]("_米");if(o.offsetLabel){const g=m-o[u(3872)];g>0?f+=`
`+o[u(558)][u(i._0x45ca2)]("_高度")+"："+g.toFixed(2)+o._map.getLangText("_米")+"("+o[u(i._0xa44c4f)][u(1337)]("_面上")+")":f+=`
`+o._map[u(1337)]("_高度")+"："+Math.abs(g)[u(3529)](2)+o[u(558)].getLangText("_米")+"("+o._map[u(i._0x2990d1)]("_面下")+")"}return this[u(484)]=f,f},d.showText()}this._arrPartMeasureLable=r}}register$4(_0x2397ca(3493),VolumeMeasure);class VolumeDepthMeasure extends AreaMeasure{constructor(e={}){const t={_0x380959:1162,_0x2beadd:1311,_0x335bce:1293,_0x50ff02:396,_0x3c6ea7:4028,_0x1e3b6a:428,_0xd80c1f:428,_0x3ddc47:3461},x=_0x2397ca;super(e),e._promise&&(this[x(1259)]=e[x(1259)],delete e[x(1259)]),this[x(t._0x380959)]={...this.options.label,font_size:15,background:!1},Cesium__namespace.defined(e.labelHeight)&&(this.labelHeightStyle={...this.labelHeightStyle,...e.labelHeight}),this[x(t._0x2beadd)]=Cesium__namespace[x(t._0x335bce)].fromColor(getCesiumColor(e.cutColor,Cesium__namespace.Color.RED[x(t._0x50ff02)](.5))),this._fillColor=Cesium__namespace.ColorGeometryInstanceAttribute[x(t._0x3c6ea7)](getCesiumColor(e[x(1102)],Cesium__namespace[x(2134)].YELLOW.withAlpha(.5))),this[x(3044)].offsetHeight=this.options.offsetHeight??0,this.polygonWallStyle={color:"#00ff00",opacity:.3,closeTop:!1,closeBottom:!0,perPositionHeight:!1,height:new Cesium__namespace[x(t._0x1e3b6a)](i=>this[x(3892)],!1),extrudedHeight:new Cesium__namespace[x(t._0xd80c1f)](i=>this.maxHeight,!1)},Cesium__namespace.defined(e.polygonWall)&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e.heightLabel??!0,this.offsetLabel=e.offsetLabel??!1,this.showArea=e[x(1963)]??!0,this.showFillVolume=e.showFillVolume??!0,this.showDigVolume=e[x(t._0x3ddc47)]??!0,this._showBox=e[x(1161)]??!0,this._showPoly=e.showPoly??!0,this._showWall=e.showWall??!1,this._hasFX=!1}get[_0x2397ca(1e3)](){return!1}get[_0x2397ca(1318)](){const e={_0x1cdb7d:253},t=_0x2397ca;return this._measured?this[t(e._0x1cdb7d)].maxHeight:this.maxHeight}get height(){return this._jzmHeight}set[_0x2397ca(3872)](e){const t={_0x5d8f18:3892,_0x5d215a:728,_0x1286c9:2846,_0x203c6f:2027,_0x8461ff:1788},x=_0x2397ca;if(this._jzmHeight=e,e>this.maxHeight&&(this.maxHeight=e),e<this.minHeight&&(this[x(t._0x5d8f18)]=e),!this._hasFX)return;if(this[x(4004)](),this[x(t._0x5d215a)](),this._arrPartMeasureLable)for(let s=0;s<this[x(t._0x1286c9)][x(t._0x203c6f)];s++)this._arrPartMeasureLable[s].showText();const i={...this._measured,sourceTarget:this,mtype:this.type,graphic:this};this[x(t._0x8461ff)](EventType.change,i,!0)}get[_0x2397ca(3892)](){return this._minHeight||0}set minHeight(e){const t={_0x59e86e:1788,_0x226c56:3796},x=_0x2397ca;if(this._minHeight=e,!this._hasFX)return;this[x(253)]&&(this._measured.minHeight=e,this.updateVolume()),this.updateText();const i={...this._measured,sourceTarget:this,mtype:this.type,graphic:this};this[x(t._0x59e86e)](EventType[x(t._0x226c56)],i,!0)}get[_0x2397ca(1295)](){return this._maxHeight||0}set[_0x2397ca(1295)](e){const t=_0x2397ca;this[t(2632)]=e}get showBox(){return this._showBox}set[_0x2397ca(1161)](e){const t=_0x2397ca;this[t(3328)]=e,this.updateVolume()}[_0x2397ca(1467)](){const e={_0x50650c:2027,_0xa43e82:2846,_0x5e4844:3998},t=_0x2397ca;if(super._removeMeasureLabelAndEx(),Cesium__namespace[t(639)](this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const x=this._arrPartMeasureLable;if(x&&x[t(e._0x50650c)]>0)for(let i=0,s=x.length;i<s;i++)this._removeLabel(x[i]);delete this[t(e._0xa43e82)]}Cesium__namespace.defined(this._wallEntity)&&(this.dataSource[t(e._0x5e4844)].remove(this._wallEntity),delete this._wallEntity)}_drawCreatedHandler(e){const t={_0x38255d:2027},x=_0x2397ca;this._measureLable.text=this._map.getLangText("_正在计算体积")+"…";const i=this.positionsShow;(i==null?void 0:i[x(t._0x38255d)])>3&&setTimeout(()=>{this.calcVolume(i)},100)}_editPointHandler(e){this[_0x2397ca({_0x4b4876:1256}._0x4b4876)](e)}updateText(e){const t={_0x4a5cf4:1649,_0x5d68c2:558,_0x5802fd:3478,_0xa3d565:1963,_0x5bb31e:3044,_0x4653f8:484},x=_0x2397ca;e&&(this[x(3044)].unit=e);const i={unit:this[x(3044)].unit,lang:this._map.lang,decimal:this.options.decimal};let s="";this[x(t._0x4a5cf4)]&&this._measured[x(3076)]>0&&(this._measured.fillVolumeStr=formatVolume(this._measured.fillVolume,i),s+=(this.options.fillVolumeName||this[x(t._0x5d68c2)].getLangText(x(t._0x5802fd)))+"："+this._measured.fillVolumeStr+`
`),this.showDigVolume&&this._measured[x(2059)]>0&&(this._measured.digVolumeStr=formatVolume(this._measured.digVolume,i),s+=(this.options[x(687)]||this._map[x(1337)]("_挖方体积"))+"："+this[x(253)].digVolumeStr+`
`),this[x(t._0xa3d565)]&&this._measured.totalArea>0&&(this._measured[x(1224)]=formatArea(this._measured.totalArea,i),s+=(this[x(t._0x5bb31e)].areaName||this[x(t._0x5d68c2)].getLangText("_横切面积"))+"："+this._measured.totalAreaStr),this._measureLable[x(t._0x4653f8)]=s}calcVolume(e){const t={_0x40818c:1788,_0x19aecd:773,_0x27c71c:3274,_0x451d41:3399},x={_0x4763c6:3962,_0x4bd72b:3892,_0x5239bc:476,_0x535c24:3044,_0x1d87bf:253,_0x33be06:2027,_0x37f477:3274,_0x45bfe0:392,_0x4b300f:1679,_0x5e39f6:2812,_0x417e65:844,_0x111647:1425,_0x5446e7:1259},i=_0x2397ca;if(this._map){if(this[i(t._0x40818c)](EventType.start,{mtype:this.type,sourceTarget:this,positions:e},!0),this[i(455)]=!0,this._measureLable.show=!1,this[i(t._0x19aecd)].show=!1,this[i(t._0x27c71c)])for(let s=0,o=this._entity_outlines.length;s<o;s++){const r=this[i(3274)][s].polyline;r.show=!1}interPolygonByDepth({scene:this._map[i(t._0x451d41)],positions:e,splitNum:this[i(3044)].splitNum,cameraHeight:this.options.cameraHeight}).then(s=>{const o=i;var r;if(this.isDestroy)return;if(this._measured=s,this._jzmHeight=this[o(3044)].height??s.minHeight,this[o(x._0x4763c6)]<s[o(x._0x4bd72b)]&&(s.minHeight=this[o(x._0x4763c6)]),this._measured=this[o(4004)](s),this[o(x._0x5239bc)]=this.options.minHeight??this[o(253)].minHeight,this._maxHeight=this[o(x._0x535c24)].maxHeight??this[o(x._0x1d87bf)].maxHeight,this.updateText(),this[o(3020)][o(760)]=centerOfMass(e,this._maxHeight),this._measureLable.show=!0,this.heightLabel&&this.showPointHeightLabel(e,this[o(x._0x5239bc)]),this._showPoly){if(this._entity.show=!0,this[o(3274)])for(let _=0,l=this._entity_outlines[o(x._0x33be06)];_<l;_++){const h=this[o(x._0x37f477)][_][o(x._0x45bfe0)];h.show=!0}this._entity._noMousePick=!0,this.entityGraphic.perPositionHeight=!1,this[o(2812)][o(x._0x4b300f)]=new Cesium__namespace.PolygonHierarchy(e),this[o(x._0x5e39f6)].height=new Cesium__namespace.CallbackProperty(_=>this.height,!1)}if(this[o(2113)]){const _=PolygonStyleConver.toCesiumVal(this[o(3431)],{},!0);_.hierarchy=new Cesium__namespace.PolygonHierarchy(e),this[o(x._0x417e65)]=this.dataSource[o(3998)].add({polygon:_}),this._wallEntity._noMousePick=!0,this[o(x._0x111647)](this._wallEntity)}const c={...this._measured,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,c,!0),this.fire(EventType.end,c,!0),(r=this._promise)!==null&&r!==void 0&&r.resolve&&this[o(x._0x5446e7)][o(3863)](this)})}}updateVolume(e){const t={_0x40bfb7:2434,_0x3b7046:3953,_0x35c3e9:1161,_0x2226ed:3953,_0x4eacb5:3002,_0x210347:3831,_0x1b2e20:333,_0x3ecfbc:2027,_0x14799a:3595},x=_0x2397ca;!e&&(e=this._measured);const i=e.minHeight,s=this.height,o=e.box.area,r=[],c=this.options.offsetHeight;let _=0,l=0;for(let h=0,d=e.count;h<d;h++){const u=e.positions[h];let m=u.height;if(m<i&&(m=i),m>s){if(_+=o*(m-s),this.showBox){const f=u.getOutline();r[x(t._0x40bfb7)](new Cesium__namespace[x(t._0x3b7046)]({geometry:new Cesium__namespace.PolygonOutlineGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(f),extrudedHeight:m+c,height:s+c}),attributes:{color:this._cutColor}}))}}else if(m<s&&(l+=o*(s-m),this[x(t._0x35c3e9)])){const f=u.getOutline();r[x(2434)](new Cesium__namespace[x(t._0x2226ed)]({geometry:new Cesium__namespace[x(t._0x4eacb5)]({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(f),extrudedHeight:s+c,height:m+c}),attributes:{color:this[x(3640)]}}))}}return e[x(2059)]=_,e[x(3076)]=l,this._primitive_boxs&&(this[x(t._0x210347)].primitiveCollection.remove(this[x(333)]),delete this[x(t._0x1b2e20)]),this.showBox&&r[x(t._0x3ecfbc)]>0&&(this._primitive_boxs=new Cesium__namespace.Primitive({geometryInstances:r,appearance:new Cesium__namespace.PerInstanceColorAppearance({flat:!0,renderState:{lineWidth:1}}),asynchronous:!0}),this._layer[x(t._0x14799a)].add(this[x(333)]),this._primitive_boxs._noMousePick=!0,this.bindPickId(this._primitive_boxs)),e}showPointHeightLabel(e,t){const x={_0x3af47f:2027,_0x1f1ca5:967},i={_0x4fb3fe:558,_0x455cad:3529,_0xa8987e:2125},s=_0x2397ca,o=this,r=[];for(let c=0;c<e[s(x._0x3af47f)];c++){const _=Math.max(getHeight(this[s(558)].scene,e[c]),t),l=Cesium__namespace[s(1899)].fromCartesian(e[c]),h=Cesium__namespace.Cartesian3.fromRadians(l.longitude,l.latitude,_),d=this[s(x._0x1f1ca5)](this.labelHeightStyle,h);d.attr={value:_},r.push(d),d.showText=function(){const u=s,m=this.attr.value;let f=o._map.getLangText("_海拔")+"："+m[u(3529)](2)+o._map.getLangText("_米");if(o.offsetLabel){const g=m-o[u(3872)];g>0?f+=`
`+o[u(i._0x4fb3fe)].getLangText("_高度")+"："+g.toFixed(2)+o[u(558)].getLangText("_米")+"("+o._map.getLangText("_面上")+")":f+=`
`+o._map.getLangText("_高度")+"："+Math.abs(g)[u(i._0x455cad)](2)+o._map[u(1337)]("_米")+"("+o._map.getLangText(u(i._0xa8987e))+")"}return this.text=f,f},d.showText()}this[s(2846)]=r}}register$4(_0x2397ca(3446),VolumeDepthMeasure);class BillboardPrimitive extends BasePointPrimitive{get primitiveCollection(){const e={_0x3633d0:3153},t=_0x2397ca;var x;return(x=this._layer)===null||x===void 0?void 0:x[t(e._0x3633d0)]}get image(){return this.style.image}set image(e){this.style.image=e,this._primitive&&(this._primitive.image=e)}[_0x2397ca(446)](e){this._primitive?this._primitive.show=e:e&&super._showHook(e)}[_0x2397ca(2670)](e){const t={_0x1c6a22:2868,_0x57c67e:3482,_0x2f3a98:2417,_0x3b8076:3595,_0x3b5f4b:743,_0x3354d4:856},x=_0x2397ca;if(!this[x(3482)])return;this[x(232)](this.options.position);const i=BillboardStyleConver[x(t._0x1c6a22)](e,{show:this[x(t._0x57c67e)],position:this.position});this[x(t._0x2f3a98)]=this[x(t._0x3b8076)].add(i),this[x(357)][x(t._0x3b5f4b)]&&this[x(t._0x3354d4)]()}_updateStyleHook(e,t){BillboardStyleConver[_0x2397ca(2868)](e,this.primitive)}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t)}[_0x2397ca(325)](){const e={_0x5bdfda:2417},t=_0x2397ca;this._primitive[t(549)]&&(this._primitive[t(760)]=this[t(760)],Cesium__namespace[t(639)](this[t(357)].alignedAxis)&&(this[t(e._0x5bdfda)].alignedAxis=getCesiumValue(this.style.alignedAxis,Cesium__namespace.Cartesian3)))}[_0x2397ca(2732)](e){const t={_0x4e1561:3970,_0x4dc30c:396},x=_0x2397ca;this.style[x(2182)]=e,this._primitive&&(this[x(2417)][x(1089)]=Cesium__namespace.Color[x(t._0x4e1561)][x(t._0x4dc30c)](e)),this._updateLabelOpacity(e)}_getDrawEntityClass(e,t){return create$4(_0x2397ca(824),e)}}register$4("billboardP",BillboardPrimitive,!0);class CloudPrimitive extends BasePointPrimitive{get primitiveCollection(){var e;return(e=this._layer)===null||e===void 0?void 0:e.cloudCollection}get maximumSize(){return this.style.maximumSize}set maximumSize(e){const t={_0xfd44a2:2417},x=_0x2397ca;this.style.maximumSize=e,this._primitive&&(this[x(t._0xfd44a2)].maximumSize=e)}get scale(){return this.style.scale}set[_0x2397ca(1760)](e){this.style.scale=e,this._primitive&&(this._primitive.scale=e)}get slice(){return this[_0x2397ca({_0x151f4f:357}._0x151f4f)].slice}set[_0x2397ca(2242)](e){const t=_0x2397ca;this.style.slice=e,this[t(2417)]&&(this._primitive.slice=e)}get brightness(){return this.style.brightness}set[_0x2397ca(928)](e){this.style.brightness=e,this._primitive&&(this._primitive.brightness=e)}get hasOpacity(){return!1}_addedHook(e){const t={_0x284c01:2868},x=_0x2397ca;if(!this.show)return;this._forPositionProperty(this.options.position);const i=CloudStyleConver[x(t._0x284c01)](e,{show:this.show,position:this.position});this._primitive=this.primitiveCollection.add(i),this.style.label&&this._addLabel()}_showHook(e){const t={_0x49a85e:3482},x=_0x2397ca;this._primitive?this._primitive[x(t._0x49a85e)]=e:super._showHook(e)}_updateStyleHook(e,t){const x=_0x2397ca;CloudStyleConver.toCesiumVal(e,this[x(957)])}_style2Json(e,t){return CloudStyleConver.toJSON(e,t)}_updatePositionsHook(){const e={_0x334482:760},t=_0x2397ca;this._primitive.position=this[t(e._0x334482)]}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("cloud",CloudPrimitive,!0);class LabelPrimitive extends BasePointPrimitive{get primitiveCollection(){const e={_0x5170c3:613},t=_0x2397ca;var x;return(x=this._layer)===null||x===void 0?void 0:x[t(e._0x5170c3)]}get text(){return this.style.text}set text(e){this.style.text=e,this._primitive&&(this._primitive.text=e)}_showHook(e){const t={_0x23e00d:3482,_0x4a886d:446},x=_0x2397ca;this._primitive?this._primitive[x(t._0x23e00d)]=e:e&&super[x(t._0x4a886d)](e)}[_0x2397ca(2670)](e){const t=_0x2397ca;if(!this.show)return;const x=LabelStyleConver.toCesiumVal(this.style,{show:this[t(3482)],position:this.position},{},this.attr);this._primitive=this.primitiveCollection.add(x),this._bindMorphComplete()}[_0x2397ca(380)](){super._removedHook(),this._unbindMorphComplete()}_bindMorphComplete(){const e={_0x1dc20e:1420},t=_0x2397ca;this._unbindMorphComplete(),this.style.clampToGround&&this._map.on(EventType[t(e._0x1dc20e)],this._map_morphCompleteHandler,this)}_unbindMorphComplete(){const e={_0x42faad:3573},t=_0x2397ca;this[t(558)][t(e._0x42faad)](EventType.morphComplete,this[t(3238)],this)}_map_morphCompleteHandler(e){const t={_0x2c261a:2033,_0x56fbd4:3114,_0xaafa75:2417,_0x1c3621:357,_0x5ac615:2913},x=_0x2397ca;this._map.scene[x(t._0x2c261a)]===Cesium__namespace.SceneMode[x(t._0x56fbd4)]?this[x(2417)].heightReference=Cesium__namespace.HeightReference.NONE:this[x(t._0xaafa75)][x(3102)]=this[x(t._0x1c3621)].clampToGround?Cesium__namespace.HeightReference[x(t._0x5ac615)]:Cesium__namespace.HeightReference.NONE}[_0x2397ca(353)](e,t){const x={_0x1a39e1:1034,_0x31dd3c:3238},i=_0x2397ca;LabelStyleConver.toCesiumVal(e,this.primitive,this.attr),Cesium__namespace[i(639)](t[i(x._0x1a39e1)])&&(this._bindMorphComplete(),this[i(x._0x31dd3c)]())}[_0x2397ca(198)](e,t){return LabelStyleConver[_0x2397ca({_0x4cc28b:1180}._0x4cc28b)](e,t)}_updatePositionsHook(){this._primitive.position=this.position}[_0x2397ca(1120)](e,t){return create$4(_0x2397ca(743),e)}[_0x2397ca(2732)](e){const t=_0x2397ca;this.style[t(2182)]=e,this._primitive&&this.show&&LabelStyleConver.setOpacity(this._primitive,e)}}register$4(_0x2397ca(3581),LabelPrimitive,!0);class ModelPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this._readyPromise=Cesium__namespace.defer()}get czmObjectEx(){const e={_0x3000e0:2737},t=_0x2397ca,x=[];return this[t(e._0x3000e0)]&&x[t(2434)](this[t(e._0x3000e0)]),this._primitive_point&&x.push(this._primitive_point),this._primitive_billboard&&x[t(2434)](this._primitive_billboard),x}get scale(){const e=_0x2397ca;return this.style[e(1760)]??1}set scale(e){this.style.scale=e,this._updateStyleHook(this.style,{scale:e})}get[_0x2397ca(3748)](){return this.style.scaleX??1}set scaleX(e){const t={_0x6a9787:3009},x=_0x2397ca;this.style[x(3748)]=e,this[x(t._0x6a9787)]()}get scaleY(){return this[_0x2397ca({_0x3db692:357}._0x3db692)].scaleY??1}set scaleY(e){const t={_0x1056e1:3009},x=_0x2397ca;this.style[x(301)]=e,this[x(t._0x1056e1)]()}get scaleZ(){const e=_0x2397ca;return this[e(357)][e(2278)]??1}set scaleZ(e){const t=_0x2397ca;this.style.scaleZ=e,this[t(3009)]()}get[_0x2397ca(1171)](){return this._readyPromise.promise}[_0x2397ca(446)](e){this._primitive?this._primitive.show=e:e&&super._showHook(e)}_addedHook(e){const t={_0x4d80ad:3482,_0xd1f008:3455,_0x1f2455:558,_0x1ee467:357,_0x55726c:1101,_0x11d2b2:1286,_0x26f1d0:760,_0x285c17:565,_0x49bfb3:3831,_0xb0098a:565},x={_0x50a46a:357},i=_0x2397ca;if(!this[i(t._0x4d80ad)]||!this._map)return;this[i(232)](this.options.position);const s=ModelStyleConver.toCesiumVal(this.style);if(s.url&&(Cesium__namespace.Model[i(1622)]({modelMatrix:this[i(t._0xd1f008)],scene:this[i(t._0x1f2455)].scene,marsOptions:{occlusion:this[i(t._0x1ee467)][i(t._0x55726c)]},...s})[i(t._0x11d2b2)](c=>{this.bindPickId(c),this._primitive=this.primitiveCollection.add(c),this._primitive.readyEvent.addEventListener(()=>{const _=_0x3361;var l;(this[_(x._0x50a46a)].runAnimations??!0)&&(l=c.activeAnimations)!==null&&l!==void 0&&l[_(2418)]&&c.activeAnimations.addAll({loop:Cesium__namespace.ModelAnimationLoop.REPEAT,...this.style}),this.fire(EventType[_(759)],{drawtype:this.type,model:c,graphic:this},!0),this._readyPromise.resolve(this)})}),this.style.label&&this._addLabel(),this.style.distanceDisplayCondition)){if(this.style.distanceDisplayPoint){var o;const c=PointStyleConver.toCesiumVal(this.style[i(1564)],{show:this.show,position:this[i(t._0x26f1d0)]});c.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this[i(357)].distanceDisplayPoint),this._primitive_point=(o=this[i(3831)])===null||o===void 0?void 0:o.pointCollection[i(t._0x285c17)](c)}else if(this[i(357)].distanceDisplayBillboard){var r;const c=BillboardStyleConver.toCesiumVal(this[i(357)].distanceDisplayBillboard,{show:this.show,position:this.position});c.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this[i(t._0x1ee467)].distanceDisplayBillboard),this._primitive_billboard=(r=this[i(t._0x49bfb3)])===null||r===void 0?void 0:r.billboardCollection[i(t._0xb0098a)](c)}}}_removedHook(){const e={_0x59a8ce:3831},t=_0x2397ca;if(super._removedHook(),this._primitive_point){var x;(x=this._layer)===null||x===void 0||x.pointCollection.remove(this._primitive_point),delete this._primitive_point}if(this._primitive_billboard){var i;(i=this[t(e._0x59a8ce)])===null||i===void 0||i.billboardCollection.remove(this._primitive_billboard),delete this._primitive_billboard}}_updateStyleHook(e,t){const x={_0x2cc767:3748,_0x2d5481:639,_0x57d697:2278},i=_0x2397ca;if(t.url){this[i(2921)](e);return}ModelStyleConver[i(2868)](e,this.primitive),(Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t.pitch)||Cesium__namespace.defined(t.roll)||Cesium__namespace.defined(t.scale)||Cesium__namespace.defined(t[i(x._0x2cc767)])||Cesium__namespace[i(x._0x2d5481)](t.scaleY)||Cesium__namespace[i(639)](t[i(x._0x57d697)]))&&(this[i(2417)].modelMatrix=this.modelMatrix)}[_0x2397ca(198)](e,t){return ModelStyleConver.toJSON(e,t)}_updatePositionsHook(){const e={_0x4e25fe:760},t=_0x2397ca;this._primitive.modelMatrix=this.modelMatrix,this._primitive_point&&(this._primitive_point[t(e._0x4e25fe)]=this.position),this._primitive_billboard&&(this._primitive_billboard.position=this.position)}_getTargetDistanceDisplayCondition(e){const t={_0x58fd6c:357,_0x5b8ce9:2388,_0x21dad5:1290},x=_0x2397ca;let i;return this[x(357)].distanceDisplayCondition instanceof Cesium__namespace.DistanceDisplayCondition?i=this.style.distanceDisplayCondition.far:this[x(t._0x58fd6c)].distanceDisplayCondition_far&&(i=this.style[x(t._0x5b8ce9)]),new Cesium__namespace.DistanceDisplayCondition(e[x(t._0x21dad5)]??i,e.distanceDisplayCondition_far??Number.MAX_VALUE)}setOpacity(e){const t={_0x47ac9d:2182},x=_0x2397ca;this.style[x(t._0x47ac9d)]=e,this._primitive&&ModelStyleConver.setOpacity(this._primitive,e),this[x(1426)](e)}_getDrawEntityClass(e,t){return create$4("model",e)}}register$4("modelP",ModelPrimitive,!0);class CirclePrimitive extends BasePointPrimitive{get distance(){return Math.PI*2*this.radius}get area(){const e=this.radius;return Math.PI*e*e}get radius(){return this.style.radius}set radius(e){const t={_0x426060:357},x=_0x2397ca;this[x(t._0x426060)].radius=e,this._updateStyleHook(this[x(357)],{radius:e})}get outlinePositions(){return this.getOutlinePositions()}[_0x2397ca(2064)](e){return CircleStyleConver.toCesiumVal(e)}[_0x2397ca(198)](e,t){return CircleStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const x={_0x240b38:2006,_0x33dca7:3791},i=_0x2397ca;var s;e[i(x._0x240b38)]=this.position,e.height=e.height??((s=this.point)===null||s===void 0?void 0:s.alt)??0,Cesium__namespace.defined(this.style.diffHeight)&&(e[i(x._0x33dca7)]=e.height+this.style.diffHeight);const o=t?Cesium__namespace.CircleOutlineGeometry:Cesium__namespace.CircleGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new o(e),attributes:this.options.attributes})}_getPolylineOutlinePositions(){return[this.getOutlinePositions(!1)]}getOutlineCoordinates(e,t,x){return cartesians2lonlats(this.getOutlinePositions(e,t),x)}getOutlinePositions(e=!0,t){const x={_0x32184d:357,_0x232b26:3930},i=_0x2397ca,s=getEllipseOuterPositions({position:this.position,radius:this[i(3189)],granularity:this[i(x._0x32184d)][i(1097)],count:t});if(e&&s){var o;s.push(s[0]),(this[i(357)].outlineWidth>4||((o=this[i(357)][i(x._0x232b26)])===null||o===void 0?void 0:o.width)>4)&&s.push(s[1])}return s}flyTo(e={}){const t={_0x4adfd7:558},x=_0x2397ca;return this._map?(e.radius=this.radius*(e[x(1760)]||1.8),this[x(t._0x4adfd7)][x(2703)](this[x(760)],e)):Promise.resolve(!1)}[_0x2397ca(1595)](e){const t=_0x2397ca,x=this[t(3304)](!1,1);return!x||x[t(2027)]===0?void 0:getRectangle(x,e==null?void 0:e.isFormat)}isInPoly(e){const t={_0x30b3bd:295},x=_0x2397ca;return e=LngLatPoint.parse(e).toCartesian(),e=setPositionsHeight(e,this.height),Cesium__namespace[x(t._0x30b3bd)].distance(this.position,e)<=this.radius}_getDrawEntityClass(e,t){return create$4("circle",e)}}register$4("circleP",CirclePrimitive,!0);class PlanePrimitive extends BasePointPrimitive{get modelMatrix(){const e={_0x4d1ef3:2489,_0x165c37:851,_0xb531ad:3566,_0x1658c4:1046},t=_0x2397ca;var x,i,s;if(this.options.modelMatrix)return this.options.modelMatrix;const o=super[t(3455)];if(!this.position)return Cesium__namespace[t(1046)][t(e._0x4d1ef3)];const r=PlaneStyleConver.toCesiumVal(this.style),c=this.style.plane_normal||((x=r.plane)===null||x===void 0?void 0:x.normal),_=new Cesium__namespace[t(295)](((i=r[t(3568)])===null||i===void 0?void 0:i.x)??1,((s=r.dimensions)===null||s===void 0?void 0:s.y)??1,1);if(c===Cesium__namespace.Cartesian3.UNIT_X||c==="x"){var l,h;const u=Cesium__namespace.Matrix4[t(e._0x165c37)](Cesium__namespace.Matrix3.fromRotationY(Cesium__namespace.Math.toRadians(90)));Cesium__namespace.Matrix4[t(e._0xb531ad)](o,u,o),_.x=((l=r.dimensions)===null||l===void 0?void 0:l.y)??1,_.y=((h=r.dimensions)===null||h===void 0?void 0:h.x)??1,_.z=1}else if(c===Cesium__namespace.Cartesian3.UNIT_Y||c==="y"){const u=Cesium__namespace[t(e._0x1658c4)][t(851)](Cesium__namespace.Matrix3[t(228)](Cesium__namespace[t(3876)].toRadians(90)));Cesium__namespace.Matrix4.multiply(o,u,o)}const d=Cesium__namespace[t(1046)].fromScale(_);return Cesium__namespace.Matrix4[t(3566)](o,d,o),o}[_0x2397ca(2064)](e){return PlaneStyleConver.toCesiumVal(e)}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const x=_0x2397ca,i=t?Cesium__namespace[x(3242)]:Cesium__namespace.PlaneGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new i(e),modelMatrix:this.modelMatrix,attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4("plane",e)}}register$4(_0x2397ca(3589),PlanePrimitive,!0);class BoxPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this.style.closed=this.style.closed??!0}_conversionStyle(e){return BoxStyleConver.toCesiumVal(e)}_style2Json(e,t){return BoxStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const x=t?Cesium__namespace.BoxOutlineGeometry:Cesium__namespace.BoxGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:x.fromDimensions(e),modelMatrix:this.modelMatrix,attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4("box",e)}}register$4("boxP",BoxPrimitive,!0);class CylinderPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this.style.closed=this.style.closed??!0}_conversionStyle(e){return CylinderStyleConver[_0x2397ca({_0x25d7bc:2868}._0x25d7bc)](e)}_style2Json(e,t){return CylinderStyleConver[_0x2397ca(1180)](e,t)}_createGeometryInstance(e,t){const x={_0x552579:3455},i=_0x2397ca,s=t?Cesium__namespace.CylinderOutlineGeometry:Cesium__namespace[i(1585)];return new Cesium__namespace[i(3953)]({id:this.id,geometry:new s(e),modelMatrix:e.modelMatrix||this[i(x._0x552579)],attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4(_0x2397ca(704),e)}}register$4("cylinderP",CylinderPrimitive,!0);class ConeTrackPrimitive extends CylinderPrimitive{constructor(e={}){super(e),e.targetPosition&&(this.targetPosition=e.targetPosition)}get[_0x2397ca(1e3)](){return!1}get targetPosition(){return this[_0x2397ca({_0x5ed393:2117}._0x5ed393)]}set[_0x2397ca(2683)](e){const t={_0xe1ac5a:1086,_0x488c3b:2117},x=_0x2397ca;this[x(t._0xe1ac5a)]=LngLatPoint.parse(e),this[x(t._0x488c3b)]=this._targetPoint.toCartesian(),this[x(3735)]&&this._updatePositionsHook()}get targetPoint(){return this[_0x2397ca(1086)]}get angle(){return this[_0x2397ca({_0x49725b:357}._0x49725b)].angle}set angle(e){const t=_0x2397ca;this[t(357)].angle=e}_createGeometryInstance(e,t){const x={_0x1beec8:3703,_0x5d6071:230,_0x26a1ec:3455,_0x472254:357,_0x4d10d7:2027},i=_0x2397ca,s=this.position,o=getPositionValue(this.targetPosition,this._map[i(x._0x1beec8)].currentTime);let r,c;return o?(e.length=Cesium__namespace.Cartesian3[i(x._0x5d6071)](s,o),c=Cesium__namespace.Cartesian3.midpoint(s,o,new Cesium__namespace[i(295)]),r=getHeadingPitchRollForLine(o,s)):(e[i(2027)]=this.style[i(2027)],r=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace[i(3876)].toRadians(this.pitch),Cesium__namespace[i(3876)].toRadians(this.roll)),c=getPositionByHprAndLen(s,r,e[i(2027)]/2)),e[i(x._0x26a1ec)]=Cesium__namespace.Transforms.headingPitchRollToFixedFrame(c,r),Cesium__namespace.defined(this[i(x._0x472254)].angle)&&(e.bottomRadius=e[i(x._0x4d10d7)]*Math.cos(Cesium__namespace.Math.toRadians(90-this[i(3143)]))),super._createGeometryInstance(e,t)}}register$4("coneTrackP",ConeTrackPrimitive,!0);class EllipsoidPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this.style.closed=this.style.closed??!0}_conversionStyle(e){return EllipsoidStyleConver.toCesiumVal(e)}_style2Json(e,t){return EllipsoidStyleConver[_0x2397ca(1180)](e,t)}_createGeometryInstance(e,t){const x={_0x247738:3044},i=_0x2397ca,s=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new s(e),modelMatrix:this[i(3455)],attributes:this[i(x._0x247738)].attributes})}_getDrawEntityClass(e,t){return create$4("ellipsoid",e)}}register$4("ellipsoidP",EllipsoidPrimitive,!0);class WallPrimitive extends BasePolyPrimitive{_createGeometryInstance(e,t){const x={_0x428125:2027,_0x9d56ec:357,_0x100c90:3210,_0x4b4312:2101},i=_0x2397ca;var s;let o=this[i(1091)];const r=this.points,c=r[i(x._0x428125)];let _=new Array(c),l=new Array(c);for(let d=0;d<c;d++){const u=r[d].alt;_[d]=u,l[d]=u+Number(this.style.diffHeight||100)}this[i(x._0x9d56ec)].closure&&((s=o)===null||s===void 0?void 0:s.length)>0&&(o=o.concat(o[0]),_=_.concat(_[0]),l=l[i(x._0x100c90)](l[0]));const h=t?Cesium__namespace[i(x._0x4b4312)]:Cesium__namespace.WallGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new h({...e,positions:o,maximumHeights:l,minimumHeights:_}),attributes:this.options.attributes})}_conversionStyle(e){return WallStyleConver.toCesiumVal(e)}_style2Json(e,t){return WallStyleConver[_0x2397ca({_0x3ecf76:1180}._0x3ecf76)](e,t)}[_0x2397ca(1120)](e,t){return create$4("wall",e)}}register$4("wallP",WallPrimitive);class CorridorPrimitive extends BasePolyPrimitive{_createGeometryInstance(e,t){const x={_0x188685:3162},i=_0x2397ca;this[i(x._0x188685)](e),e[i(1091)]=this[i(1091)];const s=t?Cesium__namespace.CorridorOutlineGeometry:Cesium__namespace.CorridorGeometry;return new Cesium__namespace[i(3953)]({id:this.id,geometry:new s(e),attributes:this.options[i(2870)]})}_conversionStyle(e){return CorridorStyleConver.toCesiumVal(e)}_style2Json(e,t){return CorridorStyleConver[_0x2397ca(1180)](e,t)}[_0x2397ca(1120)](e,t){return create$4("corridor",e)}}register$4("corridorP",CorridorPrimitive);class PolylineVolumePrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x2fa68c:2460},x=_0x2397ca;super(e),this.style[x(t._0x2fa68c)]=this.style.closed??!0}_createGeometryInstance(e,t){const x={_0x755115:612,_0x5dcee6:2870},i=_0x2397ca,s=t?Cesium__namespace[i(x._0x755115)]:Cesium__namespace.PolylineVolumeGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new s({...e,polylinePositions:this.positions,shapePositions:e.shape}),attributes:this.options[i(x._0x5dcee6)]})}_conversionStyle(e){return PolylineVolumeStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineVolumeStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4("polylineVolume",e)}}register$4("polylineVolumeP",PolylineVolumePrimitive);class RectanglePrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x10bdc7:1358,_0x28d85c:1358},x=_0x2397ca;super(e),e[x(t._0x10bdc7)]&&(this[x(t._0x28d85c)]=e.rectangle)}get[_0x2397ca(1358)](){const e=_0x2397ca;return!this._rectangle&&this.positions&&(this._rectangle=Cesium__namespace.Rectangle[e(1924)](this.positions)),this._rectangle}set rectangle(e){this._rectangle=e}get[_0x2397ca(649)](){const e={_0x40b8e1:3876},t=_0x2397ca;let x;return Cesium__namespace.defined(this.style.rotationDegree)?x=Cesium__namespace[t(e._0x40b8e1)].toRadians(this.style[t(2167)]):Cesium__namespace.defined(this.style.rotation)&&(x=this.style.rotation),getRectangleOuterPositions({rectangle:this.rectangle,rotation:x,height:this.style.height})}get[_0x2397ca(230)](){return getDistance(this[_0x2397ca({_0x9b2f3f:649}._0x9b2f3f)],!0)}get area(){return getSurfaceArea(this.outlinePositions)}get center(){const e=_0x2397ca,t=this[e(1358)];return this.rectangle?Cesium__namespace.Cartographic.toCartesian(Cesium__namespace[e(3520)].center(t)):null}_updatePositionsHook(){const e=_0x2397ca;return this[e(1358)]=Cesium__namespace.Rectangle.fromCartesianArray(this.positions),super[e(325)]()}_createGeometryInstance(e,t){const x={_0x84c8ad:351},i=_0x2397ca;this._updateDiffHeight(e,!0),e[i(1358)]=this.rectangle;const s=t?Cesium__namespace[i(x._0x84c8ad)]:Cesium__namespace.RectangleGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new s(e),attributes:this.options.attributes})}[_0x2397ca(2064)](e){return RectangleStyleConver[_0x2397ca(2868)](e)}_style2Json(e,t){return RectangleStyleConver.toJSON(e,t)}[_0x2397ca(4036)](e){const t=_0x2397ca;return{type:"Polygon",coordinates:[this[t(3711)](e==null?void 0:e[t(2381)])]}}_getPolylineOutlinePositions(){return[this.outlinePositions]}getRectangle(e){const t=_0x2397ca,x=this.rectangle;return e!=null&&e[t(3768)]?formatRectangle(x):x}isInPoly(e){const t={_0x418183:3520,_0x253578:1358},x=_0x2397ca;return Cesium__namespace[x(t._0x418183)].contains(this[x(t._0x253578)],LngLatPoint.parse(e).toCartographic())}_getDrawEntityClass(e,t){return create$4(_0x2397ca(1358),e)}_updateDrawEntityToThis(){const e=_0x2397ca;super[e(2289)](),this._updatePositionsHook()}}register$4("rectangleP",RectanglePrimitive);const nullColor=new Cesium__namespace[_0x2397ca(2134)](0,0,0,.01);class PolygonPrimitive extends BasePolyPrimitive{get center(){return this.centerOfMass}get distance(){return getDistance(this._positions,!0)}get positions(){return this._positions}set positions(e){const t={_0x5a3faf:4056,_0x228fa6:2841,_0x584e8f:1019},x=_0x2397ca;if(e){if(e.length>0&&Array[x(t._0x5a3faf)](e[0])&&e[0].length>0){const i=e[0][0];Array[x(4056)](i)&&isNumber(i[0])?(this._hierarchy=getPolygonHierarchy(e,this.style.height||this.style.setHeight||this.style[x(t._0x228fa6)]),e=this._hierarchy.positions):i instanceof Cesium__namespace.Cartesian3&&(this[x(t._0x584e8f)]=getPolygonHierarchy2(e),e=this._hierarchy.positions)}super.positions=e,this._hierarchy&&this[x(2526)]&&(this._hierarchy.positions=this[x(2526)])}}_createGeometryInstance(e,t){const x={_0x897d57:1019,_0xdadef4:2164,_0x47a16e:3953},i=_0x2397ca;this._updateDiffHeight(e),this._hierarchy?e.polygonHierarchy=this[i(x._0x897d57)]:e.polygonHierarchy=new Cesium__namespace[i(x._0xdadef4)](this.positions);const s=t?Cesium__namespace.PolygonOutlineGeometry:Cesium__namespace.PolygonGeometry;return new Cesium__namespace[i(x._0x47a16e)]({id:this.id,geometry:new s(e),attributes:this.options.attributes})}_conversionStyle(e){let t=PolygonStyleConver.toCesiumVal(e);return t=this._bindExType(t),t}_bindExType(e){const t={_0x42b64f:1578,_0x4c2f91:2575,_0x1c91a5:357,_0x5c898c:503},x=_0x2397ca,i=this.options[x(1566)]||this._layer.options[x(1566)];if(i&&(i.enabled??!0)){if(i.bottomHeight){let _;isNumber(i.bottomHeight)?_=i[x(4060)]:isString(i.bottomHeight)&&(_=Number(this[x(1578)][i.bottomHeight]||0)),e[x(3872)]=_}const o=Number(this.attr[i.cloumn]||1);let r;isNumber(i.height)?r=i.height:isString(i[x(3872)])?r=this[x(t._0x42b64f)][i.height]||r:r=3.5;const c=e.height||0;e[x(3791)]=c+o*r}if(this.options[x(t._0x4c2f91)]||this._layer.options.dth){const o=this._getColorByColorMaterial(e,!1);!Cesium__namespace.defined(o)&&(e.color=nullColor),e.classification=!0,!Cesium__namespace.defined(this[x(t._0x1c91a5)].height)&&(e[x(t._0x5c898c)]=!1),e[x(952)]=99}return e}updateHeight(e){const t=_0x2397ca,x=6378137;for(let i=0,s=this.primitiveCollection.length;i<s;i++){const o=this.primitiveCollection[t(2001)](i),r=(x+e)/(x+this[t(357)].height),c=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(r,r,r));o.modelMatrix=c}}[_0x2397ca(198)](e,t){return PolygonStyleConver.toJSON(e,t)}[_0x2397ca(4036)](e){const t={_0x37d18e:3938,_0x20575c:2381},x=_0x2397ca;return{type:x(t._0x37d18e),coordinates:[this.getCoordinates(e==null?void 0:e[x(t._0x20575c)])]}}_getPolylineOutlinePositions(){return this._hierarchy?getHierarchyVal(this._hierarchy):[this.positions]}[_0x2397ca(1120)](e,t){return create$4(_0x2397ca({_0x55e480:3977}._0x55e480),e)}[_0x2397ca(1893)](e){const t={_0x2983e1:1019},x=_0x2397ca;this._hierarchy&&(e[x(t._0x2983e1)]=this[x(1019)])}}register$4("polygonP",PolygonPrimitive);class FrustumPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x54b02e:357,_0x170087:2460},x=_0x2397ca;super(e),this[x(t._0x54b02e)][x(t._0x170087)]=this.style.closed??!0,e.targetPosition&&(this.targetPosition=e.targetPosition)}get targetPosition(){return this._targetPosition}set targetPosition(e){const t={_0x5496d0:1364},x=_0x2397ca;this._targetPoint=LngLatPoint[x(t._0x5496d0)](e),this._targetPosition=this[x(1086)].toCartesian(),this.isAdded&&this.show&&(this[x(380)](),this._addedHook(this.style))}get[_0x2397ca(207)](){return this._targetPoint}get angle(){return this.style.angle}set[_0x2397ca(3143)](e){this.style.angle=e}get[_0x2397ca(2924)](){const e={_0x425190:2924},t=_0x2397ca;return this.style[t(e._0x425190)]??this.style.angle}set angle2(e){const t={_0x305a1b:357},x=_0x2397ca;this[x(t._0x305a1b)].angle2=e}get groundPosition(){return getRayEarthPosition(this.position,this._orientation)}get defaultVertexFormat(){const e={_0x1a3c53:1346},t=_0x2397ca;return Cesium__namespace[t(1565)][t(e._0x1a3c53)]}[_0x2397ca(3009)](){}_conversionStyle(e){return CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}[_0x2397ca(2195)](e,t){const x=_0x2397ca;this._update();const i=t?Cesium__namespace.FrustumOutlineGeometry:Cesium__namespace.FrustumGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new i({...e,origin:this[x(760)],orientation:this[x(885)],frustum:this[x(1659)]}),attributes:this.options.attributes})}_update(e){const t={_0x1cdcf1:3416,_0x467268:1722,_0x5ef0a:3876,_0x391837:778,_0x3ac506:3876,_0x5f2e4f:2969,_0x1233ab:3876,_0x39bcb6:2027,_0x52f284:227,_0x4e7224:1659,_0x5ad8b7:2500,_0x13c3e6:3143},x=_0x2397ca,i=getPositionValue(this.position,e);if(!i){this._cylinderPosition=void 0;return}if(this.options.camera){const o=this.options.camera,r=new Cesium__namespace.Cartesian3,c=new Cesium__namespace.Matrix3,_=new Cesium__namespace[x(1772)],l=o.directionWC,h=o.upWC,d=Cesium__namespace.Cartesian3[x(t._0x1cdcf1)](o.rightWC,r);Cesium__namespace.Matrix3.setColumn(c,0,d,c),Cesium__namespace.Matrix3.setColumn(c,1,h,c),Cesium__namespace.Matrix3.setColumn(c,2,l,c),this._orientation=Cesium__namespace.Quaternion[x(1614)](c,_),this._frustum=o.frustum,this[x(t._0x467268)]=Cesium__namespace[x(t._0x5ef0a)].toDegrees(o.heading),this.pitch=Cesium__namespace[x(3876)][x(t._0x391837)](o.pitch),this.roll=Cesium__namespace[x(t._0x3ac506)].toDegrees(o[x(t._0x5f2e4f)]);return}const s=getPositionValue(this.targetPosition,e);if(s){this._frustumFar=Cesium__namespace[x(295)].distance(i,s);const o=getHeadingPitchRollForLine(i,s);this.heading=Cesium__namespace.Math[x(778)](o.heading),this.pitch=Cesium__namespace[x(t._0x1233ab)].toDegrees(o[x(227)]),this.roll=Cesium__namespace.Math.toDegrees(o.roll),this[x(885)]=Cesium__namespace.Transforms.headingPitchRollQuaternion(i,o)}else{this[x(485)]=-this.style[x(t._0x39bcb6)];const o=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this[x(t._0x467268)]),Cesium__namespace[x(t._0x5ef0a)][x(2500)](this[x(t._0x52f284)]),Cesium__namespace.Math.toRadians(this.roll));this._orientation=Cesium__namespace.Transforms.headingPitchRollQuaternion(i,o)}this[x(t._0x4e7224)]=new Cesium__namespace.PerspectiveFrustum({fov:Cesium__namespace.Math[x(t._0x5ad8b7)](this[x(t._0x13c3e6)]*2||.01),aspectRatio:this.angle2/this.angle,near:.01,far:this._frustumFar})}[_0x2397ca(1284)](e){const t={_0x1ac3e7:760,_0x54c422:227,_0x5d4fad:845,_0x3c11d9:845},x=_0x2397ca,i=getPositionValue(this[x(t._0x1ac3e7)],e),s=Cesium__namespace.Math.toRadians(this.heading),o=Cesium__namespace.Math[x(2500)](this[x(t._0x54c422)]+this.angle2),r=Cesium__namespace[x(3876)].toRadians(this.pitch-this[x(2924)]),c=Cesium__namespace.Math.toRadians(this.roll+this.angle),_=Cesium__namespace.Math[x(2500)](this.roll-this.angle),l=getRayEarthPosition(i,new Cesium__namespace[x(t._0x5d4fad)](s,o,c),!0),h=getRayEarthPosition(i,new Cesium__namespace.HeadingPitchRoll(s,o,_),!0),d=getRayEarthPosition(i,new Cesium__namespace.HeadingPitchRoll(s,r,_),!0),u=getRayEarthPosition(i,new Cesium__namespace[x(t._0x3c11d9)](s,r,c),!0);return[l,h,d,u]}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4(_0x2397ca(1209),FrustumPrimitive,!0);var ConeGlowCircleOuterMaterial=`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber / 90.);
  vec2 new_st = fract(st - vec2(time, time));
  vec4 color = texture(image, new_st);

  vec3 diffuse = color.rgb;
  float alpha = color.a;
  diffuse *= u_color.rgb;
  alpha *= u_color.a;
  alpha *= u_color.a;
  material.diffuse = diffuse;
  material.alpha = alpha * pow(1. - st.t, u_color.a) * globalAlpha;
  return material;
}
`,ConeGlowCylinderGaussMaterial=_0x2397ca(2082),ConeGlowGradientMaterial=_0x2397ca(1479),ConeGlowRingScanMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float time = -czm_frameNumber * 3.1415926 / 180.;//扫描速度1度
  float sin_t = sin(time);
  float cos_t = cos(time);
  vec2 center_rotate = vec2(center.s * cos_t - center.t * sin_t + 0.5, center.s * sin_t + center.t * cos_t + 0.5);
  vec4 color = texture(image, center_rotate);
  vec3 tColor = color.rgb * u_color.rgb;
  tColor *= u_color.a;
  material.diffuse = tColor;
  float length = 2. - length(center) / 0.5;
  material.alpha = color.a * pow(length, 0.5) * globalAlpha;//color.r = 0 或1
  return material;
}
`;const DEF_STYLE$g={height:1e3,radius:100,color:"#00ffff"},particleImage=new Image;particleImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=",particleImage.onload=function(){};class LightCone extends BasePointPrimitive{constructor(e={}){const t={_0x5b116e:3454},x=_0x2397ca;e[x(357)]={...DEF_STYLE$g,...e.style},super(e),this._primitive1=null,this[x(t._0x5b116e)]=null,this._primitive3=null,this[x(3339)]=null}get czmObject(){return this._primitive1}get[_0x2397ca(3279)](){const e={_0x3ec749:2148},t=_0x2397ca;return this._primitive2?[this[t(3454)],this[t(e._0x3ec749)],this._primitive4]:[]}get color(){return this._color}set color(e){this.style.color=e}_addedHook(e){const t={_0x3f7dab:639,_0x5ee938:440,_0x269c34:357,_0x10c3b0:1142,_0x9b34d:2431},x=_0x2397ca;if(!this.show||!this[x(760)])return;let i=this.position;if(Cesium__namespace[x(t._0x3f7dab)](e[x(t._0x5ee938)])){let o=this[x(t._0x269c34)].setHeight;Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this.attr,!0)),isNaN(o)&&(o=0)),i=setPositionsHeight(i,o));const r=this.getAddHeight();r!==0&&(i=addPositionsHeight(i,r))}const s=e.radius;this[x(t._0x10c3b0)]=s/100,this.topRadius=this.topRadius>1?1:this.topRadius,this.inner_controlPoints=getCirclePosition(i,s*.7),this.outer_controlPoints=getCirclePosition(i,s),this.circular_clone_topPoints=getCirclePosition(i,this[x(1142)]),this.circlePoints_2=getCirclePosition(i,s*2),this.ringCanvas=this[x(t._0x9b34d)](),this.gradientCircleCanvas=this.cirdrawGradientCircleCanvas(),this.image=this[x(1518)](particleImage),this._color=getColorByStyle(e),this.addInner(e),this.addOuter(e),this.addCircle(e),this.addRing(e)}_removedHook(){const e={_0x69fd1:817,_0x32762a:817,_0x1e1dca:2689},t=_0x2397ca;this[t(e._0x69fd1)]&&(this.primitiveCollection[t(2689)](this[t(e._0x32762a)]),delete this._primitive1),this._primitive2&&(this.primitiveCollection[t(2689)](this._primitive2),delete this._primitive2),this._primitive3&&(this.primitiveCollection[t(e._0x1e1dca)](this._primitive3),delete this._primitive3),this._primitive4&&(this.primitiveCollection.remove(this[t(3339)]),delete this._primitive4)}addInner(e){const t=_0x2397ca,x=createCylinderInstance(this.inner_controlPoints,this.circular_clone_topPoints,{height:e.height,color:this.color,distanceDisplayCondition:e.distanceDisplayCondition}),i=new Cesium__namespace[t(2385)]({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this[t(3463)],globalAlpha:1},source:ConeGlowCylinderGaussMaterial},translucent:function(s){const o=t;return s.uniforms.u_color[o(2708)]<1}})});this._primitive1=new Cesium__namespace.Primitive({geometryInstances:x,appearance:i,asynchronous:!1,show:this.show}),this.primitiveCollection.add(this._primitive1)}[_0x2397ca(1431)](e){const t={_0x850abe:2134},x=_0x2397ca,i=createCylinderInstance(this.outer_controlPoints,this.circular_clone_topPoints,{height:e.height,distanceDisplayCondition:e.distanceDisplayCondition,color:new Cesium__namespace[x(t._0x850abe)](.5,.8,1,2)});this[x(3454)]=new Cesium__namespace[x(3629)]({geometryInstances:i,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this._color,image:this.image,globalAlpha:1},source:ConeGlowCircleOuterMaterial},translucent:!0})}),asynchronous:!1,show:this.show}),this.primitiveCollection.add(this._primitive2)}[_0x2397ca(443)](e){const t={_0x39a013:3595,_0x56d0ea:565},x=_0x2397ca,i=Cesium__namespace.Cartographic[x(2145)](this.position),s=createCircleInstance(this[x(2688)],{perPositionHeight:i.height>=1,distanceDisplayCondition:e.distanceDisplayCondition});this[x(2148)]=new Cesium__namespace.Primitive({geometryInstances:s,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace[x(2206)]({fabric:{uniforms:{u_color:this._color,image:this[x(592)],globalAlpha:1},source:ConeGlowGradientMaterial},translucent:!0})}),asynchronous:!1,show:this[x(3482)]}),this[x(t._0x39a013)][x(t._0x56d0ea)](this[x(2148)])}addRing(e){const t={_0xc96e78:2385,_0x5d38a7:3595,_0x2cb77e:3339},x=_0x2397ca,i=createCircleInstance(this.circlePoints_2,{perPositionHeight:this.point.alt>=1,distanceDisplayCondition:e.distanceDisplayCondition});this._primitive4=new Cesium__namespace.Primitive({geometryInstances:i,appearance:new Cesium__namespace[x(t._0xc96e78)]({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this[x(3463)],image:this.ringCanvas,globalAlpha:1},source:ConeGlowRingScanMaterial},translucent:!0})}),asynchronous:!1,show:this.show}),this[x(t._0x5d38a7)].add(this[x(t._0x2cb77e)])}[_0x2397ca(2483)](e){const t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=",t.onload=function(){e&&e()}}drawCanvas(e){const t={_0x3e3eec:2676,_0x116706:1733,_0x43f421:1526,_0x78f4f2:3841},x=_0x2397ca,i=document[x(t._0x3e3eec)](x(t._0x116706));i[x(t._0x43f421)]=64,i.height=256;const s=i.getContext("2d",{willReadFrequently:!0});return s[x(t._0x78f4f2)](0,0,64,256),s.drawImage(e,0,0),s.drawImage(e,33,0),i}drawRingCanvas(){const e={_0xff2dd:1526,_0x4ee36e:739,_0x10bd98:2094},t=_0x2397ca,x=document.createElement("canvas");x[t(e._0xff2dd)]=512,x.height=512;const i=x.getContext("2d",{willReadFrequently:!0});return i.fillStyle="rgba(255,255,255,0)",i[t(e._0x4ee36e)]="rgba(255, 255, 255,255)",i.setLineDash([50,50]),i.lineWidth=30,i.beginPath(),i[t(2474)](256,256,150,0,Math.PI*2,!0),i[t(e._0x10bd98)](),i.restore(),x}cirdrawGradientCircleCanvas(){const e={_0x25d579:3872,_0x41e3ce:3469,_0x2d22a9:2474,_0x526966:241},t=_0x2397ca,x=document.createElement("canvas");x.width=512,x[t(e._0x25d579)]=512;const i=x[t(e._0x41e3ce)]("2d",{willReadFrequently:!0}),s=i.createRadialGradient(256,256,0,256,256,256);return s.addColorStop(.1,t(189)),s.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),s.addColorStop(.3,"rgba(255, 255, 255, 0.9)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),s.addColorStop(.9,"rgba(255, 255, 255, 0.2)"),s.addColorStop(1,"rgba(255, 255, 255, 1.0)"),i.clearRect(0,0,512,512),i.beginPath(),i[t(e._0x2d22a9)](256,256,256,0,Math.PI*2,!0),i.fillStyle=s,i[t(e._0x526966)](),i.restore(),x}[_0x2397ca(2732)](e){const t={_0x152c70:2182,_0x2b77ad:3454,_0x2955c8:2182,_0x106879:945},x=_0x2397ca;this.style[x(t._0x152c70)]=e,this._primitive1&&(this._primitive1.appearance.material.uniforms.globalAlpha=e,this[x(t._0x2b77ad)].appearance.material.uniforms[x(t._0x2955c8)]=e,this._primitive3[x(t._0x106879)][x(3816)].uniforms.globalAlpha=e,this._primitive4.appearance[x(3816)].uniforms[x(t._0x2955c8)]=e)}_getDrawEntityClass(e,t){return this[_0x2397ca({_0x3f5565:3527}._0x3f5565)](e,t)}}register$4("lightCone",LightCone,!0);function createCircleInstance(n,e){const t=new Cesium__namespace.PolygonGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(n),perPositionHeight:e.perPositionHeight});return new Cesium__namespace.GeometryInstance({geometry:t,attributes:{distanceDisplayCondition:e.distanceDisplayCondition||new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute}})}function createCylinderInstance(n,e,t){const x={_0x58a09e:2434,_0x2779f3:1354},i=_0x2397ca,s=t.height,o=t.color,r=n[i(2242)](),c=n[i(2027)],_=2*c,l=[],h=1/(c-1),d=[],u=[];for(let f=0;f<c;f++){u.push(addPositionsHeight(e[f],s)),l.push(f*h),l.push(0);const g=f+1,b=(f+1)%c,y=_-g;d.push(y-1,y,f),d.push(f,b,y-1)}for(let f=0;f<u.length;f++)r.push(u[c-f-1]),l[i(x._0x58a09e)](1-f*h),l[i(2434)](1);let m=new Cesium__namespace.PolygonGeometry({polygonHierarchy:new Cesium__namespace[i(2164)](r),perPositionHeight:!0});return m=Cesium__namespace[i(185)].createGeometry(m),m.indices=d,m.attributes.st[i(x._0x2779f3)]=l,new Cesium__namespace.GeometryInstance({geometry:m,attributes:{color:Cesium__namespace[i(1293)].fromColor(o),distanceDisplayCondition:t.distanceDisplayCondition||new Cesium__namespace[i(2548)]}})}function getCirclePosition(n,e,t=120){const x={_0x284ae3:295,_0x2c530a:1314},i=_0x2397ca,s=[],o=Cesium__namespace[i(1620)].eastNorthUpToFixedFrame(n),r=2*Math.PI/t,c=2*Math.PI*270/360;for(let _=0;_<t;_++){const l=c-r*_,h=new Cesium__namespace[i(x._0x284ae3)](Math.sin(l)*e,Math[i(x._0x2c530a)](l)*e,0);s.push(Cesium__namespace.Matrix4.multiplyByPoint(o,h,new Cesium__namespace.Cartesian3))}return s.push(s[0]),s}var WaterFS=`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;
  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif
  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`;class Water extends PolygonPrimitive{[_0x2397ca(2670)](e){const t={_0x112f7f:2182,_0x2b2309:1029,_0x2c24a8:1494,_0x199caf:2206,_0x3668b6:1766,_0x6fc8a4:3853,_0x524556:940,_0x5f4a7b:1833},x=_0x2397ca;if(!this.show||!this.positions||this.positions.length===0)return;const i=this._conversionStyle(e);i.vertexFormat=Cesium__namespace.EllipsoidSurfaceAppearance.VERTEX_FORMAT,e.opacity=e.opacity??.8;const s=e[x(4010)]*(e[x(t._0x112f7f)]??1),o={geometryInstances:this._createGeometryInstance(i),appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({aboveGround:!1,material:new Cesium__namespace.Material({fabric:{type:"Water",uniforms:{specularMap:i.specularMap||Cesium__namespace.Material[x(t._0x2b2309)],normalMap:i[x(t._0x2c24a8)]||Cesium__namespace[x(t._0x199caf)].DefaultImageId,frequency:i.frequency||8e3,animationSpeed:i.animationSpeed||.03,amplitude:i.amplitude||5,specularIntensity:e[x(1778)]||.8,baseWaterColor:getCesiumColor(e.baseWaterColor||x(t._0x3668b6)).withAlpha(e.opacity),blendColor:getCesiumColor(e[x(t._0x6fc8a4)]||"#123e59")[x(396)](e[x(4010)])}}}),fragmentShaderSource:WaterFS,translucent:s!==1}),show:this[x(3482)]};if(e.clampToGround?(o.classificationType=e.classificationType??Cesium__namespace.ClassificationType.TERRAIN,this._primitive=this.primitiveCollection.add(new Cesium__namespace.GroundPrimitive(o))):this._primitive=this.primitiveCollection[x(565)](new Cesium__namespace[x(3629)](o)),this._primitive_outline&&(this.primitiveCollection.remove(this._primitive_outline),delete this[x(t._0x524556)]),e.outline){const r=this[x(t._0x5f4a7b)](e);this._primitive_outline=this._createPolylineOutline(r)}e.label&&this._addLabel()}_getDrawEntityClass(e,t){return e.style.materialType="Water",create$4("polygon",e)}}register$4("water",Water);var DiffuseWallGlowVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,DiffuseWallGlowFS=_0x2397ca(335);const DEF_STYLE$f={diffHeight:1e3,speed:10,maxScale:1};class DiffuseWall extends BasePolyPrimitive{constructor(e={}){const t={_0x5b60c1:2507,_0x3b3d58:760,_0x1d85a3:1046},x=_0x2397ca;e[x(357)]={...DEF_STYLE$f,...e.style},super(e),e.positions?this.center=this[x(t._0x5b60c1)]:e.position&&(this[x(t._0x3b3d58)]=e[x(760)],this._isCircle=!0),this._mScale=Cesium__namespace[x(t._0x1d85a3)].fromUniformScale(1),this._maxScale=e.style.maxScale||1}get czmObject(){return this[_0x2397ca({_0x26bcbb:2417}._0x26bcbb)]}get center(){return this._center}set center(e){this._center=e}get[_0x2397ca(760)](){return this[_0x2397ca({_0x322654:1133}._0x322654)]}set[_0x2397ca(760)](e){const t=_0x2397ca;this._center=LngLatPoint[t(1364)](e).toCartesian(),this[t(2211)]()}get radius(){const e=_0x2397ca;return this.style[e(3189)]}set radius(e){this.style.radius=e,this._updatePositionsByCircleCenter()}[_0x2397ca(2670)](e){const t={_0x538018:3482,_0x50c38e:2507,_0x393471:2434,_0x2fd6d5:3805,_0x2419c1:2206},x=_0x2397ca,i=this.positions;if(!this[x(t._0x538018)]||!i||i.length===0)return;const s=addPositionsHeight(this.positions,e.diffHeight);this[x(2006)]=this[x(t._0x50c38e)];const o=[],r=[],c=[],_=[];for(let u=0,m=i.length;u<m;u++){const f=(u+1)%m;o.push(i[u].x,i[u].y,i[u].z),o.push(i[f].x,i[f].y,i[f].z),o.push(s[f].x,s[f].y,s[f].z),o.push(s[u].x,s[u].y,s[u].z),_[x(2434)](0,0,1),_.push(0,0,1),_.push(0,0,1),_[x(2434)](0,0,1),r[x(t._0x393471)](0,0,1,0,1,1,0,1);const g=u*4,b=g+1,y=g+2,C=g+3;c.push(y,C,g,g,b,y)}const l=new Float64Array(o),h=new Cesium__namespace[x(3953)]({id:this.id,geometry:new Cesium__namespace[x(1955)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[x(t._0x2fd6d5)],componentsPerAttribute:3,values:l}),normal:new Cesium__namespace[x(1069)]({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array(_)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(r)})},indices:new Uint16Array(c),primitiveType:Cesium__namespace[x(486)][x(2651)],boundingSphere:Cesium__namespace.BoundingSphere[x(364)](l)})}),d=getColorByStyle(e);this[x(2417)]=new Cesium__namespace[x(3629)]({geometryInstances:h,appearance:new Cesium__namespace.MaterialAppearance({material:new Cesium__namespace[x(t._0x2419c1)]({translucent:!0,fabric:{uniforms:{color:d,globalAlpha:1},source:`
              uniform vec4 color;
              uniform float globalAlpha;

              vec4 xh_getMaterial(vec2 st){
                float alpha = pow(1. - st.t, 1.5);
                vec4 colorNew = vec4(color.rgb * color.a, alpha*globalAlpha);
                return colorNew;
              }`}}),vertexShaderSource:DiffuseWallGlowVS,fragmentShaderSource:DiffuseWallGlowFS}),asynchronous:!1,shadows:this.style.shadows,show:this.show}),this.primitiveCollection.add(this._primitive),this.bindUpdateEvent()}_removedHook(){const e={_0xcd3662:2417},t=_0x2397ca;this._primitive&&(this.primitiveCollection.remove(this._primitive),delete this[t(e._0xcd3662)])}update(e){const t={_0x4ce845:2417},x=_0x2397ca;if(this._primitive&&this._show){const i=e.frameNumber/1e3*this.style[x(3071)];let s=i-Math.floor(i);s=s<.01?.01:s,this._mScale[0]=this._mScale[5]=s*this._maxScale,this._mScale[10]=1.1-s,this[x(t._0x4ce845)].modelMatrix=scaleXYZ(this.center,this._mScale)}}_updatePositionsByCircleCenter(){const e={_0x505eb7:1133,_0x46a10d:3088},t=_0x2397ca;this.positions=getEllipseOuterPositions({position:this[t(e._0x505eb7)],radius:this.style.radius??100,count:this.style[t(e._0x46a10d)]??50})}[_0x2397ca(1120)](e,t){return this[_0x2397ca(797)]?create$4("circle",e):(e.style.closure=!0,create$4("wall",e))}_updateStyleByEdit(e){const t={_0x321b8d:639},x=_0x2397ca;this._isCircle&&Cesium__namespace[x(t._0x321b8d)](e.radius)&&(this.radius=e.radius),Cesium__namespace[x(639)](e.diffHeight)&&(this.style.diffHeight=e[x(2437)])}}register$4(_0x2397ca(3179),DiffuseWall);function scaleXYZ(n,e){const t={_0x4ec33d:1046,_0x1df475:3566},x=_0x2397ca,i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),s=Cesium__namespace[x(t._0x4ec33d)].inverse(i,new Cesium__namespace.Matrix4),o=Cesium__namespace.Matrix4[x(t._0x1df475)](e,s,new Cesium__namespace.Matrix4);return Cesium__namespace.Matrix4.multiply(i,o,new Cesium__namespace[x(1046)])}var ScrollWallGlowVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,ScrollWallGlowFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  czm_material material = czm_getMaterial(materialInput);
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
}
`,ScrollWallGlowMaterial=_0x2397ca(2269),ScrollWallGlowMaterial2=_0x2397ca(2830);const DEF_STYLE$e={diffHeight:100,speed:10,style:1};class ScrollWall extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$e,...e.style},super(e)}get czmObject(){return this._primitive}_addedHook(e){const t={_0x2461c0:2437,_0x2b47bc:2434,_0x49121d:3953,_0x200818:364,_0x3c35d4:2417,_0x1e49f3:182,_0x4056fc:565},x=_0x2397ca,i=this[x(1091)];if(!this.show||!i||i.length===0)return;const s=addPositionsHeight(i,e[x(t._0x2461c0)]),o=[],r=[],c=[],_=[];for(let m=0,f=i.length;m<f;m++){let g=m+1;g===f&&(g=0),o.push(i[m].x,i[m].y,i[m].z),o.push(i[g].x,i[g].y,i[g].z),o.push(s[g].x,s[g].y,s[g].z),o[x(2434)](s[m].x,s[m].y,s[m].z),_.push(0,0,1),_[x(t._0x2b47bc)](0,0,1),_.push(0,0,1),_.push(0,0,1),r[x(t._0x2b47bc)](0,0,1,0,1,1,0,1);const b=m*4,y=b+1,C=b+2,v=b+3;c.push(b,y,C,C,v,b)}const l=new Float64Array(o),h=new Cesium__namespace[x(t._0x49121d)]({id:this.id,geometry:new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[x(3805)],componentsPerAttribute:3,values:l}),normal:new Cesium__namespace[x(1069)]({componentDatatype:Cesium__namespace[x(399)].FLOAT,componentsPerAttribute:3,values:new Float32Array(_)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[x(399)].FLOAT,componentsPerAttribute:2,values:new Float32Array(r)})},indices:new Uint16Array(c),primitiveType:Cesium__namespace[x(486)].TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere[x(t._0x200818)](l)})}),d=getColorByStyle(e),u=!0;this[x(t._0x3c35d4)]=new Cesium__namespace[x(3629)]({geometryInstances:h,appearance:new Cesium__namespace.MaterialAppearance({material:new Cesium__namespace.Material({translucent:u,fabric:{uniforms:{u_color:d,speed:e.speed,direction:e.reverse?1:-1,globalAlpha:1},source:this[x(t._0x1e49f3)]()}}),vertexShaderSource:ScrollWallGlowVS,fragmentShaderSource:ScrollWallGlowFS}),asynchronous:!1,shadows:e.shadows,show:this.show}),this.primitiveCollection[x(t._0x4056fc)](this._primitive)}_removedHook(){const e={_0x3943d5:2417},t=_0x2397ca;this._primitive&&(this.primitiveCollection.remove(this[t(e._0x3943d5)]),delete this._primitive)}[_0x2397ca(182)](){const e=_0x2397ca;return this[e(357)][e(357)]===1?ScrollWallGlowMaterial:ScrollWallGlowMaterial2}[_0x2397ca(1120)](e,t){const x=_0x2397ca;return e[x(357)][x(509)]=!0,create$4(x(3958),e)}}register$4("scrollWall",ScrollWall);const Cartesian3$1=Cesium__namespace[_0x2397ca(295)],defined$1=Cesium__namespace[_0x2397ca(639)],CesiumMath$1=Cesium__namespace.Math,Matrix3=Cesium__namespace.Matrix3,PolylineVolumeGeometryLibrary=Cesium__namespace.PolylineVolumeGeometryLibrary,Quaternion=Cesium__namespace.Quaternion,ThickWallGeometryLibrary={},scratch1=new Cartesian3$1,scratch2=new Cartesian3$1,scratch3=new Cartesian3$1,scratch4=new Cartesian3$1,scaleArray2=[new Cartesian3$1,new Cartesian3$1],cartesian1=new Cartesian3$1,cartesian2=new Cartesian3$1,cartesian3=new Cartesian3$1,cartesian4=new Cartesian3$1,cartesian5=new Cartesian3$1,cartesian6=new Cartesian3$1,cartesian7=new Cartesian3$1,cartesian8=new Cartesian3$1,cartesian9=new Cartesian3$1,cartesian10$1=new Cartesian3$1,quaterion=new Quaternion,rotMatrix=new Matrix3;function cartesian3ToArray(n){const e={_0x23036a:1255},t={_0x4c06c7:2434},x=_0x2397ca,i=[];return n[x(e._0x23036a)](s=>{const o=x;i.push(s.x),i[o(t._0x4c06c7)](s.y),i.push(s.z)}),i}function computeRoundCorner(n,e,t,x){const i={_0x26df0e:466,_0x66e313:3416,_0x5b312c:701},s=_0x2397ca,o=Cartesian3$1[s(i._0x26df0e)](Cartesian3$1.subtract(e,n,scratch1),Cartesian3$1.subtract(t,n,scratch2)),r=1,c=r*3,_=new Array(c);_[c-3]=t.x,_[c-2]=t.y,_[c-1]=t.z;let l;x?l=Matrix3[s(701)](Quaternion.fromAxisAngle(Cartesian3$1[s(i._0x66e313)](n,scratch1),o/r,quaterion),rotMatrix):l=Matrix3[s(i._0x5b312c)](Quaternion.fromAxisAngle(n,o/r,quaterion),rotMatrix);let h=0;e=Cartesian3$1.clone(e,scratch1);for(let d=0;d<r;d++)e=Matrix3.multiplyByVector(l,e,e),_[h++]=e.x,_[h++]=e.y,_[h++]=e.z;return _}function addShiftedPositions(n,e,t,x){const i=_0x2397ca,s=new Array(n[i(2027)]),o=new Array(n[i(2027)]),r=Cartesian3$1[i(2580)](e,t,scratch1),c=Cartesian3$1.negate(r,scratch2);let _=0,l=n[i(2027)]-1;for(let h=0;h<n.length;h+=3){const d=Cartesian3$1.fromArray(n,h,scratch3),u=Cartesian3$1.add(d,c,scratch4);s[_++]=u.x,s[_++]=u.y,s[_++]=u.z;const m=Cartesian3$1.add(d,r,scratch4);o[l--]=m.z,o[l--]=m.y,o[l--]=m.x}return x.push(s,o),x}ThickWallGeometryLibrary.addAttribute=function(n,e,t,x){const i=e.x,s=e.y,o=e.z;defined$1(t)&&(n[t]=i,n[t+1]=s,n[t+2]=o),defined$1(x)&&(n[x]=o,n[x-1]=s,n[x-2]=i)};const scratchForwardProjection=new Cartesian3$1,scratchBackwardProjection=new Cartesian3$1;ThickWallGeometryLibrary.computePositions=function(n){const e={_0x2b9fe3:960,_0x1cc25c:2527,_0x53e076:960,_0x375037:565,_0x4db0c2:664,_0x33f62c:2527,_0xdd044c:664,_0x5b1fec:3134,_0xae7026:2580,_0x45ceeb:3134,_0x111096:2580,_0x3ba9f0:2580,_0x5969f0:3069,_0x5594bd:3134,_0x11f63f:565,_0x2398d6:3416},t=_0x2397ca,x=n.positions,i=n.ellipsoid,s=n.width/2;let o=cartesian1,r=cartesian2,c=cartesian3,_=cartesian4,l=cartesian5,h=cartesian6,d=cartesian7,u=cartesian8,m=cartesian9,f=cartesian10$1,g=[],b=x[0],y=x[1];r=Cartesian3$1[t(e._0x2b9fe3)](Cartesian3$1[t(2527)](y,b,r),r),o=i.geodeticSurfaceNormal(b,o),_=Cartesian3$1.normalize(Cartesian3$1.cross(o,r,_),_),d=Cartesian3$1.clone(b,d),b=y,c=Cartesian3$1.negate(r,c);let C;const v=[];let M;const w=x.length;for(M=1;M<w-1;M++){o=i.geodeticSurfaceNormal(b,o),y=x[M+1],r=Cartesian3$1[t(960)](Cartesian3$1[t(e._0x1cc25c)](y,b,r),r),l=Cartesian3$1[t(e._0x53e076)](Cartesian3$1[t(e._0x375037)](r,c,l),l);const H=Cartesian3$1.multiplyByScalar(o,Cartesian3$1[t(e._0x4db0c2)](r,o),scratchForwardProjection);Cartesian3$1[t(e._0x33f62c)](r,H,H),Cartesian3$1.normalize(H,H);const D=Cartesian3$1.multiplyByScalar(o,Cartesian3$1.dot(c,o),scratchBackwardProjection);if(Cartesian3$1.subtract(c,D,D),Cartesian3$1[t(960)](D,D),!CesiumMath$1[t(3700)](Math.abs(Cartesian3$1[t(e._0xdd044c)](H,D)),1,CesiumMath$1.EPSILON7)){l=Cartesian3$1.cross(l,o,l),l=Cartesian3$1.cross(o,l,l),l=Cartesian3$1[t(960)](l,l);const L=s/Math.max(.25,Cartesian3$1.magnitude(Cartesian3$1[t(e._0x5b1fec)](l,c,scratch1))),B=PolylineVolumeGeometryLibrary.angleIsGreaterThanPi(r,c,b,i);l=Cartesian3$1[t(e._0xae7026)](l,L,l),B?(u=Cartesian3$1.add(b,l,u),f=Cartesian3$1.add(u,Cartesian3$1.multiplyByScalar(_,s,f),f),m=Cartesian3$1.add(u,Cartesian3$1[t(e._0xae7026)](_,s*2,m),m),scaleArray2[0]=Cartesian3$1[t(3069)](d,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(f,scaleArray2[1]),C=cartesian3ToArray(scaleArray2),g=addShiftedPositions(C,_,s,g),h=Cartesian3$1.clone(m,h),_=Cartesian3$1.normalize(Cartesian3$1[t(e._0x45ceeb)](o,r,_),_),m=Cartesian3$1[t(e._0x375037)](u,Cartesian3$1[t(e._0x111096)](_,s*2,m),m),d=Cartesian3$1[t(e._0x375037)](u,Cartesian3$1.multiplyByScalar(_,s,d),d),v.push({leftPositions:computeRoundCorner(u,h,m,B)})):(m=Cartesian3$1.add(b,l,m),f=Cartesian3$1[t(e._0x375037)](m,Cartesian3$1.negate(Cartesian3$1.multiplyByScalar(_,s,f),f),f),u=Cartesian3$1.add(m,Cartesian3$1.negate(Cartesian3$1[t(e._0x3ba9f0)](_,s*2,u),u),u),scaleArray2[0]=Cartesian3$1[t(e._0x5969f0)](d,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(f,scaleArray2[1]),C=cartesian3ToArray(scaleArray2),g=addShiftedPositions(C,_,s,g),h=Cartesian3$1[t(e._0x5969f0)](u,h),_=Cartesian3$1[t(960)](Cartesian3$1[t(e._0x5594bd)](o,r,_),_),u=Cartesian3$1[t(e._0x11f63f)](m,Cartesian3$1[t(e._0x2398d6)](Cartesian3$1[t(2580)](_,s*2,u),u),u),d=Cartesian3$1[t(e._0x375037)](m,Cartesian3$1.negate(Cartesian3$1.multiplyByScalar(_,s,d),d),d),v.push({rightPositions:computeRoundCorner(m,h,u,B)})),c=Cartesian3$1.negate(r,c)}b=y}return o=i.geodeticSurfaceNormal(b,o),scaleArray2[0]=Cartesian3$1[t(e._0x5969f0)](d,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(b,scaleArray2[1]),C=cartesian3ToArray(scaleArray2),g=addShiftedPositions(C,_,s,g),{positions:g,corners:v}};const BoundingSphere=Cesium__namespace.BoundingSphere,Cartesian3=Cesium__namespace.Cartesian3,Cartographic=Cesium__namespace.Cartographic,Check=Cesium__namespace.Check,ComponentDatatype=Cesium__namespace.ComponentDatatype,defaultValue=Cesium__namespace[_0x2397ca(2773)],defined=Cesium__namespace.defined,Ellipsoid=Cesium__namespace[_0x2397ca(3815)],Geometry=Cesium__namespace.Geometry,GeometryAttribute=Cesium__namespace.GeometryAttribute,GeometryAttributes=Cesium__namespace.GeometryAttributes,IndexDatatype=Cesium__namespace[_0x2397ca(1631)],CesiumMath=Cesium__namespace.Math,PrimitiveType=Cesium__namespace.PrimitiveType,VertexFormat=Cesium__namespace.VertexFormat,CornerType=Cesium__namespace.CornerType,cartesian10=new Cartesian3,cartesian20=new Cartesian3,cartesian30=new Cartesian3;function combine(n,e){const t={_0x198345:2027,_0x48d07b:3476,_0x3acbef:2713,_0x4137af:760},x=_0x2397ca,i=n.positions,s=n.corners,o=new GeometryAttributes;let r,c=0,_=0,l,h=0,d;for(l=0;l<i.length;l+=2)d=i[l].length-3,c+=d,h+=d*2,_+=i[l+1].length-3;for(c+=3,_+=3,l=0;l<s.length;l++){r=s[l];const L=s[l][x(2457)];defined(L)?(d=L.length,c+=d,h+=d):(d=s[l][x(3334)].length,_+=d,h+=d)}const u=c+_,m=new Float64Array(u);let f=0,g=u-1,b,y,C,v;const M=IndexDatatype.createTypedArray(u/3,h);let w=0,H=0,D=i[H++],F=i[H++];for(m.set(D,f),m.set(F,g-F[x(t._0x198345)]+1),d=F.length-3,l=0;l<d;l+=3)y=f/3,v=y+1,b=(g-2)/3,C=b-1,M[w++]=b,M[w++]=y,M[w++]=C,M[w++]=C,M[w++]=y,M[w++]=v,f+=3,g-=3;for(l=0;l<s.length;l++){let L;r=s[l];const B=r.leftPositions,Y=r[x(3334)];let j,J,Q=cartesian30,X=cartesian10,xe=cartesian20;if(defined(B)){for(g-=3,j=v,J=C,L=0;L<B.length/3;L++)Q=Cartesian3.fromArray(B,L*3,Q),M[w++]=j,M[w++]=J-L-1,M[w++]=J-L,ThickWallGeometryLibrary.addAttribute(m,Q,void 0,g),X=Cartesian3.fromArray(m,(J-L-1)*3,X),xe=Cartesian3.fromArray(m,j*3,xe),g-=3;Q=Cartesian3.fromArray(m,j*3,Q),X=Cartesian3[x(2527)](Cartesian3[x(3476)](m,J*3,X),Q,X),xe=Cartesian3.subtract(Cartesian3[x(3476)](m,(J-L)*3,xe),Q,xe),f+=3}else{for(f+=3,j=C,J=v,L=0;L<Y.length/3;L++)Q=Cartesian3.fromArray(Y,L*3,Q),M[w++]=j,M[w++]=J+L,M[w++]=J+L+1,ThickWallGeometryLibrary.addAttribute(m,Q,f),X=Cartesian3.fromArray(m,j*3,X),xe=Cartesian3.fromArray(m,(J+L)*3,xe),f+=3;Q=Cartesian3.fromArray(m,j*3,Q),X=Cartesian3[x(2527)](Cartesian3[x(t._0x48d07b)](m,(J+L)*3,X),Q,X),xe=Cartesian3.subtract(Cartesian3.fromArray(m,J*3,xe),Q,xe),g-=3}for(D=i[H++],F=i[H++],D[x(t._0x3acbef)](0,3),F.splice(F.length-3,3),m.set(D,f),m[x(1912)](F,g-F.length+1),d=F.length-3,L=0;L<F[x(2027)];L+=3)v=f/3,y=v-1,C=(g-2)/3,b=C+1,M[w++]=b,M[w++]=y,M[w++]=C,M[w++]=C,M[w++]=y,M[w++]=v,f+=3,g-=3;f-=3,g+=3}if(o[x(t._0x4137af)]=new GeometryAttribute({componentDatatype:ComponentDatatype[x(3805)],componentsPerAttribute:3,values:m}),e.st){const L=new Float32Array(u/3*2);let B=0;c/=3,_/=3;const Y=1/(c-1),j=1/(_-1);for(l=0;l<_;l++)L[B++]=l*j,L[B++]=0;for(l=c;l>0;l--)L[B++]=(l-1)*Y,L[B++]=1;o.st=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:2,values:L})}return{attributes:o,indices:M}}function ThickWallGeometry(n){const e={_0x375a3f:2526,_0x4febed:3069},t=_0x2397ca;n=defaultValue(n,defaultValue.EMPTY_OBJECT);const x=n.positions,i=n.width;Check.defined("options.positions",x),Check.defined(t(3341),i),this[t(e._0x375a3f)]=x,this[t(3042)]=Ellipsoid[t(e._0x4febed)](defaultValue(n.ellipsoid,Ellipsoid.WGS84)),this[t(1060)]=VertexFormat[t(3069)](defaultValue(n.vertexFormat,VertexFormat.POSITION_AND_ST)),this._width=i,this._granularity=defaultValue(n.granularity,CesiumMath.RADIANS_PER_DEGREE)}ThickWallGeometry.createGeometry=function(n){const e={_0x5e2039:2027,_0x4284b0:1184,_0x247f83:489,_0x59b09a:1184,_0x44168d:2870,_0x3520cc:562},t={_0x5a688c:2457,_0xa9c704:295,_0x9d28f7:489},x=_0x2397ca,i=n._positions,s=n[x(1335)],o=n._ellipsoid,r=i.map(C=>Cartographic.fromCartesian(C)),c=i.map(C=>o.scaleToGeodeticSurface(C)),_=n._vertexFormat,l={ellipsoid:o,positions:c,width:s,cornerType:CornerType.BEVELED,granularity:n._granularity,saveAttributes:!1},h=ThickWallGeometryLibrary.computePositions(l),d=[];let u=[];const m=h.positions,f=m.length/2;for(let C=0;C<f;C++){const v=r[C],M=r[C+1],w=m[C*2],H=m[C*2+1],D=w.length/3,F=H[x(e._0x5e2039)]/3;for(let B=0;B<D;B++){const Y=new Cesium__namespace.Cartesian3(w[B*3],w[B*3+1],w[B*3+2]),j=Cartographic.fromCartesian(Y);let J;B===0?J=Cartesian3.fromRadians(j[x(e._0x4284b0)],j[x(489)],v[x(3872)]):J=Cartesian3.fromRadians(j.longitude,j[x(e._0x247f83)],M.height),d.push(J),w[B*3]=J.x,w[B*3+1]=J.y,w[B*3+2]=J.z}const L=[];for(let B=0;B<F;B++){const Y=new Cesium__namespace[x(295)](H[B*3],H[B*3+1],H[B*3+2]),j=Cartographic.fromCartesian(Y);let J;B===0?J=Cartesian3[x(238)](j[x(1184)],j[x(e._0x247f83)],M.height):J=Cartesian3[x(238)](j[x(e._0x59b09a)],j.latitude,v.height),L.push(J),H[B*3]=J.x,H[B*3+1]=J.y,H[B*3+2]=J.z}u.push(...L[x(3223)]())}h.corners.forEach((C,v)=>{const M=x;let w;defined(C.rightPositions)?w=C[M(3334)]:w=C[M(t._0x5a688c)];const H=new Cesium__namespace[M(t._0xa9c704)](w[0],w[1],w[2]),D=Cartographic[M(2145)](H),F=i[v+1],L=Cartographic[M(2145)](F),B=Cartesian3.fromRadians(D.longitude,D[M(t._0x9d28f7)],L[M(3872)]);w[0]=B.x,w[1]=B.y,w[2]=B.z});const g=combine(h,_),b=g[x(e._0x44168d)],y=BoundingSphere.fromVertices(b.position.values,void 0,3);return u=Cesium__namespace[x(e._0x3520cc)](u,Cartesian3.equalsEpsilon),{geometry:new Geometry({attributes:b,indices:g.indices,primitiveType:PrimitiveType.TRIANGLES,boundingSphere:y}),rightPoints:u,leftPoints:d}};const DEF_STYLE$d={diffHeight:100,bottomHeight:0,width:10,flat:!0};class ThickWall extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$d,...e.style},super(e)}get[_0x2397ca(3735)](){return this._primitive}_createGeometryInstance(e,t){const x={_0x46fcb0:2434,_0x2ba00f:3019,_0x6bd866:2377,_0x4a773b:1868,_0x5d8a11:862,_0x2f3332:1730,_0x1bd0eb:2533},i={_0x225d0b:295,_0x1f715f:238,_0x4f9b29:1184,_0x13c474:3872},s=_0x2397ca,o=[],r=[],c=[];this.positions[s(1255)](b=>{const y=s,C=Cesium__namespace.Cartographic.fromCartesian(b);r.push(Cesium__namespace[y(i._0x225d0b)][y(i._0x1f715f)](C.longitude,C.latitude,C.height+e.diffHeight)),c.push(Cesium__namespace[y(295)].fromRadians(C[y(i._0x4f9b29)],C[y(489)],C[y(i._0x13c474)]-e.bottomHeight))}),e.closure&&(r[s(2434)](r[0]),c[s(2434)](c[0]));const _=ThickWallGeometry.createGeometry(new ThickWallGeometry({positions:r,width:e.width})),l=ThickWallGeometry.createGeometry(new ThickWallGeometry({positions:c,width:e[s(1526)]})),h=new Cesium__namespace.GeometryInstance({geometry:_.geometry}),d=new Cesium__namespace[s(3953)]({geometry:l.geometry});o.push(h),o[s(x._0x46fcb0)](d);const u=[],m=[];l.leftPoints.forEach(b=>{const y=Cesium__namespace.Cartographic.fromCartesian(b);u.push(y.height)}),l.rightPoints.forEach(b=>{const y=s,C=Cesium__namespace[y(1899)][y(2145)](b);m.push(C.height)});const f=new Cesium__namespace[s(3953)]({geometry:new Cesium__namespace.WallGeometry({positions:_.leftPoints,minimumHeights:u,vertexFormat:Cesium__namespace.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat})}),g=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace[s(x._0x2ba00f)]({positions:_.rightPoints,minimumHeights:m,vertexFormat:Cesium__namespace[s(x._0x6bd866)].MaterialSupport.TEXTURED.vertexFormat})});if(o.push(f),o.push(g),!e.closure){const b=Cesium__namespace.Cartographic[s(2145)](l.leftPoints[0]).height,y=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:[_.leftPoints[0],_.rightPoints[0]],minimumHeights:[b,b],vertexFormat:Cesium__namespace.MaterialAppearance[s(x._0x4a773b)].TEXTURED.vertexFormat})}),C=Cesium__namespace.Cartographic.fromCartesian(l.leftPoints[l[s(x._0x5d8a11)].length-1]).height,v=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:[_.leftPoints[_[s(x._0x5d8a11)].length-1],_[s(x._0x2f3332)][_[s(1730)].length-1]],minimumHeights:[C,C],vertexFormat:Cesium__namespace[s(2377)].MaterialSupport[s(x._0x1bd0eb)].vertexFormat})});o[s(x._0x46fcb0)](y),o.push(v)}return o}[_0x2397ca(3198)](e,t,x){return new Cesium__namespace.MaterialAppearance({...e})}[_0x2397ca(2064)](e){return WallStyleConver[_0x2397ca({_0x38b8e0:2868}._0x38b8e0)](e)}_style2Json(e,t){return WallStyleConver.toJSON(e,t)}_updateStyleByEdit(e){const t={_0x58837c:2437},x=_0x2397ca;this._isCircle&&Cesium__namespace.defined(e.radius)&&(this[x(3189)]=e.radius),Cesium__namespace.defined(e[x(t._0x58837c)])&&(this[x(357)].diffHeight=e.diffHeight)}_getDrawEntityClass(e,t){return create$4("wall",e)}}register$4(_0x2397ca(1366),ThickWall);var DynamicRiverFS=_0x2397ca(1334),DynamicRiverVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec2 st;
in float batchId;

out vec3 v_positionMC;
out vec3 v_positionEC;
out vec2 v_st;

void main() {
  vec4 p = czm_computePosition();

  v_positionMC = position3DHigh + position3DLow;           // position in model coordinates
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates
  v_st = st;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,DynamicRiverMaterial=`uniform float globalAlpha;
uniform float opacity;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(move) {
    float r = sqrt((st.x - 0.8) * (st.x - 0.8) + (st.y - 0.8) * (st.y - 0.8));
    float r2 = sqrt((st.x - 0.2) * (st.x - 0.2) + (st.y - 0.2) * (st.y - 0.2));
    float z = cos(moveVar.x * r + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    float z2 = cos(moveVar.x * r2 + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    st += sqrt(z * z + z2 * z2);
    st.s += direction * czm_frameNumber / 1000.0 * speed;
    st.s = mod(st.s, 1.0);
  }
  if(axisY) {
    st = vec2(st.t, st.s);
  }
  vec4 colorImage = texture(image, st);
  material.alpha = opacity * globalAlpha;
  material.diffuse = colorImage.rgb;
  return material;
}
`;const DEF_STYLE$c={opacity:.5,width:10,height:0,speed:10,axisY:!1,move:!0,direction:!0,moveVar:new Cesium__namespace.Cartesian3(50,1,100)};class DynamicRiver extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$c,...e.style},super(e)}get czmObject(){return this[_0x2397ca(2417)]}get image(){const e=_0x2397ca;return this.style[e(1437)]}set image(e){const t={_0x392c6a:2554},x=_0x2397ca;this.style.image=e,this[x(3280)][x(t._0x392c6a)].image=e}get[_0x2397ca(1526)](){const e=_0x2397ca;return this.style[e(1526)]}set width(e){const t={_0x2e82da:2921},x=_0x2397ca;e=Number(e)||1,this.style[x(1526)]=e,this[x(t._0x2e82da)](this.style)}get height(){return this.style.height}set height(e){const t=_0x2397ca;this.style.height=e,this[t(2921)](this.style)}get opacity(){return this[_0x2397ca(357)].opacity}set opacity(e){const t={_0xc52407:4010},x=_0x2397ca;this.style[x(4010)]=Number(e),this[x(3280)].uniforms[x(t._0xc52407)]=e}get[_0x2397ca(2165)](){return this.style.direction}set[_0x2397ca(2165)](e){e=!!e,this.style.direction=e,this._material.uniforms.direction=e?-1:1}get speed(){return this.style.speed}set speed(e){e=Number(e)||1,this.style.speed=e,this._material.uniforms.speed=e}get move(){return this.style.move}set move(e){e=!!e,this.style.move=e,this._material.uniforms.move=e}get axisY(){return this.style.axisY}set axisY(e){const t=_0x2397ca;e=!!e,this.style[t(2435)]=e,this._material.uniforms.axisY=e}get moveVar(){return this.style.moveVar}set[_0x2397ca(1588)](e){const t=_0x2397ca;this[t(357)][t(1588)]=e,this._material[t(2554)].moveVar=e}_addedHook(e){const t={_0x2d931a:565,_0xb64469:2417},x=_0x2397ca;!this.show||!this.positions||this.positions.length===0||(this._sideRes=Lines2Plane(this.positions,this[x(1526)],this.height),this._sideRes&&(this._primitive=this.createPrimitive(),this[x(3595)][x(t._0x2d931a)](this[x(t._0xb64469)])))}_removedHook(){const e={_0x2cd7e0:3023,_0x389542:3658,_0x3cac1b:3595},t=_0x2397ca;this.dhEvent&&(this._map[t(3573)](EventType[t(e._0x2cd7e0)],this.dhEvent,this),delete this[t(e._0x389542)]),this._primitive&&(this[t(e._0x3cac1b)].remove(this._primitive),delete this._primitive),this[t(3280)]&&(this[t(3280)].destroy(),delete this._material)}[_0x2397ca(353)](e,t){const x=_0x2397ca;let i=!1;for(const s in t)switch(s){case"image":case"opacity":case x(1588):case"direction":case"speed":case x(2435):case"globalAlpha":this._material[x(2554)][s]=t[s];break;default:i=!0;break}i&&this.redraw(e)}[_0x2397ca(3917)](){const e={_0x489e81:1447,_0x3597c5:2491,_0x1ff87d:407,_0x225032:3280,_0x430156:1437,_0x5011c2:3071},t=_0x2397ca,x=this._sideRes,i=new Float64Array(x.vertexs),s=new Cesium__namespace[t(e._0x489e81)];s.position=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[t(3805)],componentsPerAttribute:3,values:i}),s.st=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:x.uvs});const o=new Cesium__namespace.Geometry({attributes:s,indices:x.indexs,primitiveType:Cesium__namespace.PrimitiveType[t(2651)],boundingSphere:Cesium__namespace.BoundingSphere[t(364)](i)}),r=new Cesium__namespace.GeometryInstance({id:this.id,geometry:o}),c=new Cesium__namespace.RenderState;return c[t(e._0x3597c5)][t(e._0x1ff87d)]=!0,this[t(e._0x225032)]=createMaterial(MaterialType,{image:this[t(e._0x430156)],opacity:this.opacity,moveVar:this.moveVar,direction:this.direction?-1:1,speed:this[t(e._0x5011c2)],move:this.move,axisY:this.axisY,globalAlpha:1}),new Cesium__namespace[t(3629)]({geometryInstances:r,appearance:new Cesium__namespace.Appearance({material:this._material,renderState:c,vertexShaderSource:DynamicRiverVS,fragmentShaderSource:DynamicRiverFS})})}offsetHeight(e,t){const x={_0xbde30a:295,_0x296a29:960},i=_0x2397ca;if(!e||!t||!this._primitive)return;let s=0;const o=20,r=e/(t*o),c=this._sideRes.self,_=new Cesium__namespace.Cartesian3;for(let h=0,d=c.length;h<d;h++){const u=Cesium__namespace[i(x._0xbde30a)][i(x._0x296a29)](c[h],new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.add(_,u,_)}Cesium__namespace.Cartesian3[i(960)](_,_);const l=Cesium__namespace.clone(this._primitive.modelMatrix);this[i(3658)]=function(){const h=i;if(!(!this._primitive||!this._map)){if(Math[h(889)](s)<=Math.abs(e)){const d=Cesium__namespace.Cartesian3.multiplyByScalar(_,s,new Cesium__namespace.Cartesian3);this._primitive.modelMatrix=Cesium__namespace.Matrix4.multiplyByTranslation(l,d,new Cesium__namespace.Matrix4)}else this.dhEvent&&(this._map[h(3573)](EventType.clockTick,this.dhEvent,this),delete this[h(3658)]);s+=r}},this._map.on(EventType.clockTick,this.dhEvent,this)}[_0x2397ca(2732)](e){const t={_0x257990:3280},x=_0x2397ca;this.style.globalAlpha=e,this._material&&(this[x(t._0x257990)].uniforms.globalAlpha=e)}[_0x2397ca(1120)](e,t){const x=_0x2397ca;return e.style[x(1526)]=5,create$4("polyline",e)}}register$4("dynamicRiver",DynamicRiver);const MaterialType="DynamicRiver";register$3(MaterialType,{fabric:{uniforms:{image:Cesium__namespace.Material.DefaultImageId,opacity:1,moveVar:new Cesium__namespace.Cartesian3(50,1,100),direction:1,speed:1,move:!0,axisY:!1,globalAlpha:1},source:DynamicRiverMaterial},translucent:!0});function Lines2Plane(n,e,t){const x={_0x25ce38:2027,_0x4c8274:2027,_0x881485:2098,_0x1ec999:2434,_0x41a84c:192,_0x3a3b99:2145,_0x5b78e7:2434,_0x59fc29:2434},i=_0x2397ca;if(!n||n[i(x._0x25ce38)]<=1||!e||e===0){logError$1("请确认参数符合规则：数组长度大于1，宽高不能为0！",n);return}const s=n[i(x._0x4c8274)],o=[],r=[],c=e/2;for(let g=0;g<s;g++){let b,y,C,v,M;if(g===0?(b=n[g],y=n[g],C=n[g+1]):g===s-1?(b=n[g-1],y=n[g],C=n[g-1]):(b=n[g-1],y=n[g],C=n[g+1]),t!==0&&(b=RaisePoint(b,t),y=RaisePoint(y,t),C=RaisePoint(C,t)),b&&y&&C){const w=GetSide2(b,y,C,c);v=w.left,M=w[i(1401)],o.push(M),r[i(2434)](v)}}const _=o,l=r,h=[],d=[],u=[],m=[],f=[];for(let g=0;g<s;g++){const b=Cesium__namespace.EncodedCartesian3.fromCartesian(l[g]);d.push(l[g].x),d.push(l[g].y),d.push(l[g].z),u.push(b[i(x._0x881485)].x),u[i(x._0x1ec999)](b.high.y),u[i(2434)](b.high.z),m.push(b.low.x),m[i(2434)](b.low.y),m[i(2434)](b[i(x._0x41a84c)].z),h[i(2434)](1,1),g<s-1&&(f[i(2434)](g+s*2),f.push(g+1),f.push(g+1+s),f.push(g+s*2),f.push(g+1+s),f.push(s+g+s*2))}for(let g=0;g<s;g++){const b=Cesium__namespace.EncodedCartesian3[i(x._0x3a3b99)](_[g]);d.push(_[g].x),d[i(2434)](_[g].y),d.push(_[g].z),u.push(b.high.x),u[i(x._0x1ec999)](b.high.y),u.push(b[i(2098)].z),m.push(b.low.x),m.push(b.low.y),m.push(b.low.z),h.push(1,0)}for(let g=0;g<s;g++){const b=Cesium__namespace.EncodedCartesian3[i(2145)](l[g]);d.push(l[g].x),d[i(2434)](l[g].y),d[i(x._0x5b78e7)](l[g].z),u.push(b.high.x),u[i(2434)](b.high.y),u.push(b.high.z),m.push(b[i(192)].x),m.push(b.low.y),m[i(x._0x1ec999)](b[i(x._0x41a84c)].z),h.push(0,1)}for(let g=0;g<s;g++){const b=Cesium__namespace.EncodedCartesian3.fromCartesian(_[g]);d[i(x._0x59fc29)](_[g].x),d.push(_[g].y),d.push(_[g].z),u.push(b[i(x._0x881485)].x),u.push(b.high.y),u.push(b.high.z),m[i(x._0x5b78e7)](b.low.x),m.push(b.low.y),m[i(2434)](b.low.z),h.push(0,0)}return{left:_,right:l,self:n,vertexs:new Float32Array(d),vertexsH:new Float32Array(u),vertexsL:new Float32Array(m),indexs:new Uint16Array(f),uvs:new Float32Array(h)}}function RaisePoint(n,e){const t={_0x5d2d70:3661,_0x236298:960,_0x2326dc:1110,_0x2e22f8:607},x=_0x2397ca;if(!(n instanceof Cesium__namespace.Cartesian3)){logError$1(x(1226));return}if(!e||e===0){logError$1(x(t._0x5d2d70));return}const i=Cesium__namespace.Cartesian3[x(t._0x236298)](n,new Cesium__namespace.Cartesian3),s=new Cesium__namespace.Ray(n,i);return Cesium__namespace[x(t._0x2326dc)][x(t._0x2e22f8)](s,e)}function GetSide2(n,e,t,x){const i={_0xe0917:960,_0x2787cd:2527,_0x5b4738:295,_0x3f489e:295,_0x4479ee:295,_0x4e955b:1110,_0xfd8517:295,_0x282720:3134,_0x3086a2:295,_0x1fbf4c:1314,_0xf18d6f:2500},s=_0x2397ca;let o,r;if(Cesium__namespace.Cartesian3[s(1043)](n,e)){const c=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3[s(3134)](_,c,new Cesium__namespace.Cartesian3),h=Cesium__namespace.Cartesian3.cross(c,_,new Cesium__namespace[s(295)]),d=new Cesium__namespace.Ray(e,l),u=new Cesium__namespace[s(1110)](e,h);o=Cesium__namespace.Ray[s(607)](d,x),r=Cesium__namespace.Ray.getPoint(u,x)}else if(Cesium__namespace[s(295)].equals(t,e)){const c=Cesium__namespace.Cartesian3[s(i._0xe0917)](Cesium__namespace[s(295)][s(i._0x2787cd)](e,n,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.cross(_,c,new Cesium__namespace[s(i._0x5b4738)]),h=Cesium__namespace.Cartesian3.cross(c,_,new Cesium__namespace[s(295)]),d=new Cesium__namespace.Ray(e,l),u=new Cesium__namespace.Ray(e,h);o=Cesium__namespace.Ray.getPoint(d,x),r=Cesium__namespace.Ray.getPoint(u,x)}else{const c=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[s(i._0x3f489e)].subtract(e,n,new Cesium__namespace[s(295)]),new Cesium__namespace.Cartesian3),_=Cesium__namespace[s(295)].normalize(Cesium__namespace[s(i._0x4479ee)].subtract(t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.add(c,_,new Cesium__namespace[s(295)]);if(Cesium__namespace.Cartesian3.equals(l,new Cesium__namespace.Cartesian3)){const h=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(e,n,new Cesium__namespace[s(295)]),new Cesium__namespace.Cartesian3),d=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace.Cartesian3),u=Cesium__namespace.Cartesian3.cross(d,h,new Cesium__namespace[s(i._0x3f489e)]),m=Cesium__namespace.Cartesian3[s(3134)](h,d,new Cesium__namespace.Cartesian3),f=new Cesium__namespace[s(1110)](e,u),g=new Cesium__namespace[s(i._0x4e955b)](e,m);o=Cesium__namespace.Ray.getPoint(f,x),r=Cesium__namespace.Ray.getPoint(g,x)}else{const h=Cesium__namespace.Cartesian3.normalize(l,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace[s(295)]),u=Cesium__namespace[s(i._0xfd8517)][s(i._0x282720)](d,h,new Cesium__namespace.Cartesian3),m=Cesium__namespace.Cartesian3.cross(h,d,new Cesium__namespace[s(i._0x3086a2)]),f=new Cesium__namespace.Ray(e,u),g=new Cesium__namespace.Ray(e,m),b=Cesium__namespace.Cartesian3[s(664)](c,_),y=Cesium__namespace.Cartesian3.magnitude(c),C=Cesium__namespace.Cartesian3.magnitude(_),v=b/y/C,M=Cesium__namespace[s(3876)][s(778)](Math.acos(v)),w=M/2,H=Math[s(i._0x1fbf4c)](Cesium__namespace[s(3876)][s(i._0xf18d6f)](w)),D=x*2/H;o=Cesium__namespace.Ray.getPoint(f,D/2),r=Cesium__namespace[s(1110)].getPoint(g,D/2)}}return{left:o,right:r}}const DEF_STYLE$b={opacity:1,move:!1,axisY:!0};class Road extends DynamicRiver{constructor(e={}){const t=_0x2397ca;e.style={...DEF_STYLE$b,...e[t(357)]},super(e)}}register$4("road",Road);class Pit extends BasePolyPrimitive{constructor(e={}){const t={_0x1ed019:2437,_0x3b5c24:357,_0x375c09:3560},x=_0x2397ca;super(e),this[x(357)][x(2437)]=this.style[x(t._0x1ed019)]??10,this[x(t._0x3b5c24)][x(t._0x375c09)]=this.style.splitNum??50}get[_0x2397ca(3279)](){const e={_0x3bde5c:327,_0x4ed5f6:2434,_0x38453b:327},t=_0x2397ca,x=[];return this[t(e._0x3bde5c)]&&x[t(e._0x4ed5f6)](this[t(e._0x38453b)]),this._primitive_label&&x.push(this._primitive_label),x}get center(){return this[_0x2397ca({_0x1a0b4a:2507}._0x1a0b4a)]}get diffHeight(){return this.style.diffHeight}set diffHeight(e){const t={_0x461447:357,_0x1bcdd3:3113},x=_0x2397ca;this[x(t._0x461447)].diffHeight=e;const i=[],s=this._minHeight-e,o=this.wellData.cartoList,r=new Array(o.length);for(let c=0,_=o[x(2027)];c<_;c++){const l=o[c];i.push(Cesium__namespace.Cartesian3.fromRadians(l.longitude,l.latitude,s)),r[c]=s}this.wellData[x(t._0x1bcdd3)]=i,this[x(1524)].minimumHeights=r,this[x(2543)](),this._createPit(this.wellData)}_getWellData(){const e={_0x198aaf:558,_0xc2e244:2027,_0x4a372c:1184},t=_0x2397ca;if(this.positions.length===0)return;this[t(476)]=getMinHeight(this.positions);const x=this._minHeight-this.diffHeight,i=[],s=[],o=interPolyline({scene:this[t(e._0x198aaf)].scene,positions:this[t(1091)].concat(this.positions[0]),splitNum:this.style.splitNum}),r=o[t(e._0xc2e244)],c=new Array(r),_=new Array(r);for(let l=0;l<r;l++){const h=Cesium__namespace.Cartographic[t(2145)](o[l]);s.push(new Cesium__namespace.Cartographic(h[t(e._0x4a372c)],h.latitude)),c[l]=x,_[l]=0,i.push(Cesium__namespace.Cartesian3.fromRadians(h.longitude,h.latitude,x))}return{cartoList:s,bottomPositions:i,minimumHeights:c,maximumHeights:_}}_addedHook(e){const t=_0x2397ca;if(!this.show||!this.positions||this.positions.length===0)return;const x=this._getWellData();this.wellData=x,this[t(1343)](x),this.style[t(743)]&&this._addLabel()}_removedHook(){const e=_0x2397ca;super[e(380)](),this._removePit()}[_0x2397ca(2543)](){const e={_0x1a20e7:327},t=_0x2397ca;this._primitive&&(this.primitiveCollection.remove(this._primitive),delete this[t(2417)]),this[t(e._0x1a20e7)]&&(this.primitiveCollection[t(2689)](this._bottomPrimitive),delete this[t(327)])}_createPit(e){const t={_0x132c0d:2434,_0x1b6604:1539,_0x85b27a:3663},x=_0x2397ca;this._createBottomSurface(e.bottomPositions),this[x(558)].hasTerrain?Cesium__namespace.sampleTerrainMostDetailed(this._map[x(3653)],e.cartoList).then(i=>{const s=x;if(!this.isAdded)return;const o=[];for(let r=0,c=i.length;r<c;r++){const _=i[r];o[s(t._0x132c0d)](_[s(3872)])}e[s(t._0x1b6604)]=o,this[s(t._0x85b27a)](e)}):this._createWellWall(e)}[_0x2397ca(3663)](e){const t={_0x2b0874:4010,_0x2aeb60:2417,_0x44ab3f:1539,_0x1105ed:1437},x=_0x2397ca,i=this.style[x(t._0x2b0874)]??1;this._primitive&&this.primitiveCollection[x(2689)](this[x(t._0x2aeb60)]),this[x(2417)]=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace.WallGeometry({positions:e.bottomPositions,maximumHeights:e[x(t._0x44ab3f)],minimumHeights:e[x(2990)]})}),appearance:new Cesium__namespace.MaterialAppearance({material:Cesium__namespace.Material.fromType(Cesium__namespace.Material.ImageType,{image:this.style[x(t._0x1105ed)],color:Cesium__namespace.Color.WHITE.withAlpha(i)}),translucent:i!==1})}),this.primitiveCollection[x(565)](this._primitive),this.bindPickId(this._primitive)}_createBottomSurface(e){const t={_0x5f439b:3953,_0x270fb5:2377,_0x4fce9e:2206},x=_0x2397ca;if(!e[x(2027)])return;const i=this[x(357)].opacity??1;this[x(327)]&&this.primitiveCollection.remove(this._bottomPrimitive),this._bottomPrimitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[x(t._0x5f439b)]({id:this.id,geometry:Cesium__namespace.PolygonGeometry.fromPositions({vertexFormat:Cesium__namespace.VertexFormat.ALL,positions:e,perPositionHeight:!0})}),appearance:new Cesium__namespace[x(t._0x270fb5)]({material:Cesium__namespace[x(t._0x4fce9e)].fromType(Cesium__namespace[x(2206)].ImageType,{image:this.style.imageBottom,color:Cesium__namespace.Color.WHITE.withAlpha(i)}),translucent:i!==1,faceForward:!0,flat:!0})}),this.primitiveCollection.add(this._bottomPrimitive),this.bindPickId(this._bottomPrimitive)}_updateExOpacity(e){const t=_0x2397ca;this._updatePrimitiveOpacity(this[t(327)],e)}_getDrawEntityClass(e,t){const x=_0x2397ca;return e.style.image=e.style.imageBottom,delete e[x(357)].diffHeight,create$4("polygon",e)}}register$4("pit",Pit);const DEF_STYLE$a={dimensions_x:100,dimensions_y:100};class DoubleSidedPlane extends BasePointPrimitive{constructor(e={}){const t={_0x298d4a:357},x=_0x2397ca;e[x(t._0x298d4a)]={...DEF_STYLE$a,...e.style},super(e)}_addedHook(e){const t={_0x44ad90:3805,_0x131904:486,_0x45424f:2651,_0x17e2ca:2206,_0x341610:2134,_0x421934:3071,_0x56830d:488},x=_0x2397ca;if(!this.show)return;const i=[0,-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,.5,.5],s=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],o=[0,1,2,0,2,3,4,5,6,4,6,7],r=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[x(399)][x(t._0x44ad90)],componentsPerAttribute:3,values:new Float64Array(i)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(s)})},indices:new Uint16Array(o),primitiveType:Cesium__namespace[x(t._0x131904)][x(t._0x45424f)],boundingSphere:Cesium__namespace.BoundingSphere.fromVertices(i)}),c=new Cesium__namespace[x(t._0x17e2ca)]({fabric:{type:x(2169),uniforms:{image:e.image,opacity:e.opacity??1,color:Cesium__namespace[x(t._0x341610)].WHITE,speed:e[x(t._0x421934)]||0,flipx:e[x(4055)]??!1,flipy:e.flipy??!1,noWhite:e[x(t._0x56830d)]??!0,globalAlpha:1},source:ImageMaterial}});this._primitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:r}),appearance:new Cesium__namespace.MaterialAppearance({translucent:!0,closed:!0,flat:!0,...this.style,material:c}),modelMatrix:this.modelMatrix,show:this[x(3482)]}),this.primitiveCollection.add(this[x(2417)])}_getModelMatrix(e,t){const x={_0x2e54a9:1046,_0x44bb2f:3803,_0x22e8e9:2404,_0x2e3aad:4005},i=_0x2397ca;if(!e)return Cesium__namespace[i(x._0x2e54a9)].IDENTITY;const s=Cesium__namespace.Math.toRadians(this[i(357)].heading||0),o=Cesium__namespace.Math.toRadians(this.style[i(227)]||0),r=Cesium__namespace.Math.toRadians(this[i(357)].roll||0);this[i(x._0x44bb2f)]=s,this[i(3949)]=o,this[i(3508)]=r;const c=Cesium__namespace.Transforms.headingPitchRollToFixedFrame(e,new Cesium__namespace[i(845)](s,o,r),Cesium__namespace.Ellipsoid.WGS84,this.options[i(2944)]),_=Cesium__namespace.Matrix4[i(x._0x22e8e9)](new Cesium__namespace.Cartesian3(1,this.style[i(x._0x2e3aad)],this.style.dimensions_y));return Cesium__namespace[i(1046)].multiply(c,_,new Cesium__namespace.Matrix4)}[_0x2397ca(1120)](e,t){return create$4(_0x2397ca(2800),e)}}register$4("doubleSidedPlane",DoubleSidedPlane,!0);var ReflectionWaterFS=`uniform sampler2D reflexTexture; // 反射贴图
uniform sampler2D normalTexture; // 法线贴图
uniform float time;

uniform mat4 fixedFrameToEastNorthUpTransform; // 水面的东北天矩阵的逆矩阵

// 从顶点着色器传来的
in vec4 v_worldPosition; // 当前像素的世界坐标
in vec4 v_uv; // 原本的纹理坐标乘以贴图矩阵

// 可配置的参数
uniform float ripple; // 波纹大小（数值越大波纹越密集）
uniform vec4 waterColor; // 水面颜色
uniform float waterAlpha; // 水面透明度
uniform float reflectivity; // 水面反射率
uniform vec3 lightDirection; // 光照方向
uniform float shiny; // 光照强度
uniform float distortion; // 倒影的扭曲程度
uniform float globalAlpha;

const vec3 sunColor = vec3(1.0);

// 获取噪声
// vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
vec4 mars3d_getNoise(sampler2D normalMap, vec2 uv) {
  vec2 uv0 = (uv / 103.0) + vec2(time / 17.0, time / 29.0);
  vec2 uv1 = uv / 107.0 - vec2(time / -19.0, time / 31.0);
  vec2 uv2 = uv / vec2(8907.0, 9803.0) + vec2(time / 101.0, time / 97.0);
  vec2 uv3 = uv / vec2(1091.0, 1027.0) - vec2(time / 109.0, time / -113.0);
  vec4 noise = texture(normalMap, uv0) +
    texture(normalMap, uv1) +
    texture(normalMap, uv2) +
    texture(normalMap, uv3);
  return noise * 0.5 - 1.0;
}

void mars3d_sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {
  vec3 sunDirection = normalize(lightDirection);
  vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));  // 获得太阳对表面法线的反射向量
  float direction = max(0.0, dot(eyeDirection, reflection));  // 当太阳反射方向和眼睛的方向一致时，direction 最大，为 1，当角度大于 90度时最小，最小为 0
  specularColor += pow(direction, shiny) * sunColor * spec;
  diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

    // 通过法线贴图计算新的表面法线
  vec2 transformedSt = materialInput.st * 2.0 - 1.0;  // [0, 1] => [-1, 1]
  vec4 noise = mars3d_getNoise(normalTexture, transformedSt * ripple);
  vec3 surfaceNormal = normalize(noise.xzy);  // [0, +1]，Y up

    // 漫反射光
  vec3 diffuseLight = vec3(0.0);
    // 高光
  vec3 specularLight = vec3(0.0);

    // 获取视线方向（世界坐标）
  vec3 eye = (czm_inverseView * vec4(vec3(0.0), 1.0)).xyz;
    // 获取视线方向（水面的本地坐标）
  eye = (fixedFrameToEastNorthUpTransform * vec4(eye, 1.0)).xyz;
    // 当前像素的本地坐标
  vec3 world = (fixedFrameToEastNorthUpTransform * vec4(v_worldPosition.xyz, 1.0)).xyz;

  vec3 worldToEye = eye - world;  // east, north, up
  worldToEye = vec3(worldToEye.x, worldToEye.z, -worldToEye.y);  // Y up
  vec3 eyeDirection = normalize(worldToEye);

  float spec = 2.0;
  float diffuse = 0.5;
  mars3d_sunLight(surfaceNormal, eyeDirection, shiny, spec, diffuse, diffuseLight, specularLight);

  float distance = length(worldToEye);
  vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortion;
  vec3 reflectionSample = vec3(texture(reflexTexture, (v_uv.xy / v_uv.w) * 0.5 + 0.5 + distortion));

  float theta = max(dot(eyeDirection, surfaceNormal), 0.0);
  float reflectivity = reflectivity;
  float reflectance = mix(reflectivity, 1.0, pow(1.0 - theta, 5.0));

    // surfaceNormal 是以反射平面为 X-Y 平面的，
    // 所以 eyeDirection 也得是以反射平面为 X-Y 平面。
  vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor.rgb;
  vec3 albedo = mix(sunColor * diffuseLight * 0.3 + scatter, vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight, reflectance);
  material.diffuse = albedo.rgb;
  material.alpha = waterAlpha* globalAlpha;

  return material;
}
`,ReflectionWaterVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

uniform mat4 reflectorProjectionMatrix;
uniform mat4 reflectorViewMatrix;
uniform mat4 reflectMatrix;
out vec4 v_worldPosition;  // 世界坐标
out vec4 v_uv;             // 纹理坐标

void main() {
  vec4 p = czm_computePosition();

  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
  v_normalEC = czm_normal * normal;                         // normal in eye coordinates
  v_st = st;

  mat4 modelView = reflectorViewMatrix * reflectMatrix * czm_model;
  modelView[3][0] = 0.0;
  modelView[3][1] = 0.0;
  modelView[3][2] = 0.0;
  v_uv = reflectorProjectionMatrix * modelView * p;
  vec4 positionMC = vec4(position3DHigh + position3DLow, 1.0);
  v_worldPosition = czm_model * positionMC;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;class ReflectionWater extends PolygonPrimitive{get height(){return this._height}set height(e){const t={_0x4282a0:1099,_0x54f178:295,_0x1e685b:1227,_0x2782d4:2883,_0x5c0e71:2883,_0x383689:230,_0x348708:2883,_0x331944:2883},x=_0x2397ca;this._height=e;const i=Cesium__namespace.Cartographic.fromCartesian(this[x(t._0x4282a0)]),s=Cesium__namespace.Cartesian3.fromRadians(i.longitude,i.latitude,this._height),o=Cesium__namespace[x(t._0x54f178)].subtract(s,this._originalreflectorWorldPosition,new Cesium__namespace.Cartesian3),r=Cesium__namespace.Matrix4.fromTranslation(o);this._primitive.modelMatrix=r,this[x(1227)]=s,this._normal=Cesium__namespace.Ellipsoid.WGS84[x(3397)](this[x(t._0x1e685b)]),this._waterPlane=Cesium__namespace.Plane.fromPointNormal(this[x(1227)],this._normal),this._reflectMatrix=new Cesium__namespace.Matrix4(-2*this._waterPlane.normal.x*this._waterPlane[x(t._0x2782d4)].x+1,-2*this._waterPlane.normal.x*this[x(2561)].normal.y,-2*this._waterPlane.normal.x*this._waterPlane.normal.z,-2*this._waterPlane[x(t._0x5c0e71)].x*this[x(2561)][x(t._0x383689)],-2*this._waterPlane.normal.y*this[x(2561)].normal.x,-2*this[x(2561)].normal.y*this[x(2561)].normal.y+1,-2*this._waterPlane[x(t._0x348708)].y*this._waterPlane.normal.z,-2*this._waterPlane.normal.y*this._waterPlane.distance,-2*this._waterPlane[x(2883)].z*this._waterPlane.normal.x,-2*this._waterPlane.normal.z*this._waterPlane[x(t._0x331944)].y,-2*this._waterPlane.normal.z*this._waterPlane.normal.z+1,-2*this[x(2561)].normal.z*this._waterPlane.distance,0,0,0,1)}[_0x2397ca(353)](e,t){const x={_0x4fff33:4010,_0x33b6cf:3280,_0x486cbe:2554,_0x20de62:4010,_0xd34d9a:3603,_0x46a740:639,_0x282f35:614,_0x4ce9fa:3872},i=_0x2397ca;Cesium__namespace.defined(t.color)&&(this._material.uniforms[i(2851)]=getCesiumColor(e.color,Cesium__namespace.Color.fromCssColorString("#001e0f"))),Cesium__namespace.defined(t[i(x._0x4fff33)])&&(this[i(x._0x33b6cf)][i(x._0x486cbe)].waterAlpha=e[i(x._0x20de62)]),Cesium__namespace.defined(t[i(x._0xd34d9a)])&&(this._material[i(2554)].reflectivity=e.reflectivity),Cesium__namespace.defined(t.lightDirection)&&(this._material[i(2554)].lightDirection=e.lightDirection),Cesium__namespace.defined(t.shiny)&&(this._material.uniforms.shiny=e.shiny),Cesium__namespace[i(x._0x46a740)](t.distortion)&&(this._material[i(x._0x486cbe)][i(x._0x282f35)]=e.distortion),Cesium__namespace.defined(t.height)&&(this[i(x._0x4ce9fa)]=t.height)}_addedHook(e){const t=_0x2397ca;!this.show||!this.positions||this.positions.length===0||(this._bindFun(),this[t(3322)](e),this[t(2171)]())}_removedHook(){this.unbindUpdateEvent(),this._primitive&&(this.primitiveCollection.remove(this._primitive),delete this._primitive),this._destroyResource(),this._unbindFun()}_createPrimitive(e){const t={_0xd0de00:3872,_0x3483fb:2561,_0x3914f6:2883,_0x3e3f08:558,_0x4c2a9b:2699,_0x9f40a8:3167,_0x7b1f3a:3482,_0x351d54:3629},x=_0x2397ca,i=this._conversionStyle(e);i.vertexFormat=Cesium__namespace.EllipsoidSurfaceAppearance.POSITION_NORMAL_AND_ST;let s=0;Cesium__namespace.defined(this.style.height)?s=this.style[x(t._0xd0de00)]:s=getMaxHeight(this.positions),this[x(1809)]=s,this._reflectorWorldPosition=this.center,this[x(1099)]=this._reflectorWorldPosition.clone(),this._normal=Cesium__namespace.Ellipsoid.WGS84.geodeticSurfaceNormal(this._reflectorWorldPosition),this[x(t._0x3483fb)]=Cesium__namespace.Plane.fromPointNormal(this._reflectorWorldPosition,this._normal),this._reflectMatrix=new Cesium__namespace[x(1046)](-2*this._waterPlane.normal.x*this._waterPlane.normal.x+1,-2*this._waterPlane.normal.x*this._waterPlane[x(t._0x3914f6)].y,-2*this._waterPlane.normal.x*this._waterPlane.normal.z,-2*this._waterPlane[x(t._0x3914f6)].x*this._waterPlane.distance,-2*this[x(2561)].normal.y*this._waterPlane.normal.x,-2*this[x(2561)].normal.y*this[x(2561)].normal.y+1,-2*this._waterPlane.normal.y*this._waterPlane.normal.z,-2*this._waterPlane.normal.y*this._waterPlane.distance,-2*this._waterPlane[x(2883)].z*this._waterPlane[x(t._0x3914f6)].x,-2*this[x(2561)].normal.z*this._waterPlane[x(2883)].y,-2*this._waterPlane.normal.z*this._waterPlane.normal.z+1,-2*this._waterPlane.normal.z*this[x(2561)].distance,0,0,0,1),this._reflectorViewMatrix=Cesium__namespace.Matrix4.IDENTITY.clone(),this[x(3641)]=Cesium__namespace.Matrix4.IDENTITY.clone();const o=this[x(t._0x3e3f08)].scene.context;this._createFramebuffer(o,o[x(2549)],o.drawingBufferHeight,this._map.scene.highDynamicRange);const r=new Cesium__namespace.Texture({context:o,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,0,0,255])},sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap.REPEAT,wrapT:Cesium__namespace.TextureWrap.REPEAT,minificationFilter:Cesium__namespace[x(566)].LINEAR,magnificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR})});r.type="sampler2D";const c=Cesium__namespace[x(t._0x4c2a9b)].fromFramebuffer({context:o,framebuffer:this[x(430)]});c[x(968)]="sampler2D";const _=new Cesium__namespace.Material({fabric:{type:x(821),uniforms:{waterColor:getCesiumColor(e.color,Cesium__namespace[x(2134)].fromCssColorString("#001e0f")),waterAlpha:e.opacity??.9,globalAlpha:1,ripple:e.ripple??50,reflectivity:e.reflectivity??.5,lightDirection:e.lightDirection??new Cesium__namespace.Cartesian3(0,0,1),shiny:e.shiny??100,distortion:e[x(614)]??3.7,normalTexture:r,reflexTexture:c,time:0,fixedFrameToEastNorthUpTransform:Cesium__namespace.Matrix4[x(2221)](this._getFixedFrameToEastNorthUpTransformFromWorldMatrix())},source:ReflectionWaterFS},translucent:!1,minificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium__namespace[x(783)].LINEAR});addTextureUniform({material:_,context:o,uniformName:x(t._0x9f40a8),image:e.normalMap??x(447)}),this._material=_;const l=new Cesium__namespace.MaterialAppearance({material:_,vertexShaderSource:ReflectionWaterVS,translucent:!0});l.uniforms={},l.uniforms.reflectMatrix=Cesium__namespace.Matrix4[x(2221)](this._reflectMatrix),l.uniforms[x(1977)]=Cesium__namespace.Matrix4.toArray(this._reflectorProjectionMatrix),l.uniforms.reflectorViewMatrix=Cesium__namespace.Matrix4.toArray(this._reflectorViewMatrix);const h={geometryInstances:this._createGeometryInstance(i),appearance:l,asynchronous:!1,show:this[x(t._0x7b1f3a)]};this._primitive=this.primitiveCollection.add(new Cesium__namespace[x(t._0x351d54)](h))}update(e){const t={_0x5a44c8:558,_0x562a44:3399,_0x249df4:830},x=_0x2397ca,i=this[x(t._0x5a44c8)][x(t._0x562a44)],s=i[x(1249)].camera,o=i[x(t._0x249df4)],r=i.globe.show,c=i.globe.showSkirts,_=i.logarithmicDepthBuffer;if(!this[x(1095)](i._defaultView.camera)){this._primitive.show=!1;return}this._primitive.show=!1,i._defaultView.camera=this._virtualCamera,i[x(830)]=void 0,i.globe.show=!1,i.globe.showSkirts=!1,i.logarithmicDepthBuffer=!1;const l=i.context,h=l.drawingBufferWidth,d=l.drawingBufferHeight,u=i.highDynamicRange;this._createFramebuffer(l,h,d,u),render(i,this._colorFramebuffer);const m=this._primitive.appearance,f=Cesium__namespace.Texture.fromFramebuffer({context:l,framebuffer:this._colorFramebuffer});f.type="sampler2D",this[x(3280)].uniforms.reflexTexture=f,this._material.uniforms.time=performance.now()/1e3,this[x(3280)].uniforms.fixedFrameToEastNorthUpTransform=Cesium__namespace.Matrix4[x(2221)](this._getFixedFrameToEastNorthUpTransformFromWorldMatrix()),m.uniforms.reflectMatrix=Cesium__namespace.Matrix4[x(2221)](this._reflectMatrix),m.uniforms.reflectorProjectionMatrix=Cesium__namespace.Matrix4.toArray(this._reflectorProjectionMatrix),m.uniforms[x(1998)]=Cesium__namespace.Matrix4.toArray(this._reflectorViewMatrix),this[x(2417)].show=!0,i._defaultView.camera=s,i.shadowMap=o,i.globe.show=r,i[x(679)][x(2333)]=c,i.logarithmicDepthBuffer=_}_updateVirtualCamera(e){const t={_0x411a89:295,_0x4e3514:1042,_0xe65f96:1227,_0x3c7848:664,_0x47e68e:961,_0x5e69d8:1943,_0x3d3abf:565,_0x2dc7ea:295,_0x4d49b2:565,_0x949cf4:295,_0xdb41b:2883,_0x437d3c:1046},x=_0x2397ca,i=new Cesium__namespace.Cartesian3(0,0,-1);let s=new Cesium__namespace[x(t._0x411a89)];this._virtualCamera=Cesium__namespace[x(t._0x4e3514)].clone(e,this._virtualCamera);const o=e.positionWC.clone();let r=Cesium__namespace.Cartesian3.subtract(this[x(t._0xe65f96)],o,new Cesium__namespace.Cartesian3);if(Cesium__namespace.Cartesian3[x(t._0x3c7848)](r,this._normal)>0)return!1;r=getReflectVector(r,this[x(t._0x47e68e)]),Cesium__namespace.Cartesian3.negate(r,r),Cesium__namespace.Cartesian3[x(565)](r,this._reflectorWorldPosition,r),this._virtualCamera.position=r.clone(),Cesium__namespace[x(295)][x(565)](e[x(t._0x5e69d8)],o,i),Cesium__namespace.Cartesian3.subtract(this._reflectorWorldPosition,i,s),s=getReflectVector(s,this._normal),Cesium__namespace.Cartesian3.negate(s,s),Cesium__namespace.Cartesian3[x(t._0x3d3abf)](s,this._reflectorWorldPosition,s),this._virtualCamera[x(2165)]=Cesium__namespace.Cartesian3.subtract(s,this._virtualCamera.position,new Cesium__namespace.Cartesian3),Cesium__namespace.Cartesian3.normalize(this._virtualCamera.direction,this._virtualCamera.direction),Cesium__namespace.Cartesian3.add(e.upWC,o,i),Cesium__namespace.Cartesian3.subtract(this._reflectorWorldPosition,i,s),s=getReflectVector(s,this[x(961)]),Cesium__namespace[x(t._0x2dc7ea)].negate(s,s),Cesium__namespace.Cartesian3[x(t._0x4d49b2)](s,this._reflectorWorldPosition,s),this._virtualCamera.up=Cesium__namespace.Cartesian3.subtract(s,this._virtualCamera.position,new Cesium__namespace[x(t._0x949cf4)]),Cesium__namespace.Cartesian3.normalize(this._virtualCamera.up,this._virtualCamera.up),this._reflectorProjectionMatrix=this._virtualCamera[x(1209)][x(1394)],this._reflectorViewMatrix=this._virtualCamera.viewMatrix;const c=Cesium__namespace.Plane[x(3502)](this[x(1227)],this._normal);Cesium__namespace.Plane.transform(c,this._virtualCamera.viewMatrix,c);const _=new Cesium__namespace[x(662)](c.normal.x,c[x(t._0xdb41b)].y,c.normal.z,c.distance),l=Cesium__namespace.Matrix4.clone(this._virtualCamera.frustum[x(1394)]),h=new Cesium__namespace[x(662)]((Math.sign(_.x)+l[8])/l[0],(Math.sign(_.y)+l[9])/l[5],-1,(1+l[10])/l[14]);Cesium__namespace.Cartesian4.multiplyByScalar(_,2/Cesium__namespace[x(662)].dot(_,h),_);const d=0;return l[2]=_.x,l[6]=_.y,l[10]=_.z+1-d,l[14]=_.w,this._virtualCamera.frustum.customProjectionMatrix=Cesium__namespace[x(t._0x437d3c)].clone(l),!0}_getFixedFrameToEastNorthUpTransformFromWorldMatrix(){const e=_0x2397ca,t=Cesium__namespace.Transforms[e(871)](this[e(1227)]);return Cesium__namespace.Matrix4.inverse(t,new Cesium__namespace.Matrix4)}_createFramebuffer(e,t,x,i){const s={_0x329488:3872,_0x5af54e:254,_0x1fdf1a:926,_0x2fc1a9:2699},o=_0x2397ca,r=this._colorTexture;if(Cesium__namespace.defined(r)&&r.width===t&&r[o(s._0x329488)]===x&&this[o(2049)]===i)return;this._destroyResource(),this._hdr=i;let c;i?c=e[o(1702)]?Cesium__namespace.PixelDatatype.HALF_FLOAT:Cesium__namespace.PixelDatatype[o(s._0x5af54e)]:c=Cesium__namespace.PixelDatatype[o(3046)],this._colorTexture=new Cesium__namespace[o(2699)]({context:e,width:t,height:x,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:c,sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[o(3305)],wrapT:Cesium__namespace.TextureWrap[o(3305)],minificationFilter:Cesium__namespace.TextureMinificationFilter[o(s._0x1fdf1a)],magnificationFilter:Cesium__namespace[o(783)].LINEAR})}),this[o(2216)]=new Cesium__namespace[o(s._0x2fc1a9)]({context:e,width:t,height:x,pixelFormat:Cesium__namespace.PixelFormat.DEPTH_STENCIL,pixelDatatype:Cesium__namespace.PixelDatatype[o(1292)]}),this._colorFramebuffer=new Cesium__namespace[o(858)]({context:e,colorTextures:[this[o(2714)]],depthStencilTexture:this._depthStencilTexture,destroyAttachments:!1})}_destroyResource(){const e={_0x2ac6a3:2216},t=_0x2397ca;this._colorTexture&&this[t(2714)].destroy(),this._colorTexture=void 0,this[t(e._0x2ac6a3)]&&this[t(2216)].destroy(),this[t(2216)]=void 0,this._colorFramebuffer&&this._colorFramebuffer.destroy(),this._colorFramebuffer=void 0}_bindFun(){const e={_0x34fbe2:3069,_0x5dff62:2121,_0x1824d1:3314},t={_0x2a5084:1046,_0xb1e053:1394,_0x53c296:1520,_0x428742:639,_0x37bf21:1448,_0x50fba8:3922,_0x8cdf05:2937},x=_0x2397ca;this._UniformState_updateFrustum_old=Cesium__namespace.UniformState.prototype[x(1341)],Cesium__namespace.UniformState.prototype.updateFrustum=function(s){const o=x;Cesium__namespace[o(t._0x2a5084)].clone(Cesium__namespace.defaultValue(s.customProjectionMatrix,s[o(t._0xb1e053)]),this._projection),this._inverseProjectionDirty=!0,this._viewProjectionDirty=!0,this._inverseViewProjectionDirty=!0,this._modelViewProjectionDirty=!0,this[o(t._0x53c296)]=!0,Cesium__namespace[o(t._0x428742)](s.infiniteProjectionMatrix)&&(Cesium__namespace[o(1046)].clone(s.infiniteProjectionMatrix,this[o(t._0x37bf21)]),this._modelViewInfiniteProjectionDirty=!0),this._currentFrustum.x=s.near,this[o(t._0x50fba8)].y=s.far,this._farDepthFromNearPlusOne=s.far-s.near+1,this._log2FarDepthFromNearPlusOne=Cesium__namespace.Math.log2(this._farDepthFromNearPlusOne),this[o(555)]=1/this._log2FarDepthFromNearPlusOne,Cesium__namespace[o(639)](s._offCenterFrustum)&&(s=s._offCenterFrustum),this._frustumPlanes.x=s.top,this._frustumPlanes.y=s.bottom,this._frustumPlanes.z=s[o(t._0x8cdf05)],this._frustumPlanes.w=s[o(1401)]};const i=Cesium__namespace.PerspectiveFrustum.prototype[x(e._0x34fbe2)];Cesium__namespace.PerspectiveFrustum[x(e._0x5dff62)].clone=function(s){return s=i.bind(this)(s),s.customProjectionMatrix=this.customProjectionMatrix,s},this[x(e._0x1824d1)]=i}_unbindFun(){const e={_0x3ab8fd:274,_0x2944a7:2121,_0xc52732:3069},t=_0x2397ca;Cesium__namespace[t(e._0x3ab8fd)][t(e._0x2944a7)][t(1341)]=this._UniformState_updateFrustum_old,Cesium__namespace.PerspectiveFrustum.prototype[t(e._0xc52732)]=this._PerspectiveFrustum_clone_old}_getDrawEntityClass(e,t){return e.style.materialType="Water",create$4("polygon",e)}}register$4(_0x2397ca(3688),ReflectionWater);const scratchBackgroundColor=new Cesium__namespace.Color,renderTilesetPassState=new Cesium__namespace[_0x2397ca(304)]({pass:Cesium__namespace[_0x2397ca(2535)].RENDER});function render(n,e){const t={_0x228b76:2355,_0x5717cb:2049,_0x3f49d8:444,_0x1ea897:2455,_0x815c93:1653,_0x42ad9a:881,_0x1159cd:3416,_0x406562:2655,_0x537264:2434,_0x44dceb:901,_0x1bd030:679,_0x395f94:1117,_0x76c388:3846},x=_0x2397ca,i=n._frameState,s=n.context,o=s.uniformState,r=n._defaultView;n._view=r,n.updateFrameState(),i[x(2764)].render=!0,i.passes.postProcess=n.postProcessStages[x(t._0x228b76)],i.tilesetPassState=renderTilesetPassState;let c=n[x(2238)]??Cesium__namespace[x(2134)].BLACK;n[x(t._0x5717cb)]&&(c=Cesium__namespace.Color.clone(c,scratchBackgroundColor),c[x(t._0x3f49d8)]=Math.pow(c.red,n[x(2455)]),c.green=Math.pow(c[x(1907)],n[x(t._0x1ea897)]),c.blue=Math.pow(c.blue,n.gamma)),i.backgroundColor=c,n.fog.update(i),o[x(t._0x815c93)](i);const _=n.shadowMap;Cesium__namespace.defined(_)&&_.enabled&&(!Cesium__namespace[x(639)](n[x(t._0x42ad9a)])||n.light instanceof Cesium__namespace.SunLight?Cesium__namespace.Cartesian3[x(t._0x1159cd)](o[x(t._0x406562)],n._shadowMapCamera[x(2165)]):Cesium__namespace.Cartesian3.clone(n.light.direction,n._shadowMapCamera.direction),i.shadowMaps[x(t._0x537264)](_)),n._computeCommandList.length=0,n._overlayCommandList.length=0;const l=r.viewport;l.x=0,l.y=0,l.width=s.drawingBufferWidth,l.height=s[x(t._0x44dceb)];const h=r.passState;h[x(3557)]=e,h[x(1561)]=void 0,h.scissorTest=void 0,h.viewport=Cesium__namespace.BoundingRectangle.clone(l,h.viewport),Cesium__namespace.defined(n[x(t._0x1bd030)])&&n.globe.beginFrame(i),n.updateEnvironment(),n.updateAndExecuteCommands(h,c),n[x(t._0x395f94)](h),Cesium__namespace.defined(n.globe)&&(n.globe[x(3705)](i),!n.globe[x(t._0x76c388)]&&(n[x(3793)]=!0)),s[x(3705)]()}class EditPolygonGrid extends EditPoly{get hasClosure(){return this._graphic.hasClosure??!0}get clampToGround(){return!1}bindDraggers(){const e={_0x2a1b68:410,_0x22e16f:2027},t={_0x307d17:760},x=_0x2397ca,i=this[x(e._0x2a1b68)](this.positions);for(let s=0,o=i[x(e._0x22e16f)];s<o;s++){const r=this.updatePositionsHeightByAttr(i[s]),c=this.createDragger({position:r,onDrag:(_,l)=>{const h=x;l=this.updatePositionsHeightByAttr(l),_[h(t._0x307d17)]=l,i[_.index]=l,this.updateGridPositions(l,_[h(3124)])}});c.index=s,this.draggers.push(c)}}}const DEF_STYLE$9={opacity:1,globalAlpha:1};class VideoPrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x4e5f86:1633},x=_0x2397ca;e.style={...DEF_STYLE$9,...e.style},super(e),this[x(t._0x4e5f86)]=4,this.maxPointNum=4,this._grids=e.grids??4,this[x(1750)]=!1,this._reverseROI=!1,this._roiUV=[[0,1],[1,1],[1,0],[0,0]]}get czmObject(){return this._primitive}get rois(){return this.options.rois}set rois(e){const t={_0x4e36ed:1750,_0xdf3921:2360,_0x5aba63:1653},x=_0x2397ca;if(this.options.rois=e,(e==null?void 0:e.length)>0){let i=[];e.forEach(s=>{i=i.concat([s[0],s[1],0,0])}),this._roiUV=i,this[x(t._0x4e36ed)]=!0}else this[x(t._0xdf3921)]=[[0,1],[1,1],[1,0],[0,0]],this._useROI=!1;this[x(t._0x5aba63)]()}[_0x2397ca(2670)](e){const t={_0x15fcb9:3595},x=_0x2397ca,i=this.positions;if(!this.show||!i||i.length===0)return;this.updateVideoContainer();const{positions:s,uv:o,indice:r}=getGridPositions(i,this._grids);this._positions_grid=s,this._uv=o,this._indice=r,this._primitive&&(this.primitiveCollection.remove(this[x(2417)]),delete this._primitive),this[x(2417)]=this._createVideoPrimitive(),this[x(1425)](this._primitive),this[x(t._0x15fcb9)].add(this[x(2417)])}[_0x2397ca(380)](){this[_0x2397ca({_0x2d1b19:1211}._0x2d1b19)](),this._primitive&&(this.primitiveCollection.remove(this._primitive),delete this._primitive)}redraw(e){const t={_0x17b84d:3482,_0x203339:2670},x=_0x2397ca;return this[x(3401)]&&this[x(t._0x17b84d)]&&this[x(t._0x203339)](e||this.style),this}update(){const e={_0x4e7fdc:2417},t=_0x2397ca;this[t(2417)]&&this.primitiveCollection.remove(this[t(e._0x4e7fdc)]),this._primitive=this._createVideoPrimitive(),this.primitiveCollection.add(this._primitive)}_createVideoPrimitive(){const e={_0x43e89b:3805,_0x51fbe:3907,_0x449c19:1779,_0x15a937:1437,_0x2c1ae8:527,_0xa14e46:2360,_0x4d8614:2027,_0x409000:1147,_0x5521cd:3086,_0x3bd62a:3773},t=_0x2397ca,x=this[t(1947)].length,i=new Float64Array(x*3);for(let d=0;d<x;++d)i[d*3]=this._positions_grid[d].x,i[d*3+1]=this._positions_grid[d].y,i[d*3+2]=this._positions_grid[d].z;const s=new Cesium__namespace[t(1955)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[t(e._0x43e89b)],componentsPerAttribute:3,values:i}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(this[t(3586)])})},indices:new Uint16Array(this[t(e._0x51fbe)]),primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere.fromVertices(i)}),o=new Cesium__namespace[t(3953)]({id:this.id,geometry:s,attributes:{show:new Cesium__namespace.ShowGeometryInstanceAttribute(this.show),distanceDisplayCondition:new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute(Number(this[t(357)].distanceDisplayCondition_near??0),Number(this.style.distanceDisplayCondition_far??Number.MAX_VALUE))}}),r=Cesium__namespace[t(2206)][t(e._0x449c19)](t(2169));r.uniforms[t(e._0x15a937)]=this[t(e._0x2c1ae8)];const c=new Float32Array(this[t(e._0xa14e46)]),_=c[t(e._0x4d8614)]/4;r.uniforms[t(e._0x409000)]=new Cesium__namespace.Texture({context:this._map.scene[t(2928)],source:{width:_,height:1,arrayBufferView:c},pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT}),r[t(e._0x5521cd)].roiUV0=()=>r[t(2554)].roiUV,r._uniforms[t(e._0x3bd62a)]=()=>this[t(1750)],r[t(3086)].reverseROI=()=>this._reverseROI,r._uniforms.opacity=()=>this.style.opacity,r._uniforms.globalAlpha=()=>this.style.globalAlpha??1,r.shaderSource=`
      const int WIDTH = `+_+`;
      uniform sampler2D image_0;
      uniform sampler2D roiUV0;
      uniform bool useROI;
      uniform bool reverseROI;
      uniform float opacity;
      uniform float globalAlpha;

      // 获取指定的由UV坐标定义的poi边界点
      vec2 getROIuv(sampler2D roi, int index){
        vec2 poiuv = texture(roi, vec2((float(index) + 0.5) / float(WIDTH), 0)).xy;
        return poiuv;
      }

      // 判断UV坐标在不在范围内
      bool isInside(vec2 uv, sampler2D roi){
          bool ifInside = false;
          float u = uv.x;
          float v = uv.y;
          vec2 sP = getROIuv(roi, 0);
          for (int i = 0; i < 100000; i++){
              if(i >= WIDTH) break;
              int nextIndex = i + 1;
              nextIndex = nextIndex == WIDTH ? 0 : nextIndex;
              vec2 eP = getROIuv(roi, nextIndex);
              if((sP.x == u && sP.y == v) || (eP.x == u && eP.y == v)){
                  return true;
              } else if((sP.y < v && eP.y >= v) || (sP.y >= v && eP.y < v)) {
                  float x = sP.x + (v - sP.y) * (eP.x - sP.x) / (eP.y - sP.y);
                  if(x == u){
                    return true;
                  } else if(x > u) {
                    ifInside = !ifInside;
                  }
              }
            sP = eP;
          }
          return ifInside;
      }

      czm_material getMaterial(czm_materialInput materialInput){
        czm_material material = czm_getDefaultMaterial(materialInput);
        vec2 uv = materialInput.st;
        vec4 imageColor = texture(image_0, uv);
        material.diffuse = imageColor.rgb;
        material.alpha = imageColor.a * opacity * globalAlpha;
        return material;
      }

      czm_material czm_getMaterial(czm_materialInput materialInput) {
        if(useROI){
          vec2 uv = materialInput.st;
          bool inside = isInside(uv, roiUV0);
          if(inside != reverseROI) {
            return getMaterial(materialInput);
          } else {
            discard;
          }
        } else {
          return getMaterial(materialInput);
        }
      }
      `;const l={geometryInstances:o,asynchronous:!1,appearance:new Cesium__namespace.MaterialAppearance({...this.style,material:r})},h=new Cesium__namespace.Primitive(l);return this.bindPickId(h),h}updateVideoContainer(){const e={_0x415267:3405,_0x218149:962},t=_0x2397ca;var x;this[t(1267)]&&(x=this._videoContainer)!==null&&x!==void 0&&x[t(3405)]&&(this._videoContainer[t(e._0x415267)][t(e._0x218149)](this[t(527)]),delete this._hasRemoveElement,delete this._videoContainer),this[t(357)].url?(this._videoContainer=createVideo(this.style.url,this.style[t(999)],"",document.body),this._videoContainer[t(357)][t(3378)]="none",this._hasRemoveElement=!0):this.style[t(571)]&&(this._videoContainer=this.style[t(571)])}_getDrawEntityClass(e,t){const x={_0x328884:2248,_0x4ffdf4:2169},i=_0x2397ca;return e.minPointNum=4,e.maxPointNum=4,e[i(357)][i(x._0x328884)]=i(x._0x4ffdf4),e.style.materialOptions={url:this._videoContainer},create$4("polygon",e)}_startEditingHook(e){const t={_0x17a426:1019},x=_0x2397ca;this[x(1019)]&&(e._hierarchy=this[x(t._0x17a426)])}get isEditingGrid(){return this._enabledEditGrid}[_0x2397ca(637)](){const e={_0x7698ca:2586},t=_0x2397ca;if(this._enabledEditGrid)return this;if(this._enabledEditGrid=!0,!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this.stopEditing(),this[t(558)].mouseEvent.noPickEntity=this._entity,this._map.mouseEvent.enabledMoveTarget=!1,!this.editingGrid&&(this[t(e._0x7698ca)]=new EditPolygonGrid(this),this.editingGrid.getGridPositions=x=>this._positions_grid,this.editingGrid.updateGridPositions=(x,i)=>{this._positions_grid[i]=x,this.update()}),this.editingGrid.activate&&this.editingGrid.activate()}stopEditingGrid(){const e=_0x2397ca;var t;if(!this._enabledEditGrid||!this[e(3401)])return this;(t=this.editingGrid)!==null&&t!==void 0&&t.disable&&this.editingGrid.disable(),this._map&&(this[e(558)].closeSmallTooltip(),this._map[e(1508)].noPickEntity=null,this._map.mouseEvent.enabledMoveTarget=!0),this[e(2765)]=!1}}register$4("videoPrimitive",VideoPrimitive);function getGridPositions(n,e){const t={_0xc92ec0:295,_0x5abb87:230,_0x457f43:960,_0x2cf855:565,_0x342e6e:295},x=_0x2397ca,i=[],s=[],o=[],r=n[0],c=n[1],_=n[2],l=n[3],h=Cesium__namespace.Cartesian3.distance(r,l),d=Cesium__namespace[x(t._0xc92ec0)][x(t._0x5abb87)](c,_),u=h/e,m=d/e,f=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(l,r,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),g=Cesium__namespace.Cartesian3[x(t._0x457f43)](Cesium__namespace.Cartesian3.subtract(_,c,new Cesium__namespace[x(295)]),new Cesium__namespace.Cartesian3),b=1/e;for(let y=0;y<=e;y++)for(let C=0;C<=e;C++){const v=Cesium__namespace.Cartesian3[x(t._0x2cf855)](Cesium__namespace[x(t._0xc92ec0)].multiplyByScalar(f,y*u,new Cesium__namespace.Cartesian3),r,new Cesium__namespace[x(295)]),M=Cesium__namespace[x(295)].add(Cesium__namespace.Cartesian3.multiplyByScalar(g,y*m,new Cesium__namespace.Cartesian3),c,new Cesium__namespace.Cartesian3),w=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[x(295)].subtract(M,v,new Cesium__namespace[x(295)]),new Cesium__namespace.Cartesian3),H=Cesium__namespace[x(295)][x(230)](M,v),D=H/e,F=Cesium__namespace.Cartesian3.add(Cesium__namespace[x(t._0xc92ec0)].multiplyByScalar(w,C*D,new Cesium__namespace.Cartesian3),v,new Cesium__namespace[x(t._0x342e6e)]);i.push(C*b),i[x(2434)](1-y*b),s[x(2434)](F)}for(let y=0;y<e;y++)for(let C=0;C<e;C++){const v=y*(e+1)+C,M=(y+1)*(e+1)+C;o.push(v),o.push(v+1),o.push(M+1),o.push(M+1),o.push(M),o.push(v)}return{uv:i,indice:o,positions:s}}class BaseCombine extends BasePrimitive{get[_0x2397ca(1257)](){return this.options.instances||[]}set instances(e){const t={_0x546c1e:3044},x=_0x2397ca;this[x(t._0x546c1e)][x(1257)]=e,this._rectangle=null,this.redraw()}_addedHook(e){this.show&&(super._addedHook(e),this._layer.on(EventType.show,this._layer_showHandler,this))}[_0x2397ca(380)](){this._layer.off(EventType.show,this._layer_showHandler,this),super._removedHook()}_layer_showHandler(){this[_0x2397ca(2921)]()}getPickedObject(e){const t=e.split("#");if(t.length!==2)return null;const x=Number(t[1]);return this.instances[x]}createPickId(e){return this.id+"#"+e}[_0x2397ca(2195)](e,t){const x=_0x2397ca;if(this.options.geometryInstances)return this[x(3044)].geometryInstances;const i=[],s=this.instances;for(let o=0;o<s.length;o++){const r=s[o];r.id=this.createPickId(o),i[x(2434)](r)}return i}getRectangle(e){const t={_0x37f878:1257,_0x45d1a5:1169,_0x110687:425,_0x4b6cb5:1091,_0x2a7fd5:3768},x=_0x2397ca;if(!this._rectangle){const i=this.options[x(t._0x37f878)]||[];for(let s=0;s<i.length;s++){const o=i[s];o.position&&(o.position=LngLatPoint.parse(o.position).toCartesian(),this._unionRectangle([o.position])),o[x(1091)]&&(o[x(1091)]=LngLatArray[x(t._0x45d1a5)](o.positions),this[x(t._0x110687)](o[x(t._0x4b6cb5)]))}}return e!=null&&e[x(t._0x2a7fd5)]?formatRectangle(this._rectangle):this._rectangle}_unionRectangle(e){const t={_0x9126de:639,_0x5a0954:1784},x=_0x2397ca,i=Cesium__namespace.Rectangle.fromCartesianArray(e);Cesium__namespace[x(t._0x9126de)](i)&&(Cesium__namespace.defined(this[x(t._0x5a0954)])?this._rectangle=Cesium__namespace.Rectangle[x(3519)](i,this._rectangle):this._rectangle=i)}[_0x2397ca(1180)](){const e={_0xce7e37:3044,_0x3d97c3:357,_0x16e389:760,_0x22d60e:2221,_0x402713:1091},t=_0x2397ca,x={...getAttrVal(this.options,{onlySimpleType:!0}),type:this.type};this.options.style&&(x.style=this._style2JsonBase(this[t(e._0xce7e37)][t(e._0x3d97c3)],!1));const i=[];for(let s=0;s<this.instances.length;s++){const o=this.instances[s],r={attr:o.attr,style:this._style2JsonBase(o[t(357)],!1)};o[t(e._0x16e389)]?r.position=LngLatPoint[t(e._0x22d60e)](o[t(760)]):o.positions&&(r[t(e._0x402713)]=LngLatArray[t(2221)](o.positions)),i.push(r)}return x[t(1257)]=i,this[t(1018)]&&this._toJSON_Ex(x),x}toGeoJSON(e){const t={_0x1ebd4d:4036,_0x593f74:2221},x=_0x2397ca,i=[];for(let s=0;s<this.instances.length;s++){const o=this.instances[s],r={type:"Feature",properties:{...o.attr,type:this.type,style:this._style2JsonBase(o.style,!0)}};this._getGeoJsonGeometry?r.geometry=this[x(t._0x1ebd4d)](o,e):o.position?r.geometry={type:"Point",coordinates:LngLatPoint[x(t._0x593f74)](o.position,e==null?void 0:e[x(2381)])}:o.positions&&(r.geometry={type:"LineString",coordinates:LngLatArray.toArray(o.positions,e==null?void 0:e.noAlt)}),i.push(r)}return i}flyTo(e){const t=_0x2397ca,x=this.getRectangle();return this._map&&x?this._map.flyToExtent(x,e):Promise[t(3863)](!1)}setColorStyle(e,t){if(Cesium__namespace.defined(t))this._setColorStyleItem(t,e);else for(let x=0;x<this.options.instances.length;x++)this._setColorStyleItem(x,e)}_setColorStyleItem(e,t){const x={_0x4de76f:1695},i=_0x2397ca,s=this.options.instances[e]||{};s.style?s.style={...s.style,...t}:s.style=t;const o=this[i(x._0x4de76f)](this.createPickId(e));if(o){const r=getColorByStyle({...this.style,...s.style});o.color=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(r)}}}BaseCombine.isCombine=!0;var FlatBillboardFS=_0x2397ca(3667),FlatBillboardVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 color;
in vec2 st;
in float batchId;

uniform mat4 mars_orthographicMatrix;
uniform mat4 mars_viewMatrix;
uniform vec2 mars_resolution;
uniform float mars_pointSize;
out vec2 v_st;
out vec3 v_worldPos;

vec4 transform(mat4 m, mat4 v, vec3 coord) {
  return m * v * vec4(coord, 1.0);
}
vec2 project(vec4 device) {
  vec3 device_normal = device.xyz / device.w;
  vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;
  return clip_pos * mars_resolution;
}
vec4 unproject(vec2 screen, float z, float w) {
  vec2 clip_pos = screen / mars_resolution;
  vec2 device_normal = clip_pos * 2.0 - 1.0;
  return vec4(device_normal * w, z, w);
}

void main() {
  v_st = st;
  vec3 currP = position3DHigh.xyz + position3DLow.xyz;
  v_worldPos = currP;
  vec4 eyeCurrP = transform(mars_orthographicMatrix, mars_viewMatrix, currP);
  vec2 winCurrP = project(eyeCurrP);
  vec3 dirEye = czm_viewRotation * color;
  dirEye = normalize(dirEye);

  vec2 newWinCurrP = winCurrP + dirEye.xy * mars_pointSize;
  gl_Position = unproject(newWinCurrP, eyeCurrP.z, eyeCurrP.w);
  gl_PointSize = mars_pointSize;
}
`;const DEF_STYLE$8={angle:0,width:50};class FlatBillboard extends BaseCombine{constructor(e={}){const t=_0x2397ca;e.style={...DEF_STYLE$8,...e.style},super(e),this.distanceDisplayCondition=e.distanceDisplayCondition??new Cesium__namespace[t(2776)](0,5e6),this._globalAlpha=1}get billboardCollection(){const e={_0x45c44d:3153},t=_0x2397ca;var x;return(x=this._layer)===null||x===void 0?void 0:x[t(e._0x45c44d)]}get distanceDisplayCondition(){return this[_0x2397ca(1521)]}set[_0x2397ca(169)](e){const t={_0x44ea0c:518},x=_0x2397ca;this._distanceDisplayCondition=e,this._distanceDisplayConditionCartesian2=new Cesium__namespace[x(t._0x44ea0c)](e.near,e.far)}[_0x2397ca(2670)](e){const t={_0x476a30:558,_0x58cea7:2921,_0x4e3421:565},x=_0x2397ca;if(!this.show)return;const i=(this[x(3044)].scale3d??1)*this._map.viewer.resolutionScale;this.options.instances.length>0&&this.options.instances[0].style[x(1526)]?this._pointSize=i*this.options[x(1257)][0].style.width:this._pointSize=i*this.options[x(357)].width,this.textures={},this.textureDef=new Cesium__namespace[x(2699)]({context:this[x(t._0x476a30)].scene.context,width:500,height:500}),this.options[x(1257)]&&this[x(t._0x58cea7)](),this._map.on(EventType.morphComplete,this._onMorphComplete,this),this.primitiveCollection[x(t._0x4e3421)](this)}_removedHook(){const e={_0x66c02a:2689},t=_0x2397ca;this[t(558)].off(EventType.morphComplete,this._onMorphComplete,this),this.clear(),this.textureDef[t(2941)](),delete this.textureDef,this._noDestroy=!0,this.primitiveCollection[t(e._0x66c02a)](this),this._noDestroy=!1}clear(){this[_0x2397ca({_0x55e45e:2784}._0x55e45e)](),this._removeCollectionBy3D()}[_0x2397ca(2921)](){const e={_0x4d76a6:2027,_0x1569f3:799,_0x4a48fe:1721},t=_0x2397ca;if(!this._map)return;this.clear();const x=this.instances;if(x)for(let i=0,s=x[t(e._0x4d76a6)];i<s;i++){const o=x[i];o.position=LngLatPoint[t(e._0x1569f3)](o.position)}this[t(558)].scene.mode===Cesium__namespace[t(e._0x4a48fe)].SCENE3D?this[t(231)]():this._initCollectionBy2D()}_onMorphComplete(e){this.redraw()}update(e){const t={_0x3eb384:558,_0xf22d58:674,_0x2cc9be:3153},x=_0x2397ca;if(this[x(t._0x3eb384)]){if(!this[x(3482)]){this._removeCollectionBy2D();return}e.mode===Cesium__namespace.SceneMode.SCENE3D?e.passes[x(t._0xf22d58)]?this._drawCommands&&e.commandList[x(2434)](...this._drawCommands):this._pickCommands&&e.commandList.push(...this._pickCommands):!this[x(t._0x2cc9be)]&&this._initCollectionBy2D()}}[_0x2397ca(1037)](){const e={_0x254b7f:1437},t=_0x2397ca,x=this.instances;if(x){this._billboard2DList=[];for(let i=0,s=x.length;i<s;i++){const o=x[i],r={...this.options.style,...o.style},c=this.billboardCollection.add({id:this[t(2647)](i),position:o.position,image:r[t(e._0x254b7f)],scale:1,rotation:Cesium__namespace.Math.toRadians(r.angle||0),width:r.width,height:r.height||r.width});this.bindPickId(c),this._billboard2DList.push(c)}}}[_0x2397ca(2784)](){const e=_0x2397ca;if(!(!this.billboardCollection||!this._billboard2DList)){for(let t=this._billboard2DList.length-1;t>=0;t--){const x=this._billboard2DList[t];this.billboardCollection[e(2689)](x)}this._billboard2DList=[]}}[_0x2397ca(231)](){const e={_0x3e51ef:2434,_0x158e49:3758},t=_0x2397ca,x=this.instances;if(!x)return;const i={};for(let r=0,c=x.length;r<c;r++){var s;const _=x[r];_[t(3124)]=r;const l=(s=_.style)===null||s===void 0?void 0:s.image;l&&(!i[l]&&(i[l]=[]),i[l][t(e._0x3e51ef)](_))}const o=[];for(const r in i){const c=i[r],_=r;this.prepareTexture(_);for(const l of c){const h=this[t(e._0x158e49)](_,l);o.push(h)}}this._drawCommands=o}[_0x2397ca(1616)](){const e={_0x5770d6:2150,_0x431050:2027,_0x540a59:2150,_0x3f24f3:1255,_0x59539b:2027,_0x425fec:2941,_0xd62ed0:1127},t={_0x52a0d6:1974},x=_0x2397ca;this[x(e._0x5770d6)]&&this._drawCommands[x(e._0x431050)]>0&&(this[x(e._0x540a59)][x(e._0x3f24f3)](function(i){const s=x;i[s(t._0x52a0d6)]&&i.vertexArray[s(2941)](),i.shaderProgram&&i.shaderProgram.destroy()}),delete this._drawCommands),this[x(3674)]&&this._pickCommands[x(e._0x59539b)]>0&&(this._pickCommands[x(e._0x3f24f3)](function(i){const s=x;i.vertexArray&&i[s(1974)][s(2941)](),i[s(1041)]&&i.shaderProgram.destroy()}),delete this._pickCommands);for(const i in this.textures)this.textures[i]&&this.textures[i][x(e._0x425fec)]();this[x(e._0xd62ed0)]={}}prepareTexture(e){const t={_0x43d2f4:558},x=_0x2397ca,i=new Image;i.onload=s=>{const o=_0x3361,r=new Cesium__namespace[o(2699)]({context:this[o(t._0x43d2f4)].scene.context,source:i});this.textures[e]=r},i[x(3578)]=e}prepareVAO(e){const t={_0x3f48c1:3044,_0x367fb4:2434,_0x48245f:2434,_0x267c4a:871,_0x4d78bd:1046,_0x28d1b2:1046,_0x2fc5ff:3872,_0x3dab5b:2434},x=_0x2397ca,i=[],s=[],o=[],r=[],c=[];for(let _=0,l=e.length;_<l;_++){const h=e[_],d=h.position,u={...this[x(t._0x3f48c1)].style,...h.style};o.push(_*4+0),o.push(_*4+2),o.push(_*4+1),o.push(_*4+0),o[x(2434)](_*4+3),o.push(_*4+2);const m=new Float32Array(6);m[0]=d.x,m[1]=d.x-m[0],m[2]=d.y,m[3]=d.y-m[2],m[4]=d.z,m[5]=d.z-m[4],i.push(m[0]),i.push(m[2]),i.push(m[4]),s.push(m[1]),s.push(m[3]),s.push(m[5]),i.push(m[0]),i.push(m[2]),i.push(m[4]),s.push(m[1]),s.push(m[3]),s.push(m[5]),i.push(m[0]),i[x(2434)](m[2]),i[x(2434)](m[4]),s.push(m[1]),s.push(m[3]),s[x(t._0x367fb4)](m[5]),i.push(m[0]),i.push(m[2]),i[x(2434)](m[4]),s.push(m[1]),s[x(t._0x48245f)](m[3]),s.push(m[5]),r[x(t._0x367fb4)](0,0),r.push(0,1),r[x(t._0x48245f)](1,1),r[x(2434)](1,0);const f=Cesium__namespace.Transforms[x(t._0x267c4a)](d),g=u.angle||0,b=Cesium__namespace[x(3596)].fromRotationZ(Cesium__namespace.Math.toRadians(g)),y=Cesium__namespace.Matrix4.fromRotationTranslation(b),C=Cesium__namespace[x(t._0x4d78bd)].multiply(f,y,new Cesium__namespace[x(t._0x28d1b2)]),v=1,M=(u[x(t._0x2fc5ff)]||u.width)/u.width,w=new Cesium__namespace.Cartesian3(-v,-M,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(C,w,w),Cesium__namespace[x(295)][x(960)](w,w),c.push(w.x,w.y,w.z);const H=new Cesium__namespace.Cartesian3(-v,M,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(C,H,H),Cesium__namespace.Cartesian3.normalize(H,H),c.push(H.x,H.y,H.z);const D=new Cesium__namespace.Cartesian3(v,M,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(C,D,D),Cesium__namespace.Cartesian3.normalize(D,D),c[x(t._0x3dab5b)](D.x,D.y,D.z);const F=new Cesium__namespace.Cartesian3(v,-M,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(C,F,F),Cesium__namespace.Cartesian3[x(960)](F,F),c.push(F.x,F.y,F.z)}return{index:new Uint16Array(o),vertex_H:{values:new Float32Array(i),componentDatatype:"DOUBLE",componentsPerAttribute:3},vertex_L:{values:new Float32Array(s),componentDatatype:"DOUBLE",componentsPerAttribute:3},uv:{values:new Float32Array(r),componentDatatype:x(254),componentsPerAttribute:2},color:{values:new Float32Array(c),componentDatatype:"FLOAT",componentsPerAttribute:3}}}createDrawCommand(e,t){const x={_0x251838:2928,_0x40c225:1618,_0x192ca6:1946,_0x2336ae:1734,_0x1a8d96:183,_0xdc2471:1354,_0x191d61:1455,_0x4b24fd:3902,_0x3b7a57:183,_0x178690:1974,_0x22785f:2434},i={_0x47d25b:2178},s=_0x2397ca,o=this._map.scene[s(x._0x251838)],r=this.options.translucent??!1,c=Cesium__namespace[s(1298)].fromCache({depthTest:{enabled:!0,func:r?Cesium__namespace.WebGLConstants.LEQUAL:Cesium__namespace[s(x._0x40c225)][s(x._0x192ca6)]},depthMask:r,blending:Cesium__namespace.BlendingState[s(2298)]}),_={position3DHigh:0,position3DLow:1,color:2,st:3},l=Cesium__namespace.ShaderProgram.fromCache({context:o,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:FlatBillboardFS,attributeLocations:_}),h=this.prepareVAO([t]),d=Cesium__namespace.Buffer.createIndexBuffer({context:o,typedArray:h.index,usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace.IndexDatatype[s(x._0x2336ae)]}),u=new Cesium__namespace.VertexArray({context:o,attributes:[{index:0,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:o,typedArray:h[s(x._0x1a8d96)].values,usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),componentsPerAttribute:3},{index:1,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:o,typedArray:h.vertex_L[s(x._0xdc2471)],usage:Cesium__namespace.BufferUsage[s(x._0x191d61)]}),componentsPerAttribute:3},{index:2,vertexBuffer:Cesium__namespace.Buffer[s(3902)]({context:o,typedArray:h.color[s(1354)],usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),componentsPerAttribute:3},{index:3,vertexBuffer:Cesium__namespace.Buffer[s(x._0x4b24fd)]({context:o,typedArray:h.uv[s(x._0xdc2471)],usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),componentsPerAttribute:2}],indexBuffer:d}),m=this._map.scene.camera,f=o.drawingBufferWidth,g=o.drawingBufferHeight,b=new Cesium__namespace.Cartesian2(f,g),y=Cesium__namespace.BoundingSphere.fromVertices(h[s(x._0x3b7a57)].values);y.radius=1e4;const C=new Cesium__namespace.DrawCommand({primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,shaderProgram:l,vertexArray:u,modelMatrix:Cesium__namespace.Matrix4.IDENTITY,renderState:c,boundingVolume:y,uniformMap:{mars_orthographicMatrix:()=>{if(m.frustum._offCenterFrustum){var w;return(w=m.frustum._offCenterFrustum)===null||w===void 0?void 0:w._perspectiveMatrix}else return m.frustum._orthographicMatrix},mars_viewMatrix:()=>m._viewMatrix,mars_resolution:()=>b,mars_pointSize:()=>this[s(i._0x47d25b)],mars_image:()=>this.textures[e]||this.textureDef,mars_distanceDisplayCondition:()=>this._distanceDisplayConditionCartesian2,mars_positionWC:()=>m.positionWC,globalAlpha:()=>this._globalAlpha},castShadows:!1,receiveShadows:!1,pass:r?Cesium__namespace.Pass.TRANSLUCENT:Cesium__namespace[s(2658)].OPAQUE,pickOnly:!0,pickCommand:new Cesium__namespace[s(600)]({owner:this,pickOnly:!0})});this.bindPickId(C),C.pickId=o[s(2647)]({primitive:C,id:this.createPickId(t.index)});const v=new Cesium__namespace.DrawCommand({owner:C,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,pickOnly:!0});v[s(x._0x178690)]=u,v[s(1723)]=c;const M=Cesium__namespace.ShaderProgram[s(1981)]({context:o,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:Cesium__namespace.ShaderSource.createPickFragmentShaderSource(FlatBillboardFS,"uniform"),attributeLocations:_});return v.shaderProgram=M,v.uniformMap=C.uniformMap,v.uniformMap.czm_pickColor=()=>{const w=s;return C.pickId[w(1089)]},v[s(1572)]=r?Cesium__namespace.Pass.TRANSLUCENT:Cesium__namespace.Pass.OPAQUE,v[s(3091)]=y,v.modelMatrix=Cesium__namespace.Matrix4.IDENTITY,!this._pickCommands&&(this._pickCommands=[]),this._pickCommands[s(x._0x22785f)](v),C}setOpacity(e){this._globalAlpha=e}}register$4("flatBillboard",FlatBillboard,!0);class BasePolyCombine extends BaseCombine{get style(){const e={_0x267e9d:3044},t=_0x2397ca;var x,i;return((x=this[t(3044)].instances)===null||x===void 0?void 0:x.length)>0&&this[t(e._0x267e9d)].instances[0].style?{...this.options[t(357)],...this.options.instances[0].style}:(i=this[t(3044)])===null||i===void 0?void 0:i.style}set style(e){this.setStyle(e)}_createGeometryInstance(e,t){const x=_0x2397ca;this._rectangle=null,this[x(666)]=!1;const i=this.instances,s=[];for(let o=0;o<i[x(2027)];o++){const r=i[o];if(r instanceof Cesium__namespace.GeometryInstance)r.id=this.createPickId(o),s.push(r);else{const c=this[x(1071)](e,t,r);c&&(c.id=this.createPickId(o),s.push(c))}}return s}_createGeometryInstanceItem(e,t,x){}_getPolylineOutlinePositions(e){return e[_0x2397ca({_0x3f7184:1091}._0x3f7184)]?[LngLatArray.toCartesians(e.positions)]:null}_createPolylineOutline(e){const t={_0x227754:1714,_0x56c01c:3872,_0x504cf2:3358,_0x256821:1034,_0x2eb0db:565},x=_0x2397ca,i=this.instances,s=[];let o;for(let _=0;_<i.length;_++){const l=i[_];let h;if(l.style&&(Cesium__namespace.defined(l[x(357)].outline)||Cesium__namespace[x(639)](l.style.outlineStyle)||Cesium__namespace.defined(l.style[x(209)])||Cesium__namespace.defined(l.style.outlineOpacity)||Cesium__namespace.defined(l.style[x(1724)]))){const f=this._getOutlineStyle(l.style);if(!f.show)continue;h={...e,...f}}else h=e;o=PolylineStyleConver.toCesiumVal(h),!o[x(3816)]&&(o.vertexFormat=Cesium__namespace[x(t._0x227754)][x(3333)]);const d=h.clampToGround?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace[x(671)],u=o.color??Cesium__namespace.Color.YELLOW.withAlpha(.5),m=this._getPolylineOutlinePositions(l);if(!m)return;for(let f=0,g=m[x(2027)];f<g;f++){let b=m[f];Cesium__namespace.defined(l[x(357)][x(t._0x56c01c)])&&(b=setPositionsHeight(b,l.style.height)),b.length>0&&(b=b.concat(b[0]));const y=new Cesium__namespace.GeometryInstance({geometry:new d({...o,positions:b}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(u),distanceDisplayCondition:o.distanceDisplayCondition}});s.push(y)}}const r={...this.options,geometryInstances:s,show:this.show};delete r.style,delete r.attr,this[x(t._0x504cf2)](e,o)?r.appearance=new Cesium__namespace[x(1714)]({...o}):r.appearance=new Cesium__namespace.PolylineMaterialAppearance({...o});let c;return o[x(t._0x256821)]?c=this[x(3595)][x(t._0x2eb0db)](new Cesium__namespace.GroundPolylinePrimitive(r)):c=this.primitiveCollection[x(565)](new Cesium__namespace.Primitive(r)),this.bindPickId(c),c}[_0x2397ca(2852)](e){const t={_0x2fb9c0:2835},x=_0x2397ca;this._map.closeHighlight();const i=e[x(t._0x2fb9c0)];i&&(this._last_pickedObject=i,this._map.openHighlight(this,this._highlightOptions,e))}openHighlight(e,t=!0,x){const i={_0x2de62b:558,_0x58f60b:2069,_0x5f3b4f:1695,_0x19bc08:431,_0x37a288:1036},s=_0x2397ca;t&&(this[s(i._0x2de62b)].closeHighlight(),this._map[s(2691)]=this),x&&(this._last_pickedObject=x);const o=e||this._highlightOptions;if(this[s(615)]&&o){var r;const c=PolygonStyleConver.toCesiumVal({...(r=this._last_pickedObject[s(i._0x58f60b)])===null||r===void 0?void 0:r.style,...o}),_=this[s(2226)](c,!1);if(_){const l=this[s(i._0x5f3b4f)](this._last_pickedObject.id);l.color=Cesium__namespace.ColorGeometryInstanceAttribute[s(i._0x19bc08)](_),this.fire(EventType[s(i._0x37a288)],{},!0)}}}[_0x2397ca(1212)](){const e={_0x12262a:2868,_0x526295:1695,_0x58b68f:507,_0x428f0c:558},t=_0x2397ca;var x;if(this._last_pickedObject&&this._primitive){var i;const s=PolygonStyleConver[t(e._0x12262a)](((i=this._last_pickedObject.data)===null||i===void 0?void 0:i.style)||{}),o=this._getColorByColorMaterial(s,!1);if(o){const r=this[t(e._0x526295)](this._last_pickedObject.id);r&&(r.color=Cesium__namespace[t(1293)].toValue(o),this.fire(EventType[t(e._0x58b68f)],{},!0))}delete this._last_pickedObject}((x=this._map)===null||x===void 0?void 0:x.last_highlighGraphic)===this&&this[t(e._0x428f0c)]._clearLastHighlight()}[_0x2397ca(657)](e){const t=this.options.instances||[];for(let x=0;x<t.length;x++){const i=t[x];i.style&&(i.style=merge(i.style,e))}return super.setStyle(e)}}class BasePointCombine extends BasePolyCombine{_getModelMatrix(e,t){const x={_0x452e68:3455,_0x1133dc:227,_0x6c3b33:1620},i=_0x2397ca;if(e[i(x._0x452e68)])return e.modelMatrix;const s=LngLatPoint[i(799)](e[i(760)]),o=Cesium__namespace.Math.toRadians(t.heading||0),r=Cesium__namespace.Math.toRadians(t[i(x._0x1133dc)]||0),c=Cesium__namespace.Math.toRadians(t.roll||0);return Cesium__namespace[i(x._0x6c3b33)][i(2130)](s,new Cesium__namespace.HeadingPitchRoll(o,r,c))}}class PlaneCombine extends BasePointCombine{_conversionStyle(e){return PlaneStyleConver.toCesiumVal(e)}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t)}[_0x2397ca(1071)](e,t,x){const i={_0x1a1407:357,_0x178e01:3612},s=_0x2397ca,o=PlaneStyleConver.toCesiumVal({...this.options[s(i._0x1a1407)],...x[s(i._0x1a1407)]});o.vertexFormat=o[s(i._0x178e01)]||e[s(3612)];let r=this._getColorByColorMaterial(o);t&&o.outlineColor&&(r=o.outlineColor),r[s(2708)]!==1&&(this.translucent=!0);const c=this._getModelMatrix(x,o),_=t?Cesium__namespace.PlaneOutlineGeometry:Cesium__namespace.PlaneGeometry;return new Cesium__namespace.GeometryInstance({geometry:new _(o),modelMatrix:c,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[s(4028)](r),distanceDisplayCondition:o.distanceDisplayCondition}})}_getModelMatrix(e,t){const x={_0x906a55:3455,_0x183fa7:3742,_0x34be64:3876,_0x1165a6:3729,_0x16f192:3596},i=_0x2397ca;var s,o;if(e.modelMatrix)return e[i(x._0x906a55)];const r=super._getModelMatrix(e,t);if(t[i(x._0x183fa7)]===Cesium__namespace.Cartesian3.UNIT_X){const _=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3[i(228)](Cesium__namespace[i(x._0x34be64)].toRadians(90)));Cesium__namespace.Matrix4[i(3566)](r,_,r)}else if(t[i(x._0x183fa7)]===Cesium__namespace.Cartesian3[i(x._0x1165a6)]){const _=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace[i(x._0x16f192)].fromRotationY(Cesium__namespace.Math.toRadians(90)));Cesium__namespace.Matrix4.multiply(r,_,r)}const c=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(((s=t.dimensions)===null||s===void 0?void 0:s.x)??1,((o=t.dimensions)===null||o===void 0?void 0:o.y)??1,1));return Cesium__namespace.Matrix4.multiply(r,c,r),r}}register$4("planeC",PlaneCombine,!0);class BoxCombine extends BasePointCombine{[_0x2397ca(2064)](e){const t={_0x135843:2460},x=_0x2397ca;return e[x(t._0x135843)]=e.closed??!0,BoxStyleConver.toCesiumVal(e)}_style2Json(e,t){return BoxStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x53b3eb:2868,_0x50a180:3044,_0x8ae728:3612,_0x3ec3c6:3953,_0x505f69:731},s=_0x2397ca,o=BoxStyleConver[s(i._0x53b3eb)]({...this[s(i._0x50a180)][s(357)],...x.style});o.vertexFormat=o.vertexFormat||e[s(i._0x8ae728)];let r=this[s(2226)](o);t&&o.outlineColor&&(r=o.outlineColor),r.alpha!==1&&(this.translucent=!0);const c=this._getModelMatrix(x,o),_=t?Cesium__namespace.BoxOutlineGeometry:Cesium__namespace.BoxGeometry;return new Cesium__namespace[s(i._0x3ec3c6)]({geometry:_[s(i._0x505f69)](o),modelMatrix:c,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("boxC",BoxCombine,!0);class CircleCombine extends BasePointCombine{[_0x2397ca(2064)](e){return CircleStyleConver.toCesiumVal(e)}_style2Json(e,t){return CircleStyleConver[_0x2397ca({_0x14de13:1180}._0x14de13)](e,t)}[_0x2397ca(1071)](e,t,x){const i={_0x5cf3d4:3612,_0x2b5592:3953,_0x446d46:169},s=_0x2397ca,o=CircleStyleConver.toCesiumVal({...this.options.style,...x.style});o.vertexFormat=o[s(3612)]||e[s(i._0x5cf3d4)];let r=this._getColorByColorMaterial(o);t&&o.outlineColor&&(r=o[s(209)]),r.alpha!==1&&(this.translucent=!0),x.position=LngLatPoint.parse(x.position).toCartesian(),o.center=x.position;const c=t?Cesium__namespace.CircleOutlineGeometry:Cesium__namespace.CircleGeometry;return new Cesium__namespace[s(i._0x2b5592)]({geometry:new c(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(r),distanceDisplayCondition:o[s(i._0x446d46)]}})}_getPolylineOutlinePositions(e){return[getEllipseOuterPositions({position:e.position,radius:e.style.radius,granularity:e.style.granularity})]}}register$4("circleC",CircleCombine,!0);class CylinderCombine extends BasePointCombine{_conversionStyle(e){const t={_0x330bd8:2460},x=_0x2397ca;return e.closed=e[x(t._0x330bd8)]??!0,CylinderStyleConver[x(2868)](e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x7b9f2a:209,_0x4b3713:2872},s=_0x2397ca,o=CylinderStyleConver.toCesiumVal({...this.options.style,...x[s(357)]});o.vertexFormat=o.vertexFormat||e[s(3612)];let r=this[s(2226)](o);t&&o[s(i._0x7b9f2a)]&&(r=o.outlineColor),r[s(2708)]!==1&&(this[s(666)]=!0);const c=this[s(i._0x4b3713)](x,o),_=t?Cesium__namespace[s(1725)]:Cesium__namespace.CylinderGeometry;return new Cesium__namespace.GeometryInstance({geometry:new _(o),modelMatrix:c,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[s(4028)](r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4(_0x2397ca(1054),CylinderCombine,!0);class FrustumCombine extends BasePointCombine{[_0x2397ca(2064)](e){return e.closed=e.closed??!0,CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x1ee210:2824,_0x33d801:2683,_0x2ec6a3:3876,_0x48893e:2500,_0x2da7ea:3953,_0x46bc70:1293},s=_0x2397ca,o=CylinderStyleConver.toCesiumVal({...this[s(3044)].style,...x.style});o.vertexFormat=o.vertexFormat||e[s(3612)];let r=this._getColorByColorMaterial(o);t&&o.outlineColor&&(r=o.outlineColor),r.alpha!==1&&(this.translucent=!0);const c=x.position=LngLatPoint.parse(x[s(760)]).toCartesian();let _,l;if(x[s(i._0x1ee210)]){const m=LngLatPoint.parse(x[s(i._0x33d801)]).toCartesian();_=Cesium__namespace.Cartesian3.distance(c,m);const f=getHeadingPitchRollForLine(c,m);l=Cesium__namespace.Transforms.headingPitchRollQuaternion(c,f)}else{_=-o.length;const m=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[s(3876)].toRadians(o[s(1722)]||0),Cesium__namespace[s(i._0x2ec6a3)].toRadians(o.pitch||0),Cesium__namespace.Math.toRadians(o[s(2969)]||0));l=Cesium__namespace.Transforms.headingPitchRollQuaternion(c,m)}const h=new Cesium__namespace[s(1440)]({fov:Cesium__namespace.Math[s(i._0x48893e)](o.angle*2||.01),aspectRatio:o.angle2/o.angle,near:.01,far:_}),d=t?Cesium__namespace[s(3749)]:Cesium__namespace.FrustumGeometry;return new Cesium__namespace[s(i._0x2da7ea)]({geometry:new d({...o,origin:c,orientation:l,frustum:h}),attributes:{color:Cesium__namespace[s(i._0x46bc70)].fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("frustumC",FrustumCombine,!0);class EllipsoidCombine extends BasePointCombine{_conversionStyle(e){return e.closed=e.closed??!0,EllipsoidStyleConver.toCesiumVal(e)}_style2Json(e,t){return EllipsoidStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x5556f8:3612,_0x31d760:2226,_0x321f34:2708,_0x4e7d44:666},s=_0x2397ca,o=EllipsoidStyleConver.toCesiumVal({...this.options.style,...x.style});o[s(i._0x5556f8)]=o.vertexFormat||e.vertexFormat;let r=this[s(i._0x31d760)](o);t&&o.outlineColor&&(r=o.outlineColor),r[s(i._0x321f34)]!==1&&(this[s(i._0x4e7d44)]=!0);const c=this._getModelMatrix(x,o),_=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({geometry:new _(o),modelMatrix:c,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4(_0x2397ca(269),EllipsoidCombine,!0);class PolylineCombine extends BasePolyCombine{_conversionStyle(e){return PolylineStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineStyleConver[_0x2397ca(1180)](e,t)}[_0x2397ca(1071)](e,t,x){const i={_0x21a2a6:2868,_0x1e03ab:357,_0x104383:2226},s=_0x2397ca,o=PolylineStyleConver[s(i._0x21a2a6)]({...this.options[s(i._0x1e03ab)],...x.style});e._isColorMaterial&&(o.vertexFormat=Cesium__namespace.PolylineColorAppearance.VERTEX_FORMAT);const r=this[s(i._0x104383)](o),c=x.positions=LngLatArray.toCartesians(x.positions);o.positions=c;const _=o.clampToGround?Cesium__namespace[s(1756)]:Cesium__namespace.PolylineGeometry;return new Cesium__namespace[s(3953)]({geometry:new _(o),attributes:{color:Cesium__namespace[s(1293)][s(4028)](r),distanceDisplayCondition:o.distanceDisplayCondition}})}_createAppearance(e,t){const x=_0x2397ca;return e._isColorMaterial?new Cesium__namespace[x(1714)]({...e}):new Cesium__namespace.PolylineMaterialAppearance({...e})}}register$4("polylineCombine",PolylineCombine),register$4("polylineC",PolylineCombine);class PolylineVolumeCombine extends BasePolyCombine{_conversionStyle(e){const t=_0x2397ca;return e[t(2460)]=e[t(2460)]??!0,PolylineVolumeStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineVolumeStyleConver.toJSON(e,t)}[_0x2397ca(1071)](e,t,x){const i={_0x4ef46a:357},s=_0x2397ca,o=PolylineVolumeStyleConver.toCesiumVal({...this.options[s(i._0x4ef46a)],...x[s(357)]});o.vertexFormat=o.vertexFormat||e.vertexFormat;let r=this[s(2226)](o);t&&o.outlineColor&&(r=o.outlineColor),r.alpha!==1&&(this.translucent=!0);const c=x.positions=LngLatArray.toCartesians(x.positions),_=t?Cesium__namespace.PolylineVolumeOutlineGeometry:Cesium__namespace.PolylineVolumeGeometry;return new Cesium__namespace[s(3953)]({geometry:new _({...o,polylinePositions:c,shapePositions:o.shape}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4(_0x2397ca(3290),PolylineVolumeCombine);class CorridorCombine extends BasePolyCombine{_conversionStyle(e){return CorridorStyleConver[_0x2397ca({_0x306dfd:2868}._0x306dfd)](e)}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x3452ef:666,_0x102eb3:1091},s=_0x2397ca,o=CorridorStyleConver.toCesiumVal({...this.options[s(357)],...x.style});o.vertexFormat=o.vertexFormat||e.vertexFormat;let r=this._getColorByColorMaterial(o);t&&o[s(209)]&&(r=o.outlineColor),r.alpha!==1&&(this[s(i._0x3452ef)]=!0),x[s(1091)]=LngLatArray.toCartesians(x[s(i._0x102eb3)]),o[s(1091)]=x[s(i._0x102eb3)];const c=t?Cesium__namespace.CorridorOutlineGeometry:Cesium__namespace.CorridorGeometry;return new Cesium__namespace.GeometryInstance({geometry:new c(o),attributes:{color:Cesium__namespace[s(1293)].fromColor(r),distanceDisplayCondition:o[s(169)]}})}}register$4("corridorC",CorridorCombine);class WallCombine extends BasePolyCombine{_conversionStyle(e){return WallStyleConver.toCesiumVal(e)}_style2Json(e,t){return WallStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x1cd9d9:3044,_0x506493:209,_0x49c4c2:2027},s={_0xfbedb5:1364},o=_0x2397ca;var r;const c=WallStyleConver.toCesiumVal({...this[o(i._0x1cd9d9)].style,...x.style});c.vertexFormat=c.vertexFormat||e[o(3612)];let _=this[o(2226)](c);t&&c.outlineColor&&(_=c[o(i._0x506493)]),_.alpha!==1&&(this[o(666)]=!0);const l=[];let h=[];const d=x.positions;let u=new Array(d),m=new Array(d);x.positions.forEach(function(b,y){const C=o,v=LngLatPoint[C(s._0xfbedb5)](b);if(!v||!v.valid())return;l.push(v),h.push(v.toCartesian());const M=l[y].alt;u[y]=M,m[y]=M+Number(c.diffHeight||100)}),c[o(509)]&&((r=h)===null||r===void 0?void 0:r[o(i._0x49c4c2)])>0&&(h=h.concat(h[0]),u=u.concat(u[0]),m=m.concat(m[0]));const f=t?Cesium__namespace.WallOutlineGeometry:Cesium__namespace.WallGeometry;return new Cesium__namespace.GeometryInstance({geometry:new f({...c,positions:h,maximumHeights:m,minimumHeights:u}),attributes:{color:Cesium__namespace[o(1293)][o(4028)](_),distanceDisplayCondition:c.distanceDisplayCondition}})}}register$4("wallC",WallCombine);class PolygonCombine extends BasePolyCombine{_conversionStyle(e){return PolygonStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolygonStyleConver[_0x2397ca({_0x221530:1180}._0x221530)](e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x48ee28:357,_0x4a5441:4056,_0xcf1a1e:1169,_0xe84ce5:1019,_0x50702c:3002},s=_0x2397ca,o=PolygonStyleConver.toCesiumVal({...this.options[s(i._0x48ee28)],...x.style});o.vertexFormat=o.vertexFormat||e[s(3612)];let r=this._getColorByColorMaterial(o);t&&o.outlineColor&&(r=o.outlineColor),r.alpha!==1&&(this[s(666)]=!0);let c,_;x.positions.length>0&&Array.isArray(x[s(1091)][0])&&x.positions[0].length>0&&Array[s(i._0x4a5441)](x.positions[0][0])&&isNumber(x.positions[0][0][0])?(c=getPolygonHierarchy(x.positions),_=c.positions):(_=x.positions=LngLatArray[s(i._0xcf1a1e)](x.positions),c=new Cesium__namespace.PolygonHierarchy(_)),x[s(i._0xe84ce5)]=c,o[s(473)]=c;const l=t?Cesium__namespace[s(i._0x50702c)]:Cesium__namespace.PolygonGeometry;return new Cesium__namespace[s(3953)]({geometry:new l(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}_getPolylineOutlinePositions(e){const t={_0x478a7d:1019,_0x54ae5c:1091},x=_0x2397ca;if(e._hierarchy)return getHierarchyVal(e[x(t._0x478a7d)]);if(e[x(t._0x54ae5c)])return getHierarchyVal(LngLatArray.toCartesians(e.positions))}updateHeight(e){const t={_0xc92b8:2001},x=_0x2397ca;var i;const s=6378137,o=((i=this.style)===null||i===void 0?void 0:i.height)||0;for(let r=0,c=this.primitiveCollection.length;r<c;r++){const _=this.primitiveCollection[x(t._0xc92b8)](r),l=(s+e)/(s+o),h=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(l,l,l));_.modelMatrix=h}}[_0x2397ca(4036)](e,t){return{type:"Polygon",coordinates:[LngLatArray.toArray(e.positions,t==null?void 0:t.noAlt)]}}}register$4("polygonCombine",PolygonCombine),register$4("polygonC",PolygonCombine);class WaterCombine extends PolygonCombine{_addedHook(e){const t={_0x25a54c:2064,_0x3d98b2:2195,_0x26545c:1029,_0x26f982:1494,_0x6d4b7:1766,_0x4e2970:3853,_0x5dfa73:1034,_0x50b394:1574,_0x360287:2704,_0x189214:2417,_0x30bdfe:3595,_0x3fcf3e:940,_0x3d929d:1833},x=_0x2397ca;if(!this.show)return;const i=this[x(t._0x25a54c)](e);e.opacity=e.opacity??.8;const s={geometryInstances:this[x(t._0x3d98b2)](i),appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({aboveGround:!1,material:new Cesium__namespace.Material({fabric:{type:"Water",uniforms:{specularMap:i.specularMap||Cesium__namespace.Material[x(t._0x26545c)],normalMap:i[x(t._0x26f982)]||Cesium__namespace[x(2206)].DefaultImageId,frequency:i.frequency||8e3,animationSpeed:i.animationSpeed||.03,amplitude:i.amplitude||5,specularIntensity:e[x(1778)]||.8,baseWaterColor:getCesiumColor(e.baseWaterColor||x(t._0x6d4b7)).withAlpha(e.opacity),blendColor:getCesiumColor(e[x(t._0x4e2970)]||"#123e59")[x(396)](e.opacity)}}}),fragmentShaderSource:WaterFS,translucent:e.opacity!==1}),show:this.show};if(e[x(t._0x5dfa73)]?(s[x(1660)]=e.classificationType??Cesium__namespace[x(t._0x50b394)][x(t._0x360287)],this[x(t._0x189214)]=this[x(t._0x30bdfe)].add(new Cesium__namespace[x(3377)](s))):this._primitive=this[x(3595)].add(new Cesium__namespace.Primitive(s)),this[x(t._0x3fcf3e)]&&(this.primitiveCollection.remove(this._primitive_outline),delete this._primitive_outline),e.outline){const o=this[x(t._0x3d929d)](e);this._primitive_outline=this._createPolylineOutline(o)}}}register$4("waterCombine",WaterCombine),register$4("waterC",WaterCombine);class RectangleCombine extends BasePolyCombine{_conversionStyle(e){return RectangleStyleConver.toCesiumVal(e)}_style2Json(e,t){return RectangleStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,x){const i={_0x5315b2:3044,_0x1c19d7:3612,_0x8bb1af:1169,_0x1f21c9:1358,_0x2c9801:3520,_0x2d852b:3519,_0x240ef4:1784},s=_0x2397ca,o=RectangleStyleConver.toCesiumVal({...this[s(i._0x5315b2)][s(357)],...x.style});o.vertexFormat=o[s(3612)]||e[s(i._0x1c19d7)];let r=this._getColorByColorMaterial(o);t&&o.outlineColor&&(r=o.outlineColor),r.alpha!==1&&(this.translucent=!0);const c=x.positions=LngLatArray[s(i._0x8bb1af)](x.positions);o[s(i._0x1f21c9)]=Cesium__namespace[s(i._0x2c9801)].fromCartesianArray(c),Cesium__namespace.defined(o[s(1358)])&&(Cesium__namespace.defined(this._rectangle)?this._rectangle=Cesium__namespace.Rectangle[s(i._0x2d852b)](o.rectangle,this._rectangle):this[s(i._0x240ef4)]=o.rectangle);const _=t?Cesium__namespace.RectangleOutlineGeometry:Cesium__namespace.RectangleGeometry;return new Cesium__namespace[s(3953)]({geometry:new _(o),attributes:{color:Cesium__namespace[s(1293)].fromColor(r),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("rectangleC",RectangleCombine);class EditDivGraphic extends EditBase{get container(){const e={_0x2f6de2:785},t=_0x2397ca;return this._graphic[t(e._0x2f6de2)]}[_0x2397ca(3559)](){const e={_0x1e23ec:558,_0x502d93:3673},t={_0x44143a:760,_0x12275c:1788},x=_0x2397ca;return this._enabled?this:(this._enabled=!0,this.container.addEventListener("mousemove",this._onMouseMove[x(1373)](this)),this.container[x(1130)]("mouseout",this._onMouseOut.bind(this)),this.container.addEventListener("mousedown",this._onMarkerDragStart.bind(this)),addClass(this.container,this._graphic.style.editClassName||x(2051)),this._graphic._draw_tooltip=this[x(e._0x1e23ec)].getLangText("_拖动对象后")+x(3895)+this._map.getLangText(x(538))+"<br/>"+this._map.getLangText("_更多功能请右击"),this._graphic[x(e._0x502d93)]=(i,s,o)=>{const r=x;this._graphic[r(t._0x44143a)]=s,this[r(t._0x12275c)](EventType.editMovePoint,{mouseEvent:o,cartesian:s})},this._last_contextmenuConfig=this._graphic._contextmenuConfig,this._graphic.bindContextMenu(this.getDraggerContextMenu(this._graphic)),this.fire(EventType.editStart),this)}disable(){const e={_0xaf4051:1322,_0x5e494f:832,_0x292f2f:1802,_0x4c0124:3645,_0x19e81e:1590,_0x5daffb:1067,_0x166f47:2051},t=_0x2397ca;return this._enabled?(this[t(e._0xaf4051)]=!1,this.stopMoveMatrix(),delete this[t(3645)].onDragEnd,delete this[t(3645)][t(2679)],this._graphic[t(e._0x5e494f)](),this[t(e._0x292f2f)]&&(this[t(e._0x4c0124)][t(e._0x19e81e)]=this._last_contextmenuConfig,delete this._last_contextmenuConfig),this[t(571)].removeEventListener("mousemove",this._onMouseMove),this.container.removeEventListener("mouseout",this._onMouseOut),this.container[t(e._0x5daffb)](t(1604),this._onMarkerDragStart),this.unbindEvent(),removeClass(this[t(571)],this[t(3645)].style.editClassName||t(e._0x166f47)),this.fire(EventType[t(2909)]),this):this}unbindEvent(){const e={_0x41e030:1067,_0x2eeb1c:2869},t=_0x2397ca;this[t(1736)]&&document[t(e._0x41e030)]("mousemove",this._mouseMoveHandle,!1),this._mouseUpHandle&&document.removeEventListener(t(1439),this[t(e._0x2eeb1c)],!1),this._map.setCursor(!1)}_onMouseMove(e){const t={_0x3f0e98:3645,_0x4a4de7:2679},x=_0x2397ca;if(this[x(t._0x3f0e98)][x(t._0x4a4de7)]){const i=this._graphic._getWindowPosition(e);this._map.openSmallTooltip(i,this._graphic._draw_tooltip)}}[_0x2397ca(1676)](e){this._map.closeSmallTooltip()}[_0x2397ca(3486)](e){const t={_0x4e76c3:1322,_0x4c7ce2:2142},x=_0x2397ca;!this[x(t._0x4e76c3)]||e.which!==1||(e.preventDefault(),this._map.setCursor(!0),this.fire(EventType.editMouseDown,{mouseEvent:e}),this.unbindEvent(),!this[x(1736)]&&(this._mouseMoveHandle=i=>{this._onMarkerDrag(i)},this._mouseUpHandle=i=>{this._onMarkerDragEnd(i)}),document.addEventListener(x(t._0x4c7ce2),this[x(1736)],!1),document.addEventListener("mouseup",this._mouseUpHandle,!1))}_onMarkerDrag(e){const t={_0x3c9473:553,_0x43182:3645,_0x3c6979:760,_0xaf0b8f:558,_0x27f16c:268},x=_0x2397ca;if(!this._enabled)return;e[x(t._0x3c9473)]();const i=this[x(t._0x43182)]._getWindowPosition(e),s=getCurrentMousePosition(this._map.scene,i);s&&(this._graphic[x(t._0x3c6979)]=s,this[x(t._0xaf0b8f)].openSmallTooltip(i,this[x(558)].getLangText(x(t._0x27f16c))),this.fire(EventType.editMouseMove,{mouseEvent:e,cartesian:s,windowPosition:i}))}_onMarkerDragEnd(e){const t=_0x2397ca;if(!this._enabled)return;e[t(553)](),this.unbindEvent(),this[t(558)].closeSmallTooltip();const x=this[t(3645)]._getWindowPosition(e);this[t(1788)](EventType.editMovePoint,{mouseEvent:e,cartesian:this._graphic.position,windowPosition:x})}_updateMatrixMovePosition(e){!this[_0x2397ca({_0x105b00:2802}._0x105b00)]||!e.position||(this._matrixMove.position=e.position)}}const isFirefox=window.navigator.userAgent.toLowerCase().indexOf("firefox")>=0;class DivGraphic extends BaseGraphic{constructor(e={}){const t={_0x199fcb:3331,_0x571b02:1610,_0x4bc77d:2491,_0x192623:709,_0x30bf65:357,_0xc919ec:1446,_0x216a5a:1034,_0xc49d10:1388,_0x3eb2d0:760},x=_0x2397ca;super(e),this[x(t._0x199fcb)]=this[x(3044)].hasEdit??this.style.hasEdit??!0,this[x(t._0x571b02)]=this.options[x(t._0x4bc77d)]??this.style.depthTest??!0,this._hasCache=this.options.hasCache??this.style.hasCache??!0,this._hasZIndex=this.options.hasZIndex??this.style[x(3317)]??!1,this[x(t._0x192623)]=this[x(t._0x30bf65)].css_transform_origin??"left bottom 0",this[x(3044)].frameRate=this[x(3044)][x(2406)]??1,this[x(3044)].testPoint=merge({name:"用于与DIV点进行对比测试位置的点",color:x(t._0xc919ec),pixelSize:8,distanceDisplayCondition:this.style.distanceDisplayCondition,scaleByDistance:this.style.scaleByDistance,clampToGround:this.style[x(t._0x216a5a)],heightReference:this.style.heightReference},this.options[x(t._0xc49d10)]),e.position&&(this.position=e[x(t._0x3eb2d0)])}get position(){return this._position}set position(e){const t={_0x316051:1556,_0x17a691:357,_0x2497b2:2799,_0x3b16a7:1155,_0x3fafed:1173},x=_0x2397ca;var i;if(this[x(t._0x316051)]=LngLatPoint.parse(e),this._point){let s=this[x(t._0x17a691)].setHeight;Cesium__namespace.defined(s)&&(isString(s)&&(s=Number(template(s,this.attr,!0)),isNaN(s)&&(s=0)),this._point.alt=s);const o=this[x(t._0x2497b2)]();o!==0&&(this[x(1556)][x(t._0x3b16a7)]=this._point.alt+o)}this[x(t._0x3fafed)]=(i=this._point)===null||i===void 0?void 0:i.toCartesian(),this[x(1826)]&&(this.debuggerPointEntity.position=this._position),this._updateDivPosition(),this.fire(EventType[x(222)],{position:this._position})}get[_0x2397ca(2800)](){return this._point}get coordinate(){return this.getCoordinate()}get center(){return this._position}get positionShow(){return this._position_show}get testPoint(){return this[_0x2397ca({_0x25ceb0:1826}._0x25ceb0)]!=null}set[_0x2397ca(1388)](e){const t={_0x260a94:3998},x=_0x2397ca;this.debuggerPointEntity&&(this._layer.dataSource.entities[x(2689)](this[x(1826)]),delete this.debuggerPointEntity),e&&(this.debuggerPointEntity=this._layer.dataSource[x(t._0x260a94)].add({name:this.options.testPoint.name,position:this.position,point:PointStyleConver.toCesiumVal(this.options[x(1388)])}))}get pointerEvents(){return this[_0x2397ca(3044)].pointerEvents}set[_0x2397ca(3869)](e){const t=_0x2397ca;this.options[t(3869)]=e,this._updatePointerEvents(e)}get isEditing(){return this._enabledEdit}get EditClass(){return EditDivGraphic}get depthTest(){return this._depthTest}set[_0x2397ca(2491)](e){const t={_0x3e49ea:1610},x=_0x2397ca;this[x(t._0x3e49ea)]=e,this._camera_cache=null}get clampToGround(){return this[_0x2397ca(357)].clampToGround}set clampToGround(e){const t=_0x2397ca;this[t(357)].clampToGround=e,this._calculateAsynSurfacePosition()}get parentContainer(){return this.options.parentContainer?this.options.parentContainer:this._layer.container}get parentContainerId(){var e;return(e=this.parentContainer)===null||e===void 0?void 0:e.id}get container(){return this[_0x2397ca(785)]}get[_0x2397ca(2525)](){return this._container.id}get[_0x2397ca(2384)](){const e=_0x2397ca;return this._container[e(3437)]}set html(e){const t={_0x41ce82:785,_0x43d741:1286,_0x4183c2:1788,_0x1ff72e:3378,_0x48411a:357,_0x54ec74:2027,_0x3151ca:2641},x=_0x2397ca;if(this.style.html=e,!(!this[x(t._0x41ce82)]||!e)){if(typeof e=="function"&&(e=e(this.eventTarget)),e instanceof Promise){e[x(t._0x43d741)](s=>{this.options&&(this._camera_cache=null,this.html=s)});return}if(isString(e)){if(this.attr instanceof Promise){this[x(1578)][x(1286)](s=>{this.options&&(this._camera_cache=null,this.attr=s,this.html=e)});return}this[x(357)].template&&(e=this[x(357)][x(1662)].replace("{content}",e)),this._container[x(3437)]=template(e,this[x(1578)],this[x(357)].templateEmptyStr??!0),this[x(t._0x4183c2)](EventType.load)}else(e instanceof Element||e instanceof HTMLDivElement)&&(empty(this._container),e.style[x(t._0x1ff72e)]!=="block"&&(e[x(t._0x48411a)].display="block"),this._container.appendChild(e),this[x(1788)](EventType.load));if(this.style.className){var i;if(((i=this._container.children)===null||i===void 0?void 0:i.length)>0)for(let s=0,o=this._container.children[x(t._0x54ec74)];s<o;s++){const r=this[x(t._0x41ce82)].children[s];addClass(r,this.style.className)}else addClass(this._container,this.style.className)}this[x(t._0x3151ca)]&&this[x(2641)](),this._camera_cache=null}}get divWidth(){var e;return(e=this._container)===null||e===void 0?void 0:e.offsetWidth}get divHeight(){var e;return(e=this._container)===null||e===void 0?void 0:e.offsetHeight}get eventTarget(){return this}_showHook(e){const t=_0x2397ca;this._container&&(e?(this._camera_cache=null,this._container.style.display=t(516)):this.hide(),this[t(1826)]&&(this[t(1826)].show=e))}[_0x2397ca(4015)](e){const t={_0x59c361:785,_0x4bf8d3:357},x=_0x2397ca;this[x(785)]&&(e?this[x(t._0x59c361)][x(t._0x4bf8d3)]["pointer-events"]=x(807):this[x(785)].style["pointer-events"]="none")}setOpacity(e){const t=_0x2397ca;this[t(357)].globalAlpha=e,this._container&&(this._container.style.opacity=e)}hasBindEvent(){const e={_0x55ce5f:639,_0x19ccb7:3831},t=_0x2397ca;var x,i,s;return this.listens(EventType.click)||this.listens(EventType.mouseOver)||this.listens(EventType.mouseOut)||this.hasPopup(!1)||this.hasTooltip(!1)?!0:Cesium__namespace[t(e._0x55ce5f)](this[t(3044)][t(3869)])?this[t(3044)].pointerEvents:!!((x=this[t(e._0x19ccb7)])!==null&&x!==void 0&&x.listens(EventType.click)||(i=this._layer)!==null&&i!==void 0&&i.listens(EventType.mouseOver)||(s=this[t(3831)])!==null&&s!==void 0&&s.listens(EventType.mouseOut)||this.hasPopup(!0)||this.hasTooltip(!0))}[_0x2397ca(3413)](){const e={_0x26fbdb:1813},t=_0x2397ca;this[t(4015)](this[t(e._0x26fbdb)]())}[_0x2397ca(2645)](){const e={_0x23d8f8:357},t=_0x2397ca;DivGraphicStyleConver.toCesiumVal(this.style,this),this._container=create$3("div","mars3d-divGraphic ",this.parentContainer),this._container.id=this.id,this._container[t(357)].opacity=this[t(e._0x23d8f8)][t(2182)],this.style.html&&(this.html=this.style[t(2384)]),this[t(4015)](this.hasBindEvent())}_addedHook(e){const t={_0x1e95db:1628,_0x3a0685:785},x=_0x2397ca;this._layer[x(571)].appendChild(this[x(785)]),this.hide(),this._container.addEventListener("click",this[x(t._0x1e95db)].bind(this)),this._container.addEventListener("mousedown",this._container_onMousedownHandler.bind(this)),this._container.addEventListener("mousemove",this._container_onMouseMoveHandler.bind(this)),this[x(t._0x3a0685)].addEventListener("mouseout",this._container_onMouseoutHandler.bind(this)),this._calculateAsynSurfacePosition(),this.bindUpdateEvent(),this._map.on(EventType.morphComplete,this._morphCompleteHandler,this)}[_0x2397ca(380)](){const e={_0x202cb7:1067,_0x286598:2942,_0x470780:2142,_0x4c8eb3:3960,_0x33f45f:3360},t=_0x2397ca;this.stopDraw(),this._map.off(EventType.morphComplete,this._morphCompleteHandler,this),this._map.off(EventType.terrainChange,this[t(2351)],this),this.testPoint=!1,this._container[t(e._0x202cb7)]("click",this._container_onClickHandler),this._container.removeEventListener("mousedown",this[t(e._0x286598)]),this._container.removeEventListener(t(e._0x470780),this._container_onMouseMoveHandler),this._container.removeEventListener(t(e._0x4c8eb3),this[t(e._0x33f45f)]),remove(this._container)}_morphCompleteHandler(e){const t={_0x64076c:3401,_0x384334:2281};setTimeout(()=>{const x=_0x3361;this[x(t._0x64076c)]&&this[x(t._0x384334)]()},30)}_calculateAsynSurfacePosition(){const e={_0x1b900b:3403,_0x306a93:357,_0x26ba8d:357,_0x4e5955:2913,_0x393779:3617,_0x51648a:3399,_0x259f9f:3573},t={_0x427c38:357,_0x430c2e:1155,_0x263463:2416},x=_0x2397ca;this[x(e._0x1b900b)]=null,this._hasAsynSurfacePosition=!1;const i=this.position;i instanceof Cesium__namespace[x(295)]&&(this[x(e._0x306a93)].clampToGround||this[x(e._0x26ba8d)].heightReference===Cesium__namespace.HeightReference[x(e._0x4e5955)]||this[x(357)][x(3102)]===Cesium__namespace[x(3161)][x(e._0x393779)])&&(getSurfaceHeight(this._map[x(e._0x51648a)],i,this.options).then(s=>{const o=x;this[o(1002)]||(this[o(t._0x427c38)][o(3102)]===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND&&(s.point[o(t._0x430c2e)]+=s.height_original),this[o(760)]=s.point,this[o(t._0x263463)]=!0)}),this._map[x(e._0x259f9f)](EventType.terrainChange,this._onTerrainChangeHandler,this),this._map.on(EventType.terrainChange,this._onTerrainChangeHandler,this))}_onTerrainChangeHandler(e){const t=_0x2397ca;this._map&&this[t(2761)]()}_updateStyleBaseHook(e){const t={_0x4f1e44:440},x=_0x2397ca;return e.html&&(this.html=e[x(2384)]),DivGraphicStyleConver.toCesiumVal(this.style,this),(Cesium__namespace[x(639)](e[x(t._0x4f1e44)])||Cesium__namespace.defined(e[x(2841)]))&&(this.position=this._point),this._camera_cache=null,this._updateDivPosition(),this}updateDivPosition(){const e=_0x2397ca;return this[e(3403)]=null,this._updateDivPosition(),this}update(e){const t={_0x3122d1:558,_0x136a9c:2384,_0x31d560:1788},x=_0x2397ca;this[x(t._0x3122d1)]&&(this.style.timeRender&&this.style.html&&(this[x(2384)]=this.style[x(t._0x136a9c)]),this._updateDivPosition(),this[x(t._0x31d560)](EventType.postRender,{container:this.container},!1),this.fireTarget&&this.fireTarget(EventType.postRender,{container:this.container},!1))}_updateDivPosition(){const e={_0x279f4e:1879,_0x45816a:1722,_0x4437de:3403,_0x1a1964:357,_0x3d7845:3617,_0x3a5da3:3556,_0x19555f:169,_0x219ec2:387,_0x4c87e0:3378,_0x4db395:3403,_0x4456ab:1864,_0x2b0298:2030,_0x3bce25:2143,_0x569277:387,_0x38f674:2925},t=_0x2397ca;var x;if(!this.show||!this._map)return!1;const i=this._map.scene,s=this._map.camera;let o=getPositionValue(this.position,(x=this._map)===null||x===void 0?void 0:x.clock.currentTime);if(!Cesium__namespace.defined(o))return this.hide(),!1;if(this._hasCache){const C={x:o.x,y:o.y,z:o.z,p1:this._map.container.clientWidth,p2:this[t(558)].container[t(e._0x279f4e)],p3:s.positionWC.x,p4:s.positionWC.y,p5:s.positionWC.z,p6:s[t(e._0x45816a)],p7:s.pitch,p8:s.roll};if(this[t(3403)]&&C.x===this._camera_cache.x&&C.x===this[t(3403)].x&&C.y===this[t(3403)].y&&C.z===this._camera_cache.z&&C.p1===this[t(3403)].p1&&C.p2===this._camera_cache.p2&&C.p3===this._camera_cache.p3&&C.p4===this._camera_cache.p4&&C.p5===this._camera_cache.p5&&C.p6===this[t(e._0x4437de)].p6&&C.p7===this._camera_cache.p7&&C.p8===this[t(3403)].p8)return!0;this[t(3403)]=C}this._hasAsynSurfacePosition||(this[t(e._0x1a1964)].clampToGround||this.style.heightReference===Cesium__namespace.HeightReference.CLAMP_TO_GROUND?o=getSurfacePosition(this._map.scene,o,this.options):this.style.heightReference===Cesium__namespace.HeightReference[t(e._0x3d7845)]&&(o=getSurfacePosition(this._map.scene,o,{...this[t(3044)],relativeHeight:!0}))),this[t(e._0x3a5da3)]=o;const r=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(i,o),c=this[t(e._0x19555f)],_=this.scaleByDistance;let l=s.positionCartographic.height;if((this._hasZIndex||c||_)&&i.mode===Cesium__namespace.SceneMode.SCENE3D&&(l=Cesium__namespace[t(295)].distance(o,s.positionWC)),!r||c&&(c[t(e._0x219ec2)]>l||c.far<l))return this[t(785)].style.display==="block"&&this.hide(),!1;if(this.depthTest&&i.mode===Cesium__namespace.SceneMode.SCENE3D&&!new Cesium__namespace.EllipsoidalOccluder(i.globe[t(1782)],i[t(3400)].positionWC).isPointVisible(o))return this._container.style[t(e._0x4c87e0)]==="block"&&this[t(661)](),!1;this._container.style.display!=="block"&&(this[t(e._0x4db395)]=null,this._container[t(357)].display="block");const h=this.divHeight,d=this.divWidth;let u,m;switch(this.horizontalOrigin){case t(e._0x4456ab):case Cesium__namespace.HorizontalOrigin.CENTER:u=r.x-d/2;break;case"RIGHT":case Cesium__namespace.HorizontalOrigin.RIGHT:u=r.x-d;break;case"LEFT":case Cesium__namespace.HorizontalOrigin.LEFT:default:u=r.x;break}switch(this[t(2026)]){case"TOP":case Cesium__namespace.VerticalOrigin.TOP:m=r.y;break;case t(e._0x4456ab):case Cesium__namespace.VerticalOrigin.CENTER:m=r.y-h/2;break;case"BOTTOM":case Cesium__namespace.VerticalOrigin.BOTTOM:default:m=r.y-h;break}this.style.anchor?(u+=this[t(e._0x1a1964)].anchor[0],m+=this.style.anchor[1]):(this.style[t(e._0x2b0298)]&&(u+=this.style[t(2030)]),this[t(357)][t(e._0x3bce25)]&&(m+=this.style.offsetY));let f=1;_&&(l<=_.near?f=_.nearValue:l>_.near&&l<_.far?f=_.nearValue+(_.farValue-_.nearValue)*(l-_.near)/(_.far-_[t(e._0x569277)]):f=_[t(3833)]);const g="matrix("+f+t(2757)+f+","+u+","+m+")",b=this[t(709)];let y=this.options.zIndex||t(e._0x38f674);this._hasZIndex&&(y=Math.round(9999999-l),y<=0&&(y=9999999)),merge(this._container.style,{transform:g,"transform-origin":b,"-ms-transform":g,"-ms-transform-origin":b,"-webkit-transform":g,"-webkit-transform-origin":b,"-moz-transform":g,"-moz-transform-origin":b,"-o-transform":g,"-o-transform-origin":b,"z-index":y}),this.fire(EventType.change,{position:o,windowPosition:r,distance:l,x:u,y:m,height:h,width:d,scale:f},!0)}[_0x2397ca(661)](){const e=_0x2397ca;this._container.style[e(3378)]="none",this._camera_cache=null}_getGeoJsonGeometry(e){const t={_0x13924d:746,_0x3ce3bb:2381},x=_0x2397ca;return{type:"Point",coordinates:this[x(t._0x13924d)](e==null?void 0:e[x(t._0x3ce3bb)])}}addDynamicPosition(e,t){const x={_0x3334cd:3044,_0x4bfbd7:1577,_0x3db2e6:1294,_0x94c41d:3884,_0x5d8aba:3044,_0x44780b:3190,_0x5c933b:3044,_0x4503f6:760,_0x6597d7:558,_0x12c80d:2528,_0x2547a7:1579,_0x1e4040:1364,_0x2dd6be:652,_0x3a4de5:1173,_0x5ea3aa:1173,_0x1f53a2:799},i=_0x2397ca;var s,o,r,c;if(this.property)this.property!==this[i(x._0x4503f6)]&&(this.position=this.property);else{const d=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame,this[i(x._0x3334cd)].numberOfDerivatives);d.forwardExtrapolationType=this.options[i(x._0x4bfbd7)]??Cesium__namespace.ExtrapolationType.HOLD,d[i(1294)]=this[i(x._0x3334cd)][i(x._0x3db2e6)]??Cesium__namespace[i(x._0x94c41d)].HOLD,!this[i(x._0x5d8aba)][i(x._0x44780b)]&&(this.options[i(x._0x44780b)]=new Cesium__namespace.VelocityOrientationProperty(d),this[i(773)]&&(this._entity[i(3190)]=this[i(621)]())),this.property=d,this.position=d,this._maxCacheCount=this[i(x._0x5c933b)][i(3928)]??50}this._removeDynamicPosition();const _=((s=this[i(x._0x6597d7)])===null||s===void 0||(o=s.clock)===null||o===void 0?void 0:o.currentTime)||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace.JulianDate.addSeconds(_,t,new Cesium__namespace.JulianDate):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace[i(1522)].fromDate(new Date(t)):t=Cesium__namespace.JulianDate[i(x._0x12c80d)](t):t instanceof Date&&(t=Cesium__namespace.JulianDate[i(x._0x2547a7)](t)):t=_,e=LngLatPoint[i(x._0x1e4040)](e);const l=(r=this[i(x._0x2dd6be)])===null||r===void 0||(c=r._property)===null||c===void 0?void 0:c[i(764)];if(this.options.autoMiddleDynamicPosition&&(l==null?void 0:l[i(2027)])>0&&this[i(x._0x3a4de5)]){const d=l[l.length-1];if(Cesium__namespace.JulianDate.secondsDifference(_,d)>.3){let u=this[i(x._0x3a4de5)];this[i(835)]&&(u=getOnLinePointByLen(this[i(835)],this[i(x._0x5ea3aa)],.01,!0)),u=setPositionsHeight(u,e.alt||0),this._sampledPositionProperty[i(3684)](_,u)}}const h=e[i(x._0x1f53a2)]();return this.position[i(3684)](t,h),this}_removeDynamicPosition(){const e={_0x583c4e:2027,_0x372187:3355,_0x9f94c0:1241},t=_0x2397ca;var x,i;if(this._maxCacheCount<1)return;const s=(x=this[t(3777)])===null||x===void 0||(i=x._property)===null||i===void 0?void 0:i._times;if(!s||s[t(e._0x583c4e)]===0)return;const o=s.length-this[t(e._0x372187)]-1;o>0&&this.property[t(e._0x9f94c0)](new Cesium__namespace[t(2066)]({start:s[0],stop:s[o]}))}getCoordinate(e){return this.point?this.point.toArray(e):[]}openHighlight(e,t=!0){const x={_0x51e1e7:1429},i=_0x2397ca;var s;t&&(this._map.closeHighlight(),this._map[i(2691)]=this);const o=e||this._highlightOptions||((s=this[i(3831)])===null||s===void 0?void 0:s._highlightOptions);if(o&&o[i(x._0x51e1e7)]){for(let r=0,c=this._container[i(3406)].length;r<c;r++){const _=this._container[i(3406)][r];addClass(_,o.className)}this._highlightOptions=o,this.fire(EventType.highlightOpen,{},!0)}}closeHighlight(){const e={_0x686323:785},t=_0x2397ca;var x;if(!this[t(3401)]||((x=this._map)===null||x===void 0?void 0:x.last_highlighGraphic)!==this)return;this._map._clearLastHighlight();const i=this._highlightOptions;if(i&&i.className){for(let s=0,o=this._container.children.length;s<o;s++){const r=this[t(e._0x686323)].children[s];removeClass(r,i.className)}this[t(1788)](EventType.highlightClose,{},!0)}}_getWindowPosition(e){const t={_0x3a92ff:2937},x=_0x2397ca;if(isFirefox){const i=this[x(558)].container.getBoundingClientRect();return new Cesium__namespace.Cartesian2(e.clientX-i[x(t._0x3a92ff)],e[x(819)]-i.top)}return new Cesium__namespace[x(518)](e[x(1968)],e.layerY)}_getEventTarget(e){const t={_0x5ce41d:3831,_0x4cfb54:3426},x=_0x2397ca;e.stopPropagation&&e.stopPropagation();const i=this[x(2792)](e),s={mouseEvent:e,cartesian:this.position,windowPosition:i,sourceTarget:this,graphic:this,layer:this._layer};return this[x(t._0x5ce41d)]&&(this._layer[x(t._0x4cfb54)]||this._layer._hasEdit&&this.hasEdit)&&(s[x(641)]=getCurrentMousePosition(this._map[x(3399)],i)),s}[_0x2397ca(1628)](e){if(this._enabledEdit)return;const t=this._getEventTarget(e);t.position=t.windowPosition,this.fire(EventType.click,t,!0)}[_0x2397ca(2942)](e){const t={_0x1b89eb:3851},x=_0x2397ca;if(e.button!==2)return;const i=this[x(t._0x1b89eb)](e);i.position=i.windowPosition,this.fire(EventType[x(3852)],i,!0)}_container_onMouseMoveHandler(e){const t={_0x1f3256:1788},x=_0x2397ca;if(this._enabledEdit)return;this._map.mouseEvent.clearMoveTargetDelay();const i=this._getEventTarget(e);i.endPosition=i.windowPosition,this._map[x(t._0x1f3256)](EventType.mouseMove,i),this._map.fire(EventType.mouseMoveTarget,i),!this._hasMouseOver&&this.fire(EventType[x(811)],i,!0),this._hasMouseOver=!0}[_0x2397ca(3360)](e){const t={_0x5aea64:3851},x=_0x2397ca;if(this._enabledEdit)return;this._hasMouseOver=!1;const i=this[x(t._0x5aea64)](e);this[x(1788)](EventType[x(3152)],i,!0)}autoSurfaceHeight(e){const t={_0x37a006:558},x=_0x2397ca;return getSurfaceHeight(this[x(t._0x37a006)].scene,this.position,e??this[x(3044)])[x(1286)](i=>{i.position&&(this.position=i.position)})}_style2Json(e,t){return DivGraphicStyleConver.toJSON(e,t,!0)}getRectangle(e){const t={_0xb8524d:703},x=_0x2397ca,i=this[x(t._0xb8524d)];return i?getRectangle([i],e==null?void 0:e.isFormat):void 0}startDraw(e){const t={_0x326fba:2728,_0x373ce9:3417,_0x5962f1:2173,_0x408af2:3669},x=_0x2397ca;if(this[x(t._0x326fba)])return this;if(this._enabledDraw=!0,e&&this[x(2717)](e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map[x(t._0x373ce9)](!0),this[x(3237)](!1),this[x(t._0x5962f1)](),this.fire(EventType[x(t._0x408af2)],{drawtype:this.type,graphic:this},!0)}stopDraw(){const e={_0x3eb923:3417,_0x57bcc0:558,_0x3e580b:1259},t=_0x2397ca;var x,i,s;if(!this._enabledDraw)return this;this._stopDrawHook(),this._map[t(e._0x3eb923)](!1),this.enableControl(!0),this[t(e._0x57bcc0)].closeSmallTooltip(),this._enabledDraw=!1,this.fire(EventType[t(913)],{drawtype:this.type,graphic:this},!0),(x=this.options)!==null&&x!==void 0&&x.success&&this[t(3044)].success(this),(i=this.options)!==null&&i!==void 0&&(s=i[t(e._0x3e580b)])!==null&&s!==void 0&&s.resolve&&this.options[t(1259)].resolve(this)}[_0x2397ca(2173)](){this[_0x2397ca(4015)](!1),this._map.on(EventType.mouseMove,this._onMouseMoveHandler_point,this),this._map.on(EventType.click,this._onClickHandler_point,this)}[_0x2397ca(1085)](){const e={_0x196676:297},t=_0x2397ca;this._map[t(3573)](EventType.mouseMove,this._onMouseMoveHandler_point,this),this._map.off(EventType.click,this[t(e._0x196676)],this),this[t(4015)](this.hasBindEvent())}_onMouseMoveHandler_point(e){const t={_0x373737:641,_0x5d8a8a:760,_0x312516:558,_0x4dcaa3:1788},x=_0x2397ca,i=e[x(t._0x373737)];i&&(this[x(t._0x5d8a8a)]=i),this._map.openSmallTooltip(e.endPosition,this._draw_tooltip||this[x(t._0x312516)].getLangText("_单击完成绘制")),this[x(t._0x4dcaa3)](EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!0)}_onClickHandler_point(e){const t=e.cartesian;t&&(this.position=t),this.stopDraw()}_setPositionsToCallback(){}[_0x2397ca(1182)](){}endDraw(){if(!this._enabledDraw)return this;this._positions_draw.length<this._minPointNum||(this.updateAttrForDrawing(!1),this.stopDraw())}[_0x2397ca(2140)](e){}[_0x2397ca(3237)](e){const t={_0x1b1c99:558},x=_0x2397ca;this._map.mouseEvent.enabledMoveTarget=e,this[x(t._0x1b1c99)].popup&&(this._map.popup[x(407)]=e),this[x(558)].tooltip&&(this._map.tooltip.enabled=e)}startEditing(){const e={_0x555b00:371,_0x4454ef:2679},t=_0x2397ca;if(this[t(e._0x555b00)])return this;if(this._enabledEdit=!0,!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this[t(e._0x4454ef)]=this[t(558)][t(1337)]("_释放后完成修改"),this.enableControl(!1),!this.editing&&(this[t(3654)]=new this.EditClass(this)),this[t(3654)].activate&&this.editing.activate()}stopEditing(){const e={_0x5577bb:558,_0x2d7e06:371},t=_0x2397ca;var x;if(!this[t(371)])return this;(x=this[t(3654)])!==null&&x!==void 0&&x.disable&&this[t(3654)].disable(),this.enableControl(!0),this[t(e._0x5577bb)].closeSmallTooltip(),this[t(e._0x2d7e06)]=!1}}register$4("div",DivGraphic,!0);const DEF_STYLE$7={font_size:15,font_family:"楷体",color:"#ccc",boderColor:"rgb(21, 209, 242)",horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin.CENTER};class DivBoderLabel extends DivGraphic{constructor(e={}){const t={_0x780d15:1526},x=_0x2397ca;e.style={...DEF_STYLE$7,...e.style},e.style.html=getHtmlByStyle$2(e.style,e.attr),super(e);const i=e.style.font_size,s=e.style[x(t._0x780d15)]||getStrLength(e.style.text)*i*.6,o=e.style.height||i*2;this._divWidth=s,this._divHeight=o}get[_0x2397ca(2945)](){return this[_0x2397ca(2809)]}get divHeight(){return this._divHeight}[_0x2397ca(2458)](e){const t={_0x2e2fa6:639,_0x581dea:639,_0x1ec84e:639,_0x1dbf92:2458},x=_0x2397ca;return(Cesium__namespace[x(t._0x2e2fa6)](e[x(1089)])||Cesium__namespace[x(t._0x581dea)](e.boderColor)||Cesium__namespace[x(t._0x581dea)](e[x(2826)])||Cesium__namespace[x(639)](e.font_family)||Cesium__namespace[x(t._0x1ec84e)](e.text))&&(this.html=getHtmlByStyle$2(this.style,this.attr)),super[x(t._0x1dbf92)](e),this}}register$4("divBoderLabel",DivBoderLabel,!0);function getHtmlByStyle$2(n,e){const t={_0x5e1a8b:1453,_0x1c6c92:1526,_0x38d129:989},x=_0x2397ca,i=n.color,s=n[x(t._0x5e1a8b)],o=Cesium__namespace.Color.fromCssColorString(s).withAlpha(.5).toCssColorString(),r=n.font_size,c=n[x(t._0x1c6c92)]||getStrLength(n.text)*r*.6,_=n.height||r*2;return`
  <div class="mars3d-divBoderLabel" style="
  --text-font-size: `+r+`px;
  --boder-width: `+c+x(2369)+(c+r)+x(t._0x38d129)+(c+r-2)+`px;
  --boder-height: `+_+`px;
  --clip-height-1: `+(_+10)+`px;
  --clip-height-2: `+(_+8)+`px;
  --text-color: `+i+`;
  --border-color: `+s+`;
  --box-shadow-color: `+o+`;">
     <div class="mars3d-divBoderLabel-boder">
       <span class="mars3d-divBoderLabel-text" style="font-family:`+n.font_family+';">'+template(n.text,e,n.templateEmptyStr??!0)+`</span>
     </div>
  </div> `}const DEF_STYLE$6={color:"#f33349",horizontalOrigin:Cesium__namespace[_0x2397ca(653)].CENTER,verticalOrigin:Cesium__namespace[_0x2397ca(1396)][_0x2397ca(1864)]};class DivLightPoint extends DivGraphic{constructor(e={}){const t=_0x2397ca;e.style={...DEF_STYLE$6,...e[t(357)]},e.style.html=getHtmlByStyle$1(e.style,e[t(1578)]),super(e)}[_0x2397ca(2458)](e){const t={_0x280c7c:1089,_0x5da804:2384,_0x4d6183:357},x=_0x2397ca;return(Cesium__namespace.defined(e[x(t._0x280c7c)])||Cesium__namespace.defined(e.size)||Cesium__namespace.defined(e.label))&&(this[x(t._0x5da804)]=getHtmlByStyle$1(this[x(t._0x4d6183)],this[x(1578)])),super._updateStyleBaseHook(e),this}}register$4(_0x2397ca(374),DivLightPoint,!0);function getHtmlByStyle$1(n,e){const t=_0x2397ca;return`
  <div class="mars3d-animation-point" style="color:`+n.color+";width: "+n[t(1005)]+"px;height: "+n.size+`px;">
    <p></p>
    `+(n.label?t(756)+(n.label[t(1089)]||n.color)+t(3579)+template(n[t(743)].text,e,n.label.templateEmptyStr??!0)+"</div>":"")+`
  </div>`}const DEF_STYLE$5={color:"white",font_family:"楷体",font_size:15,lineHeight:100,circleSize:10,horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin[_0x2397ca(1382)]};class DivUpLabel extends DivGraphic{constructor(e={}){const t={_0x4a46de:1578},x=_0x2397ca;e.style={...DEF_STYLE$5,...e.style},e.style.html=getHtmlByStyle(e.style,e[x(t._0x4a46de)]),super(e)}_updateStyleBaseHook(e){const t={_0x2e147a:639},x=_0x2397ca;return(Cesium__namespace[x(639)](e[x(1089)])||Cesium__namespace[x(t._0x2e147a)](e.circleSize)||Cesium__namespace.defined(e[x(2826)])||Cesium__namespace.defined(e.font_family)||Cesium__namespace[x(t._0x2e147a)](e.lineHeight)||Cesium__namespace[x(639)](e.text))&&(this.html=getHtmlByStyle(this.style,this.attr)),super[x(2458)](e),this}}register$4(_0x2397ca(2189),DivUpLabel,!0);function getHtmlByStyle(n,e){const t={_0x5797b3:2056,_0x2a60a4:484,_0x5f10f4:1418},x=_0x2397ca,i=n[x(1089)],s=n[x(t._0x5797b3)];return`
  <div class="mars3d-divUpLabel" style="color: `+i+`;">
    <div class="mars3d-divUpLabel-text" style="font-family:`+n.font_family+";font-size: "+n.font_size+'px;">'+template(n[x(t._0x2a60a4)],e,!0)+`</div>
    <div class="mars3d-divUpLabel-line"  style="
        height: `+n[x(t._0x5f10f4)]+`px;
        background-color: `+i+x(1194)+s+`px;
        height: `+s+x(3079)+s/2+`px);
        background-color: `+i+`;"></div>
  </div> `}class Popup extends DivGraphic{constructor(e={}){const t={_0x4e0b2f:3362,_0x43dd7e:2165,_0x47401c:357,_0x12a1ab:1864,_0x4955ea:1210,_0x3726dd:3999,_0x1c3f1d:1864,_0x2c1519:2030,_0x456124:2026,_0xd1466:2030,_0x518237:653,_0x329828:3044,_0x19ca55:2491,_0x9e3aec:1662,_0x3c1513:1898,_0x5180e0:759},x=_0x2397ca;e.eventParent=e[x(1847)]??!1,e[x(1e3)]=e[x(1e3)]??!1,e.animation=e[x(t._0x4e0b2f)]??!0,e.zIndex=e[x(952)]??1e7,e[x(357)]=e.style||{},e.style.direction=e.style[x(t._0x43dd7e)]??"top";const i={};switch(e[x(t._0x47401c)].direction){case"top":i.offsetY=-8,i[x(3999)]=Cesium__namespace.HorizontalOrigin[x(t._0x12a1ab)],i.verticalOrigin=Cesium__namespace.VerticalOrigin.BOTTOM;break;case"bottom":i[x(2143)]=8,i.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,i.verticalOrigin=Cesium__namespace[x(1396)][x(t._0x4955ea)];break;case"center":i[x(t._0x3726dd)]=Cesium__namespace.HorizontalOrigin[x(t._0x1c3f1d)],i.verticalOrigin=Cesium__namespace.VerticalOrigin[x(1864)];break;case"right":i[x(t._0x2c1519)]=8,i.horizontalOrigin=Cesium__namespace.HorizontalOrigin.LEFT,i[x(t._0x456124)]=Cesium__namespace.VerticalOrigin[x(t._0x12a1ab)];break;case x(2937):i[x(t._0xd1466)]=-8,i.horizontalOrigin=Cesium__namespace[x(t._0x518237)].RIGHT,i.verticalOrigin=Cesium__namespace[x(1396)].CENTER;break}e[x(t._0x47401c)]={...i,...e.style},super(e),this._depthTest=this[x(t._0x329828)].depthTest??this[x(t._0x47401c)][x(t._0x19ca55)]??!1,!Cesium__namespace.defined(this.style.template)&&this.style[x(t._0x9e3aec)]!==!1&&(this.style.template=this[x(554)]()),this[x(t._0x3c1513)](EventType[x(t._0x5180e0)],()=>{this._fireTarget_open()})}get[_0x2397ca(3887)](){const e=_0x2397ca;var t;return(t=this[e(3044)])===null||t===void 0?void 0:t.target}get[_0x2397ca(2898)](){const e=_0x2397ca;var t,x;return(t=this.options)!==null&&t!==void 0&&t.event?this.options[e(4032)]:(x=this.options)!==null&&x!==void 0&&x.target?this.options.target:this}_getDefaultTemplate(){const e={_0x56d1bd:3022,_0x5070c4:1553,_0x95dc8b:1308},t=_0x2397ca;let x;this[t(357)].closeButton??!0?x='<span  class="mars3d-popup-close-button mars3d-popup-color closeButton" >×</span>':x="";let i="";return this.style.maxWidth&&(i+="max-width: "+this.style.maxWidth+t(e._0x56d1bd)),this.style.minWidth&&(i+="min-width: "+this[t(357)].minWidth+"px;"),this.style.maxHeight&&(i+=t(597)+this.style.maxHeight+t(e._0x56d1bd)),`
      <div class="mars3d-popup `+(!this.style.timeRender&&this.options[t(3362)]?t(e._0x5070c4):"")+`">
        `+x+t(e._0x95dc8b)+this.id+'"  class="mars3d-popup-content mars3d-popup-color" style="'+i+`">{content}</div>
        </div>
        <div class="mars3d-popup-tip-container">
          <div class="mars3d-popup-tip mars3d-popup-background"></div>
        </div>
      </div>`}[_0x2397ca(2641)](){const e={_0x34c1ae:1443},t=_0x2397ca,x=this._container.querySelector(t(e._0x34c1ae));x&&x.addEventListener("click",i=>{const s=t;this.target&&this[s(3887)].closeHighlight&&this[s(3887)].closeHighlight(),this.remove(!0)})}fireTarget(e,t={},x=!0){const i={_0x2aed46:2469,_0x2bc772:1788},s=_0x2397ca,o=this.target||this._map;if(o){if(this.options.event)for(const r in this[s(3044)].event)r==="options"||r===s(953)||(t[r]=this.options[s(4032)][r]);t[s(i._0x2aed46)]=o,t.attr=this[s(1578)],t.container=this.container,this[s(540)](t),o[s(i._0x2bc772)](e,t,x)}}_fireBindDataEx(e){e.popup=this}_addedHook(e){const t={_0x43e1cb:3984},x={_0x4fd415:1526,_0x1eaafd:558,_0xe27617:518,_0x322985:3399,_0x228e98:1693},i=_0x2397ca;super._addedHook(e),this.once(EventType.change,s=>{const o=_0x3361;if(this.options[o(3419)]&&this._map&&(s.y<0||s.x<0||s.x>this._map.scene.canvas.clientWidth-s[o(x._0x4fd415)]||s.y>this[o(x._0x1eaafd)].scene[o(1733)].clientHeight-s.height)){const r=s.width/2+s.x,c=s.height/2+s.y,_=new Cesium__namespace[o(x._0xe27617)](r,c),l=this._map.scene.camera.getPickRay(_);let h=this[o(558)][o(x._0x322985)].globe.pick(l,this[o(558)].scene);!h&&(h=this[o(558)][o(3399)][o(3400)][o(x._0x228e98)](_)),this._map.flyToPoint(h)}}),this[i(3887)]&&this.target.on(EventType.updatePosition,this[i(t._0x43e1cb)],this)}_removedHook(){const e={_0x2ffeb9:380},t=_0x2397ca;this.target&&this.target.off(EventType.updatePosition,this._graphic_updatePosition,this),this._fireTarget_close(),super[t(e._0x2ffeb9)]()}_graphic_updatePosition(e){const t=_0x2397ca;var x;(x=e.graphic)!==null&&x!==void 0&&x._getPopupPosition&&(this.position=e.graphic[t(1151)]())}_fireTarget_open(){this.fireTarget(EventType.popupOpen)}_fireTarget_close(){const e={_0x2829ec:588},t=_0x2397ca;this.fireTarget(EventType[t(e._0x2829ec)])}[_0x2397ca(1238)](){}_container_onClickHandler(){}_container_onMousedownHandler(){}_container_onMouseMoveHandler(){}_container_onMouseoutHandler(){}[_0x2397ca(1813)](){return this[_0x2397ca(3044)].pointerEvents??!0}}register$4(_0x2397ca(3848),Popup);class Tooltip extends Popup{_getDefaultTemplate(){const e=_0x2397ca;return'<div id="tooltip-'+this.id+'"  class="mars3d-tooltip mars3d-tooltip-'+this[e(357)][e(2165)]+'">{content}</div>'}[_0x2397ca(540)](e){const t={_0x1a8893:3660},x=_0x2397ca;e[x(t._0x1a8893)]=this}[_0x2397ca(1747)](){this.fireTarget(EventType.tooltipOpen)}_fireTarget_close(){const e=_0x2397ca;this.fireTarget(EventType[e(1406)])}}register$4("tooltip",Tooltip);const DEF_STYLE$4={startColor:Cesium__namespace.Color.LIGHTCYAN.withAlpha(.3),endColor:Cesium__namespace.Color.WHITE.withAlpha(0),startScale:2,endScale:4,minimumParticleLife:3,maximumParticleLife:6,minimumSpeed:1,maximumSpeed:2,emissionRate:100};class ParticleSystem extends BasePointPrimitive{constructor(e={}){const t=_0x2397ca;e.style={...DEF_STYLE$4,emitter:new Cesium__namespace.CircleEmitter(1),...e.style},super(e),this.emitterModelMatrix=new Cesium__namespace[t(1046)],this.translation=new Cesium__namespace.Cartesian3,this.rotation=new Cesium__namespace.Quaternion,this.hpr=new Cesium__namespace[t(845)],this.trs=new Cesium__namespace.TranslationRotationScale}get czmObject(){return this[_0x2397ca(2417)]}get maxHeight(){return this.style.maxHeight}set maxHeight(e){this.style.maxHeight=e}get[_0x2397ca(3807)](){const e=_0x2397ca;return this.style[e(3807)]||0}set gravity(e){this.style.gravity=e}get transX(){return this.style.transX||0}set transX(e){this.style.transX=e}get transY(){return this.style.transY||0}set transY(e){const t={_0x1e85be:3494},x=_0x2397ca;this.style[x(t._0x1e85be)]=e}get[_0x2397ca(2305)](){return this.style.transZ||0}set transZ(e){const t={_0x59b167:2305},x=_0x2397ca;this.style[x(t._0x59b167)]=e}get particleSize(){return this[_0x2397ca(357)].particleSize||25}set particleSize(e){const t=_0x2397ca;this.style[t(3950)]=e,this[t(2417)]&&(this._primitive.minimumImageSize.x=e,this._primitive.minimumImageSize.y=e,this._primitive[t(2711)].x=e,this._primitive.maximumImageSize.y=e)}get[_0x2397ca(1842)](){return!1}_addedHook(e){const t={_0x28fffc:3044,_0x32c03e:760,_0x4a7496:2313,_0x551e7d:1722},x={_0x17e0ae:2482,_0x5a57ee:3531},i=_0x2397ca;if(!this.show)return;const s=this._map.clock.currentTime,o={imageSize:new Cesium__namespace.Cartesian2(this.particleSize,this[i(3950)]),modelMatrix:this._computeModelMatrix(s),emitterModelMatrix:this._computeEmitterModelMatrix(s),...this.style,show:this.show};this[i(2417)]=new Cesium__namespace.ParticleSystem(o),this.primitiveCollection[i(565)](this._primitive),this[i(3044)].position&&(this[i(t._0x28fffc)].position instanceof Cesium__namespace.CallbackProperty||this.options[i(760)]instanceof Cesium__namespace[i(3387)])&&(this._orientation=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(this.options[i(t._0x32c03e)]),this.property=this[i(3044)][i(760)]),this._bindUpdateCallback(),this[i(t._0x4a7496)]=isFunction(this[i(3044)].modelMatrix)||this.property,this[i(3352)]=isFunction(this.options.emitterModelMatrix)||this[i(t._0x551e7d)]||this.pitch||this.roll||this.transX||this.transY||this[i(2305)];const r=this[i(2417)].update,c=this;this[i(2417)].update=function(_){const l=i;c._update(_),this._previousTime&&Cesium__namespace.JulianDate.secondsDifference(_.time,this._previousTime)>10&&(this[l(x._0x17e0ae)]=Cesium__namespace[l(1522)].clone(_[l(x._0x5a57ee)],this[l(x._0x17e0ae)])),r.bind(this)(_)}}_removedHook(){this._map&&this.primitiveCollection.remove(this._primitive)}[_0x2397ca(2306)](e){const t={_0x4dae26:2417,_0x3beb46:558,_0x321bba:3777,_0x25b63a:3455,_0x416da1:3531,_0x1be699:3400,_0x2b1fb6:368,_0x5edde4:1295,_0x22f2f0:2417,_0x4f138a:2417},x=_0x2397ca;!this[x(3482)]||!this[x(t._0x4dae26)]||!this[x(t._0x3beb46)]||(this.property&&(this[x(1173)]=getPositionValue(this[x(t._0x321bba)],e.time)),this._hasUpdate_modelMatrix&&(this[x(2417)][x(t._0x25b63a)]=this[x(3453)](e[x(3531)])),this._hasUpdate_emitterModelMatrix&&(this._primitive.emitterModelMatrix=this._computeEmitterModelMatrix(e[x(t._0x416da1)])),Cesium__namespace.defined(this[x(1295)])&&e.frameNumber%10===0&&(this[x(558)][x(t._0x1be699)][x(t._0x2b1fb6)].height<this[x(t._0x5edde4)]?this[x(t._0x22f2f0)][x(3482)]!==this.show&&(this._primitive.show=this[x(3482)]):this._primitive[x(3482)]&&(this._primitive.show=!1)),this[x(t._0x4f138a)][x(2593)]&&this.fire("complete"))}_computeModelMatrix(e){const t={_0x591a5f:3455,_0x2f217e:1620,_0x4ca19e:1046},x=_0x2397ca;return this[x(3044)][x(t._0x591a5f)]?isFunction(this[x(3044)].modelMatrix)?this.options.modelMatrix(e):this.options.modelMatrix:this._position?Cesium__namespace[x(t._0x2f217e)].eastNorthUpToFixedFrame(this._position):new Cesium__namespace[x(t._0x4ca19e)]}[_0x2397ca(1528)](e){const t={_0x4fd205:2296,_0x4224a4:654,_0x44d3ee:790,_0x8a1f0e:3494,_0x328927:1536,_0x569d92:2722,_0x451ebe:790},x=_0x2397ca;if(this.options.emitterModelMatrix)return isFunction(this.options.emitterModelMatrix)?this[x(3044)][x(2296)](e):this[x(3044)][x(t._0x4fd205)];const i=this.heading,s=this.pitch,o=this.roll;return this[x(t._0x4224a4)]=Cesium__namespace.HeadingPitchRoll.fromDegrees(i,s,o,this.hpr),this[x(t._0x44d3ee)].translation=Cesium__namespace.Cartesian3.fromElements(this[x(3607)],this[x(t._0x8a1f0e)],this[x(2305)],this.translation),this[x(t._0x44d3ee)].rotation=Cesium__namespace.Quaternion[x(t._0x328927)](this[x(654)],this[x(t._0x569d92)]),Cesium__namespace.Matrix4[x(3225)](this[x(t._0x451ebe)],this[x(t._0x4fd205)]),this.emitterModelMatrix}_bindUpdateCallback(){const e={_0xa8fd49:2417,_0x2f9f7b:977},t={_0x5e80bc:295,_0x5b70a6:3807},x=_0x2397ca;if(this.options.updateCallback){this[x(e._0xa8fd49)].updateCallback=this[x(3044)][x(e._0x2f9f7b)];return}if(this.gravity===0)this._primitive[x(e._0x2f9f7b)]=void 0;else if(!this._primitive.updateCallback){const i=this,s=new Cesium__namespace.Cartesian3;this._primitive.updateCallback=function(o,r){const c=x,_=o.position;Cesium__namespace[c(t._0x5e80bc)].normalize(_,s),Cesium__namespace.Cartesian3.multiplyByScalar(s,i[c(t._0x5b70a6)]*r,s),o.velocity=Cesium__namespace[c(295)].add(o.velocity,s,o[c(1913)])}}}_updateStyleHook(e,t){const x={_0x5a5480:4018},i=_0x2397ca;if(this._primitive){for(const s in t)this._primitive[s]=t[s];t.particleSize&&(this[i(3950)]=t[i(3950)]),t.gravity&&this[i(x._0x5a5480)]()}this[i(3352)]=isFunction(this.options.emitterModelMatrix)||this.heading||this.pitch||this.roll||this.transX||this.transY||this.transZ}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("particleSystem",ParticleSystem,!0);var ArcFrustumFS=_0x2397ca(2420),ArcFrustumVS=`in vec4 aPosition;

void main() {
  gl_Position = czm_modelViewProjection * vec4(aPosition.xyz, 1.0);
}
`;const DEF_STYLE$3={color:Cesium__namespace[_0x2397ca(2134)].WHITE};class ArcFrustum extends BasePointPrimitive{constructor(e={}){const t={_0x1d8184:1556},x=_0x2397ca;e.style={...DEF_STYLE$3,...e.style},super(e),delete this._position,delete this[x(t._0x1d8184)],this[x(2272)]=new Cesium__namespace[x(1457)],this._color=getCesiumColor(this.style.color)}get czmObject(){return this}get color(){return this._color}set color(e){this._color=e}get angle(){return this.style.angle}set[_0x2397ca(3143)](e){const t={_0x46cca1:357},x=_0x2397ca;this[x(t._0x46cca1)].angle=e,this.destroyCommands()}get angle2(){return this[_0x2397ca({_0x379dcf:357}._0x379dcf)].angle2??this.style.angle}set angle2(e){this.style.angle2=e,this.destroyCommands()}get modelMatrix(){const e={_0x379e2c:2500,_0x3223c8:1722,_0x1cc438:2500,_0x4b3c24:357,_0x580257:1722},t=_0x2397ca;if(this.options[t(3455)])return this.options.modelMatrix;const x=this.position,i=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math[t(e._0x379e2c)](this[t(e._0x3223c8)]),Cesium__namespace.Math.toRadians(this[t(227)]),Cesium__namespace[t(3876)].toRadians(this.roll)),s=new Cesium__namespace.Camera(this[t(558)].scene);return s.position=x,s.frustum.fov=Cesium__namespace.Math[t(e._0x1cc438)](this.angle*2),s.frustum.aspectRatio=this[t(3143)]/this.angle2,s.frustum.near=.01,s[t(1209)].far=this[t(e._0x4b3c24)].distance,s.setView({destination:x,orientation:{heading:i[t(e._0x580257)],pitch:i.pitch,roll:i.roll}}),s.inverseViewMatrix}updateModelMatrix(){this.destroyCommands()}_addedHook(e){this.show&&this.primitiveCollection.add(this)}[_0x2397ca(380)](){const e={_0x3546e5:741,_0x2555c7:3595},t=_0x2397ca;this.primitiveCollection[t(e._0x3546e5)](this)&&(this[t(2055)]=!0,this[t(e._0x2555c7)].remove(this),this[t(2055)]=!1)}update(e){const t={_0x5bcc93:1753},x=_0x2397ca;this.show&&(!Cesium__namespace.defined(this._command)&&(this[x(2855)]=this[x(t._0x5bcc93)](e.context)),e.passes[x(674)]&&Cesium__namespace.defined(this._command)&&e.commandList[x(2434)](this._command))}destroyCommands(){const e={_0x10054f:1041,_0x5166bb:1974},t=_0x2397ca;Cesium__namespace.defined(this._command)&&(this._command[t(e._0x10054f)]&&this._command[t(1041)][t(2941)](),this[t(2855)][t(e._0x5166bb)]&&this._command.vertexArray.destroy(),delete this._command)}createCommand(e){const t={_0x4949c5:3160,_0x118b09:2156,_0x5ef673:399,_0x32d8b7:2272,_0x420cb7:737,_0x19ba8c:2620,_0x53e9db:2658},x=_0x2397ca;this.destroyCommands();const i=this[x(3349)](),s={aPosition:0},o=Cesium__namespace[x(t._0x4949c5)].createVertexBuffer({context:e,typedArray:i[x(t._0x118b09)],usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),r=[{index:s[x(2183)],vertexBuffer:o,componentsPerAttribute:3,componentDatatype:Cesium__namespace[x(t._0x5ef673)][x(254)],offsetInBytes:0,strideInBytes:12,normalize:!1}],c=Cesium__namespace.Buffer.createIndexBuffer({context:e,typedArray:i.indices,usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace.IndexDatatype.UNSIGNED_SHORT}),_=new Cesium__namespace.VertexArray({context:e,attributes:r,indexBuffer:c}),l=this.modelMatrix;this[x(t._0x32d8b7)].radius=this.style.distance,this.position?this._boundingSphere.position=this.position:(Cesium__namespace[x(295)][x(3069)](Cesium__namespace.Cartesian3[x(t._0x420cb7)],this._boundingSphere.center),Cesium__namespace.BoundingSphere.transform(this._boundingSphere,l,this._boundingSphere));const h=new Cesium__namespace.DrawCommand({primitiveType:Cesium__namespace.PrimitiveType[x(t._0x19ba8c)],shaderProgram:Cesium__namespace.ShaderProgram.fromCache({context:e,vertexShaderSource:ArcFrustumVS,fragmentShaderSource:ArcFrustumFS,attributeLocations:s}),vertexArray:_,modelMatrix:l,boundingVolume:this._boundingSphere,uniformMap:{color:()=>this.color},pass:Cesium__namespace[x(t._0x53e9db)].OPAQUE,owner:this,cull:!0,renderState:Cesium__namespace.RenderState.fromCache({cull:{enabled:!0},depthTest:{enabled:!0}})});return this.bindPickId(h),h}createVertices(){const e={_0x5e1586:1314,_0x5102b4:1314,_0x5981a2:399},t=_0x2397ca,x=this[t(357)].distance,i=20,s=(i+1)*(i+1)+1,o=Cesium__namespace.ComponentDatatype.createTypedArray(Cesium__namespace[t(399)].FLOAT,3*s);let r=3;const c=Cesium__namespace.Math.toRadians(this.angle*2),_=Cesium__namespace.Math[t(2500)](this.angle2*2),l=Math.tan(.5*_),h=x*l,d=Math.PI-.5*c;let u=0,m=0;const f=c/i;for(let w=0;w<i+1;w++){u=d+w*f;const H=h/(x/Math.cos(u)),D=Math.atan(H),F=-D,L=2*D/i;for(let B=0;B<i+1;B++)m=F+B*L,o[r++]=x*Math[t(e._0x5e1586)](m)*Math.sin(u),o[r++]=x*Math.sin(m),o[r++]=x*Math[t(1314)](m)*Math[t(e._0x5102b4)](u)}const g=2*(4+5*i+2*i*3),b=Cesium__namespace[t(399)].createTypedArray(Cesium__namespace.ComponentDatatype.UNSIGNED_SHORT,g);let y=0;b[y++]=0,b[y++]=1,b[y++]=0,b[y++]=i+1,b[y++]=0,b[y++]=i*(i+1)+1,b[y++]=0,b[y++]=(i+1)*(i+1);for(let w=0;w<5;w++)for(let H=0;H<i;H++)b[y++]=1+H+5*(i+1)*w,b[y++]=1+(H+1)+5*(i+1)*w;for(let w=0;w<5;w++)for(let H=0;H<i;H++)b[y++]=1+(i+1)*H+5*w,b[y++]=1+(i+1)*(H+1)+5*w;const C=i*i*3*2+3*i*4,v=Cesium__namespace.ComponentDatatype.createTypedArray(Cesium__namespace[t(e._0x5981a2)].SHORT,C),M=1;for(let w=0;w<i;w++)for(let H=0;H<i;H++)v[y++]=M+w+H*(i+1),v[y++]=M+w+1+H*(i+1),v[y++]=M+w+(H+1)*(i+1),v[y++]=M+w+1+H*(i+1),v[y++]=M+w+1+(H+1)*(i+1),v[y++]=M+w+(H+1)*(i+1);for(let w=0;w<i;w++)v[y++]=w+1+M,v[y++]=w+M,v[y++]=0,v[y++]=0,v[y++]=w+i*(i+1)+M,v[y++]=w+1+i*(i+1)+M;for(let w=0;w<i;w++)v[y++]=0,v[y++]=w*(i+1)+M,v[y++]=(w+1)*(i+1)+M,v[y++]=i+(w+1)*(i+1)+M,v[y++]=i+w*(i+1)+M,v[y++]=0;return{vertices:o,indices:b}}}register$4(_0x2397ca(3689),ArcFrustum,!0);var TetrahedronFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;
uniform vec4 color;
uniform float globalAlpha;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
  #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
  #endif
  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  vec2 st = materialInput.st;
  czm_material material = czm_getDefaultMaterial(materialInput);

  material.alpha = (mix(0.1, 1.0, clamp((1.0 - st.t) * color.a, 0.0, 1.0)) + (1.0 - sign(st.t - czm_frameNumber * 0.001)) * 0.2 + 0.4) * globalAlpha;
  material.diffuse = color.rgb;

  #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
  #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
  #endif
}
`,TetrahedronVS=`in vec3 position;
in vec3 normal;
in vec2 st;
in float batchId;
out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

void main() {
  v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;       // position in eye coordinates
  v_normalEC = czm_normal * normal;                               // normal in eye coordinates
  v_st = st;
  gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`;const DEF_STYLE$2={width:20,height:30,color:new Cesium__namespace.Color(.8,.8,0,.8),animation:!0,moveHeight:30,moveDuration:2,rotationAngle:1};class Tetrahedron extends BasePointPrimitive{constructor(e={}){e.style={...DEF_STYLE$2,...e.style},super(e),this._globalAlpha=1}get czmObject(){return this}get color(){return this[_0x2397ca({_0x180554:3463}._0x180554)]}set color(e){this._color=getCesiumColor(e)}get[_0x2397ca(3455)](){const e={_0x3ca8f2:357},t=_0x2397ca;if(this.options.modelMatrix)return this.options.modelMatrix;if(!this[t(760)])return Cesium__namespace.Matrix4.IDENTITY;const x=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),i=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace[t(295)](this.style.width,this.style[t(1526)],this[t(e._0x3ca8f2)].height));return Cesium__namespace.Matrix4.multiply(x,i,new Cesium__namespace.Matrix4)}_addedHook(e){const t={_0xb57a9b:3482,_0x2db3a3:353},x=_0x2397ca;!this[x(t._0xb57a9b)]||!this.position||(this[x(t._0x2db3a3)](e,e),this[x(3595)].add(this))}_removedHook(){const e=_0x2397ca;this.primitiveCollection&&this.primitiveCollection.contains(this)&&(this[e(2055)]=!0,this.primitiveCollection.remove(this),this._noDestroy=!1),delete this._modelMatrix}[_0x2397ca(325)](){const e={_0x571c3f:3455},t=_0x2397ca;this._modelMatrix=this[t(e._0x571c3f)],this._clearDrawCommand()}_updateStyleHook(e,t){const x={_0x21a898:2500},i=_0x2397ca;(t.width||t.height)&&this._updatePositionsHook(),this.color=e.color,this[i(1971)]=Cesium__namespace.Math[i(x._0x21a898)](e.rotationAngle),this._moveMaxHeight=e.moveHeight/this.style.height,this._moveMaxHeight!==0&&(this._moveDistanceStep=this._moveMaxHeight/(e.moveDuration*60),this._moveDistanceSum=0)}update(e){const t={_0x1f4d91:295,_0x4db973:1070,_0x3950a9:2434},x=_0x2397ca;if(this[x(3482)]){if(this[x(357)].animation){if(this._moveMaxHeight!==0){this._moveDistanceSum+=this._moveDistanceStep,(this._moveDistanceSum>=this._moveMaxHeight||this._moveDistanceSum<=0)&&(this._moveDistanceStep=-this._moveDistanceStep);const i=new Cesium__namespace[x(t._0x1f4d91)](0,0,this[x(1904)]);Cesium__namespace.Matrix4.multiplyByTranslation(this._modelMatrix,i,this._modelMatrix)}if(this[x(1971)]!==0){const i=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3[x(2517)](this._rotationAngle));Cesium__namespace.Matrix4.multiply(this._modelMatrix,i,this._modelMatrix)}}!Cesium__namespace[x(639)](this._drawCommand)&&(this._drawCommand=this[x(3758)](e.context)),e.passes.render?Cesium__namespace.defined(this[x(t._0x4db973)])&&e.commandList.push(this._drawCommand):Cesium__namespace.defined(this._pickCommand)&&e.commandList[x(t._0x3950a9)](this._pickCommand)}}[_0x2397ca(505)](){const e={_0x33408c:1974,_0x2c0f81:1041,_0x5270e8:1070,_0x3df5b4:1993},t=_0x2397ca;Cesium__namespace[t(639)](this._drawCommand)&&(this[t(1070)].vertexArray&&this._drawCommand[t(e._0x33408c)].destroy(),this._drawCommand.shaderProgram&&this[t(1070)][t(e._0x2c0f81)].destroy(),delete this[t(e._0x5270e8)]),Cesium__namespace.defined(this._pickCommand)&&(this._pickCommand.vertexArray&&this[t(e._0x3df5b4)].vertexArray.destroy(),this[t(1993)].shaderProgram&&this._pickCommand.shaderProgram.destroy(),delete this._pickCommand)}createDrawCommand(e){const t={_0x33c13e:2460,_0x549063:3562,_0x26aef7:1981,_0x39bd44:311,_0x63ebff:1457,_0x1dedfd:760,_0x3e3938:1974,_0x3316a9:3968,_0x4669eb:1041,_0x11ec0a:233,_0x3e7315:3455},x={_0xf7d7e0:2871},i=_0x2397ca,s=this[i(357)].translucent??!1,o=this.style[i(t._0x33c13e)]??!0,r=Cesium__namespace.Appearance[i(t._0x549063)](s,o,this.options.renderState),c=Cesium__namespace.RenderState[i(1981)](r),_={position:0,textureCoordinates:1},l=Cesium__namespace[i(3862)][i(t._0x26aef7)]({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:TetrahedronFS,attributeLocations:_}),h=this[i(t._0x39bd44)](e),d=new Cesium__namespace[i(t._0x63ebff)](this[i(t._0x1dedfd)],Math.max(this[i(357)][i(1526)],this[i(357)].height)),u=new Cesium__namespace.DrawCommand({primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,shaderProgram:l,vertexArray:h,modelMatrix:this._modelMatrix,renderState:c,boundingVolume:d,uniformMap:{color:()=>this.color,globalAlpha:()=>this._globalAlpha},castShadows:!1,receiveShadows:!1,pass:Cesium__namespace.Pass.TRANSLUCENT,owner:this,pickOnly:!0,pickCommand:new Cesium__namespace.DrawCommand({owner:this,pickOnly:!0})});this.bindPickId(u),u.pickId=e.createPickId({primitive:u,id:this.id});const m=new Cesium__namespace.DrawCommand({owner:u,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,pickOnly:!0});m[i(t._0x3e3938)]=h,m[i(1723)]=c;const f=Cesium__namespace[i(3862)][i(t._0x26aef7)]({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:Cesium__namespace.ShaderSource[i(t._0x3316a9)](TetrahedronFS,"uniform"),attributeLocations:_});return m[i(t._0x4669eb)]=f,m.uniformMap=u[i(t._0x11ec0a)],m.uniformMap.czm_pickColor=()=>u[i(x._0xf7d7e0)].color,m.pass=Cesium__namespace.Pass.TRANSLUCENT,m[i(3091)]=d,m[i(t._0x3e7315)]=this[i(1239)],this._pickCommand=m,u}[_0x2397ca(311)](e){const t={_0x41de8b:3186,_0x2aa9f5:399,_0x29390e:1091,_0x39c304:1884},x=_0x2397ca,i={position:0,textureCoordinates:1},s=this[x(t._0x41de8b)](),o=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[x(t._0x2aa9f5)].FLOAT,componentsPerAttribute:3,values:s.positions}),textureCoordinates:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[x(254)],componentsPerAttribute:2,values:s.sts})},indices:s[x(3391)],primitiveType:Cesium__namespace[x(486)].TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere[x(364)](s[x(t._0x29390e)])}),r=Cesium__namespace.GeometryPipeline.computeNormal(o);return Cesium__namespace[x(t._0x39c304)].fromGeometry({context:e,geometry:r,attributeLocations:i,bufferUsage:Cesium__namespace.BufferUsage.STATIC_DRAW})}cereatePositionsAndIndice(){const e=new Float64Array(15);e[0]=0,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=0,e[6]=0,e[7]=-1,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=-1;const t=new Uint16Array(6*3);t[0]=4,t[1]=2,t[2]=3,t[3]=4,t[4]=3,t[5]=0,t[6]=4,t[7]=0,t[8]=1,t[9]=4,t[10]=1,t[11]=2,t[12]=1,t[13]=2,t[14]=3,t[15]=1,t[16]=3,t[17]=0;const x=new Float32Array([0,0,1,0,1,1,0,1,.5,.5]);return{indices:t,positions:e,sts:x}}setOpacity(e){const t=_0x2397ca;this[t(875)]=e}_getDrawEntityClass(e,t){return this[_0x2397ca({_0x382358:3527}._0x382358)](e,t)}}register$4("tetrahedron",Tetrahedron,!0);var ViewShedFS=`uniform float mars3d_xAngle;
uniform float mars3d_yAngle;
uniform float mars3d_distance;
uniform float mars3d_opacity;

uniform vec3 mars3d_visibleAreaColor;
uniform vec3 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_lightDirectionEC;
uniform vec3 shadowMap_lightUp;
uniform vec3 shadowMap_lightDir;
uniform vec3 shadowMap_lightRight;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  //坐标与视点位置距离，大于最大距离则舍弃阴影效果
  vec4 lw = czm_inverseView * vec4(shadowMap_lightPositionEC.xyz, 1.0);
  vec4 vw = czm_inverseView * vec4(positionEC.xyz, 1.0);
  if(distance(lw.xyz, vw.xyz) > mars3d_distance) {
    out_FragColor = color;
    return;
  }

  //水平夹角限制
  vec3 ptOnSP = pointProjectOnPlane(shadowMap_lightUp, lw.xyz, vw.xyz);
  directionEC = ptOnSP - lw.xyz;
  float directionECMO = ptm(directionEC.xyz);
  float shadowMap_lightDirMO = ptm(shadowMap_lightDir.xyz);
  float cosJJ = dot(directionEC, shadowMap_lightDir) / (directionECMO * shadowMap_lightDirMO);
  float degJJ = abs(acos(cosJJ) * (180.0 / PI));
  if(degJJ > mars3d_xAngle) {
    out_FragColor = color;
    return;
  }

  //垂直夹角限制
  vec3 ptOnCZ = pointProjectOnPlane(shadowMap_lightRight, lw.xyz, vw.xyz);
  vec3 dirOnCZ = ptOnCZ - lw.xyz;
  float dirOnCZMO = ptm(dirOnCZ);
  float cosJJCZ = dot(dirOnCZ, shadowMap_lightDir) / (dirOnCZMO * shadowMap_lightDirMO);
  float degJJCZ = abs(acos(cosJJCZ) * (180.0 / PI));
  if(degJJCZ > mars3d_yAngle) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //可视域
  if(visibility == 1.0) {
    out_FragColor = mix(color, vec4(mars3d_visibleAreaColor, 1.0), mars3d_opacity);
  } else {
    out_FragColor = mix(color, vec4(mars3d_hiddenAreaColor, 1.0), mars3d_opacity);
  }
}
`;const DEF_STYLE$1={angle:60,angle2:45,distance:1e3,opacity:.6,addHeight:0,showFrustum:!1};class ViewShed extends BasePointPrimitive{constructor(e={},t=!0){const x={_0x88ef4e:577,_0x30c0cd:3194},i=_0x2397ca;t&&(e.style={...DEF_STYLE$1,...e[i(357)]}),super(e),this._visibleAreaColor=getCesiumColor(this.style[i(3217)],new Cesium__namespace.Color(0,1,0)),this._hiddenAreaColor=getCesiumColor(this.style[i(x._0x88ef4e)],new Cesium__namespace.Color(1,0,0)),this[i(x._0x30c0cd)]=this.options.terrain??!0,this._maximumDistance=this.style.maximumDistance??5e3}get[_0x2397ca(3735)](){return this._postProcessStage}get angle(){return this.style.angle}set angle(e){this.style.angle=e,this._updateDraw()}get angle2(){const e={_0x2ed227:3143},t=_0x2397ca;return this.style.angle2??this.style[t(e._0x2ed227)]}set angle2(e){const t=_0x2397ca;this.style[t(2924)]=e,this._updateDraw()}get visibleAreaColor(){return this._visibleAreaColor}set visibleAreaColor(e){const t=_0x2397ca;this[t(3196)]=getCesiumColor(e)}get hiddenAreaColor(){return this[_0x2397ca(2524)]}set[_0x2397ca(577)](e){const t=_0x2397ca;this[t(2524)]=getCesiumColor(e)}get[_0x2397ca(4010)](){return this.style.opacity}set[_0x2397ca(4010)](e){const t={_0x22c73c:4010},x=_0x2397ca;this.style[x(t._0x22c73c)]=e}get[_0x2397ca(1541)](){return this.style.showFrustum}set[_0x2397ca(1541)](e){this.style.showFrustum=e,this._frustumPrimitive.show=e}get distance(){return this.style.distance}set[_0x2397ca(230)](e){const t=_0x2397ca;this.style[t(230)]=e,this._updateDraw()}get shadowMap(){return this._shadowMap}get camera(){var e;return(e=this._shadowMap)===null||e===void 0?void 0:e._lightCamera}get targetPosition(){return this[_0x2397ca({_0x137cf7:3044}._0x137cf7)].targetPosition}set targetPosition(e){const t={_0x428513:230,_0x2f3b9a:960,_0x43926b:3399,_0x1d6523:357,_0x47a56f:778,_0x33f3a1:227},x=_0x2397ca;var i;if(this[x(3044)].targetPosition=e,!this._map)return;const s=this.position;if(!s)return;const o=LngLatPoint.toCartesian(e,(i=this._map)===null||i===void 0?void 0:i.currentTime);this.distance=Cesium__namespace.Cartesian3[x(t._0x428513)](s,o);const r=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[x(295)].subtract(o,s,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3[x(t._0x2f3b9a)](s,new Cesium__namespace.Cartesian3),_=new Cesium__namespace.Camera(this[x(558)][x(t._0x43926b)]);_.position=s,_.direction=r,_.up=c,this.style[x(1722)]=Cesium__namespace.Math.toDegrees(_.heading),this[x(t._0x1d6523)][x(227)]=Cesium__namespace.Math[x(t._0x47a56f)](_[x(t._0x33f3a1)]),this._updateDraw()}[_0x2397ca(446)](){const e={_0x597547:1084},t=_0x2397ca;this.show?this._updateDraw():this[t(e._0x597547)]()}_updatePositionsHook(){this[_0x2397ca({_0x16b1ab:519}._0x16b1ab)]()}_mountedHook(){const e={_0x11b529:2214,_0x3abe2d:2928},t=_0x2397ca;this.options.targetPosition&&(this.targetPosition=this.options.targetPosition),this[t(e._0x11b529)]=new Cesium__namespace.Texture({context:this._map.scene[t(e._0x3abe2d)],source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0,0])},flipY:!1})}_addedHook(e){const t={_0x16d7d7:2007,_0x2a65f9:2671,_0x398fbb:519,_0xae088f:565},x=_0x2397ca;this._hasTerrainShadows&&(this._map.viewer.terrainShadows=Cesium__namespace[x(t._0x16d7d7)][x(t._0x2a65f9)]),this[x(t._0x398fbb)](),this.primitiveCollection[x(t._0xae088f)](this)}_removedHook(){const e={_0xa7f1cf:3194,_0x32c26d:2055},t=_0x2397ca;this[t(e._0xa7f1cf)]&&(this._map.terrainShadows=Cesium__namespace.ShadowMode.DISABLED),this._clearDraw(),this.primitiveCollection.contains(this)&&(this._noDestroy=!0,this.primitiveCollection.remove(this),this[t(e._0x32c26d)]=!1)}bindUpdateEvent(){}unbindUpdateEvent(){}updateModelMatrix(){this._updateDraw()}_updateDraw(){const e={_0x5cd334:845,_0x4a349d:3876,_0x6df04:3143,_0x248063:3873},t=_0x2397ca;if(this._clearDraw(),!this._map||!this[t(3482)])return;const x=this[t(760)];if(!x)return;const i=new Cesium__namespace[t(e._0x5cd334)](Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace[t(e._0x4a349d)].toRadians(this.pitch),Cesium__namespace[t(3876)].toRadians(this.roll)),s=new Cesium__namespace[t(1042)](this._map.scene);s.position=x,s.frustum.fov=Cesium__namespace.Math.toRadians(this[t(e._0x6df04)]*2),s.frustum.aspectRatio=this.angle/this.angle2,s.frustum.near=.01,s[t(1209)].far=this[t(230)],s.setView({destination:x,orientation:{heading:i.heading,pitch:i.pitch,roll:i.roll}}),this._createFrustumPrimitive(s),this._shadowMap=new Cesium__namespace[t(1495)]({lightCamera:s,context:this._map.scene.context,maximumDistance:this._maximumDistance,isSpotLight:!0,cascadesEnabled:!1,enabled:!1,depthBiasStep:this.options.depthBiasStep}),this[t(e._0x248063)]()}_clearDraw(){const e={_0x3ef53b:3399,_0x20b112:3831},t=_0x2397ca;this._map&&(this._postProcessStage&&(this._map[t(e._0x3ef53b)][t(1581)].remove(this[t(3212)]),delete this._postProcessStage),this._shadowMap&&(this._shadowMap.destroy(),delete this._shadowMap),this._frustumPrimitive&&(this[t(e._0x20b112)].removeGraphic(this._frustumPrimitive,!0),delete this._frustumPrimitive))}update(e){const t={_0x5da2c4:3777,_0x24b6ce:2434},x=_0x2397ca;this[x(t._0x5da2c4)]&&this[x(519)](),this._shadowMap&&e[x(2834)][x(t._0x24b6ce)](this._shadowMap)}_createFrustumPrimitive(e){const t={_0x3a8a89:2923,_0x1eadd6:2923,_0x40c9ef:2923,_0x594f93:3143},x=_0x2397ca;this[x(t._0x3a8a89)]&&this._layer.removeGraphic(this[x(t._0x1eadd6)],!0);const i=this[x(230)]+1;this[x(t._0x40c9ef)]=new ArcFrustum({modelMatrix:e[x(2308)],style:{angle:this[x(t._0x594f93)],angle2:this.angle2,distance:i},show:this[x(1541)]&&this.show,private:!0}),this[x(3831)].addGraphic(this._frustumPrimitive)}_createPostProcessStage(){const e={_0x34270a:3212,_0x1b0378:3212,_0x454426:518,_0x970f45:662,_0x488049:3540,_0x1d8a82:3722},t={_0x41a7b7:662},x={_0x3527ee:3540},i={_0x3420d6:577},s=_0x2397ca;this._postProcessStage&&(this._map.scene.postProcessStages[s(2689)](this[s(e._0x34270a)]),delete this[s(e._0x1b0378)]);const o=new Cesium__namespace[s(e._0x454426)],r=new Cesium__namespace[s(e._0x970f45)],c=new Cesium__namespace.Cartesian4,_=this[s(e._0x488049)][s(1266)];this._postProcessStage=new Cesium__namespace[s(e._0x1d8a82)]({fragmentShader:ViewShedFS,uniforms:{mars3d_opacity:()=>this[s(4010)],mars3d_visibleAreaColor:()=>this.visibleAreaColor,mars3d_hiddenAreaColor:()=>this[s(i._0x3420d6)],mars3d_distance:()=>this.distance,mars3d_xAngle:()=>this.angle,mars3d_yAngle:()=>this.angle2,shadowMap_texture:()=>this._shadowMap._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>this._shadowMap._shadowMapMatrix,shadowMap_lightPositionEC:()=>this._shadowMap._lightPositionEC,shadowMap_lightDirectionEC:()=>{const l=s;return this[l(3540)][l(262)]},shadowMap_lightUp:()=>this[s(x._0x3527ee)]._lightCamera.up,shadowMap_lightDir:()=>{const l=s;return this._shadowMap[l(456)].direction},shadowMap_lightRight:()=>{const l=s;return this._shadowMap._lightCamera[l(1401)]},shadowMap_texelSizeDepthBias:()=>{const l=s;return o.x=1/this._shadowMap._textureSize.x,o.y=1/this._shadowMap._textureSize.y,Cesium__namespace[l(t._0x41a7b7)].fromElements(o.x,o.y,_.depthBias,_.normalShadingSmooth,r)},shadowMap_normalOffsetScale:()=>Cesium__namespace.Cartesian4.fromElements(_.normalOffsetScale,this._shadowMap._distance,this._shadowMap.maximumDistance,this._shadowMap._darkness,c)}}),this._map.scene.postProcessStages.add(this._postProcessStage)}_style2JsonBase(e,t){const x={_0x52bc83:227},i=_0x2397ca;return e[i(1722)]=formatNum$1(this.heading,1),e.pitch=formatNum$1(this[i(x._0x52bc83)],1),e.distance=formatNum$1(this.distance,2),getAttrVal(e,{onlySimpleType:!0})}setView(){const e={_0x11a350:760},t=_0x2397ca;if(!this._map)return;const x=this[t(3400)];x&&(this._map.camera.position=Cesium__namespace.clone(this[t(e._0x11a350)]),this[t(558)].camera.direction=Cesium__namespace[t(3069)](x[t(2165)]),this._map.camera[t(1401)]=Cesium__namespace.clone(x.right),this._map.camera.up=Cesium__namespace.clone(x.up))}setOpacity(e){const t=_0x2397ca;this[t(357)][t(4010)]=e}startDraw(e){const t={_0x45ceff:558},x=_0x2397ca;if(this._enabledDraw)return this;if(this._enabledDraw=!0,e&&this.addTo(e),!this[x(t._0x45ceff)])throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this[x(t._0x45ceff)]._setEditCursor(!0),this[x(3237)](!1),this._startDrawHook(),this.fire(EventType.drawStart,{drawtype:this.type,graphic:this},!0)}stopDraw(){const e=_0x2397ca;var t,x,i;if(!this._enabledDraw)return this;if(this[e(1085)](),this[e(558)]._setEditCursor(!1),this.enableControl(!0),this._map.closeSmallTooltip(),this._enabledDraw=!1,!this.position||!this.distance){this.remove(!0);return}this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!0),(t=this[e(3044)])!==null&&t!==void 0&&t.success&&this.options.success(this),(x=this.options)!==null&&x!==void 0&&(i=x._promise)!==null&&i!==void 0&&i.resolve&&this.options._promise.resolve(this)}[_0x2397ca(2173)](){const e=_0x2397ca;this[e(558)].on(EventType.click,this._onClickHandler,this),this._map.on(EventType.mouseMove,this[e(1174)],this)}_stopDrawHook(){const e={_0x2dba72:1174},t=_0x2397ca;this._map.off(EventType.click,this[t(1230)],this),this._map.off(EventType[t(2479)],this[t(e._0x2dba72)],this)}_onClickHandler(e){const t={_0x2e0a75:641,_0x4c4358:357,_0x54ae17:760,_0x2429b1:350,_0x40ed34:2683,_0x2861b7:1740,_0x341c5c:913},x=_0x2397ca;let i=e[x(t._0x2e0a75)];if(!i)return;if(this.fire(EventType[x(2669)],{...e,drawtype:this.type,graphic:this},!0),!this[x(760)]){this.position=addPositionsHeight(i,this[x(t._0x4c4358)].addHeight);return}Cesium__namespace.Cartesian3.distance(this[x(t._0x54ae17)],i)>this._maximumDistance&&(i=getOnLinePointByLen(this.position,i,this[x(t._0x2429b1)])),this[x(t._0x40ed34)]=i,this[x(t._0x2861b7)](),this.fire(EventType[x(t._0x341c5c)],e)}[_0x2397ca(1174)](e){const t={_0x17094e:230,_0x5cf3ed:350,_0x26447c:558,_0x37a051:3676},x=_0x2397ca;let i=e.cartesian;if(!i)return;const s=this.position;s?(Cesium__namespace[x(295)][x(t._0x17094e)](s,i)>this._maximumDistance&&(i=getOnLinePointByLen(s,i,this[x(t._0x5cf3ed)])),this.targetPosition=i,this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!0),this._map[x(1882)](e.endPosition,this[x(t._0x26447c)][x(1337)](x(t._0x37a051)))):this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_单击开始绘制"))}}register$4("viewShed",ViewShed,!0);var ViewVideoFS=`uniform float mars3d_opacity;

uniform sampler2D mars3d_videoTexture;
uniform sampler2D mars3d_maskTexture;
uniform vec4 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;
uniform bool mars3d_flipx;
uniform bool mars3d_flipy;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //视频投射
  if(visibility == 1.0) {
    if(mars3d_flipx){
      shadowPosition.x = shadowPosition.x + (0.5 - shadowPosition.x) * 2.0;
    }
    if(mars3d_flipy){
      shadowPosition.y = shadowPosition.y + (0.5 - shadowPosition.y) * 2.0;
    }

    vec4 videoColor = texture(mars3d_videoTexture, shadowPosition.xy);
    vec4 maskColor = texture(mars3d_maskTexture, shadowPosition.xy);
    videoColor *= maskColor;
    out_FragColor = mix(color, vec4(videoColor.xyz, 1.0), mars3d_opacity * videoColor.a);
  } else {
    if(abs(shadowPosition.z - 0.0) < 0.01) {
      return;
    }
    out_FragColor = vec4(mix(color.rgb, mars3d_hiddenAreaColor.rgb, mars3d_hiddenAreaColor.a), mars3d_hiddenAreaColor.a);
  }
}
`;const DEF_STYLE={angle:60,angle2:45,distance:1e3,opacity:1,showFrustum:!1,hiddenAreaColor:new Cesium__namespace[_0x2397ca(2134)](0,0,0,.5),flipx:!1,flipy:!1};class Video3D extends ViewShed{constructor(e={}){const t={_0x44aa02:357},x=_0x2397ca;e[x(t._0x44aa02)]={...DEF_STYLE,...e.style},e.terrain=!1,super(e,!1),this._videoPlay=!0}get container(){return this._videoContainer}get[_0x2397ca(230)](){return this.style.distance}set[_0x2397ca(230)](e){this.style.distance=e,this._updateDraw()}get flipx(){return this[_0x2397ca(357)].flipx}set flipx(e){this.style.flipx=e}get[_0x2397ca(3533)](){return this._videoPlay}set play(e){const t={_0x269ee1:3228},x=_0x2397ca;if(this._videoPlay=!!e,this._videoContainer)try{this[x(t._0x269ee1)]?this._videoContainer.play():this[x(527)].pause()}catch{}}_mountedHook(){const e={_0x3fa602:2801,_0x1ca9d5:1278,_0x244daf:558,_0x5c28a6:2928,_0x30a86c:357,_0x46dc8a:527,_0x4a9439:348},t={_0x31d487:3636},x=_0x2397ca;super._mountedHook();const i=this.style.maskImage;if(i){const s=new Image;s[x(e._0x3fa602)]=o=>{const r=x;this[r(4042)]=new Cesium__namespace.Texture({context:this[r(558)].scene.context,source:s})},s[x(e._0x1ca9d5)]=o=>{logError$1(x(t._0x31d487)+i,o)},s.src=i}else this._maskTexture=new Cesium__namespace.Texture({context:this[x(e._0x244daf)].scene[x(e._0x5c28a6)],source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:!1});this[x(357)].container?this._videoContainer=this.style[x(571)]:this[x(e._0x30a86c)].url&&(this[x(e._0x46dc8a)]=createVideo(this.style.url,this.style.fileType,"",document.body),this._videoContainer.style.display="none",this._hasRemoveElement=!0),this._videoContainer&&this[x(e._0x244daf)].on(EventType[x(3023)],this[x(e._0x4a9439)],this)}[_0x2397ca(380)](){const e={_0x18d020:558,_0xeddc75:3573},t=_0x2397ca;var x;this[t(e._0x18d020)][t(e._0xeddc75)](EventType.clockTick,this._onClockTickHandler,this),this._hasRemoveElement&&(x=this._videoContainer)!==null&&x!==void 0&&x[t(3405)]&&(this[t(527)].parentNode.removeChild(this._videoContainer),delete this._hasRemoveElement,delete this._videoContainer),super._removedHook()}_onClockTickHandler(){const e={_0x2e6b18:1982},t=_0x2397ca;try{this._videoPlay&&this._videoContainer[t(e._0x2e6b18)]&&this._videoContainer.play()}catch{}!this._videoContainer||!this[t(558)]||(this._videoTexture&&this._videoTexture[t(2941)](),this._videoTexture=new Cesium__namespace.Texture({context:this._map.scene.context,source:this[t(527)],pixelFormat:Cesium__namespace.PixelFormat[t(766)],pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_BYTE}))}_clearDraw(){const e={_0x37a700:2923},t=_0x2397ca;this[t(e._0x37a700)]&&(this.primitiveCollection.remove(this[t(e._0x37a700)]),delete this._frustumPrimitive),super._clearDraw()}_createFrustumPrimitive(e){const t={_0x5c8f49:3416,_0x50f7e6:3596,_0x49f128:1772,_0x1c82e3:2923,_0x20f8c6:3482},x=_0x2397ca,i=e[x(1943)],s=e.upWC;let o=e.rightWC;o=Cesium__namespace.Cartesian3[x(t._0x5c8f49)](o,new Cesium__namespace[x(295)]);const r=new Cesium__namespace.Matrix3;Cesium__namespace.Matrix3.setColumn(r,0,o,r),Cesium__namespace[x(t._0x50f7e6)].setColumn(r,1,s,r),Cesium__namespace.Matrix3.setColumn(r,2,i,r);const c=Cesium__namespace.Quaternion.fromRotationMatrix(r,new Cesium__namespace[x(t._0x49f128)]);this._frustumPrimitive&&this.primitiveCollection.remove(this._frustumPrimitive),this[x(t._0x1c82e3)]=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace.FrustumOutlineGeometry({origin:e.position,orientation:c,frustum:e.frustum,_drawNearPlane:!0}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(Cesium__namespace.Color.AZURE)}}),appearance:new Cesium__namespace.PerInstanceColorAppearance({translucent:!1,flat:!0}),asynchronous:!1,show:this.showFrustum&&this[x(t._0x20f8c6)]}),this.primitiveCollection.add(this._frustumPrimitive),this.bindPickId(this._frustumPrimitive)}[_0x2397ca(3873)](){const e={_0x5a0347:3399,_0x1c421c:2689,_0x579499:3212},t={_0x15da9d:662,_0x254857:1430,_0x29f8c4:3540},x={_0x89b038:3540,_0x491e89:2495},i=_0x2397ca;this._postProcessStage&&(this._map[i(e._0x5a0347)].postProcessStages[i(e._0x1c421c)](this._postProcessStage),delete this._postProcessStage);const s=new Cesium__namespace.Cartesian2,o=new Cesium__namespace[i(662)],r=new Cesium__namespace.Cartesian4,c=this._shadowMap._primitiveBias;this[i(e._0x579499)]=new Cesium__namespace.PostProcessStage({fragmentShader:ViewVideoFS,uniforms:{mars3d_videoTexture:()=>this._videoTexture||this._defaultColorTexture,mars3d_maskTexture:()=>this[i(4042)],mars3d_opacity:()=>this.opacity,mars3d_hiddenAreaColor:()=>this.hiddenAreaColor,shadowMap_texture:()=>this._shadowMap._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>{const _=i;return this._shadowMap[_(2555)]},shadowMap_lightPositionEC:()=>this._shadowMap._lightPositionEC,shadowMap_texelSizeDepthBias:()=>{const _=i;return s.x=1/this[_(x._0x89b038)]._textureSize.x,s.y=1/this._shadowMap[_(x._0x491e89)].y,Cesium__namespace.Cartesian4.fromElements(s.x,s.y,c.depthBias,c.normalShadingSmooth,o)},shadowMap_normalOffsetScale:()=>{const _=i;return Cesium__namespace[_(t._0x15da9d)].fromElements(c[_(t._0x254857)],this[_(3540)]._distance,this[_(t._0x29f8c4)].maximumDistance,this._shadowMap[_(3098)],r)},mars3d_flipx:()=>this.style.flipx,mars3d_flipy:()=>this.style.flipy}}),this._map.scene.postProcessStages.add(this._postProcessStage)}}register$4("video3D",Video3D,!0);let globeLastRoam;class Route extends BasePointPrimitive{constructor(e={}){const t={_0x236403:2406,_0x573101:760,_0x5c5177:2902,_0x74af17:3777,_0x199733:885},x=_0x2397ca;super(e),this.options.frameRate=this.options[x(t._0x236403)]??1,this[x(3355)]=this.options[x(3928)]??100,this._clampToTilesetFrame=-1,this._frameRateHeight=this.options.frameRateHeight??30,this._zhStyle(this[x(3044)].style),this._child={},this._position_result=new Cesium__namespace[x(295)],this[x(3777)]=this[x(3044)][x(t._0x573101)]||new Cesium__namespace.SampledPositionProperty(this.options[x(t._0x5c5177)],this[x(3044)].numberOfDerivatives),this.property.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType.HOLD,this[x(t._0x74af17)].backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace.ExtrapolationType.HOLD,this[x(t._0x199733)]=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(this.property),this[x(2276)]=Cesium__namespace.defer()}get label(){return this._child.label}set label(e){const t={_0x1ac484:743},x=_0x2397ca;this[x(3044)][x(t._0x1ac484)]=e,this._initChildGraphic("label",LabelPrimitive)}get billboard(){return this._child.billboard}set[_0x2397ca(824)](e){this.options.billboard=e,this._initChildGraphic("billboard",BillboardPrimitive)}get point(){const e={_0x428d24:2800},t=_0x2397ca;return this._child[t(e._0x428d24)]}set point(e){const t={_0x5431ae:3044},x=_0x2397ca;this[x(t._0x5431ae)].point=e,this._initChildGraphic("point",PointPrimitive)}get[_0x2397ca(1243)](){const e={_0x8ec44f:1243},t=_0x2397ca;return this._child[t(e._0x8ec44f)]}set model(e){const t={_0x5d31b9:1243},x=_0x2397ca;this.options[x(t._0x5d31b9)]=e,this._initChildGraphic("model",ModelPrimitive)}get readyPromise(){return this[_0x2397ca({_0x2f35ae:2276}._0x2f35ae)].promise}get circle(){const e={_0x267a51:2829},t=_0x2397ca;return this._child[t(e._0x267a51)]}set[_0x2397ca(2829)](e){const t=_0x2397ca;this.options[t(2829)]=e,this[t(632)]("circle",CircleEntity)}get coneTrack(){return this._child.coneTrack}set[_0x2397ca(2967)](e){this.options.coneTrack=e,this._initChildGraphic("coneTrack",ConeTrack)}get path(){return this._child.path}set path(e){const t={_0x3ea6a0:2875},x=_0x2397ca;this.options[x(t._0x3ea6a0)]=e,this._initChildGraphic("path",PathEntity)}get polyline(){return this._child.polyline}set polyline(e){const t={_0x3b4c1d:632,_0x45928:392},x=_0x2397ca;this.options[x(392)]=e,this[x(t._0x3b4c1d)](x(t._0x45928),PolylineEntity)}get wall(){const e=_0x2397ca;return this._child[e(3958)]}set[_0x2397ca(3958)](e){const t={_0x44338c:3044,_0x442592:632},x=_0x2397ca;this[x(t._0x44338c)].wall=e,this[x(t._0x442592)]("wall",WallEntity)}get modelMatrix(){const e={_0x574d4e:2872,_0x541571:1011},t=_0x2397ca;return this._modelMatrix?this._modelMatrix:this[t(e._0x574d4e)](this._position,this[t(e._0x541571)])}get[_0x2397ca(644)](){return getRayEarthPosition(this._position,this._orientation_show)}get alt(){return this._clampToTilesetHeight?this._clampToTilesetHeight:this._position?Cesium__namespace.Cartographic.fromCartesian(this._position).height:0}get startTime(){const e={_0x374e9a:764},t=_0x2397ca;var x,i;const s=(x=this.property)===null||x===void 0||(i=x[t(2062)])===null||i===void 0?void 0:i[t(e._0x374e9a)];return s.length>0?s[0]:null}get stopTime(){const e=_0x2397ca;var t,x;const i=(t=this.property)===null||t===void 0||(x=t._property)===null||x===void 0?void 0:x._times;return i.length>0?i[i[e(2027)]-1]:null}get currIndex(){return this._flyok_index}get[_0x2397ca(3284)](){const e={_0x38f4c5:558,_0x4a98ca:3703},t=_0x2397ca;var x;return(x=this[t(e._0x38f4c5)])===null||x===void 0?void 0:x[t(e._0x4a98ca)].multiplier}set[_0x2397ca(3284)](e){const t=_0x2397ca;this._map&&(this[t(558)][t(3703)].multiplier=e)}get isPause(){const e=_0x2397ca;var t;return!((t=this._map)!==null&&t!==void 0&&t[e(3703)][e(3957)])}set[_0x2397ca(2657)](e){const t={_0x56c84a:558,_0x3d1bf0:2858},x=_0x2397ca;this[x(t._0x56c84a)]&&(e?this[x(1328)]():this[x(t._0x3d1bf0)]())}get objectsToExclude(){const e={_0x537dcf:3044},t=_0x2397ca;if(this.options.objectsToExclude)return this[t(e._0x537dcf)][t(3656)];if(this[t(2014)])return this[t(404)];const x=[];if(this.eachChildGraphic(i=>{const s=t;i[s(3735)]&&x[s(2434)](i.czmObject)}),x[t(2027)]>0)return x}set[_0x2397ca(3656)](e){this._objectsToExclude=e}get[_0x2397ca(357)](){const e={_0xab32b4:3678,_0x21c800:392,_0x207618:3958},t=_0x2397ca,x=getAttrVal(this.options,{onlySimpleType:!0});return this._splitOptionsToStyle(x,t(1243)),this._splitOptionsToStyle(x,"label"),this._splitOptionsToStyle(x,t(824)),this[t(3678)](x,"point"),this._splitOptionsToStyle(x,"circle"),this._splitOptionsToStyle(x,"coneTrack"),this[t(e._0xab32b4)](x,t(e._0x21c800)),this._splitOptionsToStyle(x,t(e._0x207618)),this._splitOptionsToStyle(x,"path"),delete x._promise,delete x.style,delete x.attr,x}set[_0x2397ca(357)](e){this.setStyle(e)}setStyle(e){const t={_0x48ba38:2163},x=_0x2397ca;return e={...e},this[x(t._0x48ba38)](e),this._setOptionsHook(this.options,e),this}_initSampledPositionProperty(){const e={_0x3a8880:3777,_0x32a93f:2171},t=_0x2397ca;this._sampledPositionProperty=this[t(e._0x3a8880)],this[t(e._0x32a93f)]()}[_0x2397ca(2645)](){const e={_0x288766:632,_0x11fca2:632,_0x500eb8:2967},t=_0x2397ca;this[t(e._0x288766)]("label",LabelPrimitive),this[t(632)]("billboard",BillboardPrimitive),this._initChildGraphic("point",PointPrimitive),this[t(632)]("model",ModelPrimitive),this._initChildGraphic("circle",CircleEntity),this[t(e._0x11fca2)](t(e._0x500eb8),ConeTrack),this._initChildGraphic(t(2875),PathEntity),this._initChildGraphic(t(392),PolylineEntity),this._initChildGraphic("wall",WallEntity)}_addedHook(e){const t={_0x3b2beb:1171,_0x4b19ee:3044,_0x3f8d0f:771,_0xb67e16:3531},x=_0x2397ca;var i;if(this[x(3482)]&&(this._addChildGraphic(),(i=this.model)!==null&&i!==void 0&&i.readyPromise&&this.model[x(t._0x3b2beb)][x(1286)](()=>{this._readyPromise.resolve(this)}),this[x(t._0x4b19ee)].position&&this[x(771)](this.options.position),this.options.positions))for(let s=0;s<this.options.positions.length;s++){const o=this[x(t._0x4b19ee)].positions[s];this[x(t._0x3f8d0f)](o,o[x(t._0xb67e16)])}}[_0x2397ca(380)](e){this[_0x2397ca({_0x43f7ef:4064}._0x43f7ef)](),super._removedHook(e)}[_0x2397ca(3448)](e){const t={_0x4880af:764,_0x5aef89:2027,_0x2cfcca:295},x=_0x2397ca;var i,s,o,r;const c=(i=this.property)===null||i===void 0||(s=i[x(2062)])===null||s===void 0?void 0:s[x(t._0x4880af)],_=(o=this.property)===null||o===void 0||(r=o._property)===null||r===void 0?void 0:r._values;if(!c||c[x(t._0x5aef89)]===0)return;const l=[];for(let h=0,d=c.length;h<d;h++){const u=LngLatPoint.fromCartesian(new Cesium__namespace[x(t._0x2cfcca)](_[h*3],_[h*3+1],_[h*3+2])),m=Cesium__namespace[x(1522)].toDate(c[h]);l.push({lat:u.lat,lng:u.lng,alt:u.alt,time:formatDate(m,"yyyy-MM-dd HH:mm:ss")})}e.positions=l}_showHook(e){e?this.eachChildGraphic(t=>{t.show=t._lastShow,delete t._lastShow}):this.eachChildGraphic(t=>{t._lastShow=t.show,t.show=!1})}[_0x2397ca(3535)](e,t){const x={_0x2e2bfd:357,_0x183caa:743,_0x414bbd:824,_0x295a05:2800,_0x5a7d22:1243,_0xc02ed3:2829,_0x1bf68b:632,_0x544243:2967},i=_0x2397ca;this._zhStyle(t[i(x._0x2e2bfd)]);for(const s in t)switch(s){case"label":this._initChildGraphic(i(x._0x183caa),LabelPrimitive);break;case i(x._0x414bbd):this._initChildGraphic("billboard",BillboardPrimitive);break;case i(x._0x295a05):this._initChildGraphic("point",PointPrimitive);break;case"model":this._initChildGraphic(i(x._0x5a7d22),ModelPrimitive);break;case"circle":this._initChildGraphic(i(x._0xc02ed3),CircleEntity);break;case"coneTrack":this[i(x._0x1bf68b)](i(x._0x544243),ConeTrack);break;case i(2875):this._initChildGraphic("path",PathEntity);break;case"polyline":this._initChildGraphic(i(392),PolylineEntity);break;case"wall":this._initChildGraphic("wall",WallEntity);break}}_splitOptionsToStyle(e,t){const x=e[t];if(x){delete e[t];for(const i in x)e[t+"_"+i]=x[i]}}_mergeStyleToOptions(e,t){const x=t+"_";for(const i in e){const s=e[i];i.startsWith(x)&&(!e[t]&&(e[t]={}),e[t][i.substring(x.length)]=s,delete e[i])}}_zhStyle(e){const t={_0x258463:743,_0xb101b:2362,_0x3da44c:3044},x=_0x2397ca;if(!(!e||Object.keys(e)[x(2027)]===0)){this._mergeStyleToOptions(e,x(1243)),this._mergeStyleToOptions(e,x(t._0x258463)),this._mergeStyleToOptions(e,"billboard"),this._mergeStyleToOptions(e,"point"),this._mergeStyleToOptions(e,x(2829)),this[x(2362)](e,"coneTrack"),this[x(2362)](e,"polyline"),this[x(t._0xb101b)](e,"wall"),this._mergeStyleToOptions(e,"path");for(const i in e){const s=e[i];switch(i){default:{isObject(s)?this[x(t._0x3da44c)][i]=merge(this.options[i],s):this.options[i]=s;break}}}}}_initChildGraphic(e,t){const x={_0x28e672:2689,_0x45db04:3482,_0x595d0a:1812,_0x520fc4:3144,_0x384653:3144,_0x4c0f7b:2829,_0x24f237:760,_0xaa7df9:428},i={_0x5a8862:1549},s=_0x2397ca,o=this[s(3044)][e];let r=this._child[e];if(!o){r&&(r[s(x._0x28e672)](!0),delete this[s(3144)][e]);return}if(r)r.setStyle(o),r.show=o.show??!0;else switch(r=new t({id:this.id+"-"+e,style:clone(o,["show"]),attr:this.attr,private:!0,eventParent:this,show:o[s(x._0x45db04)]??!0}),r.removeEventParent(this[s(3831)]),r[s(x._0x595d0a)](this),this[s(3401)]&&this[s(3831)][s(340)](r),r.czmObject&&this.bindPickId(r.czmObject),r.czmObjectEx&&r[s(3279)][s(1255)](c=>{this.bindPickId(c)}),this[s(x._0x520fc4)][e]=r,e){case"billboard":{!o.alignedAxis&&(this._child.billboard.style.alignedAxis=new Cesium__namespace.VelocityVectorProperty(this[s(3777)],!0));break}case"circle":{this[s(x._0x384653)][s(x._0x4c0f7b)][s(x._0x24f237)]=new Cesium__namespace[s(x._0xaa7df9)](c=>this._position,!1);break}case s(2967):{this._child.coneTrack.position=new Cesium__namespace.CallbackProperty(c=>this._position,!1);break}case"path":{this._child.path.position=this.property;break}case s(392):{this._polyline_positions=[],this._child.polyline.positions=new Cesium__namespace.CallbackProperty(c=>this[s(i._0x5a8862)],!1);break}case"wall":{this[s(3523)]=[],this._child.wall[s(1091)]=new Cesium__namespace.CallbackProperty(c=>this._wall_positions,!1),this[s(2227)]=[],this[s(3144)].wall.style.minimumHeights=new Cesium__namespace[s(428)](c=>this._wall_minimumHeights,!1),this._wall_maximumHeights=[],this._child.wall.style.maximumHeights=new Cesium__namespace.CallbackProperty(c=>this._wall_maximumHeights,!1),this._child.wall._heights_cache={};break}}}[_0x2397ca(2780)](){const e={_0x3e80c1:340},t=_0x2397ca;this[t(1774)](x=>{const i={_0x2e3486:1425},s=t;this._layer[s(e._0x3e80c1)](x),x.czmObject&&this.bindPickId(x.czmObject),x[s(3279)]&&x.czmObjectEx.forEach(o=>{this[s(i._0x2e3486)](o)})})}_removeChildGraphic(){const e={_0xe1af44:3831},t=_0x2397ca;this[t(1774)](x=>{this[t(e._0xe1af44)].removeGraphic(x)})}eachChildGraphic(e,t){const x={_0x32aa51:390},i=_0x2397ca;if(this._child)return Object[i(x._0x32aa51)](this._child)[i(1255)]((s,o)=>{e&&e.call(t||this,this._child[s],o)}),this}[_0x2397ca(1653)](e){const t={_0x42b87d:2902,_0x4b15ef:3207,_0x9200f5:2379,_0x3a81da:3069,_0x56e727:2382,_0xd1fd31:1900,_0x4ff90c:1173,_0x290abc:3831,_0x30555c:3656,_0x461865:3892,_0x30edb6:639,_0x2d21bb:3044,_0xf394fe:2145,_0x421ef8:295,_0x128900:885},x=_0x2397ca;if(this.show){if(this._position=this.getPropertyValue(e.time,this._position_result),!this._position){this._last_hasNull?this._updatePosition():(this._updatePosition(),this._updateForEvent(),this._last_hasNull=!0);return}if(this._last_hasNull=!1,this.property[x(t._0x42b87d)]===Cesium__namespace[x(t._0x4b15ef)][x(t._0x9200f5)]&&(this._position_inertial=this._position[x(t._0x3a81da)](),Cesium__namespace.PositionProperty[x(2518)](e.time,this._position,this.property.referenceFrame,Cesium__namespace[x(t._0x4b15ef)].FIXED,this._position)),this.options[x(t._0x56e727)]){if(this._clampToTilesetFrame++,!this[x(t._0xd1fd31)]||this[x(3866)]%this._frameRateHeight===0){let i=getHeight(this._map.scene,this[x(t._0x4ff90c)],{objectsToExclude:this[x(t._0x290abc)][x(t._0x30555c)],has3dtiles:!0});i&&(Cesium__namespace.defined(this.options.minHeight)&&i<this.options[x(3892)]&&(i=this.options[x(t._0x461865)]),Cesium__namespace[x(t._0x30edb6)](this[x(t._0x2d21bb)].maxHeight)&&i>this[x(3044)].maxHeight&&(i=this.options.maxHeight),this._clampToTilesetHeight=i)}if(this._clampToTilesetHeight){const i=Cesium__namespace.Cartographic[x(t._0xf394fe)](this[x(t._0x4ff90c)]);this[x(t._0x4ff90c)]=Cesium__namespace[x(t._0x421ef8)].fromRadians(i.longitude,i.latitude,this._clampToTilesetHeight)}}this._orientation_show=this[x(t._0x128900)][x(2893)](e[x(3531)]),this._updatePosition(),this._updateCamera(),this._updateForEvent()}}_updatePosition(){const e={_0x4af165:3144,_0x89b7c9:3144,_0x2434c0:1243,_0x1329ca:3144,_0x5b057b:3197,_0x4b02ca:2062,_0x5f5172:295,_0x445c2e:2860,_0x4e9deb:3482,_0x287639:4046,_0x22b7ec:1173,_0x276be9:2434,_0x4067b3:3958,_0x473aa0:2783,_0x4077f4:1549,_0x3e52a0:2145,_0x455657:2227},t=_0x2397ca;var x,i,s,o,r,c,_;if((x=this._child.label)!==null&&x!==void 0&&x.show&&(this[t(3144)].label.position=this._position),(i=this._child.billboard)!==null&&i!==void 0&&i.show&&(this._child.billboard.position=this._position),(s=this[t(3144)].point)!==null&&s!==void 0&&s.show&&(this[t(e._0x4af165)].point.position=this._position),(o=this[t(3144)].model)!==null&&o!==void 0&&o.show){var l;this[t(1239)]=this._child.model[t(2872)](this._position,this._orientation_show),this._heading_reality=this[t(e._0x89b7c9)].model._heading_reality,this._pitch_reality=this._child[t(e._0x2434c0)][t(3949)],this._roll_reality=this._child.model[t(3508)],(l=this._child.model)!==null&&l!==void 0&&l[t(2417)]&&(this._child[t(1243)]._primitive[t(3455)]=this._modelMatrix),this._child.model._position=this._position}let h=!1;if((r=this[t(e._0x1329ca)].polyline)!==null&&r!==void 0&&r.show&&!((c=this.options.polyline)!==null&&c!==void 0&&c[t(e._0x5b057b)])){const u=this.property[t(e._0x4b02ca)]._values.slice(0,this._flyok_index*3);if(this._flyok_index>0){let m=Cesium__namespace[t(e._0x5f5172)][t(e._0x445c2e)](u);this[t(1173)]&&m.push(this._position),this.options.polyline.maxDistance&&(m=sliceByMaxDistance(m,this[t(3044)][t(392)].maxDistance),this._maxCacheCount>0&&(this._maxCacheCount=Math[t(1146)](this[t(3355)],m.length*2))),this._polyline_positions=m,h=!0}else this._polyline_positions=[]}if((_=this._child.wall)!==null&&_!==void 0&&_[t(e._0x4e9deb)]){const u=this[t(3777)][t(2062)]._values.slice(0,this[t(4046)]*3);if(this[t(e._0x287639)]>0){if(!h){let b=Cesium__namespace.Cartesian3.unpackArray(u);this[t(e._0x22b7ec)]&&b[t(e._0x276be9)](this[t(1173)]),this.options[t(e._0x4067b3)][t(2783)]&&(b=sliceByMaxDistance(b,this.options[t(3958)][t(e._0x473aa0)]),this._maxCacheCount>0&&(this._maxCacheCount=Math.max(this._maxCacheCount,b.length*2))),this[t(e._0x4077f4)]=b}const m=[],f=[],g=this._polyline_positions;for(let b=0;b<g.length;b++){const y=g[b],C=Cesium__namespace.Cartographic[t(e._0x3e52a0)](y);if(f.push(C.height),this.options.wall[t(2698)]){var d;g[b][t(460)]=g[b].hbgd??getHeight((d=this._map)===null||d===void 0?void 0:d[t(3399)],y,{has3dtiles:!1}),m.push(g[b].hbgd)}else m.push(0)}this._wall_positions=g,this._wall_minimumHeights=m,this._wall_maximumHeights=f}else this[t(3523)]=[],this[t(e._0x455657)]=[],this[t(2786)]=[]}}_updateCamera(){const e={_0x577490:3400,_0x564241:3044,_0xccfc9b:3860,_0x5a0995:3044,_0x161ad9:610,_0x178147:558,_0x468429:1768,_0xcd135:295},t=_0x2397ca;if(this.options[t(e._0x577490)])switch(this.options.camera.type){case"gs":{const x=this[t(610)];this[t(558)].clock.shouldAnimate&&this[t(558)].trackedEntity!==x&&(this._map.trackedEntity=x,x._needFlyToPoint=!0),x._needFlyToPoint&&!this._map.viewer._needTrackedEntityUpdate&&(x._needFlyToPoint=!1,this.flyToPoint({...this[t(e._0x564241)].camera,lock:!0,duration:0}));break}case"dy":{const x=this.trackedEntity;this._map.trackedEntity!==x&&(this._map.trackedEntity=x);let i=this.options.camera[t(e._0xccfc9b)]||0;const s=this.options[t(3400)][t(3771)]||0;i===0&&s===0&&(i=.1);let o;this.options[t(3400)].offsetX&&(o=o||{},o.x=this.options[t(3400)][t(2030)]),this.options.camera.offsetY&&(o=o||{},o.y=this.options.camera.offsetY),this[t(e._0x5a0995)][t(e._0x577490)].offsetZ&&(o=o||{},o.z=this.options.camera.offsetZ),this._map.scene.camera.lookAtTransform(this[t(1454)](o),new Cesium__namespace.Cartesian3(-i,0,s));break}case"sd":{const x=this[t(e._0x161ad9)];this._map.trackedEntity!==x&&(this._map.trackedEntity=x),this[t(e._0x178147)][t(3399)].camera[t(e._0x468429)](this.computeModelMatrix(),new Cesium__namespace[t(e._0xcd135)](-1,0,this.options.camera.followedZ));break}default:{this._trackedEntity&&this._map[t(e._0x161ad9)]===this._trackedEntity&&(this._map.trackedEntity=void 0);break}}}[_0x2397ca(1454)](e){const t={_0x40de42:3035,_0x5080e2:701},x=_0x2397ca;!this._matrix4&&(this[x(t._0x40de42)]=new Cesium__namespace[x(1046)],this._matrix3Scratch=new Cesium__namespace[x(3596)]);let i=this._position;if(!(!Cesium__namespace.defined(i)||!this._orientation_show)){if(e){const s=new Cesium__namespace.HeadingPitchRoll(this._heading,this[x(3840)],this[x(1834)]);i=getPositionByHprAndOffset(i,new Cesium__namespace.Cartesian3(e.x||0,e.y||0,e.z||0),s)}return this._matrix4=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3[x(t._0x5080e2)](this._orientation_show,this._matrix3Scratch),i,this._matrix4),this._matrix4}}_updateForEvent(){const e={_0x167b0b:4046,_0x37c506:2321,_0x2c33a2:2733},t=_0x2397ca,x=this[t(e._0x167b0b)]??0;if(this.fire(EventType.change,{index:x,counts:this[t(e._0x37c506)],position:this._position,orientation:this._orientation_show}),x!==this._last_fireIndex){if(Cesium__namespace.defined(this[t(e._0x2c33a2)])&&this[t(2733)]+1!==x)for(;++this._last_fireIndex<x;)this.fire(EventType.endItem,{counts:this[t(2321)],index:this._last_fireIndex});this.fire(EventType.endItem,{counts:this[t(2321)],index:x}),x===this._counts&&this[t(1788)](EventType.end),this._last_fireIndex=x}}getPropertyValue(e,t){const x={_0x8ad2db:2904,_0x345049:1522,_0x7a3991:4046,_0x32b338:1876,_0x1c0b45:3073,_0xecd467:3498,_0x41a919:1272,_0x189545:1459},i=_0x2397ca;var s;const o=(s=this.property)===null||s===void 0?void 0:s._property,r=o==null?void 0:o._times,c=r[i(2027)];if(c===0)return;this._counts=c;let _;const l=Cesium__namespace.Cartesian3,h=o._values;if(this._flyok_index=Cesium__namespace[i(x._0x8ad2db)](r,e,Cesium__namespace[i(x._0x345049)].compare),this[i(x._0x7a3991)]<0){if(this._flyok_index=~this[i(4046)],this._flyok_index===0){const D=r[this._flyok_index];if(_=o[i(780)],o._backwardExtrapolationType===Cesium__namespace.ExtrapolationType.NONE||_!==0&&Cesium__namespace.JulianDate.secondsDifference(D,e)>_)return;if(o[i(x._0x32b338)]===Cesium__namespace.ExtrapolationType.HOLD)return l.unpack(h,0,t)}if(this[i(x._0x7a3991)]>=c){this[i(4046)]=c-1;const D=r[this[i(4046)]];if(_=o._forwardExtrapolationDuration,o._forwardExtrapolationType===Cesium__namespace.ExtrapolationType[i(3298)]||_!==0&&Cesium__namespace.JulianDate.secondsDifference(e,D)>_)return;if(o[i(3068)]===Cesium__namespace.ExtrapolationType.HOLD)return this[i(4046)]=c-1,l[i(1459)](h,this._flyok_index*l[i(1400)],t)}const d=o[i(x._0x1c0b45)],u=o._yTable,m=o._interpolationAlgorithm,f=o._packedInterpolationLength,g=o._inputOrder;if(o._updateTableLength){o[i(3588)]=!1;const D=Math.min(m.getRequiredDataPoints(o._interpolationDegree,g),c);D!==o._numberOfPoints&&(o[i(x._0xecd467)]=D,d.length=D,u.length=D*f)}const b=o._numberOfPoints-1;if(b<1)return;let y=0,C=c-1;if(C-y+1>=b+1){let D=this._flyok_index-(b/2|0)-1;D<y&&(D=y);let F=D+b;F>C&&(F=C,D=F-b,D<y&&(D=y)),y=D,C=F}const M=C-y+1;for(let D=0;D<M;++D)d[D]=Cesium__namespace.JulianDate.secondsDifference(r[y+D],r[C]);if(Cesium__namespace.defined(l[i(x._0x41a919)]))l[i(1272)](h,y,C,u);else{let D=0;const F=o._packedLength;let L=y*F;const B=(C+1)*F;for(;L<B;)u[D]=h[L],L++,D++}const w=Cesium__namespace.JulianDate.secondsDifference(e,r[C]);let H;if(g===0||!Cesium__namespace.defined(m.interpolate))H=m[i(667)](w,d,u,f,o._interpolationResult);else{const D=Math[i(3927)](f/(g+1));H=m.interpolate(w,d,u,D,g,g,o._interpolationResult)}return Cesium__namespace[i(639)](l.unpackInterpolationResult)?l.unpackInterpolationResult(H,h,y,C,t):l.unpack(H,0,t)}return l[i(x._0x189545)](h,this._flyok_index*o._packedLength,t)}clearPosition(){const e=_0x2397ca;var t,x;const i=(t=this.property)===null||t===void 0||(x=t._property)===null||x===void 0?void 0:x._times;!i||i.length===0||this.property[e(1241)](new Cesium__namespace.TimeInterval({start:i[0],stop:i[i.length-1]}))}getRectangle(e){const t=_0x2397ca;var x,i,s,o;const r=(x=this.property)===null||x===void 0||(i=x[t(2062)])===null||i===void 0?void 0:i._times,c=(s=this.property)===null||s===void 0||(o=s._property)===null||o===void 0?void 0:o._values;if(!r||r.length===0)return;const _=[];for(let h=0,d=r.length;h<d;h++)_[t(2434)](new Cesium__namespace[t(295)](c[h*3],c[h*3+1],c[h*3+2]));return getRectangle(_,e==null?void 0:e.isFormat)}getCoordinates(e){const t={_0x48e5c4:419,_0x26f7d:2027},x=_0x2397ca;var i,s,o,r;const c=(i=this.property)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times,_=(o=this.property)===null||o===void 0||(r=o[x(2062)])===null||r===void 0?void 0:r[x(t._0x48e5c4)];if(!c||c[x(t._0x26f7d)]===0)return[];const l=[];for(let h=0,d=c.length;h<d;h++){const u=LngLatPoint[x(2145)](new Cesium__namespace.Cartesian3(_[h*3],_[h*3+1],_[h*3+2])),m=u.toArray(e);m.push(Cesium__namespace[x(1522)].toDate(c[h]).getTime()),l.push(m)}return l}[_0x2397ca(2703)](e={}){const t={_0x33fb99:1722},x=_0x2397ca;if(!this[x(558)])return;const i=this._position;if(!i)return;let s;if(Cesium__namespace.defined(e[x(t._0x33fb99)])){var o;s=e.heading+Cesium__namespace.Math.toDegrees(((o=this.hpr)===null||o===void 0?void 0:o[x(1722)])||0)}this[x(558)].flyToPoint(i,{...e,heading:s})}static clearLastCamera(){const e=_0x2397ca;var t,x,i;(t=globeLastRoam)!==null&&t!==void 0&&(x=t.options)!==null&&x!==void 0&&(i=x.camera)!==null&&i!==void 0&&i.type&&(globeLastRoam.options[e(3400)].type=""),globeLastRoam=null}setCameraOptions(e){const t={_0x5a1967:3044,_0x97ca11:3044},x=_0x2397ca;var i;Route[x(2542)](),this[x(t._0x5a1967)].camera?this[x(t._0x97ca11)][x(3400)]=merge(this.options[x(3400)],e):e?this.options.camera=e:this[x(t._0x5a1967)].camera={type:""},((i=this.options.camera)===null||i===void 0?void 0:i.type)!==""&&(globeLastRoam=this),e&&e[x(968)]==="gs"&&e.radius&&this.flyToPoint({...e,duration:0})}autoSurfaceHeight(){logWarn(_0x2397ca({_0x334f74:1601}._0x334f74))}pause(){const e={_0x589408:2104},t=_0x2397ca;this._map&&(this._map[t(3703)][t(3957)]=!1,this[t(e._0x589408)]&&this._map.trackedEntity===this._trackedEntity&&(this._map[t(610)]=void 0))}proceed(){const e=_0x2397ca;this._map&&(this[e(558)].clock.shouldAnimate=!0)}_getPopupPosition(){const e={_0x3cc30a:1173};return!this._popupPosition&&(this._popupPosition=new Cesium__namespace.CallbackProperty(t=>this[_0x3361(e._0x3cc30a)],!1)),this._popupPosition}destroy(e){const t={_0x4572bc:2941},x=_0x2397ca;this.eachChildGraphic(i=>{i.destroy(e)}),super[x(t._0x4572bc)](e)}}register$4("route",Route);class FixedRoute extends Route{constructor(e={}){const t=_0x2397ca;super(e),this.options.showStop=this.options.showStop??!0,this.options[t(2998)]=this.options[t(2998)]??!0}get startTime(){return this._startTime}get stopTime(){return this._stopTime}get points(){return this._points}set points(e){const t={_0x3d9621:1091},x=_0x2397ca;this[x(t._0x3d9621)]=e}get positions(){const e={_0x39d22f:4014},t=_0x2397ca;return this._points[t(e._0x39d22f)](x=>x._position)}set positions(e){const t={_0x12deb7:3772,_0x3919ab:1579,_0x2f0038:3044,_0x33387a:1522,_0x5d404e:2027,_0xba787b:402,_0x22906e:3069,_0x139199:3777,_0x2865b7:1173,_0x3f7a45:1772,_0x30b31e:3876,_0x438dd9:2500,_0x2a4239:1620,_0x323a9d:2354,_0xa3e34f:3777,_0x575236:1173,_0x36b396:1592,_0x1cfc20:2434,_0x3ca6b9:3069,_0x4979cf:392,_0x17bff1:3144},x={_0x38f0b7:295,_0x5e95b0:1155},i=_0x2397ca;if(!this._map||!e||!Array.isArray(e)||e.length===0)return;const s=LngLatArray[i(t._0x12deb7)](e);this[i(293)]();let o;if(this.options.startTime)isString(this.options.startTime)?this.options.startTime.indexOf("Z")===-1?o=Cesium__namespace.JulianDate[i(t._0x3919ab)](new Date(this[i(t._0x2f0038)].startTime)):o=Cesium__namespace[i(t._0x33387a)][i(2528)](this.options.startTime):this.options.startTime instanceof Date?o=Cesium__namespace[i(1522)].fromDate(this.options.startTime):o=this.options.startTime;else if(this.options.timeField){const w=s[0][this.options.timeField];o=Cesium__namespace[i(1522)].fromDate(new Date(w))}else o=this._map.clock.currentTime;const r=this.options.speed,c=r&&Array.isArray(r),_=100;function l(w,H){return H.speed?H.speed:H._speed?H._speed:c?(r[w]||_)/3.6:(r||_)/3.6}const h=this.options.offsetHeight??0;let d=0,u=0,m,f;const g=[];let b=!1;const y=.001;function C(w,H){const D=i;for(let F=w-1;F>=0;F--){const L=s[F],B=L._position||Cesium__namespace[D(x._0x38f0b7)].fromDegrees(L.lng,L.lat,L.alt+h);if(L._position=B,Cesium__namespace.Cartesian3.distance(H,B)!==0)return getOnLinePointByLen(B,H,y,!0)}for(let F=w-1,L=s.length;F<L;F++){const B=s[F],Y=B._position||Cesium__namespace.Cartesian3[D(402)](B.lng,B.lat,B[D(x._0x5e95b0)]+h);if(B[D(1173)]=Y,Cesium__namespace.Cartesian3.distance(H,Y)!==0)return getOnLinePointByLen(H,Y,y,!1)}return null}for(let w=0,H=s[i(t._0x5d404e)];w<H;w++){let D=s[w],F=D._position||Cesium__namespace[i(295)][i(t._0xba787b)](D.lng,D[i(3736)],D.alt+h);if(w===0){if(f=o[i(t._0x22906e)](),this[i(t._0x139199)].addSample(f,F),D[i(t._0x2865b7)]=F,D._time=f,D._distance=u,D._second=d,D._speed=0,D._index=w,g[i(2434)](D),Cesium__namespace.defined(D.heading)){this._orientation=new Cesium__namespace.SampledProperty(Cesium__namespace[i(t._0x3f7a45)]),b=!0;const L=new Cesium__namespace[i(845)](Cesium__namespace[i(t._0x30b31e)][i(t._0x438dd9)](D.heading||0),Cesium__namespace.Math[i(2500)](D.pitch||0),Cesium__namespace.Math.toRadians(D.roll||0));this._orientation.addSample(f,Cesium__namespace[i(t._0x2a4239)].headingPitchRollQuaternion(F,L))}}else{let L=Cesium__namespace.Cartesian3[i(230)](F,m);if(L===0&&(L=y,F=C(w,F),!F))continue;let B,Y;if(this.options.timeField){const j=new Date(D[this.options.timeField]),J=Cesium__namespace.JulianDate.fromDate(j);B=Cesium__namespace.JulianDate.secondsDifference(J,f)||.01,f=J,Y=L/B,d+=B}else Y=l(w-1,D),B=L/Y,B<.01&&(B=.01),d+=B,f=Cesium__namespace[i(t._0x33387a)][i(t._0x323a9d)](o,d,new Cesium__namespace.JulianDate);if(u+=L,this[i(t._0xa3e34f)].addSample(f,F),b){const j=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[i(t._0x30b31e)].toRadians(D.heading||0),Cesium__namespace.Math.toRadians(D.pitch||0),Cesium__namespace.Math.toRadians(D.roll||0));this._orientation.addSample(f,Cesium__namespace.Transforms.headingPitchRollQuaternion(F,j))}if(D[i(t._0x2865b7)]=F,D[i(633)]=f,D._distance=u,D._second=d,D._speed=Y,D._index=w,g.push(D),this[i(3044)].pauseTime){const j=C(w,F);if(!j)continue;let J;typeof this.options[i(909)]=="function"?J=this.options.pauseTime(w,j):J=this.options.pauseTime,J>0&&(d+=J,f=Cesium__namespace.JulianDate[i(2354)](o,d,new Cesium__namespace[i(t._0x33387a)]),this.property.addSample(f,j),u+=y,D=clone(D),D[i(t._0x575236)]=j,D._time=f,D._distance=u,D[i(3122)]=d,D._speed=0,D[i(t._0x36b396)]=w,g[i(t._0x1cfc20)](D))}}m=F}if(this._points=g,this._startTime=o,this._stopTime=f[i(t._0x3ca6b9)](),this.second_all=d,this.distance_all=u,this.options.interpolation&&this.property.setInterpolationOptions({interpolationDegree:this.options[i(3191)]??2,interpolationAlgorithm:this.options.interpolationAlgorithm??Cesium__namespace.HermitePolynomialApproximation}),this.options.showStop){var v,M;this.backToFirst(),(v=this.options)!==null&&v!==void 0&&(M=v[i(t._0x4979cf)])!==null&&M!==void 0&&M[i(3197)]&&(this[i(t._0x17bff1)].polyline.positions=this.positions)}this[i(1788)](EventType.updatePosition,{position:this.property})}get isStart(){return this._isStart}get info(){return this._timeinfo}_addedHook(e){const t={_0x363b10:2780,_0x5afe23:1243,_0x58b234:1091},x=_0x2397ca;var i,s;this.show&&(this[x(t._0x363b10)](),(i=this.model)!==null&&i!==void 0&&i.readyPromise&&this[x(t._0x5afe23)].readyPromise.then(()=>{this._readyPromise.resolve(this)}),this[x(t._0x58b234)]=this.options[x(t._0x58b234)],this._polyline_positions=[],(s=this._child.path)!==null&&s!==void 0&&s[x(394)]&&(this._child.path.entity[x(2166)]=void 0))}[_0x2397ca(3535)](e,t){const x={_0x4e2701:3071,_0xb14ed7:3535},i=_0x2397ca;for(const s in t)switch(s){case i(x._0x4e2701):case"startTime":this[i(1091)]=this.options.positions;break;default:super[i(x._0xb14ed7)](e,t);break}}[_0x2397ca(546)](){const e={_0x12c9ac:2027,_0x9cd373:1286,_0x5e0f34:163},t=_0x2397ca;var x;if(!(!this._map||this._isStart)){if(!Cesium__namespace.defined(this._points)||this._points[t(e._0x12c9ac)]===0){logError$1("没有坐标数据，漫游路线启动失败",this[t(1428)]);return}this._isStart=!0,this.positions=this._points,(x=this._child.model)!==null&&x!==void 0&&x.show&&this.options.updateClock?(this._map.clock.shouldAnimate=!1,this._map.clock.currentTime=this.startTime.clone(),this._child[t(1243)][t(1171)][t(e._0x9cd373)](()=>{this._start()})):this[t(e._0x5e0f34)]()}}_start(){const e={_0x35e0bc:3718,_0x12db7f:3044,_0xa895c:3172,_0x4d137c:558,_0x3f7d15:3764,_0x4e5861:1240,_0x188ef6:558,_0xd77d9a:3452,_0x230b7b:366,_0x5c1053:3777,_0xfb8f0f:1577,_0x30efa6:3144,_0x1d4419:1788},t=_0x2397ca;var x;if(this.options.updateClock&&(this._map.clock.shouldAnimate=!0,this._map.clock[t(e._0x35e0bc)]=this.startTime.clone(),!this[t(e._0x12db7f)][t(e._0xa895c)]&&this.options.clockRange&&(this._bak_clockRange=this._map.clock.clockRange,this._bak_startTime=this[t(e._0x4d137c)].clock[t(e._0x3f7d15)],this._bak_stopTime=this._map.clock[t(3452)],this[t(558)][t(3703)].clockRange=this[t(3044)][t(e._0x4e5861)]??Cesium__namespace.ClockRange.LOOP_STOP,this._map.clock.startTime=this.startTime.clone(),this._map.clock[t(3452)]=this.stopTime.clone(),this[t(e._0x188ef6)].controls.timeline&&this._map[t(1090)].timeline.zoomTo(this.startTime,this[t(e._0xd77d9a)]))),(x=this._child.path)!==null&&x!==void 0&&x.entity){var i;let s=this[t(e._0x230b7b)];((i=this[t(e._0x5c1053)])===null||i===void 0?void 0:i[t(e._0xfb8f0f)])===Cesium__namespace.ExtrapolationType[t(330)]&&(s=Cesium__namespace.JulianDate.addDays(s,365,new Cesium__namespace.JulianDate)),this[t(e._0x30efa6)].path[t(394)].availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:this._startTime,stop:s})])}this[t(e._0x1d4419)](EventType.start),this.bindUpdateEvent()}stop(){const e={_0x254822:2383,_0x127ffa:1254,_0x19edfa:394},t=_0x2397ca;var x;!this[t(e._0x254822)]||!this._map||(this[t(558)].trackedEntity=void 0,this.unbindUpdateEvent(),this.options[t(e._0x127ffa)]?this.backToFirst():(this._position=void 0,this[t(2979)]()),this._polyline_positions=[],(x=this._child.path)!==null&&x!==void 0&&x.entity&&(this[t(3144)].path[t(e._0x19edfa)].availability=void 0),this._isStart=!1,this[t(1788)](EventType[t(1568)]),this.fire(EventType.updatePosition,{position:this._position}))}backToFirst(){const e=_0x2397ca;this._flyok_index=0,this._position=this[e(1428)][0]._position,this._orientation_show=this._orientation.getValue(this.startTime),this._updatePosition(),this._updateForEvent(!1)}_updatePositionEx(){const e=_0x2397ca;var t,x;(t=this.options)!==null&&t!==void 0&&(x=t[e(392)])!==null&&x!==void 0&&x.showAll&&(this._child.polyline.positions=this[e(1091)])}_updateForEvent(e=!0){const t={_0xc11f92:688,_0x20b991:295,_0x2bf7f6:2733,_0x5509a2:1630,_0x3e2807:2321,_0x432c28:3044,_0x31280c:3764,_0x449e3f:1866,_0x532df2:3881,_0x5a1dce:558,_0x548442:3718,_0x5e1bfc:1428,_0x18b7cb:3626,_0x3a2f00:366,_0x37e603:1522,_0x34eef7:3884,_0x7653f1:3298},x=_0x2397ca;if(!this._points)return;const i=this._flyok_index,s=this._points[this._points[x(2027)]-1],o=this._points[Math.max(i-1,0)];if(!o)return;const r=LngLatPoint.fromCartesian(this._position);let c=o[x(t._0xc11f92)]+(this._position?Cesium__namespace[x(t._0x20b991)].distance(this._position,o._position):0);c>s._distance&&(c=s[x(688)]);let _=0;if(i>0&&(_=Cesium__namespace.JulianDate.secondsDifference(this._map.clock.currentTime,this.startTime),_>s._second&&(_=s._second)),this._timeinfo={index:i,counts:this[x(2321)]??this[x(1428)].length,point:r,position:this._position,orientation:this._orientation_show,second:_,second_all:s._second,distance:c,distance_all:s._distance,speed:o[x(2818)]},!!e){if(this[x(1788)](EventType.change,this._timeinfo),i!==this[x(2733)]){if(Cesium__namespace.defined(this._last_fireIndex)&&this._last_fireIndex+1!==i)for(;++this[x(t._0x2bf7f6)]<i;)this.fire(EventType[x(t._0x5509a2)],{counts:this._counts,index:this[x(t._0x2bf7f6)],point:this._points[this._last_fireIndex]});this.fire(EventType.endItem,{counts:this._counts,index:i,point:this._points[i]}),i===this[x(t._0x3e2807)]&&this.fire(EventType.end),this._last_fireIndex=i}if(_>=s._second){var l;if(this[x(t._0x432c28)].clockLoop&&!this[x(3044)].clockRange){var h;if(this[x(2838)](),this.options[x(t._0x31280c)])delete this.options.startTime;else if(this.options[x(t._0x449e3f)]){const u=this._points[0][this.options.timeField],m=Cesium__namespace.JulianDate.fromDate(new Date(u)),f=Cesium__namespace.JulianDate[x(t._0x532df2)](this[x(t._0x5a1dce)][x(3703)][x(t._0x548442)],m);for(let g=0;g<this[x(t._0x5e1bfc)].length;g++){const b=Cesium__namespace.JulianDate.fromDate(new Date(this._points[g][this[x(3044)].timeField]));this._points[g][this.options.timeField]=Cesium__namespace.JulianDate[x(t._0x18b7cb)](Cesium__namespace.JulianDate.addSeconds(b,f,new Cesium__namespace.JulianDate))}}if(this.positions=this._points,(h=this._child[x(2875)])!==null&&h!==void 0&&h.entity){var d;let u=this[x(t._0x3a2f00)];((d=this.property)===null||d===void 0?void 0:d[x(1577)])===Cesium__namespace.ExtrapolationType[x(330)]&&(u=Cesium__namespace[x(t._0x37e603)].addDays(u,365,new Cesium__namespace.JulianDate)),this._child.path.entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:this._startTime,stop:u})])}this.bindUpdateEvent();return}(this.options.autoStop||((l=this.property)===null||l===void 0?void 0:l[x(1577)])===Cesium__namespace[x(t._0x34eef7)][x(t._0x7653f1)])&&this.stop()}}}[_0x2397ca(3513)](e={}){const t={_0x15d528:3399},x={_0x454cf0:2027,_0x524306:3529},i={_0x4d485a:1173},s=this._points;let o=0;const r=[],c=[],_=[],l=[],h=[];return new Promise((d,u)=>{const m=_0x3361,f=[];s.forEach(g=>{const b=_0x3361;f.push(g[b(i._0x4d485a)])}),computeStepSurfaceLine({objectsToExclude:this._layer[m(3656)],...e,exact:!0,scene:this._map[m(t._0x15d528)],positions:f,endItem:(g,b,y)=>{const C=m;var v,M;if(!this._map)return;const w=s[y];if(b)h.push(w);else for(let L=0;L<g[C(x._0x454cf0)];L++){const B=LngLatPoint.fromCartesian(g[L]);B._speed=w._speed,h[C(2434)](B)}const H=((v=s[y])===null||v===void 0?void 0:v.alt)||0,D=((M=s[y+1])===null||M===void 0?void 0:M.alt)||0,F=(D-H)/g[C(2027)];for(let L=0;L<g.length;L++){L!==0&&(o+=Cesium__namespace.Cartesian3[C(230)](g[L],g[L-1])),r.push(Number(o[C(x._0x524306)](1)));const B=LngLatPoint.fromCartesian(g[L]);l[C(2434)](B);const Y=b?0:B.alt;c.push(Y);const j=Number((H+F*L).toFixed(1));_.push(j)}},end:()=>{const g=m;this[g(558)]&&(this[g(823)]={arrLength:r,arrFxgd:_,arrHbgd:c,arrPoint:l},this.positions=h,d(h))}})})}clampToGround(e){return this[_0x2397ca(3513)](e)}getTerrainHeight(e={}){const t={_0x39e15b:2027,_0x3a0cc8:295,_0x5caf69:3529,_0x29b4b6:2434},x=this._points;return new Promise((i,s)=>{const o={_0x584b05:823},r=_0x3361;if(this[r(823)]){i(this._terrainHeight);return}this._getTerrainHeight_ing=!0;let c=0;const _=[],l=[],h=[],d=[];computeStepSurfaceLine({objectsToExclude:this._layer.objectsToExclude,...e,exact:!0,scene:this._map.scene,positions:x,endItem:(u,m,f)=>{const g=r,b=x[f][g(1155)],y=x[f+1].alt,C=(y-b)/u[g(t._0x39e15b)];for(let v=0;v<u.length;v++){v!==0&&(c+=Cesium__namespace[g(t._0x3a0cc8)].distance(u[v],u[v-1])),_[g(2434)](Number(c.toFixed(1)));const M=LngLatPoint.fromCartesian(u[v]);d.push(M);const w=m?0:M.alt;l[g(2434)](w);const H=Number((b+C*v)[g(t._0x5caf69)](1));h[g(t._0x29b4b6)](H)}},end:()=>{const u=r;this._getTerrainHeight_ing=!1,this[u(o._0x584b05)]={arrLength:_,arrFxgd:h,arrHbgd:l,arrPoint:d},i(this._terrainHeight)}})})}}register$4(_0x2397ca(1709),FixedRoute);class SkylineBody extends PolygonPrimitive{get position(){const e=_0x2397ca;if(this._position)return this._position;if(this.property){var t,x;return this.property.getValue((t=this._map)===null||t===void 0||(x=t.clock)===null||x===void 0?void 0:x[e(3718)])}}set[_0x2397ca(760)](e){const t={_0x2e2166:232,_0x1cc4d7:1364},x=_0x2397ca;var i;if(this[x(t._0x2e2166)](e))return this[x(1173)];this._point=LngLatPoint[x(t._0x1cc4d7)](e),this._position=(i=this._point)===null||i===void 0?void 0:i.toCartesian(),this.fire(EventType.updatePosition,{position:this._position})}_addedHook(e){const t={_0x284038:357},x=_0x2397ca;return this[x(t._0x284038)].extrudedHeight=this.style.extrudedHeight??0,this._positions=this._getPositions(),super._addedHook(e)}_getPositions(){const e={_0x3f870d:3399},t=_0x2397ca,x=this.options.splitNum??512,i=getRayIntersectingPositions({scene:this[t(558)][t(e._0x3f870d)],splitNum:x}),s=this.position??this._map.scene.camera.position,o=[s];for(let r=x-1;r>=0;r--)for(let c=x-1;c>=0;c--){const _=i[r][c];if(_){o.push(_);break}}return o.push(s),o}}register$4("skylineBody",SkylineBody);var index$6={__proto__:null,BaseGraphic,BaseEntity,BasePointEntity,BasePolyEntity,BasePrimitive,BasePointPrimitive,BasePolyPrimitive,PointEntity,BillboardEntity,FontBillboardEntity,DivBillboardEntity,LabelEntity,CanvasLabelEntity,ModelEntity,BoxEntity,PlaneEntity,CircleEntity,CylinderEntity,ConeTrack,EllipsoidEntity,PolylineEntity,CurveEntity,PolylineVolumeEntity,PathEntity,CorridorEntity,WallEntity,RectangleEntity,PolygonEntity,EllipseEntity,RectangularSensor,Video2D,PitEntity,AttackArrow,AttackArrowPW,AttackArrowYW,CloseVurve,DoubleArrow,FineArrow,FineArrowYW,GatheringPlace,IsosTriangle,Lune,Regular,Sector,StraightArrow,PointMeasure,DistanceMeasure,DistanceSurfaceMeasure,SectionMeasure,AngleMeasure,HeightMeasure,HeightTriangleMeasure,AreaMeasure,AreaSurfaceMeasure,VolumeMeasure,VolumeDepthMeasure,PointPrimitive,BillboardPrimitive,CloudPrimitive,LabelPrimitive,ModelPrimitive,CirclePrimitive,PlanePrimitive,BoxPrimitive,CylinderPrimitive,ConeTrackPrimitive,EllipsoidPrimitive,PolylinePrimitive,WallPrimitive,CorridorPrimitive,PolylineVolumePrimitive,RectanglePrimitive,PolygonPrimitive,FrustumPrimitive,LightCone,Water,DiffuseWall,ScrollWall,ThickWall,DynamicRiver,Road,Pit,DoubleSidedPlane,ReflectionWater,VideoPrimitive,BaseCombine,FlatBillboard,PlaneCombine,BoxCombine,CircleCombine,CylinderCombine,FrustumCombine,EllipsoidCombine,PolylineCombine,PolylineVolumeCombine,CorridorCombine,WallCombine,PolygonCombine,WaterCombine,RectangleCombine,DivGraphic,DivBoderLabel,DivLightPoint,DivUpLabel,Popup,Tooltip,ParticleSystem,ArcFrustum,Tetrahedron,ViewShed,Video3D,Route,FixedRoute,SkylineBody};class XyzImageryProvider$1 extends Cesium__namespace[_0x2397ca(815)]{constructor(e={}){const t={_0x6fe3e7:3155,_0x5b1709:361,_0x5a8550:3155,_0x5709b4:3077,_0x4aade4:3044},x=_0x2397ca;e[x(3155)]=e.customTags||{},e[x(t._0x6fe3e7)][x(t._0x5b1709)]=function(i,s,o,r){return location.host},e[x(t._0x5a8550)][x(t._0x5709b4)]=function(i,s,o,r){return location.hostname},e.customTags.z4490=function(i,s,o,r){return r+1},super(e),this[x(t._0x4aade4)]=e}}class TdtImageryProvider extends Cesium__namespace[_0x2397ca(890)]{constructor(e={}){const t={_0x2abd77:3440,_0x1774f0:891,_0x5c9d94:1221,_0x1440b9:1369,_0x29aafc:3137,_0x36125a:3845,_0x5d5721:1482,_0x58dfb6:696},x=_0x2397ca;let i,s=18;switch(e.layer){case"vec_d":i="vec";break;case x(t._0x2abd77):i=x(t._0x1774f0);break;case"vec_e":i=x(t._0x5c9d94);break;case"img_d":i=x(3283);break;case"img_z":i="cia";break;case"img_e":i=x(t._0x1440b9);break;case"ter_d":i="ter",s=14;break;case"ter_z":i="cta",s=14;break;default:i="vec";break}(e.key==null||e.key.length===0)&&(e.key=tiandituArr);const o=getArrayRandomOne(e.key);let r;!e[x(t._0x29aafc)]||e.crs===CRS.EPSG3857?(r=x(246)+i+"_w/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+i+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk="+o,(e[x(1482)]||e[x(839)]||e.queryParameters)&&(r=getUrlResource({url:r[x(1487)](x(t._0x36125a),"0"),proxy:e.proxy,headers:e[x(839)],queryParameters:e.queryParameters})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e.maximumLevel??s,...e,url:r,layer:i,style:"default",format:"tiles",tileMatrixSetID:"w",tileMatrixLabels:[...Array(20).keys()].map(c=>c[x(1104)]()),tilingScheme:new Cesium__namespace.WebMercatorTilingScheme}):(r="https://t{s}.tianditu.gov.cn/"+i+"_c/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+i+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk="+o,s=17,(e[x(t._0x5d5721)]||e.headers||e.queryParameters)&&(r=getUrlResource({url:r.replace("{s}","0"),proxy:e[x(1482)],headers:e.headers,queryParameters:e[x(t._0x58dfb6)]})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e.maximumLevel??s,...e,url:r,layer:i,style:"default",format:x(1712),tileMatrixSetID:"c",tileMatrixLabels:[...Array(20).keys()].map(c=>(c+1)[x(1104)]()),tilingScheme:new Cesium__namespace[x(2309)]}),super(e),this.options=e}}class GaodeImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x5e21d0:3647,_0x6e8e42:1482,_0x5b3bd7:1487},x=_0x2397ca;let i;switch(e.layer){case"vec":i="https://"+(e.bigfont?"wprd":"webrd")+x(t._0x5e21d0);break;case"img_d":i="https://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}";break;case"img_z":i="https://webst0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8";break;case"time":{i="https://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&x={x}&y={y}&z={z}&&t="+new Date().getTime();break}default:i=e[x(914)];break}(e[x(t._0x6e8e42)]||e.headers||e.queryParameters)&&(i=getUrlResource({url:i[x(t._0x5b3bd7)](x(3845),"1"),proxy:e.proxy,headers:e.headers,queryParameters:e[x(696)]})),super({subdomains:["1","2","3","4"],maximumLevel:18,...e,url:i})}}const EARTH_RADIUS=637099681e-2,MC_BAND=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LL_BAND=[75,60,45,30,15,0],MC2LL=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class BaiduMercatorProjection{constructor(){const e={_0x4b470e:2940},t=_0x2397ca;this[t(e._0x4b470e)]=!1}getDistanceByMC(e,t){const x={_0x15f57a:3420,_0x1a7b99:3409,_0x3a58eb:3420},i=_0x2397ca;if(!e||!t||(e=this[i(x._0x15f57a)](e),!e))return 0;const s=this.toRadians(e[i(x._0x1a7b99)]),o=this.toRadians(e.lat);if(t=this[i(x._0x3a58eb)](t),!t)return 0;const r=this.toRadians(t.lng),c=this.toRadians(t[i(3736)]);return this.getDistance(s,r,o,c)}getDistanceByLL(e,t){const x={_0x4b175b:3736,_0x2553d5:3409},i=_0x2397ca;if(!e||!t)return 0;e.lng=this.getLoop(e.lng,-180,180),e[i(x._0x4b175b)]=this.getRange(e[i(x._0x4b175b)],-74,74),t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74);const s=this.toRadians(e.lng),o=this.toRadians(e.lat),r=this.toRadians(t[i(x._0x2553d5)]),c=this.toRadians(t.lat);return this.getDistance(s,r,o,c)}convertMC2LL(e){const t={_0x540667:3736},x=_0x2397ca;if(!e)return{lng:0,lat:0};let i={};if(this.isWgs84){i.lng=e.lng/2003750834e-2*180;const r=e.lat/2003750834e-2*180;return i[x(t._0x540667)]=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lng:i.lng.toFixed(6),lat:i[x(3736)].toFixed(6)}}const s={lng:Math[x(889)](e.lng),lat:Math[x(889)](e.lat)};let o;for(let r=0;r<MC_BAND.length;r++)if(s.lat>=MC_BAND[r]){o=MC2LL[r];break}return i=this[x(1765)](e,o),{lng:i[x(3409)][x(3529)](6),lat:i.lat.toFixed(6)}}convertLL2MC(e){const t={_0x41abe3:2940,_0x2b0b5a:855,_0x380259:2212,_0x2e9ac4:3409},x=_0x2397ca;if(!e)return{lng:0,lat:0};if(e.lng>180||e.lng<-180||e.lat>90||e[x(3736)]<-90)return e;if(this[x(t._0x41abe3)]){const r={};r.lng=e[x(3409)]*Math.PI/180*6378137;const _=e.lat*Math.PI/180;return r.lat=6378137/2*Math[x(t._0x2b0b5a)]((1+Math[x(t._0x380259)](_))/(1-Math.sin(_))),{lng:parseFloat(r.lng.toFixed(2)),lat:parseFloat(r.lat.toFixed(2))}}e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);const i={lng:e.lng,lat:e[x(3736)]};let s;for(let r=0;r<LL_BAND.length;r++)if(i.lat>=LL_BAND[r]){s=LL2MC[r];break}if(!s){for(let r=0;r<LL_BAND.length;r++)if(i.lat<=-LL_BAND[r]){s=LL2MC[r];break}}const o=this.convertor(e,s);return{lng:parseFloat(o[x(t._0x2e9ac4)][x(3529)](2)),lat:parseFloat(o.lat[x(3529)](2))}}[_0x2397ca(1765)](e,t){const x={_0x11f5db:3409},i=_0x2397ca;if(!e||!t)return{lng:0,lat:0};let s=t[0]+t[1]*Math.abs(e[i(x._0x11f5db)]);const o=Math[i(889)](e.lat)/t[9];let r=t[2]+t[3]*o+t[4]*o*o+t[5]*o*o*o+t[6]*o*o*o*o+t[7]*o*o*o*o*o+t[8]*o*o*o*o*o*o;return s*=e.lng<0?-1:1,r*=e.lat<0?-1:1,{lng:s,lat:r}}getDistance(e,t,x,i){const s={_0x4d727e:1314},o=_0x2397ca;return EARTH_RADIUS*Math.acos(Math.sin(x)*Math.sin(i)+Math[o(1314)](x)*Math.cos(i)*Math[o(s._0x4d727e)](t-e))}toRadians(e){return Math.PI*e/180}toDegrees(e){return 180*e/Math.PI}getRange(e,t,x){const i={_0x1371ea:3173},s=_0x2397ca;return t!=null&&(e=Math.max(e,t)),x!=null&&(e=Math[s(i._0x1371ea)](e,x)),e}getLoop(e,t,x){for(;e>x;)e-=x-t;for(;e<t;)e+=x-t;return e}lngLatToMercator(e){return this.convertLL2MC(e)}[_0x2397ca(172)](e){const t={_0x3d8a08:3409},x=_0x2397ca,i=this.convertLL2MC(e);return{x:i[x(t._0x3d8a08)],y:i.lat}}[_0x2397ca(2146)](e){return this.convertMC2LL(e)}pointToLngLat(e){const t={lng:e.x,lat:e.y};return this.convertMC2LL(t)}pointToPixel(e,t,x,i){const s={_0x559b11:3409,_0x4f4c05:3736},o=_0x2397ca;if(!e)return{x:0,y:0};e=this.lngLatToMercator(e);const r=this.getZoomUnits(t),c=Math.round((e.lng-x[o(s._0x559b11)])/r+i[o(1526)]/2),_=Math.round((x[o(s._0x4f4c05)]-e.lat)/r+i.height/2);return{x:c,y:_}}pixelToPoint(e,t,x,i){const s={_0x143fcc:1699,_0x5a8018:3736,_0xf25ce:2146},o=_0x2397ca;if(!e)return{lng:0,lat:0};const r=this[o(s._0x143fcc)](t),c=x.lng+r*(e.x-i.width/2),_=x[o(s._0x5a8018)]-r*(e.y-i.height/2),l={lng:c,lat:_};return this[o(s._0xf25ce)](l)}[_0x2397ca(1699)](e){return Math.pow(2,18-e)}}class BaiduMercatorTilingScheme extends Cesium__namespace[_0x2397ca(2058)]{constructor(e){const t={_0x576120:778},x=_0x2397ca;super(e);const i=e.mapChinaCRS||ChinaCRS.WGS84,s=ChinaCRS.BAIDU,o=getTransFun(i,s),r=getTransFun(s,i),c=new BaiduMercatorProjection;this._projection.project=function(_,l){const h=_0x3361;return l=[Cesium__namespace.Math.toDegrees(_.longitude),Cesium__namespace[h(3876)][h(t._0x576120)](_.latitude)],o&&(l=o(l)),l[0]=Math.min(l[0],180),l[0]=Math.max(l[0],-180),l[1]=Math.min(l[1],85.05112877980659),l[1]=Math.max(l[1],-85.05112877980659),l=c.lngLatToPoint({lng:l[0],lat:l[1]}),new Cesium__namespace.Cartesian2(l.x,l.y)},this[x(579)][x(418)]=function(_,l){return l=c.mercatorToLngLat({lng:_.x,lat:_.y}),l=[l.lng,l.lat],r&&(l=r(l)),new Cesium__namespace.Cartographic(Cesium__namespace.Math.toRadians(l[0]),Cesium__namespace.Math.toRadians(l[1]))},this[x(880)]=e[x(880)]||[]}tileXYToNativeRectangle(e,t,x,i){const s={_0xe6dcab:3520},o=_0x2397ca,r=this.resolutions[x],c=e*r,_=(e+1)*r,l=((t=-t)+1)*r,h=t*r;return Cesium__namespace.defined(i)?(i.west=c,i[o(2204)]=h,i.east=_,i[o(1464)]=l,i):new Cesium__namespace[o(s._0xe6dcab)](c,h,_,l)}[_0x2397ca(3250)](e,t,x){const i={_0x4f5171:3520,_0x4319c8:579,_0x4d1ca6:590,_0x552a73:518},s=_0x2397ca,o=this._rectangle;if(!Cesium__namespace[s(i._0x4f5171)].contains(o,e))return;const r=this[s(i._0x4319c8)],c=r[s(i._0x4d1ca6)](e);if(!Cesium__namespace.defined(c))return;const _=this.resolutions[t],l=Math.floor(c.x/_),h=-Math.floor(c.y/_);return Cesium__namespace[s(639)](x)?(x.x=l,x.y=h,x):new Cesium__namespace[s(i._0x552a73)](l,h)}}class BaiduImageryProvider{constructor(e={}){const t={_0x479393:3879,_0x543333:3155,_0x1b3b7:696,_0x4f1a09:975,_0x1a58ec:357,_0x192c78:3531,_0x1c0f01:1109,_0x4eb3fd:3836,_0x47c528:743,_0xde98:1108,_0x16e165:3226,_0x170254:2021},x=_0x2397ca;let i;switch(e.layer){case"vec":i="https://maponline{s}.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles="+(e.bigfont?"ph":"pl")+"&scaler=2&udt=&from=jsapi2_0";break;case x(t._0x479393):i="https://maponline{s}.bdimg.com/starpic/{s}?u={mars3d_u}",e[x(3155)]=e.customTags||{},e[x(t._0x543333)].mars3d_u=(o,r,c,_)=>{const l=x;return"x="+r+l(4022)+-c+";z="+_+";v=009;type=sate"},e[x(t._0x1b3b7)]={...e.queryParameters,qt:"satepc",app:"webearth2",udt:"20210830",fm:"46",v:"009"};break;case"img_z":i="http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles="+(e[x(t._0x4f1a09)]?"sh":"sl")+"&v=020";break;case"custom":e[x(t._0x1a58ec)]=e.style||"midnight",i="http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid="+e.style;break;case x(t._0x192c78):i=x(t._0x1c0f01)+new Date()[x(t._0x4eb3fd)]()+x(2456)+(e[x(t._0x47c528)]||"web2D")+x(2791);break;case"streetview":i=x(1404);break;default:i=e.url;break}this.options=e,this._resource=getUrlResource({...e,url:i}),this._tags=Cesium__namespace[x(t._0xde98)](tags,this[x(3044)][x(3155)]),this._subdomains=["0","1","2","3"],this[x(2972)]=256,this[x(3858)]=256,this._maximumLevel=18;const s=[];for(let o=0;o<19;o++)s[o]=256*Math[x(1274)](2,18-o);this._tilingScheme=new BaiduMercatorTilingScheme({resolutions:s,rectangleSouthwestInMeters:new Cesium__namespace[x(518)](-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new Cesium__namespace.Cartesian2(2003772637e-2,1247410417e-2),mapChinaCRS:e.mapChinaCRS}),this._rectangle=this._tilingScheme.rectangle,this._readyPromise=Cesium__namespace.defer(),this._errorEvent=new Cesium__namespace[x(t._0x16e165)],this[x(t._0x170254)]=!0,this._readyPromise[x(3863)](!0)}get url(){const e=_0x2397ca;var t;return(t=this._resource)===null||t===void 0?void 0:t[e(914)]}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return 0}get tilingScheme(){return this._tilingScheme}get[_0x2397ca(1358)](){return this[_0x2397ca(1784)]}get ready(){return this._ready}get[_0x2397ca(1171)](){return this._readyPromise.promise}get errorEvent(){return this._errorEvent}get credit(){return this._credit}get hasAlphaChannel(){return!0}[_0x2397ca(3909)](e,t,x){}requestImage(e,t,x,i){const s=_0x2397ca,o=this._resource,r=o.getUrlComponent(!0),c=this[s(2811)],_={},l=r.match(templateRegex);return Cesium__namespace.defined(l)&&l[s(1255)](h=>{const d=h.substring(1,h.length-1);Cesium__namespace.defined(c[d])&&(_[d]=c[d](this,e,t,x))}),o[s(2819)]({request:i,templateValues:_}).fetchImage({preferImageBitmap:!0,flipY:!0})}}const templateRegex=/{[^}]+}/g,tags={x:xTag,y:yTag,reverseY:reverseYTag,z:zTag,s:sTag};function xTag(n,e,t,x){return e}function yTag(n,e,t,x){return-t}function reverseYTag(n,e,t,x){return n[_0x2397ca({_0x5c8689:3681}._0x5c8689)].getNumberOfYTilesAtLevel(x)-t-1}function zTag(n,e,t,x){return x}function sTag(n,e,t,x){const i={_0xec8e70:2097,_0x52cfbd:2027},s=_0x2397ca,o=(e+t+x)%n[s(i._0xec8e70)][s(i._0x52cfbd)];return n._subdomains[o]}class TencentImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t=_0x2397ca;switch(e.layer){case"vec":e.url=t(769);break;case"img_d":e.url="https://p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",e[t(3155)]={sx:(x,i,s,o)=>i>>4,sy:(x,i,s,o)=>(1<<o)-s>>4};break;case"img_z":e.url=t(1594);break;case"custom":e.style=e.style||"4",e.url="https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid="+e.style+t(2734);break}e.subdomains=e.subdomains??["0","1","2"],super(e)}}class GoogleImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x2d9ef2:1487},x=_0x2397ca;let i;if(e[x(2394)]===ChinaCRS.WGS84)i=e[x(914)]||"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=us&x={x}&y={y}&z={z}";else switch(e.layer){case"vec":i="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=m&x={x}&y={y}&z={z}";break;case"img_d":i="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=CN&x={x}&y={y}&z={z}";break;case"img_z":i="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=h&gl=CN&x={x}&y={y}&z={z}";break;case x(1393):i="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=t@131,r&gl=CN&x={x}&y={y}&z={z}";break;default:i=e.url;break}(e.proxy||e.headers||e.queryParameters)&&(i=getUrlResource({url:i[x(t._0x2d9ef2)]("{s}","1"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:["1","2","3"],maximumLevel:20,...e,url:i})}}class OsmImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t=_0x2397ca;let x="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";(e.proxy||e.headers||e.queryParameters)&&(x=getUrlResource({url:x[t(1487)]("{s}","a"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:"abc",maximumLevel:18,...e,url:x})}}class EmptyImageryProvider extends Cesium__namespace.TileCoordinatesImageryProvider{constructor(e={}){const t={_0x562847:2309},x=_0x2397ca;super(e),this.options=e,this._minimumLevel=e.minimumLevel??0,this[x(602)]=e.maximumLevel,this._tilingScheme=e.tilingScheme??new Cesium__namespace[x(t._0x562847)]({ellipsoid:e[x(1782)]}),e.rectangle?this._rectangle=Cesium__namespace.Rectangle[x(2327)](e.rectangle,this._tilingScheme[x(1358)]):this._rectangle=this._tilingScheme.rectangle,this.options=e}requestImage(e,t,x){const i={_0x4b78de:1526,_0x19c560:2619};return new Promise((s,o)=>{const r=_0x3361,c=document[r(2676)]("canvas");if(c[r(i._0x4b78de)]=256,c.height=256,x<this._minimumLevel||Cesium__namespace.defined(this._maximumLevel)&&x>this._maximumLevel)return c;if(this.options.debuggerTileInfo){const _=c.getContext("2d",{willReadFrequently:!0});_[r(739)]="#ffff00",_.lineWidth=2,_[r(i._0x19c560)](1,1,255,255);const l="L"+x+"X"+e+"Y"+t;_.font="bold 25px Arial",_.textAlign="center",_.fillStyle="black",_[r(1492)](l,127,127),_.fillStyle="#ffff00",_.fillText(l,124,124)}s(c)})}}var index$5={__proto__:null,XyzImageryProvider:XyzImageryProvider$1,TdtImageryProvider,GaodeImageryProvider,BaiduImageryProvider,TencentImageryProvider,GoogleImageryProvider,OsmImageryProvider,EmptyImageryProvider};class GroupLayer extends BaseGraphicLayer{constructor(e={}){super(e),this._arrLayer=[]}get layer(){return this._arrLayer}get arrLayer(){return this._arrLayer}get hasEmptyGroup(){return this.length===0}get hasChildLayer(){return this.length>0}get length(){const e={_0x3b8592:3018,_0x3df94e:3044,_0x58c4e9:3018},t=_0x2397ca;var x,i;if(((x=this.options)===null||x===void 0||(i=x[t(e._0x3b8592)])===null||i===void 0?void 0:i.length)>0)return this[t(e._0x3df94e)][t(e._0x58c4e9)].length;var s;return((s=this._arrLayer)===null||s===void 0?void 0:s.length)||0}get hasOpacity(){const e={_0x5ae76f:2027},t=_0x2397ca;return this._arrLayer[t(e._0x5ae76f)]===0?!1:this._arrLayer[0].hasOpacity}get hasZIndex(){return this[_0x2397ca(2759)].length===0?!1:this._arrLayer[0].hasZIndex}get zIndex(){return this.options.zIndex}set zIndex(e){this.options.zIndex=e,this.eachLayer(t=>{t[_0x3361(3317)]&&(t.zIndex=e)},this)}_showHook(e){this.eachLayer(t=>{t.show=e},this)}_mountedHook(){const e={_0x35d520:3044,_0x3a880f:2027,_0x18ce73:1847,_0x496704:3724},t=_0x2397ca;super._mountedHook();const x=this[t(e._0x35d520)][t(3018)];if(x&&x[t(e._0x3a880f)]>0)for(let i=0;i<x.length;i++){const s=x[i];s[t(e._0x18ce73)]=this,s[t(e._0x496704)]=this.isPrivate;const o=create$2(s,this.options.templateValues);o&&this[t(3615)](o)}}_addedHook(){const e={_0x34b5cf:807},t={_0x5350d1:1847},x=_0x2397ca,i=[];this.eachLayer(s=>{const o=_0x3361;s[o(t._0x5350d1)]=this,this[o(558)][o(3615)](s),i.push(s[o(1171)])},this),Promise[x(e._0x34b5cf)](i).then(s=>{this._readyPromise.resolve(this)})}[_0x2397ca(380)](){this.removeMapChilds()}[_0x2397ca(3537)](){const e={_0x796809:454},t=_0x2397ca;this[t(e._0x796809)](x=>{this[t(558)].addLayer(x)},this)}removeMapChilds(){this.eachLayer(e=>{this._map.removeLayer(e)},this)}addLayer(e){const t={_0x26aa31:2107,_0x1ca566:3085,_0x1d25da:2759,_0xd3e98d:3401,_0x97666a:558,_0x5ac91c:3615},x=_0x2397ca;return e.parent&&(e[x(t._0x26aa31)](e.parent),e[x(t._0x1ca566)]=null),e[x(3788)]=this.id,e.parent=this,e.options[x(1847)]=this,this[x(t._0x1d25da)][x(2434)](e),this.isAdded&&!e[x(t._0xd3e98d)]?this[x(t._0x97666a)][x(t._0x5ac91c)](e):(e.removeEventParent(this[x(558)]),e.addEventParent(this)),this}removeLayer(e){const t={_0x11d85e:558},x=_0x2397ca;return e[x(3085)]=null,e.removeEventParent(this),removeArrayItem(this._arrLayer,e),this[x(558)]&&e.isAdded&&this[x(t._0x11d85e)].removeLayer(e),this}eachLayer(e,t){const x={_0x22ca2a:1255},i=_0x2397ca;if(this._arrLayer)return this._arrLayer[i(x._0x22ca2a)](s=>{e.call(t,s)}),this}getLayers(){return this._arrLayer}getInMapChilds(){const e=_0x2397ca,t=this._arrLayer||[];return this._map[e(454)](x=>{const i=e;x.pid===this.id&&this._arrLayer[i(884)](x)===-1&&t[i(2434)](x)},this),t}getLayerById(e){const t=this._arrLayer;if(!(!this._arrLayer||this._arrLayer.length===0))for(let x=0,i=t.length;x<i;x++){const s=t[x];if(s.id===e)return s}}[_0x2397ca(3697)](e){const t=_0x2397ca;if(!(!this._arrLayer||this._arrLayer[t(2027)]===0))for(let x=0;x<this._arrLayer.length;x++){const i=this._arrLayer[x];if(i[t(2044)]===e||i.id===e)return i}}hasLayer(e,t){const x={_0x58a1e8:2759},i=_0x2397ca;for(let s=0;s<this[i(x._0x58a1e8)].length;s++){const o=this._arrLayer[s];if(!(t&&o===t)&&(o.name===e||o.id===e))return!0}return!1}_toJsonEx(e){const t={_0x168310:2027,_0x436325:3018},x=_0x2397ca,i=[];this.eachLayer(s=>{i.push(s.toJSON())},this),i[x(t._0x168310)]>0&&(e[x(t._0x436325)]=i)}getRectangle(e){const t={_0x33eccb:1595};let x;return this.getInMapChilds().forEach(s=>{const o=_0x3361;if(!s[o(t._0x33eccb)])return;const r=s.getRectangle();Cesium__namespace.defined(r)&&(x?x=Cesium__namespace.Rectangle[o(3519)](r,x):x=r)},this),e?formatRectangle(x):x}setOpacity(e){const t={_0x43a296:4010};this.eachLayer(x=>{const i=_0x3361;x[i(t._0x43a296)]=e},this)}toTop(){this.eachLayer(e=>{e.toTop()},this)}[_0x2397ca(2557)](){const e=this._arrLayer;for(let t=e.length-1;t>=0;t--)e[t].toBottom()}[_0x2397ca(2941)](e){const t={_0x12f61a:2941},x={_0x142364:2941},i=_0x2397ca;this.eachLayer(s=>{const o=_0x3361;s!=null&&s[o(x._0x142364)]&&s.destroy(e)},this),super[i(t._0x12f61a)](e)}}register$2("group",GroupLayer);class BaseTileLayer extends BaseLayer{constructor(e={}){super(e),this._setRectangleByOptions(e),this.isTile=!0}get[_0x2397ca(2407)](){return this[_0x2397ca(4052)]}get[_0x2397ca(2348)](){const e={_0x2fd7a6:4052},t=_0x2397ca;var x;return(x=this[t(e._0x2fd7a6)])===null||x===void 0?void 0:x.imageryProvider}get[_0x2397ca(3137)](){const e=_0x2397ca;return this[e(3044)].crs||CRS[e(2235)]}get[_0x2397ca(2708)](){return this[_0x2397ca(4010)]}set alpha(e){this.opacity=e}get brightness(){var e;return this.options.brightness||((e=this._imageryLayer)===null||e===void 0?void 0:e.brightness)}set[_0x2397ca(928)](e){const t={_0x1f00a3:3044,_0x97eed6:928},x=_0x2397ca;this[x(t._0x1f00a3)][x(t._0x97eed6)]=e,this._imageryLayer!=null&&(this._imageryLayer.brightness=e)}get contrast(){const e={_0x45b862:2100},t=_0x2397ca;var x;return this.options[t(e._0x45b862)]||((x=this._imageryLayer)===null||x===void 0?void 0:x.contrast)}set contrast(e){const t={_0x3bde59:2100},x=_0x2397ca;this.options[x(t._0x3bde59)]=e,this._imageryLayer!=null&&(this._imageryLayer[x(2100)]=e)}get[_0x2397ca(3746)](){var e;return this.options.hue||((e=this._imageryLayer)===null||e===void 0?void 0:e.hue)}set hue(e){const t={_0x422a75:3044,_0x28e335:3746,_0x1f3df2:4052},x=_0x2397ca;this[x(t._0x422a75)][x(t._0x28e335)]=e,this[x(t._0x1f3df2)]!=null&&(this._imageryLayer[x(3746)]=e)}get saturation(){const e=_0x2397ca;var t;return this.options.saturation||((t=this[e(4052)])===null||t===void 0?void 0:t.saturation)}set saturation(e){const t={_0x112a15:3693},x=_0x2397ca;this[x(3044)][x(t._0x112a15)]=e,this._imageryLayer!=null&&(this._imageryLayer.saturation=e)}get gamma(){const e={_0x179ff8:2455},t=_0x2397ca;var x;return this.options[t(e._0x179ff8)]||((x=this._imageryLayer)===null||x===void 0?void 0:x.gamma)}set gamma(e){const t={_0x2bab31:2455},x=_0x2397ca;this.options[x(t._0x2bab31)]=e,this._imageryLayer!=null&&(this._imageryLayer[x(t._0x2bab31)]=e)}get[_0x2397ca(3317)](){return!0}get[_0x2397ca(952)](){return this.options.zIndex}set zIndex(e){const t={_0x31f09b:3044,_0x99b39e:558,_0x5e33f7:4052,_0x204bbc:188,_0x92899e:1009},x=_0x2397ca;if(this[x(t._0x31f09b)].zIndex=e,this[x(4052)]==null||e==null)return;this[x(t._0x99b39e)].imageryLayers.raiseToTop(this[x(4052)]);const i=this[x(558)].imageryLayers._layers;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o===this[x(t._0x5e33f7)])continue;const r=o._mars3d_config;r&&r.zIndex&&e<r.zIndex&&this._map[x(t._0x204bbc)][x(t._0x92899e)](this._imageryLayer)}}get rectangle(){const e={_0x367311:1784},t=_0x2397ca;var x,i;return this[t(e._0x367311)]?this[t(1784)]:(x=this._imageryLayer)!==null&&x!==void 0&&(i=x.imageryProvider)!==null&&i!==void 0&&i.rectangle?this._imageryLayer.imageryProvider.rectangle:null}set rectangle(e){const t={_0x508213:1784},x=_0x2397ca;if(e){if(e instanceof Cesium__namespace.Rectangle){var i,s;this[x(t._0x508213)]=e,this.options.rectangle=formatRectangle(this._rectangle),(i=this._imageryLayer)!==null&&i!==void 0&&(s=i.imageryProvider)!==null&&s!==void 0&&s.rectangle&&(this._imageryLayer.imageryProvider[x(1784)]=this[x(t._0x508213)])}}else this._rectangle=void 0,delete this.options.rectangle,this.reload()}[_0x2397ca(3936)](e){const t={_0x1b023e:639,_0x309655:639,_0xace676:1606,_0x53bc76:1136,_0x48c0fc:2027,_0x1439a5:1784,_0x3f4f50:3520,_0x52e857:1136,_0x393ebf:1136},x=_0x2397ca;Cesium__namespace[x(639)](e.rectangle)?Cesium__namespace[x(t._0x1b023e)](e.rectangle.xmin)&&Cesium__namespace.defined(e[x(1358)].xmax)&&Cesium__namespace[x(t._0x309655)](e.rectangle.ymin)&&Cesium__namespace.defined(e.rectangle.ymax)?this[x(1784)]=Cesium__namespace.Rectangle[x(402)](e.rectangle.xmin,e.rectangle.ymin,e.rectangle.xmax,e.rectangle[x(t._0xace676)]):e.rectangle instanceof Cesium__namespace[x(3520)]?this._rectangle=e[x(1358)]:delete e.rectangle:Cesium__namespace.defined(e[x(t._0x53bc76)])&&e.bbox.length&&e[x(1136)][x(t._0x48c0fc)]===4?this[x(t._0x1439a5)]=Cesium__namespace[x(t._0x3f4f50)][x(402)](e[x(t._0x52e857)][0],e[x(1136)][1],e[x(t._0x393ebf)][2],e.bbox[3]):this[x(t._0x1439a5)]=void 0}_setOptionsHook(e,t){this[_0x2397ca(3936)](e),this.reload()}async _createImageryProvider(e){return new Cesium__namespace.UrlTemplateImageryProvider(e)}[_0x2397ca(2670)](){const e={_0x1ba204:3044,_0x5c59cb:619,_0xaa0e8f:3482,_0x4f75d6:711,_0x4dd6f0:188,_0x3f55c3:565,_0x2dae34:480,_0x2222f2:480,_0x41ba6d:3628,_0x56a43c:1728},t={_0x364b08:2842},x=_0x2397ca;var i,s,o;this[x(e._0x1ba204)].highlight&&(this.options[x(e._0x5c59cb)]=!0);const r=this._createImageryProvider({...this.options,rectangle:this.rectangle,mapChinaCRS:this._map.chinaCRS});if(!Cesium__namespace.defined(r))return;const c=this.options,_={show:this[x(e._0xaa0e8f)],alpha:this.opacity,...c,rectangle:this.rectangle,marsOptions:{onAddTile:l=>{const h=x,d=this[h(2842)](l);this.fire(EventType.addTile,d)},onAddTileSuccess:l=>{const h=x,d=this[h(2842)](l);this.fire(EventType.addTileSuccess,d)},onAddTileError:l=>{const h=x,d=this[h(t._0x364b08)](l);this.fire(EventType.addTileError,d)},onRemoveTile:l=>{const h=x,d=this[h(2842)](l);this.fire(EventType.removeTile,d)}}};this[x(4052)]=Cesium__namespace[x(4021)][x(1126)](r,_),this._imageryLayer._mars3d_layerId=this.id,this[x(4052)][x(e._0x4f75d6)]=this.options,this.options.clampToTileset&&this._map.imageryLayersForClamp&&_.crs!==CRS.EPSG3857?this._map.imageryLayersForClamp.add(this._imageryLayer):this._map[x(e._0x4dd6f0)][x(e._0x3f55c3)](this._imageryLayer),this.options.zIndex&&(this.zIndex=this.options.zIndex),this.options[x(e._0x2dae34)]?(this.options[x(e._0x5c59cb)]=!0,this[x(1764)](this.options[x(e._0x2222f2)])):(i=this[x(e._0x1ba204)][x(e._0x41ba6d)])!==null&&i!==void 0&&(s=i[x(e._0x56a43c)])!==null&&s!==void 0&&s.highlight&&this.bindHighlight(this[x(e._0x1ba204)].symbol.styleOptions.highlight),(o=this.options)!==null&&o!==void 0&&o.flyTo&&this.flyToByAnimationEnd(),this._readyPromise.resolve(this),this.fire(EventType.load,{},!0)}[_0x2397ca(2842)](e){return{x:e.x,y:e.y,level:e.level,extent:formatRectangle(e.rectangle)}}[_0x2397ca(380)](){const e={_0x11ce32:4052},t=_0x2397ca;var x,i;this.unbindHighlight(),(x=this[t(e._0x11ce32)])!==null&&x!==void 0&&(i=x.imageryProvider)!==null&&i!==void 0&&i.destroy&&this[t(e._0x11ce32)].imageryProvider.destroy(),this[t(558)].imageryLayers.remove(this[t(4052)],!0),this._imageryLayer=null}reload(){const e={_0x3806b4:3401,_0x39c41f:759,_0x2139e3:2670},t=_0x2397ca,x=this[t(3044)][t(2729)]??!1;this._imageryLayer&&this._removedHook(),this[t(e._0x3806b4)]&&(this.options.flyTo=!1,this.once(EventType[t(e._0x39c41f)],()=>{this.options.flyTo=x}),this[t(e._0x2139e3)]())}setOpacity(e){this._imageryLayer&&(this._imageryLayer.alpha=e)}toTop(){if(this._map)return this._map.imageryLayers.raiseToTop(this._imageryLayer)}toBottom(){const e={_0x16ad25:4052},t=_0x2397ca;if(this._map)return this._map.imageryLayers.lowerToBottom(this[t(e._0x16ad25)])}flyTo(e={}){const t={_0x173fe6:3044,_0x5cc820:2006,_0x22a5b6:639,_0x118cdf:1043},x=_0x2397ca;if(!this[x(558)]||!this._imageryLayer)return Promise[x(3863)](!1);if(this._map[x(3955)](),this[x(t._0x173fe6)][x(628)]&&(e={...this.options.flyToOptions,...e}),this.options[x(t._0x5cc820)])return this._map.setCameraView(this.options.center,e);if(this.options.extent)return this._map.flyToExtent(this.options.extent,e);{const i=this.rectangle;if(Cesium__namespace[x(t._0x22a5b6)](i)&&i[x(t._0x118cdf)]&&!i.equals(Cesium__namespace.Rectangle.MAX_VALUE)&&i.west>0&&i[x(2204)]>0&&i[x(2999)]>0&&i.north>0)return this._map.camera.flyTo({...e,destination:i})}return Promise.resolve(!1)}bindHighlight(e){const t=_0x2397ca;this.unbindHighlight(),this[t(895)]=e,this.on(EventType.click,this._highlight_mouseEventHandler,this)}unbindHighlight(){const e={_0x14835e:895,_0x2cfd0b:2852},t=_0x2397ca;this[t(e._0x14835e)]&&(this.off(EventType.click,this[t(e._0x2cfd0b)],this),this._map.closeHighlight(),this._highlightOptions=null)}[_0x2397ca(2852)](e){const t={_0x475d91:1399},x=_0x2397ca;this._map.closeHighlight();const i=e.graphics;i&&(this[x(t._0x475d91)]=i,this._map.openHighlight(this,this._highlightOptions,e))}_highlight_mouseOutHandler(e){this[_0x2397ca({_0x96c663:558}._0x96c663)].closeHighlight()}openHighlight(e,t=!0){const x={_0x34e708:895,_0x5e3cd3:3886,_0x51e2ec:3886,_0xe7704a:1036},i=_0x2397ca;t&&(this[i(558)].closeHighlight(),this._map.last_highlighGraphic=this);const s=e||this[i(x._0x34e708)];this[i(1399)]&&s&&(!this[i(3886)]&&(this[i(x._0x5e3cd3)]=new GraphicLayer({name:"高亮对象图层",private:!0}),this._map.addLayer(this[i(x._0x51e2ec)])),this._graphicLayer.addGraphic(this._last_graphicsOptions),this.fire(EventType[i(x._0xe7704a)],{},!0))}[_0x2397ca(1212)](){var e;!this._graphicLayer||((e=this._map)===null||e===void 0?void 0:e.last_highlighGraphic)!==this||(this._graphicLayer.clear(),this._map._clearLastHighlight(),this.fire(EventType.highlightClose,{},!0))}}class TerrainLayer extends BaseLayer{_showHook(e){const t={_0x34808c:2670},x=_0x2397ca;e?this[x(t._0x34808c)]():this[x(380)]()}_mountedHook(){this._terrainProviderPromise=createTerrainProvider(this._getTerrainOptions())}[_0x2397ca(1220)](){return{templateValues:this.options.templateValues,...this.options.terrain}}[_0x2397ca(2670)](){const e=_0x2397ca;this[e(3482)]&&this[e(2544)]()}[_0x2397ca(380)](){const e={_0xd4d75:3653},t=_0x2397ca;this._map[t(e._0xd4d75)]=getNoTerrainProvider()}_setOptionsHook(e,t){const x={_0x2b03fe:710,_0x5b28ab:1220},i=_0x2397ca;this[i(x._0x2b03fe)]=createTerrainProvider(this[i(x._0x5b28ab)]()),this._updateTerrainProvider()}_updateTerrainProvider(){const e={_0x11bc87:208,_0x2ea81d:558},t={_0x386ddd:2276},x=_0x2397ca,i=o=>{const r=_0x3361;this._map.off(EventType.terrainLoadSuccess,i),this._map.off(EventType[r(1309)],s),this[r(t._0x386ddd)].resolve(this),this.fire(EventType.load,{terrain:this._map.terrainProvider})},s=o=>{const r=_0x3361;var c;this._map.off(EventType[r(e._0x11bc87)],i),this[r(e._0x2ea81d)].off(EventType.terrainLoadError,s),(c=this._readyPromise)!==null&&c!==void 0&&c.reject&&this._readyPromise.reject(o)};this[x(558)][x(1898)](EventType.terrainLoadSuccess,i),this._map.once(EventType[x(1309)],s),this[x(710)].then(i),this._map.terrainProvider=this._terrainProviderPromise}}register$2("terrain",TerrainLayer);class ArcGisCacheLayer extends BaseTileLayer{async[_0x2397ca(573)](e){return await createImageryProvider$j(e)}}async function createImageryProvider$j(n){const e={_0x156ca2:1519,_0x519bb2:3155},t={_0x41c3be:321},x=_0x2397ca;n.url=n.url.replace(x(1938),x(e._0x156ca2)).replace("{y}","R{arc_y}").replace("{z}",x(1361));const i=n.upperCase;return n[x(e._0x519bb2)]=n.customTags||{},n[x(3155)].arc_x=function(s,o,r,c){const _=x;return i?padLeft0(o.toString(16),8)[_(t._0x41c3be)]():padLeft0(o[_(1104)](16),8)},n.customTags[x(2901)]=function(s,o,r,c){return i?padLeft0(r.toString(16),8).toUpperCase():padLeft0(r.toString(16),8)},n.customTags.arc_z=function(s,o,r,c){const _=x;return i?padLeft0(c[_(1104)](),2).toUpperCase():padLeft0(c[_(1104)](),2)},n.customTags.arc_z4490=function(s,o,r,c){const _=x;return i?padLeft0((c+1)[_(1104)](),2).toUpperCase():padLeft0((c+1).toString(),2)},n=converOptions(n),new XyzImageryProvider$1(n)}ArcGisCacheLayer.createImageryProvider=createImageryProvider$j;const layerType$j="arcgis_cache";register$2(layerType$j,ArcGisCacheLayer),registerImageryProvider(layerType$j,createImageryProvider$j);class ArcGisTileLayer extends BaseTileLayer{async[_0x2397ca(573)](e){return await createImageryProvider$i(e)}}async function createImageryProvider$i(n){const e={_0x223ad6:740},t=_0x2397ca;return n=converOptions(n),isString(n.url)?n.url=n.url+t(2582):n.url instanceof Cesium__namespace[t(e._0x223ad6)]&&(n[t(914)].url=n.url.url+"/tile/{z}/{y}/{x}"),new XyzImageryProvider$1(n)}ArcGisTileLayer[_0x2397ca(1855)]=createImageryProvider$i;const layerType$i="arcgis_tile";register$2(layerType$i,ArcGisTileLayer),registerImageryProvider(layerType$i,createImageryProvider$i);class ArcGisImageryProvider{constructor(e={}){const t={_0x536a3a:4016,_0x6bc1e1:3092,_0x257705:3664},x=_0x2397ca;this.options=e;const i=Cesium__namespace.Resource.createIfNeeded(e[x(914)]);i.appendForwardSlash(),Cesium__namespace.defined(e.token)&&i.setQueryParameters({token:e.token}),this._resource=i,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=e[x(t._0x536a3a)]??256,this._tileHeight=e[x(595)]??256,this._maximumLevel=e[x(t._0x6bc1e1)],this._maxTileLevel=e.maxTileLevel,this._crs=e.crs,this.enablePickFeatures=e.enablePickFeatures??!0,this._useTiles=e[x(t._0x257705)]??!0,this._initTilingSchemeByCrs(e.crs||CRS.EPSG4326),this._errorEvent=new Cesium__namespace.Event,this._ready=!1,this._readyPromise=Cesium__namespace.defer(),this._useTiles?this._requestMetadata():(this._ready=!0,this._readyPromise.resolve(!0))}get url(){return this._resource._url}get token(){const e={_0x4d80b3:696},t=_0x2397ca;return this[t(1313)][t(e._0x4d80b3)][t(3132)]}get proxy(){return this[_0x2397ca({_0x1e5b3b:1313}._0x1e5b3b)].proxy}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return 0}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get tileDiscardPolicy(){return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get[_0x2397ca(1208)](){return this._credit}get usingPrecachedTiles(){return this._useTiles}get[_0x2397ca(990)](){return!0}get layers(){return this.options.layers}get[_0x2397ca(1914)](){return this.options.layerDefs}_initTilingSchemeByCrs(e){const t={_0x5c4a5e:3044,_0x1a4a43:1782,_0x170468:1358},x=_0x2397ca;return e===CRS[x(2235)]?(this[x(347)]=this.options.tilingScheme||new Cesium__namespace.WebMercatorTilingScheme({ellipsoid:this[x(t._0x5c4a5e)][x(t._0x1a4a43)]}),this._rectangle=this.options.rectangle??this[x(347)].rectangle,!0):e===CRS.EPSG4326||e===CRS.EPSG4490?(this._tilingScheme=this.options.tilingScheme||new Cesium__namespace.GeographicTilingScheme({ellipsoid:this.options.ellipsoid}),this._rectangle=this.options[x(t._0x170468)]??this._tilingScheme.rectangle,!0):!1}_requestMetadata(){const e={_0x2d5288:2443},t=_0x2397ca;this._resource.getDerivedResource({queryParameters:{f:"json"}}).fetchJsonp().then(i=>{this._metadataSuccess(i)})[t(e._0x2d5288)](i=>{this._metadataFailure(i)})}[_0x2397ca(2401)](e){const t={_0x20ddf9:2329,_0x40dfc2:3195,_0x2990ab:3858,_0x342a13:3137,_0x442831:618,_0x6465cc:518,_0xbc808d:518,_0x1734fd:2623,_0x59c2e6:3976,_0x21185a:3541},x=_0x2397ca;if(this.capabilities=e,Cesium__namespace.defined(e.tileInfo)){this._useTiles=!0;const _=e.tileInfo;if(this[x(2972)]=_.rows,this[x(t._0x2990ab)]=_[x(2960)],!this._maximumLevel&&(this[x(602)]=_.lods.length-1),!this.options[x(t._0x342a13)]){var s;this._crs=getCRSByWkid((s=_.spatialReference)===null||s===void 0?void 0:s.wkid),this._useTiles=this._initTilingSchemeByCrs(this._crs)}this._useTiles&&!Cesium__namespace.defined(this._tileDiscardPolicy)&&(this._tileDiscardPolicy=new Cesium__namespace[x(t._0x442831)]({missingImageUrl:this._buildImageResource(0,0,this._maximumLevel).url,pixelsToCheck:[new Cesium__namespace[x(t._0x6465cc)](0,0),new Cesium__namespace.Cartesian2(200,20),new Cesium__namespace[x(t._0xbc808d)](20,200),new Cesium__namespace.Cartesian2(80,110),new Cesium__namespace.Cartesian2(160,130)],disableCheckIfAllPixelsAreTransparent:!0}))}else if(this[x(t._0x20ddf9)]=!1,!this.options.crs){var i;this._crs=getCRSByWkid((i=e.spatialReference)===null||i===void 0?void 0:i[x(t._0x40dfc2)]),this._initTilingSchemeByCrs(this._crs)}let o=e[x(2934)]||e.extent;if(!this.options.rectangle&&o){var r,c;let _=this._crs;if((r=o)!==null&&r!==void 0&&(c=r.spatialReference)!==null&&c!==void 0&&c.wkid&&(_=getCRSByWkid(o.spatialReference.wkid)),_){if(_!==CRS[x(t._0x1734fd)]&&_!==CRS.EPSG4490){const l=proj4Trans([o.xmin,o.ymin],_),h=proj4Trans([o.xmax,o[x(1606)]],_);o={xmin:l[0],ymin:l[1],xmax:h[0],ymax:h[1]}}this._extent=o,o.xmin>0&&o[x(t._0x59c2e6)]<179&&o.ymin>0&&o[x(1606)]<85&&(this._rectangle=Cesium__namespace[x(3520)].fromDegrees(o.xmin,o.ymin,o.xmax,o.ymax))}}this._ready=!0,this._readyPromise.resolve(!0),Cesium__namespace.TileProviderError.reportSuccess?Cesium__namespace.TileProviderError.reportSuccess(this[x(3541)]):Cesium__namespace.TileProviderError[x(3613)]&&Cesium__namespace.TileProviderError.handleSuccess(this[x(t._0x21185a)])}[_0x2397ca(2631)](e){const t={_0x28461f:914,_0xddee14:781,_0x302d6d:557,_0x23ee2f:2338,_0x47fbe2:2285,_0x37ef4c:3713},x=_0x2397ca;var i;const s="An error occurred while accessing "+this[x(1313)][x(t._0x28461f)]+".";Cesium__namespace.TileProviderError.reportError?this._metadataError=Cesium__namespace.TileProviderError[x(t._0xddee14)](this[x(3541)],this,this._errorEvent,s,void 0,void 0,void 0,this[x(t._0x302d6d)]):Cesium__namespace.TileProviderError[x(t._0x23ee2f)]&&(this._metadataError=Cesium__namespace[x(t._0x47fbe2)].handleError(this._metadataError,this,this._errorEvent,s,void 0,void 0,void 0,this[x(557)])),(i=this[x(2276)])!==null&&i!==void 0&&i[x(3427)]&&this._readyPromise.reject(new Cesium__namespace[x(t._0x37ef4c)](s))}getTileCredits(e,t,x){}requestImage(e,t,x,i){const s={_0x1dceef:1744},o=_0x2397ca;return Cesium__namespace.ImageryProvider.loadImage(this,this[o(s._0x1dceef)](e,t,x,i))}_buildImageResource(e,t,x,i){const s={_0xdea8f4:1344,_0x5df93b:2999,_0x243ba5:3032,_0x1ae71c:3306},o=_0x2397ca;let r=this._useTiles;if(r&&Cesium__namespace.defined(this._maxTileLevel)&&(r=x<this[o(1149)]),r)return this._crs===CRS.EPSG4490&&(x=x+1),this._resource.getDerivedResource({url:"tile/"+x+"/"+t+"/"+e,request:i});{const c=this[o(347)].tileXYToNativeRectangle(e,t,x),_=c[o(s._0xdea8f4)]+","+c.south+","+c[o(s._0x5df93b)]+","+c.north,l={bbox:_,size:this._tileWidth+","+this._tileHeight,format:"png32",transparent:!0,f:"image"};return this._tilingScheme.projection instanceof Cesium__namespace.GeographicProjection?(l.bboxSR=this._wkid||4326,l[o(2337)]=this._wkid||4326):(l[o(s._0x243ba5)]=this[o(s._0x1ae71c)]||3857,l.imageSR=this._wkid||3857),this.layers&&(l.layers="show:"+this.layers),this.layerDefs&&(l.layerDefs=this.layerDefs),this._resource.getDerivedResource({url:"export",request:i,queryParameters:l})}}[_0x2397ca(900)](e,t,x,i,s){const o={_0x134b36:347,_0x33f8aa:1391,_0x3585bd:3876,_0x390fbd:1391,_0x213435:590,_0x52e276:1319,_0x3d4f79:1914,_0x519d61:1313,_0x1053b4:1286},r={_0x47e1a1:2069,_0x3c7128:303},c=_0x2397ca;if(!this[c(619)])return;const _=this._tilingScheme.tileXYToNativeRectangle(e,t,x);let l,h,d;if(this[c(o._0x134b36)][c(o._0x33f8aa)]instanceof Cesium__namespace.GeographicProjection)l=Cesium__namespace[c(o._0x3585bd)].toDegrees(i),h=Cesium__namespace[c(3876)].toDegrees(s),d="4326";else{const g=this._tilingScheme[c(o._0x390fbd)][c(o._0x213435)](new Cesium__namespace[c(1899)](i,s,0));l=g.x,h=g.y,d=c(3227)}let u="visible";Cesium__namespace.defined(this.layers)&&(u+=":"+this.layers);const m={f:c(2199),tolerance:2,geometryType:c(o._0x52e276),geometry:l+","+h,mapExtent:_.west+","+_.south+","+_.east+","+_.north,imageDisplay:this._tileWidth+","+this._tileHeight+",96",sr:d,layers:u};return Cesium__namespace.defined(this[c(o._0x3d4f79)])&&(m.layerDefs=this.layerDefs),this[c(o._0x519d61)][c(2819)]({url:"identify",queryParameters:m}).fetchJson()[c(o._0x1053b4)](function(g){const b=c,y=[],C=g[b(2881)];if(!Cesium__namespace[b(639)](C))return y;const v="EPSG:"+d;for(let M=0;M<C.length;++M){const w=C[M],H=new Cesium__namespace[b(2892)];H[b(r._0x47e1a1)]=w,H.crs=v,H.name=w[b(r._0x3c7128)],H[b(263)]=w[b(2870)],H.configureDescriptionFromProperties(w.attributes),y[b(2434)](H)}return y})}}function getCRSByWkid(n){switch(n){case 4326:case 4283:return CRS.EPSG4326;case 4490:return CRS.EPSG4490;case 102100:case 900913:case 3857:return CRS.EPSG3857;default:return isNumber(n)?"EPSG:"+n:void 0}}class ArcGisLayer extends BaseTileLayer{get crs(){const e={_0x73cdf2:1926,_0x518bc0:3137,_0x5a9d46:2623},t=_0x2397ca;var x;return((x=this[t(2348)])===null||x===void 0?void 0:x[t(e._0x73cdf2)])||this.options[t(e._0x518bc0)]||CRS[t(e._0x5a9d46)]}get capabilities(){var e;return(e=this.imageryProvider)===null||e===void 0?void 0:e.capabilities}async[_0x2397ca(573)](e){return await createImageryProvider$h(e)}[_0x2397ca(2070)](){return!!this._popupConfig}[_0x2397ca(3135)](e,t){const x={_0x299f9c:2076},i=_0x2397ca;return this._popupConfig={content:e,options:t,layer:this},this[i(x._0x299f9c)](),this}unbindPopup(){return this.closePopup(),this._popupConfig=null,this}closePopup(){const e=_0x2397ca;return this._map&&this.hasPopup()&&this[e(558)].popup.close(null,this),this}}async function createImageryProvider$h(n){const e={_0x4394d9:2407},t=_0x2397ca;if(Cesium__namespace.defined(n.layer)&&!Cesium__namespace.defined(n.url))switch(n[t(e._0x4394d9)]){case"vec":n.url="https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer";break;case"img_d":n.url="https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer";break}return n=converOptions(n),n.czm?new Cesium__namespace.ArcGisMapServerImageryProvider(n):new ArcGisImageryProvider(n)}ArcGisLayer[_0x2397ca(1855)]=createImageryProvider$h;const layerType$h="arcgis";register$2(layerType$h,ArcGisLayer),registerImageryProvider(layerType$h,createImageryProvider$h);class BaiduLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$g(e)}}async function createImageryProvider$g(n){return n=converOptions(n),new BaiduImageryProvider(n)}BaiduLayer[_0x2397ca(1855)]=createImageryProvider$g;const layerType$g=_0x2397ca(3058);register$2(layerType$g,BaiduLayer),registerImageryProvider(layerType$g,createImageryProvider$g);class BingLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$f(e)}}async function createImageryProvider$f(n){const e={_0x31f64e:914,_0x2a96b1:2853,_0x4b3f9a:2407,_0x364585:2157},t=_0x2397ca;return n.url=n[t(e._0x31f64e)]??"https://dev.virtualearth.net",n.culture=n[t(e._0x2a96b1)]??"zh-Hans",n[t(3677)]=n.key??bing,n[t(e._0x4b3f9a)]=n.layer??Cesium__namespace.BingMapsStyle[t(e._0x364585)],n=converOptions(n),new Cesium__namespace.BingMapsImageryProvider({mapStyle:n.layer,...n})}BingLayer[_0x2397ca(1855)]=createImageryProvider$f;const layerType$f="bing";register$2(layerType$f,BingLayer),registerImageryProvider(layerType$f,createImageryProvider$f);class GaodeLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$e(e)}}async function createImageryProvider$e(n){const e={_0x13e6c8:2394},t=_0x2397ca;return n[t(e._0x13e6c8)]=n.chinaCRS||ChinaCRS.GCJ02,n=converOptions(n),new GaodeImageryProvider(n)}GaodeLayer.createImageryProvider=createImageryProvider$e;const layerType$e=_0x2397ca(1928);register$2(layerType$e,GaodeLayer),registerImageryProvider(layerType$e,createImageryProvider$e);class GeeLayer extends BaseTileLayer{async[_0x2397ca(573)](e){return await createImageryProvider$d(e)}}async function createImageryProvider$d(n){return n=converOptions(n),new Cesium__namespace.GoogleEarthEnterpriseImageryProvider({...n,metadata:new Cesium__namespace.GoogleEarthEnterpriseMetadata(n.url)})}GeeLayer[_0x2397ca(1855)]=createImageryProvider$d;const layerType$d=_0x2397ca(3034);register$2(layerType$d,GeeLayer),registerImageryProvider(layerType$d,createImageryProvider$d);class GoogleLayer extends BaseTileLayer{async[_0x2397ca(573)](e){return await createImageryProvider$c(e)}}async function createImageryProvider$c(n){return n.chinaCRS=n.chinaCRS||ChinaCRS.GCJ02,n=converOptions(n),new GoogleImageryProvider(n)}GoogleLayer.createImageryProvider=createImageryProvider$c;const layerType$c=_0x2397ca(2813);register$2(layerType$c,GoogleLayer),registerImageryProvider(layerType$c,createImageryProvider$c);class ImageLayer extends BaseTileLayer{get url(){return this.options.url}set url(e){this.options.url=e,this.reload()}async _createImageryProvider(e){return await createImageryProvider$b(e)}}async function createImageryProvider$b(n){const e=_0x2397ca;if(!n.url)return null;n=converOptions(n);const t=new Cesium__namespace.SingleTileImageryProvider(n);if(n[e(3137)]===CRS.EPSG3857){let x,i;if(n.rectangle){const s=LngLatPoint[e(3384)](new Cesium__namespace.Cartographic(n[e(1358)].west,n.rectangle.south)).toMercator(),o=LngLatPoint.fromCartographic(new Cesium__namespace[e(1899)](n.rectangle[e(2999)],n.rectangle.north))[e(3272)]();x=new Cesium__namespace.Cartesian2(s[0],s[1]),i=new Cesium__namespace.Cartesian2(o[0],o[1])}t._tilingScheme=new Cesium__namespace[e(2058)]({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1,rectangleSouthwestInMeters:x,rectangleNortheastInMeters:i})}return t}ImageLayer.createImageryProvider=createImageryProvider$b;const layerType$b=_0x2397ca(1437);register$2(layerType$b,ImageLayer),registerImageryProvider(layerType$b,createImageryProvider$b);class IonLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$a(e)}}async function createImageryProvider$a(n){const e={_0xd63f3a:1500},t=_0x2397ca;return n[t(e._0xd63f3a)]=n[t(e._0xd63f3a)]??ion,n=converOptions(n),new Cesium__namespace.IonImageryProvider(n)}IonLayer[_0x2397ca(1855)]=createImageryProvider$a;const layerType$a="ion";register$2(layerType$a,IonLayer),registerImageryProvider(layerType$a,createImageryProvider$a);class MapboxLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$9(e)}}async function createImageryProvider$9(n){const e={_0x464cdf:2844,_0xf4a05c:3863,_0x4d52d2:1286},t={_0x4f51c8:3309},x=_0x2397ca;n.url=n.url??"https://api.mapbox.com/styles/v1",n.username=n.username??x(984),n.accessToken=n.token??n[x(1500)]??mapbox,n.scaleFactor=n[x(e._0x464cdf)]??!0,n=converOptions(n);const i=new Cesium__namespace.MapboxStyleImageryProvider(n);return Promise[x(e._0xf4a05c)](n)[x(e._0x4d52d2)](function(s){const o=x;n[o(3681)]&&(i[o(t._0x4f51c8)]._tilingScheme=n.tilingScheme)}),i}MapboxLayer.createImageryProvider=createImageryProvider$9;const layerType$9=_0x2397ca(2822);register$2(layerType$9,MapboxLayer),registerImageryProvider(layerType$9,createImageryProvider$9);class OsmLayer extends BaseTileLayer{async[_0x2397ca(573)](e){return await createImageryProvider$8(e)}}async function createImageryProvider$8(n){return n=converOptions(n),new OsmImageryProvider(n)}OsmLayer.createImageryProvider=createImageryProvider$8;const layerType$8="osm";register$2(layerType$8,OsmLayer),registerImageryProvider(layerType$8,createImageryProvider$8);class XyzImageryProvider extends Cesium__namespace.UrlTemplateImageryProvider{constructor(e={}){const t={_0x184e01:3077},x={_0xe98912:3077},i=_0x2397ca;e.customTags=e[i(3155)]||{},e.customTags[i(361)]=function(s,o,r,c){return location.host},e[i(3155)][i(t._0x184e01)]=function(s,o,r,c){return location[i(x._0xe98912)]},e.customTags.z4490=function(s,o,r,c){return c+1},super(e),this.options=e}}class TdtLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$7(e)}}async function createImageryProvider$7(n){const e={_0x40230b:3677},t=_0x2397ca;return n=converOptions(n),n.url?(n.subdomains=n.subdomains||t(2485),n[t(914)]+="&tk="+(n[t(e._0x40230b)]||tianditu),new XyzImageryProvider(n)):new TdtImageryProvider(n)}TdtLayer[_0x2397ca(1855)]=createImageryProvider$7;const layerType$7="tdt";function _0x3c2a(){const n=["_polygonTexture","VRButton","UNIT_Y","对象不支持标绘","_depth","_drawEndEventType","parameters","extendedData","czmObject","lat","單擊完成繪制","timeTik","_graphic_dragger_ing","getDraggerContextMenu","lowerLongitude","plane_normal","Token","_debug","_addAreaHook","hue","ows:Identifier","scaleX","FrustumOutlineGeometry","debugAxisPrimitive",`
uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform vec4 u_color;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);

  material.diffuse = u_color.rgb;
  material.alpha = u_color.a;
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.0001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.0001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);

  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }
  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`,"Mercator","updateSectionForTerrain","contextmenuOptions","ZERO_TOLERANCE","RIGHT_DOWN","terrainChange","createDrawCommand","_drawRemovePointHandler","pure","查看當前視角","_gltfUpAxis","shiftKey","startTime","sphere","renderPass_","depthTexture","isFormat","updateDistanceDisplayCondition","_onDbClickHandler","followedZ","toPoints","useROI","_cylinderPosition","minimumCone","useLogDepth","property","_onPreRenderHandler","planes","_sampler","semiMajorAxis","_关闭三角网","_initialized","cameraChanged","stepSize","GREEN","createImageryProvider：存在未识别的图层","pid","fa fa-moon-o","_allCount","extrudedHeight","domeSurfaceMaterial","_renderRequested","formatNum","getQBSplinePoints","change","_getCustomQuaternion","createPropertyDescriptor","depthFail","units","3785","radius_p","_heading_reality","reload","DOUBLE","BoxGeometry","gravity","Hotine_Oblique_Mercator","updateVisibleDistance","cbg","filename","KmlDataSource","CzmlLayer：请必须传入 url 或 data 参数","EPSG:4553","Ellipsoid","material","mixt","_postRenderHandler","undefined","editStyle","drawMouseMove","单击后激活编辑","wireframe","generateMipmap","zoneLetter","_id","Fischer 1960","v_pole_s","requestRender","screenSpaceCameraController","_layer","getControl","farValue","fa fa-remove","TdtPOI 请求出错","getTime","rayPlane","geometryName","_tileset","_pitch","clearRect","getMaxHeight","_updateView","altColumn","{s}","tilesLoaded","1720233oCrYTq","popup","showDomeSurfaces","_graphicList","_getEventTarget","rightClick","blendColor","_poinst","validDrawPosition","getTempPoint4","dimensions_y","_tileHeight","ire65","followedX","maximumSize","ShaderProgram","resolve","invertColor","FlodByMaterial","_clampToTilesetFrame","PostProcessStageLibrary","getOutlineColorByStyle","pointerEvents","fromElements","RIGHT_ROTATE","height","_createPostProcessStage","maximumCone","openPopup","Math","version","axis","img_d","yyyy-MM-dd HH:mm:ss","secondsDifference","numberOfLevelZeroTilesY","_onBeforeCreate","ExtrapolationType",'<div class="mars3d-template-titile">',"_graphicLayer","target","_matrixRotate","focalDistance","UNIT_X","ClippingPlane","minHeight","Terrain","translation","<br/>","init","hasTerrain","getPopup","Stop editing","ColorMaterialProperty","defineProperties","createVertexBuffer","qs0","innerRadii_x","BLUE","131555TikPVw","_indice","MGRSPoint given invalid Northing ","getTileCredits","geometry","Clarke 1858","rectified_grid_angle","getPixelSize","_getPositions","WMS","rgba(255,0,0,1)","createPrimitive","Albers","isPrototypeOf","planeStyleConver","etmerc","_currentFrustum","enabledEvent","Close rain","new_intl","ZHHK","floor","maxCacheCount","_target","outlineStyle","expImage","evrstSS","clampTo3DTileset","10px","#ffffff","_setRectangleByOptions","EPSG:","Polygon","_getDrawEntityStyle","_rate_total","color() *vec4(1,1,1,","toISOString","hasLayer","download","_last_picked","_extrudedHeight","DIRECTION_BACKWARD","_axisRotation","_pitch_reality","particleSize","latitude_of_center","onDragStart","GeometryInstance","_rate_positions","cancelFlyTo","slider-splitter","shouldAnimate","wall","StripeType","mouseout","toJSON：未识别的材质类型","_jzmHeight","LOCAL_CS","_rotateHpr","lineCount","tan","_view","createPickFragmentShaderSource","pageIndex","WHITE","srsCode","C_y","1.3.0","#D33B7D","Axis","xmax","polygon","pop","1.0.0","skyAtmosphere","delta","shadows","FeatureTypeList","_graphic_updatePosition","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","walbeck","getEffect","moveStart","_currentExtent","Fischer 1968","updateControl","city_limit","_event","string","clickTileGraphic","fe80f2290b380cfed86c62e3edec169e","getFloat64","entities","horizontalOrigin","pickPosition","TimeIntervalCollection","positionWC","pixelOffsetX","updateVolume","dimensions_x","color_bak","fps","radius_g_1","updateDraggers","opacity","ImageType","ConstantPositionProperty","outlineEffect","map","_updatePointerEvents","tileWidth","algorithmUtil","_bindUpdateCallback","defaultLayer","_onMouseMoveDraggerHandler","ImageryLayer",";y=","origin","removeEffect","visible","excludedKeys","BaseThing","fromColor","classification","onChange","frustumCommandsList","event","_skyboxMatrix3","_frameState","_cameraHandler","_getGeoJsonGeometry","_timeTik","_backgroundColor_alpha_bak","begin","bloomEffect","","_maskTexture","Longitude of false origin","NWL9D","getProperty","_flyok_index","lim","關閉鍵盤漫遊","关闭雾天气","endPosition","_popupConfig","_imageryLayer","defaultTexture","PerformanceDisplay","flipx","isArray","Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored","numberOfDerivatives","_last_material","bottomHeight","_onAdd","SlopeColorContour","_地形服务","_removeChildGraphic","_toOneCesiumVal","_boundingSphereWC","_clusterData","_updateImage_delay","substr","_formatRouteData","lastQueryOpts","sin_p14","_mouseClickHandler","_start","unbindHighlight","pixelOffsetY","colorScheme","updateAndExecuteCommands","outlineOpacity","distanceDisplayCondition","nad27","contextMenuClick","lngLatToPoint","maximumClockDegree","Cesium","minPitch","_cylinderLength","alfa","rgba(149,0,235,0.99)","sigma","_decToSex","evenColor","createShader","vertex_H","_editPointHandler","PolygonGeometry","增加點","noiseScale","imageryLayers","rgba(255, 255, 255, 1.0)","YZ_TRANSLATION","getBinomialFactor","low","50%","pointCollection","selectedTerrainProviderViewModel","@null","features","_style2Json","绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map","_formatPOIData","edgeColor",`uniform float globalAlpha;

float plot(float st, float pct) {
  return smoothstep(pct, pct, st) - smoothstep(pct, pct + 0.5, st);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time2 = czm_frameNumber / speed;
  vec4 colorImage = texture(image, vec2(fract(st.s), fract(float(st.t * segment) - time2)));
  float percent = distance(st.y, .5) / 0.9;
  float distance = length(vec2(st.x, st.y));
  float pf = plot(distance, fract(czm_frameNumber / 200.0) * 10.);
  vec4 gradient = mix(vec4(1.0, 1.0, 1.0, 1.0), vec4(pf, pf, pf, 1.0), 0.8);
  float alpha = (colorImage.a * (1.0 - percent));
  vec3 diffuse = max(color.rgb * alpha * glow, color.rgb);

  if(flowGlow == 1.0) {
    vec4 rgba = mix(vec4(diffuse, alpha), gradient, pf);
    material.diffuse = rgba.rgb;
    material.alpha = rgba.a * globalAlpha;
  } else {
    material.diffuse = diffuse;
    material.alpha = alpha * globalAlpha;
  }
  return material;
}
`,"_initByMetaData","distanceSurface","_关闭夜视","WGS60","targetPoint","terrainLoadSuccess","outlineColor","rayEllipsoid","false_northing","/query",`
         `,"lineOpacity","div","planeAngle","lat0","_domeLineCommand","_toOneCesiumVal_Point","_hasChangeDepthTestAgainstTerrain","_scanePlaneYHalfAngle","updatePosition","angleStr","TilesetWireframeNo","zeroToTwoPi","REPEAT","pitch","fromRotationX","_hasEditScale","distance","_initCollectionBy3D","_forPositionProperty","uniformMap","updateAttr","DefaultProxy","POI 请求失败(","9bvqtmE","fromRadians","bindDraggers","_smallTooltip","fill","ymin","_arrThing","Latitude of 1st standard parallel","point3","https://t{s}.tianditu.gov.cn/","_wallHeights","stRotationDegree","New International 1967","AspectRamp","createIndexBuffer","INITIALIZED","_measured","FLOAT","loadConfig","stack","mandatory","views","_rotateAutoStopAngle","ClearCommand","_updateControlHandler","_lightDirectionEC","properties","_cubeMap2","rotation_z","rainEffect","_positions_line_y","_释放后完成修改","ellipsoidC",`
bool czm_selected(){
    return czm_selected(`,"aspect","_stateAll","windowPosition","UniformState","_orbitFrame","editMouseDown","标记圆","ContextLimits","_scene","Everest 1956","默认数据图层","_level","postUpdate","getElementsByClassName","EPSG:4524","querySelectorAll","effects","shadingAlpha","bogota","domtoimage","frameNumber",'<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml"><And>',"clearPosition","_containerBtnStart","Cartesian3","VERSION","_onClickHandler_point","fschr60","multiple","max(contourMaterial.alpha, aspectRampMaterial.alpha)","scaleY","utg","value","Cesium3DTilePassState","_scanePlaneSP","_getEventByType","初始视图","sources2","_computedNewPos","_cartographic","createVertexArray","102113","isTile","offset","addTileSuccess","_defaultTerrainProvider","sceneFramebuffer","morphStart","_标记矩形","{reverseY}","toUpperCase","SnowEffectYes","numberOfLevelZeroTilesX","distanceLastFdStr","_updatePositionsHook","LangType","_bottomPrimitive","numberOfListeners","activateMouseOver","HOLD","bjColor","Oblique_Mercator","_primitive_boxs","duration3",`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  out_FragColor = xh_getMaterial(v_st);
}
`,"getOwnPropertyDescriptor","geoJsonLayer_onLoadHandler","OutlineEffectYes","LineFlow","addGraphic","_showLateralSurfaces","replaceCache","_createEntity","70,18,134,51","Opera","floodAll","_tilingScheme","_onClockTickHandler","ClipType","_maximumDistance","RectangleOutlineGeometry","vec4(","_updateStyleHook","blurSamples","limit","_角度","style","mapProjection","activateMouseOut","PolylineMaterialAppearance","host","effect","_mergePostion","fromVertices","cartesianToCartographic","_stopTime","_positions_show","positionCartographic",'" >',"_contextmenuConfig_bak","_enabledEdit","editAddPoint","https://restapi.amap.com/v3/assistant/inputtips","divLightPoint","baseLayerPicker打开时，由baseLayerPicker机制决定，无法获取底图图层。","类型已存在","look","widthRatio","hideArea","_removedHook","getShapeForPipeline","varying","setItem","bindContextMenu","pixelOffset_original","loadBefore","near","EPSG:4503","wallStyleConver","keys","#FFFFFF","polyline","startAngle","entity","_contourSpacing","withAlpha","flags","_form","ComponentDatatype","ArcType","latColumn","fromDegrees","positions_original","_objectsToExclude","ms2","defaultTimeFormatter","enabled","hidden","lambda0","getGridPositions","_showData","evrst69","frameRateHeight","removeThing","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_drawGrid","maximumSizeZ","unproject","_values","_setCameraViewListArr","_onLeftUpHandler","hasToGraphic","valueFD","mouseDownView","_unionRectangle","OBLIQ","yHalfAngle","CallbackProperty","fa fa-camera-retro","_colorFramebuffer","toValue","_fireAddPoint","GLOBE","metaKey","Delete","customShader","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","mouse","VanDerGrinten","setHeight","Krovak","_graphic_move_x","addCircle","red","_queryPageByIds","_showHook","/img/textures/waterNormals.jpg","beginFrame","_isCallbackPositions","distanceDisplayBillboard","getMilliseconds","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","getMinutes","eachLayer","_hasFX","_lightCamera","orginMatrix","_bindDocumentEvent","COLUMN2ROW0","hbgd","bindEntities","EPSG:4515","Click to finish drawing","openHighlight","stage","angleBetween","_showPolyline","setCzmlTime","_readChildNodeVal","_direction","xmf","_containerCon","polygonHierarchy","http://api.tianditu.gov.cn/v2/search","utmSouth","_minHeight","CesiumTerrainProvider","EPSG:4508","featureIndex","highlight","unbindTooltip","_pickOffscreenView","_definitionChanged","text","_frustumFar","PrimitiveType","ClockRange","noWhite","latitude","Measure","#txt-clockAnimate-time","move","LightingModel","pointDM","EPSILON6","Comm. des Poids et Mesures 1799","asphaltColor","geocentric","resetUpliftValue","_tileLayer_addTileHandler","cesium-navigation-button-left","stopMoveMatrix","perPositionHeight","_matrix","_clearDrawCommand",`uniform sampler2D colorTexture;
in vec2 v_textureCoordinates;
const int KERNEL_WIDTH = 16;
void main(void) {
  vec2 step = 1.0 / czm_viewport.zw;
  vec2 integralPos = v_textureCoordinates - mod(v_textureCoordinates, 8.0 * step);
  vec3 averageValue = vec3(0.0);
  for(int i = 0; i < KERNEL_WIDTH; i++) {
    for(int j = 0; j < KERNEL_WIDTH; j++) {
      averageValue += texture(colorTexture, integralPos + step * vec2(i, j)).rgb;
    }
  }
  averageValue /= float(KERNEL_WIDTH * KERNEL_WIDTH);
  out_FragColor = vec4(averageValue, 1.0);
}
`,"highlightClose","Plane","closure","magnificationFilter","Cannot delete, the number of dots cannot be less than","preUpdate","_isLeftDown","_pointerEvents","fa fa-sort-amount-asc","block","Modify the height","Cartesian2","_updateDraw","geoidTiledTerrainProvider","headHeightFactor","flyHome","parentContainer","_readNode","radii_z","WGS 84","_videoContainer","特效,请直接使用 map.effects.","_scaleBarEl","distanceMeasure","_goHistoryView","czech","hasDrawDelPoint","isPoint","https://restapi.amap.com/v3/place/polygon","_oldPickedId","merc","_修改位置","WallScroll","_fireBindDataEx","queryPolygon","distanceHor","childNodes","fog","central_meridian","start","updateBox","Clear","_billboardCollection","未查询到相关结果！","middleClick","viewBox","preventDefault","_getDefaultTemplate","_oneOverLog2FarDepthFromNearPlusOne","_controlList","_requestMetadata","_map","greaterThanOrEquals","cosphi","ellps","arrayRemoveDuplicates","B_re","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","add","TextureMinificationFilter","pointStyleConver","_pointEditElementIDs","HALF_FLOAT","flip_axis","container","dashPattern","_createImageryProvider","_pitch_min","toWebGLConstant","_updateStyleByEdit","hiddenAreaColor","_position_draw","_projection",` = function (item) {
      item = item || `,"_selectedLayer","Property","upHeight","exact","isLoading","drawShow","longc","popupClose","toCssColorString","project","@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat","gradientCircleCanvas","scanPlane","setLayerSplitDirection","tileHeight","_createI3SDataProvider","max-height: ","entityAngle","toPoint","DrawCommand","cosph0","_maximumLevel","positiveX","noHeight","LINEAR_NONE","wfs请求出错","getPoint",'<li class="line"></li>',"+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","trackedEntity","getArcPoints","PolylineVolumeOutlineGeometry","labelCollection","distortion","_last_pickedObject","mars3d-slider","<div><label>","DiscardMissingTileImagePolicy","enablePickFeatures"," not handled: ","getOrientation","execute","RectangularSensorStyleConver","76NteupV","getByAttr","moveDuration","FILL_AND_OUTLINE","flyToOptions","dblClick","chordLength","mouseDown","_initChildGraphic","_time","TEXTURE_3D","POI 请求失败","baseOptsConver","startEditingGrid","no_off","defined","commands","cartesian","MAX_VALUE","keywords","groundPosition","fromTranslation","inverMatrix","getContextMenu","getCircleCenterOfThreePoints","outlinePositions","lineOffset","視角切換","_sampledPositionProperty","HorizontalOrigin","hpr","_auto_orientation","_tooltipMgr","setStyle","depthFailColor","bottom","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","hide","Cartesian4","ScreenSpaceEventType","dot","_container_outer","translucent","interpolateOrderZero","_entity_label","_msFrameCount","_绕此处环绕飞行","PolylineGeometry","cursor","toolButton","render","downGraphic","fromGeometry","dynamicView","pixelFormat","globe","_initModel","open","fogByDistance_near","Feature","sun","_rotate","CGCS2000_GK_Zone_6","digVolumeName","_distance","zone","_hasMoveEdit","href","body","WGS66","onmouseover","divGraphicStyleConver","queryParameters","highDynamicRange","longitude_of_center","toDataURL","isConstant","fromQuaternion","loadGeoJSON","positionShow","cylinder","multiplyByPointAsVector","brightnessEffect","_headingWhenLeftClicked","toastr","_css_transform_origin","_terrainProviderPromise","_mars3d_config","地形服务","has3dtiles","place","Topology","fogByDistance","DIRECTION_NONE","First view is here","https://api.map.baidu.com/place/v2/search","674.374,15.056,405.346","afterquote","s90","International 1909 (Hayford)","fa fa-keyboard-o","finish","onDrag","_city","updateText","legend-scale-bar",'" style="width:',"fromDimensions","rain","_修改半径","rotation_x","_hasLoad","hiddenColor","ZERO","sin_p12","strokeStyle","Resource","contains","totalArea","label","tileVisible","_navigationHelpButton","getCoordinate","polygonWall","defineProperty","arrow","_pickId","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","[object Object]","borderColor","inverseTransformation","_onMap_wheel",'<div class="mars3d-animation-point-lbl" style="color:',"webgl","_bindEditEvent","load","position","xyz","silhouette","FeatureCollection","_times","onclick","RGBA","_show","tilt","https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0","scene is required.","addDynamicPosition","StripeOrientation","_entity","_sceneModePicker","_layerIdx","Mid","call","toDegrees","3dtiles","_backwardExtrapolationDuration","reportError","_measureExLine","TextureMagnificationFilter","outlineCoordinates","_container"," 对象 ","_contourShow",`
      transform : rotate(-`,"_updateDomInnerHtml","trs","_pitch_max","command","Universal Transverse Mercator System","GEODETICCRS","allTilesLoaded","getInt32","_isCircle","towgs84","toCartesian","_scopeIds_last","_visibleColor","boolean","paths","openTooltip","toolbar","后退播放","all","computePosition","dataSource","close","mouseOver","mars3d-compass-outer"," tried: '","getPointDistance","UrlTemplateImageryProvider","placeholder","_primitive1","xHalfAngle","clientY","”相关数据！","ReflectionWater","wms extent:","_terrainHeight","billboard","getElementsByTagName","MERIT 1983","60.00","s45","MaterialType","shadowMap","stopFlicker","unbindContextMenu","_minimumLevel","navigation","_lastDynamicPosition","開啓霧天氣","mars3d-container  mars3d-mapCompare","lineWidth","headers","_createGraphics","Hotine_Oblique_Mercator_Azimuth_Center","PointCloud","_getCustomShader","_wallEntity","HeadingPitchRoll","_rebindCzmContainer",`
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

void main() {
  out_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}
`,"imageBasedLighting","整體平移","_polylines","fromRotationTranslation","customShaders","zox","areaSurfaceMeasure","log","_addLabel","showGroundAtmosphere","Framebuffer","showDomeLines","lines","Close snow","leftPoints","datum_type","editHeight","BrightnessEffectNo","mars3d-mousedownview-img","hasMeasure","BYTES_PER_ELEMENT","oddColor","经纬度：","eastNorthUpToFixedFrame","enableTilt","corridor","editStart","_globalAlpha","_getConfig","debugWireframe","debugAxis","formatPosition","resolutions","light","Unlocked","openFlyAnimationEndFun","indexOf","_orientation","Icon","tailorRect","_pointCollection","abs","WebMapTileServiceImageryProvider","cva","_updateTile","_graphic_rotate_y","_setCameraViewListOptions","_highlightOptions","queryGridData","noTitle","禁止編輯","bloomTarget","pickFeatures","drawingBufferHeight","_getVector","rightUp","closeContextMenu","fa fa-reorder","_纬度","_editing_entity","glowStrength","pauseTime","graphicOptions","merge","_起点","drawCreated","url","easting","_minPointNum","_unbindEditEvent","helmert","路径规划 请求失败(","test","circleStyleConver","開啓下雨","_graphicLayer_leftUp","_orginCenterPosition","530px","LINEAR","_propertyNames","brightness","amplitude","PolylineGlowMaterialProperty","constructor","_开启下雨","{crsx}","repeat_x","平方公里","淹没分析","_lateralSurfaceTranslucent","data.mars3d.cn","middleUp","_primitive_outline","100FnXlBj","inline-block","停止按轴旋转","_autoStopAngle","appearance","route","_currentHeight","phi","BlackAndWhiteEffectYes","resolutionScale","_inverseMatrix","zIndex","content","eventType","_getKeywords","goNow","primitive","keyboardRoam","_pickIds","normalize","_normal","removeChild","endAngle","BoundingRectangle","kml","_labelEl","_createLabel","type","onlyPickTerrainPosition","CRS","_tilesetFlood",`</Literal>
            </PropertyIsEqualTo> `,"ShaderSource","_oldPickPrimitive","bigfont","drawRemovePoint","updateCallback",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));

  material.alpha = colorImage.a * color.a * globalAlpha;
  if(pure) {
    material.diffuse = diffusePower * color.rgb;
  } else {
    material.diffuse = colorImage.rgb;
  }
  return material;
}
`,"未处理的属性","_removeAreaHook","_getLablePosition","positionsShow","_mars3d_graphicId","marsgis","texParameteri","PointUtil","qs2","setUpHeight",`px;
  --clip-width-2: `,"hasAlphaChannel","zoomEventTypes","查看此處坐標","u_0","randomColor","_万立方米","_opacity","asin",'"  style="width:',"fileType","hasEdit","_tooltipConfig","isDestroy","ColorType","padding","size","measured","ADD","pick","lower","floatToByte","_orientation_show","hasImage2","Fullscreen","flood","long2","lngColumn","getTooltip","_toJSON_Ex","_hierarchy","_map_mouseUpHandler","_debugAxis","_onMiddleUpHandler","_位置信息","TerrainNo","px;height:","function","_depthFailColor","onSetOpacity","DefaultImageId","editColor",`</a>
                    `,"vscale","getIntersectPoint","clampToGround","_hasUpdate","highlightOpen","_initCollectionBy2D","1356ZAAzij","Latitude of false origin","ClippingPlaneCollection","shaderProgram","Camera","equals","GraphicUtil","content-length","Matrix4","_positions_draw","_propagateEvent","_isFlyAnimation","boxStyleConver","latitudeInterval","_useSingleColor","fromCssColorString","cylinderC","_pageSize","lateralSurfaceMaterial","fa fa-unlock-alt","14NVfYcX","cesium-button cesium-toolbar-button","_vertexFormat","_extent","camera_changedHandler","getThing","ceil","nadgrid","_positions_circle_z","removeEventListener","isr93","GeometryAttribute","_drawCommand","_createGeometryInstanceItem","EPSG:4554","defaultAccessToken","positionsNew","clampToTerrain","maximumSizeY","_handleMouseDown","moll","PolylineCollection","fa fa-connectdevelop","_sexagesimal","_layerList","_globe","_clearDraw","_stopDrawHook","_targetPoint","fromRandom","neutral","color","controls","positions","esri","querySelector","Cassini","_updateVirtualCamera","PostProcessStageComposite","granularity","X_UP_TO_Y_UP","_originalreflectorWorldPosition","cesium-viewer-fullscreenContainer","marsOcclusion","fillColor","_state","toString","getHeight","请求出错","_computedModelMatrix","combine","http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&time=","Ray","_containerUl","scanPlaneMode","_setPositions","_clearLastHighlight","silhouetteColor","hasZ","resolveFramebuffers","gaze","gapColor","_getDrawEntityClass","getLayersByAttr","EffectUtil","accuracy","_rightLayer","Point","fromProviderAsync","textures","negativeX","luminanceAtZenith","addEventListener","xHalfAngleDegree",`uniform vec4 color;
uniform float diffusePower;
uniform float alphaPower;
uniform float globalAlpha;
uniform vec2 center;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float alpha = distance(st, center);
  material.alpha = color.a * alpha * alphaPower * globalAlpha;
  material.diffuse = color.rgb * diffusePower;
  return material;
}
`,"_center","android","scanPlaneColor","bbox","setColumn","mars3d-compass-inner","coordinate","Enable sky atmosphere","error","topRadius","updateAllDistance","SCENE3D","colorOptsConver","max","roiUV","pointer","_maxTileLevel","EPSG:4509","_getPopupPosition","preMultiplyAlpha","preRender","draggers","alt","stopRotateMatrix","rotateMatrix","Enable snow","單擊後 激活編輯","setView","showBox","labelHeightStyle","_contourWidth","addEffect","_initMeasureLable","moveTimer","bgColor","_positions_line_z","toCartesians","touches","readyPromise","getBisectorNormals","_position","_onMouseMoveHandler","EditAttr","cos_p14","dataTypes","_last_startTime","_updateDistanceDisplayConditionByEdit","toJSON","cartographicArrayToCartesianArray","_cancelPositionsCallback","duration","longitude","_planeOptions","clickGraphic","primitives","font_family","sinrot","RHUMB","isAllOutRange","_map_preUpdateHandler","thickness",`;"></div>
    <div style="border-radius: 50%;
        width: `,"con","cosX0","#ffff00",'px;overflow:hidden;margin:0;" scrolling="no" frameborder="0" ></iframe>',"_scanUniforms","thicknes","where","loop","lat1","cells","_startTime","clip","isFlyAnimation","credit","frustum","TOP","stopEditingGrid","closeHighlight","turf.","control","开启下雪","MGRSPoint bad conversion from: ","getColorByStyle","getThirdPoint","EPSG:4533","_getTerrainOptions","eva","_model","#ffffff00","totalAreaStr","REMOVED","请确认点是Cartesian3类型！","_reflectorWorldPosition","getPickTarget","datum_params","_onClickHandler","_formatForMask","_texture","TileMapServiceImageryProvider","fontColor","loadFields","radius_g","fogByDistance_farValue","_closeAllControl","_modelMatrix","clockRange","removeSamples","CoplanarPolygonGeometry","model","ctx","coordinates","radii","BufferUsage","templateValues","_defaultView","debugShowFramesPerSecond","Equidistant Cylindrical (Plate Carre)","_graticuleProvider","标记矩形","showStop","forEach","_drawCreatedHandler","instances","getCameraView","_promise","XYZ","_color_alpha","cos_po","_outlineColor_alpha_bak","bindVisibleDistance","mile","_primitiveBias","_hasRemoveElement","_islosdImg","innerRadii","_radius","_context","convertPackedArrayForInterpolation","ADDED","pow","AREA_0","https://restapi.amap.com/v3/geocode/regeo","_mouseDown","onerror","sk.eyJ1IjoibWFyc2dpcyIsImEiOiJjbDFhYXQ3a2EwaHF6M2NvdnhmdjR6ajZ2In0.-sahm9R0QuPP3pAihJHC4A","match","cosgam","_fixedLight","_onMap_mouseMove","getRayEarthPositions","tileset","then","_tilesetMatrix","_processForRemoveLayer","_graphicLayer_click","distanceDisplayCondition_near","开启日照阴影","UNSIGNED_INT_24_8","ColorGeometryInstanceAttribute","backwardExtrapolationType","maxHeight","Close bloom","icon","RenderState","mouseUp","DEFAULT_VIEW_RECTANGLE",`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float noise1 = (czm_snoise(st * frequency * 1.0)) * 1.0;
  float noise2 = (czm_snoise(st * frequency * 2.0)) * 0.5;
  float noise3 = (czm_snoise(st * frequency * 4.0)) * 0.25;
  float noise = sin(noise1 + noise2 + noise3) * 0.1;

  vec4 color = mix(evenColor, oddColor, noise);

  //Make thatch patterns
  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;
  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;
  float stripeNoise = min(verticalNoise, horizontalNoise);

  color.rgb += stripeNoise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,"halfAngle must be greater than or equal to zero.","minHeight 请传入有效数值！","enableCollisionDetection","localToWorld","upGraphic","_removeLabel",`
        <div class="mars3d-popup-content-wrapper mars3d-popup-background">
          <div id="popup-`,"terrainLoadError","ion","_cutColor","activateEdit","_resource","cos","disableDepthTestDistance","_toOneJson","minimumCollisionTerrainHeight","polygonMaxHeight","esriGeometryPoint","pick3DTileset","selectedLayer","_enabled","PassState","ElevationColorContour","_fxOnePoint","allCount","_rectangularSensorMars","pause","Coordinates","infocode","EPSG:4522","SkyBox","startMoveForward",`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;

  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);

    // Convert tangent space material normal to eye space
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

    // Convert view vector to world space
  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`,"_width","EPSG:4545","getLangText","665748FWEjdW","Lambert Tangential Conformal Conic Projection","aspectRatio","updateFrustum","contextmenu","_createPit","west","repeat","POSITION_ONLY","_setCanvasOption","关闭拾取高亮","pitPrimitive","PixelDatatype","_修改长度","noPickEntity","B_im","values","contourMaterial","from_greenwich","EPSG:4511","rectangle","loadCubeMap","https://restapi.amap.com/v3/direction/walking","L{arc_z}","Enable depth test against terrain","Control","parse","offsetHeight","thickWall","_textureTarget","ImageMaterialProperty","eia","半径：","UniformType","取消锁定","bind","1972820Ghvguh","_createOK","backgroundPadding","tileMatrixLabels","initMinMap","semiMinorAxis","maximumHeight","degrees","BOTTOM","xmin","bern",".jpg","修改位置","cesium-viewer-animationContainer","testPoint","_sceneEvent","_heightDraggers","projection","TilesetWireframeYes","ter","projectionMatrix","getAzimuth","VerticalOrigin","u_mars3d_flood_limitMin","(^|\\s)","_last_graphicsOptions","packedLength","right","geocoderConfig","_drawMouseMoveHandler","https://gss{s}.bdstatic.com/5LUZemja_QUU8t7mm9GUKT-xh_/tile/?udt=20150114&qt=tile&styles=pl&x={x}&y={y}&z={z}","_camera","tooltipClose","Oblique_Stereographic","_czmControlKey","TileMatrixSetLimits","ELLIPSOID","_hasUpdateMater","_moveActive","percentageChanged","VERTCRS","_createDivGraphic","EPSG4490","LabelStyle","lineHeight","X_TRANSLATION","morphComplete","startDraw","Robinson","easingFunction3","_polylineCollection","bindPickId","_updateLabelOpacity","clark80","_points","className","normalOffsetScale","addOuter","_root","Layer","未知原因，导出失败!","CullFace","_initSampledPositionProperty","image","positiveY","mouseup","PerspectiveFrustum","cacheTime","createShadowReceiveFragmentShader",".closeButton","_setPitchRange_mouseMoveHandler","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","#ff0000","GeometryAttributes","_infiniteProjection","<?xml","EPSG:4541","cssText","EPSG:4527","boderColor","computeModelMatrix","STATIC_DRAW","enabledMoveTarget","BoundingSphere","billboardStyleConver","unpack","_measureHorLable","longlat","WebGL发生渲染错误,渲染已经停止,请刷新页面。","stopMoveBackward","north","_gl","owner","_removeMeasureLabelAndEx","marker-color","修改半径","ProviderViewModel","#ff7800","ns0","_properties","endDraw","TileCoordinatesImageryProvider","disableThisFrame","mapSplit","AddMidPoint",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec4 tColor = u_color;
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float length = length(center) / 0.5;
  float time = 1. - abs(czm_frameNumber / 360. - 0.5);

  float param = 1. - step(length, 0.6);//大于0.6模糊，rate = 0.6
  float scale = param * length;// 0.6< length 返回0，反之返回1.
  float alpha = param * (1.0 - abs(scale - 0.8) / 0.2);// 0.8 < length 返回0，反之返回1.

  float param1 = step(length, 0.7);//小于0.5模糊
  float scale1 = param1 * length;// 0.6< length 返回0，反之返回1.
  alpha += param1 * (1.0 - abs(scale1 - 0.35) / 0.35);// 0.8 < length 返回0，反之返回1.

  material.diffuse = u_color.rgb * vec3(u_color.a);
  material.alpha = pow(alpha, 4.0) * globalAlpha;
  return material;
}
`,"Equidistant_Conic","flatHeight","proxy","points","_updateLabelStyleHook","areas",".active","replace","zoom","bindTooltip","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","getSlope","fillText","popupOpen","normalMap","ShadowMap",`havn't handled "`,"cloneProperty","Draw","midpoint","accessToken","updateTimer","enableLook","TOWGS84","_materialCache","hasMidPoint","_last_url","KeyboardRoamYes","mouseEvent","rome","<div>经度:{lng}</div> <div>纬度:{lat}</div><div>海拔：{alt}米</div> <div class='hide700'>层级：{level}</div><div>方向：{heading}°</div> <div>俯仰角：{pitch}°</div><div class='hide700'>视高：{cameraHeight}米</div>","bindHolesDraggers","hdr","fromCharCode","PRIMEM","vandg","10000","_修改高度","drawCanvas","C{arc_x}","_modelViewProjectionRelativeToEyeDirty","_distanceDisplayCondition","JulianDate","開啓日照陰影","wellData","moveLeft","width","fa fa-eyedropper","_computeEmitterModelMatrix","zoomIn","ctrlKey","defs","Geostationary Satellite View","pickWidth","修改寬度(Y方向)","_handler","fromHeadingPitchRoll","mars3d-divlayer","addTile","maximumHeights","Util","showFrustum","px;max-height:","_positions_circle_x","globalAlert","tileLoadProgress","getValueOrUndefined","_lastMouseOverItem","globalMsg","_polyline_positions","_inverMatrix","_enabledEvent","iconCls","mars3d-popup-animation","query","fa fa-male","_point","view","BrA","_bindVisibleEvent","onTimelineScrubfunction","blendingEnabled","selectedImagery","addressComponent","distanceDisplayPoint","VertexFormat","buildings","stopPropagation","end","coordinates must be finite numbers","areaStr","Export image","pass","_stateOkIndex","ClassificationType","_hasRemoveByMapSplit","getFloat32","forwardExtrapolationType","attr","fromDate","[object Date]","postProcessStages","pn1","depthTestAgainstTerrain","Z_TRANSLATION","CylinderGeometry","timeEndVal","flyToExtent","moveVar","pname","_contextmenuConfig","PINCH_MOVE","_index","geometryType","https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=2&scene=0","getRectangle","width: ","cloumn","orderIndependentTranslucency","AXIS","getBoundingClientRect","Route 类不支持autoSurfaceHeight方法 ！","_场景设置","_修改方向","mousedown","status","ymax","MIDDLE_DRAG","getItem","setInputAction","_depthTest","hasTooltip","getInMapChilds","ellipse","fromRotationMatrix","startEditing","_removeCollectionBy3D","depth","WebGLConstants","TilesetLayer","Transforms","Delete that point","fromGltfAsync","addLayer:图层id存在冲突，已重新赋值id","marsJzwStyle","_backFaceRS","_startHeading","UNIT","_container_onClickHandler","morphTo2D","endItem","IndexDatatype","complete","minPointNum","interPolygonObj","Mar3D 中国地形","NEAREST","_tikRender","onlySelected","Everest 1969","_toJSONValEnd","_videoPlay","relativeAmount","setPositions","getTimestamp","closeAll","updatePositionsHeightByAttr","getBaseLength","showText","showFillVolume","MultiPoint","phic0","keyup","update","EPSG:4497","objects","getRealAlt","moveForward","_挖方体积","_frustum","classificationType","feature","template","createGraphic","_contextmenuMgr","_sectorBackCommand","jobScheduler","requestVertexNormals","clipOutSide","_surface","heightVal","fogByDistance_far","buildModuleUrl","closePopup","CTRL","normalY","_onMouseOut","rotatePoint","transformWindowToDrawingBuffer","hierarchy","northing","挖地坐标数据存在问题！","_viewer","CheckerboardType","_smallMap","scaleByDistance_farValue","viewFrom","189wmnEED","CloudCollection","hasChildLayer","_删除该点","_depthTestAgainstTerrain_reset","texture","pickEllipsoid","pois","getGeometryInstanceAttributes","resetFloodValue","maximumRadius","fa fa-medium","getZoomUnits","activeTexture","apply","halfFloatingPointTexture","_eventResult","getTileLayers","_updateOutlineOpacity",`uniform float globalAlpha;
uniform bool axisY;
uniform bool mixt;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = repeat * materialInput.st;

  vec4 colorImage;
  if(speed != 0.0) {
    float currTime;
    if(time < 0.0) {
      currTime = speed * czm_frameNumber / 1000.0;
    } else {
      currTime = time;
    }
    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));
  } else {
    colorImage = texture(image, st);
  }

  if(color.a == 0.0) {
    if(colorImage.rgb == vec3(1.0)) {
      discard;
    }
  }

  if(color.rgb == vec3(1.0)) {
    material.alpha = colorImage.a * globalAlpha;
    material.diffuse = colorImage.rgb;
  } else {
    material.alpha = colorImage.a * color.a * globalAlpha;
    if(mixt)
      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);
    else
      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);
  }

  if(hasImage2) {
    vec4 colorBG = texture(image2, materialInput.st);
    if(colorBG.a > 0.5) {
      material.diffuse = color2.rgb;
    }
  }
  return material;
}
`,"_更多功能请右击","progress","fixedRoute","EditClass","sidesColor","tiles","getValueOrDefault","PolylineColorAppearance","angle1","第一视角站到此处","_textStyles","point2","unknown utm zone","lightColor","SceneMode","heading","renderState","outlineWidth","CylinderOutlineGeometry","_initTilesetFlat","OBJECTID","styleOptions","executeGlobeCommands","rightPoints","isPrivate","scaleByDistance_near","canvas","UNSIGNED_SHORT","GeoJsonDataSource","_mouseMoveHandle","#ffd700","neckAngle","_orbitCursorAngle","stopDraw","minDistance","destroyObject","toJSON:缺少坐标信息","_buildImageResource","raiseToTop","fov","_fireTarget_open","_海里","_toOneJson_Point","_useROI","ms1","number","createCommand","CESIUM_3D_TILE","_tilesetPlanClip","GroundPolylineGeometry","_enabledHook","_removeDynamicPosition","_高度差","scale","FormatLength","_setPitchRange_rightUpHandler","timeline","bindHighlight","convertor","#123e59","format","lookAtTransform","lowerToBottom","metaData","_measureDistanceLable","Quaternion","_startMousePosition","eachChildGraphic","nadgrids","isStart","_optionsLayersList","specularIntensity","fromType",`</button>
                  </div>`,"mars3d-smallTooltip-leftArrow","ellipsoid",`
in float me_isSelected;
bool czm_selected(){
    bool isSelected= me_isSelected>0.0000001;
    if(!isSelected){
        isSelected= czm_selected(`,"_rectangle","diffusePower","_czmBuiltinsAndUniforms","getExtent","fire","keyCode","formatted_address","LEFT_ROTATE","s_jtsk","getListByAttr","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","viewer","bloom","logDepth","selectedIndex","_cloudCollection","单击完成绘制","_isMouseLeftButtonPressed","_last_contextmenuConfig","locationData","_graphic_editing","_getFlagForKeyCode","disable","#000000","file:","_height","worldToModel","_moveHandler","addEventParent","hasBindEvent","polylineVolumeStyleConver","Enable brightness","multiplyByUniformScale","pickFramebuffer","_lng","YELLOW","_requiredResolution","updateUnit","result",`<div style="text-align: center;padding: 2px 0;" >
                      <button type="button"  `,"tileMatrixSetID","video","debuggerPointEntity","_cameraMoveEndHandler","QueryArcServer 请求出错","phone","-199.87,74.79,246.62","createTexture","onStart","_getOutlineStyle","_roll","_scanPlaneVA","innerRadii_y","_updateMoveAllHook","TEXTURE0","updatePass","rotateCamera","_updateOutlineToCallback","hasOpacity","renderError","aeqd","cesium-sceneModePicker-dropDown-icon","fixedLight","eventParent","destroyDraggers","uuid","charAt","fa fa-globe","rectangularSensorStyleConver","moveRight","_entity_scanPlane","createImageryProvider","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","response","_缩小","removeAll","datum","cameraMoveStart","提供的高精度的DEM地形服务","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","CENTER","long0","timeField","IntersectionTests","MaterialSupport","processFeatureCollection","WebMercatorProjection","max-forwards","tailLeft","info","UndergroundYes","minimumHeight","_backwardExtrapolationType","cgb","moveDelay","clientHeight","Model","startPosition","openSmallTooltip","_hideFeatures","VertexArray","_getOutlinePositions","BACK","_maxCanvasSize","closeSmallTooltip","_drawAddPointHandler","sinphi","_keyboardRoam","gradient","_startEditingHook","updateOutlinesDistanceDisplayCondition","_rotate_onPreRenderHandler","_velocityVectorProperty","_noMousePick","once","Cartographic","_clampToTilesetHeight","Scene","getAngleOfThreePoints","distanceLastFd","_moveDistanceStep","_onRightClickHandler","EllipsoidTerrainProvider","green","unit","handler","_isDragger","_stat","set","velocity","layerDefs","開啓大氣渲染","maxAlpha","proj4","_stopPropagation","visibleDepth","_primitives","geocode","maxPointNum","defaultView","fromCartesianArray","_drawDelEventType","_crs",".mars3d-sub-menu","gaode","editPlane","unbindPopup","PointStyleConver","allowDrillPick","查看此处坐标","rotateRight","rotateStop","colorHidden","default","{x}","-263.0,6.0,431.0","rotate","setCallbackPositions","details","directionWC","featuresLength","Albers_Conic_Equal_Area","LESS","_positions_grid","cesium-button cesium-toolbar-button mars3d-vrButton","floodRect","_onCollectionChanged","_keys","contextMenuClose","_mouseEvent","lang","Geometry","eachTilesetLayer","touchend","flat","message","toCartographic","_primitiveCollection","lastPointTemporary","showArea","column","distanceSurfaceMeasure","radii_x","substring","layerX","goLast","sinc0","_rotationAngle","_rotationScratch","fa fa-lock","vertexArray","addItem","getGraphicById","reflectorProjectionMatrix","uniqueKey","_positionWC","parentElement","fromCache","paused","Mask","_createPlaneByLine","rotateAnimation","updateMaterial","482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15","_removeGraphic","generate_composite","makeLabel","eachGraphic","getShowPositions","_pickCommand","collectionChanged","scaleByDistance_nearValue","_bindHierarchy","exp","reflectorViewMatrix","_清除所有标记","EPSG:3785","get","_单击后激活编辑","cesium-navigation-help-button","Reseau National Belge 1972","onLoadSuccess","center","ShadowMode","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","COLUMN2ROW1","MORPHING","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","slopeRampMaterial","_frameRateHeight","_objectsToExcludee","polygonTexture","fromUrl","Cesium3DTileStyle","distanceStr","cosrot","AREA_3","_ready","createGuid","_initLayer","_mapEx_timeTik","valid","verticalOrigin","length","GeometryPipeline","nightVisionEffect","offsetX","click","far","mode","silhouetteAlpha","_allowDrillPick","object","_单击增加点","S_POLE","_sources2","endsWith","total","classList","构造CesiumWidget时出错","name","stop","_onRightUpHandler","_setZIndex","clustering","_hdr","CGCS2000_GK_Zone_3","mars3d-divGraphic-edit","enu","_增加点","createGeometry","_noDestroy","circleSize","ShadowNo","WebMercatorTilingScheme","digVolume","lat2","Normal Sphere (r=6370997)","_property","Invalid GeoJSON object.","_conversionStyle","getArrowPoints","TimeInterval","middleDown","_pickImageryLayerFeatures","data","hasPopup","_terrain_onLoadError","updateStyle","identity","setCameraView","Geocent","_bindControl","maximumTerrainLevel","_normalZ","showResult","none","getPickRay",`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float powerRatio = 1. / (fract(czm_frameNumber / 30.0) + 1.);
  float alpha = pow(1. - st.t, powerRatio);
  vec4 color = vec4(u_color.rgb, alpha * u_color.a);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,"Close off circling","RED","madrid","imageryLayer","BAIDU","getArrowBodyPoints","showScanPlane","角度调整底部圆","strokeType","cityCode","cylinderStyleConver","stroke","CheckerboardMaterialProperty","contourShow","_subdomains","high","lineStyle","contrast","WallOutlineGeometry","pinchStart","getValueInReferenceFrame","_trackedEntity","terrainShadows","capabilities","removeEventParent","_value","59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993","_updateDomAttribute","fromMGRS","title","_showWall","ArcGISTiledElevationTerrainProvider","firstChild","now","_targetPosition","_getExcludedStyle","styleField","_graphic_move_z","prototype","_initByPosition","getNextLayerId","_mars3d_id","_面下","disTerrainScale","frequency","coslat0","_rotateMouseMoveFunction","headingPitchRollToFixedFrame","DIRECTION_FORWARD","_dataSource","_shadingType","Color","maximumZoomDistance","insertBefore","_proxy","u_mars3d_jzw_upz",'" in number yet, index ',"updateAttrForDrawing","旋转视图","mousemove","offsetY","glow","fromCartesian","mercatorToLngLat","esriGeometryPolyline","_primitive3",`uniform vec4 color;
uniform float size;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  //Main cellular pattern
  vec4 color = color;
  vec2 st = materialInput.st;
  vec2 F = czm_cellular(st / size);
  color.rgb -= (F.x / F.y) * 0.1;

  //Extra bumps for frequency
  float noise = czm_snoise(st / size);
  noise = pow(noise, 5.0) * frequency;
  color.rgb += noise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,"_drawCommands","isFinite","LEFT_DOUBLE_CLICK","_canvas","UNBOUNDED","平方米","vertices","Aerial","cos_p12","mars3d-mousedownview-show","centerOfLine","pixelStorei","_thingList","_zhStyle","PolygonHierarchy","direction","availability","rotationDegree","positiveZ","Image","MoveType","bindUpdateEvent","decimal","_startDrawHook","getMetadata","_onRemove","debugShowBoundingVolume","Appl. Physics. 1965","_pointSize","_cubeMap","_ferro","lat_ts","globalAlpha","aPosition","upperLatitude","_sendCount","category","_pixelFormat","wmts","divUpLabel","ellipsoidStyleConver","_canrefresh","_compassRectangle","dataSources","ymf","_createGeometryInstance","RequestScheduler","leadTime","MaterialUtil","json","_normal_angle2","geodetic_datum_of_1965","tailWidthFactor","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","south","heightMeasure","Material","round","hasClosure","_setInsertIndex","釋放後完成修改","_updatePositionsByCircleCenter","sin","_PointEdit_XY_TRANSLATION","_defaultColorTexture","_graphic_rotate_z","_depthStencilTexture","clientWidth","minimumLevel","_stopEditingHook","Proj","toArray",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M10.5 24L38.5 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,"queryCircle","gradations","_hiddenColor","_getColorByColorMaterial","_wall_minimumHeights","_fpsText","czmGeojson","请引入 mars3d-cesium 库","lon","removeArea","tooltipOpen","图上标记","EPSG3857","cesium-navigation-button-right","_angle","backgroundColor","NearFarScalar","find","_万米","slice","getElevationContourMaterial","openSmallTooltipByMinPointNum","osmBuildings","右擊刪除點","sidesWidthRatio","materialType","MoveAll","_readChildNode","addArea","smallTooltip","开启地形","Cesium官方Ion提供的高分辨率全球地形","arcgis","sampleHeight","按軸平移","顯示星空背景","_globeMouseHandler","关闭大气渲染","originalStyle","_cascadeMatrices","Extended_Transverse_Mercator","quoted","clear","_contourColor","_last_planeGraphics","getFullYear",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(st.s, fract(st.t - t));
  vec4 color = vec4(0., 0., 0., 0.);
  float tt = 0.5 - abs(0.5 - st1.t);
  float ss = st1.s;
  float alpha = tt * 2.;
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,"_us","atan","_boundingSphere","trim","_onMouseMoveMapHandler","globeHeight","_readyPromise","_arrData","scaleZ","_performanceDisplay","snowCover","updateDivPosition","BLACK","Unknown","depthRange","TileProviderError","特效效果","{arc_Z4490}","ImageBasedLighting","_updateDrawEntityToThis","area","_default_tiltEventTypes","updateHeight","computeCullingVolume","Cesium3DTileset","KmlLayer：请必须传入 url 或 data 参数","emitterModelMatrix","LEFT_CLICK","ALPHA_BLEND","openContextMenu","graphics","_xHalfAngle","PointPrimitiveCollection","stroke-opacity","eqdc","transZ","_update","cesiumWidget","inverseViewMatrix","GeographicTilingScheme","getAttribute","XY_TRANSLATION","RectangleGeometryLibrary","_hasUpdate_modelMatrix",`uniform samplerCube u_cubeMap;
uniform samplerCube u_cubeMap2;
uniform samplerCube u_cubeMap3;
uniform float u_select;
in vec3 v_texCoord;

void main() {
  vec4 fragColor;
  if(u_select <= 1.0) {
    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select);
  }
  if(u_select > 1.0) {
    vec4 color = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap3, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select - 1.0);
  }
  out_FragColor = fragColor;
}
`,"uri","PolylineArrowMaterialProperty","isActivate","replaceMain","LineFlowColor","DATUM","_counts","_mouseMoveHandler",`
      transform: rotate(-`,"Failed to find a grid shift table for location '","zoomTo","_onMiddleDownHandler","intersection",".contextmenu-item","_useTiles","_removedBaseHook","_开启深度监测","analysisOptions","showSkirts","XY_TRANSLATION_COLOR","_lastFpsSampleTime","_rangeNumber","imageSR","handleError","isClockWise","_labelEx","sceneMode","cesium-navigation-help-tilt","fetchXML","C_im","无地形","_toChineseLang","pixelRange","imageryProvider","PolylineDashMaterialProperty","_arrowInstances","_onTerrainChangeHandler","translucency","stRotation","addSeconds","hasSelected","componentsLength","color2","getMatrix3","_updateEntityOpacity","_roiUV","_pointEx","_mergeStyleToOptions","interVal","scaleByDistance","description","selectedImageryProviderViewModel","#FF9742","False_Easting",`px;
  --clip-width-1: `,"drawCommand","Longitude_of_center","basemap","_toOneJson_Poly","showSectorSegmentLines","addThing","TOP_ROTATE","MaterialAppearance","font","INERTIAL","_maxRangeLength","noAlt","clampToTileset","_isStart","html","EllipsoidSurfaceAppearance",`
#define CZM_SELECTED_FEATURE
uniform sampler2D czm_selectedIdTexture;
uniform float czm_selectedIdTextureStep;
uniform float czm_selectedIdTextureWidth;

bool czm_selected(vec4 id) {
  bool selected = false;
  for(int i = 0; i < 1024000; i++) {
    vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5));
    if(all(equal(id, selectedId))) {
      return true;
    }
    if(float(i) > czm_selectedIdTextureWidth)
      break;
  }
  return false;
}

`,"RotatePointStop","distanceDisplayCondition_far","I3SLayer",'"  />',"_selectedPlane","_hasChangeEnableInputs","_removedBeforeHook","chinaCRS","_orbitCursorOpacity","enableZoom","_outlineEx","(\\s|$)","_tilesetFlat","HAS_NORMAL_MARS3D","_metadataSuccess","potsdam","setOptions","fromScale","majorDragger","frameRate","layer","disableEdit","snow","material_bak","Latitude_Of_Origin","_bindMoveAllDragger","mouseover","fillStyle","viewport","_hasAsynSurfacePosition","_primitive","addAll","cosc0",`uniform vec4 color;

void main() {
  out_FragColor = color;
}
`,"Cesium3DTileFeature","detail_info","_map_clickHandler","getNormal","_unbindDocumentEvent","编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map","Y_UP_TO_Z_UP","单指拖动","setQueryParameters","fi0","drawRingCanvas","_translucent","utm","push","axisY","_停止编辑","diffHeight","angleDecimal","Space distance","heightStep","mars3d-smallTooltip-rightArrow","_silhouetteColor_alpha_bak","catch","hasOwnProperty","_addGraphicByArrOptions","Van_der_Grinten_I","post","cellAlpha","ElevationContour","_getCameraFocus","_entitiesToVisualize","showFirstPage","level","tms","gamma","&label=","leftPositions","_updateStyleBaseHook","callback","closed","polylineC","crsy","_getItemHtml","lastParameters","_idField","limitMin","_renderPassCache","arrHB","sourceTarget","fixedFrameToHeadingPitchRoll","mars3d-smallTooltip-arrow mars3d-smallTooltip-rightArrow","autoTip","_load_data","arc","queryBicycling","_cubeMap3","_wrapper","createAttributeLocations","mouseMove","_outlinePositions","segment","_previousTime","getParticleImage","glowColor","01234567","flipy","application/json","inverse","IDENTITY","warn","depthTest","_rotateFrame","maximumGreen",`float getDistance(sampler2D depthTexture, vec2 texCoords) {
  float depth = czm_unpackDepth(texture(depthTexture, texCoords));
  if(depth == 0.0) {
    return czm_infinity;
  }
  vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth);
  return -eyeCoordinate.z / eyeCoordinate.w;
}
float interpolateByDistance(vec4 nearFarScalar, float distance) {
  float startDistance = nearFarScalar.x;
  float startValue = nearFarScalar.y;
  float endDistance = nearFarScalar.z;
  float endValue = nearFarScalar.w;
  float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);
  return mix(startValue, endValue, t);
}
vec4 alphaBlend(vec4 sourceColor, vec4 destinationColor) {
  return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);
}
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec4 fogByDistance;
uniform vec4 fogColor;
in vec2 v_textureCoordinates;
void main(void) {
  float distance = getDistance(depthTexture, v_textureCoordinates);
  vec4 sceneColor = texture(colorTexture, v_textureCoordinates);
  float blendAmount = interpolateByDistance(fogByDistance, distance);
  vec4 finalFogColor = vec4(fogColor.rgb, fogColor.a * blendAmount);
  out_FragColor = alphaBlend(finalFogColor, sceneColor);
}
`,"_textureSize","removeControl","3.5.15","bottomRadius","_normal_angle1","toRadians","_cameraMoveStartHandler","insertIndex","viewMatrix","StripeMaterialProperty","GroupThing","_menuIndex","centerOfMass","dimensions_z","VelocityOrientationProperty","_updateImage","isDestroyed","fa fa-info-circle","TRANSPARENT","darkColor","headWidthFactor","_flipY","fromRotationZ","convertToReferenceFrame","class","maxPitch","_limitGlobe","infinity_dist","citylimit","_hiddenAreaColor","containerId","_positions","subtract","fromIso8601","uniformState","_onKeyUp","updateCamera","MoveHeight","TEXTURED","EPSG:4505","Cesium3DTilePass","N_POLE","顯示包圍盒","_computedScanPlaneModelMatrix","+proj=longlat +ellps=GRS80 +no_defs","開啓黑白","group","clearLastCamera","_removePit","_updateTerrainProvider","lineColor","colorAlphaByDistance","list","DistanceDisplayConditionGeometryInstanceAttribute","drawingBufferWidth","showElseArea","cons","derivedCommands","fa fa-file-text-o","uniforms","_shadowMapMatrix","isInPoly","toBottom","Oblique Stereographic Alternative","fill-opacity","停止調整比例","_waterPlane","geometries","keyWord","_getAddress_ing","entityCollection","showAddText","zoy","shift","getFeature","prevStageUpdate","GRS80","maximumTextureSize","_startPitch","responseType","dth","COLUMN2ROW2","getTailPoints","charCodeAt","_getCreateEntityAttr","multiplyByScalar","填方體積","/tile/{z}/{y}/{x}","dashLength","_draw_holes","resetClipValue","editingGrid","hasPixelOffset","updateAttrForEditing","_scanPlaneColor_alpha","city","terrainProviderViewModels","GeometryCollection","_isComplete","setPlanes","_domeFrontCommand","_scanPlaneFrontCommand","_sectorLineVA","appendChild","background","moveCamera","_updatEntityAlpha",`
(+`,"enableRotate","-106,-87,188","_updateNormal","parentSelected","fromPlane","sources","page","corridorStyleConver","_updateDraggersTimeTik","shaderSource","polylineVolume","pointP","正在計算體積","createMaterialProperty:未找到该类型的对应材质属性","wgs84ToWindowCoordinates","SGS85","strokeRect","LINES","IdField","2061544ktVrDN","EPSG4326","depthFailMaterial","alert","GroundPolylinePrimitive","lblAddFun","fromAxisAngle","polylineStyleConver","getType","_metadataFailure","_maxHeight","ep2","_bindHeightDraggers","doubleArrow","negativeY","spacing","Andrae 1876 (Den., Iclnd.)","getPopupConfig","opaqueFrustumNearOffset","_appendHtmlHook","bing","closeTooltip","三维视图","_mountedHook","HALF_PI","createPickId","_mousePosition","defaultDateFormatter","_minPitch","TRIANGLES","osni52","keydown","normalZ","sunDirectionWC","silhouetteSize","isPause","Pass","rgba(241, 128, 23,  ","approx","updateStatus","cloudStyleConver",`
        uniform sampler2D colorTexture;
        uniform vec3 marsColor;
        uniform float marsOpacity;
        uniform float threshold;
        uniform float smoothWidth;

        in vec2 v_textureCoordinates;
        void main() {
          vec4 marstexel = texture( colorTexture, v_textureCoordinates );

          #ifdef CZM_SELECTED_FEATURE
            if (!czm_selected()) {
                marstexel = vec4(0.);
            }
          #endif

          vec3 luma = vec3( 0.299, 0.587, 0.114 );
          float marsv = dot( marstexel.xyz, luma );
          vec4 outputColor = vec4(marsColor.rgb,marsOpacity);
          float alpha = smoothstep(threshold, threshold + smoothWidth, marsv);
          out_FragColor = mix( outputColor, marstexel, alpha );
        }`,"moveUp","pixelOffset","cutVolume","CustomDataSource","_containerArrow","drawAddPoint","_addedHook","ENABLED","fa fa-building-o","mouseZoom","marsOptions","tileProvider","createElement",".cesium-performanceDisplay-throttled","flowGlow","_draw_tooltip","numLines","heightStr","to_meter","targetPosition","_海拔","headTailFactor","_popupId","distanceHorStr","circlePoints_2","remove","EPSG:4532","last_highlighGraphic","_updateLabelPosition","process","開啓鍵盤漫遊","_cylinderBottomRadius","_showThroughEllipsoid","_toCesiumValBefore","surface","Texture","Camera info",`;
      if (item.type === "group") {
        const arrVec = []
        for (let index = 0; index < item.layers.length; index++) {
          const item2 = item.layers[index]
          if (item.templateValues) {
            item2.templateValues = item.templateValues
          }
          const temp = window._temp_mars3d_createImageryProvider(item2)
          if (temp == null) {
            continue
          }
          arrVec.push(temp)
        }
        return arrVec
      } else {
        return window._temp_mars3d_createImageryProvider(item)
      }
    }`,"postRender","flyToPoint","TERRAIN","_planeAngleRadians","bindTexture","Drag that object","alpha","rectangleStyleConver","rotateStep","maximumImageSize","#3388ff","splice","_colorTexture","singam","radii_y","addTo","flyToGraphic","TEXTURE_WRAP_R","openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复","_useHdr","rotation",`uniform vec4 color;
uniform float dashLength;
uniform float dashPattern;

uniform vec4 sidesColor;
uniform float sidesDashLength;
uniform float globalAlpha;

in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;
  vec2 st = materialInput.st;

  float centerGlow = widthRatio / abs(st.t - 0.5) - (widthRatio / 0.5) - 1.0;
  if(centerGlow > 0.0) {
    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = color.rgb;
    material.alpha = color.a;
    return material;
  }

  float sidesGlow = (1.0 - sidesWidthRatio) / abs(st.t - 0.5) - ((1.0 - sidesWidthRatio) / 0.5) - 1.0;
  if(sidesGlow < 0.0) {
    float dashPosition = fract(pos.x / (sidesDashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = sidesColor.rgb;
    material.alpha = sidesColor.a* globalAlpha;
    return material;
  }

  discard;
}
`,"_rectangle_draw","heights","fabric","EQUIT","_enabledDraw","flyTo","isAnimate","addDays","setOpacity","_last_fireIndex","&scene=0","modelStyleConver","showUp","_primitive_label","_updateHeight","</div>","Everest (Sabah & Sarawak)","toLowerCase","关闭星空背景","Mars3DEx","DepthTestNo","_isInSceneCamera","ION","getCacheOrAdd","wgs84","LineString","cos_phi","clock_onTickHandler","Zoom Out","shallowClone","ControlType","_mouseUpHandler","startAutoForward",",0,0,","Close sky atmosphere","_arrLayer","LEFT","_calculateAsynSurfacePosition","_attributeLocations","ShadowMapShader","passes","_enabledEditGrid",'<div title="大地2000坐标"><label>横坐标</label>',"_colorCommands","method","getHours","_maxPointNum","isAutoEditing","root","defaultValue","MultiLineString","datumName","DistanceDisplayCondition","toGeoJSON","COLUMBUS_VIEW","this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.","_addChildGraphic","endDate","overviewMap","maxDistance","_removeCollectionBy2D","inverseMatrix","_wall_maximumHeights","_onKeyDown","DISABLED","textContent","DrawPolyline","&v=017","_getWindowPosition","getTooltipConfig","_mars_type","getImageData","Entity","rgba(28,25,125,0.99)","backFaceAlpha","getAddHeight","point","onload","_matrixMove","導出GeoJSON","settime","cameraController","showIntersection","EPSG:4542","isMultiMax","_divWidth","headAngle","_tags","entityGraphic","google","baseMaterialConver","该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!","_modelUpAxis","authority","_speed","getDerivedResource","scanPlaneOpacity","AREA_1","mapbox","RADIANS_PER_DEGREE","targetPositio","drawEndEventType","font_size","Picking","_zoomFactor","circle",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(fract(st.s - t), st.t);
  vec4 color = vec4(0., 0., 0., 0.);
  float alpha = 1. - st.t;
  float value = fract(st1.s / 0.25);
  alpha *= sin(value * 3.1415926);
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,"authorization","loadOk","Close BoundingVolume","shadowMaps","pickedObject","addTileError","altKey","unbindUpdateEvent","_sizeInBytes","_onMouseMoveHandler_point","addHeight","_getTileEventParams","percent","scaleFactor","允许进入地下","_arrPartMeasureLable","filterColor","_positionsWall","WGS84","false_easting","waterColor","_highlight_mouseEventHandler","culture","_allPage","_command","AuWoS0D5bm9eQ5S8TzH4rWDsXv9ysN4vVf05MZ9IjCUXyw3xSVTGmoKwvnEPr7Up","html2canvas","proceed","neckWidthFactor","unpackArray","getIndex","LEFT_DOWN","PointTrans","snowEffect","_positionScratch","word","multiplyTransformation","toCesiumVal","_mouseUpHandle","attributes","pickId","_getModelMatrix","rgba(255,255,255,1)","pointGrid","path","onmousedown","visibleColor","updateFrameState","u_mars3d_flat_upAxis","sqrt","results","gtu","normal","clipTarget","_last_stopTime","location","updateMatrix","_last_shouldAnimate","Stereographic_South_Pole","_mapEx_extentChangeHandler","minimumGreen","ImageryLayerFeatureInfo","getValue","EPSG:4530","frameState","getAddress","isAxiosError","eventTarget","_关闭键盘漫游","_onLeftDownHandler","arc_y","referenceFrame",`
      </button>
      <button id="btn-clockAnimate-now" class="mars3d-clockAnimate-btn" title="返回到当前时间" >
        <svg width="20" height="20" style="margin-top: 5px;" viewBox="0 0 48 58" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="48" height="48" fill="white" fill-opacity="0.01"/><rect width="48" height="58" fill="white" fill-opacity="0.01"/>
          <path d="M34.0234 6.68921C31.0764 4.97912 27.6525 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 20.3727 43.0344 16.9709 41.3461 14.0377" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M31.9498 16.0502C31.9498 16.0502 28.5621 25.0947 27.0001 26.6568C25.438 28.2189 22.9053 28.2189 21.3432 26.6568C19.7811 25.0947 19.7811 22.562 21.3432 20.9999C22.9053 19.4378 31.9498 16.0502 31.9498 16.0502Z" fill="none" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
        </svg>
      </button>
      <span id="txt-clockAnimate-time" class="time" title="当前时间"> 2017-08-25 00:00:00 </span>
      <input id="txt-clockAnimate-speed" type="number" class="mars3d-clockAnimate-speed" value="1" title="速度（倍率）" />
    `,"binarySearch","_toCesiumValEnd","CGCS2000_GK_CM_3","extent","graticule","editStop","DESTROY","removeLayer","_domeLineVA","CLAMP_TO_GROUND","omerc","_updateOutlineStyle","old_depthTestAgainstTerrain",`uniform vec4 u_intersectionColor;
uniform float u_intersectionWidth;
uniform vec4 u_lineColor;

bool inSensorShadow(vec3 coneVertexWC, vec3 pointWC) {
    // Diagonal matrix from the unscaled ellipsoid space to the scaled space.
  vec3 D = czm_ellipsoidInverseRadii;

    // Sensor vertex in the scaled ellipsoid space
  vec3 q = D * coneVertexWC;
  float qMagnitudeSquared = dot(q, q);
  float test = qMagnitudeSquared - 1.0;

    // Sensor vertex to fragment vector in the ellipsoid's scaled space
  vec3 temp = D * pointWC - q;
  float d = dot(temp, q);

    // Behind silhouette plane and inside silhouette cone
  return (d < -test) && (d / length(temp) < -sqrt(test));
}


vec4 getLineColor() {
  return u_lineColor;
}

vec4 getIntersectionColor() {
  return u_intersectionColor;
}

float getIntersectionWidth() {
  return u_intersectionWidth;
}

vec2 sensor2dTextureCoordinates(float sensorRadius, vec3 pointMC) {
    // (s, t) both in the range [0, 1]
  float t = pointMC.z / sensorRadius;
  float s = 1.0 + (atan(pointMC.y, pointMC.x) / czm_twoPi);
  s = s - floor(s);

  return vec2(s, t);
}
`,"featureToGraphic","_initLayers","transformCenter","redraw","_showDomeLines","_frustumPrimitive","angle2","auto","cartographicToCartesian","_lights","context","labelStyleConver","middle","_customShadersKey","_sunlight","multiplyByPoint","fullExtent","hasUpdate","_isRotateStart","left","_uniforms_baseWaterColor_alpha","__VERSION__","isWgs84","destroy","_container_onMousedownHandler","one_minus_f","fixedFrameTransform","divWidth","unshift","getAllPositions","cartesianArrayToCartographicArray","scope","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","constrainedAxis","关闭环绕飞行","document.getElementById(","neckHeightFactor","sinph0","split","repeat_y","standard_parallel_1","_container_rotationArc","cols","sin_po","双击完成绘制","arrIDS","Azimuth","waypoints","TRANSLUCENT","coneTrack","_name","roll","NaN","box","_tileWidth","updateMatrix2","fillColor_bak","returnIdsOnly","CameraEventType","infiniteProjectionMatrix","_frameTime","_updatePosition","_openByMouseEvent","Mar3D提供的12.5米精度的中国地形","_单击开始绘制","EPSG:4507","Z_UP_TO_X_UP","clippingPlanes","_cacheGrid","_onClockTickHanlder","zoomFactor","_labels","minimumHeights","3dtile_feature_","S3MTilesLayer","ENGCRS","planClip","tooltipOptions","graphic","行政地标","updateClock","east",`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float time = fract(czm_frameNumber * speed / 1000.0);
  vec2 st = materialInput.st;
  float scalar = smoothstep(0.0, 1.0, time);
  material.diffuse = color.rgb * scalar;
  material.alpha = color.a * scalar * globalAlpha;
  return material;
}
`,"allPage","PolygonOutlineGeometry","_bindEvent","zoomOut","getTranslation","onlyPickModelPosition","editRemovePoint","drillPick","updateModelMatrix","hasHeightEdit","isContinued","_updatePrimitiveForColorMaterial","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_getCssText","_highlight_mouseOutHandler","_dirStep","_events","layers","WallGeometry","_measureLable","Move it over here","px;","clockTick","_last_clickTime","_velocityScratch","flyToByAnimationEnd",`} 
`,"materialOptions","onEnd","CorridorStyleConver","setAttribute","bboxSR","fa fa-share-alt","gee","_matrix4","fetchJson","fields","startDate","_containerContent","_unbindEvent","MeasureDistance","_ellipsoid","u_normalDirection","options","http://mars3d.cn","UNSIGNED_BYTE","POSITIVE_INFINITY","website","_geoJsonLayer","getFactorial","listens","Enable bloom","_draggerIng","Assets/Textures/NaturalEarthII","enableTranslate","ControlUtil","_setCameraViewListItem","baidu","Stop translation along axis","materials","radiuslimit","flickerEntity","apa","HDR","SPHEROID","province","00000","_forwardExtrapolationType","clone","changed","speed","EPSG:4326","_xTable","FloodByMaterialType","ArB","fillVolume","hostname","LatLongBoundingBox",`px;
        margin-left: calc(50% - `,"stringify","Mercator_Auxiliary_Sphere","_getTargetDistanceDisplayCondition","_changeHeadingPitch","_updateDomAttributeByEvent","parent","_uniforms","mars3d-compass","count","createDragger","transform","boundingVolume","maximumLevel","selected","_unbindMorphComplete","baseLayerPicker","PROJECTION","image2","_darkness","FirstPerspective","minimumTerrainLevel","multiplyByVector","heightReference","wms:","_hasTerrain","MultipleSkyBox","_frontFaceRS","_has3dtiles","fa fa-star-half-full","_关闭雾天气","DrawEditNo","getDate","sinlat0","bottomPositions","SCENE2D","_标记点","moveStep","_orginCenterPoint","_graphic_move_y","maximumSizeX","_setFeatureProperties","_color_alpha_bak","_second","fromPositions","index","_last_isFireStop","extension","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_main","random","GRS 67(IUGG 1967)","parentContainerId","token","some","cross","bindPopup","_onRightDownHandler","crs","minimumBlue","cancel","setHours","measure","_pointType","angle","_child","C_re","hasType","25px","image/jpeg","控件,请直接使用 map.controls.","isEntity","step","mouseOut","billboardCollection","Enable black and white","customTags","縱坐標","_type","BaseMaterialConver","_filterPropagateEvent","Buffer","HeightReference","_updateDiffHeight","_i3sProvider","changeMouseModel","_setCameraViewListState","getImage","normalTexture","_setPitchRange_rightDownHandler","datumCode","_mars3d_layerId","atan2","clockLoop","min","editMovePoint","_关闭大气渲染","TileMatrixLimits","Drag that point","_marsOptions","diffuseWall","lam","resetFlatValue","_hasEditHeading","fa fa-sun-o","backgroundOpacity","_showSectorLines","cereatePositionsAndIndice","_leftLayer","_rotateDirection","radius","orientation","interpolationDegree","_array","beginPath","_hasTerrainShadows","wkid","_visibleAreaColor","showAll","_createAppearance","GaodePOI 请求出错",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M24.0607 10L24.024 38" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M10 24L38 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,'<textarea class="mars3d-popup-edititem ',"basemaps","ontouchstart","_eventParents","_sp","Polyconic","ReferenceFrame","MGRSPoint zone letter ","_corridorEx","concat","swallowTailFactor","_postProcessStage","LabelCollection","SplitDirection","city_type","_hash","visibleAreaColor","_sources3","/tile/","stopEditing","rectangularSensor","intersectionColor","reverse","_pickedId","fromTranslationRotationScale","Event","3857","videoPlay","intersectionWidth","_last_success","delProperties","animationSpeed","spatialReference","PolyBlob","removeMapChilds","debugExtent","enableControl","_map_morphCompleteHandler","_tileLayer","headingPitchRollQuaternion","hasShadows","PlaneOutlineGeometry","showThroughEllipsoid","strokeColor","arrLX","关闭下雪","_setInputAction","graphicLayer","debugAxisLength","positionToTileXY","NavigationHelpButton","PrimitiveCollection","_tilesetClip","CubeMap","popupOptions","scale_factor","Fly around here","getInnerHTML","pointer-events","ratexp","one_minus_f_squared","_framebuffer","#55ff33","_areaList",".svg","specularMap","distanceLegend","_drawLayer","homeButton","_dragger_index","visibility","toMercator","clampToHeightMostDetailed","_entity_outlines","currentTarget","osgb36","_createFrustumPrimitive","_整体平移","czmObjectEx","_material","_default_cursor","_右击删除点","img","multiplier","Type","Effects","Lambert_Azimuthal_Equal_Area","renderPass","localStorage","polylineVolumeC","_updateEditDraggers","_effects","Null","hasControl","delmbr","_createGraphic","_zoomNavigation","NONE","updateLengthForTerrain","v_pole_n","_updateMatrixMovePosition","queryWalking","DebugModelMatrixPrimitive","getOutlinePositions","CLAMP_TO_EDGE","_wkid",`rad);
      opacity: `," and BBOX(","_imageryProvider","currentObject","_czmContrl","_createCzmContainer","_getExtentView","_PerspectiveFrustum_clone_old","imageOptsConver","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs","hasZIndex","_toJsonEx","readPixels","_cancelOutlinePositionsCallback","removeTile","_createPrimitive","_domeSurfaceMaterial","_cacheGraphic","空間距離","plane","removeGraphic","_showBox","convex","getLayers","_hasEdit","退出VR模式","VERTEX_FORMAT","rightPositions","_terrainProviderIndex","_pageIndex","booleanPointInPolygon","etag","_primitive4","ml1","options.width","curve","_off","Ion","_sceneOption","projections","_positionTexture","_containerSpeed","createVertices","SceneTransforms","region","_hasUpdate_emitterModelMatrix","leftUp","_last_clickPositionX","_maxCacheCount","_createViewer","_draggerMove","_isColorMaterial","getDerivedShaderProgram","_container_onMouseoutHandler","getEntityAttr","animation","updateHeightDraggers","stockholm","_looking","_selectedIdTexture","PixelFormat","_addCameraView","defines","dirStep",`<Intersects>
                      <PropertyName>`,"_contextmenuItemClickResult","_czmContainerKey","enableInputs","_minimumHeights","viewModel","GroundPrimitive","display","_firingCount","无法解析数据position坐标位置","_colorHidden","setValue","UndergroundNo","fromCartographic","isInPush","svg:svg","SampledPositionProperty","_layers","num","_toOneCesiumVal_Poly","indices","0px","magnitude","_setPositionsToCallback","isShowing","busineData","geodeticSurfaceNormal","Equirectangular","scene","camera","isAdded","acos","_camera_cache","EllipsoidOutlineGeometry","parentNode","children","rotateSpeed","isEditing","lng","PolylinePipeline","cvs","请传入淹没区域才能开始分析","_onEventHook","contourUniforms","showSectorLines","negate","_setEditCursor","transparent","autoCenter","convertMC2LL","maxRadius","Map","_graphic_rotate_x","boundingSphere","_scanePlaneXHalfAngle","_graphic_drawing","reject","_clampToGround_reload","No valid id attribute found","_promise_resolve","polygonWallStyle","scanPlaneRate","_getPickIds","coord_type","KeyboardEventModifier","terrain","innerHTML","{arc_z4490}","getAreaById","vec_z","lastCameraView","plessis","VR模式不可用","_resetCamera","getCubicValue","volumeDepthMeasure","section","_getJsonPositions","removeNearPoint","LineBloom","state","stopTime","_computeModelMatrix","_primitive2","modelMatrix","clearDrawing","getLayerByAttr","imageryProviderViewModels","domToolbar","(^|&)","showDigVolume","textBaseline","_color","_container2","shape","startFlicker","sinb1","_updateClr","getContext","cosb1","Invalid height","outline","__esModule","wrapT","matrix","fromArray","_map_preRenderHandler","_填方体积","fa fa-ticket",".png","arcgis官方提供的高分辨率全球地形","show","clockStop","_last_depthTestAgainstTerrain","_openByClick","_onMarkerDragStart","_showDrawMouseMoveSmallTooltip","GeographicProjection","cea","getArrowHeadPoints","_map_extentChangeHandler","projName","volumeMeasure","transY",`
    `,"worldToCameraCoordinatesPoint","_createCzmControl","_numberOfPoints","glowPower","geometryInstances","baseWaterColor","fromPointNormal","success","depthTestOld","startCompute","BD09","_enableDebugWireframe","_roll_reality","forward","animateFrame","geojson","MaterialUtil register: ","autoSurfaceHeight","BaiduPOI 请求出错","PolyGradient",`px;"
                        data-type="`,"fireTargetEvent","queryText","union","Rectangle","addControl","blackAndWhiteEffect","_wall_positions","_positions_CallbackProperty","heightLabel","top","_getDrawPointEntityClass","_updateMaxMinHeights","toFixed","face","time","_optionsBasemapsList","play","bess_nam","_setOptionsHook","WGS7","addChildsToMap","查看详情","getPickDepth","_shadowMap","_metadataError","depthFailAppearance","_maximumHeights","_moveDelayTik","WFS","_updateExOpacity","_key_index","tianditu","offscreen","not a string","#29cf34","_minimumCollisionTerrainHeight","_scanPlaneColor","_hierarchyPositions","ClassificationPrimitive","_position_show","framebuffer","azimuth","activate","splitNum","tips","getDefaultRenderState","orginCenterPosition","_纵坐标","DeveloperError","multiply","_fpsFrameCount","dimensions","LEFT_DRAG","fromMercator"," 模型中心位置:","wfs:","off","longitudeInterval","setBasemapsOptions","filter","hasProperty","src",';">',"_跟踪锁定","labelP","_关闭下雪","tilesetPassState","gcj02ll","skyBox","_uv","updatePlane","_updateTableLength","planeP","EPSG:4516","Network Error","gnom","buffer","UNIT_Z","primitiveCollection","Matrix3","sinX0","Command","添加地形处理区域","_lineColor_alpha","_orbitTickFunction","startsWith","reflectivity","adname","Display BoundingVolume","_extentGraphic","transX","88935dTqUZd","_modelEx","1=1","types","vertexFormat","handleSuccess","atob","addLayer","_labelCollection","RELATIVE_TO_GROUND","updateOrientation","setRequestHeader",`
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform sampler2D depthTexture;

    uniform sampler2D maskTexture;
    uniform sampler2D maskDepthTexture;
    uniform float thresholdAngle;
    uniform bool showOutlineOnly;

    uniform float outlineWidth;
    uniform float devicePixelRatio;
    uniform vec3 visibleEdgeColor;
    uniform vec3 hiddenEdgeColor;
    uniform bool useSingleColor;

    in vec2 v_textureCoordinates;

    float lengthSq(vec3 v){
        return v.x * v.x + v.y * v.y + v.z * v.z;
    }
    float normal_angleTo(vec3 a,vec3 b){
        float denominator =  sqrt(  lengthSq(a) * lengthSq(b) );
        if ( denominator == 0. ) return czm_pi / 2.;
        float theta = dot(a, b ) / denominator;
        // clamp, to handle numerical problems
        return  acos(  clamp( theta, - 1., 1. ) );
    }

    float compareNormal(vec4 n1,vec4 n2){
          if(  abs (  normal_angleTo( n1.xyz , n2.xyz ) ) < thresholdAngle ){
              return 0.;
          }else{
              return 1.;
          }
    }

    float compareDepth(const in vec2 uv){
        float maskDepth = czm_readDepth( maskDepthTexture, uv);
        float nonDepth = czm_readDepth( depthTexture, uv);
        return maskDepth>nonDepth?1.:0.;
    }

    void main(){

        vec2 vUv=v_textureCoordinates;

        // vec4 color = texture( colorTexture, vUv);
        vec4 maskColor = texture( maskTexture, vUv);

        if( maskColor.a < 0.0001){
            // out_FragColor =color;
            discard;
            return;
        }

        vec2 invSize = outlineWidth / colorTextureDimensions;
        vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);

        vec4 c1 = texture( maskTexture, vUv + uvOffset.xy);
        vec4 c2 = texture( maskTexture, vUv - uvOffset.xy);
        vec4 c3 = texture( maskTexture, vUv + uvOffset.yw);
        vec4 c4 = texture( maskTexture, vUv - uvOffset.yw);

        float d;
        if(showOutlineOnly){
            float diff1 = (c1.a - c2.a)*0.5;
            float diff2 = (c3.a - c4.a)*0.5;
            d = length( vec2(diff1, diff2) );
        }
        else{
            float diff1 = compareNormal(c1,c2)*0.5;
            float diff2 = compareNormal(c3,c4)*0.5;
            d = length( vec2(diff1, diff2) );
        }

        if(useSingleColor==false){
            float dp1 = compareDepth( vUv + uvOffset.xy);
            float dp2 = compareDepth( vUv - uvOffset.xy);
            float dp3 = compareDepth( vUv + uvOffset.yw);
            float dp4 = compareDepth( vUv - uvOffset.yw);

            float a1 = min(dp1, dp2);
            float a2 = min(dp3, dp4);
            float visibilityFactor = min(a1, a2);
            vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;

            // out_FragColor =color+ vec4( edgeColor , 1. ) * vec4(d);
            out_FragColor = vec4( edgeColor , 1. ) * vec4(d);
        }else{
            // out_FragColor =color+ vec4( visibleEdgeColor , 1. ) * vec4(d);
            out_FragColor =  vec4( visibleEdgeColor , 1. ) * vec4(d);
        }
    }
    `,"lowerLatitude","_isBindTileVisible","NARROW","polygonStyleConver","gridNodeCount","toDate","fa fa-sort-amount-desc","symbol","Primitive","entitys","GlobeSurfaceTileProvider","getCache","#D33038","horizontal","_mousMiddleDownHandler","图片加载失败：","fadeFactor","MathDistance",'" in afterquote yet, index ',"_fillColor","_reflectorProjectionMatrix","修改宽度(Y方向)","_hasResetEnableLighting","arrLayer","_graphic","hasEmptyGroup","0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}","billboardP","no_rot","removeNullData","pageSize","_on","terrainProvider","editing","_objectsToExclude_auto","objectsToExclude","ondblclick","dhEvent","getGraphics","tooltip","请确认高度是非零数值！","clientX","_createWellWall","usePreCachedTilesIfAvailable",`in vec3 position;
out vec3 v_texCoord;
uniform mat3 u_rotateMatrix;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`,"isInRange",`#ifdef GL_ES
precision mediump float;
#endif
uniform sampler2D mars_image;
uniform vec2 mars_distanceDisplayCondition;
uniform vec3 mars_positionWC;
in vec3 v_worldPos;
in vec2 v_st;
uniform float globalAlpha;

void main() {
  float dis = distance(mars_positionWC, v_worldPos);
  if(dis < mars_distanceDisplayCondition.x || dis > mars_distanceDisplayCondition.y) {
    discard;
  } else {
    vec4 color = texture(mars_image, v_st);
    color.a *= globalAlpha;

    // Fully transparent parts of the billboard are not pickable.
    #if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if(color.a < 0.005)   // matches 0/255 and 1/255
    {
      discard;
    }
    #else
    // The billboard is rendered twice. The opaque pass discards translucent fragments
    // and the translucent pass discards opaque fragments.
    #ifdef OPAQUE
    if(color.a < 0.995)   // matches < 254/255
    {
      discard;
    }
    #else
    if(color.a >= 0.995)  // matches 254/255 and 255/255
    {
      discard;
    }
    #endif
    #endif

    out_FragColor = color;

  }
}
`,"the_geom","drawStart","geocent","圖上量算","output","onDragEnd","_pickCommands","Request aborted","_单击完成绘制","key","_splitOptionsToStyle","fogEffect","inited","tilingScheme","http://www.w3.org/2000/svg","rotateUp","addSample","uplift","mill","nodeValue","reflectionWater","arcFrustum","showLateralSurfaces","eqc","bidirectional","saturation","ECONNABORTED","getColumn","glowWidth","getLayer","_currDistance","rightDown","equalsEpsilon","keyword","双指按相同方向拖动","clock","requestWaterMask","endFrame","offsetWidth","ChinaCRS","Lat","_isMouseUpdownPressed","</textarea>","getCoordinates","Name","RuntimeError","ScreenSpaceEventHandler","ml0","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","rgba(140,0,58,0.99)","currentTime","glowOnly","Soviet Geodetic System 85","該對象不允許編輯","PostProcessStage","PINCH","private","autoClose","_planeAngle"];return _0x3c2a=function(){return n},_0x3c2a()}register$2(layerType$7,TdtLayer),registerImageryProvider(layerType$7,createImageryProvider$7);class TencentLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$6(e)}}async function createImageryProvider$6(n){return n.chinaCRS=n.chinaCRS||ChinaCRS.GCJ02,n=converOptions(n),new TencentImageryProvider(n)}TencentLayer.createImageryProvider=createImageryProvider$6;const layerType$6="tencent";register$2(layerType$6,TencentLayer),registerImageryProvider(layerType$6,createImageryProvider$6);class TmsLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$5(e)}}async function createImageryProvider$5(n){const e={_0x35e81d:3054},t=_0x2397ca;return n=converOptions(n),!n[t(914)]&&(n.url=Cesium__namespace.buildModuleUrl(t(e._0x35e81d))),await Cesium__namespace.TileMapServiceImageryProvider.fromUrl(n.url,n)}TmsLayer[_0x2397ca(1855)]=createImageryProvider$5;const layerType$5=_0x2397ca(2454);register$2(layerType$5,TmsLayer),registerImageryProvider(layerType$5,createImageryProvider$5);class WmsLayer extends BaseTileLayer{_addedHook(){const e={_0x7cc5ca:2174},t=_0x2397ca;this.options.getCapabilities??!0?this[t(e._0x7cc5ca)]().then(()=>{super._addedHook()}):super._addedHook()}async[_0x2397ca(573)](e){return await createImageryProvider$4(e)}getMetadata(){const e={_0xde6b42:3973,_0x1979d7:3044},t={_0x4762f2:1788};return new Promise((x,i)=>{const s=_0x3361;if(this.capabilities){x(this.capabilities);return}const o={service:"WMS",request:"GetCapabilities",version:s(e._0xde6b42)};let r=this[s(3044)][s(914)];this[s(e._0x1979d7)].templateValues&&(r=template(r,this.options.templateValues)),Cesium__namespace.Resource.fetchXML({...this.options,url:r,queryParameters:o,proxy:this[s(2137)]}).then(c=>{const _=s;if(!this.isDestroy){if(c){this.capabilities=c;try{this[_(203)](c)}catch(l){logInfo("WMS 解析GetCapabilities有误",l)}}x(c),this[_(t._0x4762f2)](EventType[_(255)],{capabilities:c})}})[s(2443)](c=>{logInfo("WMS getMetadata请求出错",c),x(c)})})}_initByMetaData(e){const t={_0x3edc49:884,_0x193d81:524,_0x539154:3712,_0x4a070e:3044,_0x2bca9c:3137,_0x44b406:855,_0x47952e:822},x=_0x2397ca;let i=this.options.layers;i[x(t._0x3edc49)](":")!==-1&&(i=i.split(":")[1]);const s=this._readChildNode(e,"Layer");if(!s)return;const o=this[x(t._0x193d81)](s,"Layer");if(o)for(let r=0,c=o.length;r<c;r++){const _=o[r],l=this._readChildNodeVal(_,x(t._0x539154)),h=this._readChildNodeVal(_,"Title");if(l===i||h===i){const d=this._readChildNodeVal(_,x(970));!this[x(t._0x4a070e)][x(t._0x2bca9c)]&&d&&(this.options[x(t._0x2bca9c)]=d);const u=this._readChildNode(_,"BoundingBox");if(!this.options.rectangle&&u){const m=Math.max(Number(u.getAttribute("minx")),-180),f=Math[x(3173)](Number(u.getAttribute("maxx")),180),g=Math.max(Number(u[x(2310)]("miny")),-85),b=Math[x(3173)](Number(u.getAttribute("maxy")),85);if(isNaN(m)||isNaN(f)||isNaN(g)||isNaN(b))break;const y={xmin:m,ymin:g,xmax:f,ymax:b};console[x(t._0x44b406)](x(t._0x47952e),y),this.options.extent=y,this[x(1784)]=Cesium__namespace[x(3520)].fromDegrees(y.xmin,y.ymin,y.xmax,y.ymax)}break}}}_readNode(e,t){if(!e)return null;let x=e.getElementsByTagName(t);return(!x||x.length===0)&&(x=e.getElementsByTagName("wms:"+t)),x}_readChildNode(e,t){if(!e)return null;const x=this._readNode(e,t);return x.length>0?x[0]:null}_readChildNodeVal(e,t){const x={_0x1b7df7:3103},i=_0x2397ca;var s,o;if(!e)return null;let r=this._readChildNode(e,t);return!r&&(r=this._readChildNode(e,i(x._0x1b7df7)+t)),(s=r)!==null&&s!==void 0&&s.innerHTML?r.innerHTML:(o=r)!==null&&o!==void 0&&o[i(3258)]?r.getInnerHTML():null}[_0x2397ca(2070)](){return!!this._popupConfig}bindPopup(e,t){const x=_0x2397ca;return this._popupConfig={content:e,options:t,layer:this},this[x(2076)](),this}[_0x2397ca(1930)](){return this.closePopup(),this._popupConfig=null,this}[_0x2397ca(1673)](){const e=_0x2397ca;return this._map&&this.hasPopup()&&this._map.popup[e(810)](null,this),this}}async function createImageryProvider$4(n){return n=converOptions(n),new Cesium__namespace.WebMapServiceImageryProvider(n)}WmsLayer.createImageryProvider=createImageryProvider$4;const layerType$4="wms";register$2(layerType$4,WmsLayer),registerImageryProvider(layerType$4,createImageryProvider$4);class WmtsLayer extends BaseTileLayer{_addedHook(){this.options.getCapabilities??!0?this.getMetadata().then(()=>{super._addedHook()}):super._addedHook()}async _createImageryProvider(e){const t={_0x589e1b:900},x=await createImageryProvider$3(e);return e.pickFeatures?x.pickFeatures=e.pickFeatures:e.pickFeaturesUrl&&(x.pickFeatures=(i,s,o,r,c)=>this[_0x3361(t._0x589e1b)](i,s,o,r,c)),x}pickFeatures(e,t,x,i,s){const o={_0xbb231f:1391,_0x8489f6:778,_0x16649d:489,_0x209cd9:3681,_0x41b1ad:518,_0x2f6982:1344,_0x5b2023:595,_0x32995c:3915,_0x186bd6:1870,_0x241b54:595,_0xb70173:3044,_0x469d3d:2137},r={_0x2c0944:263,_0x5d7b45:639,_0x37d268:968,_0x440f11:1899,_0x2c162c:2434},c=_0x2397ca;var _;if(!this.options.enablePickFeatures)return;const l=this.imageryProvider,h=new Cesium__namespace[c(295)];if(l[c(3681)][c(o._0xbb231f)]instanceof Cesium__namespace[c(3488)])h.x=Cesium__namespace.Math[c(o._0x8489f6)](i),h.y=Cesium__namespace.Math[c(778)](s);else{const f=new Cesium__namespace.Cartographic;f.longitude=i,f[c(o._0x16649d)]=s,l[c(o._0x209cd9)].projection.project(f,h)}const d=new Cesium__namespace[c(o._0x41b1ad)],u=l.tilingScheme.tileXYToNativeRectangle(e,t,x,new Cesium__namespace.Rectangle);d.x=l[c(4016)]*(h.x-u[c(o._0x2f6982)])/u[c(1526)]|0,d.y=l[c(o._0x5b2023)]*(u.north-h.y)/u.height|0;const m={...this.options.getFeatureInfoParameters||{},service:c(o._0x32995c),version:"1.1.1",request:"GetFeatureInfo",layers:this.options.layer,query_layers:this.options.layer,info_format:"application/json",srs:this.options.crs??(((_=this.options.tilingScheme)===null||_===void 0?void 0:_.projection)instanceof Cesium__namespace[c(o._0x186bd6)]?"EPSG:3857":c(3072)),bbox:u.west+","+u.south+","+u[c(2999)]+","+u.north,width:l.tileWidth,height:l[c(o._0x241b54)],x:d.x,y:d.y};return fetchJson({...this.options,url:this[c(o._0xb70173)].pickFeaturesUrl,queryParameters:m,proxy:this[c(o._0x469d3d)]}).then(f=>{const g=c,b=[],y=f.features;for(let C=0;C<y[g(2027)];++C){const v=y[C],M=new Cesium__namespace[g(2892)];if(M.data=v,M.properties=v.properties,M.configureNameFromProperties(v[g(r._0x2c0944)]),M.configureDescriptionFromProperties(v.properties),Cesium__namespace[g(r._0x5d7b45)](v.geometry)&&v.geometry[g(r._0x37d268)]==="Point"){const w=v.geometry.coordinates[0],H=v.geometry.coordinates[1];M.position=Cesium__namespace[g(r._0x440f11)].fromDegrees(w,H)}b[g(r._0x2c162c)](M)}return b})}[_0x2397ca(2174)](){const e={_0x4b8047:2343};return new Promise((t,x)=>{const i=_0x3361;if(this.capabilities){t(this[i(2106)]);return}const s={service:"WMTS",request:"GetCapabilities",version:"1.0.0"};Cesium__namespace[i(740)][i(e._0x4b8047)]({...this[i(3044)],queryParameters:s,proxy:this[i(2137)]})[i(1286)](o=>{const r=i;if(!this.isDestroy){if(o){this.capabilities=o;try{this[r(203)](o)}catch(c){logInfo("解析GetCapabilities出错",c)}}t(o),this.fire(EventType.loadConfig,{capabilities:o})}}).catch(o=>{logInfo("WMTS GetCapabilities请求出错",o),t(o)})})}_initByMetaData(e){const t={_0x4dd2ba:2250,_0x23de50:3044,_0x269ac5:2250,_0x4ac9c0:2956,_0x525c18:1784,_0x28d2b0:1383,_0x3a80a6:242,_0x497354:639,_0x5b6866:1824,_0x5a603a:825,_0x32b3bc:2434},x=_0x2397ca,i=this[x(t._0x4dd2ba)](e,"Contents");if(!i)return;const s=this._readNode(i,x(1433));if(s)for(let o=0,r=s.length;o<r;o++){const c=s[o];if(this._readChildNodeVal(c,x(3747))===this[x(t._0x23de50)].layer){const l=this[x(t._0x269ac5)](c,"ows:WGS84BoundingBox");if(!this.options[x(1358)]&&l){let d=this._readChildNodeVal(l,"ows:LowerCorner"),u=this._readChildNodeVal(l,"ows:UpperCorner");if(d&&u){d=d[x(t._0x4ac9c0)](" "),u=u.split(" ");const m=Math.max(Number(d[0]),-180),f=Math.min(Number(u[0]),180),g=Math.max(Number(d[1]),-85),b=Math.min(Number(u[1]),85),y={xmin:m,ymin:g,xmax:f,ymax:b};this[x(t._0x23de50)].extent=y,this[x(t._0x525c18)]=Cesium__namespace.Rectangle.fromDegrees(y[x(t._0x28d2b0)],y[x(t._0x3a80a6)],y.xmax,y.ymax)}}!Cesium__namespace.defined(this.options.style)&&(this[x(3044)].style=this._readChildNodeVal(this[x(2250)](c,"Style"),"ows:Identifier"));const h=c.getElementsByTagName("TileMatrixSetLink");for(let d=0,u=h.length;d<u;d++){const m=h[d],f=this._readChildNodeVal(m,"TileMatrixSet");if(!Cesium__namespace[x(t._0x497354)](this.options.tileMatrixSetID)&&(this[x(3044)].tileMatrixSetID=f),f===this.options[x(t._0x5b6866)]){if(!this[x(t._0x23de50)].tileMatrixLabels){const g=this._readChildNode(m,x(1409));if(g){const b=g[x(t._0x5a603a)](x(3176)),y=[];for(let C=0,v=b.length;C<v;C++){const M=this[x(469)](b[C],"TileMatrix");y[x(t._0x32b3bc)](M)}this.options.tileMatrixLabels=y}}break}}break}}}_readNode(e,t){const x={_0x34a635:825,_0x1c99f2:2027},i=_0x2397ca;if(!e)return null;let s=e[i(x._0x34a635)](t);return(!s||s[i(x._0x1c99f2)]===0)&&(s=e.getElementsByTagName("wmts:"+t)),s}_readChildNode(e,t){const x={_0x566acd:524,_0x1f245c:2027},i=_0x2397ca;if(!e)return null;const s=this[i(x._0x566acd)](e,t);return s[i(x._0x1f245c)]>0?s[0]:null}_readChildNodeVal(e,t){const x={_0x594249:3437,_0x47a049:3258},i=_0x2397ca;var s,o;if(!e)return null;let r=this[i(2250)](e,t);return!r&&(r=this[i(2250)](e,"wmts:"+t)),(s=r)!==null&&s!==void 0&&s.innerHTML?r[i(x._0x594249)]:(o=r)!==null&&o!==void 0&&o[i(x._0x47a049)]?r[i(3258)]():null}}async function createImageryProvider$3(n){const e=_0x2397ca;return n=converOptions(n),n.crs===CRS[e(1416)]&&(n[e(1377)]=[...Array(20).keys()].map(t=>(t+1).toString())),new Cesium__namespace.WebMapTileServiceImageryProvider(n)}WmtsLayer.createImageryProvider=createImageryProvider$3;const layerType$3=_0x2397ca(2188);register$2(layerType$3,WmtsLayer),registerImageryProvider(layerType$3,createImageryProvider$3);class XyzLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$2(e)}}async function createImageryProvider$2(n){return n=converOptions(n),n.chinaCRS===ChinaCRS.BAIDU?new BaiduImageryProvider(n):new XyzImageryProvider$1(n)}XyzLayer[_0x2397ca(1855)]=createImageryProvider$2;const layerType$2="xyz";register$2(layerType$2,XyzLayer),registerImageryProvider(layerType$2,createImageryProvider$2);class GridLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$1(e)}}async function createImageryProvider$1(n){const e={_0x643665:2873,_0x3cf298:3696,_0x5ba0ec:2484,_0x4886e9:396},t=_0x2397ca;return n.cells=n[t(1204)]??2,n.color=Cesium__namespace[t(2134)].fromCssColorString(n.color??t(e._0x643665)),n[t(e._0x3cf298)]=n.glowWidth??3,n.glowColor?n.glowColor=Cesium__namespace.Color.fromCssColorString(n.glowColor):n[t(e._0x5ba0ec)]=n.color[t(e._0x4886e9)](.3),n.backgroundColor=Cesium__namespace.Color.fromCssColorString(n.backgroundColor??"rgba(0,0,0,0)"),n=converOptions(n),new Cesium__namespace.GridImageryProvider(n)}GridLayer[_0x2397ca(1855)]=createImageryProvider$1;const layerType$1="grid";register$2(layerType$1,GridLayer),registerImageryProvider(layerType$1,createImageryProvider$1);class TileInfoLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider(e)}}async function createImageryProvider(n){const e={_0x2fd941:1053,_0x30b7ca:3916,_0x43cf2f:1475},t=_0x2397ca;return n[t(1089)]=Cesium__namespace.Color[t(e._0x2fd941)](n.color||t(e._0x30b7ca)),n=converOptions(n),new Cesium__namespace[t(e._0x43cf2f)](n)}TileInfoLayer.createImageryProvider=createImageryProvider;const layerType="tileinfo";register$2(layerType,TileInfoLayer),registerImageryProvider(layerType,createImageryProvider);class EmptyTileLayer extends BaseTileLayer{constructor(e={}){const t={_0x259a92:602},x=_0x2397ca;super(e),this[x(833)]=e[x(2218)]??0,this[x(t._0x259a92)]=e.maximumLevel}async _createImageryProvider(e){const t={_0x2106b9:3100},x=_0x2397ca;return e=converOptions(e),e[x(t._0x2106b9)]=this[x(833)],e.maximumTerrainLevel=this._maximumLevel,new EmptyImageryProvider(e)}_setOptionsHook(e,t){const x={_0x695e4d:3044},i=_0x2397ca;this._minimumLevel=this.options.minimumLevel??0,this._maximumLevel=this.options.maximumLevel,this[i(x._0x695e4d)].minimumTerrainLevel=this._minimumLevel,this.options.maximumTerrainLevel=this._maximumLevel,super._setOptionsHook(e,t)}isInRange(e){const t={_0x2a194e:558,_0x1caf4f:2453,_0x2632ff:833,_0x3a638a:602},x=_0x2397ca,i=this[x(t._0x2a194e)][x(t._0x1caf4f)];return!(e<this[x(t._0x2632ff)]||e<i-1||Cesium__namespace.defined(this[x(t._0x3a638a)])&&e>=this[x(602)])}[_0x2397ca(1191)](e){const t=_0x2397ca;return this._map[t(2453)]<this._minimumLevel||Cesium__namespace.defined(this._maximumLevel)&&e>=this._maximumLevel}}new Cesium__namespace.Color(0,0,0,.01);function config2Entity(n,e,t){const x={_0x349907:2027},i=_0x2397ca;for(let s=n[i(x._0x349907)]-1;s>=0;s--){const o=n[s],r=e.symbol;r&&(typeof r=="function"?r(o,o._attr):setConfigSymbol(o,e,t))}return n}function getStyleBySymbolConfig(n,e,t){const x={_0xba6625:2119},i=_0x2397ca;let s=n.styleOptions;if(n[i(x._0xba6625)]&&e){const o=e[n.styleField],r=n.styleFieldOptions[o];r!=null&&(s=clone(s),s={...s,...r})}if(typeof n.callback=="function"){s=clone(s);const o=n.callback(e,t,s);o&&(s={...s,...o})}return s=s||{},s}function setConfigSymbol(n,e,t){const x={_0x5e1ed5:1578,_0x232388:392,_0x129499:4010,_0x59915a:3209,_0x4d77f9:1091,_0x1e8fdb:565,_0x59bc29:743,_0x2395fc:2027,_0xb7993d:3102,_0x149bad:3161,_0x222f96:2913,_0x35f9f2:209,_0x254ea0:2397,_0x3adc12:2868,_0x237a66:2027,_0x376b4c:565,_0x3585ca:2913,_0x550d30:3170,_0x24e11a:3102,_0x1de94f:3609,_0xf3d6e7:3102,_0x1690a0:3161,_0x1ab6d8:3102},i=_0x2397ca;let s=n._attr;s&&s.type&&s.attr&&(s=s[i(x._0x5e1ed5)]);const o=n.entityCollection,r=getStyleBySymbolConfig(e.symbol,s,n);function c(l,h,d){const u=i;return h.text===""?null:(Cesium__namespace.defined(h.height)&&(l=setPositionsHeight(l,h[u(3872)])),o[u(565)]({position:l,label:h,_attr:d}))}if(t=t||c,n[i(x._0x232388)]){if(PolylineStyleConver.toCesiumVal(r,n.polyline,!0),r.corridor){const l={color:r.color,opacity:r[i(x._0x129499)],...r[i(873)]};if(isString(r.corridor.width)&&(l.width=template(r.corridor.width,s)),n[i(x._0x59915a)])CorridorStyleConver.toCesiumVal(l,n[i(3209)].corridor,!0);else{const h=CorridorStyleConver[i(2868)](l,{},!0);h[i(x._0x4d77f9)]=getCesiumValue(n[i(x._0x232388)].positions);const d=o[i(x._0x1e8fdb)]({corridor:h,_attr:s});d._mars3d_layerId=e.id,n._corridorEx=d}}if(r.label&&r.label[i(484)])if(n._labelEx)LabelStyleConver.toCesiumVal(r.label,n._labelEx[i(x._0x59bc29)],s);else{const l=getCesiumValue(n.polyline.positions);let h=l[Math.floor(l[i(x._0x2395fc)]/2)];r.label.position&&(r.label.position==="center"?h=centerOfMass(l,r.label.height):isNumber(r[i(743)].position)&&(h=l[r.label.position]));const d=LabelStyleConver.toCesiumVal(r.label,{},s);d.heightReference=d[i(x._0xb7993d)]??Cesium__namespace[i(x._0x149bad)][i(x._0x222f96)];const u=t(h,d,s);u&&(u._mars3d_layerId=e.id),n._labelEx=u}}if(n.polygon){var _;if(PolygonStyleConver[i(2868)](r,n.polygon,!0),r.outline&&(r[i(1724)]>1||((_=r.outlineStyle)===null||_===void 0?void 0:_.width)>1)){n.polygon.outline=!1;const l={...r,outline:!1,color:r[i(x._0x35f9f2)],width:r.outlineWidth,opacity:r.outlineOpacity,...r.outlineStyle};if(n[i(x._0x254ea0)])for(let h=0,d=n._outlineEx.length;h<d;h++)PolylineStyleConver[i(x._0x3adc12)](l,n._outlineEx[h].polyline,!0);else{const h=getAllPositions(n);n._outlineEx=[];for(let d=0,u=h[i(x._0x237a66)];d<u;d++){const m=PolylineStyleConver.toCesiumVal(l,{},!0);m.positions=h[d];const f=o[i(x._0x376b4c)]({polyline:m,_attr:s});f._mars3d_layerId=e.id,n._outlineEx.push(f)}}}if(r[i(743)]&&r[i(743)].text)if(n._labelEx)LabelStyleConver.toCesiumVal(r.label,n._labelEx.label,s);else{const l=centerOfMass(getPositions(n),r.label[i(3872)]),h=LabelStyleConver[i(x._0x3adc12)](r.label,{},s);h[i(3102)]=h.heightReference??Cesium__namespace[i(3161)][i(x._0x3585ca)];const d=t(l,h,s);d&&(d[i(x._0x550d30)]=e.id),n._labelEx=d}}if(n.label?(r.label=r.label||r||{},!Cesium__namespace.defined(r.label[i(1034)])&&!Cesium__namespace[i(639)](r.label[i(x._0xb7993d)])&&(r.label.heightReference=r.label[i(x._0xb7993d)]??Cesium__namespace.HeightReference[i(x._0x3585ca)]),LabelStyleConver.toCesiumVal(r.label,n.label,s)):r.label&&typeof r.label=="function"&&r.label(n,s,function(l,h){const d=LabelStyleConver.toCesiumVal(h,{},s);d.heightReference=(d.heightReference,Cesium__namespace.HeightReference.CLAMP_TO_GROUND);const u=t(l,d,s);u&&(u._mars3d_layerId=e.id)}),n.billboard){if(!Cesium__namespace.defined(r.clampToGround)&&!Cesium__namespace.defined(r[i(x._0x24e11a)])&&(r[i(3102)]=r[i(3102)]??Cesium__namespace.HeightReference.CLAMP_TO_GROUND),r.image=template(r.image,s),BillboardStyleConver.toCesiumVal(r,n.billboard,!0),r.model)if(n[i(x._0x1de94f)])ModelStyleConver.toCesiumVal(r.model,n._modelEx[i(1243)],!0);else{const l=ModelStyleConver.toCesiumVal(r.model,!0);l[i(x._0xf3d6e7)]=(l.heightReference,Cesium__namespace[i(x._0x1690a0)].CLAMP_TO_GROUND);const h=o.add({position:n[i(760)],model:l,_attr:s});h._mars3d_layerId=e.id,n._modelEx=h}if(r.point)if(n._pointEx)PointStyleConver.toCesiumVal(r.point,n._pointEx.point,!0);else{const l=PointStyleConver[i(x._0x3adc12)](r.point,{},!0);l.heightReference=l.heightReference??Cesium__namespace.HeightReference[i(2913)];const h=o.add({position:n.position,point:l,_attr:s});h._mars3d_layerId=e.id,n[i(2361)]=h}if(r.label&&r.label.text&&!n.label)if(n._labelEx)LabelStyleConver.toCesiumVal(r.label,n._labelEx.label,s);else{const l=n.position,h=LabelStyleConver.toCesiumVal(r.label,{},s);h[i(x._0x1ab6d8)]=h.heightReference??Cesium__namespace.HeightReference.CLAMP_TO_GROUND;const d=t(l,h,s);d&&(d._mars3d_layerId=e.id),n[i(2340)]=d}}n.styleOpt=r}class CzmGeoJsonLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x2397ca;super(e),this[t(3535)](e,e)}get[_0x2397ca(2407)](){return this._dataSource}get[_0x2397ca(3998)](){const e=_0x2397ca;return this._dataSource?this[e(2132)].entities:null}get labelCollection(){return!this._labelCollection&&(this._labelCollection=new Cesium__namespace.LabelCollection({scene:this._map.scene}),this._state===State.ADDED&&this._map.scene.primitives.add(this._labelCollection)),this._labelCollection}get hasZIndex(){return!0}get[_0x2397ca(952)](){const e=_0x2397ca;return this.options[e(952)]}set zIndex(e){const t={_0x38598a:2193,_0x59a051:2132,_0x1f33e3:952},x=_0x2397ca;if(this.options.zIndex=e,this._dataSource==null||e==null||!this._map[x(t._0x38598a)].contains(this._dataSource))return;this._dataSource.zIndex=e,this._map[x(2193)].raiseToTop(this[x(2132)]);const i=this._map.dataSources;for(let s=i[x(2027)]-1;s>=0;s--){const o=i.get(s);o!==this[x(t._0x59a051)]&&Cesium__namespace.defined(o[x(t._0x1f33e3)])&&e<o.zIndex&&this._map[x(2193)].lower(this._dataSource)}}get[_0x2397ca(1034)](){const e={_0x3109b3:1034,_0x3802af:3628,_0x29805b:1728,_0x272c54:3628},t=_0x2397ca;return!!(this.options[t(e._0x3109b3)]||this.options.symbol&&this.options[t(e._0x3802af)][t(e._0x29805b)]&&this.options[t(e._0x272c54)][t(1728)].clampToGround)}_setOptionsHook(e,t){const x={_0x1efb55:3628,_0x417344:3044,_0x4f6bb0:1034,_0x41fdb3:241,_0xddfd2d:209,_0x49c763:1053,_0x29ad8c:168},i=_0x2397ca;var s;if(super._setOptionsHook(e,t),(s=this[i(3044)][i(x._0x1efb55)])!==null&&s!==void 0&&s.styleOptions){const o=this.options.symbol.styleOptions;if(Cesium__namespace.defined(o.clampToGround)&&(this[i(x._0x417344)].clampToGround=o[i(x._0x4f6bb0)]),Cesium__namespace.defined(o.color)){const r=Cesium__namespace.Color.fromCssColorString(o[i(1089)]??"#FFFF00").withAlpha(Number(o.opacity??.5));this.options[i(x._0x41fdb3)]=r}if(Cesium__namespace.defined(o[i(x._0xddfd2d)])){const r=Cesium__namespace.Color[i(x._0x49c763)](o.outlineColor??o.color??i(391)).withAlpha(o[i(x._0x29ad8c)]??(o.opacity,1));this.options.stroke=r}Cesium__namespace.defined(o.outlineWidth)&&(this.options.strokeWidth=o.outlineWidth)}}_showHook(e){super._showHook(e),this._labelCollection&&(this._labelCollection.show=e)}_mountedHook(){super._mountedHook(),this.load()}_addedHook(){const e=_0x2397ca;super._addedHook(),this[e(2132)]&&this._map.dataSources.add(this._dataSource),this[e(3616)]&&this[e(558)].scene.primitives.add(this[e(3616)])}[_0x2397ca(380)](){const e={_0x46fd43:3616,_0x3613a9:2193},t=_0x2397ca;super[t(380)](),this._labelCollection&&(this._map.scene.primitives.remove(this._labelCollection),this[t(e._0x46fd43)]=null),this._dataSource&&this._map[t(e._0x3613a9)].remove(this[t(2132)])}flyTo(e){const t={_0x111a12:2006,_0x38cd0e:558,_0x263cea:2907,_0x4fece9:2132,_0x53e4f8:1795},x=_0x2397ca;return this._map?(this._map.cancelFlyTo(),this.options[x(t._0x111a12)]?this[x(t._0x38cd0e)].setCameraView(this[x(3044)][x(2006)],e):this.options[x(t._0x263cea)]?this._map.flyToExtent(this[x(3044)].extent,e):this[x(t._0x4fece9)]?this[x(558)][x(t._0x53e4f8)].flyTo(this._dataSource,e):Promise.resolve(!1)):Promise.resolve(!1)}[_0x2397ca(759)](e){const t={_0x2659b0:914,_0x5d954a:2137,_0x3a3460:1286,_0x45c874:3044},x={_0xdaea7c:2473},i=_0x2397ca;return e&&((e.clear??!0)&&(delete this.options[i(t._0x2659b0)],delete this.options.data),this.clear(),this.options={...this.options,...e}),this.options.url?fetchJson({...this[i(3044)],proxy:this[i(t._0x5d954a)]})[i(t._0x3a3460)](s=>{const o=i;!this._map||!this.isAdded||this[o(x._0xdaea7c)](s)}).catch(s=>{const o=i;var r;logError$1("fetchJson出错了",s),(r=this[o(2276)])!==null&&r!==void 0&&r.reject&&this._readyPromise.reject(s)}):this.options.data?this._load_data(this[i(t._0x45c874)].data):e&&logWarn("CzmGeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。"),this}_load_data(e){const t={_0x7b21e6:1735},x=_0x2397ca;this[x(3044)].format&&(e=this[x(3044)][x(1767)](e)),Cesium__namespace[x(t._0x7b21e6)].load(e,this.options).then(s=>{this.showResult(s)})}[_0x2397ca(2079)](e){const t={_0x46b9bb:2132,_0x240666:3482,_0x15297d:2732},x=_0x2397ca;if(this._dataSource&&(this._map.dataSources.remove(this._dataSource),delete this[x(t._0x46b9bb)]),!e||this._state===State[x(1225)])return;e.show=this[x(t._0x240666)],this._map.dataSources.add(e),this._readyPromise.resolve(this),this._dataSource=e,this[x(3044)].zIndex&&(this.zIndex=this.options.zIndex);const i=e[x(3998)].values,s=this.bindEntities(i);this._opacity!==1&&this[x(t._0x15297d)](this._opacity),this.options.flyTo&&this.flyToByAnimationEnd(),this.fire(EventType.load,{dataSource:e,entities:i,list:s})}[_0x2397ca(461)](e){const t={_0x25feae:340,_0x1e90b5:3044},x=_0x2397ca,i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];r._mars3d_layerId=this.id;const c=this.getEntityAttr(r);r._attr=c||{},this.fire(EventType[x(t._0x25feae)],{czmObject:r,attr:c}),i[x(2434)]({...c,_entity:r})}return this[x(t._0x1e90b5)].id=this.id,config2Entity(e,this[x(3044)],(s,o,r)=>this.lblAddFun(s,o,r)),i}[_0x2397ca(2072)](e){const t={_0x271e10:3044,_0x272aed:3998},x=_0x2397ca;if(!this._dataSource)return;e&&(this[x(t._0x271e10)].symbol={...this.options.symbol,...e});const i=this._dataSource[x(t._0x272aed)].values;return this[x(3044)].id=this.id,config2Entity(i,this.options,(s,o,r)=>this.lblAddFun(s,o,r)),this}[_0x2397ca(2627)](e,t,x){const i={_0x53754a:3872,_0x378c79:1187,_0x1ab061:760,_0x108506:263,_0x58c3ca:3170},s=_0x2397ca;if(t[s(484)]==="")return null;Cesium__namespace.defined(t[s(i._0x53754a)])&&(e=setPositionsHeight(e,t.height)),!this.labelCollection&&(this[s(613)]=new Cesium__namespace.LabelCollection({scene:this.viewer.scene}),this.viewer.scene[s(i._0x378c79)].add(this.labelCollection)),t[s(i._0x1ab061)]=getPositionValue(e);const o=this.labelCollection.add(t);return o[s(i._0x108506)]=x,o[s(i._0x58c3ca)]=this.id,o}[_0x2397ca(2732)](e){const t={_0x1ed013:2027,_0x3ff0b9:3977,_0x3dc42f:1089,_0x4fbdfa:209,_0x4e7891:996,_0x269be6:392,_0x3253cc:3816,_0x120041:824,_0x5bb6eb:1243,_0x211304:2134,_0x14de96:2601,_0x10e65e:743},x=_0x2397ca;if(this[x(996)]=e,!this._dataSource)return;const i=this[x(2132)].entities.values;for(let s=0,o=i[x(t._0x1ed013)];s<o;s++){const r=i[s];if(r.polygon&&r.polygon.material&&r[x(t._0x3ff0b9)].material[x(t._0x3dc42f)]&&(this[x(2601)](r.polygon.material.color,this[x(996)]),r.polygon[x(t._0x4fbdfa)]&&this[x(2601)](r.polygon.outlineColor,this[x(t._0x4e7891)])),r[x(t._0x269be6)]&&r.polyline[x(3816)]&&r[x(392)].material.color&&this._updatEntityAlpha(r.polyline[x(t._0x3253cc)].color,this[x(996)]),r[x(824)]&&(r[x(t._0x120041)][x(t._0x3dc42f)]=Cesium__namespace.Color.WHITE.withAlpha(this._opacity)),r[x(t._0x5bb6eb)]&&(r.model.color=Cesium__namespace[x(t._0x211304)][x(3970)].withAlpha(this._opacity)),r.label){let c=this._opacity;r.styleOpt&&r.styleOpt[x(743)]&&r.styleOpt[x(743)].opacity&&(c=r.styleOpt.label.opacity),r[x(743)][x(1102)]&&this[x(2601)](r.label.fillColor,c),r[x(743)].outlineColor&&this[x(t._0x14de96)](r.label[x(t._0x4fbdfa)],c),r.label.backgroundColor&&this._updatEntityAlpha(r[x(t._0x10e65e)][x(2238)],c)}}}[_0x2397ca(2601)](e,t){const x={_0x41c09c:396},i=_0x2397ca;if(!e)return;let s=getCesiumValue(e,Cesium__namespace.Color,this._map.clock.currentTime);if(!s||!s.withAlpha)return e;s=s[i(x._0x41c09c)](t),e.setValue(s)}[_0x2397ca(3361)](e){return getAttrVal(e[_0x2397ca({_0x227c47:263}._0x227c47)])}[_0x2397ca(2265)](){const e={_0x4ac665:1859,_0x25012b:2132,_0x6b393c:3998},t=_0x2397ca;return this._labelCollection&&this._labelCollection[t(e._0x4ac665)](),this[t(e._0x25012b)]&&this._dataSource[t(e._0x6b393c)].removeAll(),this._closeAllControl(),this}process(e,t){const x={_0x494722:2132,_0x407dec:2693},i={_0xfdc7d:461};return this.readyPromise.then(s=>{const o=_0x3361;return this[o(x._0x494722)][o(x._0x407dec)](e,t).then(c=>{const _=o,l=c.entities.values,h=this[_(i._0xfdc7d)](l);return{entities:l,list:h}})})}}register$2(_0x2397ca(2229),CzmGeoJsonLayer);class KmlLayer extends CzmGeoJsonLayer{load(e={}){const t={_0x5c50c8:3044,_0x51c818:3044,_0x5bc21c:3400,_0x31fb6a:2069,_0x24d8cc:2295},x=_0x2397ca;this[x(3044)]={...this[x(t._0x5c50c8)],...e};let i;if(this.options.url){const s=getUrlResource(this[x(t._0x51c818)]);i=Cesium__namespace[x(3812)][x(759)](s,{camera:this._map.scene[x(t._0x5bc21c)],canvas:this._map.scene.canvas,clampToGround:this.options.clampToGround})}else this[x(t._0x51c818)][x(2069)]&&(i=Cesium__namespace.KmlDataSource.load(this.options[x(t._0x31fb6a)],{camera:this._map.scene.camera,canvas:this._map.scene.canvas,clampToGround:this.options.clampToGround}),logError$1(x(t._0x24d8cc)));i.then(s=>{this.showResult(s)})}getEntityAttr(e){const t={_0x43a537:2365,_0x21681d:3734},x=_0x2397ca;let i={name:e.name,description:e[x(t._0x43a537)]};const s=e._kml[x(t._0x21681d)];for(const o in s)i[o]=s[o].value;return i=getAttrVal(i),i.description&&(i.description=i.description.replace(/<div[^>]+>/g,"")),i}}register$2(_0x2397ca(965),KmlLayer);class CzmlLayer extends CzmGeoJsonLayer{_showHook(e){const t=_0x2397ca;super._showHook(e),(this.options.updateClock??!0)&&(e?this[t(468)]():this.setNowTime())}setCzmlTime(){const e={_0x50e3de:3703,_0x539c77:3284,_0x467a6e:558,_0x1b8ba4:3703},t=_0x2397ca;var x;(x=this._dataSource)!==null&&x!==void 0&&x.clock&&(this._map.clock.clockRange=this._dataSource[t(e._0x50e3de)].clockRange,this._map.clock.multiplier=this._dataSource.clock[t(e._0x539c77)],this._map[t(3703)].startTime=this[t(2132)].clock.startTime,this[t(558)].clock.stopTime=this[t(2132)].clock.stopTime,this[t(e._0x467a6e)][t(e._0x1b8ba4)].currentTime=this._dataSource[t(e._0x1b8ba4)].startTime)}setNowTime(){const e={_0x5b8ead:2154,_0x8f103e:558},t=_0x2397ca;this[t(558)][t(3703)].clockRange=Cesium__namespace[t(487)][t(e._0x5b8ead)],this[t(558)][t(3703)].multiplier=1;const x=Cesium__namespace.JulianDate[t(1579)](new Date);this[t(e._0x8f103e)].clock[t(3764)]=x.clone(),this._map.clock[t(3452)]=Cesium__namespace.JulianDate.addDays(x,1,new Cesium__namespace.JulianDate),this._map.clock.currentTime=x.clone()}[_0x2397ca(380)](){super._removedHook(),(this.options.updateClock??!0)&&this.setNowTime()}load(e={}){const t={_0x5a210f:3044},x=_0x2397ca;this.options={...this.options,...e};let i;if(this[x(3044)].url){const s=getUrlResource(this.options);i=Cesium__namespace.CzmlDataSource.load(s,this.options)}else this.options.data?i=Cesium__namespace.CzmlDataSource.load(this.options[x(2069)],this[x(t._0x5a210f)]):logError$1(x(3813));i.then(s=>{this.showResult(s)})}getEntityAttr(e){const t=_0x2397ca;if(e.properties)return getAttrVal(e.properties);if(e[t(2365)])return{description:getCesiumValue(e.description)}}}register$2("czml",CzmlLayer);class GraphicGroupLayer extends GroupLayer{get[_0x2397ca(1e3)](){return this._hasEdit}set hasEdit(e){const t=_0x2397ca;this._hasEdit=e,this[t(581)]&&(e?this._selectedLayer[t(1312)]():this._selectedLayer[t(2408)]())}get isAutoEditing(){return this.options.isAutoEditing}set[_0x2397ca(2771)](e){this.options.isAutoEditing=e,this.eachLayer(t=>{t.isAutoEditing=e},this)}get selectedLayer(){return this[_0x2397ca(581)]}set selectedLayer(e){const t={_0x2e4e6d:3331},x=_0x2397ca;this[x(581)]&&(delete this._selectedLayer.isActivate,this[x(581)].disableEdit()),!(e instanceof GraphicLayer)&&(e=this.getLayer(e)),this._selectedLayer=e,this._selectedLayer&&(this._selectedLayer.isActivate=!0,this[x(t._0x2e4e6d)]&&this._selectedLayer.activateEdit())}[_0x2397ca(2317)](e){return e.isActivate}_mountedHook(){const e={_0x550882:3511,_0x1146e2:702},t=_0x2397ca;super._mountedHook(),this.options[t(e._0x550882)]&&this[t(e._0x1146e2)](this.options[t(e._0x550882)])}_addedHook(){const e=_0x2397ca;super[e(2670)](),this._processForRemoveLayer()}_getOrCreateLayer(e){const t={_0x4c4566:2044},x=_0x2397ca;if(!e)return this[x(1321)];if(isObject(e)){const i=this.getLayer(e[x(t._0x4c4566)]);if(i)return Cesium__namespace.defined(e.id)&&(i.id=e.id),Cesium__namespace.defined(e.show)&&(i.show=e.show),i}else{const i=this.getLayer(e);if(i)return i}return this.createLayer(e)}createLayer(e){const t={_0xe1e073:3511,_0x147ee6:3482,_0x103220:2044,_0x2796ca:3017,_0x2dfdc2:558},x=_0x2397ca,i=clone(this[x(3044)],["id","pid",x(t._0xe1e073),"data"]);i.pid=this.id,isObject(e)?(i.name=e.name,Cesium__namespace.defined(e.id)&&(i.id=e.id),Cesium__namespace.defined(e.show)&&(i[x(t._0x147ee6)]=e[x(3482)])):i[x(t._0x103220)]=e;const s=new GraphicLayer(i);return this[x(t._0x2796ca)]&&(s._events={...this._events}),this[x(t._0x2dfdc2)].addLayer(s),this[x(3615)](s),s}deleteLayer(e){const t={_0x5bdba8:2911},x=_0x2397ca;let i;return e instanceof GraphicLayer?i=e:i=this.getLayer(e),i?(this.selectedLayer===i&&(this.selectedLayer=null),removeArrayItem(this._arrLayer,i),this._map[x(t._0x5bdba8)](i,!0),this[x(1288)](),!0):!1}deleteEmptyLayer(){const e={_0x484eda:2759},t=_0x2397ca;for(let x=this[t(e._0x484eda)][t(2027)]-1;x>=0;x--){const i=this._arrLayer[x];i.length===0&&(this.selectedLayer===i&&(this.selectedLayer=null),this[t(2759)].splice(x,1),this._map.removeLayer(i,!0))}return this._processForRemoveLayer(),this}_processForRemoveLayer(){const e={_0x2fb7e0:2759,_0x40c2c3:4019,_0x4639f1:1321},t=_0x2397ca;this[t(e._0x2fb7e0)].length===0&&this.options.defaultLayer&&(this.selectedLayer=this.createLayer(this.options[t(e._0x40c2c3)])),this.selectedLayer==null&&this._arrLayer[t(2027)]>0&&(this[t(e._0x4639f1)]=this._arrLayer[0])}moveToLayer(e,t){!(t instanceof GraphicLayer)&&(t=this.getLayer(t)),e.remove(),t.addGraphic(e)}[_0x2397ca(3659)](){const e=[];return this.eachGraphic(t=>{t[_0x3361(1731)]||e.push(t)},this),e}[_0x2397ca(1976)](e){const t=_0x2397ca;if(e)for(let x=this._arrLayer.length-1;x>=0;x--){const i=this[t(2759)][x],s=i.getGraphicById(e);if(s)return s}}eachGraphic(e,t){return this.eachLayer(x=>{x.eachGraphic(e,t)},this),this}[_0x2397ca(2265)](e){this.eachLayer(t=>{t.clear(e)},this)}toGeoJSON(e){const t={_0x5bbf01:763},x=_0x2397ca;e!=null&&e.stopEdit&&this.stopDraw();const i=[],s=[];return this[x(454)](o=>{const r={_0x4df81b:2777,_0x11a6b4:2434},c=x;s.push({id:o.id,name:o.name,show:o[c(3482)]}),o.eachGraphic(_=>{const l=c;if(_.isPrivate)return;const h=_[l(r._0x4df81b)](e);h.properties._layer=o[l(2044)],i[l(r._0x11a6b4)](h)},this)},this),{type:x(t._0x5bbf01),layer:{id:this.id,name:this.name,layers:s,selected:this.selectedLayer.id},features:i}}loadGeoJSON(e,t={}){const x={_0x534324:3093,_0x1f3896:3831},i=_0x2397ca;try{isString(e)&&(e=JSON.parse(e))}catch(f){alert(f.name+": "+f.message+` 
请确认json文件格式正确!!!`);return}t.clear&&this.clear(!0);let s;if(t[i(2407)])s=this.getLayer(t.layer);else{var o,r;const f={},g=(o=e)===null||o===void 0||(r=o[i(2407)])===null||r===void 0?void 0:r.layers;if(g){var c,_;for(let b=0;b<g.length;b++){const y=this._getOrCreateLayer(g[b]);f[y.id]=y}if((c=e)!==null&&c!==void 0&&(_=c[i(2407)])!==null&&_!==void 0&&_[i(x._0x534324)]){var l,h;const b=f[(l=e)===null||l===void 0||(h=l.layer)===null||h===void 0?void 0:h[i(x._0x534324)]];b&&(this.selectedLayer=b)}}}const d=getGeoJsonFeatures(e);let u=[];for(let f=0,g=d.length;f<g;f++){const b=d[f];let y;if(s)y=s;else{var m;const v=b==null||(m=b.properties)===null||m===void 0?void 0:m[i(x._0x1f3896)];y=v?this.getLayer(v):null,!y&&(y=this[i(1321)])}const C=y.loadGeoJSON(b,{...t,clear:!1,flyTo:!1});u=u.concat(C)}return t.flyTo&&this._map.flyToGraphic(u),u}[_0x2397ca(3318)](e){const t=_0x2397ca;e[t(3511)]=this.toGeoJSON()}getRectangle(e){const t={_0x26f831:1991},x=_0x2397ca;let i;return this[x(t._0x26f831)](s=>{if(s.isPrivate||!s.getRectangle)return;const o=s.getRectangle();Cesium__namespace.defined(o)&&(i?i=Cesium__namespace.Rectangle.union(o,i):i=o)},this),e?formatRectangle(i):i}[_0x2397ca(1421)](e){const t=_0x2397ca;return this._selectedLayer[t(1421)](e)}[_0x2397ca(1740)](){return this._selectedLayer.stopDraw()}activateEdit(){const e={_0x171675:581,_0x834b7e:1312},t=_0x2397ca;return this[t(e._0x171675)][t(e._0x834b7e)]()}[_0x2397ca(2408)](){const e={_0x26ec46:2408},t=_0x2397ca;return this._selectedLayer[t(e._0x26ec46)]()}}register$2("graphicGroup",GraphicGroupLayer);class GeoJsonLayer extends GraphicLayer{[_0x2397ca(446)](e){const t={_0x17f504:735},x=_0x2397ca;super._showHook(e),e&&this[x(735)]&&(this[x(t._0x17f504)]=!1,this.load())}[_0x2397ca(2670)](){const e=_0x2397ca;super._addedHook(),this[e(3482)]?this.load():this[e(735)]=!0}[_0x2397ca(380)](){const e=_0x2397ca;super._removedHook(),this[e(2265)]()}load(e){const t={_0x59a816:3044,_0x348137:2265,_0x4a4bde:1286,_0x28195f:2069,_0x4bd2aa:2069},x=_0x2397ca;e&&(Cesium__namespace.defaultValue(e.clear,!0)&&(delete this[x(t._0x59a816)][x(914)],delete this.options.data),this[x(t._0x348137)](),this[x(3044)]={...this[x(3044)],...e}),this.options.url?sendAjax({...this[x(3044)],proxy:this._proxy})[x(t._0x4a4bde)](i=>{!this._map||this._state!==State.ADDED||this._load_data(i)}).catch(i=>{const s=x;var o;logError$1("fetchJson出错了",i),(o=this._readyPromise)!==null&&o!==void 0&&o.reject&&this[s(2276)].reject(i)}):this.options[x(t._0x28195f)]?this[x(2473)](this[x(3044)][x(t._0x4bd2aa)]):e&&logWarn("GeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。")}_load_data(e){const t=_0x2397ca;this.options[t(1767)]&&(e=this.options.format(e)),e=this._formatForMask(e);const x=this.loadGeoJSON(e,{clear:!0,enabledEvent:!1}),i=[];x.forEach(s=>{i.push({...s.attr,graphic:s})}),this.fire(EventType.load,{geojson:e,list:i,graphics:x}),this[t(3044)].flyTo&&this.flyToByAnimationEnd(),this._readyPromise.resolve(this)}[_0x2397ca(1231)](e){const t={_0x133107:197,_0x4e6831:1606,_0x3384b:3976,_0x780bc6:3910,_0x56eba7:3938,_0x16d545:3910,_0x23f7b5:968,_0x3a19e3:2592,_0x56ebb9:2027,_0x5a831c:3910},x=_0x2397ca,i=this.options.mask;if(!i||!e.features||e[x(t._0x133107)].length===0)return e;e=clone(e),e[x(197)].splice(1,e.features.length-1),this._extent=getExtentByGeoJSON(e);let s={xmin:73,xmax:136,ymin:3,ymax:59};isObject(i)&&Cesium__namespace.defined(i.xmin)&&Cesium__namespace.defined(i.xmax)&&Cesium__namespace.defined(i[x(242)])&&Cesium__namespace.defined(i.ymax)&&(s=i);const o=[[s.xmin,s[x(t._0x4e6831)]],[s.xmin,s.ymin],[s[x(t._0x3384b)],s.ymin],[s[x(3976)],s.ymax],[s.xmin,s[x(1606)]]],r=e.features[0];if(r[x(t._0x780bc6)].type==="Polygon")r.geometry={type:x(t._0x56eba7),coordinates:[o,r[x(t._0x16d545)].coordinates[0]]};else if(r.geometry[x(t._0x23f7b5)]==="MultiPolygon"){const c=[o];for(let _=0,l=r.geometry.coordinates.length;_<l;_++){const h=r.geometry.coordinates[_];h.length>0&&c.push(h[0])}r.geometry={type:x(3938),coordinates:[c]}}else if(r.geometry.type===x(t._0x3a19e3)){const c=[o];for(let _=0,l=r.geometry[x(2562)][x(t._0x56ebb9)];_<l;_++){const h=r[x(3910)][x(2562)][_][x(1245)];h[x(2027)]>0&&c.push(h[0])}r[x(t._0x5a831c)]={type:x(t._0x56eba7),coordinates:[c]}}return e}_toJsonEx(e){}[_0x2397ca(3535)](e,t){const x={_0x34fa44:3535,_0x129678:3628,_0x2d90c3:759},i={_0xcd9814:480,_0xe3d80e:357},s=_0x2397ca;var o;super[s(x._0x34fa44)](e,t),this._map&&(t[s(x._0x129678)]&&!((o=t.symbol)!==null&&o!==void 0&&o.type)?this[s(1991)](r=>{const c=s,_=getSymbolStyle(e.symbol,r.attr);delete _[c(i._0xcd9814)],r[c(i._0xe3d80e)]=_}):(this.clear(),this[s(x._0x2d90c3)]()))}}register$2(_0x2397ca(3511),GeoJsonLayer);class BusineDataLayer extends GraphicLayer{_showHook(e){const t={_0x5a2c7a:735},x=_0x2397ca;super._showHook(e),e&&this._hasLoad&&(this[x(t._0x5a2c7a)]=!1,this.load())}_addedHook(){const e={_0x58f38a:2670},t=_0x2397ca;super[t(e._0x58f38a)](),this.show?this.load():this[t(735)]=!0}_removedHook(){super._removedHook(),this.clear()}[_0x2397ca(759)](e){const t={_0x498ec4:3044,_0x4d410f:3044,_0x150746:2069},x={_0x2ffceb:2276},i={_0x3e61b4:2473},s=_0x2397ca;e&&(Cesium__namespace.defaultValue(e[s(2265)],!0)&&(delete this.options.url,delete this.options.data),this.clear(),this[s(t._0x498ec4)]={...this[s(t._0x4d410f)],...e}),this.options.url?fetchJson({...this.options,proxy:this._proxy}).then(o=>{const r=s;!this[r(558)]||!this.isAdded||this[r(i._0x3e61b4)](o)}).catch(o=>{const r=s;var c;logError$1("fetchJson出错了",o),(c=this[r(x._0x2ffceb)])!==null&&c!==void 0&&c[r(3427)]&&this._readyPromise.reject(o)}):this.options[s(t._0x150746)]?this._load_data(this.options[s(2069)]):e&&logWarn("GeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。")}_load_data(e){const t={_0x4b027d:3044,_0x27fc40:2956,_0x227ddc:3044,_0x249635:879,_0x48b004:3844,_0x5e861b:1155,_0x55bd85:760,_0x2bab66:3380,_0x7f2d12:1091,_0x1a9ed6:2445},x=_0x2397ca;this[x(t._0x4b027d)].dataColumn&&this[x(3044)].dataColumn[x(t._0x27fc40)](".").forEach(c=>{e=e[c]}),this.options.formatData&&(e=this.options.formatData(e));const i=[];for(let r=0,c=e.length;r<c;r++){const _=e[r];let l={};_.style&&(l={..._.style});const h=this.options.symbol;let d=_.type&&hasType(_.type)?_.type:"point";if(h)if(isFunction(h))l=h(_,l)||l,l.type&&(d=l.type);else{d=h.type||d;const m=getSymbolStyle(h,_||{});h.merge?l={...m,...l}:l=m}if(!hasType(d)){logError$1("不存在graphicType无法解析数据对Graphic",_);continue}const u={type:d,style:l,attr:_};if(isPointType(d)){if(_[x(760)])u[x(760)]=_[x(760)];else if(this[x(t._0x227ddc)].formatPosition)u.position=this.options[x(t._0x249635)](_,u);else if(this.options[x(401)]||this.options[x(1016)]){const m=_[this.options.latColumn||"lat"],f=_[this.options.lngColumn||"lng"],g=_[this.options[x(t._0x48b004)]||x(t._0x5e861b)]||0;u.position=[f,m,g]}else _.lat&&_.lng&&(u[x(t._0x55bd85)]=[_[x(3409)],_.lat,_.alt||0]);if(!u.position){logError$1(x(t._0x2bab66),_);continue}}else if(_.positions?u[x(t._0x7f2d12)]=_[x(1091)]:this.options[x(t._0x249635)]&&(u.positions=this.options.formatPosition(_,u)),!u.positions){logError$1("无法解析数据positions坐标位置",_);continue}i.push(u)}const s=this[x(t._0x1a9ed6)](i,{enabledEvent:!1}),o=[];s.forEach(r=>{o[x(2434)]({...r.attr,graphic:r})}),this.fire(EventType[x(759)],{jsonData:e,list:o,graphics:s}),this.options.flyTo&&this.flyToByAnimationEnd(),this._readyPromise[x(3863)](this)}_toJsonEx(e){}_setOptionsHook(e,t){const x={_0x44a32:3628},i=_0x2397ca;var s;super._setOptionsHook(e,t),this[i(558)]&&(t[i(x._0x44a32)]&&!((s=t[i(3628)])!==null&&s!==void 0&&s.type)?this.eachGraphic(o=>{const r=i,c=getSymbolStyle(e[r(3628)],o.attr);o.style=c}):(this[i(2265)](),this.load()))}}register$2(_0x2397ca(3396),BusineDataLayer);class EditTileset extends EditBase{get layer(){return this._graphic}get[_0x2397ca(357)](){return this[_0x2397ca(3645)].options}bindDraggers(){const e={_0x193612:760};this._contextmenuConfig_bak=this.layer._contextmenuConfig,this.createDragger({dragger:this._graphic,onDrag:(t,x)=>{const i=_0x3361;this._graphic[i(e._0x193612)]=x}})}[_0x2397ca(725)](){const e={_0x4aa34e:2679,_0x5c11cd:3645,_0x2a78dd:1590},t=_0x2397ca;delete this._graphic[t(e._0x4aa34e)],delete this[t(e._0x5c11cd)]._isDragger,delete this._graphic._noMousePick,delete this._graphic._pointType,delete this._graphic[t(726)],this._graphic.unbindContextMenu(),this._contextmenuConfig_bak&&(this.layer[t(e._0x2a78dd)]=this[t(370)],delete this._contextmenuConfig_bak)}_onLeftDownHandler(e){const t={_0x239d8e:3399,_0x2e6e0d:558},x=_0x2397ca,i=this._map.mouseEvent.getPickTarget(e.position,e);if(i[x(2407)]!==this.layer)return;const s=i==null?void 0:i.layer;!s||!s._isDragger||(this._map[x(t._0x239d8e)].screenSpaceCameraController.enableInputs&&(this._map.scene[x(3830)].enableInputs=!1,this._hasChangeEnableInputs=!0),this[x(t._0x2e6e0d)]._setEditCursor(!0),s[x(1238)](),this[x(3053)]=s,this.fire(EventType.editMouseDown,{...e,...i,index:this._draggerIng[x(3124)]}))}_onMouseMoveDraggerHandler(e){const t={_0x5402ed:3053},x=_0x2397ca;this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_释放后完成修改"));const i=getCurrentMouseTerrainPosition(this._map.scene,e.endPosition);i&&this._draggerIng.onDrag&&this[x(3053)].onDrag(this[x(t._0x5402ed)],i),this.fire(EventType.editMouseMove,{...e,index:this._draggerIng[x(3124)],cartesian:i,windowPosition:e.endPosition})}[_0x2397ca(2274)](e){const t={_0x21724c:1228,_0x4d9dfb:1910,_0x3a5e1d:1342,_0x4e86db:2679},x=_0x2397ca,i=this._map.mouseEvent[x(t._0x21724c)](e.endPosition,e),s=i==null?void 0:i[x(2407)];if(s==null){this[x(558)].closeSmallTooltip();return}if(i.layer!==this.layer||!s[x(t._0x4d9dfb)]||this._map.contextmenu.show&&this._map[x(t._0x3a5e1d)].target===s)return;const o=s[x(t._0x4e86db)];o&&this[x(558)].openSmallTooltip(e.endPosition,o)}getDraggerContextMenu(e){const t={_0x599799:3270},x=_0x2397ca,i=super.getDraggerContextMenu(e);return Cesium__namespace.defaultValue(this[x(357)].hasEditRotate,!0)&&(i.push({text:this._map.getLangText("_按轴旋转"),icon:Icon.BloomEffectYes,show:s=>{const o=x;return!this._matrixRotate||this[o(3888)][o(t._0x599799)]!==e.index},callback:s=>{var o;const r=(o=s.graphic)!==null&&o!==void 0&&o.position?s.graphic:s.layer;this.startRotateMatrix(r,s)}}),i.push({text:this._map.getLangText("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:s=>{const o=x;return this._matrixRotate&&this._matrixRotate._dragger_index===e[o(3124)]},callback:s=>{this.stopRotateMatrix()}})),i}startRotateMatrix(e,t){const x={_0x155d3d:265,_0xf73a56:3573},i={_0xf2ebc:227},s=_0x2397ca;!e&&(e=this.layer),this.stopMoveMatrix(),this[s(1156)](),this._matrixRotate=new MatrixRotate({map:this._map,position:e.position,roll:e.rotation_x,pitch:e.rotation_y,heading:e[s(x._0x155d3d)]}),this._map.addThing(this._matrixRotate),this._matrixRotate.on(EventType[s(3796)],o=>{const r=s;e.rotation={x:formatNum$1(o.roll,2),y:formatNum$1(o[r(i._0xf2ebc)],2),z:formatNum$1(o[r(1722)],2)}}),e.off(EventType.updatePosition,this[s(3301)],this),e[s(x._0xf73a56)](EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType.updatePosition,this._updateMatrixRotatePosition,this)}}class TilesetEditBase extends BaseThing{constructor(e={}){super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this._rangeNumber=0,this._maxRangeLength=0,this._areaList=[]}get list(){return this._areaList}get layer(){return this._layer}set layer(e){this._layer=e,e.readyPromise.then(t=>{const x={_0xbee4a3:2251},i=_0x3361;this[i(2816)]=e.upAxis,this._center=e.center.toCartographic(),this._initLayer(e.tileset),this[i(3044)].area&&this[i(3044)][i(2290)].forEach(s=>{const o=i;this[o(x._0xbee4a3)](s[o(1091)],s)})})}get editHeight(){const e=_0x2397ca;var t,x;const i=this.layer;return i!=null&&(t=i.options)!==null&&t!==void 0&&t.editHeight?i.options.editHeight:this.options.editHeight?this.options.editHeight:i!=null&&(x=i[e(3044)])!==null&&x!==void 0&&x.flatHeight?i.options[e(1481)]:this.options.flatHeight?this[e(3044)].flatHeight:0}get tileset(){return this.tilesetLayer.tileset}get length(){const e={_0x597ed0:3264},t=_0x2397ca;if(this._areaList){var x;return(x=this[t(e._0x597ed0)])===null||x===void 0?void 0:x.length}else return 0}[_0x2397ca(2670)](){this[_0x2397ca({_0x37265b:3044}._0x37265b)].layer&&(this.layer=this.options.layer)}[_0x2397ca(380)](){this.clear(),this.cacheMarsOptions&&this.cacheMarsOptions()}clear(){const e=_0x2397ca;this._areaList=[],this._rangeNumber=0,this._maxRangeLength=0,Cesium__namespace.defined(this[e(1232)])&&(this._texture.destroy(),this._texture=void 0)}addArea(e,t={}){const x={_0xb33d16:2027,_0x1e4f7e:1146,_0x22e298:1975},i=_0x2397ca;if(!e||e[i(x._0xb33d16)]<3)return;e=LngLatArray.toCartesians(e),this._maxRangeLength=Math[i(x._0x1e4f7e)](this._maxRangeLength,e.length);const s={id:getGlobalId(),show:!0,height:t.height||0,positions:e};return this._areaList.push(s),this._hasUpdate=!0,this.fire(EventType[i(x._0x22e298)],{area:s}),s}[_0x2397ca(3439)](e){const t={_0x47e33f:2027,_0x2877ca:3264},x=_0x2397ca;if(isNumber(e)){for(let i=0;i<this._areaList[x(t._0x47e33f)];i++){const s=this[x(t._0x2877ca)][i];if(s.id===e)return s}return null}}hideArea(e){const t=this.getAreaById(e);t&&(t.show=!1,this._hasUpdate=!0)}showArea(e){const t=this.getAreaById(e);t&&(t.show=!0,this._hasUpdate=!0)}removeArea(e){const t=_0x2397ca;isNumber(e)&&(e=this.getAreaById(e)),e&&(removeArrayItem(this[t(3264)],e),this._hasUpdate=!0,this[t(1788)](EventType.removeItem,{area:e}))}[_0x2397ca(2023)](e){const t={_0x19730c:1653,_0x5e9327:2747,_0x23b4b0:2407},x={_0xd842fd:2931},i=_0x2397ca;var s;const o=e[i(t._0x19730c)],r=this;e.update=function(_){const l=i;r[l(1035)]&&r._update(_),o[l(1373)](this)(_)};const c=this._getCustomShader(!this.layer.transform);if((s=Cesium__namespace[i(2743)])!==null&&s!==void 0&&s[i(t._0x5e9327)]){const _=Cesium__namespace.Mars3DEx.getCacheOrAdd(this[i(t._0x23b4b0)].id);_[this._customShadersKey]=c,this.cacheMarsOptions=function(){const l=i;e[l(1653)]=o,delete _[r[l(x._0xd842fd)]]}}}_update(e){const t={_0xbd779f:2941,_0x8fd18a:2336,_0x7cd21e:3264,_0x5b71a8:2027,_0x4e7347:1255,_0x577384:783},x={_0x4f1c1e:295,_0x4f8d7e:864,_0x164742:960,_0x11fdb7:295,_0x2b4225:2434},i=_0x2397ca;if(Cesium__namespace.defined(this[i(1232)])&&(this._texture[i(t._0xbd779f)](),this._texture=void 0),this._maxRangeLength=0,this[i(t._0x8fd18a)]=this[i(t._0x7cd21e)][i(t._0x5b71a8)],this._rangeNumber===0)return;let s=0;this[i(3264)][i(t._0x4e7347)](r=>{const c=i;r.show&&s<r.positions.length&&(s=r[c(1091)].length)}),this._maxRangeLength=s;const o=[];this._areaList.forEach((r,c)=>{const _=i;if(!r[_(3482)])return;const l=r[_(1091)],h=l.length,d=Cesium__namespace[_(x._0x4f1c1e)].fromRadians(this._center[_(1184)],this._center[_(489)],this._center.height+r.height+this[_(x._0x4f8d7e)]),u=Cesium__namespace[_(295)][_(x._0x164742)](d,new Cesium__namespace[_(x._0x11fdb7)]);if(o[_(2434)](h),o[_(x._0x2b4225)](h),o.push(h),o[_(2434)](h),o[_(2434)](u.x),o.push(u.y),o.push(u.z),o.push(d.x/u.x),l.forEach(m=>{const f=_,g=m,b=Cesium__namespace.Cartesian3.normalize(g,new Cesium__namespace.Cartesian3);o.push(b.x),o[f(2434)](b.y),o.push(b.z),o.push(g.x/b.x)}),h<s)for(let m=0;m<s-h;m++)o.push(0),o[_(2434)](0),o.push(0),o.push(0)}),this[i(1232)]=new Cesium__namespace.Texture({context:this._map.scene._context,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[i(3305)],wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace.TextureMinificationFilter[i(1636)],magnificationFilter:Cesium__namespace[i(t._0x577384)].NEAREST}),flipY:!1,source:{width:s+2,height:this._rangeNumber,arrayBufferView:new Float32Array(o)}})}_getCustomShader(e=!1){return null}toJSON(){const e={_0x2e55df:3044,_0x214042:1255},t=_0x2397ca,x=clone(this[t(e._0x2e55df)],["layer","eventParent"]);return x.area=[],this._areaList[t(e._0x214042)](i=>{const s=t;x.area[s(2434)]({positions:LngLatArray.toArray(i.positions)})}),x}}class TilesetClip extends TilesetEditBase{constructor(e={}){super(e),this._customShadersKey="clip"}[_0x2397ca(843)](e=!1){const t={_0x2ae31c:4053,_0x209646:233},x=_0x2397ca,i=new Cesium__namespace.CustomShader({fragmentShaderText:`
        uniform sampler2D u_mars3d_clip_texture;
        uniform int u_mars3d_clip_upAxis;
        uniform int u_mars3d_clip_rangeNumber;
        uniform int u_mars3d_clip_maxRangeLength;

        vec4 restorePoint_mars3d_clip(vec4 point) {
          vec3 outpoint = point.xyz * point.w;
          return czm_inverseModel * vec4(outpoint, 1.0);
        }

        vec4 getRegions_mars3d_clip(int x, int y) {
          float u = (float(x) + 0.5) / float(u_mars3d_clip_maxRangeLength + 2);
          float v = (float(y) + 0.5) / float(u_mars3d_clip_rangeNumber);
          vec4 point = texture(u_mars3d_clip_texture, vec2(u, v));
          return point;
        }

        bool inRectangle_mars3d_clip(vec3 textPoint) {
          for(int h = 0; h < 100000; h++){
              if(h >= u_mars3d_clip_rangeNumber) break;

              vec4 first = restorePoint_mars3d_clip(getRegions_mars3d_clip(2, h));
              float currentLength = getRegions_mars3d_clip(0, h).x;
              float counter = 0.0;
              float xinters = 0.0;
              for(int w = 0; w < 100000; w++){
                  if(float(w) >= currentLength) break;
                  int nextIndex = w + 1;
                  nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                  vec4 p1 = restorePoint_mars3d_clip(getRegions_mars3d_clip(w + 2, h));
                  vec4 p2 = restorePoint_mars3d_clip(getRegions_mars3d_clip(nextIndex + 2, h));

                  float p1x = p1.x;
                  float p1y = p1.z;
                  float p2x = p2.x;
                  float p2y = p2.z;
                  float textPointx = textPoint.x;
                  float textPointy = textPoint.z;

                  if(u_mars3d_clip_upAxis == 0){
                      p1x = p1.y;
                      p1y = p1.z;
                      p2x = p2.y;
                      p2y = p2.z;
                      textPointx = textPoint.y;
                      textPointy = textPoint.z;
                  } else if (u_mars3d_clip_upAxis == 1) {
                      p1x = p1.x;
                      p1y = p1.z;
                      p2x = p2.x;
                      p2y = p2.z;
                      textPointx = textPoint.x;
                      textPointy = textPoint.z;
                  } else {
                      p1x = p1.x;
                      p1y = p1.y;
                      p2x = p2.x;
                      p2y = p2.y;
                      textPointx = textPoint.x;
                      textPointy = textPoint.y;
                  }


                  if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                      if (textPointy <= max(p1y, p2y)){
                          if (p1x != p2x){
                              xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                              if (p1y == p2y || textPointy <= xinters){
                                  counter += 1.0;
                              }
                          }
                      }
                  }
              }
              if((mod(counter, 2.0) != 0.0)) {
                  return true;
              }
          }
          return false;
        }

        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
            vec3 positionMC = fsInput.attributes.positionMC;
            if(inRectangle_mars3d_clip(positionMC)){
                discard;
            }
        }
      `}),s=this._map.scene._context[x(t._0x2ae31c)];return i[x(233)].u_mars3d_clip_texture=()=>{const o=x;return Cesium__namespace.defined(this[o(1232)])?this._texture:s},i[x(t._0x209646)].u_mars3d_clip_upAxis=()=>this[x(2816)],i.uniformMap.u_mars3d_clip_rangeNumber=()=>this._rangeNumber,i.uniformMap.u_mars3d_clip_maxRangeLength=()=>this[x(2380)],i}}class TilesetFlat extends TilesetEditBase{constructor(e={}){const t={_0x1e671c:2931},x=_0x2397ca;super(e),this[x(t._0x1e671c)]="flat"}_getCustomShader(e=!1){const t={_0x772447:233},x={_0x4c93ed:2380},i={_0x579693:1232},s=_0x2397ca,o=new Cesium__namespace.CustomShader({vertexShaderText:`
          uniform sampler2D u_mars3d_flat_texture;
          uniform int u_mars3d_flat_upAxis;
          uniform int u_mars3d_flat_rangeNumber;
          uniform int u_mars3d_flat_maxRangeLength;

          vec4 restorePoint_mars3d_flat(vec4 point) {
            vec3 outpoint = point.xyz * point.w;
            return czm_inverseModel * vec4(outpoint, 1.0);
          }

          vec4 getRegions_mars3d_flat(int x, int y) {
            float u = (float(x) + 0.5) / float(u_mars3d_flat_maxRangeLength + 2);
            float v = (float(y) + 0.5) / float(u_mars3d_flat_rangeNumber);
            vec4 point = texture(u_mars3d_flat_texture, vec2(u, v));
            return point;
          }

          int inRectangle_mars3d_flat(vec3 textPoint) {
            for(int h = 0; h < 100000; h++){
                if(h >= u_mars3d_flat_rangeNumber) break;

                vec4 first = restorePoint_mars3d_flat(getRegions_mars3d_flat(2, h));
                float currentLength = getRegions_mars3d_flat(0, h).x;
                float counter = 0.0;
                float xinters = 0.0;
                for(int w = 0; w < 100000; w++){
                    if(float(w) >= currentLength) break;
                    int nextIndex = w + 1;
                    nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                    vec4 p1 = restorePoint_mars3d_flat(getRegions_mars3d_flat(w + 2, h));
                    vec4 p2 = restorePoint_mars3d_flat(getRegions_mars3d_flat(nextIndex + 2, h));

                    float p1x = p1.x;
                    float p1y = p1.z;
                    float p2x = p2.x;
                    float p2y = p2.z;
                    float textPointx = textPoint.x;
                    float textPointy = textPoint.z;

                    if(u_mars3d_flat_upAxis == 0){
                        p1x = p1.y;
                        p1y = p1.z;
                        p2x = p2.y;
                        p2y = p2.z;
                        textPointx = textPoint.y;
                        textPointy = textPoint.z;
                    } else if (u_mars3d_flat_upAxis == 1) {
                        p1x = p1.x;
                        p1y = p1.z;
                        p2x = p2.x;
                        p2y = p2.z;
                        textPointx = textPoint.x;
                        textPointy = textPoint.z;
                    } else {
                        p1x = p1.x;
                        p1y = p1.y;
                        p2x = p2.x;
                        p2y = p2.y;
                        textPointx = textPoint.x;
                        textPointy = textPoint.y;
                    }


                    if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                        if (textPointy <= max(p1y, p2y)){
                            if (p1x != p2x){
                                xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                                if (p1y == p2y || textPointy <= xinters){
                                    counter += 1.0;
                                }
                            }
                        }
                    }
                }
                if((mod(counter, 2.0) != 0.0)) {
                    return h;
                }
            }
            return 99999;
          }

          void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {
              vec3 positionMC = vsInput.attributes.positionMC;
              int rectangleIndex = inRectangle_mars3d_flat(positionMC);
              if(rectangleIndex != 99999){
                vec4 modelDatumPoint = restorePoint_mars3d_flat(getRegions_mars3d_flat(1, rectangleIndex));
                if(u_mars3d_flat_upAxis == 0){
                    vsOutput.positionMC = vec3(modelDatumPoint.x + positionMC.x * 0.0005, positionMC.y, positionMC.z);
                } else if (u_mars3d_flat_upAxis == 1){
                    vsOutput.positionMC = vec3(positionMC.x, modelDatumPoint.y + positionMC.y * 0.0005, positionMC.z);
                } else {
                    vsOutput.positionMC = vec3(positionMC.x, positionMC.y, modelDatumPoint.z + positionMC.z * 0.0005);
                }
              }
          }`}),r=this._map.scene._context.defaultTexture;return o[s(233)].u_mars3d_flat_texture=()=>{const c=s;return Cesium__namespace.defined(this[c(i._0x579693)])?this[c(1232)]:r},o[s(233)][s(2879)]=()=>this._modelUpAxis,o[s(t._0x772447)].u_mars3d_flat_rangeNumber=()=>this._rangeNumber,o.uniformMap.u_mars3d_flat_maxRangeLength=()=>this[s(x._0x4c93ed)],o}[_0x2397ca(2292)](e,t){const x={_0x599888:3264},i=_0x2397ca;if(Cesium__namespace.defined(t)){const s=this.getAreaById(t);s&&(s[i(3872)]=e,this._hasUpdate=!0)}else{for(let s=0;s<this[i(3264)].length;s++){const o=this[i(x._0x599888)][s];o.height=e}this[i(1035)]=!0}}}class TilesetFlood extends TilesetEditBase{constructor(e={}){const t={_0x15abfd:1014,_0x3e7681:3044,_0xf65816:3071,_0x5b86c0:1089},x=_0x2397ca;super(e),this._customShadersKey=x(t._0x15abfd),this[x(t._0x3e7681)].speed=this.options[x(t._0xf65816)]??5,this[x(t._0x5b86c0)]=this.options.color||new Cesium__namespace.Color(.15,.7,.95,.5),this._limitMin=this.options[x(2466)]??!1}get speed(){const e=_0x2397ca;return this.options[e(3071)]}set[_0x2397ca(3071)](e){this.options.speed=e}get[_0x2397ca(346)](){return this.options.floodAll??!1}set floodAll(e){const t=_0x2397ca;this[t(3044)].floodAll=e}get[_0x2397ca(3872)](){const e={_0x114e46:3872},t=_0x2397ca;return this[t(3044)][t(e._0x114e46)]}set height(e){const t={_0x4c2554:864},x=_0x2397ca;this.options[x(3872)]=e,this[x(947)]=e+this[x(t._0x4c2554)]}get color(){return this._color}set color(e){const t=_0x2397ca;this[t(3463)]=getCesiumColor(e,new Cesium__namespace.Color(.15,.7,.95,.5))}[_0x2397ca(546)](){const e={_0x501e7d:3872,_0x4b98e2:3044,_0x316801:558},t=_0x2397ca;this.stop(),Cesium__namespace.defined(this.options[t(3892)])?(this[t(476)]=this.options.minHeight+this.editHeight,this[t(e._0x501e7d)]=this[t(e._0x4b98e2)].minHeight):(this._minHeight=-9999,this.height=0),this.isStart=!0,this.fire(EventType.start),this[t(e._0x316801)].on(EventType.clockTick,this._onClockTickHandler,this)}[_0x2397ca(348)](e){const t={_0x567577:1295,_0x51fd0e:3872},x=_0x2397ca;if(this[x(3872)]+=this.speed/50,this[x(3872)]>this.options[x(1295)]){this.height=this[x(3044)][x(t._0x567577)],this[x(2045)]();return}if(this.height<this.options[x(3892)]){this[x(t._0x51fd0e)]=this.options.minHeight,this[x(2045)]();return}this.fire(EventType[x(3796)],{height:this.height})}[_0x2397ca(2045)](){const e={_0x4cb232:1776,_0x14fcf2:1776},t=_0x2397ca;this[t(e._0x4cb232)]&&(this._map[t(3573)](EventType.clockTick,this._onClockTickHandler,this),this[t(e._0x14fcf2)]=!1,this.fire(EventType.end))}restart(){this[_0x2397ca(546)]()}clear(){const e={_0x184219:476},t=_0x2397ca;this[t(2045)](),super.clear(),delete this[t(e._0x184219)],delete this._currentHeight}[_0x2397ca(843)](e=!1){const t={_0xe59055:233},x={_0x462669:639},i=_0x2397ca,s=new Cesium__namespace.CustomShader({fragmentShaderText:`
        uniform sampler2D u_mars3d_flood_texture;
        uniform int u_mars3d_flood_upAxis;
        uniform int u_mars3d_flood_rangeNumber;
        uniform int u_mars3d_flood_maxRangeLength;

        uniform bool u_mars3d_isStart;
        uniform vec4 u_mars3d_flood_color;
        uniform bool u_mars3d_flood_floodAll;
        uniform float u_mars3d_flood_currentheight;
        uniform float u_mars3d_flood_min_height;
        uniform bool u_mars3d_flood_limitMin;

        vec4 restorePoint_mars3d_flood(vec4 point) {
          vec3 outpoint = point.xyz * point.w;
          return czm_inverseModel * vec4(outpoint, 1.0);
        }

        vec4 getRegions_mars3d_flood(int x, int y) {
          float u = (float(x) + 0.5) / float(u_mars3d_flood_maxRangeLength + 2);
          float v = (float(y) + 0.5) / float(u_mars3d_flood_rangeNumber);
          vec4 point = texture(u_mars3d_flood_texture, vec2(u, v));
          return point;
        }

        bool inRectangle_mars3d_flood(vec3 textPoint) {
          for(int h = 0; h < 100000; h++){
              if(h >= u_mars3d_flood_rangeNumber) break;

              vec4 first = restorePoint_mars3d_flood(getRegions_mars3d_flood(2, h));
              float currentLength = getRegions_mars3d_flood(0, h).x;
              float counter = 0.0;
              float xinters = 0.0;
              for(int w = 0; w < 100000; w++){
                  if(float(w) >= currentLength) break;
                  int nextIndex = w + 1;
                  nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                  vec4 p1 = restorePoint_mars3d_flood(getRegions_mars3d_flood(w + 2, h));
                  vec4 p2 = restorePoint_mars3d_flood(getRegions_mars3d_flood(nextIndex + 2, h));

                  float p1x = p1.x;
                  float p1y = p1.z;
                  float p2x = p2.x;
                  float p2y = p2.z;
                  float textPointx = textPoint.x;
                  float textPointy = textPoint.z;

                  if(u_mars3d_flood_upAxis == 0){
                      p1x = p1.y;
                      p1y = p1.z;
                      p2x = p2.y;
                      p2y = p2.z;
                      textPointx = textPoint.y;
                      textPointy = textPoint.z;
                  } else if (u_mars3d_flood_upAxis == 1) {
                      p1x = p1.x;
                      p1y = p1.z;
                      p2x = p2.x;
                      p2y = p2.z;
                      textPointx = textPoint.x;
                      textPointy = textPoint.z;
                  } else {
                      p1x = p1.x;
                      p1y = p1.y;
                      p2x = p2.x;
                      p2y = p2.y;
                      textPointx = textPoint.x;
                      textPointy = textPoint.y;
                  }


                  if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                      if (textPointy <= max(p1y, p2y)){
                          if (p1x != p2x){
                              xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                              if (p1y == p2y || textPointy <= xinters){
                                  counter += 1.0;
                              }
                          }
                      }
                  }
              }
              if((mod(counter, 2.0) != 0.0)) {
                  return true;
              }
          }
          return false;
        }

        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
            vec3 positionMC = fsInput.attributes.positionMC;
            if(u_mars3d_isStart && (u_mars3d_flood_floodAll || inRectangle_mars3d_flood(positionMC))){
                float height = positionMC.z;
                if(u_mars3d_flood_upAxis == 0){
                    height = positionMC.x;
                } else if (u_mars3d_flood_upAxis == 1) {
                    height = positionMC.y;
                } else {
                    height = positionMC.z;
                }

                if(height<=u_mars3d_flood_currentheight && (!u_mars3d_flood_limitMin || u_mars3d_flood_min_height<=height))
                {
                  material.diffuse = mix(material.diffuse, u_mars3d_flood_color.rgb, u_mars3d_flood_color.a);
                }
            }
        }
      `}),o=this._map.scene._context.defaultTexture;return s.uniformMap.u_mars3d_flood_texture=()=>Cesium__namespace[_0x3361(x._0x462669)](this._texture)?this._texture:o,s.uniformMap.u_mars3d_flood_upAxis=()=>this._modelUpAxis,s.uniformMap.u_mars3d_flood_rangeNumber=()=>this._rangeNumber,s.uniformMap.u_mars3d_flood_maxRangeLength=()=>this._maxRangeLength,s.uniformMap.u_mars3d_isStart=()=>{const r=_0x3361;return Cesium__namespace.defined(this[r(947)])},s.uniformMap.u_mars3d_flood_floodAll=()=>this.floodAll,s[i(t._0xe59055)].u_mars3d_flood_color=()=>this.color,s.uniformMap.u_mars3d_flood_currentheight=()=>this._currentHeight,s.uniformMap.u_mars3d_flood_min_height=()=>this._minHeight,s.uniformMap[i(1397)]=()=>this._limitMin,this[i(233)]=s.uniformMap,s}}class TilesetPlanClip extends BaseThing{get clipTarget(){return this._tileset}set[_0x2397ca(2884)](e){const t={_0x9877ed:3044,_0x3bd3ab:230,_0x39e00b:230},x=_0x2397ca;this._tileset=e,this[x(951)]=null,Cesium__namespace.defined(this.options[x(1091)])&&(this[x(1091)]=this.options.positions),Cesium__namespace.defined(this.options.type)&&(this[x(968)]=this[x(t._0x9877ed)].type),Cesium__namespace.defined(this.options[x(t._0x3bd3ab)])&&(this[x(t._0x39e00b)]=this.options.distance)}get layer(){return this._layer}set[_0x2397ca(2407)](e){const t=_0x2397ca;this._layer=e,e.loadOk?this.clipTarget=e.tileset:e.on(EventType[t(759)],x=>{this.clipTarget=e.tileset})}get[_0x2397ca(3779)](){return this.clippingPlanes}get[_0x2397ca(2785)](){const e={_0xa91cda:951,_0x1d6d89:1043,_0x4cc7bf:1620,_0x36d663:871,_0x1e56d4:754},t=_0x2397ca;if(!this[t(e._0xa91cda)]){let x;const i=this[t(3839)].root.transform;i&&i[t(e._0x1d6d89)](Cesium__namespace.Matrix4.IDENTITY)||!i?x=Cesium__namespace[t(e._0x4cc7bf)][t(e._0x36d663)](this._tileset.boundingSphere.center):x=Cesium__namespace.Matrix4.fromArray(this._tileset.root.transform),this._inverseMatrix=Cesium__namespace[t(1046)][t(e._0x1e56d4)](x,new Cesium__namespace.Matrix4)}return this._inverseMatrix}get center(){const e={_0x2c9671:3839},t=_0x2397ca;return this._layer?this[t(3831)].position:this[t(e._0x2c9671)].boundingSphere.center}get distance(){return this._distance}set distance(e){const t={_0xa1590c:2985,_0x22d248:2027},x=_0x2397ca;if(this._distance=e,this[x(2985)]&&this.clippingPlanes.length>0){const i=this[x(2985)].get(this[x(t._0xa1590c)][x(t._0x22d248)]-1);i.distance=e}}get angle1(){return this._normal_angle1||0}set[_0x2397ca(1715)](e){const t={_0x5471e8:2985,_0x1c125c:2985,_0x50a8c1:2605,_0x24dfa4:2924},x=_0x2397ca;if(this._normal_angle1=e,this.clippingPlanes&&this.clippingPlanes.length>0){const i=this[x(t._0x5471e8)][x(2001)](this[x(t._0x1c125c)].length-1);this[x(t._0x50a8c1)](i,e,this[x(t._0x24dfa4)])}}get angle2(){return this[_0x2397ca(2200)]||0}set angle2(e){const t=_0x2397ca;if(this._normal_angle2=e,this.clippingPlanes&&this.clippingPlanes.length>0){const x=this.clippingPlanes.get(this.clippingPlanes.length-1);this._updateNormal(x,this[t(1715)],e)}}get normalZ(){return this[_0x2397ca(2078)]||0}set normalZ(e){const t={_0x976ab5:2027},x=_0x2397ca;if(this._normalZ=e,this[x(2985)]&&this.clippingPlanes.length>0){const i=this.clippingPlanes[x(2001)](this.clippingPlanes[x(t._0x976ab5)]-1);i.normal.z=e}}get[_0x2397ca(968)](){return this[_0x2397ca({_0x4a9b88:3157}._0x4a9b88)]}set type(e){const t=_0x2397ca;this._type=e;let x;switch(e){case ClipType.Z:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,1),1)];break;case ClipType.ZR:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace[t(295)](0,0,-1),1)];break;case ClipType.X:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace[t(295)](1,0,0),1)];break;case ClipType.XR:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(-1,0,0),1)];break;case ClipType.Y:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,1,0),1)];break;case ClipType.YR:x=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,-1,0),1)];break}this.setPlanes(x)}get positions(){return this[_0x2397ca(2526)]}set positions(e){const t=_0x2397ca;this._positions=LngLatArray[t(1169)](e),this._setPositions(this._positions)}get clipOutSide(){return this[_0x2397ca({_0x1abe58:3044}._0x1abe58)].clipOutSide}set[_0x2397ca(1668)](e){const t=_0x2397ca;this.options.clipOutSide=e,this[t(558)]&&this._positions&&this._setPositions(this._positions)}[_0x2397ca(2645)](){const e={_0x4ea200:3886,_0x54cce3:1929,_0x51d865:1337},t={_0x12e3f3:3327},x=_0x2397ca;this.options.showPlane&&(this[x(e._0x4ea200)]=new GraphicLayer({...this.options,private:!0}),this.options[x(e._0x54cce3)]&&this._graphicLayer.bindContextMenu([{text:this._map[x(e._0x51d865)]("_删除"),icon:Icon.Delete,callback:i=>{const s=x,o=i.graphic;o&&(this._graphicLayer[s(t._0x12e3f3)](o),this.fire(EventType.remove,i))}}])),this.options.layer?this.layer=this.options[x(2407)]:this[x(3044)].tileset&&(this.clipTarget=this.options.tileset)}_map_click(e){const t={_0x326cdc:1089},x=_0x2397ca;this._last_planeGraphics&&(this._last_planeGraphics[x(1e3)]=!1,this[x(2267)].material[x(t._0x326cdc)]=this._last_planeGraphics.material.color_bak,delete this._last_planeGraphics),this._graphicLayer_leftUp(e)}[_0x2397ca(1289)](e){const t={_0x1bc076:394,_0x26fc39:1e3,_0x286757:357},x=_0x2397ca;var i,s;const o=(i=e.graphic)===null||i===void 0||(s=i[x(t._0x1bc076)])===null||s===void 0?void 0:s.plane;Cesium__namespace.defined(o)&&(this._map_click(),o[x(t._0x26fc39)]=!o.hasEdit,o[x(3816)].color_bak=o[x(3816)].color,o.material[x(1089)]=e.graphic[x(t._0x286757)][x(1030)],o.hasEdit&&(this._last_planeGraphics=o),e.stopPropagation())}_graphicLayer_leftDown(e){const t={_0x313919:3326,_0x421c5d:3399,_0x480abf:3399,_0x10a354:3374},x=_0x2397ca;var i,s;const o=(i=e[x(2996)])===null||i===void 0||(s=i.entity)===null||s===void 0?void 0:s.plane;Cesium__namespace.defined(o)&&o.hasEdit&&(this._selectedPlane=o[x(t._0x313919)].getValue(),this._map[x(t._0x421c5d)].screenSpaceCameraController.enableInputs&&(this._map[x(t._0x480abf)].screenSpaceCameraController[x(t._0x10a354)]=!1,this._hasChangeEnableInputs=!0))}_graphicLayer_leftUp(e){const t={_0x33c960:3399},x=_0x2397ca;Cesium__namespace.defined(this._selectedPlane)&&(delete this._selectedPlane,this._hasChangeEnableInputs&&(this._map[x(t._0x33c960)].screenSpaceCameraController.enableInputs=!0,delete this[x(2392)]))}_map_mouseMove(e){const t={_0x5ab40b:2391},x=_0x2397ca;if(Cesium__namespace.defined(this._selectedPlane)){const i=e.startPosition.x-e.endPosition.x,s=e[x(1881)].y-e.endPosition.y,o=(i+s)/2;this[x(t._0x5ab40b)].distance=(this._selectedPlane.distance||0)+o,this._map.openSmallTooltip(e.endPosition,this._map.getLangText(x(268)))}else this._map[x(1888)]()}_addedHook(){const e={_0x2829d4:558,_0x5243cc:923,_0x29e965:2884,_0x2fd6e8:3044},t=_0x2397ca;this._graphicLayer&&(this._map.addLayer(this[t(3886)]),this.options[t(1929)]&&(this[t(e._0x2829d4)].on(EventType[t(2031)],this._map_click,this),this[t(3886)].on(EventType.click,this._graphicLayer_click,this),this[t(3886)].on(EventType.leftDown,this._graphicLayer_leftDown,this),this._graphicLayer.on(EventType.leftUp,this[t(e._0x5243cc)],this),this._map.on(EventType.mouseMove,this._map_mouseMove,this))),this[t(e._0x29e965)]&&(Cesium__namespace[t(639)](this[t(e._0x2fd6e8)][t(1091)])&&(this.positions=this.options.positions),Cesium__namespace.defined(this.options.type)&&(this.type=this[t(3044)].type),Cesium__namespace.defined(this.options.distance)&&(this[t(230)]=this.options.distance))}[_0x2397ca(380)](){const e={_0x420070:2265,_0x216605:3886,_0x66b30e:3044,_0x4bfefd:2031,_0x3d5e0c:558,_0xf3261f:2911},t=_0x2397ca;this[t(e._0x420070)](),this[t(e._0x216605)]&&(this[t(e._0x66b30e)].editPlane&&(this._map.off(EventType.click,this._map_click,this),this._graphicLayer.off(EventType[t(e._0x4bfefd)],this[t(1289)],this),this[t(3886)].off(EventType.leftDown,this._graphicLayer_leftDown,this),this._graphicLayer.off(EventType.leftUp,this._graphicLayer_leftUp,this),this._map.off(EventType.mouseMove,this._map_mouseMove,this)),this[t(e._0x3d5e0c)][t(e._0xf3261f)](this._graphicLayer))}[_0x2397ca(1113)](e){const t={_0x87fcf2:1984,_0x8b2763:1668,_0x483f6f:2200},x=_0x2397ca;if(e.length<2)return;const i=[];if(e.length===2){const s=this[x(t._0x87fcf2)](e[0],e[1]);s&&i[x(2434)](s)}else{let s;const o=formatNum$1(getAngle(e[0],e[1]),2);if(o>-.02&&o<.02)s=!1;else{const c=formatNum$1(getAngle(e[0],e[2]),2);s=o<c}this[x(t._0x8b2763)]&&(s=!s);let r;for(let c=0,_=e.length;c<_;++c){const l=(c+1)%_;s?r=this._createPlaneByLine(e[l],e[c]):r=this._createPlaneByLine(e[c],e[l]),r&&((Cesium__namespace.defined(this[x(2499)])||Cesium__namespace.defined(this[x(t._0x483f6f)]))&&this._updateNormal(r,this.angle1,this.angle2),i[x(2434)](r))}Cesium__namespace.defined(this[x(3044)].height)&&(r=new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,-1),this.options.height),i.push(r))}this.setPlanes(i)}[_0x2397ca(1984)](e,t){const x={_0x41adb4:2933,_0x1e1322:295,_0x434b72:508},i=_0x2397ca;if(Cesium__namespace[i(295)][i(230)](e,t)<.1)return null;const s=this.inverseMatrix,o=Cesium__namespace.Matrix4[i(x._0x41adb4)](s,e,new Cesium__namespace.Cartesian3),r=Cesium__namespace.Matrix4[i(2933)](s,t,new Cesium__namespace.Cartesian3),c=new Cesium__namespace[i(x._0x1e1322)](0,0,10),_=Cesium__namespace.Cartesian3.subtract(r,o,new Cesium__namespace.Cartesian3);let l=Cesium__namespace.Cartesian3.cross(_,c,new Cesium__namespace.Cartesian3);l=Cesium__namespace.Cartesian3.normalize(l,l);const h=Cesium__namespace[i(x._0x434b72)][i(3502)](o,l);return Cesium__namespace.ClippingPlane[i(2607)](h)}[_0x2397ca(2594)](e){const t={_0x40eecb:1668,_0x10c39c:265,_0x4ee12e:2134,_0x3c136f:3970,_0x2bd86:428,_0x12bdab:3886},x=_0x2397ca;if(!e)return;const i=new Cesium__namespace.ClippingPlaneCollection({planes:e,edgeWidth:this.options.edgeWidth??0,edgeColor:this.options.edgeColor??Cesium__namespace.Color.WHITE,unionClippingRegions:this[x(t._0x40eecb)]??!1});if(this.clippingPlanes=i,this[x(2884)]&&(this.clipTarget.clippingPlanes=i),this.options.showPlane){this._graphicLayer.clear();const o=this._tileset.boundingSphere.radius;for(let r=0;r<i.length;++r){var s;const c=i.get(r),_=new PlaneEntity({position:this.center,style:{heading:360-(((s=this._layer)===null||s===void 0?void 0:s[x(t._0x10c39c)])??0),dimensions:new Cesium__namespace.Cartesian2(o,o),color:Cesium__namespace.Color.WHITE.withAlpha(.2),editColor:Cesium__namespace[x(t._0x4ee12e)][x(t._0x3c136f)].withAlpha(.5),outline:!0,outlineColor:Cesium__namespace[x(2134)].WHITE,...this[x(3044)].planeStyle,plane:new Cesium__namespace[x(t._0x2bd86)](createPlaneUpdateFunction(c),!1)}});this[x(t._0x12bdab)].addGraphic(_)}}}clear(){const e={_0x30f81f:3886},t=_0x2397ca;if(this._graphicLayer&&this[t(e._0x30f81f)][t(2265)](),delete this._normalZ,delete this._normal_angle1,delete this._normal_angle2,delete this._positions,this.options.clipOutSide=!1,this.clippingPlanes&&delete this.clippingPlanes,this.clipTarget){var x;(x=this.clipTarget.clippingPlanes)!==null&&x!==void 0&&x.enabled&&(this.clipTarget[t(2985)].enabled=!1),this.clipTarget.clippingPlanes=void 0}}[_0x2397ca(1143)](e){const t=_0x2397ca;if(this.clippingPlanes!=null)for(let x=0;x<this[t(2985)].length;x++){const i=this.clippingPlanes.get(x);i[t(230)]=e}}updateAllNormal(e,t){const x={_0x54ef68:2027},i=_0x2397ca;if(this.clippingPlanes!=null)for(let s=0;s<this.clippingPlanes[i(x._0x54ef68)];s++){const o=this.clippingPlanes[i(2001)](s);this._updateNormal(o,e,t)}}[_0x2397ca(2605)](e,t,x){const i={_0x4e440c:2212,_0x2a9356:2883},s=_0x2397ca,o=Cesium__namespace.Math.toRadians(t),r=Cesium__namespace.Math.toRadians(x),c=Math.sin(o)*Math.cos(r),_=Math.sin(o)*Math[s(i._0x4e440c)](r),l=Math[s(1314)](o);e.normal.x=c,e.normal.y=_,e[s(i._0x2a9356)].z=l}toJSON(){const e={_0x494d81:2526},t=_0x2397ca,x=clone(this.options,["layer","eventParent"]);return this[t(e._0x494d81)]&&(x.positions=LngLatArray.toArray(this.positions)),x}}TilesetPlanClip[_0x2397ca(3285)]=ClipType;function createPlaneUpdateFunction(n){return function(){return n}}class TilesetLayer extends BaseGraphicLayer{constructor(e={}){const t={_0x4c1423:3331},x=_0x2397ca;super(e),this.orginRotation={x:0,y:0,z:0},this._orginCenterPoint=new LngLatPoint,this[x(t._0x4c1423)]=e.hasEdit??!0,this._marsOptions={}}get[_0x2397ca(2407)](){return this._tileset}get[_0x2397ca(1285)](){return this._tileset}get[_0x2397ca(3455)](){const e=_0x2397ca;return this.loadOk?(!this._tilesetMatrix&&(this.transform?this._tilesetMatrix=this._tileset.root.transform:this[e(1287)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._tileset[e(3424)].center)),this._tilesetMatrix):Cesium__namespace.Matrix4.ZERO}get[_0x2397ca(2785)](){const e={_0x2af55b:1046,_0x51628f:1046},t=_0x2397ca;return this.loadOk?(!this._inverseMatrix&&(this._inverseMatrix=Cesium__namespace[t(e._0x2af55b)].inverse(this.modelMatrix,new Cesium__namespace[t(e._0x51628f)])),this[t(951)]):Cesium__namespace[t(e._0x2af55b)].ZERO}get highlight(){return this.options.highlight}set highlight(e){const t={_0xcd2b38:480},x=_0x2397ca;this.options[x(t._0xcd2b38)]=e,e?this.bindHighlight(this[x(3044)].highlight):this.unbindHighlight()}get marsJzwStyle(){return this[_0x2397ca({_0x56cced:3044}._0x56cced)].marsJzwStyle}set[_0x2397ca(1624)](e){this.options.marsJzwStyle=e,this._conventMarsOptions()}get style(){return this.options.style}set style(e){const t={_0x49feb2:2017},x={_0x7d0b74:2134},i=_0x2397ca;this.options.style=e,this._tileset&&(e instanceof Cesium__namespace.Cesium3DTileStyle?this._tileset.style=e:typeof e=="function"?this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:{evaluateColor:function(s,o){const r=_0x3361,c=e(s);return c?Cesium__namespace.Color.clone(Cesium__namespace[r(x._0x7d0b74)].fromCssColorString(c),o):o}}}):this[i(3839)][i(357)]=new Cesium__namespace[i(t._0x49feb2)](e))}get customShader(){return this[_0x2397ca(3044)].customShader}set customShader(e){const t={_0x20d4a8:436,_0x3f0df3:3839,_0x222465:3839},x=_0x2397ca;this.options[x(t._0x20d4a8)]=e,this[x(t._0x3f0df3)]&&(this[x(t._0x222465)].customShader=e)}get orginCenterPoint(){return this[_0x2397ca(3117)]}get[_0x2397ca(3563)](){return this[_0x2397ca({_0x596334:924}._0x596334)]}get position(){return this._center.toCartesian()}set[_0x2397ca(760)](e){const t={_0x4cac48:2006},x=_0x2397ca;this[x(t._0x4cac48)]=e}get[_0x2397ca(2006)](){return this._center}set center(e){this._center=LngLatPoint.parse(e),this.updateMatrix()}get height(){return this.alt}set height(e){this.alt=e}get[_0x2397ca(1155)](){if(this[_0x2397ca({_0xf289ad:2006}._0xf289ad)])return this.center.alt}set alt(e){const t=_0x2397ca;this._tileset&&(this[t(2006)].alt=e,this[t(2887)]())}get[_0x2397ca(3424)](){var e;return(e=this._tileset)===null||e===void 0?void 0:e.boundingSphere}get upAxis(){const e={_0x94c395:639,_0x5edd70:3839,_0xf1cf16:3762},t=_0x2397ca;var x,i;if(Cesium__namespace[t(e._0x94c395)]((x=this[t(e._0x5edd70)])===null||x===void 0?void 0:x[t(2816)])){var s;return(s=this[t(3839)])===null||s===void 0?void 0:s[t(2816)]}if(Cesium__namespace[t(639)]((i=this[t(3839)])===null||i===void 0?void 0:i._gltfUpAxis)){var o;return(o=this._tileset)===null||o===void 0?void 0:o[t(e._0xf1cf16)]}}get rotation(){const e={_0x29da8d:3044},t=_0x2397ca;return this.options.rotation?this[t(e._0x29da8d)].rotation:this.orginRotation}set[_0x2397ca(2722)](e){const t={_0x6bee97:2887},x=_0x2397ca;this.options[x(2722)]=e,this[x(t._0x6bee97)]()}get rotation_x(){const e=_0x2397ca;return this.options.rotation&&Cesium__namespace.defined(this[e(3044)].rotation.x)?this.options.rotation.x:this.orginRotation.x}set rotation_x(e){const t=_0x2397ca;this.options.rotation=this.options[t(2722)]||{},this.options.rotation.x=e,this.updateMatrix()}get rotation_y(){const e={_0x55321e:2722,_0x568335:2722},t=_0x2397ca;return this.options.rotation&&Cesium__namespace[t(639)](this.options[t(e._0x55321e)].y)?this.options[t(e._0x568335)].y:this.orginRotation.y}set rotation_y(e){const t=_0x2397ca;this.options.rotation=this[t(3044)].rotation||{},this.options.rotation.y=e,this.updateMatrix()}get[_0x2397ca(265)](){const e={_0xe57b84:3044,_0x3e8f64:3044},t=_0x2397ca;return this[t(e._0xe57b84)].rotation&&Cesium__namespace.defined(this[t(e._0x3e8f64)].rotation.z)?this.options.rotation.z:this.orginRotation.z}set[_0x2397ca(265)](e){const t=_0x2397ca;this.options.rotation=this[t(3044)].rotation||{},this.options.rotation.z=e,this[t(2887)]()}get axis(){const e={_0x195ca9:3878},t=_0x2397ca;return this.options[t(e._0x195ca9)]||""}set axis(e){const t={_0x5f6fd:3044,_0xe083ca:2887},x=_0x2397ca;this[x(t._0x5f6fd)][x(3878)]=e,this[x(t._0xe083ca)]()}get[_0x2397ca(1760)](){const e=_0x2397ca;return this[e(3044)][e(1760)]||1}set scale(e){const t={_0x7b7fef:2887},x=_0x2397ca;this.options.scale=e,this[x(t._0x7b7fef)]()}get allowDrillPick(){return this[_0x2397ca({_0x2b9d33:3044}._0x2b9d33)].allowDrillPick}set allowDrillPick(e){const t=_0x2397ca;this.options[t(1932)]=e}get[_0x2397ca(1129)](){const e={_0x385daf:3044,_0x3a3d77:1129},t=_0x2397ca;return this[t(e._0x385daf)][t(e._0x3a3d77)]}set luminanceAtZenith(e){const t={_0x2e4bd5:1129,_0x7fc589:2288,_0x790a47:848},x=_0x2397ca;this.options[x(t._0x2e4bd5)]=e,!this._tileset.imageBasedLighting&&(this._tileset[x(848)]=new Cesium__namespace[x(t._0x7fc589)]({luminanceAtZenith:e})),this._tileset[x(t._0x790a47)].luminanceAtZenith=e}get[_0x2397ca(2994)](){const e={_0x5b9d9a:1755},t=_0x2397ca;return this._map&&!this[t(e._0x5b9d9a)]&&this._initTilesetPlanClip(),this[t(1755)]}get[_0x2397ca(1e3)](){const e=_0x2397ca;return this._hasEdit&&this[e(3090)]}set hasEdit(e){const t=_0x2397ca;this[t(3331)]=e}_initTilesetPlanClip(){const e={_0x19819f:1755,_0xee38b5:3044},t=_0x2397ca;this._tilesetPlanClip&&this._tilesetPlanClip.destroy(),this[t(e._0x19819f)]=new TilesetPlanClip({...this[t(e._0xee38b5)].planClip,layer:this}),this._map.addThing(this[t(1755)])}get clip(){const e={_0x43d0a2:558},t=_0x2397ca;return this[t(e._0x43d0a2)]&&!this._tilesetClip&&(this.reload(),this._initTilesetClip()),this[t(3253)]}_initTilesetClip(){const e={_0x4a5c4c:2375},t=_0x2397ca;this[t(3253)]&&this._tilesetClip[t(2941)](),this._tilesetClip=new TilesetClip({...this.options.clip,layer:this}),this._map[t(e._0x4a5c4c)](this._tilesetClip)}get flat(){const e={_0x56d2c0:558,_0x4b2d58:2399},t=_0x2397ca;return this[t(e._0x56d2c0)]&&!this[t(e._0x4b2d58)]&&(this.reload(),this._initTilesetFlat()),this._tilesetFlat}_initTilesetFlat(){const e={_0x4c1be9:2399,_0x29ff6e:2941},t=_0x2397ca;this._tilesetFlat&&this[t(e._0x4c1be9)][t(e._0x29ff6e)](),this[t(e._0x4c1be9)]=new TilesetFlat({...this.options.flat,layer:this}),this[t(558)][t(2375)](this._tilesetFlat)}get flood(){return this[_0x2397ca({_0x37541e:558}._0x37541e)]&&!this._tilesetFlood&&(this.reload(),this._initTilesetFlood()),this._tilesetFlood}_initTilesetFlood(){const e=_0x2397ca;this._tilesetFlood&&this[e(971)].destroy(),this._tilesetFlood=new TilesetFlood({...this.options[e(1014)],layer:this}),this._map.addThing(this._tilesetFlood)}get isEditing(){return this._enabledEdit}async _createCesium3DTileset(){const e={...this.options,marsOptions:this._marsOptions};return delete e.url,await Cesium__namespace.Cesium3DTileset.fromUrl(getUrlResource(this.options),e)}_addedHook(){const e={_0x4b30aa:3044,_0xaaf5cb:407,_0x5a3aeb:2994,_0x3d01ff:1286},t={_0x44011e:386},x=_0x2397ca;var i,s,o,r,c,_,l,h,d,u,m,f;this.loadOk=!1,super._addedHook(),this._conventMarsOptions(),(((i=this.options.flat)===null||i===void 0||(s=i.area)===null||s===void 0?void 0:s.length)>0||(o=this[x(e._0x4b30aa)].flat)!==null&&o!==void 0&&o.enabled)&&this[x(1726)](),(((r=this.options.flood)===null||r===void 0||(c=r.area)===null||c===void 0?void 0:c.length)>0||(_=this.options.flood)!==null&&_!==void 0&&_[x(e._0xaaf5cb)])&&this._initTilesetFlood(),(((l=this.options.clip)===null||l===void 0||(h=l.area)===null||h===void 0?void 0:h[x(2027)])>0||(d=this.options[x(1206)])!==null&&d!==void 0&&d.enabled)&&this._initTilesetClip(),(((u=this.options[x(2994)])===null||u===void 0||(m=u[x(1091)])===null||m===void 0?void 0:m.length)>0||(f=this.options[x(e._0x5a3aeb)])!==null&&f!==void 0&&f[x(407)])&&this._initTilesetPlanClip(),this._createCesium3DTileset()[x(e._0x3d01ff)](g=>{const b=x;this.fire(EventType[b(t._0x44011e)],{tileset:g}),this._initModel(g),this.loadOk=!0,this._readyPromise.resolve(this),this.fire(EventType.load,{tileset:g})})}_removedHook(){const e={_0x17f85e:971,_0x1c8432:558,_0x294b09:1755,_0x2d1417:414,_0x3a7f01:639,_0x4637b0:3573,_0x4d0c7f:3809,_0x5d290e:3839},t=_0x2397ca;this._tilesetClip&&(this._map.removeThing(this._tilesetClip,!0),delete this[t(3253)]),this._tilesetFlat&&(this._map.removeThing(this._tilesetFlat,!0),delete this._tilesetFlat),this[t(e._0x17f85e)]&&(this[t(e._0x1c8432)][t(414)](this._tilesetFlood,!0),delete this._tilesetFlood),this[t(e._0x294b09)]&&(this._map[t(e._0x2d1417)](this._tilesetPlanClip,!0),delete this._tilesetPlanClip),super._removedHook(),Cesium__namespace[t(e._0x3a7f01)](this[t(3044)].distanceDisplayCondition_far)&&this._map[t(e._0x4637b0)](EventType.cameraChanged,this[t(e._0x4d0c7f)],this),this._tileset&&(this._map.scene.primitives.remove(this._tileset),delete this[t(e._0x5d290e)])}reload(){const e=_0x2397ca;this[e(2276)]=Cesium__namespace.defer(),this._removedHook(),this._addedHook()}[_0x2397ca(363)](e){const t={_0x11dfb3:1364,_0x146815:1133,_0x12fde4:2006,_0x2c2aff:3409,_0x49657b:639,_0x239df4:2006},x=_0x2397ca;e&&((Array.isArray(e)||isString(e))&&(e=LngLatPoint[x(t._0x11dfb3)](e)),!this[x(1133)]&&(this[x(t._0x146815)]=new LngLatPoint),e.lat&&(this.center.lat=e.lat),e.lng&&(this[x(t._0x12fde4)][x(t._0x2c2aff)]=e.lng),Cesium__namespace[x(t._0x49657b)](e.alt_offset)&&(this[x(t._0x239df4)].alt=this._orginCenterPoint[x(1155)]+e.alt_offset),Cesium__namespace.defined(e[x(1155)])&&(this[x(2006)].alt=e.alt))}_setOptionsHook(e,t){const x={_0x47b275:3839,_0x194b44:3945,_0x162840:4032,_0x53e78d:2994,_0x4ecc50:760,_0x122c67:1285,_0x305125:3044},i=_0x2397ca;if(!this[i(x._0x47b275)])return;let s;for(const c in t){const _=e[c];switch(c){case i(480):{var o,r;(o=this[i(x._0x194b44)])!==null&&o!==void 0&&o[i(x._0x162840)]&&!((r=t.highlight)!==null&&r!==void 0&&r.type)?this._highlight_mouseEventHandler(this[i(3945)].event):super._setOptionsHook(e,t);return}case i(1660):case"chinaCRS":case"flat":case"flood":case"clip":case i(x._0x53e78d):{this[i(3804)]();return}case i(x._0x4ecc50):case i(2722):case"scale":case"axis":s=!0;break;case i(4010):case"luminanceAtZenith":case"style":case"marsJzwStyle":case"customShader":this[c]=_;break;default:{try{this[i(x._0x122c67)][c]=_}catch{this.reload()}break}}}s&&(this._mergePostion(this[i(x._0x305125)].position),this.updateMatrix())}_initModel(e){const t={_0x4367b0:558,_0x4a4df3:3839,_0x3279f8:1130,_0x4327fd:795,_0x292570:1046,_0x19aeca:3476,_0x1a3288:2358,_0x40f125:295,_0x528aa3:3134,_0x31c144:3529,_0x4ba6eb:3117,_0xa98390:2044,_0x2c7ebc:1619,_0x30ac52:3044,_0x4cdf2b:1264},x=_0x2397ca;var i,s;this._tileset=e,this._tileset.name=this[x(2044)],this._tileset.show=this[x(3482)],this._tileset[x(3170)]=this.id,this[x(t._0x4367b0)].scene[x(1187)].add(this._tileset),this[x(t._0x4a4df3)].initialTilesLoaded[x(t._0x3279f8)](r=>{this.fire(EventType.initialTilesLoaded,r)}),this[x(t._0x4a4df3)][x(t._0x4327fd)].addEventListener(r=>{this.fire(EventType.allTilesLoaded,r)}),this._orginCenterPosition=Cesium__namespace.clone(this._tileset.boundingSphere.center);const o=(i=this[x(t._0x4a4df3)][x(2772)])===null||i===void 0?void 0:i.transform;if(this.transform=this.options.transform??!!(o&&!o.equals(Cesium__namespace.Matrix4.IDENTITY)),this[x(3090)]){this[x(457)]=Cesium__namespace[x(t._0x292570)].inverse(Cesium__namespace.Matrix4[x(t._0x19aeca)](this._tileset._root[x(3090)]),new Cesium__namespace[x(t._0x292570)]);const r=Cesium__namespace.Matrix4.fromArray(this._tileset[x(1432)].transform),c=Cesium__namespace.Matrix4.getTranslation(r,new Cesium__namespace.Cartesian3);if(Cesium__namespace.defined(c)&&Cesium__namespace.Cartographic.fromCartesian(c)){this[x(924)]=c;const _=Cesium__namespace[x(1046)][x(t._0x1a3288)](r,new Cesium__namespace[x(3596)]),l=Cesium__namespace[x(1046)].getMatrix3(Cesium__namespace[x(1620)].eastNorthUpToFixedFrame(c),new Cesium__namespace.Matrix3),h=Cesium__namespace.Matrix3.getColumn(l,0,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Matrix3[x(3695)](l,1,new Cesium__namespace.Cartesian3),u=Cesium__namespace[x(3596)].getColumn(l,2,new Cesium__namespace[x(t._0x40f125)]);let m=Cesium__namespace.Matrix3[x(3695)](_,0,new Cesium__namespace.Cartesian3);m=Cesium__namespace.Cartesian3.cross(m,u,m),m=Cesium__namespace.Cartesian3[x(t._0x528aa3)](u,m,m),m=Cesium__namespace.Cartesian3.normalize(m,m);let f=Cesium__namespace.Cartesian3.angleBetween(h,m);Cesium__namespace.Cartesian3.angleBetween(d,m)>Math.PI*.5&&(f=2*Math.PI-f),this.orginRotation={x:0,y:0,z:Number(Cesium__namespace[x(3876)].toDegrees(f)[x(t._0x31c144)](1))}}else this.transform=!1}if(this[x(t._0x4ba6eb)]=LngLatPoint.fromCartesian(this._orginCenterPosition),logInfo((this[x(t._0xa98390)]||x(t._0x2c7ebc))+x(3571)+this._orginCenterPoint.toString()),(s=Cesium__namespace.Mars3DEx)!==null&&s!==void 0&&s.getCache){const r=Cesium__namespace.Mars3DEx.getCache(this.id);r!=null&&r[x(1624)]&&r.marsJzwStyle.setUniform(x(2138),this.upAxis===Cesium__namespace.Axis.Z)}if(Cesium__namespace.defined(this[x(t._0x30ac52)].style)&&(this.style=this.options.style),this._opacity!==1&&this.setOpacity(this._opacity),this._center=this[x(t._0x4ba6eb)].clone(),this._mergePostion(this.options.position),this.options.chinaCRS){const r=this.transformCenter(this.center);this._mergePostion(r)}this._hasUpdateMater()&&this.updateMatrix(),Cesium__namespace.defined(this.options.distanceDisplayCondition_far)&&this[x(t._0x4cdf2b)](),this.options.clampToGround&&this.clampToGround(),this.options.flyTo&&this[x(3026)]()}clampToGround(e=1){const t={_0x3da1bb:558},x=_0x2397ca;this._map&&this[x(t._0x3da1bb)].hasTerrain?getSurfaceTerrainHeight(this[x(558)][x(3399)],this._orginCenterPosition).then(i=>{Cesium__namespace.defined(i.height)&&(this.alt=i.height-this._orginCenterPoint.alt+e)}):this[x(1155)]=-this._orginCenterPoint.alt+e}[_0x2397ca(1411)](){const e=_0x2397ca;return!!(!this.center.equals(this._orginCenterPoint)||this.options[e(2722)]||this[e(3044)].scale>0&&this.options.scale!==1||Cesium__namespace.defined(this.options.axis))}[_0x2397ca(2887)](){const e={_0x121848:3044,_0x6cc22d:734,_0x43c56a:1046,_0x248990:1760,_0x925285:1816,_0x2c735e:1098,_0x491b06:3975},t=_0x2397ca;if(!this._tileset)return;if(this.options.updateMatrix){const i=this[t(3044)].updateMatrix(this.position,this);return this[t(3839)].modelMatrix=i,i}if(!this.transform)return this[t(2973)]();let x=Cesium__namespace.Transforms[t(871)](this.position);if(this[t(e._0x121848)].rotation){const i=Cesium__namespace.Matrix3.fromRotationX(Cesium__namespace.Math.toRadians(this[t(e._0x6cc22d)])),s=Cesium__namespace.Matrix3.fromRotationY(Cesium__namespace.Math.toRadians(this.rotation_y)),o=Cesium__namespace.Matrix3.fromRotationZ(Cesium__namespace.Math.toRadians(360-this.rotation_z)),r=Cesium__namespace.Matrix4.fromRotationTranslation(i),c=Cesium__namespace[t(e._0x43c56a)].fromRotationTranslation(s),_=Cesium__namespace[t(1046)].fromRotationTranslation(o);Cesium__namespace.Matrix4.multiply(x,r,x),Cesium__namespace[t(e._0x43c56a)].multiply(x,c,x),Cesium__namespace.Matrix4.multiply(x,_,x)}if(this[t(3044)][t(e._0x248990)]>0&&this.options.scale!==1&&Cesium__namespace.Matrix4[t(e._0x925285)](x,this.options[t(1760)],x),Cesium__namespace.defined(this.options.axis)){let i;if(isString(this.options.axis))switch(this.options.axis.toUpperCase()){case t(2427):i=Cesium__namespace.Axis.Y_UP_TO_Z_UP;break;case"Z_UP_TO_Y_UP":i=Cesium__namespace.Axis.Z_UP_TO_Y_UP;break;case"X_UP_TO_Z_UP":i=Cesium__namespace[t(3975)].X_UP_TO_Z_UP;break;case"Z_UP_TO_X_UP":i=Cesium__namespace.Axis.Z_UP_TO_X_UP;break;case t(e._0x2c735e):i=Cesium__namespace.Axis.X_UP_TO_Y_UP;break;case"Y_UP_TO_X_UP":i=Cesium__namespace.Axis.Y_UP_TO_X_UP;break}else this[t(3044)].axis instanceof Cesium__namespace[t(e._0x491b06)]&&(i=this.options.axis);i&&(x=Cesium__namespace.Matrix4[t(2867)](x,i,x))}return this._tileset._root.transform=x,this[t(1788)](EventType.updatePosition,{position:this[t(760)]}),x}updateMatrix2(){const e={_0x1efc50:760},t=_0x2397ca;if(!this._tileset||!this._tileset[t(1432)])return;const x=Cesium__namespace[t(1899)].fromCartesian(this[t(3839)].boundingSphere[t(2006)]),i=Cesium__namespace.Cartesian3[t(238)](x.longitude,x[t(489)],0),s=this.position,o=Cesium__namespace.Cartesian3[t(2527)](s,i,new Cesium__namespace.Cartesian3),r=Cesium__namespace.Matrix4.fromTranslation(o);return this._tileset.modelMatrix=r,this.fire(EventType.updatePosition,{position:this[t(e._0x1efc50)]}),r}getPositionByOrginMatrix(e){const t={_0xf688e5:3566},x=_0x2397ca;if(this.orginMatrix){const i=Cesium__namespace[x(1046)][x(t._0xf688e5)](this._tileset[x(1432)].transform,this[x(457)],new Cesium__namespace.Matrix4);return Cesium__namespace[x(1046)].multiplyByPoint(i,e,new Cesium__namespace.Cartesian3)}return e}setOpacity(e){const t={_0x13e474:3941},x=_0x2397ca;this[x(3044)][x(1028)]?this.options.onSetOpacity(e):this._tileset&&(this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:x(t._0x13e474)+e+")"}))}flyTo(e={}){const t={_0x232f6a:3044,_0xd69c5d:558,_0x4e30ba:1587,_0x190930:558,_0x2b27f9:1171},x=_0x2397ca;return this._map?(this[x(558)].cancelFlyTo(),this[x(3044)][x(628)]&&(e={...this.options.flyToOptions,...e}),this[x(t._0x232f6a)].center?this._map.setCameraView(this.options.center,e):this.options.extent?this[x(t._0xd69c5d)][x(t._0x4e30ba)](this.options.extent,e):this.loadOk&&this[x(3839)]._root?this[x(t._0x190930)].flyToPoint(this._tileset.boundingSphere.center,{radius:this._tileset.boundingSphere.radius*2,maxPitch:-45,...e}):this[x(t._0x2b27f9)].then(i=>this._map.flyToPoint(this._tileset.boundingSphere.center,{radius:this._tileset.boundingSphere.radius*2,maxPitch:-45,...e}))):Promise.resolve(!1)}[_0x2397ca(3318)](e){const t={_0x46aeb9:1755,_0x450ea8:2994,_0x3f0188:3253,_0x171a93:1180,_0x3e3f45:1014,_0xb835d1:1180},x=_0x2397ca;!this._tileset||!this.loadOk||(e.position=this.center.toArray(),this[x(t._0x46aeb9)]&&(e[x(t._0x450ea8)]=this[x(t._0x46aeb9)].toJSON()),this._tilesetClip&&(e.clip=this[x(t._0x3f0188)].toJSON()),this._tilesetFlat&&(e.flat=this._tilesetFlat[x(t._0x171a93)]()),this._tilesetFlood&&(e[x(t._0x3e3f45)]=this[x(971)][x(t._0xb835d1)]()))}setProperties(e,t){const x={_0x51dbf8:2465},i={_0x20f966:1473},s=_0x2397ca;return this[s(x._0x51dbf8)]=e,this._properties={},t.forEach(o=>{const r=s,c=o[e];this[r(i._0x20f966)][c]=o}),this._bindVisibleEvent(),this}[_0x2397ca(3231)](e,t){const x={_0x5932a5:1473,_0x4996a7:744,_0x1fcc0f:3622,_0x39beaf:1255},i=_0x2397ca;if(!e||!t){delete this[i(x._0x5932a5)],this[i(3622)]&&(this._tileset[i(x._0x4996a7)].removeEventListener(this._updateTile,this),this[i(x._0x1fcc0f)]=!1);return}return t[i(x._0x39beaf)](s=>{const o=s[e];delete this._properties[o]}),this}[_0x2397ca(1559)](){const e={_0xe29123:3622},t=_0x2397ca;!this._isBindTileVisible&&this.readyPromise[t(1286)](()=>{const x=t;this._tileset.tileVisible[x(1130)](this._updateTile,this),this[x(e._0xe29123)]=!0})}[_0x2397ca(892)](e){const t={_0x408a20:2569,_0x3b4d08:2465,_0xb1f1ab:3120,_0x25e9c6:1653},x=_0x2397ca,i=e.content;for(let s=0;s<i[x(1944)];s++){const o=i[x(t._0x408a20)](s);if(this._properties){const r=o.getProperty(this[x(t._0x3b4d08)]);r&&this[x(t._0xb1f1ab)](o,this._properties[r])}}this.fire(EventType[x(t._0x25e9c6)])}_setFeatureProperties(e,t){const x=_0x2397ca;if(!(!e||!t))for(const i in t){const s=t[i];e.hasProperty(i)&&e[x(4045)](i)===s||e.setProperty(i,s)}}[_0x2397ca(2920)](e){const t={_0x5ed968:558},x=_0x2397ca;if(!e)return!1;const i=this[x(t._0x5ed968)].chinaCRS,s=this[x(3044)].chinaCRS,o=getTransFun(s,i);if(!o)return!1;const r=o([e.lng,e.lat]);return{lng:r[0],lat:r[1],alt:e.alt}}bindVisibleDistance(){this._map.on(EventType.cameraChanged,this.updateVisibleDistance,this)}[_0x2397ca(3809)](){const e={_0x3dfbde:2832},t=_0x2397ca;if(!this._show||!this._tileset||!this[t(e._0x3dfbde)]||this._map.scene[t(2033)]!==Cesium__namespace[t(1721)][t(1144)])return;const x=Cesium__namespace.Cartesian3[t(230)](this[t(760)],this._map.camera[t(4002)]);this._tileset.show=x<this[t(3044)][t(2388)]}[_0x2397ca(2852)](e){const t={_0x45c6af:1212},x=_0x2397ca;this._map[x(1212)]();const i=e.pickedObject;if(i||this._highlightOptions.all){if(isFunction(this._highlightOptions.filter)&&this._highlightOptions[x(3576)](e)===!1)return;const s=this.allowDrillPick;if(isFunction(s)&&s(e)===!0)return;this[x(3945)]={feature:i,event:e},this[x(558)].openHighlight(this,this._highlightOptions,e)}else this[x(558)][x(t._0x45c6af)]()}[_0x2397ca(464)](e,t=!0,x){const i={_0x45653d:3945,_0x381b16:3945,_0x189014:1661,_0x3a0efa:1978,_0x436a9b:4032,_0x3a8d81:1180,_0x48774f:1978,_0x4d0eec:2017,_0x3a5b27:1978},s=_0x2397ca;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this),this[s(3945)]=this._last_picked||{event:{layer:this}},x&&(this[s(i._0x45653d)].feature=x);const o=e||this._highlightOptions;if(o){var r,c;if((r=this[s(i._0x381b16)])!==null&&r!==void 0&&r[s(i._0x189014)]&&!o[s(807)]&&!o[s(i._0x3a0efa)]){var _;const h=this[s(3945)].feature;if(h!=null&&h.color&&o.color)if(this[s(3945)].originalColor=h.color.clone(),isFunction(o.color)){var l;h.color=getCesiumColor(o.color((l=this._last_picked)===null||l===void 0?void 0:l[s(i._0x436a9b)]))}else h.color=getColorByStyle(o);h!=null&&(_=h.content)!==null&&_!==void 0&&_._model&&o[s(1243)]&&(this._last_picked.originalStyle=ModelStyleConver[s(i._0x3a8d81)](h[s(953)]._model),ModelStyleConver.toCesiumVal(o.model,h[s(953)]._model,!1))}else{const h=Cesium__namespace.Color.fromCssColorString(o[s(1089)]).toCssColorString();if(o.uniqueKey){const d=this._last_picked.feature.getProperty(o[s(i._0x48774f)]);this._tileset.style=new Cesium__namespace[s(i._0x4d0eec)]({color:{conditions:[["${"+o[s(i._0x3a5b27)]+"} ==='"+d+"'",h]]}})}else this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:{conditions:[["true",h]]}});this._highlightAll=!0}this.fire(EventType.highlightOpen,(c=this._last_picked)===null||c===void 0?void 0:c[s(i._0x436a9b)],!0)}}closeHighlight(){const e={_0x511744:357,_0x1e336f:357,_0x1a9330:1661,_0x2c2512:3945,_0x710bf3:2261,_0x742d00:1788,_0x362932:4032},t=_0x2397ca;var x,i;if(this[t(3945)]){if(this._highlightAll)this._highlightAll=!1,this._tileset[t(e._0x511744)]=this[t(e._0x1e336f)];else if((x=this._last_picked)!==null&&x!==void 0&&x[t(e._0x1a9330)]){var s;const o=this._last_picked[t(1661)];this._last_picked.originalColor&&(o.color=this._last_picked.originalColor),o!=null&&(s=o.content)!==null&&s!==void 0&&s._model&&this[t(e._0x2c2512)].originalStyle&&ModelStyleConver.toCesiumVal(this._last_picked[t(e._0x710bf3)],o.content._model,!1)}this._map._clearLastHighlight(),this[t(e._0x742d00)](EventType.highlightClose,(i=this._last_picked)===null||i===void 0?void 0:i[t(e._0x362932)],!0),delete this._last_picked}}hasPopup(){return!!this._popupConfig}bindPopup(e,t){return this._popupConfig={content:e,options:t,layer:this},this._bindControl(),this}unbindPopup(){return this.closePopup(),this._popupConfig=null,this}[_0x2397ca(1673)](){return this._map&&this.hasPopup()&&this._map.popup.close(null,this),this}_conventMarsOptions(){const e={_0x19d5f6:852},t=_0x2397ca;var x;if(!((x=Cesium__namespace.Mars3DEx)!==null&&x!==void 0&&x.getCacheOrAdd))return;this._marsOptions[t(e._0x19d5f6)]=this.id;const i=Cesium__namespace.Mars3DEx.getCacheOrAdd(this.id);this[t(1624)]?i.marsJzwStyle=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel.UNLIT,uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace[t(1371)].BOOL,value:!0}},fragmentShaderText:isString(this.marsJzwStyle)?this.marsJzwStyle:`
          void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
          {
            vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置

            // 注意shader中写浮点数是，一定要带小数点，否则会报错，比如0需要写成0.0，1要写成1.0
            float _baseHeight = 0.0; // 物体的基础高度，需要修改成一个合适的建筑基础高度
            float _heightRange = 80.0; // 高亮的范围(_baseHeight ~ _baseHeight + _heightRange)
            float _glowRange = 100.0; // 光环的移动范围(高度)

            // 建筑基础色
            float mars_height = (u_mars3d_jzw_upz ? position.z : position.y) - _baseHeight;
            float mars_a11 = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;
            float mars_a12 = mars_height / _heightRange + sin(mars_a11) * 0.1;

            material.diffuse = mix(material.diffuse, vec3(0.0, 0.0, 1.0), 0.5); // 颜色
            material.diffuse *= vec3(mars_a12);// 渐变

            // 动态光环
            float time = fract(czm_frameNumber / 360.0);
            time = abs(time - 0.5) * 2.0;
            float mars_h = clamp(mars_height / _glowRange, 0.0, 1.0);
            float mars_diff = step(0.005, abs(mars_h - time));
            material.diffuse += material.diffuse * (1.0 - mars_diff);
          } `}):delete i.marsJzwStyle}startEditing(){const e=_0x2397ca;if(this._enabledEdit||!this.hasEdit)return this;if(this._enabledEdit=!0,!this._map)throw new Error("编辑时_map不能为空,请将对象添加到Map");this._map.mouseEvent[e(1352)]=this._entity,this._map.mouseEvent.enabledMoveTarget=!1,!this.editing&&(this.editing=new EditTileset(this)),this.editing.activate&&this.editing.activate()}stopEditing(){const e={_0x1720a5:3654},t=_0x2397ca;var x;if(!this._enabledEdit)return this;(x=this[t(e._0x1720a5)])!==null&&x!==void 0&&x.disable&&this.editing.disable(),this._map&&(this._map.closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this._map.mouseEvent.enabledMoveTarget=!0),this._enabledEdit=!1}}register$2("tileset",TilesetLayer),register$2("3dtiles",TilesetLayer);class OsmBuildingsLayer extends TilesetLayer{async _createCesium3DTileset(){return await Cesium__namespace.createOsmBuildingsAsync(this.options)}}register$2(_0x2397ca(2245),OsmBuildingsLayer);class I3SLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x2397ca;super(e),this[t(3178)]={}}get layer(){return this._i3sProvider}get[_0x2397ca(1624)](){return this.options.marsJzwStyle}set[_0x2397ca(1624)](e){this.options.marsJzwStyle=e,this._conventMarsOptions()}get upAxis(){const e={_0x544275:3163,_0xe11519:3388},t=_0x2397ca,x=this[t(e._0x544275)][t(e._0xe11519)];for(let i=0;i<x.length;i++){const s=x[i]._tileset;if(Cesium__namespace[t(639)](s))return s==null?void 0:s._modelUpAxis}}[_0x2397ca(1956)](e,t){const x={_0x7ac431:639},i=_0x2397ca;if(!this._i3sProvider)return;const s=this._i3sProvider._layers;for(let o=0;o<s.length;o++){const r=s[o]._tileset;Cesium__namespace[i(x._0x7ac431)](r)&&e.call(t,r)}return this}async[_0x2397ca(596)](){const e={_0x147555:520,_0x482244:2114,_0x609255:3178},t=_0x2397ca;let x;this.options[t(e._0x147555)]&&(this.options.geoidTiledTerrainProvider instanceof Cesium__namespace[t(2114)]?x=this.options[t(520)]:x=await Cesium__namespace[t(e._0x482244)].fromUrl(this.options[t(520)].url,this.options[t(520)])),this._marsOptions._mars3d_layerId=this.id;const i={...this.options,geoidTiledTerrainProvider:x,cesium3dTilesetOptions:{...this.options,marsOptions:this[t(e._0x609255)]}};return delete i[t(914)],await Cesium__namespace.I3SDataProvider.fromUrl(getUrlResource(this.options),i)}_addedHook(){const e={_0x17dc7d:2832},t={_0x6d1ee6:2832,_0x4b48a2:1788},x=_0x2397ca;this[x(e._0x17dc7d)]=!1,super._addedHook(),this._conventMarsOptions(),this._createI3SDataProvider().then(i=>{const s=x;this[s(1788)](EventType.loadBefore,{provider:i}),this[s(680)](i),this[s(t._0x6d1ee6)]=!0,this._readyPromise.resolve(this),this[s(t._0x4b48a2)](EventType.load,{provider:i,layers:i._layers})})}[_0x2397ca(380)](){const e={_0x8f4a6d:558},t=_0x2397ca;super._removedHook(),this._i3sProvider&&(this[t(e._0x8f4a6d)].scene.primitives.remove(this[t(3163)]),delete this._i3sProvider)}reload(){const e=_0x2397ca;this._removedHook(),this[e(2670)]()}_initModel(e){const t={_0x348204:3163,_0xeb3b5e:558,_0x9ad7ec:1187,_0x4d1db4:3117,_0x456297:1133},x=_0x2397ca;this._i3sProvider=e,this._i3sProvider._mars3d_layerId=this.id,this[x(t._0x348204)].show=this.show,this[x(t._0xeb3b5e)].scene[x(t._0x9ad7ec)].add(this._i3sProvider),this._extent=this._i3sProvider.extent,this._orginCenterPoint=LngLatPoint.fromCartographic(Cesium__namespace.Rectangle.center(this[x(1061)])),this._orginCenterPosition=this[x(t._0x4d1db4)].toCartesian(),logInfo((this.name||"I3SLayer")+" 模型中心位置:"+this._orginCenterPoint.toString()),this[x(t._0x456297)]=this[x(3117)].clone(),this.options.flyTo&&this.flyToByAnimationEnd()}flyTo(e={}){const t={_0x5798ac:3863,_0x11bb3d:3044,_0x58d527:558,_0x3efe2f:2907},x=_0x2397ca;if(!this._map)return Promise[x(t._0x5798ac)](!1);if(this._map.cancelFlyTo(),this.options.flyToOptions&&(e={...this[x(t._0x11bb3d)].flyToOptions,...e}),this[x(t._0x11bb3d)].center)return this._map.setCameraView(this.options.center,e);if(this.options[x(2907)])return this[x(t._0x58d527)].flyToExtent(this.options[x(t._0x3efe2f)],e);if(this._center)return this._map.flyToPoint(this._center,{maxPitch:-45,...e})}_conventMarsOptions(){const e={_0x32e708:2743,_0x50a778:2747},t=_0x2397ca;var x;if(!((x=Cesium__namespace[t(e._0x32e708)])!==null&&x!==void 0&&x.getCacheOrAdd))return;this._marsOptions.customShaders=this.id;const i=Cesium__namespace[t(2743)][t(e._0x50a778)](this.id);this.marsJzwStyle?i.marsJzwStyle=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel.UNLIT,uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace.UniformType.BOOL,value:!1}},fragmentShaderText:isString(this.marsJzwStyle)?this.marsJzwStyle:`
            void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
            {
              vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置

              // 注意shader中写浮点数是，一定要带小数点，否则会报错，比如0需要写成0.0，1要写成1.0
              float _baseHeight = 0.0; // 物体的基础高度，需要修改成一个合适的建筑基础高度
              float _heightRange = 80.0; // 高亮的范围(_baseHeight ~ _baseHeight + _heightRange)
              float _glowRange = 100.0; // 光环的移动范围(高度)

              // 建筑基础色
              float mars_height = (u_mars3d_jzw_upz ? position.z : position.y) - _baseHeight;
              float mars_a11 = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;
              float mars_a12 = mars_height / _heightRange + sin(mars_a11) * 0.1;

              material.diffuse = mix(material.diffuse, vec3(0.0, 0.0, 1.0), 0.5); // 颜色
              material.diffuse *= vec3(mars_a12);// 渐变

              // 动态光环
              float time = fract(czm_frameNumber / 360.0);
              time = abs(time - 0.5) * 2.0;
              float mars_h = clamp(mars_height / _glowRange, 0.0, 1.0);
              float mars_diff = step(0.005, abs(mars_h - time));
              material.diffuse += material.diffuse * (1.0 - mars_diff);
            } `}):delete i.marsJzwStyle}}register$2("i3s",I3SLayer);const mins=[Cesium__namespace.Math.toRadians(.05),Cesium__namespace.Math[_0x2397ca(2500)](.1),Cesium__namespace.Math[_0x2397ca(2500)](.2),Cesium__namespace.Math.toRadians(.5),Cesium__namespace[_0x2397ca(3876)].toRadians(1),Cesium__namespace.Math.toRadians(2),Cesium__namespace.Math[_0x2397ca(2500)](5),Cesium__namespace.Math.toRadians(10)];function gridPrecision(n){return n<.01?2:n<.1?1:(n<1,0)}function GraticuleProvider(n){const e={_0x6738a7:347,_0x2c3316:3858,_0x53e45e:2021,_0x593da9:3399,_0x47f93d:3042,_0x3a6197:279,_0x2bf467:565,_0x2659ac:850,_0x17bebf:1079,_0x8026a4:1733},t={_0x213c01:850,_0x265a95:1859,_0x4c7347:3989},x=_0x2397ca;this[x(3044)]=n,this[x(e._0x6738a7)]=n[x(3681)]||new Cesium__namespace.GeographicTilingScheme,this._tileWidth=n[x(4016)]||256,this[x(e._0x2c3316)]=n.tileHeight||256,this[x(e._0x53e45e)]=!0,this[x(1081)]=n.sexagesimal||!1,this._numLines=n[x(2680)]||50,this._scene=n[x(e._0x593da9)],this[x(e._0x47f93d)]=this._scene.globe[x(1782)],this[x(2989)]=new Cesium__namespace[x(3213)],this[x(e._0x3a6197)].primitives[x(e._0x2bf467)](this._labels),this[x(e._0x2659ac)]=new Cesium__namespace[x(e._0x17bebf)],this[x(279)].primitives.add(this[x(850)]);const i=document.createElement(x(e._0x8026a4));i.width=256,i.height=256,this[x(2153)]=i;const s=this;this._scene.camera.moveEnd.addEventListener(function(){const o=x;s._show&&(s[o(t._0x213c01)][o(t._0x265a95)](),s._labels.removeAll(),s[o(t._0x4c7347)]=null,s._drawGrid(s._getExtentView()))}),this._scene.imageryLayers.addImageryProvider(this)}Object[_0x2397ca(3901)](GraticuleProvider.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){const n={_0x4a0623:347,_0x10c906:1358},e=_0x2397ca;return this[e(n._0x4a0623)][e(n._0x10c906)]}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this[_0x2397ca(2021)]}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),GraticuleProvider[_0x2397ca(2121)][_0x2397ca(1990)]=function(n,e,t,x){const i={_0x486050:1417,_0x5110e8:627,_0x5bde3c:653},s=_0x2397ca,o=LabelStyleConver[s(2868)](this.options.labelStyle||{},{style:Cesium__namespace[s(i._0x486050)][s(i._0x5110e8)],fillColor:Cesium__namespace.Color.AZURE,outlineColor:Cesium__namespace[s(2134)].BLACK,outlineWidth:2,pixelOffset:x?new Cesium__namespace[s(518)](30,15):new Cesium__namespace.Cartesian2(5,-30),eyeOffset:Cesium__namespace.Cartesian3[s(737)],horizontalOrigin:Cesium__namespace[s(i._0x5bde3c)].LEFT,verticalOrigin:Cesium__namespace.VerticalOrigin.BOTTOM,scale:1});o.position=this._ellipsoid.cartographicToCartesian(new Cesium__namespace.Cartographic(n,e,10)),o.text=t,this[s(2989)].add(o)},GraticuleProvider.prototype[_0x2397ca(416)]=function(n){const e={_0x3c8359:1859,_0x2eb025:3872,_0x103809:1064,_0x230392:2204,_0x7d7076:2999,_0x11f972:2434,_0x4f1a31:180,_0x54b3eb:3529,_0x4a5b92:1181,_0x2c06cc:778,_0x2a89a4:1081},t=_0x2397ca;if(this._currentExtent&&this._currentExtent.equals(n))return;this._currentExtent=n,this._polylines[t(e._0x3c8359)](),this[t(2989)].removeAll();let x=mins[0],i=mins[0],s;for(s=0;s<mins.length&&x<n[t(e._0x2eb025)]/10;s++)x=mins[s];for(s=0;s<mins[t(2027)]&&i<n.width/10;s++)i=mins[s];let o=(n.west<0?Math.ceil(n.west/i):Math.floor(n.west/i))*i,r=(n.south<0?Math[t(e._0x103809)](n.south/x):Math.floor(n[t(e._0x230392)]/x))*x,c=(n.east<0?Math[t(e._0x103809)](n[t(e._0x7d7076)]/x):Math[t(3927)](n.east/x))*x,_=(n[t(1464)]<0?Math.ceil(n[t(1464)]/i):Math.floor(n.north/i))*i;o=Math.max(o-2*i,-Math.PI),c=Math[t(3173)](c+2*i,Math.PI),r=Math[t(1146)](r-2*x,-Math.PI/2),_=Math.min(_+2*i,Math.PI/2),o>c&&(c+=Math.PI*2);const l=this._ellipsoid;let h,d;const u=Cesium__namespace.Math.toRadians(1),m=r+Math.floor((_-r)/x/2)*x;for(d=o;d<c;d+=i){const g=[];for(h=r;h<_;h+=u)g[t(2434)](new Cesium__namespace.Cartographic(d,h,10));g[t(e._0x11f972)](new Cesium__namespace.Cartographic(d,_,10)),this._polylines.add(PolylineStyleConver.toCesiumVal(this.options[t(2099)]||{},{positions:l.cartographicArrayToCartesianArray(g),width:1}));let b=Cesium__namespace.Math[t(778)](d);b>180&&(b=b-360),b!==-180&&this.makeLabel(d,m,this._sexagesimal?this[t(e._0x4f1a31)](b):b[t(e._0x54b3eb)](gridPrecision(i)),!1)}const f=o+Math.floor((c-o)/i/2)*i;for(h=r;h<_;h+=x){const g=[];for(d=o;d<c;d+=u)g.push(new Cesium__namespace[t(1899)](d,h));g.push(new Cesium__namespace.Cartographic(c,h)),this._polylines.add(PolylineStyleConver.toCesiumVal(this.options.lineStyle||{},{positions:l[t(e._0x4a5b92)](g),width:1}));const b=Cesium__namespace[t(3876)][t(e._0x2c06cc)](h);this.makeLabel(f,h,this[t(e._0x2a89a4)]?this._decToSex(b):b.toFixed(gridPrecision(x)),!0)}},GraticuleProvider.prototype.requestImage=function(n,e,t){return new Promise((x,i)=>{const s=_0x3361;this._show&&this._drawGrid(this[s(3313)]()),x(this._canvas)})},GraticuleProvider.prototype.setVisible=function(n){const e={_0x172c66:850},t=_0x2397ca;this[t(767)]=n,n?(this._currentExtent=null,this[t(416)](this._getExtentView())):(this[t(e._0x172c66)].removeAll(),this._labels.removeAll())},GraticuleProvider[_0x2397ca(2121)].isVisible=function(){return this._show},GraticuleProvider.prototype._decToSex=function(n){const e={_0x5998ca:889,_0x29d35a:827},t=_0x2397ca;let x=Math[t(3927)](n),i=((Math[t(e._0x5998ca)](n)-x)*60).toFixed(2);return i===t(e._0x29d35a)&&(x+=1,i="0.00"),[x,":",i].join("")},GraticuleProvider.prototype._getExtentView=function(){const n={_0x4a0c8e:279,_0x35448c:518},e=_0x2397ca,t=this._scene.camera,x=this[e(n._0x4a0c8e)].canvas,i=[t.pickEllipsoid(new Cesium__namespace.Cartesian2(0,0),this._ellipsoid),t.pickEllipsoid(new Cesium__namespace[e(n._0x35448c)](x.width,0),this._ellipsoid),t.pickEllipsoid(new Cesium__namespace.Cartesian2(0,x.height),this._ellipsoid),t.pickEllipsoid(new Cesium__namespace.Cartesian2(x.width,x[e(3872)]),this._ellipsoid)];for(let s=0;s<4;s++)if(i[s]===void 0)return Cesium__namespace.Rectangle.MAX_VALUE;return Cesium__namespace[e(3520)].fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(i))};class GraticuleLayer extends BaseLayer{get layer(){return this[_0x2397ca({_0x484338:1252}._0x484338)]}_showHook(e){this._graticuleProvider&&this._graticuleProvider.setVisible(e)}_mountedHook(){const e=_0x2397ca;this[e(1252)]=new GraticuleProvider({scene:this._map.scene,numLines:10,...this[e(3044)]})}_addedHook(){this._graticuleProvider.setVisible(this.show)}_removedHook(){this._graticuleProvider.setVisible(!1)}}register$2(_0x2397ca(2908),GraticuleLayer);class LodGraphicLayer extends GraphicLayer{constructor(e={}){const t={_0x5139ec:2815},x=_0x2397ca;super(e),!isMars3DCesium&&logError$1(x(t._0x5139ec),this),this.options.IdField=this.options[x(2621)]||"id",this.options.debuggerTileInfo&&this.bindPopup(function(i){var s;return((i==null||(s=i.graphic)===null||s===void 0?void 0:s.gridList)||[]).join("<br/>")}),this._cacheGrid={},this._cacheGraphic={}}get[_0x2397ca(585)](){for(const e in this._cacheGrid){const t=this._cacheGrid[e];if(!(!t||!t.grid)&&t.isLoading)return!0}return!1}_showHook(e){const t=_0x2397ca;super._showHook(e),this[t(3239)]&&(this[t(3239)].show=e)}_mountedHook(){const e={_0x4a6a84:914},t=_0x2397ca;super._mountedHook();const x={...this.options,private:!0};delete x.id,delete x.name,delete x[t(e._0x4a6a84)],delete x.type,this._tileLayer=new EmptyTileLayer(x),this[t(3239)].readyPromise.then(()=>{this[t(2276)].resolve(this)})}_addedHook(){const e={_0x3202cf:1538,_0x1863a5:1171},t={_0x3d4092:3239},x=_0x2397ca;super._addedHook(),this._tileLayer.on(EventType[x(e._0x3202cf)],this._tileLayer_addTileHandler,this),this._tileLayer.on(EventType.removeTile,this._tileLayer_removeTileHandler,this);const i=this[x(558)];Promise[x(807)]([new Promise((s,o)=>{const r={_0x41ad10:1545};function c(_){const l=_0x3361;_===0&&(i.off(EventType[l(r._0x41ad10)],c),s(!0))}i.on(EventType.tileLoadProgress,c)}),this._map.terrainProvider[x(e._0x1863a5)]]).then(s=>{const o=x;this._map[o(3615)](this[o(t._0x3d4092)])})}_removedHook(){const e={_0x37fa3d:3573,_0x333f14:3321,_0x41f2dc:558,_0x8efecf:3239},t=_0x2397ca;super[t(380)](),this._tileLayer.off(EventType.addTile,this[t(500)],this),this._tileLayer[t(e._0x37fa3d)](EventType[t(e._0x333f14)],this._tileLayer_removeTileHandler,this),this[t(e._0x41f2dc)][t(2911)](this[t(e._0x8efecf)]),this.clear()}getGridKey(e){return e.level+"_x"+e.x+"_y"+e.y}checkHasBreak(e){return!this.show||!this._cacheGrid[e]}_tileLayer_addTileHandler(e){const t={_0x5c6d88:2453},x={_0x410807:411},i=_0x2397ca;if(!this._tileLayer[i(3666)](e[i(t._0x5c6d88)]))return;const s=this.getGridKey(e);e[i(3677)]=s,this._cacheGrid[s]={grid:e,isLoading:!0},this[i(896)](e).then(o=>{const r=i;this.show&&this[r(x._0x410807)](o)})}_getItemDataId(e){const t={_0x29c7c3:263,_0x122e17:3044},x=_0x2397ca;return e.id?e.id:(e.type==="Feature"&&(e=e[x(t._0x29c7c3)]),e[this[x(t._0x122e17)][x(2621)]]?e[this.options.IdField]:null)}_showData(e){const t=_0x2397ca,x=e[t(2547)],i=e.key;if(this.checkHasBreak[i])return;const s=[],o=[];for(let r=0,c=x.length;r<c;r++){const _=x[r],l=this._getItemDataId(_);!l&&logWarn("LodGraphicLayer: 数据的ID识别失败",_);const h=this._cacheGraphic[l];if(h)h.gridList.push(i),this.updateGraphic(h,_);else{const d=this.createGraphic(e,_);if(!d)continue;d.gridList=[i],this[t(3324)][l]=d,o.push(d)}s[t(2434)](l)}this[t(2986)][i]=this[t(2986)][i]||{},this._cacheGrid[i].ids=s,this._cacheGrid[i][t(585)]=!1,this[t(1788)](EventType.update,{graphics:o})}_tileLayer_removeTileHandler(e){const t={_0x4388fb:2265,_0x46480f:2027,_0x227f34:2986},x=_0x2397ca;if(this._tileLayer[x(1191)](e.level)){this[x(t._0x4388fb)]();return}const i=this.getGridKey(e),s=this._cacheGrid[i];if(s){if(s.ids)for(let o=0;o<s.ids.length;o++){const r=s.ids[o],c=this._cacheGraphic[r];c&&(removeArrayItem(c.gridList,i),c.gridList[x(t._0x46480f)]===0&&(this.removeGraphic(c),delete this._cacheGraphic[r]))}delete this[x(t._0x227f34)][i]}}queryGridData(e){const t={_0x27e5a0:3044},x=_0x2397ca;if(this[x(t._0x27e5a0)].queryGridData)return this[x(3044)][x(896)](e)}createGraphic(e,t){const x={_0x285e99:1663},i=_0x2397ca;return this[i(3044)][i(x._0x285e99)]?this.options[i(1663)](e,t):null}updateGraphic(e,t){const x=_0x2397ca;this[x(3044)].updateGraphic&&this[x(3044)].updateGraphic(e,t)}[_0x2397ca(2265)](e){super.clear(e),this._cacheGraphic={},this._cacheGrid={}}reload(){const e={_0x19bbff:3239},t=_0x2397ca;this.clear(!0),this[t(e._0x19bbff)]&&this._tileLayer.reload()}[_0x2397ca(3535)](e,t){const x=_0x2397ca;if(super._setOptionsHook(e,t),this[x(2265)](!0),this._tileLayer){const i={...t,private:!0};delete i.id,delete i.name,delete i.url,delete i.type,this._tileLayer.setOptions(i)}}[_0x2397ca(3318)](e){}}register$2("lodGraphic",LodGraphicLayer);class GeodePoiLayer extends LodGraphicLayer{constructor(e={}){const t={_0x364cf6:2739,_0x338823:1589};super(e),this._key_index=0,this._keys=this.options.key||gaodeArr,this.bindPopup(function(x){const i=_0x3361;var s;const o=x==null||(s=x.graphic)===null||s===void 0?void 0:s.attr;return o?"<div>名称："+o.name+i(t._0x364cf6)+"<div>地址："+o.address+"</div><div>区域："+o[i(t._0x338823)]+o.cityname+o.adname+"</div><div>类别："+o.type+"</div>":void 0},{anchor:[0,-10]})}get key(){const e=_0x2397ca,t=this._key_index++%this[e(1951)].length;return this._keys[t]}queryGridData(e){const t={_0x1fcb63:242,_0x1e4274:3677},x=_0x2397ca,i=wgs2gcj([e.extent.xmin,e.extent.ymax]),s=wgs2gcj([e[x(2907)].xmax,e.extent[x(t._0x1fcb63)]]),o=i[0]+","+i[1]+"|"+s[0]+","+s[1],r=this[x(3044)].filter||{};return r.output="json",r[x(t._0x1e4274)]=this.key,r.polygon=o,!r.offset&&(r.offset=25),!r.types&&(r.types="120000|130000|190000"),new Promise((c,_)=>{const l={_0x2112ba:1516,_0x97fc77:635},h=x;fetchJson({url:h(535),...this.options,queryParameters:r,proxy:this._proxy})[h(1286)](d=>{const u=h;if(d.infocode!==u(l._0x2112ba)){logError$1(u(l._0x97fc77),d),e[u(2547)]=[],c(e);return}e.list=d.pois,c(e)})})}[_0x2397ca(1663)](e,t){const x={_0x50708a:2956,_0x6fe572:3628,_0x242fe9:1034,_0x6cf133:407,_0x2f9914:3044},i=_0x2397ca;var s;let o=t.location[i(x._0x50708a)](",");o=gcj2wgs(o);const r=getSymbolStyle(this.options[i(x._0x6fe572)],t);r.clampToGround=r[i(x._0x242fe9)]??!0;let c;return(s=this.options.clustering)!==null&&s!==void 0&&s[i(x._0x6cf133)]?r.image?c=new BillboardEntity({position:[o[0],o[1],this[i(3044)].height||0],style:r,attr:t}):c=new PointEntity({position:[o[0],o[1],this.options.height||0],style:r,attr:t}):r.image?c=new BillboardPrimitive({position:[o[0],o[1],this[i(x._0x2f9914)].height||0],style:r,attr:t}):c=new PointPrimitive({position:[o[0],o[1],this.options.height||0],style:r,attr:t}),this[i(340)](c),c}}register$2("gaodePOI",GeodePoiLayer);class WfsLayer extends LodGraphicLayer{_mountedHook(){const e=_0x2397ca;this.options.geometryName=this.options.geometryName||"the_geom",super._mountedHook(),Cesium__namespace[e(2773)](this.options.getCapabilities,!0)&&this.getMetadata(),this.fire(EventType.load)}getMetadata(){const e={_0x85a365:3979,_0x25d90f:1248},t=_0x2397ca,x={service:t(3545),request:"GetCapabilities",version:t(e._0x85a365)};let i=this.options[t(914)];this.options.templateValues&&(i=template(i,this.options[t(e._0x25d90f)])),Cesium__namespace.Resource.fetchXML({...this.options,url:i,queryParameters:x,proxy:this._proxy}).then(s=>{if(!(!s||this[t(1002)])){this.capabilities=s;try{this._initByMetaData(s)}catch(r){logInfo("解析GetCapabilities出错",r)}this.fire(EventType.loadConfig,{capabilities:s})}})[t(2443)](s=>{logInfo("wfs请求GetCapabilities出错",s)})}_initByMetaData(e){const t={_0x344254:2027,_0x4d23d3:469,_0x5ed4d1:3712,_0x174237:469,_0x5f22c5:3078,_0x3ee200:3137,_0x44a338:3044,_0x25ef73:1383},x=_0x2397ca,i=this[x(2250)](e,x(3983));if(!i)return;const s=this._readNode(i,"FeatureType");if(s)for(let o=0,r=s[x(t._0x344254)];o<r;o++){const c=s[o];if(this[x(t._0x4d23d3)](c,x(t._0x5ed4d1))===this[x(3044)].layer){const l=this[x(t._0x174237)](c,"SRS");!this.options.crs&&l&&(this.options.crs=l);const h=this._readChildNode(c,x(t._0x5f22c5));if(!this.options.rectangle&&h){const d=Number(h.getAttribute("minx")),u=Number(h.getAttribute("miny")),m=Number(h.getAttribute("maxx")),f=Number(h.getAttribute("maxy"));let g={xmin:d,ymin:u,xmax:m,ymax:f};if(this.options.crs!==CRS[x(2623)]&&this.options.crs!==CRS.EPSG4490){const b=proj4Trans([g.xmin,g.ymin],this.options[x(t._0x3ee200)]),y=proj4Trans([g.xmax,g.ymax],this[x(t._0x44a338)].crs);g={xmin:b[0],ymin:b[1],xmax:y[0],ymax:y[1]}}this[x(3044)].extent=g,this._rectangle=Cesium__namespace.Rectangle[x(402)](g[x(t._0x25ef73)],g.ymin,g.xmax,g.ymax),this._tileLayer&&(this._tileLayer[x(1358)]=this._rectangle),this.options[x(2729)]&&this.flyToByAnimationEnd()}break}}}[_0x2397ca(524)](e,t){const x={_0x4201f7:825},i=_0x2397ca;if(!e)return null;let s=e[i(x._0x4201f7)](t);return(!s||s.length===0)&&(s=e.getElementsByTagName("wfs:"+t)),s}_readChildNode(e,t){const x=_0x2397ca;if(!e)return null;const i=this[x(524)](e,t);return i.length>0?i[0]:null}[_0x2397ca(469)](e,t){const x={_0x4168df:3572,_0x247e44:3258,_0x1b4477:3258},i=_0x2397ca;var s,o;if(!e)return null;let r=this[i(2250)](e,t);return!r&&(r=this._readChildNode(e,i(x._0x4168df)+t)),(s=r)!==null&&s!==void 0&&s.innerHTML?r.innerHTML:(o=r)!==null&&o!==void 0&&o[i(x._0x247e44)]?r[i(x._0x1b4477)]():null}queryGridData(e){const t={_0x5cc487:2623,_0x1b84a3:3044,_0x4a8b09:2907,_0x541d50:2907,_0x20bf52:3044,_0x26021e:639,_0xed9f3:3044,_0x41fc8e:1248},x=_0x2397ca;let i;if(this.options.crs!==CRS[x(t._0x5cc487)]&&this[x(t._0x1b84a3)].crs!==CRS.EPSG4490){const r=proj4Trans([e.extent.xmin,e.extent.ymin],"EPSG:4326",this.options.crs),c=proj4Trans([e.extent.xmax,e.extent.ymax],"EPSG:4326",this.options.crs);i=r[0]+","+r[1]+","+c[0]+","+c[1]}else i=e[x(t._0x4a8b09)][x(1383)]+","+e[x(2907)].ymin+","+e[x(t._0x541d50)].xmax+","+e.extent.ymax;const s={service:"WFS",request:"GetFeature",typeName:this.options.layer||this[x(t._0x20bf52)].typeName,version:"1.0.0",outputFormat:x(2487),srsName:this.options.crs||"EPSG:4326",bbox:i};if(Cesium__namespace[x(t._0x26021e)](this[x(t._0xed9f3)].parameters))for(const r in this.options.parameters)r.toLowerCase()==="cql_filter"?(delete s.bbox,s[r]=this.options[x(3733)][r]+x(3308)+this.options.geometryName+", "+i+")"):s[r]=this.options.parameters[r];let o=this.options.url;return this[x(3044)][x(t._0x41fc8e)]&&(o=template(o,this[x(3044)].templateValues)),new Promise((r,c)=>{fetchJson({...this.options,url:o,queryParameters:s,proxy:this._proxy}).then(_=>{const l=_0x3361;if(e.list=[],!this._show||!this._cacheGrid[e[l(3677)]]){r(e);return}if(_===void 0||_==null){r(e);return}_.type==="Feature"&&(_={type:"FeatureCollection",features:[_]}),e.list=_[l(197)],r(e)}).catch(_=>{logError$1("wfs请求GetFeature出错",_)})})}createGraphic(e,t){const x=this.loadGeoJSON(t,{clear:!1,flyTo:!1});return(x==null?void 0:x.length)>0?x[0]:null}}register$2("wfs",WfsLayer);class ArcGisWfsLayer extends LodGraphicLayer{_mountedHook(){super._mountedHook(),this.getMetadata()}getMetadata(){const e={_0xb01394:3018},t=_0x2397ca;let x=this.options.url;this.options[t(e._0xb01394)]&&this.options.layers.length>0&&(x+="/"+this.options.layers[0]);const i={f:"json"};this.options.token&&(i.token=this[t(3044)].token),sendAjax({...this[t(3044)],url:x,queryParameters:i,proxy:this._proxy}).then(s=>{!s||this.isDestroy||(this._initByMetaData(s),this.fire(EventType.loadConfig,s))}).catch(s=>{logInfo("wfs请求getMetadata出错",s)})}[_0x2397ca(203)](e){const t={_0x3f7d9e:3195,_0x55aa22:3239,_0x3c108:3044},x=_0x2397ca;this.metaData=e;let i=e.fullExtent||e.extent;if(!this.options.rectangle&&i){var s,o;const r=((s=i)===null||s===void 0||(o=s.spatialReference)===null||o===void 0?void 0:o.wkid)||this.options[x(3195)];if(r&&!this.options[x(t._0x3f7d9e)]&&(this[x(3044)].wkid=r),this.options.wkid){const c="EPSG:"+this[x(3044)].wkid;if(c!==CRS.EPSG4326&&c!==CRS.EPSG4490){const _=proj4Trans([i.xmin,i.ymin],c),l=proj4Trans([i[x(3976)],i.ymax],c);i={xmin:_[0],ymin:_[1],xmax:l[0],ymax:l[1]}}this.options.extent=i,this._rectangle=Cesium__namespace.Rectangle.fromDegrees(i.xmin,i.ymin,i.xmax,i.ymax),this[x(t._0x55aa22)]&&(this._tileLayer[x(1358)]=this._rectangle),this[x(t._0x3c108)].flyTo&&this.flyToByAnimationEnd()}}}queryGridData(e){const t={_0x48a90f:2027,_0x269505:3044,_0x43eda2:1201,_0x449bb6:3976,_0x19e379:2907},x={_0x37d3a8:2137,_0x2fb3c8:1286,_0x47ba1f:2443},i={_0x53ffa7:2547},s=_0x2397ca;let o=this[s(3044)][s(914)];this.options.layers&&this[s(3044)][s(3018)][s(t._0x48a90f)]>0&&(o+="/"+this[s(3044)][s(3018)][0]);const r={f:this.options.f||"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!0,where:this[s(t._0x269505)][s(t._0x43eda2)]||s(3610),geometry:JSON.stringify({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e.extent[s(t._0x449bb6)],ymax:e[s(t._0x19e379)].ymax,spatialReference:{wkid:4326}}),geometryType:"esriGeometryEnvelope",spatialRel:"esriSpatialRelIntersects"};return this.options.token&&(r.token=this[s(t._0x269505)].token),new Promise((c,_)=>{const l=s;sendAjax({...this.options,url:o+"/query",queryParameters:r,proxy:this[l(x._0x37d3a8)]})[l(x._0x2fb3c8)](h=>{const d=l;if(e.list=[],!this.show||!this[d(2986)][e[d(3677)]]){c(e);return}if(h===void 0||h==null){c(e);return}let u=arcgisToGeoJSON$1(h);u[d(968)]==="Feature"&&(u={type:"FeatureCollection",features:[u]}),e[d(i._0x53ffa7)]=u.features,c(e)})[l(x._0x47ba1f)](h=>{logError$1("wfs请求出错",h)})})}_getItemDataId(e){const t={_0x2b9630:1727,_0x1423db:1770},x=_0x2397ca;var i,s;if(e.id)return e.id;if(e.type==="Feature"&&(e=e.properties),e[this.options.IdField])return e[this[x(3044)].IdField];if(e[x(t._0x2b9630)])return e.OBJECTID;if(e.objectid)return e.objectid;if(((i=this[x(t._0x1423db)])===null||i===void 0||(s=i.fields)===null||s===void 0?void 0:s.length)>0){const o=this.metaData[x(3037)][0].name;if(e[o])return e[o]}return null}[_0x2397ca(1663)](e,t){const x={_0x2a65dd:1663,_0x43d84d:3044},i=_0x2397ca;if(this.options[i(x._0x2a65dd)])return this[i(x._0x43d84d)].createGraphic(e,t);const s=this.loadGeoJSON(t,{clear:!1,flyTo:!1});return(s==null?void 0:s.length)>0?s[0]:null}setWhere(e){const t={_0x1ad6b6:3804},x=_0x2397ca;this.options.where=e,this[x(t._0x1ad6b6)]()}}register$2("arcgis_wfs",ArcGisWfsLayer);class ArcGisWfsSingleLayer extends GeoJsonLayer{load(e={}){const t={_0x2b28b3:3132,_0xa57e1:212,_0x3c35ea:1286},x={_0x541114:606},i=_0x2397ca;this.options={...this.options,...e};let s=this.options.url;this.options.layers&&this.options.layers[i(2027)]>0&&(s+="/"+this.options.layers[0]);const o={f:"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!0,where:this.options.where||"1=1"};this.options[i(3132)]&&(o[i(t._0x2b28b3)]=this.options.token),fetchJson({...this[i(3044)],url:s+i(t._0xa57e1),queryParameters:o,proxy:this._proxy})[i(t._0x3c35ea)](r=>{const c=i;if(!r){this[c(1788)](EventType.load);return}const _=arcgisToGeoJSON$1(r);this[c(2473)](_)}).catch(r=>{logError$1(i(x._0x541114),r)})}setWhere(e){this[_0x2397ca({_0x3ed413:759}._0x3ed413)]({where:e})}}register$2("arcgis_wfs_single",ArcGisWfsSingleLayer);var index$4={__proto__:null,BaseLayer,GroupLayer,BaseTileLayer,BaseGraphicLayer,TerrainLayer,ArcGisCacheLayer,ArcGisTileLayer,ArcGisLayer,BaiduLayer,BingLayer,GaodeLayer,GeeLayer,GoogleLayer,ImageLayer,IonLayer,MapboxLayer,OsmLayer,TdtLayer,TencentLayer,TmsLayer,WmsLayer,WmtsLayer,XyzLayer,GridLayer,TileInfoLayer,EmptyTileLayer,CzmGeoJsonLayer,KmlLayer,CzmlLayer,GraphicLayer,GraphicGroupLayer,GeoJsonLayer,BusineDataLayer,TilesetLayer,OsmBuildingsLayer,I3SLayer,GraticuleLayer,LodGraphicLayer,GeodePoiLayer,WfsLayer,ArcGisWfsLayer,ArcGisWfsSingleLayer,register:register$2,create:create$2,createTerrainProvider,createImageryProvider:createImageryProvider$k};class Underground extends BaseThing{get translucency(){const e={_0x15625b:679},t=_0x2397ca;return this._map[t(3399)][t(e._0x15625b)].translucency}get alpha(){return this._alpha}set alpha(e){this._alpha=e,this._map&&(this.translucency.frontFaceAlpha=this._alpha)}get[_0x2397ca(1089)](){const e={_0x7e9754:679},t=_0x2397ca;return this._map.scene[t(e._0x7e9754)].undergroundColor}set[_0x2397ca(1089)](e){const t=_0x2397ca;this._map[t(3399)].globe.undergroundColor=e}get[_0x2397ca(2546)](){const e=_0x2397ca;return this[e(558)][e(3399)].globe.undergroundColorAlphaByDistance}set colorAlphaByDistance(e){this._map.scene.globe.undergroundColorAlphaByDistance=e}_enabledHook(e){const t={_0x139d2b:558,_0x122cb3:3399,_0x22444e:3830},x=_0x2397ca;this._map&&(this[x(t._0x139d2b)].scene.globe.depthTestAgainstTerrain=e?!0:this.depthTestOld,this._map[x(t._0x122cb3)][x(t._0x22444e)].enableCollisionDetection=!e,this.translucency.enabled=e)}_mountedHook(){const e={_0x54100c:2798},t=_0x2397ca;this[t(2352)].frontFaceAlpha=1,this.translucency[t(e._0x54100c)]=0,this.alpha=this.options[t(2708)]??.5,this.color=this.options.color??Cesium__namespace[t(2134)][t(2282)]}_addedHook(){const e={_0x349538:3069,_0x28abf5:1757},t=_0x2397ca;this[t(3504)]=Cesium__namespace[t(e._0x349538)](this._map[t(3399)].globe.depthTestAgainstTerrain),this[t(e._0x28abf5)](this.enabled)}_removedHook(){const e=_0x2397ca;this[e(558)][e(3399)].globe.depthTestAgainstTerrain=this.depthTestOld,this._enabledHook(!1)}}class Sightline extends BaseThing{constructor(e={}){const t=_0x2397ca;super(e),this._visibleColor=e.visibleColor??new Cesium__namespace.Color(0,1,0,.5),this._hiddenColor=e.hiddenColor??new Cesium__namespace.Color(1,0,0,.5),this._depthFailColor=e.depthFailColor,this[t(860)]=[]}get visibleColor(){return this[_0x2397ca(801)]}set[_0x2397ca(2877)](e){this._visibleColor=e}get hiddenColor(){return this[_0x2397ca({_0x4fdbe0:2225}._0x4fdbe0)]}set[_0x2397ca(736)](e){this._hiddenColor=e}get depthFailColor(){return this[_0x2397ca(1027)]}set[_0x2397ca(658)](e){this._depthFailColor=e}_mountedHook(){}[_0x2397ca(2670)](){}_removedHook(){}add(e,t,x={}){const i={_0x320b00:558,_0x39deed:3399,_0x4aba2e:760,_0x2925be:1568,_0x3fefa6:2916,_0x403f3f:1568},s=_0x2397ca;x.offsetHeight&&(e=addPositionsHeight(e,x[s(1365)])),this.fire(EventType[s(546)]),!this._map.scene.globe.depthTestAgainstTerrain&&(this._map.scene.globe.depthTestAgainstTerrain=!0,this.old_depthTestAgainstTerrain=this._map.scene[s(679)].depthTestAgainstTerrain),this[s(i._0x320b00)].scene.requestRender();const o=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[s(295)].subtract(t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace[s(295)]),r=new Cesium__namespace.Ray(e,o),c=this._map[s(i._0x39deed)].drillPickFromRay(r,2,this.lines);if(Cesium__namespace.defined(c)&&c.length>0&&Cesium__namespace.defined(c[0])&&Cesium__namespace[s(639)](c[0][s(i._0x4aba2e)])){const h=c[0].position,d=Cesium__namespace.Cartesian3.distance(e,t);if(Cesium__namespace.Cartesian3.distance(e,h)<d){const m=this._showPolyline(e,t,h),f={block:!0,position:h,entity:m};return this.fire(EventType[s(i._0x2925be)],f),f}}const _=this._showPolyline(e,t),l={block:!1,entity:_};return Cesium__namespace[s(639)](this.old_depthTestAgainstTerrain)&&(this._map.scene.globe.depthTestAgainstTerrain=this.old_depthTestAgainstTerrain,delete this[s(i._0x3fefa6)]),this.fire(EventType[s(i._0x403f3f)],l),l}addAsync(e,t,x={}){const i={_0x31f63b:1365,_0x3deb5c:1741,_0x2399cd:1788},s=_0x2397ca;x[s(i._0x31f63b)]&&(e=addPositionsHeight(e,x[s(1365)]));const o=interLine([e,t],{splitNum:x.splitNum||50,minDistance:x[s(i._0x3deb5c)]});return this[s(i._0x2399cd)](EventType.start),new Promise((r,c)=>{const _={_0x4821fa:1899,_0x53bebb:467},l=s;computeSurfacePoints({map:this[l(558)],positions:o}).then(h=>{const d=l;if(!h.noHeight)for(let f=0;f<o.length;f++){const g=o[f],b=Cesium__namespace[d(_._0x4821fa)].fromCartesian(g).height,y=Cesium__namespace.Cartographic.fromCartesian(h.positions[f]).height;if(b<=y){const C=this[d(_._0x53bebb)](e,t,g),v={block:!0,position:g,entity:C};this[d(1788)](EventType.end,v),r(v);return}}const u=this[d(_._0x53bebb)](e,t),m={block:!1,entity:u};this.fire(EventType.end,m),r(m)})})}_showPolyline(e,t,x){const i={_0x2de8f7:2796,_0x26a282:801,_0x2a78d4:3998,_0x2d94d5:1027},s=_0x2397ca;if(x){const o=this._map[s(3998)].add(new Cesium__namespace[s(i._0x2de8f7)]({polyline:{positions:[e,x],width:2,material:this[s(i._0x26a282)],depthFailMaterial:this._depthFailColor}}));this[s(860)].push(o);const r=this._map[s(i._0x2a78d4)].add(new Cesium__namespace.Entity({polyline:{positions:[x,t],width:2,material:this._hiddenColor,depthFailMaterial:this._depthFailColor}}));return this[s(860)].push(r),[o,r]}else{const o=this._map.entities.add(new Cesium__namespace[s(2796)]({polyline:{positions:[e,t],width:2,material:this._visibleColor,depthFailMaterial:this[s(i._0x2d94d5)]}}));return this.lines[s(2434)](o),[o]}}clear(){const e={_0x2744cc:2689},t=_0x2397ca;for(let x=0,i=this[t(860)].length;x<i;x++)this._map.entities[t(e._0x2744cc)](this.lines[x]);this.lines=[]}}var fragmentShaderSource$1=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float lineWidth;
uniform float height;
uniform bvec3 strokeType;
uniform vec3 tjxColor;
uniform vec3 bjColor;
uniform vec3 cameraPos;
uniform float mbDis;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
bool isTJX(vec2 uv, float lw) {
  vec2 pixelSize = lw / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;

  vec2 currUV = uv + vec2(dx0, dy0);
  vec4 currDepth = texture(depthTexture, currUV);
  float depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  return false;
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  if(height > 14102.0) {
    out_FragColor = color;
    return;
  }
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  if(strokeType.y || strokeType.z) {
    vec4 wp = czm_inverseView * positionEC;
    if(distance(wp.xyz, cameraPos) > mbDis) {
      out_FragColor = color;
    } else {
      float dotNum = abs(dot(normal, normalize(positionEC.xyz)));
      if(dotNum < 0.05) {
        out_FragColor = vec4(bjColor, 1.0);
        return;
      }
    }
  }
  if(strokeType.x || strokeType.z) {
    bool tjx = isTJX(v_textureCoordinates, lineWidth);
    if(tjx) {
      out_FragColor = vec4(tjxColor, 1.0);
      return;
    }
  }
  out_FragColor = color;
}
`;class Skyline extends BaseThing{constructor(e={}){const t={_0x335e3d:1089,_0x94e565:2091,_0x3f74a6:331},x=_0x2397ca;super(e),this[x(t._0x335e3d)]=e.color??new Cesium__namespace.Color(1,0,0),this.width=e.width??2,this.strokeType=e[x(t._0x94e565)]??new Cesium__namespace.Cartesian3(!0,!1,!1),this.bjColor=e[x(t._0x3f74a6)]??new Cesium__namespace.Color(0,0,1),this.distance=e[x(230)]??500}_enabledHook(e){const t=_0x2397ca;e?!this.postProcessStage&&this[t(2670)]():this.postProcessStage&&this[t(380)]()}_addedHook(){const e={_0x5d95ba:1581},t=_0x2397ca,x=this._map[t(3400)];this.postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:fragmentShaderSource$1,uniforms:{height:()=>{const i=t;return x.positionCartographic[i(3872)]},lineWidth:()=>this.width,strokeType:()=>this.strokeType,tjxColor:()=>this.color,bjColor:()=>this.bjColor,cameraPos:()=>x.position,mbDis:()=>this[t(230)]}}),this._map.scene[t(e._0x5d95ba)].add(this.postProcessStage)}_removedHook(){const e={_0x521dc2:1581,_0x54cfe6:2941},t=_0x2397ca;this.postProcessStage&&(this[t(558)][t(3399)][t(e._0x521dc2)].remove(this.postProcessStage),this.postProcessStage[t(e._0x54cfe6)](),delete this.postProcessStage)}}const fragmentShaderSource=`
    precision highp float;
    uniform sampler2D u_positionTexture;
    uniform sampler2D shadowMap_texture;

    in vec2 v_textureCoordinates;

    vec4 getPositionEC(vec2 uv)
    {
      vec4 positionEC =  texture(u_positionTexture, uv);
      return vec4(positionEC.xyz, 1.0);
    }

    void main() {
      vec2 uv = v_textureCoordinates;
      float maxDepth = shadowMap_cascadeSplits[1].w;
      vec4 positionEC = getPositionEC(uv);
      vec3 normalEC = vec3(1.0);
      float depth = -positionEC.z;

      if (depth > maxDepth){
        out_FragColor = vec4(0.0);
      } else {
        vec4 weights = czm_cascadeWeights(depth);
        vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC;
        float deptha = czm_unpackDepth(texture(shadowMap_texture, shadowPosition.xy));
        out_FragColor = vec4(step(shadowPosition.z,deptha), 0.0, 1.0, 2.0);
        // out_FragColor = vec4(uv, 1.0, 2.0);
      }
    }
    `,vertexShaderSource=`
    in vec4 position;
    in vec2 textureCoordinates;
    out vec2 v_textureCoordinates;
    void main()
    {
        gl_Position = position;
        v_textureCoordinates = textureCoordinates;
    }
  `,texturePositions=new Float32Array([-1,-1,1,-1,1,1,-1,1]),textureUVs=new Float32Array([0,0,1,0,1,1,0,1]),textureIndices=new Uint16Array([0,1,2,0,2,3]);function createTextureVA(n){const e={_0x3d25d9:1455,_0x1b0244:251,_0x36f2a7:1631},t=_0x2397ca,x=Cesium__namespace.Buffer.createVertexBuffer({context:n,typedArray:texturePositions,usage:Cesium__namespace[t(1247)].STATIC_DRAW}),i=Cesium__namespace[t(3160)][t(3902)]({context:n,typedArray:textureUVs,usage:Cesium__namespace.BufferUsage[t(e._0x3d25d9)]}),s=Cesium__namespace.Buffer[t(e._0x1b0244)]({context:n,typedArray:textureIndices,usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace[t(e._0x36f2a7)].UNSIGNED_SHORT}),o=[{index:0,vertexBuffer:x,componentsPerAttribute:2,componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT},{index:1,vertexBuffer:i,componentsPerAttribute:2,componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT}];return new Cesium__namespace.VertexArray({context:n,attributes:o,indexBuffer:s})}function createFramebuffer(n,e){return new Cesium__namespace.Framebuffer({context:n,colorTextures:[e],destroyAttachments:!1})}function computeTextureResolution(n){const e={_0x4940a4:278},t=_0x2397ca,x=Cesium__namespace[t(e._0x4940a4)].maximumTextureSize,i=Math.min(n,x),s=Math.ceil(n/i);return{x:i,y:s}}function completionBuffer(n,e){const t={_0x3da757:2434},x=_0x2397ca,i=e.x*e.y,s=n.length/4;for(let o=s;o<i;o++)n[x(t._0x3da757)](0),n.push(0),n.push(0),n.push(0)}class ShadowRateDrawCommand{constructor(e,t){const x={_0x4b19ac:279,_0x3b33c4:1820,_0x22f13c:2699,_0x9fbd0e:766},i={_0x12a493:2928},s=_0x2397ca;this._event=new Cesium__namespace.Event,this[s(x._0x4b19ac)]=e,this[s(2526)]=t,this[s(1911)]=!1;const o=t.length;this[s(x._0x3b33c4)]=computeTextureResolution(o);const r=new Cesium__namespace[s(x._0x22f13c)]({context:e.context,source:{arrayBufferView:new Float32Array(this._requiredResolution.x*this[s(x._0x3b33c4)].y*4),width:this._requiredResolution.x,height:this._requiredResolution.y},pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,pixelFormat:Cesium__namespace.PixelFormat[s(x._0x9fbd0e)],flipY:!1}),c=createTextureVA(e[s(2928)]),_=Cesium__namespace.ShaderProgram.fromCache({context:e.context,vertexShaderSource,fragmentShaderSource,attributeLocations:{position:0,textureCoordinates:1}});this[s(2370)]=new Cesium__namespace.ComputeCommand({vertexArray:c,shaderProgram:_,outputTexture:r,uniformMap:{shadowMap_cascadeSplits:()=>e.shadowMap._cascadeSplits,shadowMap_cascadeMatrices:()=>{const l=s;return e.shadowMap[l(2262)]},shadowMap_texture:()=>e.shadowMap._shadowMapTexture,u_positionTexture:()=>this._positionTexture},persists:!0,owner:this,postExecute:l=>{const h=s,d=createFramebuffer(e[h(i._0x12a493)],l),u=e.context.readPixels({framebuffer:d,width:this[h(1820)].x,height:this._requiredResolution.y});this._event.raiseEvent(u[h(2242)](0,o*4))}})}get event(){return this[_0x2397ca(3993)]}[_0x2397ca(546)](){const e={_0x346948:1820},t={_0x2763bb:2434},x=_0x2397ca,i=this._scene.camera.viewMatrix,s=this._positions.map(r=>Cesium__namespace.Matrix4.multiplyByPoint(i,r,new Cesium__namespace.Cartesian3)),o=[];s.forEach(r=>{const c=_0x3361;o.push(r.x),o[c(2434)](r.y),o[c(t._0x2763bb)](r.z),o.push(0)}),this._positionTexture&&this._positionTexture.destroy(),completionBuffer(o,this._requiredResolution),this._positionTexture=new Cesium__namespace.Texture({context:this._scene.context,source:{width:this._requiredResolution.x,height:this[x(e._0x346948)].y,arrayBufferView:new Float32Array(o)},pixelDatatype:Cesium__namespace[x(1350)].FLOAT,flipY:!1}),this._stat=!0}update(e){this.drawCommand&&this._stat&&(e.commandList.push(this.drawCommand),this._stat=!1)}destroy(){const e={_0x3ccf33:3347,_0x164258:3347},t=_0x2397ca;this[t(e._0x3ccf33)]&&this[t(e._0x164258)].destroy(),Cesium__namespace.destroyObject(this)}}class Shadows extends BaseThing{get[_0x2397ca(830)](){const e={_0x104890:3399},t=_0x2397ca;return this._map[t(e._0x104890)].shadowMap}get time(){const e={_0x281510:1522},t=_0x2397ca,x=this._map.clock.currentTime;return Cesium__namespace[t(e._0x281510)].toDate(x)}set[_0x2397ca(3531)](e){const t={_0x36116c:3718},x=_0x2397ca;this._map.clock[x(t._0x36116c)]=Cesium__namespace.JulianDate.fromDate(e),this.stop()}get isStart(){return this._map.clock.shouldAnimate}get multiplier(){const e=_0x2397ca;var t;return(t=this._map)===null||t===void 0?void 0:t[e(3703)].multiplier}set multiplier(e){const t={_0x2fe947:3284},x=_0x2397ca;this.options.multiplier=e,this._map&&(this._map.clock[x(t._0x2fe947)]=e)}_enabledHook(e){const t={_0x2f2c6b:558,_0x22013f:2105},x=_0x2397ca;this[x(558)]&&(this[x(t._0x2f2c6b)].viewer.shadows=e,(this.options.terrain??!0)&&(this._map.viewer[x(t._0x22013f)]=e?Cesium__namespace.ShadowMode.ENABLED:Cesium__namespace.ShadowMode.DISABLED),(this.options.lighting??!0)&&(this._map.scene[x(679)].enableLighting=e))}_mountedHook(){}[_0x2397ca(2670)](){const e={_0x3d8bae:3764,_0x3a81c6:2888,_0x302856:3703,_0x1e735f:558,_0x26136e:1795,_0x42bf24:1240,_0x3b4e87:558,_0x416c9c:3531},t=_0x2397ca;this[t(1178)]=this._map.clock[t(e._0x3d8bae)],this[t(2885)]=this._map.clock.stopTime,this[t(e._0x3a81c6)]=this._map[t(e._0x302856)].shouldAnimate,this._last_clockRange=this._map.clock.clockRange,this._last_multiplier=this[t(e._0x1e735f)].clock.multiplier,this._last_shadows=this._map[t(e._0x26136e)].shadows,this._enabledHook(this.enabled),this._map[t(3703)].shouldAnimate=!1,this._map.clock.clockRange=this[t(3044)][t(e._0x42bf24)]??Cesium__namespace.ClockRange.CLAMPED,this[t(e._0x3b4e87)].clock.multiplier=this.options.multiplier??1600,this.options.time&&(this[t(e._0x416c9c)]=this[t(3044)].time),this[t(558)].on(EventType.clockTick,this._onClockTickHanlder,this)}_removedHook(){const e={_0x550e7b:1757,_0x381523:558},t=_0x2397ca;this._map.off(EventType[t(3023)],this._onClockTickHanlder,this),this[t(2265)](),this[t(e._0x550e7b)](!1),this[t(e._0x381523)].viewer.shadows=this._last_shadows,this._map.clock[t(1240)]=this._last_clockRange,this._map[t(3703)].multiplier=this._last_multiplier,this._map.clock.shouldAnimate=this._last_shouldAnimate}[_0x2397ca(2987)](){const e=_0x2397ca;this._map.clock.shouldAnimate&&(this[e(1070)]&&(this._drawCommand.start(),this._rate_total+=1),this.fire(EventType[e(3796)]))}[_0x2397ca(546)](e,t,x){const i={_0xd491ae:3703,_0x55520d:558,_0x1970f4:3452},s=_0x2397ca;this._map&&(!e||!t||e>=t||(this._map.clock.startTime=Cesium__namespace.JulianDate.fromDate(e),this._map[s(i._0xd491ae)].currentTime=Cesium__namespace.JulianDate.fromDate(x||e),this[s(i._0x55520d)].clock[s(i._0x1970f4)]=Cesium__namespace[s(1522)].fromDate(t),this[s(i._0x55520d)].clock.shouldAnimate=!0))}[_0x2397ca(1328)](){const e=_0x2397ca;this._map&&(this._map.clock[e(3957)]=!1)}proceed(){this[_0x2397ca(558)]&&(this._map.clock.shouldAnimate=!0)}stop(){this._map&&(this._map.clock.shouldAnimate=!1)}[_0x2397ca(2265)](){const e={_0x2ca00a:3718,_0x408a53:558,_0x517bbf:1084},t=_0x2397ca;this.stop(),this[t(e._0x2ca00a)]=new Date,this[t(e._0x408a53)].clock.startTime=this._last_startTime,this[t(558)].clock.stopTime=this[t(2885)],this._map.off(EventType.clockStop,this._map_clockStopTickHandler,this),this[t(e._0x517bbf)]()}startRate(e){const t={_0x28b872:1091,_0x308bba:3892,_0x16c117:639,_0x26468d:3151,_0xcf891e:1070,_0x13fb75:558,_0x528a3c:1187,_0x29477c:4032,_0x10e514:1130,_0x485827:558,_0x2082dc:2781},x={_0x501b8d:2041},i={_0x54ce3a:295,_0x30d858:3736,_0x419a2c:2041};return new Promise((s,o)=>{const r={_0x559655:295,_0x26e0c8:3736,_0x27ad65:3409},c=_0x3361;if(!this._map||!e[c(t._0x28b872)]||e.positions.length===0||!e.startDate||!e.endDate||e[c(3038)]>=e.endDate)return s();this._promise_resolve=s;const _=getGridPointsByPoly(e.positions,e.step,e[c(t._0x308bba)]),l=[];if(Cesium__namespace.defined(e.minHeight)&&Cesium__namespace[c(t._0x16c117)](e.maxHeight)&&e.minHeight!==e.maxHeight)for(let h=e.minHeight;h<e.maxHeight;h+=e[c(t._0x26468d)])_.forEach(d=>{const u=c,m=Cesium__namespace[u(r._0x559655)].fromDegrees(d.lng,d[u(r._0x26e0c8)],h);m[u(r._0x27ad65)]=d.lng,m.lat=d.lat,m.alt=h,m[u(2041)]=0,l.push(m)});else _.forEach(h=>{const d=c,u=Cesium__namespace[d(i._0x54ce3a)].fromDegrees(h[d(3409)],h.lat,h[d(1155)]);u.lng=h.lng,u.lat=h[d(i._0x30d858)],u.alt=h.alt,u[d(i._0x419a2c)]=0,l.push(u)});this._rate_positions=l,this._clearDraw(),this[c(t._0xcf891e)]=new ShadowRateDrawCommand(this[c(t._0x13fb75)].scene,this._rate_positions),this[c(t._0x13fb75)][c(3399)][c(t._0x528a3c)][c(565)](this._drawCommand),this._drawCommand[c(t._0x29477c)][c(t._0x10e514)](h=>{const d=c,u=h.length;let m=0;for(let f=0;f<u;f+=4)this._rate_positions[m][d(x._0x501b8d)]+=h[f],m+=1}),this[c(t._0x485827)].on(EventType.clockStop,this._map_clockStopTickHandler,this),this.start(e.startDate,e[c(t._0x2082dc)]),this.fire(EventType[c(546)])})}_clearDraw(){const e={_0x3af9c8:3940},t=_0x2397ca;if(this[t(e._0x3af9c8)]=0,this._rate_positions)for(let x=0,i=this._rate_positions.length;x<i;x++)this[t(3954)][x].total=0;this._drawCommand&&(this[t(558)][t(3399)][t(1187)].remove(this._drawCommand),this._drawCommand.destroy(),delete this._drawCommand)}_map_clockStopTickHandler(e){const t={_0x56c3a9:3483,_0x2dbad9:3940,_0xdb5368:3430},x=_0x2397ca;this._map[x(3573)](EventType[x(t._0x56c3a9)],this._map_clockStopTickHandler,this),this._drawCommand&&(this[x(558)].scene.primitives.remove(this._drawCommand),this._drawCommand[x(2941)](),delete this._drawCommand);for(let s=0,o=this._rate_positions[x(2027)];s<o;s++)this._rate_positions[s].rate=1-this._rate_positions[s].total/this._rate_total;const i={total:this[x(t._0x2dbad9)],positions:this._rate_positions};this._promise_resolve&&(this[x(t._0xdb5368)](i),delete this._promise_resolve),this.fire(EventType.stop,i)}}class Measure extends BaseThing{get graphicLayer(){return this._graphicLayer}get graphics(){return this._graphicLayer.graphics}get[_0x2397ca(867)](){return this[_0x2397ca({_0x2e68bb:3886}._0x2e68bb)].length>0}[_0x2397ca(1757)](e){}_mountedHook(){const e={_0x4ba76d:3327};this._graphicLayer=new GraphicLayer({hasEdit:!0,eventParent:this,isContinued:this.options.isContinued,isAutoEditing:!this.options.isContinued,...this.options,private:!0}),this._graphicLayer.hasEdit&&this._graphicLayer.bindContextMenu([{text:this._map.getLangText("_删除测量"),icon:Icon.Delete,show:t=>{const x=t.graphic;return!(x!=null&&x.inProgress&&!x.editing)},callback:t=>{const x=_0x3361,i=t.graphic;if(!i)return;const s=i.parent;this._graphicLayer.removeGraphic(i),s&&this._graphicLayer[x(e._0x4ba76d)](s),this.fire(EventType.remove,{mtype:this._measureType,graphic:i})}}])}_addedHook(){this._map.addLayer(this._graphicLayer)}_removedHook(){this._map.removeLayer(this._graphicLayer)}distance(e={}){const t=_0x2397ca;return this.stopDraw(),e.type=t(530),this[t(3886)].startDraw(e)}[_0x2397ca(204)](e={}){return this[_0x2397ca(1740)](),e.type="distanceSurfaceMeasure",this._graphicLayer.startDraw(e)}[_0x2397ca(3447)](e={}){const t=_0x2397ca;return this.stopDraw(),e.type="sectionMeasure",this[t(3886)].startDraw(e)}area(e={}){const t={_0x6986ad:968},x=_0x2397ca;return this[x(1740)](),e[x(t._0x6986ad)]="areaMeasure",this._graphicLayer[x(1421)](e)}areaSurface(e={}){const t={_0x3821b0:854},x=_0x2397ca;return this.stopDraw(),e[x(968)]=x(t._0x3821b0),this._graphicLayer.startDraw(e)}volume(e={}){const t={_0x46a308:3493},x=_0x2397ca;return this.stopDraw(),e.type=e.depth?"volumeDepthMeasure":x(t._0x46a308),this._graphicLayer[x(1421)](e)}height(e={}){const t={_0x39e979:3886},x=_0x2397ca;return this.stopDraw(),e.type="heightMeasure",this[x(t._0x39e979)].startDraw(e)}heightTriangle(e={}){const t={_0x1e0bc6:3886,_0x24767b:1421},x=_0x2397ca;return this.stopDraw(),e.type="heightTriangleMeasure",this[x(t._0x1e0bc6)][x(t._0x24767b)](e)}[_0x2397ca(3143)](e={}){return this.stopDraw(),e.type="angleMeasure",this._graphicLayer.startDraw(e)}[_0x2397ca(2800)](e={}){return this.stopDraw(),e.type="pointMeasure",this._graphicLayer.startDraw(e)}stopDraw(){const e={_0x5075db:3886,_0x18675a:1740},t=_0x2397ca;return this[t(e._0x5075db)][t(e._0x18675a)]()}[_0x2397ca(3456)](){const e={_0x5f2807:3886,_0x3089d4:3456},t=_0x2397ca;return this[t(e._0x5f2807)][t(e._0x3089d4)]()}endDraw(){return this[_0x2397ca({_0x55f2a5:3886}._0x55f2a5)].endDraw()}clear(){return this._graphicLayer.clear()}[_0x2397ca(1821)](e){const t={_0x2f6a6a:1991},x={_0x39faca:1908},i=_0x2397ca;this._graphicLayer[i(t._0x2f6a6a)](s=>{const o=i;s.options[o(x._0x39faca)]=e,s.showText&&s.showText(e)})}destroy(e){this[_0x2397ca(3886)].destroy(e),super.destroy(e)}}class FloodByGraphic extends BaseThing{get positions(){return this.options.positions}set positions(e){const t={_0x43d809:3044,_0x416f87:3854,_0x4c651a:639,_0x595d0d:1320,_0x2c2265:558,_0x313562:679,_0x290ef3:558},x={_0x26332c:1364},i=_0x2397ca;if(this[i(t._0x43d809)].positions=e,e){const s=[],o=[];e.forEach(r=>{const c=i,_=LngLatPoint[c(x._0x26332c)](r);!_||!_.valid()||(_._alt_bak=_.alt,o.push(_),s.push(_.toCartesian(!0)))}),this[i(t._0x416f87)]=o,this._hierarchyPositions=s,this._map&&!(this[i(3044)][i(713)]??Cesium__namespace[i(t._0x4c651a)](this[i(558)][i(t._0x595d0d)](s)))&&(!Cesium__namespace.defined(this[i(3484)])&&(this._last_depthTestAgainstTerrain=this[i(t._0x2c2265)].scene[i(t._0x313562)][i(1583)]),this[i(t._0x290ef3)].scene.globe[i(1583)]=!0)}else this._hierarchyPositions=null}get height(){const e=_0x2397ca;return this._extrudedHeight??this[e(3044)].minHeight}set height(e){const t={_0x3b2640:1091,_0x27a949:3854},x={_0x28123c:2025,_0x3283c9:799},i=_0x2397ca;if(this._extrudedHeight=e,this.options.perPositionHeight&&(!this._poinst&&this[i(3044)][i(t._0x3b2640)]&&(this[i(1091)]=this.options.positions),this._poinst)){const s=[];this[i(t._0x27a949)].forEach(o=>{const r=i,c=LngLatPoint.parse(o);!c||!c[r(x._0x28123c)]()||(c[r(1155)]=c._alt_bak+e,s.push(c[r(x._0x3283c9)](!0)))}),this._hierarchyPositions=s}this.fire(EventType.change,{height:this._extrudedHeight})}get speed(){return this[_0x2397ca(3044)].speed}set speed(e){const t={_0x2ba795:3044},x=_0x2397ca;this[x(t._0x2ba795)].speed=e}[_0x2397ca(2645)](){const e={_0x513d08:428,_0x345308:639,_0x340294:1091,_0x4564d0:2403},t={_0x2b83e9:1091},x=_0x2397ca;this[x(3248)]=new GraphicLayer({name:x(936),private:!0}),this._extrudedHeight=0;const i=new Cesium__namespace.PolygonHierarchy,s={color:"#007be6",opacity:.5,outline:!1,...this.options.style,perPositionHeight:!0};!this.options.perPositionHeight&&(s.height=this._extrudedHeight,s.extrudedHeight=new Cesium__namespace[x(e._0x513d08)](r=>this[x(3946)],!1));const o=new PolygonEntity({positions:new Cesium__namespace.CallbackProperty(r=>{const c=x;return this._hierarchyPositions?(i[c(t._0x2b83e9)]=this._hierarchyPositions,i):null},!1),style:s});this.graphic=o,Cesium__namespace.defined(this.options.minHeight)&&Cesium__namespace[x(e._0x345308)](this.options.maxHeight)&&Cesium__namespace.defined(this[x(3044)][x(e._0x340294)])&&this[x(e._0x4564d0)]()}[_0x2397ca(2670)](){const e={_0x906540:3248,_0x325304:340,_0x37ca0e:2996},t=_0x2397ca;this._map[t(3615)](this.graphicLayer),this[t(e._0x906540)][t(e._0x325304)](this[t(e._0x37ca0e)])}_removedHook(){this._map.removeLayer(this.graphicLayer),this.clear()}setOptions(e){const t={_0x17d932:2045,_0xd0fbc:3044,_0x29ee7e:639,_0x36207e:1091},x=_0x2397ca;e&&(this[x(3044)]={...this[x(3044)],...e}),this[x(t._0x17d932)]();let i=this.options.minHeight,s=this[x(t._0xd0fbc)].maxHeight;if(!Cesium__namespace[x(t._0x29ee7e)](i)){logError$1(x(1303),i);return}if(!Cesium__namespace.defined(s)){logError$1("maxHeight 请传入有效数值！",s);return}if(i>s){const o=i;i=s,s=o}return this[x(3946)]=i,this._maxHeight=s,this[x(t._0x36207e)]=this.options.positions,this}start(){const e={_0x3dbc63:3412},t={_0x2e48a6:2632,_0xf97c48:3872},x=_0x2397ca;if(!this[x(3554)]){logError$1(x(e._0x3dbc63));return}this.stop(),this[x(1776)]=!0,this[x(1788)](EventType.start),this._timeTik=setInterval(()=>{const i=x;if(this._extrudedHeight>=this[i(t._0x2e48a6)]){this.stop();return}const s=this._extrudedHeight+this.speed;s>this._maxHeight?this[i(t._0xf97c48)]=this._maxHeight:this[i(t._0xf97c48)]=s},100)}[_0x2397ca(2045)](){const e={_0x42497e:4037},t=_0x2397ca;this.isStart&&(this[t(e._0x42497e)]&&(clearInterval(this._timeTik),delete this._timeTik),this[t(1776)]=!1,this.fire(EventType.end))}restart(){this.setOptions(),this.start()}clear(){const e={_0x107b59:1091,_0x373e6d:3399},t=_0x2397ca;this[t(e._0x107b59)]=null,this._last_depthTestAgainstTerrain!=null&&(this._map[t(e._0x373e6d)].globe.depthTestAgainstTerrain=this._last_depthTestAgainstTerrain,delete this._last_depthTestAgainstTerrain),this[t(2045)]()}destroy(e){this[_0x2397ca(3248)]&&this.graphicLayer.destroy(e),super.destroy(e)}}class Slope extends BaseThing{constructor(e={}){const t={_0x3fb7f0:749,_0x5c1010:3044,_0x5c1b65:1819,_0x439629:1760,_0x118c64:3044},x=_0x2397ca;super(e),this.options[x(749)]=this.options[x(749)]||{},this.options[x(t._0x3fb7f0)].show=this[x(t._0x5c1010)].arrow.show??!0,this.options.arrow.color=this.options.arrow.color??Cesium__namespace.Color[x(t._0x5c1b65)],this.options.arrow.width=this[x(t._0x5c1010)][x(t._0x3fb7f0)].width??15,this[x(3044)].arrow[x(t._0x439629)]=this[x(t._0x118c64)].arrow.scale??.3}_mountedHook(){this.graphicLayer=new GraphicLayer({name:"坡度坡向",tooltip:function(e){const t=_0x3361;var x;const i=(x=e.graphic)===null||x===void 0?void 0:x[t(1578)];if(i)return"坡度: "+i.slopeStr1+"  ("+i.slopeStr2+")<br />坡向: "+i.direction+"°"},...this.options,private:!0})}_addedHook(){const e={_0x44adad:3044},t=_0x2397ca;this._map[t(3615)](this.graphicLayer),this[t(e._0x44adad)][t(1091)]&&this.options[t(1091)].length>0&&this.add(this.options.positions,this.options)}_removedHook(){const e={_0x11efc0:2911},t=_0x2397ca;this._map[t(e._0x11efc0)](this.graphicLayer),this[t(2265)]()}add(e,t={}){const x={_0x3f3863:1703},i={_0x33d453:630,_0x469b2b:679,_0x49ca53:1697,_0x2e1d20:1703,_0x2981b0:1325},s=_0x2397ca;if(!e||e.length<1)return;e=LngLatArray.toCartesians(e),this[s(x._0x3f3863)]={positions:e},this[s(1573)]=0,this._arrowInstances=[],this._arrData=[];const o=t.splitNum??8;if(e.length>2&&o>1)interPolygon({scene:this[s(558)].scene,positions:e,has3dtiles:!1,onlyPoint:!0,splitNum:o})[s(1286)](r=>{const c=s;this.options.arrow.length?this._arrowLength=this.options.arrow.length:this._arrowLength=Cesium__namespace.Math[c(i._0x33d453)](r.granularity,this._map.scene[c(i._0x469b2b)][c(1782)][c(i._0x49ca53)])*this.options.arrow.scale,this[c(i._0x2e1d20)].maxHeight=r.maxHeight,this[c(1703)].minHeight=r.minHeight,e=[];for(let _=0;_<r.list.length;_++)e.push(r.list[_][c(494)]);this._stateAll=e.length;for(let _=0;_<this[c(272)];_++)this[c(i._0x2981b0)](e[_],t)});else{this._arrowLength=this.options.arrow[s(2027)]??40,this._stateAll=e.length;for(let r=0;r<this._stateAll;r++)this._fxOnePoint(e[r],t)}}[_0x2397ca(1325)](e,t){const x={_0x3629a3:1782,_0x13eaaa:713},i=_0x2397ca;if(!e)return;const s=getEllipseOuterPositions({position:e,radius:t.radius??2,count:t.count??4});s.push(e);const o=this._map.scene.globe[i(x._0x3629a3)];computeSurfacePoints({scene:this[i(558)].scene,positions:s,has3dtiles:t[i(x._0x13eaaa)]}).then(r=>{const c=i;if(this._stateAll===0)return;r[c(604)]&&logWarn("未获取到高度值，贴地高度计算存在误差");const _=o[c(2948)](r[c(1091)]),l=_[c(3978)]();let h=0,d=_[0].height,u=0,m=_[0].height;for(let C=1;C<_.length-1;C++){const v=_[C];v.height>d&&(d=v[c(3872)],h=C),v.height<m&&(m=v[c(3872)],u=C)}const f=_[h],g=_[u],b=this[c(1491)](l,f),y=this.getSlope(l,g);b>y?this._fxOnePointOk(e,l,f,b):this._fxOnePointOk(e,l,g,y)})}_fxOnePointOk(e,t,x,i){const s={_0x22a39a:3872,_0x72b850:749,_0x4e4988:2350},o=_0x2397ca,r=Cesium__namespace.Cartographic.toCartesian(t);let c=Cesium__namespace.Cartographic.toCartesian(x);c=getOnLinePointByLen(r,c,this._arrowLength);let _;t[o(s._0x22a39a)]>x[o(s._0x22a39a)]?_=[r,c]:_=[c,r];const l=getAngle(_[0],_[1],!0);let h=Math.atan(i)*180/Math.PI;h=Number(h.toFixed(2));const d=h+"°",u=(i*100).toFixed(2)+"%",m={position:e,slope:h,slopeStr1:d,slopeStr2:u,direction:l};if(!this._arrData&&(this._arrData=[]),this._arrData.push(m),this.fire(EventType.endItem,{data:m,index:this[o(1573)]}),this.options.arrow[o(3482)]&&this._arrowInstances[o(2434)]({positions:_,attr:m}),this._stateOkIndex++,this[o(1573)]>=this[o(272)]){if(this[o(3044)][o(s._0x72b850)].show&&this._arrowInstances[o(2027)]>0){const f=new PolylineCombine({instances:this[o(s._0x4e4988)],style:{materialType:PolylineArrow,...this.options.arrow}});this.graphicLayer.addGraphic(f)}this.fire(EventType.end,{...this._eventResult,data:this[o(2277)]})}}[_0x2397ca(1491)](e,t){const x={_0x2c5cae:1899,_0x441c08:799,_0x2e01a2:295},i=_0x2397ca;if(!e||!t)return;const s=Math.abs(e.height-t.height),o=Cesium__namespace.Cartesian3.distance(Cesium__namespace[i(x._0x2c5cae)][i(x._0x441c08)](e),Cesium__namespace[i(x._0x2e01a2)].fromRadians(t.longitude,t.latitude,e.height));return s/o}[_0x2397ca(2265)](){const e=_0x2397ca;this.graphicLayer[e(2265)](),this._arrowInstances=[],this[e(2277)]=[],this._stateAll=0,this._stateOkIndex=0}static getSlope(e){const t={_0x4eb204:1568};return new Promise((x,i)=>{const s=_0x3361,o=new Slope({positions:e.positions,splitNum:1,radius:e.radius,count:e.count,has3dtiles:e.has3dtiles,point:{show:!1},arrow:{show:!1}});o.addTo(e[s(4014)]),e.endItem&&o.on(EventType.endItem,e.endItem),o.on(EventType[s(t._0x4eb204)],r=>{o.destroy(),e.callback&&e.callback(r),x(r)})})}}class TerrainPlanClip extends BaseThing{get[_0x2397ca(1091)](){return this._positions}set[_0x2397ca(1091)](e){const t=_0x2397ca;this.clear(),this._positions=e,this[t(1643)](e)}get[_0x2397ca(2437)](){return this.options.diffHeight}set diffHeight(e){const t={_0x5f4835:3044},x=_0x2397ca;this[x(t._0x5f4835)].diffHeight=e,this._graphicLayer&&this._graphicLayer.eachGraphic(i=>{i.diffHeight=e})}get[_0x2397ca(1668)](){return this.options.clipOutSide}set clipOutSide(e){this.options.clipOutSide=e,this._map&&this._positions&&this.setPositions(this._positions)}[_0x2397ca(1757)](e){const t={_0x33f964:2985,_0x3590a3:3886},x=_0x2397ca;this._map.scene.globe.clippingPlanes&&(this[x(558)].scene.globe[x(t._0x33f964)][x(407)]=e),this._graphicLayer&&(this[x(t._0x3590a3)].show=e)}_mountedHook(){}_addedHook(){const e={_0x4388c3:3044},t=_0x2397ca;this._graphicLayer=new GraphicLayer({...this.options,private:!0}),this._map[t(3615)](this._graphicLayer),this[t(e._0x4388c3)].positions&&this.options[t(1091)][t(2027)]>0&&this.setPositions(this.options.positions)}_removedHook(){this[_0x2397ca({_0x3b9134:2265}._0x3b9134)](),this._graphicLayer&&(this._map.removeLayer(this._graphicLayer),delete this._graphicLayer)}setPositions(e){const t={_0x6b843a:1169,_0x297bb2:295,_0x31ff60:2527,_0x154324:960,_0x38ae87:1040,_0x299c6c:201},x=_0x2397ca;if(this.clear(),!e||e.length<3){logError$1(x(1681),e);return}e=LngLatArray[x(t._0x6b843a)](e),this._positions=e;const i=[],s=e.length;let o;const r=formatNum$1(getAngle(e[0],e[1]),2);if(r>-.02&&r<.02)o=!1;else{const c=formatNum$1(getAngle(e[0],e[2]),2);o=r<c}this.clipOutSide&&(o=!o);for(let c=0;c<s;++c){const _=(c+1)%s,l=Cesium__namespace.Cartesian3.midpoint(e[c],e[_],new Cesium__namespace.Cartesian3),h=Cesium__namespace.Cartesian3.normalize(l,new Cesium__namespace.Cartesian3);let d;o?d=Cesium__namespace[x(t._0x297bb2)][x(t._0x31ff60)](e[c],l,new Cesium__namespace.Cartesian3):d=Cesium__namespace[x(295)].subtract(e[_],l,new Cesium__namespace.Cartesian3),d=Cesium__namespace[x(t._0x297bb2)][x(t._0x154324)](d,d);let u=Cesium__namespace[x(t._0x297bb2)].cross(d,h,new Cesium__namespace.Cartesian3);u=Cesium__namespace.Cartesian3.normalize(u,u);const m=new Cesium__namespace.Plane(u,0),f=Cesium__namespace.Plane[x(814)](m,l);i[x(2434)](new Cesium__namespace.ClippingPlane(u,f))}if(this._map[x(3399)].globe.clippingPlanes=new Cesium__namespace[x(t._0x38ae87)]({planes:i,edgeWidth:this.options.edgeWidth??1,edgeColor:this.options[x(t._0x299c6c)]??Cesium__namespace[x(2134)][x(3970)],unionClippingRegions:this.clipOutSide,enabled:!0}),this.options.image){const c=new Pit({style:this[x(3044)],positions:e});this._graphicLayer.addGraphic(c)}}clear(){const e={_0x2dbf8e:3886,_0xacbd62:2985,_0x433639:558,_0x50f6d5:679},t=_0x2397ca;var x,i;this._map&&(this._positions=null,this[t(e._0x2dbf8e)]&&this[t(3886)].clear(),(x=this._map.scene[t(679)])!==null&&x!==void 0&&(i=x[t(e._0xacbd62)])!==null&&i!==void 0&&i.enabled&&(this[t(e._0x433639)].scene[t(e._0x50f6d5)].clippingPlanes.enabled=!1),this._map.scene.globe[t(e._0xacbd62)]=void 0)}}var TerrainEditVS=`in vec3 position;

void main() {
  vec4 pos = vec4(position.xyz, 1.0);
  gl_Position = czm_projection * pos;
}
`,TerrainEditFS=_0x2397ca(847);class TerrainOldEditBase extends BaseThing{constructor(e={}){const t=_0x2397ca;super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this[t(1670)]=e.heightVal??new Cesium__namespace.Cartesian4(0,0,0,500),this._maxCanvasSize=e.maxCanvasSize??4096,this._areaList=[]}get[_0x2397ca(2332)](){const e={_0x3e6ed1:1669},t=_0x2397ca;var x,i,s,o,r,c;return(x=this._map)===null||x===void 0||(i=x[t(3399)])===null||i===void 0||(s=i.globe)===null||s===void 0||(o=s[t(e._0x3e6ed1)])===null||o===void 0||(r=o[t(2675)])===null||r===void 0||(c=r.marsOptions)===null||c===void 0?void 0:c.flood}get list(){return this[_0x2397ca(3264)]}get[_0x2397ca(2550)](){var e;return((e=this.analysisOptions)===null||e===void 0?void 0:e.showElseArea)??!0}set[_0x2397ca(2550)](e){this.analysisOptions.showElseArea=e}get positions(){const e=_0x2397ca;return this.length>0?this[e(3264)][0].positions:null}set positions(e){this.clear(),this.addArea(e)}get length(){const e=_0x2397ca;if(this[e(3264)]){var t;return(t=this._areaList)===null||t===void 0?void 0:t[e(2027)]}else return 0}_enabledHook(e){this.analysisOptions.enabled=e}_addedHook(){const e={_0x4f5b1f:2332,_0x4be762:2251,_0x2c5f79:1091,_0x1c445b:3044,_0x4a71d5:512,_0x1fa325:1192},t=_0x2397ca;this[t(e._0x4f5b1f)].showElseArea=this.options.showElseArea??!0,this.options.positions&&this[t(e._0x4be762)](this.options[t(e._0x2c5f79)]),this[t(e._0x1c445b)].dynamicView&&(this._scopeIds_last=[],this._map.on(EventType[t(e._0x4a71d5)],this[t(e._0x1fa325)],this))}_removedHook(){const e={_0x3eac2b:677,_0x268f15:558,_0x5494cf:2332,_0x4e0336:2015},t=_0x2397ca;this.options[t(e._0x3eac2b)]&&(this[t(e._0x268f15)].off(EventType.preUpdate,this._map_preUpdateHandler,this),this._scopeIds_last=[]),this[t(2265)](),this.analysisOptions.enabled=!1,this[t(2332)][t(646)]=Cesium__namespace.Matrix4.IDENTITY,this[t(e._0x5494cf)][t(e._0x4e0336)]=void 0}[_0x2397ca(2265)](){const e={_0x4b727c:3264},t=_0x2397ca;this[t(e._0x4b727c)]=[],this._clearDraw()}_clearDraw(){const e={_0x2d65b2:3727,_0x15c8d2:2941},t=_0x2397ca;this.analysisOptions.inverMatrix=Cesium__namespace.Matrix4[t(2489)],this.analysisOptions.polygonTexture=void 0,this._polygonTexture&&(this[t(e._0x2d65b2)][t(e._0x15c8d2)](),delete this._polygonTexture),this[t(3262)]&&(this[t(3262)].destroy(),delete this._framebuffer)}getAreaById(e){const t={_0x27ec74:3264},x=_0x2397ca;if(!isNumber(e))return e;for(let i=0;i<this[x(t._0x27ec74)].length;i++){const s=this._areaList[i];if(s.id===e)return s}return null}hideArea(e){const t=this.getAreaById(e);t&&(t.show=!1,t.pitPrimitive&&(t.pitPrimitive.show=!1),this._update())}showArea(e){const t={_0x38fa33:1349},x=_0x2397ca,i=this.getAreaById(e);i&&(i[x(3482)]=!0,i.pitPrimitive&&(i[x(t._0x38fa33)].show=!0),this[x(2306)]())}[_0x2397ca(980)](e){}[_0x2397ca(2232)](e){const t=_0x2397ca;isNumber(e)&&(e=this.getAreaById(e)),e&&(this._removeAreaHook(e),removeArrayItem(this[t(3264)],e),this._update())}_addAreaHook(e){}[_0x2397ca(2251)](e,t){const x={_0x5af67c:3599},i=_0x2397ca;if(!e||e.length===0)return;const s={show:!0,scope:!0,id:getGlobalId(),positions_original:e,positions:LngLatArray.toCartesians(e,!0)};return this._areaList.push(s),logInfo(i(x._0x5af67c),LngLatArray.toArray(e)),this[i(3745)](s,t),this[i(2306)](),s}_update(){const e={_0x299a26:1084,_0xa2f9cf:1255,_0x52983b:558,_0x4d0cef:3399,_0x1b92dc:2027,_0x2b8185:2580,_0x536b32:1550,_0x323d86:1255,_0x58daa0:1046,_0x2f821d:295,_0x2de86b:295,_0x25fc88:1046,_0x4803cc:2937,_0x5a67f7:1887,_0x157ae7:569,_0x2e2b73:1323,_0x1adb2e:2415,_0x505fe7:964,_0x471ad7:2529,_0xbe6439:2531},t={_0x128b6d:1572},x={_0x22af9b:760,_0x5877e1:1046,_0x330be1:1550,_0x191b1b:2434,_0x1f596d:364},i={_0x1ae941:1457,_0x224d05:295},s=_0x2397ca;this[s(e._0x299a26)]();const o=new Cesium__namespace.Cartesian3,r=[];this._areaList[s(e._0xa2f9cf)](F=>{const L=s;if(!F.show||!F[L(2949)]||!F[L(1091)])return;const B=Cesium__namespace[L(i._0x1ae941)].fromPoints(F.positions);Cesium__namespace[L(i._0x224d05)].add(o,B.center,o),r[L(2434)](F)});const c=this[s(e._0x52983b)][s(e._0x4d0cef)].context;if(r[s(e._0x1b92dc)]===0)return;const _=Cesium__namespace.Cartesian3[s(e._0x2b8185)](o,1/r.length,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(_);this[s(e._0x536b32)]=Cesium__namespace.Matrix4.inverse(l,new Cesium__namespace[s(1046)]);let h=99999999,d=99999999,u=-99999999,m=-99999999;r[s(e._0x323d86)](F=>{const L=s;let B=new Cesium__namespace[L(185)]({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(F.positions)});B=Cesium__namespace.PolygonGeometry.createGeometry(B);const Y=B.indices,j=B[L(2870)][L(x._0x22af9b)].values,J=j[L(2027)],Q=[],X=[];for(let pe=0;pe<J;pe+=3){const fe=new Cesium__namespace.Cartesian3(j[pe],j[pe+1],j[pe+2]),oe=Cesium__namespace[L(x._0x5877e1)][L(2933)](this[L(x._0x330be1)],fe,new Cesium__namespace.Cartesian3);oe.z=0,Q[L(2434)](oe),X.push(oe.x),X[L(x._0x191b1b)](oe.y),X[L(2434)](oe.z),h>=oe.x&&(h=oe.x),d>=oe.y&&(d=oe.y),u<=oe.x&&(u=oe.x),m<=oe.y&&(m=oe.y)}F.localPos=Q;const xe=new Float64Array(X),K=Cesium__namespace.BoundingSphere[L(x._0x1f596d)](xe),le=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:xe})},indices:Y,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:K}),ce=Cesium__namespace.ShaderProgram[L(1981)]({context:c,vertexShaderSource:TerrainEditVS,fragmentShaderSource:TerrainEditFS,attributeLocations:{position:0}}),_e=Cesium__namespace.VertexArray.fromGeometry({context:c,geometry:le,attributeLocations:ce[L(2762)],bufferUsage:Cesium__namespace.BufferUsage.STATIC_DRAW,interleave:!0}),ne=new Cesium__namespace.RenderState;ne.depthRange.near=-1e6,ne[L(2284)].far=1e6,F.drawAreaCommand=new Cesium__namespace.DrawCommand({boundingVolume:K,primitiveType:Cesium__namespace[L(486)].TRIANGLES,vertexArray:_e,shaderProgram:ce,renderState:ne,pass:Cesium__namespace.Pass.TRANSLUCENT})});const f=(m-d)/(u-h),g=[h,d,u,m],b=12e4,y={viewMatrix:Cesium__namespace.Matrix4.IDENTITY,inverseViewMatrix:Cesium__namespace[s(e._0x58daa0)].IDENTITY,frustum:new Cesium__namespace.OrthographicOffCenterFrustum,positionCartographic:{height:0,latitude:0,longitude:0},positionWC:new Cesium__namespace.Cartesian3(0,0,b/2),directionWC:new Cesium__namespace.Cartesian3(0,0,-1),upWC:new Cesium__namespace[s(e._0x2f821d)](0,1,0),rightWC:new Cesium__namespace[s(e._0x2de86b)](1,0,0),viewProjectionMatrix:Cesium__namespace[s(e._0x25fc88)].IDENTITY};y.frustum[s(e._0x4803cc)]=g[0],y.frustum.top=g[3],y.frustum.right=g[2],y.frustum.bottom=g[1],y[s(1209)][s(387)]=.1,y.frustum.far=-b,this._tailorRect=new Cesium__namespace.Cartesian4(g[0],g[1],g[2]-g[0],g[3]-g[1]);let C,v;f>1?(C=this[s(e._0x5a67f7)]/f,v=this[s(e._0x5a67f7)]):(C=this[s(e._0x5a67f7)],v=C*f);const M=new Cesium__namespace[s(2699)]({context:c,width:C,height:v,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace[s(1350)][s(e._0x157ae7)],flipY:!1});this._polygonTexture=M,this.analysisOptions.polygonTexture=this._polygonTexture,this._framebuffer=new Cesium__namespace.Framebuffer({context:c,colorTextures:[M],destroyAttachments:!1});const w=new Cesium__namespace[s(260)]({color:new Cesium__namespace.Color(0,0,0,0),framebuffer:this._framebuffer}),H=new Cesium__namespace[s(e._0x2e2b73)](c);H[s(e._0x1adb2e)]=new Cesium__namespace[s(e._0x505fe7)](0,0,C,v);const D=c[s(e._0x471ad7)];D[s(e._0xbe6439)](y),w[s(622)](c),r.forEach(F=>{const L=s,B=F.drawAreaCommand;B&&(D.updatePass(B[L(t._0x128b6d)]),B.framebuffer=this[L(3262)],B.execute(c,H))}),this._beginAnalysis()}_beginAnalysis(){const e=_0x2397ca;this[e(2332)][e(646)]=this._inverMatrix,this.analysisOptions.polygonTexture=this._polygonTexture,this.analysisOptions.enabled=!0,this[e(2332)].floodRect=this._tailorRect,this[e(2332)].globe=!1}_map_preUpdateHandler(){const e={_0x19f718:2027,_0x126eaa:2027,_0x6a42eb:3069},t={_0x149633:3482,_0x3a20e3:2434},x=_0x2397ca;if(!this._map||!this._areaList||this._areaList.length===0&&this[x(800)][x(e._0x19f718)]===0||this[x(1668)])return;const i=[];this._areaList[x(1255)](o=>{const r=x;o[r(t._0x149633)]&&(o.scope=this._isInSceneCamera(o.positions),o.scope&&i[r(t._0x3a20e3)](o.id))});let s=i[x(e._0x126eaa)]!==this[x(800)].length;if(!s){for(let o=0;o<i.length;o++)if(this._scopeIds_last[o]!==i[o]){s=!0;break}}s&&(this._update(),this._scopeIds_last=Cesium__namespace[x(e._0x6a42eb)](i))}[_0x2397ca(2745)](e){const t={_0x31d89c:3400,_0x16c41b:2617,_0x2e0a1c:295},x=_0x2397ca;if(!e||e.length===0)return!1;const i=this._map[x(3399)],s=this._map.getCenter(),o=i[x(t._0x31d89c)].positionWC;for(let r=0;r<e.length;r++){const c=e[r],_=Cesium__namespace.SceneTransforms[x(t._0x16c41b)](i,c,new Cesium__namespace.Cartesian2);if(_&&_.x>=0&&_.x<=i.context[x(2549)]&&_.y>=0&&_.y<=i.context.drawingBufferHeight||o&&o.x>=0&&Cesium__namespace.Cartesian3.distance(c,o)<2e5||s&&s.x>=0&&Cesium__namespace[x(t._0x2e0a1c)].distance(c,s)<2e5)return!0}return!1}}var GlobeFlodByMaterial=`uniform vec4 u_mars_flood_val;//（基础淹没高度，当前淹没高度，最大淹没高度,默认高度差(最大淹没高度 - 基础淹没高度)）
uniform vec4 u_mars_flood_color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  material.alpha = (materialInput.height < u_mars_flood_val.y) ? u_mars_flood_color.a : 0.0;
  material.diffuse = u_mars_flood_color.rgb;
  return material;
}
`;const FloodByMaterialType=_0x2397ca(3865);class FloodByMaterial extends TerrainOldEditBase{constructor(e={}){super(e),this.color=this.options.color??new Cesium__namespace.Color(.15,.7,.95,.5)}get[_0x2397ca(3872)](){return this.heightVal.y??this._minHeight}set height(e){const t=_0x2397ca;this[t(1670)].y=e,this[t(2332)].heightVal.y=e}get speed(){const e={_0x2e882a:3071},t=_0x2397ca;return this.options[t(e._0x2e882a)]||1}set speed(e){this.options.speed=Number(e)}get color(){return this._color}set[_0x2397ca(1089)](e){const t=_0x2397ca;this._color=getCesiumColor(e),this.analysisOptions&&(this[t(2332)].color=this._color)}addArea(e,t){return e=setPositionsHeight(e,0),super.addArea(e,t)}setOptions(e){const t={_0x5b7805:3044,_0x457257:2632,_0xc63d7:1670,_0x431f02:1089,_0x14a5c7:3044},x=_0x2397ca;e&&(this.options={...this.options,...e}),this[x(2045)]();let i=this.options.minHeight,s=this[x(t._0x5b7805)].maxHeight;if(!Cesium__namespace[x(639)](i)){logError$1("minHeight 请传入有效数值！",i);return}if(!Cesium__namespace.defined(s)){logError$1("maxHeight 请传入有效数值！",s);return}if(i>s){const o=i;i=s,s=o}return this._minHeight=i,this._maxHeight=s,this.heightVal=new Cesium__namespace.Cartesian4(this._minHeight,this._minHeight,this[x(t._0x457257)],this._maxHeight-this._minHeight),this.analysisOptions[x(1670)].x=this[x(t._0xc63d7)].x,this.analysisOptions.heightVal.y=this.heightVal.y,this.analysisOptions[x(t._0x431f02)]=this[x(t._0x431f02)],this.analysisOptions.globe=!1,this.analysisOptions.showElseArea=this[x(t._0x14a5c7)].showElseArea??!0,this._map.scene[x(679)][x(3816)]=Cesium__namespace.Material.fromType(FloodByMaterialType),this}[_0x2397ca(1757)](e){const t={_0x118c46:3399,_0x78cbbc:3816},x=_0x2397ca;var i;super[x(1757)](e),e?this._map[x(t._0x118c46)].globe.material=Cesium__namespace[x(2206)].fromType(FloodByMaterialType):((i=this._map.scene.globe.material)===null||i===void 0?void 0:i[x(968)])===FloodByMaterialType&&(this[x(558)][x(3399)].globe[x(t._0x78cbbc)]=null)}start(){const e={_0x29a76f:348},t=_0x2397ca;this[t(2045)](),this.isStart=!0,this.fire(EventType.start),this[t(558)].on(EventType.clockTick,this[t(e._0x29a76f)],this)}_onClockTickHandler(e){const t={_0x163d61:1670,_0x744d12:2045},x=_0x2397ca;if(this.heightVal.y+=this.speed/50,this.heightVal.y>this.heightVal.z){this[x(t._0x163d61)].y=this.heightVal.z,this[x(t._0x744d12)]();return}if(this.heightVal.y<this.heightVal.x){this[x(1670)].y=this.heightVal.x,this.stop();return}this.analysisOptions[x(t._0x163d61)].y=this.heightVal.y,this.fire(EventType.change,{height:this.heightVal.y})}[_0x2397ca(2045)](){const e={_0x32bec7:3023,_0x3d0025:1568},t=_0x2397ca;this[t(1776)]&&(this._map.off(EventType[t(e._0x32bec7)],this._onClockTickHandler,this),this.isStart=!1,this.fire(EventType[t(e._0x3d0025)]))}restart(){this.setOptions(),this.start()}clear(){const e={_0x14a68e:3816,_0x36303d:3816},t=_0x2397ca;var x;this.stop(),((x=this._map.scene.globe[t(e._0x14a68e)])===null||x===void 0?void 0:x[t(968)])===FloodByMaterialType&&(this._map[t(3399)][t(679)][t(e._0x36303d)]=null),this._map.scene.globe._surface.tileProvider[t(2674)].resetFloodValue(),super.clear()}}Cesium__namespace.Material[_0x2397ca(3074)]=FloodByMaterialType,Cesium__namespace.Material._materialCache.addMaterial(FloodByMaterialType,{fabric:{type:FloodByMaterialType,source:GlobeFlodByMaterial},translucent:!1});class TerrainClip extends TerrainOldEditBase{constructor(e={}){const t=_0x2397ca;e[t(677)]=e[t(677)]??!0,super(e),this._clipOutSide=e.clipOutSide??!1}get analysisOptions(){var e,t,x,i,s,o;return(e=this._map)===null||e===void 0||(t=e.scene)===null||t===void 0||(x=t.globe)===null||x===void 0||(i=x._surface)===null||i===void 0||(s=i.tileProvider)===null||s===void 0||(o=s.marsOptions)===null||o===void 0?void 0:o.clip}get clipOutSide(){var e;return(e=this.analysisOptions)===null||e===void 0?void 0:e.clipOutSide}set[_0x2397ca(1668)](e){this.analysisOptions.clipOutSide=e}get diffHeight(){return this[_0x2397ca({_0x5b289f:3044}._0x5b289f)].diffHeight}set[_0x2397ca(2437)](e){const t={_0x2e8427:3044,_0x33289c:3886},x=_0x2397ca;this[x(t._0x2e8427)].diffHeight=e,this[x(t._0x33289c)]&&this._graphicLayer[x(1991)](i=>{const s=x;i[s(2437)]=e})}[_0x2397ca(1757)](e){const t={_0x4cd823:407,_0xb78745:3482},x=_0x2397ca;this.analysisOptions[x(t._0x4cd823)]=e,this._graphicLayer&&(this._graphicLayer[x(t._0xb78745)]=e)}_addedHook(){const e={_0x21636b:3399,_0x4b337d:558,_0x52a3a7:3044,_0x195aaf:3615},t=_0x2397ca;!this._map[t(e._0x21636b)].globe.depthTestAgainstTerrain&&(this[t(e._0x4b337d)].scene.globe[t(1583)]=!0,this[t(220)]=!0),this.analysisOptions.enabled=!0,this[t(3886)]=new GraphicLayer({...this[t(e._0x52a3a7)],private:!0}),this._map[t(e._0x195aaf)](this._graphicLayer),super[t(2670)]()}[_0x2397ca(380)](){const e={_0x412deb:2265,_0x995f49:2332,_0x2ed45c:558},t=_0x2397ca;this[t(e._0x412deb)](),this.analysisOptions[t(407)]=!1,this[t(e._0x995f49)].inverMatrix=Cesium__namespace.Matrix4.IDENTITY,this[t(2332)].polygonTexture=void 0,this._map.removeLayer(this._graphicLayer,!0),delete this._graphicLayer,this._hasChangeDepthTestAgainstTerrain&&(this[t(e._0x2ed45c)].scene.globe.depthTestAgainstTerrain=!1,this._hasChangeDepthTestAgainstTerrain=!1)}clear(){const e={_0x2906c5:679,_0x5decca:2265},t=_0x2397ca;this._map.scene[t(e._0x2906c5)]._surface[t(2675)][t(2674)].resetClipValue(),super[t(e._0x5decca)](),this._graphicLayer.clear()}_addAreaHook(e,t){const x={_0x2e8576:340},i=_0x2397ca;this[i(3044)].image&&(e.pitPrimitive=new Pit({style:{...this[i(3044)],...t},positions:e[i(403)]}),this._graphicLayer[i(x._0x2e8576)](e[i(1349)]))}_removeAreaHook(e){const t={_0x4b1890:1349,_0x5177f5:3886},x=_0x2397ca;e!=null&&e[x(t._0x4b1890)]&&(this[x(t._0x5177f5)].removeGraphic(e.pitPrimitive,!0),delete e.pitPrimitive)}_beginAnalysis(){const e={_0x4db868:3727},t=_0x2397ca;this.analysisOptions[t(407)]=!0,this.analysisOptions.inverMatrix=this[t(1550)],this.analysisOptions.polygonTexture=this[t(e._0x4db868)],this.analysisOptions[t(887)]=this._tailorRect}}class ContourLine extends TerrainOldEditBase{constructor(e={}){const t={_0x2860d9:1089,_0x29e65a:1807,_0x323eee:3974,_0x584064:3633,_0x2dc5f0:2367,_0x4d6a44:2367,_0x36d4fe:2367,_0x41024a:2367,_0x2f5712:1737},x=_0x2397ca;super(e),this._contourShow=e[x(2096)]??!0,this[x(395)]=e[x(2637)]??100,this[x(1163)]=e.width??1.5,this[x(2266)]=getCesiumColor(e[x(t._0x2860d9)],Cesium__namespace.Color.RED),this._shadingType=e.shadingType??"none",this._shadingAlpha=e.shadingAlpha??.6,this[x(166)]=e.colorScheme||{elevation:{step:[0,.045,.1,.15,.37,.54,1],color:[x(t._0x29e65a),"#2747E0",x(t._0x323eee),x(t._0x584064),x(t._0x2dc5f0),"#FF9742",x(1737)]},slope:{step:[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],color:["#000000","#2747E0",x(3974),"#D33038",x(t._0x4d6a44),x(t._0x36d4fe),"#ffd700"]},aspect:{step:[0,.2,.4,.6,.8,.9,1],color:[x(1807),"#2747E0","#D33B7D","#D33038",x(t._0x41024a),"#FF9742",x(t._0x2f5712)]}},this[x(3892)]=e.minHeight??-414,this.maxHeight=e[x(1295)]??8777}get[_0x2397ca(2096)](){return this[_0x2397ca({_0x29debc:787}._0x29debc)]}set[_0x2397ca(2096)](e){this._contourShow=e,this.updateMaterial()}get shadingType(){return this._shadingType}set shadingType(e){this._shadingType=e,this.updateMaterial()}get[_0x2397ca(288)](){return this._shadingAlpha}set[_0x2397ca(288)](e){this._shadingAlpha=e,this.updateMaterial()}get width(){return this._contourWidth}set[_0x2397ca(1526)](e){const t={_0x46c69e:3414},x=_0x2397ca;this[x(1163)]=e,this[x(3414)]&&(this[x(t._0x46c69e)][x(1526)]=e)}get spacing(){return this._contourSpacing}set spacing(e){const t={_0x110c6e:3414,_0x2b4cd4:2637},x=_0x2397ca;this[x(395)]=e,this.contourUniforms&&(this[x(t._0x110c6e)][x(t._0x2b4cd4)]=e)}get[_0x2397ca(1089)](){return this._contourColor}set color(e){const t=_0x2397ca;this[t(2266)]=getCesiumColor(e),this.contourUniforms&&(this.contourUniforms.color=e)}_enabledHook(e){super._enabledHook(e),this.updateMaterial()}clear(){const e={_0x190fe8:2674,_0x6a3f:1522},t=_0x2397ca;super.clear(),this._last_material&&(this._map.scene.globe.material=this[t(4059)],delete this._last_material),this.contourUniforms=null,this._map.scene.globe._surface[t(2675)][t(e._0x190fe8)].resetFloodValue(),this[t(3643)]&&(this._map.scene.globe.enableLighting=!1,this._map.clock.currentTime=Cesium__namespace[t(e._0x6a3f)].now(),delete this._hasResetEnableLighting)}_addAreaHook(){const e={_0x21daf2:3892},t=_0x2397ca;this[t(1670)]=new Cesium__namespace.Cartesian4(this.minHeight,this[t(e._0x21daf2)],this.maxHeight,this.maxHeight-this.minHeight),this.updateMaterial()}[_0x2397ca(1986)](){const e={_0x8eeb26:2133,_0x3efb98:3060,_0x2dfefc:1875,_0x1e4e84:1355,_0x5d3d8e:271,_0x5768c9:1779,_0x5a7274:1779,_0x24f921:558,_0x5cd21b:4059},t=_0x2397ca;let x,i,s;const o=this[t(e._0x8eeb26)];if(this[t(2096)]?(o==="elevation"?(x=this.getElevationContourMaterial(),s=x[t(e._0x3efb98)].elevationRampMaterial.uniforms,s[t(e._0x2dfefc)]=this.minHeight,s.maximumHeight=this.maxHeight,i=x.materials[t(1355)][t(2554)]):o==="slope"?(x=this.getSlopeContourMaterial(),s=x[t(e._0x3efb98)][t(2012)].uniforms,i=x.materials[t(e._0x1e4e84)].uniforms):o===t(e._0x5d3d8e)?(x=this.getAspectContourMaterial(),s=x.materials.aspectRampMaterial.uniforms,i=x.materials[t(1355)].uniforms):(x=Cesium__namespace.Material.fromType("ElevationContour"),i=x.uniforms),i.width=this[t(1163)],i[t(2637)]=this._contourSpacing,i.color=this._contourColor):o==="elevation"?(x=Cesium__namespace.Material[t(e._0x5768c9)]("ElevationRamp"),s=x[t(2554)],s.minimumHeight=this.minHeight,s[t(1380)]=this.maxHeight):o==="slope"?(x=Cesium__namespace.Material.fromType("SlopeRamp"),s=x.uniforms):o==="aspect"&&(x=Cesium__namespace.Material[t(e._0x5a7274)]("AspectRamp"),s=x.uniforms),o!=="none"&&(s.image=this.getColorRamp(o)),o==="slope"||o==="aspect"){if(!this[t(e._0x24f921)].scene.globe.enableLighting){this._map.scene.globe.enableLighting=!0;const r=new Date;r[t(3140)](10),this._map.clock[t(3718)]=Cesium__namespace.JulianDate.fromDate(new Date(r)),this._hasResetEnableLighting=!0}}else this._hasResetEnableLighting&&(this._map.scene.globe.enableLighting=!1,this._map.clock.currentTime=Cesium__namespace.JulianDate[t(2116)](),delete this._hasResetEnableLighting);this.contourUniforms=i,(!this._last_material||this._map[t(3399)].globe.material)&&(this[t(e._0x5cd21b)]=this[t(558)][t(3399)].globe[t(3816)]),this._map.scene.globe.material=x}getColorRamp(e){const t={_0x29d3c6:3469,_0x15a30d:3151},x=_0x2397ca;var i;const s=document[x(2676)]("canvas");s[x(1526)]=100,s[x(3872)]=1;const o=s[x(t._0x29d3c6)]("2d",{willReadFrequently:!0});o.globalAlpha=this.shadingAlpha;const r=o.createLinearGradient(0,0,100,0),c=this.colorScheme[e];if((c==null||(i=c.step)===null||i===void 0?void 0:i.length)>0)for(let _=0,l=c[x(t._0x15a30d)].length;_<l;_++)r.addColorStop(c.step[_],c.color[_]);return o.fillStyle=r,o.fillRect(0,0,100,1),s}[_0x2397ca(2243)](){const e={_0xb788e6:1324},t=_0x2397ca;return new Cesium__namespace.Material({fabric:{type:t(e._0xb788e6),materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:"ElevationRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:!1})}getSlopeContourMaterial(){const e=_0x2397ca;return new Cesium__namespace[e(2206)]({fabric:{type:e(4062),materials:{contourMaterial:{type:"ElevationContour"},slopeRampMaterial:{type:"SlopeRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, slopeRampMaterial.alpha)"}},translucent:!1})}getAspectContourMaterial(){const e={_0x57b8e3:2449},t=_0x2397ca;return new Cesium__namespace.Material({fabric:{type:"AspectColorContour",materials:{contourMaterial:{type:t(e._0x57b8e3)},aspectRampMaterial:{type:t(250)}},components:{diffuse:"contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse",alpha:t(300)}},translucent:!1})}}class TerrainEditBase extends BaseThing{constructor(e={}){const t={_0x2abeda:3264},x=_0x2397ca;super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this[x(t._0x2abeda)]=[]}get[_0x2397ca(2547)](){return this._areaList}get length(){const e={_0x340af1:3264},t=_0x2397ca;if(this[t(e._0x340af1)]){var x;return(x=this[t(3264)])===null||x===void 0?void 0:x.length}else return 0}[_0x2397ca(1757)](e){this.analysisOptions.enabled=e}_addedHook(){const e={_0x33472c:3044},t=_0x2397ca;this.options.area&&this[t(e._0x33472c)].area.forEach(x=>{this.addArea(x.positions,x)})}_removedHook(){const e=_0x2397ca;this[e(2332)][e(407)]=!1}[_0x2397ca(2265)](){this._areaList=[]}getAreaById(e){if(!isNumber(e))return e;for(let t=0;t<this._areaList.length;t++){const x=this._areaList[t];if(x.id===e)return x}return null}[_0x2397ca(379)](e){const t={_0xe59bb:675,_0x5d80bb:1306},x=_0x2397ca,i=this.getAreaById(e);i&&(i[x(3482)]=!1,i.downGraphic&&(i[x(t._0xe59bb)].show=!1),i[x(t._0x5d80bb)]&&(i[x(1306)].show=!1),this._update())}[_0x2397ca(1963)](e){const t=_0x2397ca,x=this.getAreaById(e);x&&(x[t(3482)]=!0,x.downGraphic&&(x.downGraphic.show=!0),x.upGraphic&&(x.upGraphic.show=!0),this[t(2306)]())}_removeAreaHook(e){}removeArea(e){isNumber(e)&&(e=this.getAreaById(e)),e&&(this._removeAreaHook(e),removeArrayItem(this._areaList,e),this._update())}_addAreaHook(e){}addArea(e,t){const x={_0x3cfe29:1169,_0x40de38:3745},i=_0x2397ca;if(!e||e.length===0)return;const s={show:!0,id:getGlobalId(),...t,positions:LngLatArray[i(x._0x3cfe29)](e)};return this[i(3264)].push(s),this[i(x._0x40de38)](s,t),this._update(),s}_update(){}}class TerrainFlat extends TerrainEditBase{get analysisOptions(){const e={_0x5f0681:679},t=_0x2397ca;var x,i,s,o,r,c;return(x=this[t(558)])===null||x===void 0||(i=x.scene)===null||i===void 0||(s=i[t(e._0x5f0681)])===null||s===void 0||(o=s._surface)===null||o===void 0||(r=o.tileProvider)===null||r===void 0||(c=r.marsOptions)===null||c===void 0?void 0:c[t(1958)]}_enabledHook(e){const t=_0x2397ca;this[t(2332)].enabled=e}[_0x2397ca(2670)](){const e={_0x23fd6c:2332},t=_0x2397ca;super._addedHook(),this[t(e._0x23fd6c)][t(407)]=this.enabled}_removedHook(){this.clear(),this.analysisOptions.enabled=!1}clear(){const e={_0x1a81a4:558,_0x17b3f1:3399,_0x541569:2675,_0x50def6:3181},t=_0x2397ca;this[t(e._0x1a81a4)][t(e._0x17b3f1)].globe._surface[t(e._0x541569)].marsOptions[t(e._0x50def6)](),this[t(2332)].enabled=this.enabled,super.clear()}[_0x2397ca(2306)](){const e={_0x1b81ac:3399},t={_0x3fa26b:3520},x=_0x2397ca,i=this.analysisOptions;if(this._areaList.length>0){const s=this._map[x(e._0x1b81ac)].globe.ellipsoid,o=[],r=[],c=[];this._areaList[x(1255)](_=>{const l=x;if(!_[l(3482)]||!_.positions)return;const h=s.cartesianArrayToCartographicArray(_[l(1091)]);let d=h[0].height;h.forEach(u=>{d=Math.min(d,u.height)}),o[l(2434)](d-(_.height||0)),r.push(h),c.push(Cesium__namespace[l(t._0x3fa26b)].fromCartographicArray(h))}),i[x(2725)]=o,i.rectangles=c,i.areas=r}else i.heights=void 0,i.rectangles=void 0,i[x(1485)]=void 0;i.hasUpdate=!0}}class TerrainUplift extends TerrainEditBase{get analysisOptions(){const e=_0x2397ca;var t,x,i,s,o,r;return(t=this._map)===null||t===void 0||(x=t.scene)===null||x===void 0||(i=x.globe)===null||i===void 0||(s=i._surface)===null||s===void 0||(o=s.tileProvider)===null||o===void 0||(r=o.marsOptions)===null||r===void 0?void 0:r[e(3685)]}get showUp(){const e={_0x5d058f:2332},t=_0x2397ca;var x;return(x=this[t(e._0x5d058f)])===null||x===void 0?void 0:x.showUp}set showUp(e){this.analysisOptions.showUp=e}get upHeight(){return this.options.upHeight??0}set[_0x2397ca(583)](e){const t={_0x10e95d:3264,_0x21917f:2027,_0x3aa2d4:2935,_0x434830:1306},x=_0x2397ca;if(this.options[x(583)]=e,this[x(t._0x10e95d)][x(t._0x21917f)]>0){this[x(2332)].height=e,this.analysisOptions[x(t._0x3aa2d4)]=!0;for(let i=0;i<this._areaList.length;i++){const s=this[x(t._0x10e95d)][i];s.upGraphic&&s[x(t._0x434830)][x(988)](e)}}}_enabledHook(e){const t={_0x1ae84c:3886},x=_0x2397ca;this.analysisOptions.enabled=e,this._graphicLayer&&(this[x(t._0x1ae84c)].show=e)}_addedHook(){const e={_0x2530d5:3399,_0x5324c0:679,_0x396cdc:558},t=_0x2397ca;this._map[t(e._0x2530d5)].globe.terrainExaggeration===1&&(this._map.scene[t(e._0x5324c0)].terrainExaggeration=1.001),!this[t(e._0x396cdc)].scene.globe.depthTestAgainstTerrain&&(this._map.scene.globe[t(1583)]=!0,this._hasChangeDepthTestAgainstTerrain=!0),this[t(3886)]=new GraphicLayer({...this[t(3044)],private:!0}),this[t(e._0x396cdc)].addLayer(this._graphicLayer),super._addedHook(),this.analysisOptions.enabled=this[t(407)]}_removedHook(){const e={_0x5af0f7:2265,_0x485ff1:3399,_0x1d48dc:1583},t=_0x2397ca;this[t(e._0x5af0f7)](),this.analysisOptions.enabled=!1,this[t(558)].removeLayer(this._graphicLayer,!0),delete this._graphicLayer,this._hasChangeDepthTestAgainstTerrain&&(this._map[t(e._0x485ff1)].globe[t(e._0x1d48dc)]=!1,this._hasChangeDepthTestAgainstTerrain=!1)}clear(){const e={_0x2cc144:558,_0x5119b5:499,_0x3a9101:407,_0x333c71:3886},t=_0x2397ca;this[t(e._0x2cc144)].scene.globe[t(1669)][t(2675)].marsOptions[t(e._0x5119b5)](),this.analysisOptions[t(e._0x3a9101)]=this.enabled,super.clear(),this[t(e._0x333c71)].clear()}[_0x2397ca(3745)](e,t){const x={_0xb0268:3044,_0x2c3581:3210},i={_0xb86673:1074},s=_0x2397ca;t={...this[s(x._0xb0268)],...t},t.image&&t.diffHeight&&computeSurfaceLine({map:this._map,positions:e.positions[s(x._0x2c3581)](e.positions[0]),has3dtiles:!1,splitNum:t.splitNum??30}).then(o=>{const r=s;e[r(i._0xb86673)]=o.positions,this._addPitGraphic(e,t)})}_addPitGraphic(e,t){const x={_0x38c141:2736,_0x4c2f25:1091,_0x57f0aa:340},i=_0x2397ca,s=e.positionsNew,o=[];let r=Number.MAX_VALUE;for(let h=0,d=s.length;h<d;h++){const u=Cesium__namespace.Cartographic.fromCartesian(s[h]);r=Math.min(r,u[i(3872)]),o.push(u.height)}const c=r-t.diffHeight,_=Array(s.length).fill(c);e.minHeight=r,e[i(2437)]=t.diffHeight,e.downGraphic=new PitEntity({style:t,data:{height:c,minHeight:r,positionsWall:s,minimumHeights:_,maximumHeights:o},positions:e.positions}),this[i(3886)].addGraphic(e.downGraphic);const l=this.upHeight;this[i(x._0x38c141)]&&l!==0&&(e.upGraphic=new PitEntity({style:t,data:{height:c,minHeight:r,positionsWall:s,minimumHeights:_,maximumHeights:o},positions:e[i(x._0x4c2f25)]}),this._graphicLayer[i(x._0x57f0aa)](e.upGraphic),e.upGraphic[i(988)](l))}_removeAreaHook(e){const t=_0x2397ca;e!=null&&e.downGraphic&&(this._graphicLayer.removeGraphic(e[t(675)],!0),delete e.downGraphic),e!=null&&e.upGraphic&&(this[t(3886)][t(3327)](e.upGraphic,!0),delete e.upGraphic)}_update(){const e={_0x4fa848:2027,_0x1d2cc0:2935},t=_0x2397ca,x=this[t(2332)];if(this._areaList[t(e._0x4fa848)]>0){const i=this[t(558)].scene.globe.ellipsoid,s=[],o=[];this._areaList.forEach(r=>{const c=t;if(!r[c(3482)]||!r.positions)return;const _=i.cartesianArrayToCartographicArray(r.positions);s.push(_),o.push(Cesium__namespace[c(3520)].fromCartographicArray(_))}),x.height=this.upHeight,x.rectangles=o,x.areas=s}else x.height=void 0,x.rectangles=void 0,x.areas=void 0;x[t(e._0x1d2cc0)]=!0}}class LimitHeight extends BaseThing{get layer(){return this._layer}get positions(){return this.options.positions}set positions(e){this.options.positions=e,this._createGraphic()}get height(){return this.options.height||0}set height(e){const t=_0x2397ca;this.options.height=e,this[t(3296)]()}get bottomHeight(){return this[_0x2397ca({_0x7bc027:3044}._0x7bc027)].bottomHeight||0}set bottomHeight(e){this.options.bottomHeight=e,this._createGraphic()}_mountedHook(){const e=_0x2397ca;this[e(3831)]=new GraphicLayer({private:!0})}_addedHook(){const e={_0x1c1302:558,_0x488983:3615,_0x6f6534:3831},t=_0x2397ca;this[t(e._0x1c1302)][t(e._0x488983)](this[t(e._0x6f6534)]),this.options.positions&&(this.positions=this.options.positions)}_removedHook(){this._graphic&&(this._layer.removeGraphic(this._graphic),delete this._graphic),this._map.removeLayer(this._layer)}[_0x2397ca(3296)](){const e={_0x33263d:1169,_0x48d1ac:3872,_0x2e3450:1574,_0x3acf46:1754,_0x4550e5:340},t=_0x2397ca;if(this._graphic&&(this[t(3831)][t(3327)](this._graphic),delete this._graphic),!this.options.positions)return;const x=LngLatArray[t(e._0x33263d)](this.options[t(1091)]);this._graphic=new PolygonPrimitive({positions:x,style:{...this.options,height:this.bottomHeight+this[t(e._0x48d1ac)],diffHeight:1e4,perPositionHeight:!1,classification:!0,classificationType:Cesium__namespace[t(e._0x2e3450)][t(e._0x3acf46)]},asynchronous:!1}),this._layer[t(e._0x4550e5)](this._graphic)}clear(){const e={_0x36229e:3327},t=_0x2397ca;this.options.positions=null,this._graphic&&(this._layer[t(e._0x36229e)](this._graphic),delete this._graphic)}}class ModelPlanClip extends TilesetPlanClip{get clipTarget(){return this._model}set clipTarget(e){const t={_0x2c832e:2985},x=_0x2397ca;this._model=e,this._inverseMatrix=null,this[x(2985)]&&(this._model[x(2985)]=this[x(t._0x2c832e)])}get graphic(){return this._graphic}set[_0x2397ca(2996)](e){const t={_0x4428d9:1171,_0x75d37e:1243,_0xbeb959:1239,_0x1619cf:871,_0x41eaae:760,_0x3c13f2:957},x=_0x2397ca;if(e[x(t._0x4428d9)]){e.readyPromise.then(i=>{const s=x;this._model=e.primitive,this[s(1239)]=e.modelMatrix});return}this._graphic=e,e.entity?(this._model=e.entity[x(t._0x75d37e)],this[x(t._0xbeb959)]=Cesium__namespace[x(1620)][x(t._0x1619cf)](getPositionValue(e[x(t._0x41eaae)]))):e instanceof Cesium__namespace.Entity?(this[x(1222)]=e[x(1243)],this[x(1239)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(getPositionValue(e.position))):e[x(957)]?(this[x(1222)]=e[x(t._0x3c13f2)],this._modelMatrix=e.modelMatrix):e instanceof Cesium__namespace[x(1880)]&&(this._model=e,this[x(1239)]=e.modelMatrix)}get[_0x2397ca(2785)](){const e={_0x2aed7b:1239,_0x4c22ee:1046},t=_0x2397ca;return!this[t(951)]&&this[t(e._0x2aed7b)]&&(this._inverseMatrix=Cesium__namespace.Matrix4.inverseTransformation(this._modelMatrix,new Cesium__namespace[t(e._0x4c22ee)])),this._inverseMatrix}_mountedHook(){const e={_0x4ea20a:3044},t=_0x2397ca;this[t(e._0x4ea20a)].graphic&&(this.graphic=this.options[t(2996)])}}ModelPlanClip[_0x2397ca(3285)]=ClipType;class TilesetBoxClip extends BaseThing{get clipTarget(){return this[_0x2397ca(3839)]}set[_0x2397ca(2884)](e){const t=_0x2397ca;this._tileset=e,this._inverseMatrix=null,Cesium__namespace.defined(this.options.position)&&(this.position=this.options[t(760)])}get[_0x2397ca(2407)](){return this._layer}set[_0x2397ca(2407)](e){const t={_0x23a7ca:1285},x=_0x2397ca;this._layer=e,e.loadOk?this.clipTarget=e[x(t._0x23a7ca)]:e.on(EventType.load,i=>{this.clipTarget=e.tileset})}get[_0x2397ca(3779)](){return this[_0x2397ca(2985)]}get inverseMatrix(){const e={_0x38d574:3839,_0x412217:1046,_0x33381e:3476,_0x228626:951},t=_0x2397ca;if(!this._inverseMatrix){let x;const i=this[t(e._0x38d574)].root.transform;i&&i[t(1043)](Cesium__namespace[t(1046)].IDENTITY)||!i?x=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._tileset[t(3424)].center):x=Cesium__namespace[t(e._0x412217)][t(e._0x33381e)](this[t(3839)].root.transform),this[t(e._0x228626)]=Cesium__namespace.Matrix4[t(754)](x,new Cesium__namespace.Matrix4)}return this._inverseMatrix}get center(){const e={_0x3c3995:3831,_0x325554:3424,_0x34a940:2006},t=_0x2397ca;return this[t(e._0x3c3995)]?this[t(3831)].position:this._tileset[t(e._0x325554)][t(e._0x34a940)]}get position(){return this._position}set position(e){const t=_0x2397ca;this._position=LngLatPoint.toCartesian(e),this[t(2921)]()}get[_0x2397ca(3568)](){const e=_0x2397ca;return this.options[e(3568)]}set[_0x2397ca(3568)](e){const t={_0x5e1410:2921},x=_0x2397ca;this.options.dimensions=e,this[x(t._0x5e1410)]()}get showBox(){return this.options.showBox}set showBox(e){const t={_0x43c613:3044,_0x54380b:3886},x=_0x2397ca;this.options.showBox=e,this[x(t._0x43c613)].showBox?(!this[x(3886)]&&(this._graphicLayer=new GraphicLayer({...this.options,private:!0})),this[x(3886)][x(3482)]=!0):this._graphicLayer&&(this[x(t._0x54380b)].show=!1),this.redraw()}_mountedHook(){const e={_0x424670:1285},t=_0x2397ca;this.options.showBox&&(this._graphicLayer=new GraphicLayer({...this.options,private:!0})),this.options.layer?this.layer=this.options[t(2407)]:this.options.tileset&&(this.clipTarget=this.options[t(e._0x424670)])}_addedHook(){const e=_0x2397ca;this._graphicLayer&&this._map.addLayer(this._graphicLayer),this.clipTarget&&Cesium__namespace.defined(this.options.position)&&(this[e(760)]=this.options.position)}_removedHook(){const e={_0x405ec4:3886},t=_0x2397ca;this.clear(),this[t(e._0x405ec4)]&&this._map[t(2911)](this._graphicLayer)}[_0x2397ca(2921)](){const e={_0x3212c8:3568,_0x93253e:760,_0x3bf69d:3891,_0x96b60a:3044,_0x3dd5ed:1668,_0x493f7e:2985,_0x4f740d:3044},t=_0x2397ca;if(!this.position||!this[t(e._0x3212c8)])return;const x=this.dimensions.x/2,i=this[t(e._0x3212c8)].y/2,s=this.dimensions.z/2,o=this.inverseMatrix,r=Cesium__namespace.Matrix4.multiplyByPoint(o,this.center,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4.multiplyByPoint(o,this[t(e._0x93253e)],new Cesium__namespace.Cartesian3),_=r.x-c.x,l=r.y-c.y,h=r.z-c.z,d=[new Cesium__namespace.ClippingPlane(new Cesium__namespace[t(295)](0,0,1),-s+h),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,-1),-s-h),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(1,0,0),-x+_),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(-1,0,0),-x-_),new Cesium__namespace[t(e._0x3bf69d)](new Cesium__namespace.Cartesian3(0,1,0),-i+l),new Cesium__namespace.ClippingPlane(new Cesium__namespace[t(295)](0,-1,0),-i-l)],u=new Cesium__namespace.ClippingPlaneCollection({planes:d,edgeWidth:this[t(e._0x96b60a)].edgeWidth??0,edgeColor:this[t(3044)].edgeColor??Cesium__namespace.Color.WHITE,unionClippingRegions:this.options[t(e._0x3dd5ed)]??!1});if(this[t(e._0x493f7e)]=u,this.clipTarget&&(this.clipTarget.clippingPlanes=u),this[t(e._0x4f740d)].showBox){this._graphicLayer.clear();const m=new BoxEntity({position:this[t(760)],style:{dimensions:this.options.dimensions,color:Cesium__namespace[t(2134)][t(3970)].withAlpha(.2),...this.options.boxStyle}});this._graphicLayer.addGraphic(m)}}[_0x2397ca(2265)](){const e={_0x13cafe:3886,_0x516dfb:2985},t=_0x2397ca;var x,i;this._graphicLayer&&this[t(e._0x13cafe)].clear(),this[t(e._0x516dfb)]&&delete this.clippingPlanes,(x=this.clipTarget)!==null&&x!==void 0&&(i=x.clippingPlanes)!==null&&i!==void 0&&i.enabled&&(this.clipTarget.clippingPlanes.enabled=!1),this.clipTarget.clippingPlanes=void 0}}const scratchCurrentDirection=new Cesium__namespace.Cartesian3,scratchDeltaPosition=new Cesium__namespace.Cartesian3,scratchNextPosition=new Cesium__namespace[_0x2397ca(295)],scratchTerrainConsideredNextPosition=new Cesium__namespace.Cartesian3,scratchNextCartographic=new Cesium__namespace.Cartographic,RoamType={DIRECTION_NONE:0,DIRECTION_FORWARD:1,DIRECTION_BACKWARD:2,DIRECTION_LEFT:3,DIRECTION_RIGHT:4};class FirstPersonRoam extends BaseThing{constructor(e={}){const t={_0x243ff1:3071,_0x5e5758:3872,_0x8ba498:2520},x=_0x2397ca;super(e),this[x(t._0x243ff1)]=this.options.speed??1.5,this[x(3407)]=this.options.rotateSpeed??-5,this[x(t._0x5e5758)]=this.options.height??10,this[x(t._0x8ba498)]=this.options.maxPitch??88}_enabledHook(e){e?this.activate():this.disable()}_mountedHook(){}[_0x2397ca(2670)](){const e={_0x52b065:558,_0x1a8eba:558,_0x2e9e94:2479,_0x1ddd68:558,_0x4802c2:629,_0xbd1a6f:2653},t=_0x2397ca;this[t(407)]&&this.activate(),this[t(e._0x52b065)].on(EventType.leftDown,this._onLeftDownHandler,this),this[t(e._0x1a8eba)].on(EventType.leftUp,this._onLeftUpHandler,this),this._map.on(EventType[t(e._0x2e9e94)],this._onMouseMoveHandler,this),this[t(e._0x1ddd68)].on(EventType[t(e._0x4802c2)],this._onDbClickHandler,this),this[t(558)].on(EventType[t(e._0xbd1a6f)],this[t(2787)],this),this._map.on(EventType.keyup,this._onKeyUp,this),this[t(558)].on(EventType[t(3023)],this._onClockTick,this)}_removedHook(){const e={_0x2c3b62:3573,_0x575ae0:421,_0x5473cb:558,_0x4cc04b:3023},t=_0x2397ca;this.disable(),this._map.off(EventType.leftDown,this._onLeftDownHandler,this),this._map[t(e._0x2c3b62)](EventType.leftUp,this[t(e._0x575ae0)],this),this._map.off(EventType.mouseMove,this[t(1174)],this),this[t(e._0x5473cb)].off(EventType.dblClick,this._onDbClickHandler,this),this._map.off(EventType.keydown,this._onKeyDown,this),this[t(558)].off(EventType.keyup,this._onKeyUp,this),this._map.off(EventType[t(e._0x4cc04b)],this._onClockTick,this)}[_0x2397ca(2900)](e){const t={_0x152c5a:407,_0x115898:3365,_0x52e370:295},x=_0x2397ca;this[x(t._0x152c5a)]&&(this[x(t._0x115898)]=!0,this._startMousePosition=Cesium__namespace[x(t._0x52e370)].clone(e.position),this._mousePosition=this._startMousePosition)}_onDbClickHandler(e){const t={_0x178f0c:407,_0x9c2e23:760},x=_0x2397ca;this[x(t._0x178f0c)]&&(this._looking=!0,this._startMousePosition=Cesium__namespace.Cartesian3.clone(e[x(t._0x9c2e23)]),this._mousePosition=this[x(1773)])}[_0x2397ca(421)](e){this._looking=!1}_onMouseMoveHandler(e){const t=_0x2397ca;this[t(2648)]=e.endPosition}_onKeyDown(e){const t={_0x47a0f7:1789,_0x250a9f:3947,_0xde1e4:470},x=_0x2397ca;if(!this.enabled)return;const i=e[x(t._0x47a0f7)];switch(this._direction=RoamType.DIRECTION_NONE,i){case 87:this._direction=RoamType.DIRECTION_FORWARD;break;case 83:this._direction=RoamType[x(t._0x250a9f)];break;case"D"[x(2578)](0):this[x(t._0xde1e4)]=RoamType.DIRECTION_RIGHT;break;case"A"[x(2578)](0):this._direction=RoamType.DIRECTION_LEFT;break}}[_0x2397ca(2530)](){const e={_0x45dedf:717},t=_0x2397ca;this[t(407)]&&(this._direction=RoamType[t(e._0x45dedf)])}_onClockTick(e){const t={_0x4a0c20:2131,_0x24d45a:295,_0x494376:470,_0x1d8b4f:295,_0x300272:2165,_0x16bb6d:470,_0x3d422c:295,_0x140e78:1401,_0x4419e4:295,_0x496935:558,_0x31b664:679},x=_0x2397ca;if(!this.enabled)return;const i=e._clockStep;if(this[x(3365)]&&this[x(3083)](i),this._direction===RoamType[x(717)])return;const s=this.speed*i;this._direction===RoamType[x(t._0x4a0c20)]?Cesium__namespace[x(t._0x24d45a)].multiplyByScalar(this._map[x(3400)].direction,1,scratchCurrentDirection):this[x(t._0x494376)]===RoamType.DIRECTION_BACKWARD?Cesium__namespace[x(t._0x1d8b4f)].multiplyByScalar(this._map.camera[x(t._0x300272)],-1,scratchCurrentDirection):this[x(t._0x16bb6d)]===RoamType.DIRECTION_LEFT?Cesium__namespace[x(t._0x3d422c)].multiplyByScalar(this._map.camera[x(t._0x140e78)],-1,scratchCurrentDirection):this[x(470)]===RoamType.DIRECTION_RIGHT&&Cesium__namespace[x(t._0x4419e4)][x(2580)](this[x(t._0x496935)].camera.right,1,scratchCurrentDirection),Cesium__namespace.Cartesian3.multiplyByScalar(scratchCurrentDirection,s,scratchDeltaPosition);const o=this._map[x(3400)][x(760)];Cesium__namespace.Cartesian3.add(o,scratchDeltaPosition,scratchNextPosition);const r=this._map.scene[x(t._0x31b664)],c=r.ellipsoid;c.cartesianToCartographic(scratchNextPosition,scratchNextCartographic);const _=r.getHeight(scratchNextCartographic);_!==void 0&&(scratchNextCartographic.height=_+this.height,c.cartographicToCartesian(scratchNextCartographic,scratchTerrainConsideredNextPosition),this._map.camera.setView({destination:scratchTerrainConsideredNextPosition,orientation:new Cesium__namespace.HeadingPitchRoll(this._map.camera.heading,this._map.camera.pitch,this[x(558)].camera.roll),endTransform:Cesium__namespace.Matrix4.IDENTITY}))}_changeHeadingPitch(e){const t={_0x502ccc:2500,_0x5273ff:558},x=_0x2397ca,i=this._map[x(1733)].clientWidth,s=this._map.canvas.clientHeight,o=(this._mousePosition.x-this[x(1773)].x)/i,r=-(this._mousePosition.y-this._startMousePosition.y)/s,c=Cesium__namespace[x(3876)][x(778)](this._map.camera.heading),_=o*this.rotateSpeed,l=c+_,h=Cesium__namespace.Math.toDegrees(this._map[x(3400)][x(227)]),d=r*this[x(3407)];let u=h+d;u>this.maxPitch*2&&u<360-this.maxPitch?u=360-this.maxPitch:u>this.maxPitch&&u<360-this.maxPitch&&(u=this[x(2520)]),this._map.camera[x(1160)]({orientation:{heading:Cesium__namespace.Math[x(t._0x502ccc)](l),pitch:Cesium__namespace.Math.toRadians(u),roll:this[x(t._0x5273ff)].camera[x(2969)]}})}_enableScreenSpaceCameraController(e){const t={_0xef2be4:2603,_0xff7f61:2396},x=_0x2397ca,i=this._map.scene;i.screenSpaceCameraController[x(t._0xef2be4)]=e,i.screenSpaceCameraController.enableTranslate=e,i.screenSpaceCameraController[x(t._0xff7f61)]=e,i.screenSpaceCameraController[x(872)]=e,i.screenSpaceCameraController.enableLook=e}activate(){const e={_0x35b320:558,_0x1d9e6f:3400,_0x4e33b7:365,_0x115d49:3872,_0x39a4e8:295,_0x3d1023:558,_0x50802f:1722,_0x152542:2729},t=_0x2397ca;this._enabled=!0,this._enableScreenSpaceCameraController(!1);const x=this[t(e._0x35b320)][t(e._0x1d9e6f)].position,i=new Cesium__namespace[t(1899)],s=this[t(e._0x35b320)].scene.globe;s.ellipsoid[t(e._0x4e33b7)](x,i);const o=s.getHeight(i);if(o===void 0)return!1;i[t(e._0x115d49)]=o+this[t(e._0x115d49)];const r=new Cesium__namespace[t(e._0x39a4e8)];s.ellipsoid.cartographicToCartesian(i,r);const c=this[t(e._0x3d1023)].camera[t(e._0x50802f)];return this._heading=c,this._map.camera[t(e._0x152542)]({destination:r,orientation:{heading:c,pitch:Cesium__namespace.Math.toRadians(0),roll:0}}),!0}disable(){this._enabled=!1,this._enableScreenSpaceCameraController(!0)}[_0x2397ca(2756)](){const e=_0x2397ca;!this[e(407)]&&this[e(3559)](),this._direction=RoamType.DIRECTION_FORWARD}stopAutoForward(){this._direction=RoamType.DIRECTION_NONE}}class RotatePoint extends BaseThing{constructor(e={}){const t=_0x2397ca;super(e),this[t(470)]=this.options.direction?1:-1,this._angle=360/(60*(this.options.time||60)),this._autoStopAngle=this.options.autoStopAngle}get isStart(){return this._isStart}_enabledHook(e){e?this.start():this.stop()}[_0x2397ca(2645)](){}_addedHook(){const e={_0x5f49e2:1277},t=_0x2397ca;this._map.on(EventType.mouseDown,this._map_mouseDownHandler,this),this._map.on(EventType.mouseUp,this._map_mouseUpHandler,this),this[t(e._0x5f49e2)]=!1}_map_mouseDownHandler(e){this._mouseDown=!0}_map_mouseUpHandler(e){const t={_0xe2318b:3400,_0x290eeb:295,_0x45f083:4002},x=_0x2397ca;this._mouseDown=!1;const i=this._map.getCenter();!i||i.alt>5e5||(this._tikRender=0,this._center=i[x(799)](),this[x(1626)]=this._map[x(t._0xe2318b)].heading,this[x(2573)]=this._map.camera.pitch,this[x(688)]=Cesium__namespace[x(t._0x290eeb)].distance(this._center,this._map.camera[x(t._0x45f083)]))}[_0x2397ca(380)](){const e={_0x66d13f:558,_0x3d5447:1299,_0x318ee0:2045},t=_0x2397ca;this._map.off(EventType.mouseDown,this._map_mouseDownHandler,this),this[t(e._0x66d13f)][t(3573)](EventType[t(e._0x3d5447)],this[t(1020)],this),this[t(e._0x318ee0)]()}start(e){const t={_0x47d701:799,_0x4ea796:1364,_0x1dfca7:3400,_0x314a8a:558,_0x225fc6:295,_0x6f5c0c:688,_0x30b1f1:2703},x={_0x2be22e:558,_0x5702c5:1153},i=_0x2397ca;var s;this._isStart&&this.stop(),this._isStart=!0;const o=(s=this._map.getCenter())===null||s===void 0?void 0:s[i(t._0x47d701)]();e?e instanceof Cesium__namespace.Cartesian3?this[i(1133)]=e:this._center=LngLatPoint[i(t._0x4ea796)](e)[i(799)]():this._center=o,this._distance=this.options.distance||Cesium__namespace.Cartesian3.distance(this[i(1133)],this._map[i(t._0x1dfca7)][i(4002)]),this._startHeading=this._map.camera[i(1722)],this[i(2573)]=this[i(t._0x314a8a)].camera.pitch;let r=2;Cesium__namespace[i(t._0x225fc6)].distance(o,this._center)<this[i(t._0x6f5c0c)]*.01&&(r=0),this[i(1788)](EventType.start),this._map[i(t._0x30b1f1)](this._center,{radius:this._distance,duration:r,complete:c=>{const _=i;this._isStart=!0,this._tikRender=0,this[_(x._0x2be22e)].on(EventType[_(x._0x5702c5)],this._onPreRenderHandler,this)}})}_onPreRenderHandler(e){const t={_0x1ab786:1277,_0xf2b659:944,_0x1b2491:944,_0x180297:470,_0x5eee11:1160,_0x131533:2573},x=_0x2397ca;if(this[x(t._0x1ab786)])return;this._tikRender++;const i=this._tikRender*this._angle;this[x(t._0xf2b659)]&&i>=this[x(t._0x1b2491)]&&this.stop();const s=Cesium__namespace.Math.toRadians(i*this[x(t._0x180297)])+this._startHeading;this._map.scene.camera[x(t._0x5eee11)]({destination:this._center,orientation:{heading:s,pitch:this[x(t._0x131533)]}}),this[x(558)][x(3399)].camera.moveBackward(this._distance),this.fire(EventType.change)}[_0x2397ca(2045)](){const e={_0x3a0a7e:2383},t=_0x2397ca;this[t(e._0x3a0a7e)]&&(this._isStart=!1,this[t(558)].off(EventType.preRender,this._onPreRenderHandler,this),this[t(1788)](EventType.stop))}}const MAX_PITCH_IN_DEGREE=88;class StreetView extends BaseThing{constructor(e={}){const t={_0x3768a8:3407,_0x2d12cc:2440},x=_0x2397ca;super(e),this.rotateSpeed=e[x(t._0x3768a8)]??30,this[x(t._0x2d12cc)]=e.heightStep??.2,this[x(3116)]=e.moveStep??.1}_enabledHook(e){const t={_0x5f4287:2291,_0x40bb81:3399,_0x3baf58:2976},x=_0x2397ca;this._map.mouseZoom&&(this._map[x(2673)].enabled=!e),e?(this._default_zoomEventTypes=this._map.scene.screenSpaceCameraController[x(991)],this[x(t._0x5f4287)]=this._map[x(t._0x40bb81)].screenSpaceCameraController.tiltEventTypes,this._map.scene.screenSpaceCameraController.zoomEventTypes=[Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace[x(t._0x3baf58)].PINCH,{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this._map.scene.screenSpaceCameraController.tiltEventTypes=[{eventType:Cesium__namespace.CameraEventType.MIDDLE_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}]):(this._default_zoomEventTypes&&(this._map.scene.screenSpaceCameraController.zoomEventTypes=this._default_zoomEventTypes,delete this._default_zoomEventTypes),this[x(t._0x5f4287)]&&(this._map.scene.screenSpaceCameraController.tiltEventTypes=this._default_tiltEventTypes,delete this[x(t._0x5f4287)]))}[_0x2397ca(2645)](){}[_0x2397ca(2670)](){const e={_0x57ab6c:3699,_0x399d05:558,_0x594f79:2067,_0x442f78:558},t=_0x2397ca;this._enabledHook(this[t(407)]),this._map.on(EventType[t(e._0x57ab6c)],this._onRightDownHandler,this),this._map.on(EventType.mouseMove,this._onMouseMove,this),this[t(e._0x399d05)].on(EventType.rightUp,this._onRightUpHandler,this),this._map.on(EventType[t(e._0x594f79)],this._onMiddleDownHandler,this),this._map.on(EventType[t(939)],this[t(1022)],this),this[t(e._0x442f78)].on(EventType.click,this._onClickHandler,this),this[t(e._0x399d05)].on(EventType[t(629)],this._onDbClickHandler,this),this._map.on(EventType.rightClick,this._onRightClickHandler,this)}[_0x2397ca(380)](){const e={_0x213cd4:3136,_0x395d19:2326,_0x13dd0b:3573,_0x1e4b96:629,_0x1c837d:558,_0xa1f0e:1677},t=_0x2397ca;this._enabledHook(!1),this._map.off(EventType.rightDown,this[t(e._0x213cd4)],this),this._map.off(EventType.mouseMove,this._onMouseMove,this),this[t(558)].off(EventType.rightUp,this._onRightUpHandler,this),this._map.off(EventType.middleDown,this[t(e._0x395d19)],this),this[t(558)][t(e._0x13dd0b)](EventType.middleUp,this._onMiddleUpHandler,this),this._map[t(3573)](EventType.click,this._onClickHandler,this),this._map.off(EventType[t(e._0x1e4b96)],this._onDbClickHandler,this),this._map.off(EventType.rightClick,this._onRightClickHandler,this),this.rotatePoint&&(this[t(e._0x1c837d)].removeThing(this.rotatePoint,!0),delete this[t(e._0xa1f0e)])}[_0x2397ca(3136)](e){const t={_0x45575d:2045,_0x5e6aac:227},x=_0x2397ca;this.enabled&&(this.rotatePoint&&this.rotatePoint[x(t._0x45575d)](),this._isMouseLeftButtonPressed=!0,this._mousePosition=this._startMousePosition=Cesium__namespace.Cartesian3[x(3069)](e.position),this._headingWhenLeftClicked=Cesium__namespace.Math[x(778)](this._map.camera.heading),this._pitchWhenLeftClicked=Cesium__namespace[x(3876)].toDegrees(this[x(558)].camera[x(t._0x5e6aac)]))}_onMouseMove(e){const t={_0x50cb47:4050,_0x486cbb:2217,_0x4f070b:558,_0x38c168:3700,_0xe382c7:495,_0x134db6:707,_0x22c0d6:3407,_0x44c75a:3400,_0x51c06f:2500,_0x578eaa:1773,_0x42a06a:3400,_0x52e118:3400},x=_0x2397ca;if(this.enabled){if(this._mousePosition=e[x(t._0x50cb47)],this[x(1801)]){const i=this._map.canvas[x(t._0x486cbb)],s=this[x(t._0x4f070b)].canvas.clientHeight,o=(this._mousePosition.x-this._startMousePosition.x)/i,r=-(this._mousePosition.y-this[x(1773)].y)/s;if(Cesium__namespace.Math[x(t._0x38c168)](o,0,Cesium__namespace[x(3876)].EPSILON6)&&Cesium__namespace.Math.equalsEpsilon(r,0,Cesium__namespace.Math[x(t._0xe382c7)]))return;const c=o*this.rotateSpeed,_=this[x(t._0x134db6)]+c,l=r*this[x(t._0x22c0d6)];let h=this._pitchWhenLeftClicked+l;h>MAX_PITCH_IN_DEGREE*2&&h<360-MAX_PITCH_IN_DEGREE?h=360-MAX_PITCH_IN_DEGREE:h>MAX_PITCH_IN_DEGREE&&h<360-MAX_PITCH_IN_DEGREE&&(h=MAX_PITCH_IN_DEGREE),this[x(558)][x(t._0x44c75a)].setView({orientation:{heading:Cesium__namespace.Math.toRadians(_),pitch:Cesium__namespace.Math[x(t._0x51c06f)](h),roll:this._map.camera.roll}})}else if(this._isMouseUpdownPressed){const i=-(this[x(2648)].y-this[x(t._0x578eaa)].y)/this[x(558)][x(1733)].clientHeight,s=this._map[x(t._0x42a06a)].positionCartographic.height*this.heightStep;this._map[x(t._0x52e118)].moveDown(i*s)}}}[_0x2397ca(2046)](e){this._isMouseLeftButtonPressed=!1}[_0x2397ca(2326)](e){const t={_0x220f29:407,_0x3852c2:1677,_0x1a8e6e:2045,_0x25e9ff:295,_0x76fc72:760},x=_0x2397ca;this[x(t._0x220f29)]&&(this[x(t._0x3852c2)]&&this.rotatePoint[x(t._0x1a8e6e)](),this[x(3709)]=!0,this._startMousePosition=Cesium__namespace[x(t._0x25e9ff)].clone(e[x(t._0x76fc72)]),this._mousePosition=this._startMousePosition)}_onMiddleUpHandler(e){this._isMouseUpdownPressed=!1}[_0x2397ca(1230)](e){const t=_0x2397ca;this.enabled&&this.rotatePoint&&this.rotatePoint[t(2045)]()}_onDbClickHandler(e){const t={_0x187c21:1677,_0x209a41:3400,_0x48078a:626},x=_0x2397ca;if(!this.enabled)return;this.rotatePoint&&this[x(t._0x187c21)].stop();const i=getCurrentMousePosition(this[x(558)].scene,e.position);if(i){const s=Cesium__namespace.Cartesian3.distance(i,this[x(558)][x(t._0x209a41)].positionWC)*this[x(3116)];this._map.flyToPoint(i,{radius:s,maximumHeight:this._map.camera[x(368)].height,duration:this.options[x(t._0x48078a)]})}}_onRightClickHandler(e){const t={_0x103fce:407,_0x34bc30:3531,_0x4b3ef7:3531,_0x4e572e:3069},x=_0x2397ca;this[x(t._0x103fce)]&&(this[x(t._0x34bc30)]&&Cesium__namespace.JulianDate.secondsDifference(this[x(558)].clock.currentTime,this.time)<.5&&(this._map.closeContextMenu(),!this.rotatePoint&&(this.rotatePoint=new RotatePoint(this.options.rotatePoint),this[x(558)].addThing(this.rotatePoint)),this.rotatePoint.start(e.cartesian)),this[x(t._0x4b3ef7)]=this._map.clock[x(3718)][x(t._0x4e572e)]())}}class CameraHistory extends BaseThing{constructor(e={}){const t={_0x5867fd:3044},x=_0x2397ca;super(e),this[x(3151)]=0,this.views=[],this.maxCacheCount=this[x(t._0x5867fd)][x(3928)]??99}get debugExtent(){const e=_0x2397ca;return this[e(3044)].limit&&this.options.limit[e(3236)]}set[_0x2397ca(3236)](e){const t={_0x1ceb3a:3044,_0x14b13d:355},x=_0x2397ca;if(this.options[x(355)]){if(this[x(t._0x1ceb3a)][x(355)].debugExtent=e,!this.debugExtentEntity){const i=this.options[x(t._0x14b13d)].radius,s=this.options.limit.position;this.debugExtentEntity=this._map.entities.add({name:"限定的范围",position:s,ellipsoid:{radii:new Cesium__namespace.Cartesian3(i,i,i),maximumCone:Cesium__namespace.Math.PI_OVER_TWO,slicePartitions:45,stackPartitions:45,material:new Cesium__namespace.Color(0,1,1,0),outline:!0,outlineColor:new Cesium__namespace[x(2134)](0,1,1,1)}})}this.debugExtentEntity.show=e}}_mountedHook(){const e={_0x4a1f4d:3044,_0x223d75:355,_0x15e87c:355,_0x1117be:2521},t=_0x2397ca;this[t(e._0x4a1f4d)].limit&&this.options[t(e._0x223d75)].debugExtent&&(this[t(3236)]=this[t(3044)][t(e._0x15e87c)].debugExtent),this[t(e._0x1117be)]()}[_0x2397ca(2670)](){const e={_0x31d075:2501,_0x416f0a:558},t=_0x2397ca;this[t(558)].on(EventType.cameraMoveStart,this[t(e._0x31d075)],this),this[t(e._0x416f0a)].on(EventType.cameraMoveEnd,this._cameraMoveEndHandler,this)}_removedHook(){const e={_0xd465c8:558,_0x27f7f7:1827},t=_0x2397ca;this[t(e._0xd465c8)].off(EventType.cameraMoveStart,this._cameraMoveStartHandler,this),this[t(558)].off(EventType.cameraMoveEnd,this[t(e._0x27f7f7)],this),this.views=[],this.debugExtentEntity&&(this._map.entities.remove(this.debugExtentEntity),delete this.debugExtentEntity)}_cameraMoveStartHandler(){const e={_0x477d8e:558,_0x102a6e:1258},t=_0x2397ca;this._map&&(this.isInPush=!0,this.lastCameraView=this[t(e._0x477d8e)][t(e._0x102a6e)]())}[_0x2397ca(1827)](){const e=_0x2397ca;this._limitGlobe(),this[e(3385)]&&this._addCameraView()}_limitGlobe(){const e={_0x383709:355,_0x387c19:295,_0x35d6f6:3385,_0x35de08:3441},t=_0x2397ca;if(!this.options.limit)return;const x=this.options[t(e._0x383709)].position,i=this[t(3044)].limit.radius,s=Cesium__namespace[t(e._0x387c19)].distance(x,this._map.camera.position);this.options.limit[t(3236)],!(s<=i)&&(this[t(e._0x35d6f6)]=!1,this[t(e._0x35de08)]?this._map.setCameraView(this.lastCameraView,{duration:.5,complete:()=>{const o=t;this[o(3441)]=null,this.isInPush=!0}}):this._map[t(2703)](x,{radius:i*.6,pitch:-60,duration:.5,complete:()=>{this.lastCameraView=null,this.isInPush=!0}}))}[_0x2397ca(3368)](){const e={_0x2550f5:258,_0xb468d3:258,_0x4d5d89:2027},t=_0x2397ca,x=this._map.getCameraView();this[t(e._0x2550f5)].push(x),this[t(258)].length>this.maxCacheCount&&this.views.splice(0,1),this.step=this[t(e._0xb468d3)][t(e._0x4d5d89)]-1,this.fire(EventType.change,{index:this.step,count:this.views[t(e._0x4d5d89)]})}_goHistoryView(){const e={_0x9d0ec6:3988,_0xe789be:258},t={_0x79af38:3988,_0x5d22be:2501,_0x57d246:3151},x=_0x2397ca;this._map.camera[x(e._0x9d0ec6)].removeEventListener(this[x(2501)],this),this[x(558)].camera.moveEnd[x(1067)](this._cameraMoveEndHandler,this),this[x(3385)]=!1,this._map.setCameraView(this[x(e._0xe789be)][this[x(3151)]],{complete:()=>{const i=x;this._map.camera[i(t._0x79af38)].addEventListener(this[i(t._0x5d22be)],this),this._map.camera.moveEnd[i(1130)](this._cameraMoveEndHandler,this),this.fire(EventType.change,{index:this[i(t._0x57d246)],count:this.views[i(2027)]})}})}goNext(){const e={_0x27ad79:531},t=_0x2397ca;return this.step>=this.views.length-1?!1:(this.step++,this[t(e._0x27ad79)](),!0)}[_0x2397ca(1969)](){const e={_0x3a931c:3151},t=_0x2397ca;return this[t(3151)]<=0?!1:(this[t(e._0x3a931c)]--,this._goHistoryView(),!0)}[_0x2397ca(956)](){const e={_0xd56310:3151},t=_0x2397ca;return this.step===this[t(258)].length-1?!1:(this[t(e._0xd56310)]=this.views.length-1,this._goHistoryView(),!0)}goFirst(){const e=_0x2397ca;return this.step<=0?!1:(this[e(3151)]=0,this._goHistoryView(),!0)}}class RotateOut extends BaseThing{constructor(e={}){const t={_0x594fdd:2165},x=_0x2397ca;super(e),this._angle=360/(60*this.options.time||60),this._direction=this.options[x(t._0x594fdd)]?-1:1,this._autoStopAngle=this.options.autoStopAngle}get isStart(){return this[_0x2397ca(2383)]}_enabledHook(e){e?this.start():this.stop()}_mountedHook(){}_addedHook(){}[_0x2397ca(380)](){this.stop()}[_0x2397ca(546)](){const e={_0x15be2c:2383,_0x4ccdef:3400},t=_0x2397ca;this._isStart&&this.stop(),this[t(e._0x15be2c)]=!0,this._tikRender=0,this._startHeading=this._map[t(e._0x4ccdef)].heading,this._startPitch=this._map.camera.pitch,this._map.on(EventType.preRender,this._onPreRenderHandler,this),this.fire(EventType.start)}[_0x2397ca(3778)](e){const t={_0x382560:1788},x=_0x2397ca;this._tikRender++;const i=this._tikRender*this[x(2237)];this._autoStopAngle&&i>=this._autoStopAngle&&this.stop();const s=Cesium__namespace[x(3876)].toRadians(i*this._direction)+this._startHeading;this[x(558)].scene.camera.setView({orientation:{heading:s,pitch:this[x(2573)]}}),this[x(t._0x382560)](EventType[x(3796)])}stop(){const e={_0x3bc745:1153},t=_0x2397ca;this._isStart&&(this._isStart=!1,this._map[t(3573)](EventType[t(e._0x3bc745)],this._onPreRenderHandler,this),this.fire(EventType[t(2045)]))}}const PointEditElementColors={X_TRANSLATION_COLOR:Cesium__namespace[_0x2397ca(2134)].RED.withAlpha(.6),Y_TRANSLATION_COLOR:Cesium__namespace.Color[_0x2397ca(3786)][_0x2397ca(396)](.6),Z_TRANSLATION_COLOR:Cesium__namespace[_0x2397ca(2134)][_0x2397ca(3905)].withAlpha(.6),XY_TRANSLATION_COLOR:Cesium__namespace[_0x2397ca(2134)].BLUE.withAlpha(.6),YZ_TRANSLATION_COLOR:Cesium__namespace[_0x2397ca(2134)].RED[_0x2397ca(396)](.6),XZ_TRANSLATION_COLOR:Cesium__namespace[_0x2397ca(2134)].GREEN.withAlpha(.6)},HighlightColor=Cesium__namespace.Color.YELLOW;class MatrixMove2 extends BaseThing{constructor(e={}){const t={_0x11860b:2213,_0x1c73e8:1883,_0x2de6bb:974},x=_0x2397ca;super(e),this._pointEditElementIDs={X_TRANSLATION:this.id+"_PointEdit_X_TRANSLATION",Y_TRANSLATION:this.id+"_PointEdit_Y_TRANSLATION",Z_TRANSLATION:this.id+"_PointEdit_Z_TRANSLATION",XY_TRANSLATION:this.id+x(t._0x11860b),YZ_TRANSLATION:this.id+"_PointEdit_YZ_TRANSLATION",XZ_TRANSLATION:this.id+"_PointEdit_XZ_TRANSLATION"},this[x(t._0x1c73e8)]={X_TRANSLATION:!0,Y_TRANSLATION:!0,Z_TRANSLATION:!0,XY_TRANSLATION:!0,XZ_TRANSLATION:!0,YZ_TRANSLATION:!0},this._radius=Cesium__namespace.defaultValue(e.radius,100),this._editMatrix=new Cesium__namespace.Matrix4,this[x(513)]=!1,this._pickedId="",this._oldPickedId="",this[x(t._0x2de6bb)]=void 0,e.position&&(this.position=e.position)}get position(){return this._position}set position(e){const t=_0x2397ca;this._position=LngLatPoint.toCartesian(e),this._editMatrix=Cesium__namespace[t(1046)].multiplyByUniformScale(Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._position),this._radius,this._editMatrix),this._createGraphics()}get radius(){return this[_0x2397ca({_0x4a480c:1270}._0x4a480c)]}set radius(e){const t={_0x50ccce:1173},x=_0x2397ca;this._radius=e,this._editMatrix=Cesium__namespace.Matrix4.multiplyByUniformScale(Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this[x(t._0x50ccce)]),this._radius,this._editMatrix),this._createGraphics()}get isMoveing(){return this._map?this._hasChangeEnableInputs:!1}_enabledHook(e){this._drawLayer.show=e,e?this._bindEvent():this._unbindEvent()}[_0x2397ca(2645)](){const e={_0x3ca1ee:3252,_0x1b08b4:3268,_0x21d666:3482},t=_0x2397ca;this._drawLayer=new Cesium__namespace[t(e._0x3ca1ee)],this[t(e._0x1b08b4)][t(e._0x21d666)]=this.show??!0}_addedHook(){const e={_0x2e2ace:565,_0x1b68a8:3268},t=_0x2397ca;this._map[t(3399)].primitives[t(e._0x2e2ace)](this[t(e._0x1b68a8)]),this._createGraphics(),this._bindEvent()}_removedHook(){const e={_0x508958:558,_0x501f48:1187},t=_0x2397ca;this._unbindEvent(),this[t(3268)].removeAll(),this[t(e._0x508958)][t(3399)][t(e._0x501f48)][t(2689)](this._drawLayer)}_createGraphics(){const e={_0x46e1af:1419,_0x67173e:295,_0x622420:737,_0x3b8f2c:1883,_0x26f2d5:3268,_0x17f573:565,_0x3aa822:295,_0x1dff09:568,_0x20731c:190,_0x455453:1883},t=_0x2397ca;if(!this[t(3268)]||(this[t(3268)][t(1859)](),!this._position))return;const x=Cesium__namespace.Matrix4[t(3069)](this._editMatrix);this._hideFeatures[t(e._0x46e1af)]&&this._drawLayer.add(createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3.ZERO,Cesium__namespace.Cartesian3.UNIT_X],modelMatrix:x,id:this._pointEditElementIDs.X_TRANSLATION,color:PointEditElementColors.X_TRANSLATION_COLOR})),this._hideFeatures.Y_TRANSLATION&&this._drawLayer.add(createPolylinePrimitive({positions:[Cesium__namespace[t(e._0x67173e)][t(e._0x622420)],Cesium__namespace.Cartesian3.UNIT_Y],modelMatrix:x,id:this._pointEditElementIDs.Y_TRANSLATION,color:PointEditElementColors.Y_TRANSLATION_COLOR})),this[t(e._0x3b8f2c)].Z_TRANSLATION&&this[t(e._0x26f2d5)][t(e._0x17f573)](createPolylinePrimitive({positions:[Cesium__namespace[t(e._0x3aa822)].ZERO,Cesium__namespace.Cartesian3[t(3594)]],modelMatrix:x,id:this[t(e._0x1dff09)].Z_TRANSLATION,color:PointEditElementColors.Z_TRANSLATION_COLOR})),this._hideFeatures.XY_TRANSLATION&&this._drawLayer.add(createPlanePrimitive({positions:[.1,.1,0,.1,.3,0,.3,.3,0,.3,.1,0],normals:[0,0,1,0,0,1,0,0,1,0,0,1],modelMatrix:x,id:this._pointEditElementIDs.XY_TRANSLATION,color:PointEditElementColors[t(2334)]})),this[t(1883)][t(e._0x20731c)]&&this._drawLayer.add(createPlanePrimitive({positions:[0,.1,.1,0,.1,.3,0,.3,.3,0,.3,.1],normals:[1,0,0,1,0,0,1,0,0,1,0,0],modelMatrix:x,id:this[t(568)][t(190)],color:PointEditElementColors.YZ_TRANSLATION_COLOR})),this[t(e._0x455453)].XZ_TRANSLATION&&this._drawLayer.add(createPlanePrimitive({positions:[.1,0,.1,.1,0,.3,.3,0,.3,.3,0,.1],normals:[0,1,0,0,1,0,0,1,0,0,1,0],modelMatrix:x,id:this._pointEditElementIDs.XZ_TRANSLATION,color:PointEditElementColors.XZ_TRANSLATION_COLOR}))}_bindEvent(){const e={_0x3a3fb0:558,_0xacbd2f:1733},t={_0x4b425e:1881,_0x25c33d:1881,_0x3cef1f:639,_0x4335b3:639,_0x44927e:3005,_0x5b8d6f:1173,_0x1ca103:4030,_0x2a45f5:957,_0x4e326d:3816},x={_0x3d60d2:558,_0x1312db:3830},i={_0x5a4338:558},s=_0x2397ca;this._unbindEvent(),this._handler=new Cesium__namespace.ScreenSpaceEventHandler(this[s(e._0x3a3fb0)][s(e._0xacbd2f)]),this._handler.setInputAction(o=>{const r=s,c=drillPickTransformHelperComponent(this[r(i._0x5a4338)].scene,o.position,this._pointEditElementIDs);c&&(this._map[r(3399)].screenSpaceCameraController.enableInputs=!1,this._isLeftDown=!0,this._pickedId=c.id)},Cesium__namespace.ScreenSpaceEventType[s(2862)]),this[s(1535)][s(1609)](()=>{const o=s;this[o(x._0x3d60d2)].scene[o(x._0x1312db)].enableInputs=!0,this._isLeftDown=!1,this._pickedId="",Cesium__namespace.defined(this._oldPickedId)&&this._oldPickedId!==""&&(setPointEditElementColorsForId(this._oldPickedId,getPointEditElementColorsForId(this._oldPickedId,this._pointEditElementIDs),this._pointEditElementIDs),this._oldPickedId="",this[o(840)]())},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),this._handler.setInputAction(o=>{const r=s;let c=!1;if(Cesium__namespace.defined(this._oldPickPrimitive)){var _;const l=(_=this._oldPickPrimitive)===null||_===void 0?void 0:_._instanceIds;if(l&&l[0]){const h=this._oldPickPrimitive.appearance.material.uniforms;h.color=getPointEditElementColorsForId(l[0],this._pointEditElementIDs),this._oldPickPrimitive=void 0}}if(this._isLeftDown){Cesium__namespace.defined(this._pickedId)&&this._pickedId!==""&&(setPointEditElementColorsForId(this._pickedId,HighlightColor,this._pointEditElementIDs),this[r(536)]=this._pickedId,c=!0);const l=this._map.scene;let h=l[r(4e3)](o.startPosition),d=l.pickPosition(o.endPosition);const u=new Cesium__namespace.Cartesian2;if(!Cesium__namespace[r(639)](h)&&(u.x=o[r(t._0x4b425e)].x,u.y=l[r(1733)].clientHeight-o[r(t._0x25c33d)].y,h=getWorldPositionFromWindowPosition(l,u)),!Cesium__namespace[r(t._0x3cef1f)](d)&&(u.x=o.endPosition.x,u.y=l.canvas.clientHeight-o.endPosition.y,d=getWorldPositionFromWindowPosition(l,u)),Cesium__namespace[r(t._0x4335b3)](h)&&Cesium__namespace.defined(d)){const m=getChangeMatrixByMovingMouse(this,h,d,this[r(568)]);Cesium__namespace[r(639)](m)&&(this._editMatrix=Cesium__namespace.Matrix4.multiply(this._editMatrix,m,new Cesium__namespace.Matrix4),this._position=Cesium__namespace[r(1046)][r(t._0x44927e)](this._editMatrix,this[r(t._0x5b8d6f)]),this[r(t._0x1ca103)]({position:this[r(t._0x5b8d6f)]}),c=!0)}c&&this._createGraphics()}else{const l=drillPickTransformHelperComponent(this._map[r(3399)],o.endPosition,this[r(568)]);if(l){const h=l[r(t._0x2a45f5)].appearance[r(t._0x4e326d)][r(2554)];h.color=HighlightColor,this[r(974)]=l.primitive}}},Cesium__namespace[s(663)].MOUSE_MOVE)}[_0x2397ca(3040)](){const e={_0x21bd07:1535},t=_0x2397ca;this._handler&&(this._handler[t(2941)](),delete this[t(e._0x21bd07)])}onChange(e){const t={_0x32ea07:3796},x=_0x2397ca;this.options.onChange&&this.options.onChange(e),this.fire(EventType[x(t._0x32ea07)],e,!0)}}function createPolylinePrimitive(n){const e={_0x5dc6ff:360,_0x3ce2ac:400},t=_0x2397ca,{positions:x,modelMatrix:i,color:s,id:o}=n,r=new Cesium__namespace[t(e._0x5dc6ff)]({material:Cesium__namespace.Material.fromType(Cesium__namespace.Material.PolylineArrowType,{color:s})});return new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolylineGeometry({positions:x,width:15,vertexFormat:Cesium__namespace.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:Cesium__namespace[t(e._0x3ce2ac)][t(3298)]}),modelMatrix:i,id:o}),appearance:r,depthFailAppearance:r,asynchronous:!1})}function createPlanePrimitive(n){const e={_0x50925c:2206,_0x3f8308:2206,_0x13cd88:1069},t=_0x2397ca,{positions:x,modelMatrix:i,normals:s,color:o,id:r}=n,c=new Cesium__namespace.MaterialAppearance({closed:!1,flat:!0,materialSupport:Cesium__namespace[t(2377)].MaterialSupport.BASIC,material:Cesium__namespace[t(e._0x50925c)].fromType(Cesium__namespace[t(e._0x3f8308)].ColorType,{color:o})});return new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[t(3953)]({geometry:new Cesium__namespace[t(1955)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:new Float64Array(x)}),normal:new Cesium__namespace[t(e._0x13cd88)]({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array(s)})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:Cesium__namespace.PrimitiveType[t(2651)],boundingSphere:Cesium__namespace.BoundingSphere.fromVertices(x)}),modelMatrix:i,id:r}),appearance:c,depthFailAppearance:c,asynchronous:!1})}function isTransformHelperComponent(n,e){const t={_0x25ce07:2444},x=_0x2397ca;for(const i in e)if(Object[x(t._0x25ce07)].call(e,i)){const s=e[i];if(n===s)return!0}return!1}function getWorldPositionFromWindowPosition(n,e){const t={_0x5054fa:1678},x=_0x2397ca,i=.1,s=Cesium__namespace.SceneTransforms[x(t._0x5054fa)](n,e,new Cesium__namespace[x(518)]);return Cesium__namespace.SceneTransforms.drawingBufferToWgs84Coordinates(n,s,i)}function getChangeMatrixByMovingMouse(n,e,t,x){const i={_0x18034d:1584,_0x2ec16c:737,_0x28eab4:295,_0x105ac4:1867,_0x307a86:639},s=_0x2397ca,o=n[s(3224)],r=Cesium__namespace.Matrix4.clone(n._editMatrix),c=Cesium__namespace.Matrix4.inverse(r,new Cesium__namespace[s(1046)]),_=n._map.camera.positionWC,l=Cesium__namespace.Matrix4.multiplyByPoint(c,_,new Cesium__namespace.Cartesian3);Cesium__namespace[s(295)].normalize(l,l);const h=Cesium__namespace[s(295)][s(2527)](e,_,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Cartesian3.subtract(t,_,new Cesium__namespace.Cartesian3),u=new Cesium__namespace.Ray(_,h),m=new Cesium__namespace.Ray(_,d),f=new Cesium__namespace.Cartesian3;if(o===x.XY_TRANSLATION)Cesium__namespace.Cartesian3.clone(Cesium__namespace.Cartesian3.UNIT_Z,f);else if(o===x.YZ_TRANSLATION)Cesium__namespace.Cartesian3.clone(Cesium__namespace.Cartesian3.UNIT_X,f);else if(o===x.XZ_TRANSLATION)Cesium__namespace[s(295)].clone(Cesium__namespace.Cartesian3.UNIT_Y,f);else if(o===x[s(1419)]||o===x.Y_TRANSLATION||o===x[s(i._0x18034d)]){let w=Cesium__namespace.Cartesian3[s(i._0x2ec16c)];o===x.X_TRANSLATION?w=Cesium__namespace.Cartesian3.UNIT_X:o===x.Y_TRANSLATION?w=Cesium__namespace.Cartesian3.UNIT_Y:o===x.Z_TRANSLATION&&(w=Cesium__namespace[s(295)].UNIT_Z);const H=new Cesium__namespace.Cartesian3;Cesium__namespace[s(i._0x28eab4)].cross(l,w,H),Cesium__namespace.Cartesian3.cross(w,H,f),Cesium__namespace.Cartesian3.normalize(f,f)}const g=new Cesium__namespace.Plane(f,0);Cesium__namespace[s(508)].transform(g,r,g);const b=Cesium__namespace[s(i._0x105ac4)].rayPlane(u,g),y=Cesium__namespace[s(i._0x105ac4)][s(3837)](m,g);if(!Cesium__namespace[s(i._0x307a86)](b)||!Cesium__namespace[s(639)](y))return;const C=Cesium__namespace.Matrix4.multiplyByPoint(c,b,new Cesium__namespace[s(295)]),v=Cesium__namespace.Matrix4.multiplyByPoint(c,y,new Cesium__namespace.Cartesian3),M=new Cesium__namespace[s(i._0x28eab4)];return Cesium__namespace.Cartesian3.subtract(v,C,M),o===x.X_TRANSLATION?(M.y=0,M.z=0):o===x.Y_TRANSLATION?(M.x=0,M.z=0):o===x.Z_TRANSLATION?(M.x=0,M.y=0):o===x.XY_TRANSLATION?M.z=0:o===x.YZ_TRANSLATION?M.x=0:o===x.XZ_TRANSLATION&&(M.y=0),Cesium__namespace.Matrix4[s(645)](M,new Cesium__namespace.Matrix4)}function setPointEditElementColorsForId(n,e,t){const x={_0x35c6af:190},i=_0x2397ca;switch(n){case t[i(1419)]:PointEditElementColors.X_TRANSLATION_COLOR=e;break;case t.Y_TRANSLATION:PointEditElementColors.Y_TRANSLATION_COLOR=e;break;case t.Z_TRANSLATION:PointEditElementColors.Z_TRANSLATION_COLOR=e;break;case t.XZ_TRANSLATION:PointEditElementColors.XZ_TRANSLATION_COLOR=e;break;case t[i(2311)]:PointEditElementColors.XY_TRANSLATION_COLOR=e;break;case t[i(x._0x35c6af)]:PointEditElementColors.YZ_TRANSLATION_COLOR=e;break}}function getPointEditElementColorsForId(n,e){const t={_0x54ac9c:2084,_0x3d7fab:396},x=_0x2397ca;let i;switch(n){case e.X_TRANSLATION:case e.YZ_TRANSLATION:i=Cesium__namespace.Color[x(t._0x54ac9c)].withAlpha(.6);break;case e.Y_TRANSLATION:case e.XZ_TRANSLATION:i=Cesium__namespace[x(2134)].GREEN[x(t._0x3d7fab)](.6);break;case e.Z_TRANSLATION:case e.XY_TRANSLATION:i=Cesium__namespace[x(2134)].BLUE[x(396)](.6);break}return i}function drillPickTransformHelperComponent(n,e,t){const x={_0x56da40:3008},i=_0x2397ca,s=n[i(x._0x56da40)](e),o=s[i(2027)];let r;for(let c=0;c<o;c++){const _=s[c];if(_&&_.id&&isTransformHelperComponent(_.id,t)){r=_;break}}return r}var index$3={__proto__:null,Underground,Sightline,Skyline,Shadows,Measure,FloodByGraphic,Slope,TerrainPlanClip,FloodByMaterial,TerrainClip,ContourLine,TerrainFlat,TerrainUplift,LimitHeight,TilesetPlanClip,ModelPlanClip,TilesetBoxClip,TilesetClip,TilesetFlood,TilesetFlat,FirstPersonRoam,StreetView,CameraHistory,RotatePoint,RotateOut,MatrixMove,MatrixRotate,MatrixMove2};class BaseEffect extends BaseThing{get[_0x2397ca(968)](){return this._type}get target(){return this[_0x2397ca({_0x13e4d3:3212}._0x13e4d3)]}get uniforms(){const e=_0x2397ca;var t;return(t=this[e(3212)])===null||t===void 0?void 0:t.uniforms}addTo(e){return e&&e[_0x2397ca({_0x1cc554:1164}._0x1cc554)]&&e.addEffect(this),this}remove(e){this._map&&this._map.removeEffect(this,e)}_enabledHook(e){const t={_0x2c02a9:3212,_0x5cd4dc:3212},x=_0x2397ca;this[x(t._0x2c02a9)]&&(this[x(t._0x5cd4dc)].enabled=e)}_setOptionsHook(e,t){for(const x in t)x!=="enabled"&&(this[x]=t[x])}_addedBaseHook(){const e={_0xafde0c:1757},t=_0x2397ca;!this._postProcessStage&&this._mountedHook(),this[t(e._0xafde0c)](this.enabled),this._postProcessStage&&this._map.scene.postProcessStages.add(this._postProcessStage)}[_0x2397ca(2330)](){const e={_0xb52c01:3212},t=_0x2397ca;this._postProcessStage&&(this._map.scene.postProcessStages.remove(this._postProcessStage),this[t(3212)].isDestroyed()&&delete this[t(e._0xb52c01)])}fire(e,t={},x){return!t.effect&&(t.effect=this),super.fire(e,t,x)}_getPickIds(e){const t={_0x422154:3735,_0x1b3c1a:959,_0x5e0703:2434},x=_0x2397ca;let i=[];return e[x(1255)](s=>{const o=x;s[o(t._0x422154)]&&(s=s.czmObject),s._pickIds?i=i.concat(this._getPickIds(s[o(t._0x1b3c1a)])):s[o(2871)]?i=i.concat(this._getPickIds([s.pickId])):i[o(t._0x5e0703)]({pickId:s})}),i}}var FogFS=_0x2397ca(2494);class FogEffect extends BaseEffect{constructor(e={}){const t={_0xaf7678:662,_0x442dc7:1089,_0x4f2248:1089,_0x2bd42b:2134,_0x442866:1295},x=_0x2397ca;super(e),this[x(716)]=e.fogByDistance??new Cesium__namespace[x(t._0xaf7678)](10,0,1e3,.9),this[x(t._0x442dc7)]=getCesiumColor(e[x(t._0x4f2248)],Cesium__namespace[x(t._0x2bd42b)].WHITE),this.maxHeight=e[x(t._0x442866)]??9e3,this._setOptionsHook(e)}_setOptionsHook(e,t){const x={_0x14a760:716,_0x59c072:1237,_0x524210:1237,_0x5c9995:1089,_0x39fa25:1295},i=_0x2397ca;Cesium__namespace.defined(e.fogByDistance_near)&&(this.fogByDistance.x=e[i(682)]),Cesium__namespace[i(639)](e.fogByDistance_nearValue)&&(this.fogByDistance.y=e.fogByDistance_nearValue),Cesium__namespace.defined(e[i(1671)])&&(this[i(x._0x14a760)].z=e.fogByDistance_far),Cesium__namespace.defined(e[i(x._0x59c072)])&&(this.fogByDistance.w=e[i(x._0x524210)]),Cesium__namespace[i(639)](t==null?void 0:t.color)&&(this.color=getCesiumColor(e[i(x._0x5c9995)],Cesium__namespace.Color[i(3970)])),this.maxHeight=e[i(x._0x39fa25)]??9e3}_mountedHook(){const e={_0x37d440:3722,_0x3abb7e:407},t=_0x2397ca;this._postProcessStage=new Cesium__namespace[t(e._0x37d440)]({name:this._id,fragmentShader:FogFS,uniforms:{fogByDistance:()=>this.fogByDistance,fogColor:()=>this.color},enabled:this[t(e._0x3abb7e)]})}[_0x2397ca(2670)](){const e={_0x5b5fc2:3399,_0x3560f5:3070},t=_0x2397ca;this._map[t(e._0x5b5fc2)].camera[t(e._0x3560f5)].addEventListener(this[t(1062)],this)}_removedHook(){const e={_0x2a9d46:3399,_0x23963f:3070},t=_0x2397ca;this._map[t(e._0x2a9d46)].camera[t(e._0x23963f)][t(1067)](this.camera_changedHandler,this)}camera_changedHandler(e){const t={_0x56bdb6:3400},x=_0x2397ca;this._map[x(t._0x56bdb6)].positionCartographic.height<this.maxHeight?this._postProcessStage.enabled=this.enabled:this._postProcessStage.enabled=!1}}register(_0x2397ca(544),FogEffect);var RainShader=`uniform sampler2D colorTexture;//下雨前输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;
uniform float size;
uniform float direction;

float hash(float x) {
  return fract(sin(x * 23.3) * 13.13);
}

void main(void) {

  float time = czm_frameNumber * speed / 1000.0;
  vec2 resolution = czm_viewport.zw;

  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);
  vec3 finalColor = vec3(0.1, 0.2, 0.3);//粒子的颜色

  float si = sin(direction), co = cos(direction);
  uv *= mat2(co, -si, si, co);
  uv *= length(uv + vec2(0, 4.9)) * 0.3 + 1.0;

  float v = 1. - sin(hash(floor(uv.x * 100.0)) * 2.0);
  float b = clamp(abs(sin(20.0 * time * v + uv.y * (5. / (2.0 + v)))) - .95, 0.0, 1.0) * size;
  finalColor *= v * b; //屏幕上雨的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5); //将雨和三维场景融合
}
`;class RainEffect extends BaseEffect{get speed(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.speed}set speed(e){const t={_0xc08be:3212},x=_0x2397ca;this._postProcessStage&&(this[x(t._0xc08be)].uniforms.speed=e)}get size(){const e={_0x4e3ce1:2554},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x[t(e._0x4e3ce1)][t(1005)]}set size(e){const t=_0x2397ca;this[t(3212)]&&(this._postProcessStage[t(2554)].size=e)}get direction(){const e=_0x2397ca;var t;return(t=this[e(3212)])===null||t===void 0?void 0:t.uniforms.direction}set direction(e){const t={_0x30a2b4:3212,_0xcfbb8f:2165,_0x4a0b35:3876},x=_0x2397ca;this[x(3212)]&&(this[x(t._0x30a2b4)].uniforms[x(t._0xcfbb8f)]=Cesium__namespace[x(t._0x4a0b35)].toRadians(e))}_mountedHook(){const e={_0x2ec0e5:3722,_0x468954:3876},t=_0x2397ca;this._postProcessStage=new Cesium__namespace[t(e._0x2ec0e5)]({fragmentShader:RainShader,uniforms:{speed:this.options.speed??10,size:this.options.size??20,direction:Cesium__namespace[t(e._0x468954)].toRadians(this.options.direction??-30)},enabled:this.enabled})}}register(_0x2397ca(732),RainEffect);var SnowShader=`uniform sampler2D colorTexture; //输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;

float snow(vec2 uv, float scale) {
  float time = czm_frameNumber * speed / 1000.0;
  float w = smoothstep(1.0, 0.0, -uv.y * (scale / 10.0));
  if(w < 0.1)
    return 0.0;
  uv += time / scale;
  uv.y += time * 2.0 / scale;
  uv.x += sin(uv.y + time * 0.5) / scale;
  uv *= scale;

  vec2 s = floor(uv), f = fract(uv), p;
  float k = 3.0, d;
  p = 0.5 + 0.35 * sin(11.0 * fract(sin((s + p + scale) * mat2(7, 3, 6, 5)) * 5.0)) - f;
  d = length(p);
  k = min(d, k);
  k = smoothstep(0.0, k, sin(f.x + f.y) * 0.01);
  return k * w;
}

void main(void) {
  vec2 resolution = czm_viewport.zw;
  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);

  float c = 0.0;
  c += snow(uv, 15.);
  c += snow(uv, 10.);
  c += snow(uv, 9.);
  c += snow(uv, 8.);
  c += snow(uv, 7.);
  c += snow(uv, 6.);
  c += snow(uv, 5.);
  c += snow(uv, 4.);

  vec3 finalColor = (vec3(c)); //屏幕上雪的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5);  //将雪和三维场景融合

}
`;class SnowEffect extends BaseEffect{get speed(){const e={_0x321167:3071},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x.uniforms[t(e._0x321167)]}set speed(e){const t=_0x2397ca;this[t(3212)]&&(this._postProcessStage[t(2554)].speed=e)}_mountedHook(){const e={_0x392613:3212},t=_0x2397ca;this[t(e._0x392613)]=new Cesium__namespace[t(3722)]({fragmentShader:SnowShader,uniforms:{speed:this.options.speed??10},enabled:this[t(407)]})}}register(_0x2397ca(2409),SnowEffect);var SnowCoverFS=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float alpha;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 nor = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * nor);
  float dotNumWC = dot(positionWC.xyz, normalWC);
  if(dotNumWC <= 0.2) {
    out_FragColor = mix(color, vec4(1.0), alpha * 0.2);
    return;
  }
  out_FragColor = mix(color, vec4(1.0), dotNumWC * alpha);
}
`;class SnowCoverEffect extends BaseEffect{constructor(e={}){super(e),this.maxHeight=e.maxHeight??9e3}get alpha(){const e={_0x50db6f:3212,_0x555035:303},t=_0x2397ca;if(this[t(e._0x50db6f)]){var x,i;return(x=this._postProcessStage)===null||x===void 0||(i=x.uniforms)===null||i===void 0?void 0:i[t(2708)]}if(this._uniforms){var s;return(s=this._uniforms)===null||s===void 0?void 0:s[t(2708)][t(e._0x555035)]}}set alpha(e){const t={_0x7f228d:2708},x=_0x2397ca;this._postProcessStage&&(this._postProcessStage[x(2554)][x(t._0x7f228d)]=e),this._uniforms&&(this._uniforms.alpha.value=e)}_enabledHook(e){const t={_0x44942e:3212,_0xb469a2:3086},x=_0x2397ca;this[x(t._0x44942e)]&&(this._postProcessStage.enabled=e),this[x(t._0xb469a2)]&&(this._uniforms.enabled.value=e)}_mountedHook(){const e={_0x3f0e45:2407},t=_0x2397ca;this.options.layer?this._bindToLayer(this.options[t(e._0x3f0e45)]):this._postProcessStage=new Cesium__namespace.PostProcessStage({name:this._id,fragmentShader:SnowCoverFS,uniforms:{alpha:this.options.alpha??1},enabled:this.enabled})}[_0x2397ca(2670)](){const e={_0x4ad3d5:1130},t=_0x2397ca;this._map.scene[t(3400)].changed[t(e._0x4ad3d5)](this.camera_changedHandler,this)}[_0x2397ca(380)](){const e={_0x100803:1067},t=_0x2397ca;this._map.scene.camera.changed[t(e._0x100803)](this.camera_changedHandler,this)}[_0x2397ca(1062)](e){const t=_0x2397ca;this._map[t(3400)][t(368)].height<this.maxHeight?(this._postProcessStage&&(this._postProcessStage[t(407)]=this[t(407)]),this._uniforms&&(this._uniforms.enabled[t(303)]=this.enabled)):(this._postProcessStage&&(this[t(3212)].enabled=!1),this[t(3086)]&&(this._uniforms.enabled.value=!1))}_bindToLayer(e){const t={_0xacbb71:493,_0x112cb8:3086,_0xf61c8b:2554,_0x131193:3632,_0x5e83ba:2280},x=_0x2397ca;var i;if((i=Cesium__namespace.Mars3DEx)!==null&&i!==void 0&&i[x(2747)])if(this[x(407)]){const s=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace[x(t._0xacbb71)].UNLIT,uniforms:{alpha:{value:1,type:Cesium__namespace.UniformType.FLOAT},enabled:{value:!0,type:Cesium__namespace.UniformType.BOOL}},fragmentShaderText:`
        #extension GL_OES_standard_derivatives : enable
        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
          if(enabled){
            vec3 positionEC = fsInput.attributes.positionEC;
            vec4 positionWC = normalize(czm_inverseView * vec4(positionEC, 1.0));

            vec3 dx = dFdx(fsInput.attributes.positionEC);
            vec3 dy = dFdy(fsInput.attributes.positionEC);
            vec3 nor = normalize(cross(dx, dy));
            vec3 normalWC = normalize(czm_inverseViewRotation * nor);
            float dotNumWC = dot(positionWC.xyz, normalWC);
            if(dotNumWC <= 0.2) {
              material.diffuse = mix(material.diffuse, vec3(1.0), alpha*0.2);
            } else {
              material.diffuse = mix(material.diffuse, vec3(1.0), dotNumWC*alpha);
            }
          }
        }`});this[x(t._0x112cb8)]=s[x(t._0xf61c8b)];const o=Cesium__namespace.Mars3DEx[x(2747)](e.id);o.snowCover=s}else{delete this._uniforms;const s=Cesium__namespace.Mars3DEx[x(t._0x131193)](e.id);s&&delete s[x(t._0x5e83ba)]}}}register("snowCover",SnowCoverEffect);var InvertedSceneFS=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;
vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
vec3 guussColor(vec2 uv) {
  vec2 pixelSize = 1.0 / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;
  vec4 gc = (texture(colorTexture, uv) +
    texture(colorTexture, uv + vec2(dx0, dy0)) +
    texture(colorTexture, uv + vec2(0.0, dy0)) +
    texture(colorTexture, uv + vec2(dx1, dy0)) +
    texture(colorTexture, uv + vec2(dx0, 0.0)) +
    texture(colorTexture, uv + vec2(dx1, 0.0)) +
    texture(colorTexture, uv + vec2(dx0, dy1)) +
    texture(colorTexture, uv + vec2(0.0, dy1)) +
    texture(colorTexture, uv + vec2(dx1, dy1))) * (1.0 / 9.0);
  return gc.rgb;
}
void main() {
    // mat4 dither = mat4(
    //     0,       0.5,    0.125,  0.625,
    //     0.75,    0.25,   0.875,  0.375,
    //     0.1875,  0.6875, 0.0625, 0.5625,
    //     0.9375,  0.4375, 0.8125, 0.3125
    // );
    // int sampleCoordX = int(mod((gl_FragCoord.x * v_textureCoordinates.x),4.0));
    // int sampleCoordY = int(mod((gl_FragCoord.y * v_textureCoordinates.y),4.0));
  float offset = 0.0;

  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
    // out_FragColor = currD;
    // return;
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
    // out_FragColor = vec4(depth,0.0,0.0,1.0);
    // return;

  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * normal);
  float fotNumWC = dot(positionWC.xyz, normalWC);
  if(fotNumWC <= 0.5) {
    out_FragColor = color;
    return;
  }

    // float dotNum = dot(normal,vec3(0.0,1.0,0.0));
    // out_FragColor = mix(color,vec4(1.0),dotNum*0.8);
    // return;

  vec3 viewDir = normalize(positionEC.xyz);
  vec3 reflectDir = reflect(viewDir, normal);
    // vec3 viewReflectDir = czm_viewRotation * reflectDir;
  vec3 viewReflectDir = reflectDir;

  float step = 0.05;
  int stepNum = int(20.0 / step);
  vec3 pos;
  vec3 albedo;
  bool jd = false;
  for(float i = 1.0; i <= 400.0; i+=1.0) {
    float delta = step * i + offset;
    pos = positionEC.xyz + viewReflectDir * delta;
    float d = -pos.z;

    vec4 tmp = czm_projection * vec4(pos, 1.0);
    vec3 screenPos = tmp.xyz / tmp.w;
    vec2 uv = vec2(screenPos.x, screenPos.y) * 0.5 + vec2(0.5, 0.5);

    if(uv.x > 0.0 && uv.x < 1.0 && uv.y > 0.0 && uv.y < 1.0) {
      float dd = getDepth(texture(depthTexture, uv));
      vec4 jzc = toEye(uv, dd);
      dd = -jzc.z;
      if(d > dd) {
        if(abs(abs(d) - abs(dd)) <= step) {
          jd = true;
                    // albedo = texture(colorTexture, uv).rgb;
          albedo = guussColor(uv);
        }
        break;
      }
    }
  }
  if(jd) {
    out_FragColor = vec4(mix(color.xyz, albedo, 0.5), 1.0);
  } else {
    out_FragColor = color;
  }
}
`;class InvertedEffect extends BaseEffect{_mountedHook(){const e={_0xa36cca:3722},t=_0x2397ca;this._postProcessStage=new Cesium__namespace[t(e._0xa36cca)]({fragmentShader:InvertedSceneFS,enabled:this.enabled})}}register("inverted",InvertedEffect);class NightVisionEffect extends BaseEffect{_mountedHook(){this._postProcessStage=Cesium__namespace.PostProcessStageLibrary.createNightVisionStage()}}register("nightVision",NightVisionEffect);class BloomEffect extends BaseEffect{get contrast(){const e={_0x5e60c7:3212},t=_0x2397ca;var x;return(x=this[t(e._0x5e60c7)])===null||x===void 0?void 0:x.uniforms.contrast}set contrast(e){const t={_0x28507a:2100},x=_0x2397ca;this._postProcessStage&&(this._postProcessStage.uniforms[x(t._0x28507a)]=e)}get brightness(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.brightness}set brightness(e){this._postProcessStage&&(this._postProcessStage.uniforms.brightness=e)}get delta(){const e={_0x43a4c3:2554,_0x1b761a:3981},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x[t(e._0x43a4c3)][t(e._0x1b761a)]}set[_0x2397ca(3981)](e){const t=_0x2397ca;this._postProcessStage&&(this._postProcessStage.uniforms[t(3981)]=e)}get sigma(){const e={_0x4f363c:179},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x.uniforms[t(e._0x4f363c)]}set sigma(e){const t=_0x2397ca;this._postProcessStage&&(this._postProcessStage.uniforms[t(179)]=e)}get stepSize(){const e=_0x2397ca;var t;return(t=this[e(3212)])===null||t===void 0?void 0:t[e(2554)].stepSize}set stepSize(e){this._postProcessStage&&(this._postProcessStage.uniforms.stepSize=e)}_mountedHook(){const e={_0x5a1ef2:3212,_0x2d3909:2554,_0x58d7be:3212},t=_0x2397ca;this._postProcessStage=this._map.scene.postProcessStages.bloom,this._postProcessStage.uniforms[t(3719)]=!1,this[t(e._0x5a1ef2)].uniforms[t(2100)]=this[t(3044)].contrast??128,this[t(3212)].uniforms[t(928)]=this[t(3044)].brightness??-.3,this._postProcessStage.uniforms.delta=this.options[t(3981)]??1,this._postProcessStage[t(e._0x2d3909)][t(179)]=this.options.sigma??3.78,this[t(e._0x58d7be)].uniforms.stepSize=this.options[t(3785)]??5}_addedBaseHook(e){const t={_0x2a213c:3212,_0x444cf7:407},x=_0x2397ca;this[x(t._0x2a213c)][x(t._0x444cf7)]=this.enabled}_removedBaseHook(){this._postProcessStage.enabled=!1}}register(_0x2397ca(1796),BloomEffect);class BrightnessEffect extends BaseEffect{get brightness(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.brightness}set brightness(e){this._postProcessStage&&(this._postProcessStage.uniforms.brightness=e)}_mountedHook(){const e={_0x4e2687:3212},t=_0x2397ca;this._postProcessStage=Cesium__namespace.PostProcessStageLibrary.createBrightnessStage(),this[t(e._0x4e2687)].uniforms.brightness=this.options[t(928)]??2}}register(_0x2397ca(928),BrightnessEffect);class BlackAndWhiteEffect extends BaseEffect{get[_0x2397ca(2224)](){const e=_0x2397ca;var t;return(t=this[e(3212)])===null||t===void 0?void 0:t.uniforms.gradations}set gradations(e){const t={_0x28196d:3212,_0x214759:2554},x=_0x2397ca;this._postProcessStage&&(this[x(t._0x28196d)][x(t._0x214759)].gradations=e)}_mountedHook(){const e=_0x2397ca;this._postProcessStage=Cesium__namespace[e(3867)].createBlackAndWhiteStage(),this._postProcessStage.uniforms.gradations=this.options.gradations??4}}register("blackAndWhite",BlackAndWhiteEffect);var MosaicShader=_0x2397ca(506);class MosaicEffect extends BaseEffect{_mountedHook(){const e={_0x212d31:3212,_0x9c9a85:3722},t=_0x2397ca;this[t(e._0x212d31)]=new Cesium__namespace[t(e._0x9c9a85)]({fragmentShader:MosaicShader,enabled:this[t(407)]})}}register("mosaic",MosaicEffect);class DepthOfFieldEffect extends BaseEffect{get[_0x2397ca(3889)](){const e=_0x2397ca;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(2554)].focalDistance}set[_0x2397ca(3889)](e){this._postProcessStage&&(this._postProcessStage.uniforms.focalDistance=e)}get delta(){const e={_0x3dd248:3981},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x.uniforms[t(e._0x3dd248)]}set[_0x2397ca(3981)](e){this._postProcessStage&&(this._postProcessStage.uniforms.delta=e)}get sigma(){const e={_0x1986ae:179},t=_0x2397ca;var x;return(x=this._postProcessStage)===null||x===void 0?void 0:x[t(2554)][t(e._0x1986ae)]}set sigma(e){this._postProcessStage&&(this._postProcessStage.uniforms.sigma=e)}get[_0x2397ca(3785)](){const e={_0xe671fc:3785},t=_0x2397ca;var x;return(x=this[t(3212)])===null||x===void 0?void 0:x.uniforms[t(e._0xe671fc)]}set stepSize(e){const t=_0x2397ca;this._postProcessStage&&(this[t(3212)].uniforms.stepSize=e)}_mountedHook(){const e={_0x553795:3785},t=_0x2397ca;this._postProcessStage=Cesium__namespace.PostProcessStageLibrary.createDepthOfFieldStage(),this._postProcessStage.uniforms.focalDistance=this.options.focalDistance??87,this._postProcessStage.uniforms.delta=this[t(3044)].delta??1,this._postProcessStage.uniforms.sigma=this.options.sigma??3.78,this._postProcessStage.uniforms[t(e._0x553795)]=this.options[t(3785)]??2.46}}register("depthOfField",DepthOfFieldEffect);const packing_glsl=`
vec3 packNormalToRGB(const in vec3 normal) {
  return normalize(normal) * 0.5 + 0.5;
}

vec3 unpackRGBToNormal(const in vec3 rgb) {
  return 2.0 * rgb.xyz - 1.0;
}

const float PackUpscale = 256. / 255.;
const float UnpackDownscale = 255. / 256.;

const vec3 PackFactors = vec3(256. * 256. * 256., 256. * 256., 256.);
const vec4 UnpackFactors = UnpackDownscale / vec4(PackFactors, 1.);

const float ShiftRight8 = 1. / 256.;

vec4 packDepthToRGBA(const in float v) {
  vec4 r = vec4(fract(v * PackFactors), v);
  r.yzw -= r.xyz * ShiftRight8;
  return r * PackUpscale;
}

float unpackRGBAToDepth(const in vec4 v) {
  return dot(v, UnpackFactors);
}

vec4 pack2HalfToRGBA(vec2 v) {
  vec4 r = vec4(v.x, fract(v.x * 255.0), v.y, fract(v.y * 255.0));
  return vec4(r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half(vec4 v) {
  return vec2(v.x + (v.y / 255.0), v.z + (v.w / 255.0));
}

float viewZToOrthographicDepth(const in float viewZ, const in float near, const in float far) {
  return (viewZ + near) / (near - far);
}
float orthographicDepthToViewZ(const in float linearClipZ, const in float near, const in float far) {
  return linearClipZ * (near - far) - near;
}

float viewZToPerspectiveDepth(const in float viewZ, const in float near, const in float far) {
  return ((near + viewZ) * far) / ((far - near) * viewZ);
}
float perspectiveDepthToViewZ(const in float invClipZ, const in float near, const in float far) {
  return (near * far) / ((far - near) * invClipZ - far);
}
`,cmz_selected_glsl=_0x2397ca(2386);function CesiumRenderPass(n){const e={_0x501469:3128,_0x5d50ab:2513,_0x121dcb:964,_0x583b36:3565,_0x274ef6:1653},t={_0x464aae:2570},x={_0x357977:3400,_0xe79d90:3557},i={_0x3abc1a:2027,_0x14226c:1089},s={_0x712c2d:3400,_0x5ad68f:1512,_0x17bef6:317,_0x661da6:3366},o={_0x23ee79:3872,_0x424f46:3367,_0x163c4f:766,_0x75095b:1350,_0x4dbe9d:1636},r={_0x4f7180:1026},c={_0x2da9bb:3366},_={_0x172033:2552,_0x470e31:3288,_0x42fbe1:3288,_0x567a9f:2871,_0x34460c:1041},l={_0x20aba6:2467,_0x575852:777},h={_0x1cf33b:3359,_0x20cfbc:2762,_0x5aa879:2608,_0x2b0713:1089,_0x270939:352,_0x2a25e5:2134,_0x4cc1b8:2708,_0x38054a:382,_0x4b9557:1783,_0x3b18c9:270,_0x1a16d4:2400,_0x595484:3369,_0x2f37d5:382},d=_0x2397ca;let{name:u,vertexShader:m,fragmentShader:f,uniforms:g,renderStateProcess:b,beforeUpdate:y,renderType:C,textureScale:v,pixelFormat:M,pixelDatatype:w,sampler:H,shaderRedefine:D,overrideViewport:F}=n;this._selectedIdTexture=null;const L=d(3766)+u[d(1487)](/[\.\\\/\-]/g,"_"),B="czm_non_"+L+"_main",Y="czm_"+L+d(e._0x501469),j="_cache_"+L,J=L+d(3598);let Q=null,X=null,xe=null,K=null,le;const ce=this,_e=new Cesium__namespace.ClearCommand({color:Cesium__namespace[d(2134)][d(e._0x5d50ab)],depth:1});let ne=new Cesium__namespace[d(e._0x121dcb)];if(F&&Cesium__namespace.BoundingRectangle.clone(F,ne),D=D||"add",C=C||d(807),v=v||1,v<0||v>8)throw new Cesium__namespace[d(e._0x583b36)]("CesiumRenderPass：textureScale必须大于0小于等于8");function pe(R,$,N,z){const G=d;let U=R.shaderCache[G(h._0x1cf33b)]($,L);if(!Cesium__namespace.defined(U)){const q=$[G(h._0x20cfbc)];let W=$.fragmentShaderSource,te=$.vertexShaderSource;const ie=$._vertexShaderText;let ae=W[G(h._0x5aa879)],se=ae.length,re=!!K&&P();Object[G(2121)].toString.call(N)==="[object Object]"&&(N[G(h._0x2b0713)]?N=G(h._0x270939)+Cesium__namespace.Color.floatToByte(N[G(1089)].red)+", "+Cesium__namespace.Color.floatToByte(N.color.green)+", "+Cesium__namespace[G(h._0x2a25e5)].floatToByte(N.color.blue)+", "+Cesium__namespace.Color[G(1010)](N.color[G(h._0x4cc1b8)])+")":N="vec4(1.0)");let ue=cmz_selected_glsl;const Me=/texture\s?\(\s?model_pickTexture\s?,\s?selectedFeature.st\s?\)/.test(N);z===G(h._0x38054a)&&!Me?ue+=G(h._0x4b9557)+N+`);
    }
    return isSelected;
}
    `:ue+=G(h._0x3b18c9)+N+`);
}`;const Ae=cmz_selected_glsl+(`
out float me_isSelected;
bool czm_selected(){
    return czm_selected(`+N+`);
}
`);let Ee=!1,Se=!1;if(/in\s?vec3\s?normal\s?;/.test(ie)||/\n\s?vec3\s?normal\s?;/.test(ie)?Ee=!0:/out\s?vec3\s?v_normal\s?;/.test(ie)&&(Se=!0),f){let de=!1;for(let me=0;me<se;++me)if(/vec4\s?packDepthToRGBA\s?\(/.test(ae[me])){de=!0;break}const ge=(de?"":packing_glsl)+(re?ue:"")+Cesium__namespace.ShaderSource[G(2318)](f,Y)+`void main() 
{ 
`+(D!=="replace"?"    "+B+`(); 
`:"")+("    "+Y+`(); 
`)+G(3027),we=new Array(se+1);for(let me=0;me<se;++me)we[me]=Cesium__namespace.ShaderSource[G(2318)](ae[me],B);we[se]=ge,Ee?W.defines.push(G(h._0x1a16d4)):Se&&W.defines.push("HAS_V_NORMAL_MARS3D"),W=new Cesium__namespace.ShaderSource({sources:we,defines:W[G(h._0x595484)]})}if(m||f){ae=te[G(2608)],se=ae.length;let de=!1;for(let me=0;me<se;++me)if(/vec4\s?packDepthToRGBA\s?\(/.test(ae[me])){de=!0;break}re=re&&z===G(h._0x2f37d5)&&!Me,Ee?te[G(3369)].push(G(2400)):Se&&te.defines.push("HAS_V_NORMAL_MARS3D");const ge=(de?"":packing_glsl)+(re?Ae:"")+Cesium__namespace.ShaderSource.replaceMain(m||"void main(){}",Y)+`void main() 
{ 
`+(D!=="replace"?"    "+B+`(); 
`:"")+(re?` me_isSelected = 0.0;
 #ifdef CZM_SELECTED_FEATURE
   me_isSelected=czm_selected()?1.0:0.0;
 #endif
`:"")+("    "+Y+`(); 
`)+`} 
`,we=new Array(se+1);for(let me=0;me<se;++me)we[me]=Cesium__namespace[G(973)].replaceMain(ae[me],B);we[se]=ge,te=new Cesium__namespace[G(973)]({sources:we,defines:te.defines})}U=R.shaderCache.createDerivedShaderProgram($,L,{vertexShaderSource:te,fragmentShaderSource:W,attributeLocations:q})}return U}function fe(R,$){const N=d;R._renderPassCache=R[N(l._0x20aba6)]||{},R[N(l._0x20aba6)][j]=R._renderPassCache[j]||{};const z=R._renderPassCache[j];let G=z[$.id];if(!Cesium__namespace[N(639)](G)){const U=Cesium__namespace.RenderState.getState($);typeof b=="function"&&b[N(l._0x575852)](ce,U),G=Cesium__namespace.RenderState.fromCache(U),z[$.id]=G}return G}function oe(R,$,N){const z=d,G=R,U=$._frameState;let q=R.derivedCommands;if(!Cesium__namespace.defined(q))return;U.useLogDepth&&Cesium__namespace.defined(q.logDepth)&&(R=q[z(1797)][z(792)]),q=R[z(_._0x172033)];let W=q[z(_._0x470e31)];!Cesium__namespace[z(639)](q[z(3288)])&&(W=q[z(_._0x42fbe1)]={});let te,ie;if(Cesium__namespace.defined(W[J])&&(te=W[J].shaderProgram,ie=W[J].renderState),W[J]=Cesium__namespace.DrawCommand[z(2753)](R,W[J]),!Cesium__namespace.defined(te)||W.shaderProgramId!==R.shaderProgram.id){const se=R.shaderProgram,re=G._pickIdQualifier=new RegExp("uniform\\s?vec4\\s?"+R.pickId,"g").test(se._fragmentShaderText)?"uniform":"varying";W[J].shaderProgram=pe(N,se,R[z(_._0x567a9f)],re),W[J].renderState=fe($,R.renderState),W.shaderProgramId=R[z(_._0x34460c)].id}else W[J][z(1041)]=te,W[J].renderState=ie;const ae=W[J][z(233)];ve(ae)}function he(R){return function(){const $=g[R];return typeof $=="function"?$():$}}function ye(R,$){return function(){const N=_0x3361,z=R[$]();if(Cesium__namespace[N(639)](z))return z.dimensions}}function ve(R){const $=d;if(!R.__created&&(R.czm_selectedIdTexture=function(){return K._selectedIdTexture},R.czm_selectedIdTextureWidth=function(){const N=_0x3361;var z;return((z=K[N(3366)])===null||z===void 0?void 0:z[N(1526)])??0},R.czm_selectedIdTextureStep=function(){const N=_0x3361;var z;return(z=K[N(c._0x2da9bb)])!==null&&z!==void 0&&z.width?1/K[N(3366)].width:-1},!!g)){R.__created=!0;for(const N in g)if(g.hasOwnProperty(N)){typeof g[N]!==$(r._0x4f7180)?R[N]=he(N):R[N]=g[N];const z=R[N]();(typeof z===$(3994)||z instanceof Cesium__namespace[$(2699)]||z instanceof HTMLImageElement||z instanceof HTMLCanvasElement||z instanceof HTMLVideoElement)&&(R[N+"Dimensions"]=ye(R,N))}}}function Te(R){const $=R._view,N=$.frustumCommandsList,z=N.length;let G,U,q;for(let W=0;W<z;++W){const te=z-W-1,ie=N[te];for(U=0;U<ie.commands.length;U++){const ae=ie.commands[U];if(q=ie.indices[U],!(K&&U===Cesium__namespace.Pass.GLOBE))for(G=0;G<q;++G){const se=ae[G];oe(se,R,R._context)}}}}function Ce(){X&&(X.destroy(),Q.destroy(),Q=void 0,X=void 0),xe&&(xe.destroy(),xe=void 0)}function Pe(R,$,N,z){const G=d,U=$.width,q=$[G(3872)];X&&X.width===U&&X[G(o._0x23ee79)]===q&&N===le||(le=N,Ce(),X=new Cesium__namespace.Texture({context:R,width:U,height:q,pixelFormat:M??Cesium__namespace[G(o._0x424f46)][G(o._0x163c4f)],pixelDatatype:w??Cesium__namespace.PixelDatatype.FLOAT,sampler:H??Cesium__namespace.Sampler.NEAREST}),xe=new Cesium__namespace.Texture({context:R,width:U,height:q,pixelFormat:Cesium__namespace.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium__namespace[G(o._0x75095b)].UNSIGNED_SHORT,sampler:Cesium__namespace.Sampler[G(o._0x4dbe9d)]}),Q=new Cesium__namespace.Framebuffer({colorTextures:[X],context:R,destroyAttachments:!1,depthTexture:xe}))}function be(R){ne=Cesium__namespace.BoundingRectangle.clone(R.viewport,ne);const $=Object.assign({},R.passState);return $.viewport=ne,$}function S(R,$){const N=d,z=R[N(2270)]._frameState,G=z[N(s._0x712c2d)],U=G._scene,q=U._view;try{if(!m&&!f){const W=be(q);typeof y=="function"&&y.call(ce,U,$),Pe(R,ne,U[N(s._0x5ad68f)],q[N(s._0x17bef6)]),executeDerivedCommandList(R,Q,W)}else{const W=be(q);typeof y===N(1026)&&y[N(777)](ce,U,$),Pe(R,ne,U.hdr,q.sceneFramebuffer),Te(U),executeDerivedCommandList(R,Q,W,"renderPass",J,C==="all"||!K||!K[N(s._0x661da6)]?null:k)}}catch{}}function P(){const R=d;if(!K)return;const $=K[R(3093)]||K[R(2606)];if($.length)return $}function k(R,$){const N=d,z=K&&(K.selected||K.parentSelected);if(!K||!z||!z.length)return!1;if(!R.pickId||R._pickIdQualifier!=="uniform")return!0;let G=!0;const U=R[N(1466)],q=C==="selected";if(U&&U.isObject3D){for(let te=0;te<z[N(2027)];te++)if(z[te]===U)return q;return!q}const W=R.uniformMap;if(W[R.pickId]){const te=W[R[N(2871)]]();G=!q;for(let ie=0;ie<z[N(i._0x3abc1a)];ie++){const ae=z[ie],se=ae.pickId?[ae.pickId]:ae.pickIds||ae._pickIds;for(let re=0;re<se.length;re++){const ue=se[re];if(ue[N(i._0x14226c)]===te||Cesium__namespace.Color.equals(ue.color,te))return q}}}return G}function E(R){const $=d;if(Q){const N=R._us._frameState[$(x._0x357977)]._scene[$(3967)];_e[$(x._0xe79d90)]=Q,_e.execute(R,N.passState),_e[$(x._0xe79d90)]=void 0}}function T(R){const $={_0x196a48:2606},N=d;if(K&&ce[N(t._0x464aae)]&&(K[N(1653)]=ce.prevStageUpdate,ce.prevStageUpdate=null,ce.prevStageExecute=null),K=R,!K)return;const z=K[N(1653)];ce.prevStageUpdate=z,K[N(1653)]=function(G,U){const q=N;if(E(G),z.call(K,G,U),!!K.enabled)if(!m&&!f)S(G,U);else{const W=K[q(3093)]||K[q($._0x196a48)];W&&W.length&&S(G,U)}}}this[d(e._0x274ef6)]=S,this.clear=E,Object[d(3901)](this,{texture:{get(){return X}},depthTexture:{get(){return xe}},stage:{get(){return K},set(R){K!==R&&T(R)}}})}let scratchPerspectiveFrustum,scratchPerspectiveOffCenterFrustum,scratchOrthographicFrustum,scratchOrthographicOffCenterFrustum;function executeDerivedCommand(n,e,t,x,i,s){const o={_0x41f3b2:3776,_0x10a4f9:792},r=_0x2397ca,c=Cesium__namespace.defined,_=x._frameState;let l=n.derivedCommands;c(l)&&(_[r(o._0x41f3b2)]&&c(l.logDepth)&&(n=l.logDepth[r(o._0x10a4f9)]),l=n.derivedCommands,c(l[e])&&(n=l[e][t],n.execute(i,s)))}function executeDerivedCommandList(n,e,t,x,i,s){const o={_0x243863:1209,_0x4dca57:2640,_0x428276:387,_0x41873b:2032,_0xe3f679:1839,_0x24d8d2:640,_0x2dc3bb:1729},r=_0x2397ca,{Pass:c,defined:_,PerspectiveFrustum:l,PerspectiveOffCenterFrustum:h,OrthographicFrustum:d,OrthographicOffCenterFrustum:u}=Cesium__namespace;scratchPerspectiveFrustum=scratchPerspectiveFrustum||new l,scratchPerspectiveOffCenterFrustum=scratchPerspectiveOffCenterFrustum||new h,scratchOrthographicFrustum=scratchOrthographicFrustum||new d,scratchOrthographicOffCenterFrustum=scratchOrthographicOffCenterFrustum||new u;const m=n._us,f=m._frameState,g=f.camera,b=g[r(279)],y=b._view,C=y.frustumCommandsList,v=C[r(2027)],M=b._globeTranslucencyState,w=M.translucent,H=b[r(3967)].globeTranslucencyFramebuffer;let D;_(g.frustum[r(1746)])?D=g[r(o._0x243863)].clone(scratchPerspectiveFrustum):_(g.frustum[r(2977)])?D=g.frustum.clone(scratchPerspectiveOffCenterFrustum):_(g.frustum.width)?D=g[r(o._0x243863)].clone(scratchOrthographicFrustum):D=g[r(1209)][r(3069)](scratchOrthographicOffCenterFrustum);function F(j,J,Q,X){if(s?s(j,J):!0)try{x&&i?executeDerivedCommand(j,x,i,J,Q,X):j.execute(Q,X)}catch{}}let L,B,Y;for(let j=0;j<v;++j){const J=v-j-1,Q=C[J],X=t.framebuffer;if(t.framebuffer=e,D.near=J!==0?Q.near*b[r(o._0x4dca57)]:Q[r(o._0x428276)],D[r(o._0x41873b)]=Q.far,m.updateFrustum(D),m[r(o._0xe3f679)](c.GLOBE),Y=Q[r(o._0x24d8d2)][c[r(433)]],B=Q.indices[c.GLOBE],w)M[r(o._0x2dc3bb)](Q,F,H,b,t);else for(L=0;L<B;++L)F(Y[L],b,n,t);for(m.updatePass(c.CESIUM_3D_TILE),Y=Q[r(640)][c.CESIUM_3D_TILE],B=Q.indices[c[r(1754)]],L=0;L<B;++L)F(Y[L],b,n,t);for(m[r(1839)](c.OPAQUE),Y=Q.commands[c.OPAQUE],B=Q.indices[c.OPAQUE],L=0;L<B;++L)F(Y[L],b,n,t);for(m.updatePass(c.TRANSLUCENT),Y=Q.commands[c[r(2966)]],B=Q.indices[c.TRANSLUCENT],L=0;L<B;++L)F(Y[L],b,n,t);t.framebuffer=X}}class OutlineEffect extends BaseEffect{constructor(e={}){super(e),this._setOptionsHook(e)}get[_0x2397ca(3093)](){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.selected}set selected(e){const t={_0x12640a:3212,_0x65cce3:2027},x=_0x2397ca;let i=[];e&&(Array[x(4056)](e)?i=this._getPickIds(e):i=this._getPickIds([e])),this._postProcessStage&&(this[x(t._0x12640a)][x(3093)]=i,this._postProcessStage[x(407)]=this.enabled&&this.selected[x(t._0x65cce3)]>0)}get color(){return this._color}set[_0x2397ca(1089)](e){const t={_0x89f3c0:3463},x=_0x2397ca;this._color=getCesiumColor(e),this._useSingleColor=!this._colorHidden||this[x(t._0x89f3c0)].equals(this._colorHidden)}get colorHidden(){const e={_0x2d391a:3381},t=_0x2397ca;return Cesium__namespace[t(639)](this[t(e._0x2d391a)])?this._colorHidden:this._color}set colorHidden(e){const t={_0x521941:1052},x=_0x2397ca;this[x(3381)]=getCesiumColor(e),this[x(t._0x521941)]=!this[x(3381)]||this[x(3463)].equals(this._colorHidden)}get planeAngle(){return this[_0x2397ca(3726)]}set[_0x2397ca(216)](e){this._planeAngle=e,this._planeAngleRadians=Cesium__namespace.Math.toRadians(e)}_enabledHook(e){const t=_0x2397ca;this._postProcessStage&&(this._postProcessStage[t(407)]=e&&this.selected.length>0)}[_0x2397ca(3535)](e,t){const x={_0x36f951:2134,_0x3fa82e:1936,_0x1c6018:216},i=_0x2397ca;this.eventType=e[i(954)]??EventType.click,this.width=e.width??6,this[i(1089)]=getCesiumColor(e.color,Cesium__namespace[i(x._0x36f951)].WHITE),this.colorHidden=e[i(x._0x3fa82e)],this.showPlane=e.showPlane??!1,this.planeAngle=e[i(x._0x1c6018)]??10,this.glow=e.glow??!1,this[i(3499)]=e.glowPower??1,this.glowStrength=e.glowStrength??3,this.onlySelected=e.onlySelected??!1}_mountedHook(){const e={_0x46936a:3620,_0x4f907a:3722,_0xba84e6:3086},t={_0x41ebd2:2705},x=_0x2397ca,i=this,s=this.name||this.type||"",o=new CesiumRenderPass({name:s+"Pass",vertexShader:`
          out vec3 vOutlineNormal_mars3d;
          void main(){
              #ifdef HAS_NORMAL_MARS3D
                  vOutlineNormal_mars3d = normal;
              #else
                  #ifdef HAS_V_NORMAL_MARS3D
                      vOutlineNormal_mars3d = v_normal;
                  #else
                      vOutlineNormal_mars3d=vec3(0.0);
                  #endif
              #endif
          } `,fragmentShader:`
        in vec3 vOutlineNormal_mars3d;
        void main(){
            #ifdef CZM_SELECTED_FEATURE
            if(!czm_selected())discard;
            #endif

            if(length(vOutlineNormal_mars3d)>0.0)
              out_FragColor=vec4( vOutlineNormal_mars3d ,out_FragColor.a);
        }`,sampler:new Cesium__namespace.Sampler({minificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium__namespace.TextureMagnificationFilter.LINEAR})}),r=new Cesium__namespace[x(3722)]({name:s+x(1983),uniforms:{outlineWidth(){return i.width},devicePixelRatio,thresholdAngle:function(){return i[x(t._0x41ebd2)]},useSingleColor:function(){return i._useSingleColor},showOutlineOnly:function(){return!i.showPlane},visibleEdgeColor:function(){return i.color},hiddenEdgeColor:function(){return i.colorHidden},maskTexture(){return o.texture},maskDepthTexture(){return o[x(3767)]}},fragmentShader:x(e._0x46936a)});o[x(465)]=r;const c=createBlurStage(s+"Blur1",4,1,.75),_=createBlurStage(s+"Blur2",4,4,.5),l=new Cesium__namespace.PostProcessStageComposite({name:s+"BlurComposite",stages:[r,c,_],inputPreviousStageTexture:!0}),h=new Cesium__namespace[x(e._0x4f907a)]({name:s+"Additive",uniforms:{showGlow:function(){return i[x(2144)]},edgeGlow:function(){return i.glowPower},edgeStrength:function(){return i.glowStrength},edgeOnly(){return i[x(1638)]},maskTexture(){return o.texture},lineTexture:r.name,edgeTexture1:c.name,edgeTexture2:l.name},fragmentShader:`
    uniform sampler2D colorTexture;
    uniform sampler2D edgeTexture1;
    uniform sampler2D edgeTexture2;
    uniform sampler2D lineTexture;
    uniform sampler2D maskTexture;
    uniform bool showGlow;
    uniform float edgeGlow;
    uniform bool edgeOnly;
    uniform float edgeStrength;

    in vec2 v_textureCoordinates;
    void main(){

        vec2 vUv =v_textureCoordinates;
        vec4 edgeColor=texture( lineTexture, vUv);
        vec4 color=texture( colorTexture, vUv);
        float opacity=1.;
        if(edgeOnly){
            vec4 maskColor=texture( maskTexture, vUv);
            opacity=1.-maskColor.a;
            out_FragColor = maskColor;
            return;
        }

        if(showGlow){
            vec4 edgeValue1 = texture(edgeTexture1, vUv);
            vec4 edgeValue2 = texture(edgeTexture2, vUv);
            vec4 glowColor = edgeValue1 + edgeValue2 * edgeGlow;
            out_FragColor = opacity * color + edgeColor + edgeStrength * (1. - edgeColor.r) * glowColor;
        }
        else{
            out_FragColor = opacity * color + edgeColor;
        }
    }
    `}),d=new Cesium__namespace.PostProcessStageComposite({name:s+"Composite",stages:[l,h],inputPreviousStageTexture:!1});function u(m){const f={_0x2946d6:1089},g={_0x59b28b:908};Object.defineProperties(m,{showGlow:{get(){return i.glow},set(b){i.glow=b}},edgeGlow:{get(){return i.glowPower},set(b){i.glowPower=b}},edgeStrength:{get(){return i[_0x3361(g._0x59b28b)]},set(b){i.glowStrength=b}},thresholdAngle:{get(){return i._planeAngleRadians},set(b){i._planeAngleRadians=b}},showOutlineOnly:{get(){return!i.showPlane},set(b){i.showPlane=!b}},edgeOnly:{get(){return i.onlySelected},set(b){i.onlySelected=b}},useSingleColor:{get(){return i._useSingleColor}},outlineWidth:{get(){return i.width},set(b){i.width=b}},visibleEdgeColor:{get(){return i[_0x3361(f._0x2946d6)]},set(b){i.color=b}},hiddenEdgeColor:{get(){return i[_0x3361(1936)]},set(b){i.colorHidden=b}}})}u(d),d._uniforms=d[x(e._0xba84e6)]||{},u(d._uniforms),d.selected=[],d[x(407)]=!1,this[x(3212)]=d}[_0x2397ca(2670)](){const e={_0x5b796b:954},t=_0x2397ca;this[t(e._0x5b796b)]&&this[t(558)].on(this.eventType,this._map_clickHandler,this)}_removedHook(){const e={_0x38dc85:954},t=_0x2397ca;this.eventType&&this._map.off(this[t(e._0x38dc85)],this._map_clickHandler,this)}[_0x2397ca(2423)](e){const t=this.options.objectsToExclude;if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i];if(e.graphic===o||e.layer===o)return}const x=this._map.mouseEvent.getPicked(e);this.selected=x}}register("outline",OutlineEffect);function createBlurStage(n,e,t,x){const i={_0x534dc9:518,_0x2d2462:1096},s=_0x2397ca,o={fragmentShader:`
    #define MAX_RADIUS `+e+`
    in vec2 v_textureCoordinates;
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform vec2 direction;
    uniform float kernelRadius;

    float gaussianPdf(in float x, in float sigma) {
        return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
    }
    void main() {
        vec2 vUv=v_textureCoordinates;
        vec2 invSize = 1.0 / colorTextureDimensions;
        float weightSum = gaussianPdf(0.0, kernelRadius);
        vec4 diffuseSum = texture( colorTexture, vUv) * weightSum;
        vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
        vec2 uvOffset = delta;
        for( int i = 1; i <= MAX_RADIUS; i ++ ) {
            float w = gaussianPdf(uvOffset.x, kernelRadius);
            vec4 sample1 = texture( colorTexture, vUv + uvOffset);
            vec4 sample2 = texture( colorTexture, vUv - uvOffset);
            diffuseSum += ((sample1 + sample2) * w);
            weightSum += (2.0 * w);
            uvOffset += delta;
        }
        out_FragColor = diffuseSum/weightSum;
    }`},r=new Cesium__namespace.PostProcessStage({name:n+"_x_direction",fragmentShader:o.fragmentShader,textureScale:x,forcePowerOfTwo:!0,uniforms:{kernelRadius:t,direction:new Cesium__namespace.Cartesian2(1,0)},sampleMode:Cesium__namespace.PostProcessStageSampleMode.LINEAR}),c=new Cesium__namespace.PostProcessStage({name:n+"_y_direction",fragmentShader:o.fragmentShader,textureScale:x,forcePowerOfTwo:!0,uniforms:{kernelRadius:t,direction:new Cesium__namespace[s(i._0x534dc9)](0,1)},sampleMode:Cesium__namespace.PostProcessStageSampleMode[s(926)]});return new Cesium__namespace[s(i._0x2d2462)]({name:n,stages:[r,c],inputPreviousStageTexture:!0})}class BloomTargetEffect extends BaseEffect{constructor(e={}){const t={_0xe555de:954},x=_0x2397ca;e={contrast:128,brightness:-.3,blurSamples:32,delta:1,sigma:3.78,stepSize:5,ratio:2,threshold:0,smoothWidth:.01,...e},super(e),this[x(1089)]=getCesiumColor(e.color,Cesium__namespace.Color.WHITE),this.eventType=e[x(t._0xe555de)]??EventType.click}get selected(){const e={_0x70cd31:3212},t=_0x2397ca;var x;return(x=this[t(e._0x70cd31)])===null||x===void 0?void 0:x.selected}set[_0x2397ca(3093)](e){const t={_0x5aa2e9:3433,_0x4c217f:3212},x=_0x2397ca;let i=[];e&&(Array[x(4056)](e)?i=this[x(t._0x5aa2e9)](e):i=this._getPickIds([e])),this._postProcessStage&&(this[x(3212)].selected=i,this[x(t._0x4c217f)].enabled=this[x(407)]&&this.selected.length>0)}[_0x2397ca(1757)](e){const t={_0x453551:3212},x=_0x2397ca;this._postProcessStage&&(this[x(t._0x453551)].enabled=e&&this[x(3093)].length>0)}_mountedHook(){const e={_0x15f151:3722,_0x1d3544:926,_0x5d0273:1096,_0x44ef91:1989,_0x3dfb7a:2044,_0x3d74e8:2044,_0x20051b:3212},t={_0x35dd09:2100},x={_0x561820:3785},i={_0x4a9e7e:3044},s={_0x13382d:3044},o={_0x2aefd2:3044},r=_0x2397ca,c=new Cesium__namespace.PostProcessStage({name:this.name+"high",fragmentShader:r(2663),uniforms:{marsColor:Cesium__namespace.Color.BLACK,marsOpacity:1,smoothWidth:()=>this[r(3044)].smoothWidth,threshold:()=>this.options.threshold}}),_=`
    #define SAMPLES `+this.options[r(354)]+`
    uniform sampler2D colorTexture;
    uniform float direction;

    uniform float delta;
    uniform float sigma;
    uniform float stepSize;

    in vec2 v_textureCoordinates;
    void main()
    {
      vec2 st = v_textureCoordinates;
      vec2 dir = vec2(1.0 - direction, direction);
      vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));

      vec3 g;
      g.x = 1.0 / (sqrt(czm_twoPi) * sigma);
      g.y = exp((-0.5 * delta * delta) / (sigma * sigma));
      g.z = g.y * g.y;
      vec4 result = texture(colorTexture, st) * g.x;

      for (float i = 1.0; i < float(SAMPLES); i+=1.0)
      {
        g.xy *= g.yz;
        vec2 offset = i * dir * step;
        result += texture(colorTexture, st - offset) * g.x;
        result += texture(colorTexture, st + offset) * g.x;
      }
      out_FragColor = result;
    }
    `,l=new Cesium__namespace[r(e._0x15f151)]({name:this.name+"blur_x",fragmentShader:_,uniforms:{delta:()=>this.options.delta,sigma:()=>this[r(o._0x2aefd2)].sigma,stepSize:()=>this[r(s._0x13382d)].stepSize,direction:0},sampleMode:Cesium__namespace.PostProcessStageSampleMode[r(926)]}),h=new Cesium__namespace[r(3722)]({name:this.name+"blur_y",fragmentShader:_,uniforms:{delta:()=>this[r(i._0x4a9e7e)].delta,sigma:()=>this.options.sigma,stepSize:()=>{const b=r;return this.options[b(x._0x561820)]},direction:1},sampleMode:Cesium__namespace.PostProcessStageSampleMode[r(e._0x1d3544)]}),d=new Cesium__namespace[r(e._0x5d0273)]({name:this.name+"blur",stages:[l,h]}),u=new Cesium__namespace.PostProcessStageComposite({name:this.name+"_blur_comp",stages:[c,d],inputPreviousStageTexture:!0}),m=new Cesium__namespace.PostProcessStage({name:this.name+"contrast_bias",fragmentShader:`
        uniform sampler2D colorTexture;
        in vec2 v_textureCoordinates;
        uniform float contrast;
        uniform float brightness;
        void main(void)
        {
            vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;
            sceneColor = czm_RGBToHSB(sceneColor);
            sceneColor.z += brightness;
            sceneColor = czm_HSBToRGB(sceneColor);
            float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));
            sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);
            out_FragColor = vec4(sceneColor, 1.0);
        }`,uniforms:{contrast:()=>{const b=r;return this.options[b(t._0x35dd09)]},brightness:()=>this.options.brightness}}),f=new Cesium__namespace[r(1096)]({name:this[r(2044)]+"contrast_bias_blur",stages:[m,u]}),g=new Cesium__namespace.PostProcessStage({name:this[r(2044)]+r(e._0x44ef91),fragmentShader:`
      uniform sampler2D colorTexture;
      uniform sampler2D bloomTexture;
      uniform float ratio;
      uniform vec4 color;
      in vec2 v_textureCoordinates;
      void main(void)
      {
        vec4 color1 = texture(colorTexture, v_textureCoordinates);
        vec4 bloom = texture(bloomTexture, v_textureCoordinates);
        bloom *= color ;
        #ifdef CZM_SELECTED_FEATURE
          if (czm_selected()) {
            bloom *= ratio;
          }
        #endif
        out_FragColor = bloom + color1;
      }`,uniforms:{bloomTexture:f[r(e._0x3dfb7a)],ratio:()=>this.options.ratio,color:()=>this.color}});this[r(3212)]=new Cesium__namespace[r(1096)]({name:this[r(e._0x3d74e8)],stages:[f,g],inputPreviousStageTexture:!1}),this[r(e._0x20051b)].selected=[]}[_0x2397ca(2670)](){this.eventType&&this._map.on(this.eventType,this._map_clickHandler,this)}_removedHook(){const e={_0x11d1bb:558,_0x3a1afd:2423},t=_0x2397ca;this.eventType&&this[t(e._0x11d1bb)].off(this.eventType,this[t(e._0x3a1afd)],this)}_map_clickHandler(e){const t={_0x36e7f0:2996},x=_0x2397ca,i=this.options.objectsToExclude;if(i)for(let o=0,r=i[x(2027)];o<r;o++){const c=i[o];if(e[x(t._0x36e7f0)]===c||e.layer===c)return}const s=this._map.mouseEvent.getPicked(e);this.selected=s}}register(_0x2397ca(899),BloomTargetEffect);var index$2={__proto__:null,BaseEffect,FogEffect,RainEffect,SnowEffect,SnowCoverEffect,InvertedEffect,NightVisionEffect,BloomEffect,BrightnessEffect,BlackAndWhiteEffect,MosaicEffect,DepthOfFieldEffect,OutlineEffect,BloomTargetEffect};class BaseControl extends BaseThing{constructor(e={}){const t=_0x2397ca;super(e),this._show=e[t(3482)]??!0}get show(){return this._show}set[_0x2397ca(3482)](e){const t={_0x13b114:516},x=_0x2397ca;this._show!==e&&(this._show=e,this._container&&(this._container.style.display=e?x(t._0x13b114):"none"),this[x(446)]&&this._showHook(e),this._map.fire(EventType.updateControl,{control:this}))}get type(){return this[_0x2397ca({_0x3879ad:3157}._0x3879ad)]}get[_0x2397ca(571)](){return this._container}get[_0x2397ca(523)](){const e={_0x4718d4:523},t=_0x2397ca;var x;return this.options[t(e._0x4718d4)]?this.options.parentContainer:(x=this._map)===null||x===void 0?void 0:x.container}get[_0x2397ca(3131)](){var e;return(e=this.parentContainer)===null||e===void 0?void 0:e.id}[_0x2397ca(1757)](e){const t={_0x1136d7:3378},x=_0x2397ca;this._container&&(this._container.style[x(t._0x1136d7)]=x(e?516:2080)),this[x(446)]&&this._showHook(e)}setOptions(e){const t=_0x2397ca;if(!isBoolean(e))return this.options=merge(this.options,e),this[t(3804)](),this}reload(){const e=_0x2397ca,t=this[e(558)];t&&(this._onRemove(),delete this._container,this[e(4061)](t))}[_0x2397ca(2717)](e){return e&&e[_0x2397ca(3521)]&&e.addControl(this),this}[_0x2397ca(2689)](e){this._map&&this._map.removeControl(this,e)}_onAdd(e){const t={_0x3f7006:1103,_0x5520b1:558,_0x14cd87:785},x=_0x2397ca;this.isAdded||this[x(t._0x3f7006)]===State.ADD||(this._state=State[x(1007)],this[x(t._0x5520b1)]=e,this._container?!this._container.parentNode&&this._addChildContainer(this[x(785)]):(this._mountedHook&&this._mountedHook(),this[x(t._0x14cd87)]&&this._addChildContainer(this._container)),this._addedHook&&this._addedHook(),this._container&&this._container.addEventListener("click",this._container_onClickHandler[x(1373)](this)),this._state=State.ADDED)}_addChildContainer(e){const t={_0x1fc449:3044,_0x2804a8:2136,_0x421af1:523},x=_0x2397ca;if(this[x(t._0x1fc449)].insertBefore)this[x(523)].insertBefore(e,this[x(3044)][x(t._0x2804a8)]);else if(Cesium__namespace.defined(this.options.insertIndex)){const i=this.parentContainer[x(543)];i.length<this.options[x(2502)]&&(this.options.insertIndex=0),this.parentContainer.insertBefore(e,i[this.options[x(2502)]])}else this[x(t._0x421af1)].appendChild(e)}_onRemove(){const e={_0x2f8354:2393,_0x56c983:1628,_0x14ba33:1103},t=_0x2397ca;this._state===State[t(1273)]&&this._map&&(this._removedBeforeHook&&this[t(e._0x2f8354)](),this[t(785)]&&this._container[t(3405)]&&(this._container[t(1067)]("click",this[t(e._0x56c983)]),this._container.parentNode.removeChild(this._container)),this._removedHook&&this[t(380)](),this._map=null,this[t(e._0x14ba33)]=State[t(1225)])}_mountedHook(){}_addedHook(){}[_0x2397ca(380)](){}_container_onClickHandler(e){const t={_0x1024a3:3044,_0x2f04d2:2031,_0xd51d0f:2031},x=_0x2397ca;this[x(407)]&&(this[x(t._0x1024a3)].click&&this.options[x(t._0x2f04d2)](this.options),this[x(1788)](EventType[x(t._0xd51d0f)],{...this.options,mouseEvent:e}))}setStyle(e){const t={_0x4eee08:357},x=_0x2397ca;return this._container&&merge(this._container[x(t._0x4eee08)],e),this}_createIcon(e,t,x=""){const i={_0x2fa7a4:1449,_0x1db624:3437},s=_0x2397ca;return e?(!t&&(t=create$3("div")),e=trim(e),e.startsWith(s(i._0x2fa7a4))||e.startsWith("<svg")?t.appendChild(parseDom(e,!0,x)):e[s(3602)]("data:image")||e.endsWith(s(3265))||e.endsWith(".png")||e.endsWith(".jpg")?create$3("img",x,t).setAttribute("src",e):create$3("i",x+" "+e,t),t[s(i._0x1db624)]):""}fire(e,t={},x){const i={_0x17ead1:1214},s=_0x2397ca;return!t.control&&(t[s(i._0x17ead1)]=this),super.fire(e,t,x)}[_0x2397ca(2941)](e){this.enabled=!1,super.destroy(e)}}class BaseCzmControl extends BaseControl{get viewer(){const e=_0x2397ca;return this._map[e(1795)]}_mountedHook(){const e={_0x35d0a1:558,_0x3eed21:357},t=_0x2397ca,x=this[t(e._0x35d0a1)].viewer[this._czmControlKey];if(x){if(this._rebindCzmContainer)try{this[t(846)](x[this[t(3373)]]),delete this._rebindCzmContainer}catch{}}else this[t(785)]=this[t(3312)](),this.options[t(e._0x3eed21)]&&this.setStyle(this[t(3044)][t(357)])}_addedHook(){const e={_0x7a89a7:3482,_0x50d643:558,_0x512add:2346,_0x1c0964:2502},t=_0x2397ca;let x=this._map[t(1795)][this[t(1408)]];!x&&(x=this._createCzmControl(this._container)),this._czmContrl=x,this._container=x[this._czmContainerKey],this._container.style.display=this[t(e._0x7a89a7)]?"block":"none",this[t(2346)]&&(this[t(e._0x50d643)].lang===LangType.ZH||this._map.lang===LangType.ZHHK)&&this[t(e._0x512add)](this._map[t(571)]),this.options[t(e._0x1c0964)]&&this[t(2209)](this[t(3044)].insertIndex)}_removedHook(){const e={_0x4c69d1:3044,_0x544de9:1408},t=_0x2397ca;if(this[t(e._0x4c69d1)].destroyCzm??!0){try{this._czmContrl.destroy()}catch{}delete this._map.viewer[this[t(e._0x544de9)]],delete this._czmContrl}else this._container[t(357)][t(3378)]="none"}_setInsertIndex(e=0){const t={_0x9f0e6b:2136},x=_0x2397ca,i=this.parentContainer.childNodes;i.length<e&&(e=0),this.parentContainer.removeChild(this._container),this.parentContainer[x(t._0x9f0e6b)](this._container,i[e])}[_0x2397ca(846)](e){}_createCzmContainer(){return null}_createCzmControl(){return null}[_0x2397ca(789)](e,t,x){const i={_0x47775a:284},s=_0x2397ca,o=e[s(i._0x47775a)](x);for(let r=0;r<o.length;r++)t[o[r].innerHTML]&&(o[r].innerHTML=t[o[r].innerHTML])}_updateDomByTagName(e,t,x){const i={_0x12b681:2027,_0x15f806:3437},s=_0x2397ca,o=e.getElementsByTagName(x);for(let r=0;r<o[s(i._0x12b681)];r++)t[o[r][s(i._0x15f806)]]&&(o[r].innerHTML=t[o[r].innerHTML])}[_0x2397ca(2110)](e,t,x,i){const s=_0x2397ca;!e&&(e=document);const o=e[s(284)](x);for(let r=0;r<o[s(2027)];r++)t[o[r].getAttribute(i)]&&o[r].setAttribute(i,t[o[r].getAttribute(i)])}[_0x2397ca(3084)](e,t,x,i,s){const o={_0x4eb249:3275,_0x407394:2310},r=_0x2397ca,c=e.getElementsByClassName(x);if(c[r(2027)]>0)for(let _=0;_<c[r(2027)];_++)c[_][s]=function(l){const h=r,d=l[h(o._0x4eb249)][h(o._0x407394)](i);t[d]&&l.currentTarget.setAttribute(i,t[d])}}}class Animation extends BaseCzmControl{constructor(e={}){const t={_0x279365:785},x=_0x2397ca;super(e),this._czmControlKey="_animation",this._czmContainerKey=x(t._0x279365)}_createCzmContainer(){return create$3("div",_0x2397ca(1387))}_createCzmControl(){const e=_0x2397ca;return new Cesium__namespace.Animation(this._container,new Cesium__namespace.AnimationViewModel(this[e(1795)].clockViewModel))}_toChineseLang(e){const t={_0x564e83:284,_0x132101:806},x=_0x2397ca;let i=e[x(t._0x564e83)]("cesium-viewer-animationContainer");if(i.length>0){i=i[0];const s={Today:"今天","Today (real-time)":"今天（实际时间）",Pause:"暂停","Play Reverse":x(t._0x132101),"Play Forward":"前进播放","Current time not in range":"当前时间不在范围内"};this._updateDomByTagName(i,s,"title")}}}register$1("animation",Animation);class BaseLayerPicker extends BaseCzmControl{constructor(e={}){const t={_0x2e01e2:2502},x=_0x2397ca;super(e),this._czmControlKey="_baseLayerPicker",this[x(3373)]="_element",this.options[x(t._0x2e01e2)]=this.options.insertIndex??1}get parentContainer(){const e={_0x1e4420:805},t=_0x2397ca;return this[t(3044)].parentContainer?this.options.parentContainer:this._map[t(e._0x1e4420)]}_createCzmControl(){const e={_0x2becdb:2366,_0x57c0cc:195,_0x6bb89:3044,_0x256c12:558,_0x565970:3202,_0x2226ef:3482},t=_0x2397ca;var x;const i=this[t(558)].options.control||{},s=this[t(3044)],o={map:this._map,globe:this._map.scene.globe,imageryProviderViewModels:s.imageryProviderViewModels||i.imageryProviderViewModels,selectedImageryProviderViewModel:s[t(2366)]||i[t(e._0x2becdb)],terrainProviderViewModels:s[t(2591)]||i.terrainProviderViewModels,selectedTerrainProviderViewModel:s.selectedTerrainProviderViewModel||i[t(e._0x57c0cc)]};if(!o.imageryProviderViewModels&&((x=this._map[t(e._0x6bb89)].basemaps)===null||x===void 0?void 0:x.length)>0){const c=getImageryProviderViewModels(this[t(e._0x256c12)].options[t(e._0x565970)],this._map.options.templateValues);o[t(3458)]=c.imageryProviderViewModels,c.selectedIndex!==-1&&(o.selectedImageryProviderViewModel=c.imageryProviderViewModels[c.selectedIndex])}if(!o[t(2591)]){var r;o.terrainProviderViewModels=getTerrainProviderViewModels(this._map._getTerrainOptions()),o.selectedTerrainProviderViewModel=o.terrainProviderViewModels[(r=this._map.options.terrain)!==null&&r!==void 0&&r[t(e._0x2226ef)]?1:0]}return new Cesium__namespace.BaseLayerPicker(this._map.toolbar,o)}[_0x2397ca(2346)](e){const t={_0x26f882:712,_0x5e3ce4:2027,_0x319ef6:1980},x=_0x2397ca;let i=e.getElementsByClassName("cesium-baseLayerPicker-dropDown");if(i[x(2027)]>0){i=i[0];const s={Imagery:"影像","Cesium ion":"官方ION",Other:"其他",Terrain:x(t._0x26f882),"WGS84 Ellipsoid":"WGS84 椭球","Cesium World Terrain":"Cesium 世界地形图","WGS84 standard ellipsoid, also known as EPSG:4326":"WGS84标准椭球，又称EPSG：4326","High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion":"高分辨率全球地形图块集由几个数据源组成，由Cesium ion托管"};this._updateDomInnerHtml(i,s,"cesium-baseLayerPicker-sectionTitle"),this._updateDomInnerHtml(i,s,"cesium-baseLayerPicker-categoryTitle"),this._updateDomInnerHtml(i,s,"cesium-baseLayerPicker-itemLabel"),this._updateDomAttribute(i,s,"cesium-baseLayerPicker-item","title");const o=e[x(284)]("cesium-baseLayerPicker-selected");o[x(t._0x5e3ce4)]>0&&(o[0][x(t._0x319ef6)].onmouseover=function(r){const c=x,_=r.currentTarget[c(2310)](c(2112)),l=_.split(`
`);let h="",d="";s[l[0]]?h+=s[l[0]]:h+=l[0],s[l[0]]?d+=s[l[1]]:d+=l[1],r.currentTarget.setAttribute(c(2112),h+`
`+d)})}}}register$1("baseLayerPicker",BaseLayerPicker);class FullscreenButton extends BaseCzmControl{constructor(e={}){const t={_0x2965ab:785},x=_0x2397ca;super(e),this._czmControlKey="_fullscreenButton",this._czmContainerKey=x(t._0x2965ab)}get[_0x2397ca(523)](){const e={_0x2b50ec:3044},t=_0x2397ca;return this.options.parentContainer?this[t(e._0x2b50ec)].parentContainer:this._map.toolbar}_createCzmContainer(){const e={_0x448647:942},t=_0x2397ca,x=create$3("div",t(1059));return x.style.display=t(e._0x448647),x}[_0x2397ca(3497)](){const e=_0x2397ca;return new Cesium__namespace.FullscreenButton(this._container,this[e(3044)].fullscreenElement)}_rebindCzmContainer(e){const t={_0xbc5e1a:1100,_0x1344ca:357},x=_0x2397ca;var i;removeClass(e,x(t._0xbc5e1a)),addClass(e,x(1059)),e[x(t._0x1344ca)].display="inline-block",e.parentNode.removeChild(e);const s=(i=this.viewer.navigationHelpButton)===null||i===void 0?void 0:i._wrapper;s?this.parentContainer.insertBefore(e,s):this.parentContainer.appendChild(e)}_toChineseLang(e){const t={_0x18119e:694},x=_0x2397ca,i={"Full screen":"全屏","Exit full screen":"退出全屏","Full screen unavailable":"全屏不可用"};this._updateDomAttributeByEvent(e,i,"cesium-fullscreenButton","title",x(t._0x18119e))}}register$1("fullscreenButton",FullscreenButton);class GaodePOIGeocoder{constructor(e={}){this.options=e,this.gaodekey=e.key||gaodeArr}getArrayRandomOne(){const e={_0x59f864:3129,_0x4d683d:2027},t=_0x2397ca,x=this.gaodekey,i=Math[t(3927)](Math[t(e._0x59f864)]()*x[t(e._0x4d683d)]+1)-1;return x[i]}geocode(e){const t={_0x5500e5:3733,_0x34018d:3036,_0x32ae5d:1286},x={_0x2c68a2:1330,_0x1414bf:820,_0x20eb8d:3400,_0xf10131:3400,_0x19787f:368},i=_0x2397ca,s=this.getArrayRandomOne(),o=new Cesium__namespace[i(740)]({url:"https://restapi.amap.com/v3/place/text",queryParameters:{count:20,key:s,keywords:e,types:"110000|120000|130000|140000|180000|190000|",...this.options[i(t._0x5500e5)]}}),r=this;return o[i(t._0x34018d)]()[i(t._0x32ae5d)](function(c){const _={_0x289838:2886},l=i;if(c.infocode!=="10000")return logError$1("请求失败("+c[l(x._0x2c68a2)]+")："+c.info),{};if(c[l(1694)].length===0)return logInfo("未查询到“"+e+l(x._0x1414bf)),{};let h=3e3;return r.map[l(x._0x20eb8d)][l(368)][l(3872)]<h&&(h=r.map[l(x._0xf10131)][l(x._0x19787f)].height),c.pois.map(function(d){let m=d[l(_._0x289838)].split(",");return m=gcj2wgs(m),{displayName:d.name,destination:Cesium__namespace.Cartesian3.fromDegrees(m[0],m[1],h)}})})}}class Geocoder extends BaseCzmControl{constructor(e={}){const t={_0x13401c:398},x=_0x2397ca;super(e),this._czmControlKey="_geocoder",this._czmContainerKey=x(t._0x13401c)}get[_0x2397ca(523)](){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}_createCzmContainer(){return create$3("div","cesium-viewer-geocoderContainer")}_createCzmControl(){let e=this.options.service;if(!e){const t=new GaodePOIGeocoder(this.options.geocoderConfig);t.map=this,e=[t]}return new Cesium__namespace.Geocoder({container:this._container,geocoderServices:e,scene:this._map.scene})}_toChineseLang(e){const t=_0x2397ca,x={"Enter an address or landmark...":"请输入地址...","Searching...":"查询中..."};this._updateDomAttribute(e,x,"cesium-geocoder-input",t(816))}}register$1("geocoder",Geocoder);class HomeButton extends BaseCzmControl{constructor(e={}){const t={_0xed4df6:2502,_0x17dfb6:3044,_0xb9cc23:2502},x=_0x2397ca;super(e),this[x(1408)]="_homeButton",this._czmContainerKey="_element",this.options[x(t._0xed4df6)]=this[x(t._0x17dfb6)][x(t._0xb9cc23)]??0}get parentContainer(){const e={_0x188ecb:523},t=_0x2397ca;return this.options.parentContainer?this.options[t(e._0x188ecb)]:this[t(558)][t(805)]}_createCzmControl(){const e={_0x3c90ec:558},t=_0x2397ca;return new Cesium__namespace.HomeButton(this._map.toolbar,this[t(e._0x3c90ec)].scene)}[_0x2397ca(2346)](e){const t=_0x2397ca;this._updateDomAttribute(e,{"View Home":t(307)},"cesium-home-button","title")}}register$1(_0x2397ca(3269),HomeButton);class NavigationHelpButton extends BaseCzmControl{constructor(e={}){const t={_0x5466b7:745,_0x591f1f:3373,_0x19f215:2477},x=_0x2397ca;super(e),this._czmControlKey=x(t._0x5466b7),this[x(t._0x591f1f)]=x(t._0x19f215)}get parentContainer(){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}[_0x2397ca(3497)](){const e={_0x4ca574:639},t=_0x2397ca;let x=!0;try{if(Cesium__namespace[t(e._0x4ca574)](window.localStorage)){const i=window.localStorage[t(1608)]("cesium-hasSeenNavHelp");Cesium__namespace.defined(i)&&i?x=!1:window[t(3289)][t(383)]("cesium-hasSeenNavHelp","true")}}catch{}return new Cesium__namespace[t(3251)]({container:this._map[t(805)],instructionsInitiallyVisible:Cesium__namespace.defaultValue(this.options.navigationInstructionsInitiallyVisible,x)})}[_0x2397ca(2346)](e){const t={_0x299879:2112,_0x1362bb:501,_0x221482:2789},x=_0x2397ca;this[x(2110)](e,{"Navigation Instructions":"帮助"},x(2003),x(t._0x299879));const i={Mouse:"鼠标操作",Touch:"触摸手势","Pan view":"平移视图","Left click + drag":"鼠标左键+拖拽","Zoom view":"缩放视图","Right click + drag, or":"右键+拖拽，或者","Mouse wheel scroll":"中键滚动","Rotate view":x(2141),"Middle click + drag, or":"中键按下拖拽，或者","CTRL + Left/Right click + drag":"按Ctrl键 同时 左/右键拖拽","One finger drag":x(2428),"Two finger pinch":"双指向内或向外滑动","Tilt view":"倾斜视图","Two finger drag, same direction":x(3702),"Two finger drag, opposite direction":"双指按相反方向拖动"};let s=e.getElementsByClassName(x(t._0x1362bb));s.length>0&&(s=s[0],i[s[x(t._0x221482)]]&&(s.innerHTML=s.children[0].outerHTML+i[s[x(t._0x221482)]]));let o=e.getElementsByClassName(x(2236));o.length>0&&(o=o[0],i[o.textContent]&&(o.innerHTML=o.children[0].outerHTML+i[o[x(t._0x221482)]])),this._updateDomInnerHtml(e,i,"cesium-navigation-help-pan"),this._updateDomInnerHtml(e,i,"cesium-navigation-help-details"),this._updateDomInnerHtml(e,i,"cesium-navigation-help-zoom"),this._updateDomInnerHtml(e,i,"cesium-navigation-help-rotate"),this._updateDomInnerHtml(e,i,x(2342))}}register$1("navigationHelpButton",NavigationHelpButton);class ProjectionPicker extends BaseCzmControl{constructor(e={}){const t={_0x553b44:3373,_0x1737ed:2477},x=_0x2397ca;super(e),this._czmControlKey="_projectionPicker",this[x(t._0x553b44)]=x(t._0x1737ed)}get parentContainer(){const e={_0x1d027a:3044},t=_0x2397ca;return this.options[t(523)]?this[t(e._0x1d027a)].parentContainer:this._map.toolbar}[_0x2397ca(3497)](){const e={_0x15097d:558},t=_0x2397ca;return new Cesium__namespace.ProjectionPicker(this._map.toolbar,this[t(e._0x15097d)].scene)}[_0x2397ca(2346)](e){const t={_0x3aa4e2:2112,_0x3d0f99:2112},x=_0x2397ca,i={"Perspective Projection":"透视投影","Orthographic Projection":"正射投影"};this[x(2110)](e,i,"cesium-projectionPicker-buttonPerspective",x(t._0x3aa4e2)),this._updateDomAttribute(e,i,"cesium-projectionPicker-dropDown-icon",x(t._0x3d0f99))}}register$1("projectionPicker",ProjectionPicker);class SceneModePicker extends BaseCzmControl{constructor(e={}){const t={_0x2eefa9:774,_0xd84f73:3373},x=_0x2397ca;super(e),this._czmControlKey=x(t._0x2eefa9),this[x(t._0xd84f73)]="_wrapper"}get parentContainer(){const e={_0x1c69ec:523},t=_0x2397ca;return this.options.parentContainer?this.options[t(e._0x1c69ec)]:this._map[t(805)]}_createCzmControl(){const e=_0x2397ca;return new Cesium__namespace.SceneModePicker(this._map.toolbar,this._map[e(3399)])}_toChineseLang(e){const t=_0x2397ca,x={"2D":"二维视图","3D":t(2644),"Columbus View":"哥伦布2.5D视图"};this._updateDomAttributeByEvent(e,x,"cesium-sceneModePicker-button3D","title","onmouseover"),this._updateDomAttribute(e,x,t(1845),"title")}}register$1("sceneModePicker",SceneModePicker);class Timeline extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_timeline",this._czmContainerKey="container"}[_0x2397ca(3312)](){const e={_0x2266fd:1401},t=_0x2397ca,x=create$3("div","cesium-viewer-timelineContainer");return x.style[t(e._0x2266fd)]="0px",x}[_0x2397ca(3497)](){const e=_0x2397ca;return new Cesium__namespace.Timeline(this._container,this[e(558)].clock)}_addedHook(){const e={_0x47c7eb:2670,_0x2424fc:2325,_0x3bb698:3703,_0x159b91:3452},t={_0x127c02:1373},x=_0x2397ca;super[x(e._0x47c7eb)]();const i=(this.options.maxSpan??1)*10,s=this._czmContrl.zoomTo;this._czmContrl[x(e._0x2424fc)]=function(o,r){const c=x;if(Cesium__namespace.JulianDate.secondsDifference(r,o)>i)return s[c(t._0x127c02)](this)(o,r)},this._czmContrl.addEventListener("settime",this.onTimelineScrubfunction,!1),this._czmContrl.zoomTo(this._map[x(e._0x3bb698)][x(3764)],this._map.clock[x(e._0x159b91)])}[_0x2397ca(1560)](e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1}zoomTo(e,t){return this[_0x2397ca({_0x538e3b:3311}._0x538e3b)].zoomTo(e,t)}[_0x2397ca(380)](){const e={_0x214cdb:2804},t=_0x2397ca;this._czmContrl.removeEventListener(t(e._0x214cdb),this.onTimelineScrubfunction,!1),super._removedHook()}[_0x2397ca(846)](e){const t={_0x11a196:3392},x=_0x2397ca;e.style.right=x(t._0x11a196)}}register$1("timeline",Timeline);class VRButton extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_vrButton",this._czmContainerKey="_container"}get parentContainer(){const e=_0x2397ca;return this.options[e(523)]?this.options.parentContainer:this._map.toolbar}[_0x2397ca(3312)](){return create$3(_0x2397ca(215),"cesium-button cesium-toolbar-button mars3d-vrButton")}_createCzmControl(){const e={_0x181dd0:3728,_0x1b1fe6:785,_0xa7e3f6:558},t=_0x2397ca;return new Cesium__namespace[t(e._0x181dd0)](this[t(e._0x1b1fe6)],this[t(e._0xa7e3f6)].scene,this[t(3044)].fullscreenElement)}_rebindCzmContainer(e){const t={_0x2a46ad:1948,_0x399013:523,_0x484bf0:2598},x=_0x2397ca;var i;removeClass(e,"cesium-viewer-vrContainer"),addClass(e,x(t._0x2a46ad)),e.parentNode.removeChild(e);const s=(i=this.viewer.navigationHelpButton)===null||i===void 0?void 0:i._wrapper;s?this[x(t._0x399013)].insertBefore(e,s):this.parentContainer[x(t._0x484bf0)](e)}_toChineseLang(e){const t={_0x5d5365:3443},x=_0x2397ca,i={"Enter VR mode":"进入VR模式","Exit VR mode":x(3332),"VR mode is unavailable":x(t._0x5d5365)};this._updateDomAttributeByEvent(e,i,"cesium-vrButton","title","onmouseover")}}register$1("vrButton",VRButton);class LocationBar extends BaseControl{constructor(e={}){const t=_0x2397ca;super(e),this.options.cacheTime=this.options.cacheTime??50,this[t(1803)]={}}[_0x2397ca(2645)](){const e={_0x2cb44f:1662,_0xf769a0:3044,_0x1c9985:1662,_0x3edcb5:1662,_0x936388:1510,_0x4dc69d:3137,_0x5a3d27:3044,_0x2fb9f6:3137,_0x5b673d:2050,_0x1cb069:933,_0x561f69:357,_0x3c6b87:357,_0x68c0c:3738,_0x5acc56:1250},t={_0xf97548:3399,_0x8fe5aa:962,_0x1726e9:472},x=_0x2397ca;if(Cesium__namespace.defined(this[x(3044)].template)?Array.isArray(this.options[x(e._0x2cb44f)])?this.template=this[x(e._0xf769a0)].template[this._map.lang]:this.template=this.options[x(e._0x1c9985)]:this[x(e._0x3edcb5)]=x(e._0x936388),Cesium__namespace[x(639)](this.options[x(e._0x4dc69d)])?isString(this[x(e._0x5a3d27)].crs)?this._crs=this[x(3044)].crs:this.options[x(e._0x2fb9f6)]&&(this._crs=CRS[x(e._0x5b673d)]):isString(this.template)&&this.template.indexOf(x(e._0x1cb069))!==-1&&(this._crs=CRS.CGCS2000_GK_Zone_3),this._container=create$3("div","mars3d-locationbar no-print"),this._containerCon=create$3(x(215),"mars3d-locationbar-content",this._container),this.options[x(e._0x561f69)]?this.setStyle(this[x(3044)][x(e._0x3c6b87)]):(this._autoStyle=!0,this[x(261)]()),this[x(e._0x5a3d27)].fps){this._map.scene[x(1250)]=!0;const i=setInterval(()=>{const s=x;if(!this._map||!this._map[s(t._0xf97548)]._performanceDisplay)return;clearInterval(i),this.timeTik=null;const o=this._map[s(571)][s(1093)](".cesium-performanceDisplay");if(o){addClass(o,"mars3d-locationbar-content"),removeClass(o,"cesium-performanceDisplay");const r=o.querySelector(s(2677));remove(r),o.parentNode[s(t._0x8fe5aa)](o),this[s(785)][s(2136)](o,this[s(t._0x1726e9)])}},100);this[x(3738)]=i}else this[x(e._0x68c0c)]&&(clearInterval(this[x(3738)]),this.timeTik=null),this._map.scene[x(e._0x5acc56)]=!1}_addedHook(){const e={_0x239735:2322,_0x2b23d2:261},t=_0x2397ca;this._map.on(EventType.mouseMove,this[t(e._0x239735)],this),this._map.on(EventType.cameraMoveEnd,this[t(4035)],this),this._map.on(EventType.addControl,this[t(e._0x2b23d2)],this),this._map.on(EventType.updateControl,this._updateControlHandler,this),this._cameraHandler()}_removedHook(){const e={_0x556696:558,_0x576219:558,_0x2a8a2e:261,_0x4db618:4007,_0xca4feb:2279},t=_0x2397ca;this[t(e._0x556696)].off(EventType[t(2479)],this._mouseMoveHandler,this),this._map.off(EventType.cameraMoveEnd,this._cameraHandler,this),this[t(e._0x576219)].off(EventType.addControl,this[t(e._0x2a8a2e)],this),this._map.off(EventType.updateControl,this._updateControlHandler,this),this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null),this[t(3044)][t(e._0x4db618)]&&(this._map.scene[t(1250)]=!1,this._map.scene[t(e._0xca4feb)]&&(this._map.scene[t(2279)].destroy(),this._map.scene._performanceDisplay=void 0))}_cameraHandler(){if(!this[_0x2397ca(407)])return;const t=this._map.getCenter();t&&this._templateHtml(t)}_mouseMoveHandler(e){const t={_0x49ef1e:2145},x=_0x2397ca;this.moveTimer&&(clearTimeout(this[x(1166)]),delete this.moveTimer),this[x(1166)]=setTimeout(()=>{const i=x;if(delete this.moveTimer,!this.enabled)return;const s=e.cartesian;s&&this._templateHtml(LngLatPoint[i(t._0x49ef1e)](s))},this.options.cacheTime)}_templateHtml(e){const t={_0x1e048f:3529,_0x3a70ad:227,_0x394361:778,_0x358126:3409,_0x3984ec:1926},x=_0x2397ca;this.locationData.cameraHeight=this._map.camera.positionCartographic.height[x(t._0x1e048f)](LngLatPoint.FormatAltLength),this.locationData.heading=Cesium__namespace.Math.toDegrees(this._map.camera[x(1722)])[x(3529)](0),this.locationData[x(t._0x3a70ad)]=Cesium__namespace.Math[x(t._0x394361)](this._map.camera[x(227)]).toFixed(0),this.locationData.level=this._map.level,this.locationData.alt=formatNum$1(this._map.getRealAlt(e.alt),LngLatPoint.FormatAltLength);const i=this.options.latDecimal??LngLatPoint.FormatLength;if(this[x(1803)][x(t._0x358126)]=e.lng.toFixed(i),this.locationData.lat=e[x(3736)].toFixed(i),this[x(t._0x3984ec)]){const o=this.options.crsDecimal??1,r=proj4Trans([e.lng,e.lat],"EPSG:4326",this._crs);r[0]===e[x(t._0x358126)]?this.locationData.crsx="":this.locationData.crsx=r[0].toFixed(o),r[1]===e.lat?this[x(1803)][x(2462)]="":this.locationData.crsy=r[1].toFixed(o)}let s;typeof this.template=="function"?s=this.template(this.locationData):(this[x(3044)].formatData&&(this.locationData=this.options.formatData(this.locationData)),s=template(this.template,this.locationData)),this._containerCon[x(3437)]=s,this.fire(EventType.change,this.locationData)}_updateControlHandler(e){const t={_0x471798:968},x=_0x2397ca;var i,s;if(this._autoStyle&&(!e||((i=e.control)===null||i===void 0?void 0:i.type)==="animation"||((s=e.control)===null||s===void 0?void 0:s[x(t._0x471798)])==="timeline")){var o,r,c;this.setStyle({left:(o=this._map[x(1090)].animation)!==null&&o!==void 0&&o.show||(r=this._map.controls.clockAnimate)!==null&&r!==void 0&&r.show?"170px":"0",right:"0",bottom:(c=this._map.controls[x(1763)])!==null&&c!==void 0&&c.show?x(3147):"0"})}}}register$1("locationBar",LocationBar);class MouseDownView extends BaseControl{_mountedHook(){const e={_0x127b5a:866},t=_0x2397ca;this._container=create$3("div","mars3d-mousedownview"),this._container.id=this.parentContainerId+"-mars3d-mousedownview",create$3("div",t(e._0x127b5a),this._container)}changeMouseModel(){const e=_0x2397ca;this.isAdded&&(this[e(380)](),this._addedHook())}_addedHook(){const e={_0x225dc8:3635},t=_0x2397ca;isPCBroswer()&&(this._map.on(EventType.wheel,this._mousWheelHandler,this),this._map._hasRightTilt?(this[t(558)].on(EventType.rightDown,this[t(e._0x225dc8)],this),this._map.on(EventType.rightUp,this._mousMiddleUpHandler,this)):(this[t(558)].on(EventType.middleDown,this._mousMiddleDownHandler,this),this._map.on(EventType.middleUp,this._mousMiddleUpHandler,this)),this._mousMiddleUpHandler())}_removedHook(){const e={_0x18b9ad:558,_0x4b5695:2479},t=_0x2397ca;isPCBroswer()&&(this._map[t(3573)](EventType.wheel,this._mousWheelHandler,this),this[t(558)]._hasRightTilt?(this._map.off(EventType[t(3699)],this._mousMiddleDownHandler,this),this[t(e._0x18b9ad)].off(EventType.rightUp,this._mousMiddleUpHandler,this)):(this._map.off(EventType.middleDown,this._mousMiddleDownHandler,this),this._map.off(EventType.middleUp,this._mousMiddleUpHandler,this)),this._map[t(3573)](EventType[t(e._0x4b5695)],this[t(2322)],this),clearTimeout(this.timetik))}_mousWheelHandler(e){this.enabled&&(addClass(this._container,"mars3d-mousedownview-show"),clearTimeout(this.timetik),this.timetik=setTimeout(()=>{removeClass(this._container,"mars3d-mousedownview-show")},200))}[_0x2397ca(3635)](e){const t={_0x1140f0:407,_0x49b805:3830,_0x1882d5:558,_0x65f5e9:2322,_0x23df9a:3526,_0x293ebc:2159},x=_0x2397ca;!this[x(t._0x1140f0)]||!getCurrentMousePosition(this._map.scene,e.position)||this[x(558)].camera.positionCartographic[x(3872)]>this._map.scene[x(t._0x49b805)][x(1317)]||(this[x(t._0x1882d5)][x(3573)](EventType.mouseMove,this[x(t._0x65f5e9)],this),clearTimeout(this.timetik),this[x(785)].style[x(t._0x23df9a)]=e.position.y+"px",this._container.style.left=e.position.x+"px",addClass(this._container,x(t._0x293ebc)))}_mousMiddleUpHandler(e){const t=_0x2397ca;removeClass(this._container,"mars3d-mousedownview-show"),this[t(558)].on(EventType.mouseMove,this._mouseMoveHandler,this)}[_0x2397ca(2322)](e){const t={_0x975fe:785,_0x21439e:4050,_0x4caa53:357,_0x455c13:2937},x=_0x2397ca;this[x(t._0x975fe)].style.top=e[x(t._0x21439e)].y+"px",this[x(785)][x(t._0x4caa53)][x(t._0x455c13)]=e.endPosition.x+"px"}}register$1(_0x2397ca(424),MouseDownView);const icon$7=_0x2397ca(3200),icon$6=_0x2397ca(2222);class Zoom extends BaseControl{get[_0x2397ca(523)](){const e={_0x1f975f:805},t=_0x2397ca;return this._map?this._map[t(e._0x1f975f)]:document.getElementsByClassName("cesium-viewer-toolbar")[0]}[_0x2397ca(446)](e){const t=_0x2397ca;this._container2&&(this[t(3464)].style.display=e?"block":"none")}_mountedHook(){const e={_0x38aa4f:3464},t={_0x2daad5:1642},x={_0x2b1802:558,_0x2b793f:3004},i=_0x2397ca;this._container=create$3("div","cesium-button cesium-toolbar-button mar3d-toolButton"),this._container.style.display="inline-block",this._container.setAttribute("title",this._map.getLangText(i(1858))),this._createIcon(this.options.zoomOutIcon||icon$6,this._container),this._container.addEventListener("click",s=>{const o=i;this[o(407)]&&this[o(x._0x2b1802)][o(x._0x2b793f)](this.options[o(1642)])}),this._container2=create$3("div","cesium-button cesium-toolbar-button mar3d-toolButton"),this._container2.style.display="inline-block",this._container2.setAttribute("title",this._map[i(1337)]("_放大")),this._createIcon(this.options.zoomInIcon||icon$7,this[i(e._0x38aa4f)]),this[i(3464)].addEventListener(i(2031),s=>{const o=i;this.enabled&&this._map[o(1529)](this[o(3044)][o(t._0x2daad5)])})}_addedHook(){const e={_0x13a4fc:523},t=_0x2397ca;this[t(e._0x13a4fc)][t(2136)](this._container2,this[t(785)])}[_0x2397ca(380)](){this.parentContainer.removeChild(this._container2)}}register$1("zoom",Zoom);class ToolButton extends BaseControl{constructor(e={}){const t=_0x2397ca;super(e),this._type=t(673)+getGlobalId()}get parentContainer(){return this._map?this._map.toolbar:document.getElementsByClassName("cesium-viewer-toolbar")[0]}_mountedHook(){const e={_0x386301:785,_0x2524ba:785,_0x1d1f41:2413},t={_0x583b0f:1788,_0x44a700:3044},x=_0x2397ca;this._container=create$3(x(215),"cesium-button cesium-toolbar-button mar3d-toolButton"),this._container.id=this.id,this[x(e._0x386301)].style.display="inline-block",this[x(e._0x2524ba)].setAttribute("title",this[x(3044)].title||""),this._createIcon(this.options.icon,this._container);let i;this._container.addEventListener(x(e._0x1d1f41),s=>{const o=x;this.enabled&&i!==this.id&&(i=this.id,this.options.mouseOver&&this[o(3044)][o(811)](this.options),this[o(t._0x583b0f)](EventType[o(811)],{...this[o(t._0x44a700)]}))}),this._container.addEventListener("mouseout",s=>{const o=x;i=null,this.enabled&&(this.options.mouseOut&&this[o(3044)].mouseOut(this.options),this.fire(EventType.mouseOut,{...this.options}))})}setIcon(e){this.options.icon=e,empty(this._container),this._createIcon(e,this._container)}}register$1("toolButton",ToolButton);const icon$5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="162px" height="162px" viewBox="0 0 162 162" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整四周方向角，双击回正北</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-outer" fill-rule="nonzero">
            <path d="M80.8410544,161.682109 C36.1937731,161.682109 0,125.488336 0,80.8410544 C0,36.1937731 36.1937731,0 80.8410544,0 C125.488336,0 161.682109,36.1937731 161.682109,80.8410544 C161.682109,125.488336 125.488336,161.682109 80.8410544,161.682109 Z M81.1836011,134.620909 C110.696211,134.620909 134.620909,110.696211 134.620909,81.1836011 C134.620909,51.6709916 110.696211,27.7462941 81.1836011,27.7462941 C51.6709916,27.7462941 27.7462941,51.6709916 27.7462941,81.1836011 C27.7462941,110.696211 51.6709916,134.620909 81.1836011,134.620909 Z" id="Oval-108"></path>
            <circle id="Oval-74" fill="#FFFFFF" cx="129.493683" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-3" fill="#FFFFFF" cx="129.493683" cy="35.4566038" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-5" fill="#FFFFFF" cx="30.8318294" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-4" fill="#FFFFFF" cx="30.8318294" cy="35.4566038" r="1.54159147"></circle>
            <polygon id="N" fill="#FFFFFF" points="84.9318072 23.1238721 84.9318072 13.1321362 82.5623385 13.1321362 82.5623385 19.2984646 77.951866 13.1321362 75.7108625 13.1321362 75.7108625 23.1238721 78.0946053 23.1238721 78.0946053 16.9718176 82.6908037 23.1238721"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="143.368007 82.1093476 152.617555 82.1093476 152.617555 81.2993476 143.368007 81.2993476"></polygon>
            <polygon id="Line-Copy-8" fill="#FFFFFF" points="9.24954884 82.1093476 18.4990976 82.1093476 18.4990976 81.2993476 9.24954884 81.2993476"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="81.2993476 143.368007 81.2993476 152.617555 82.1093476 152.617555 82.1093476 143.368007"></polygon>
        </g>
    </g>
</svg>
`,icon$4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整俯仰角</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-inner" fill-rule="nonzero">
            <path d="M8.5,16.5 C4.081722,16.5 0.5,12.918278 0.5,8.5 C0.5,4.081722 4.081722,0.5 8.5,0.5 C12.918278,0.5 16.5,4.081722 16.5,8.5 C16.5,12.918278 12.918278,16.5 8.5,16.5 Z M8.5,15.5 C12.3659932,15.5 15.5,12.3659932 15.5,8.5 C15.5,4.63400675 12.3659932,1.5 8.5,1.5 C4.63400675,1.5 1.5,4.63400675 1.5,8.5 C1.5,12.3659932 4.63400675,15.5 8.5,15.5 Z" id="Oval-96"></path>
            <path d="M9.92599835,7.09066832 C12.7122872,9.87695712 14.3709388,12.5452228 13.4497471,13.4664145 C12.5285555,14.3876061 9.86028979,12.7289545 7.074001,9.94266568 C4.2877122,7.15637688 2.62906055,4.48811119 3.55025221,3.56691953 C4.47144386,2.64572788 7.13970955,4.30437952 9.92599835,7.09066832 Z M9.21889157,7.7977751 C6.92836458,5.50724811 4.52075769,4.01062761 4.25735899,4.27402631 C3.99396029,4.53742501 5.49058078,6.9450319 7.78110778,9.2355589 C10.0716348,11.5260859 12.4792417,13.0227064 12.7426404,12.7593077 C13.0060391,12.495909 11.5094186,10.0883021 9.21889157,7.7977751 Z" id="Oval-96-Copy-2"></path>
            <path d="M9.92599835,9.94266568 C7.13970955,12.7289545 4.47144386,14.3876061 3.55025221,13.4664145 C2.62906055,12.5452228 4.2877122,9.87695712 7.074001,7.09066832 C9.86028979,4.30437952 12.5285555,2.64572788 13.4497471,3.56691953 C14.3709388,4.48811119 12.7122872,7.15637688 9.92599835,9.94266568 Z M9.21889157,9.2355589 C11.5094186,6.9450319 13.0060391,4.53742501 12.7426404,4.27402631 C12.4792417,4.01062761 10.0716348,5.50724811 7.78110778,7.7977751 C5.49058078,10.0883021 3.99396029,12.495909 4.25735899,12.7593077 C4.52075769,13.0227064 6.92836458,11.5260859 9.21889157,9.2355589 Z" id="Oval-96-Copy-3"></path>
            <path d="M15.1464466,1.1464466 L14.3453364,1.94755684 L13.9608692,2.33202401 L14.667976,3.03913077 L15.0524431,2.65466362 L15.8535534,1.8535534 L15.1464466,1.1464466 Z M2.29760014,13.995293 L1.85311902,14.4397742 L1.004311,15.2885822 L1.71141776,15.995689 L2.56022581,15.146881 L3.00470698,14.7023998 L2.29760014,13.995293 Z" id="Line"></path>
            <circle id="Oval-432" cx="16" cy="1" r="1"></circle>
            <circle id="Oval-432-Copy" cx="1" cy="16" r="1"></circle>
        </g>
    </g>
</svg>
`,icon$3=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="53px" height="53px" viewBox="0 0 53 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>导航球</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="compass-rotation-marker">
            <path d="M52.4399986,26.2199993 C52.4399986,11.7390936 40.7009051,0 26.2199993,0 C11.7390936,0 0,11.7390936 0,26.2199993 C0,40.7009051 11.7390936,52.4399986 26.2199993,52.4399986 C40.7009051,52.4399986 52.4399986,40.7009051 52.4399986,26.2199993 Z" id="rotator" stroke-opacity="0.135841259" stroke="#E2A549" stroke-width="9" opacity="0.201434235"></path>
            <path d="M0,26.2199993 C0,11.7390936 11.7390936,0 26.2199993,0 L26.2199993,9 C16.7096563,9 9,16.7096563 9,26.2199993" id="Shape" opacity="0.634561567" fill="#4990E2"></path>
        </g>
    </g>
</svg>
`;function _0x3361(n,e){const t=_0x3c2a();return _0x3361=function(x,i){return x=x-156,t[x]},_0x3361(n,e)}class Compass extends BaseControl{constructor(e={}){super(e),this._orbitCursorAngle=0,this._orbitCursorOpacity=0,this._orbitLastTimestamp=0,this.options.rotation=this.options.rotation??!0}[_0x2397ca(3014)](){const e={_0x1a7f31:3044,_0x4e4a77:3526,_0x4c87d2:659,_0x2cb1c2:3459,_0x1b2e3a:3044,_0x3a3a6c:639},t=_0x2397ca,x={};if(Cesium__namespace.defined(this[t(e._0x1a7f31)].top)&&this.options.top!=="")x[t(e._0x4e4a77)]=this.options.top;else if(Cesium__namespace.defined(this[t(e._0x1a7f31)][t(e._0x4c87d2)])&&this.options.bottom!==""&&(x.bottom=this[t(3044)].bottom,x.bottom==="toolbar")){const s=this[t(558)].toolbar;if(s){const o=s.offsetHeight+40;x.bottom=o+"px",this[t(e._0x2cb1c2)]=s}}Cesium__namespace[t(639)](this.options.left)&&this.options.left!==""?x.left=this[t(e._0x1b2e3a)].left:Cesium__namespace[t(e._0x3a3a6c)](this.options.right)&&this[t(e._0x1b2e3a)].right!==""&&(x.right=this[t(3044)][t(1401)]);let i="";for(const s in x)i+=s+": "+x[s]+";";return i||"top: 10px;right: 10px;"}[_0x2397ca(2645)](){const e={_0x55b030:3044,_0x4da2e7:1429,_0x4674c8:1451,_0x25e5a9:665,_0x5655c4:357,_0x3698be:3657},t={_0x1a1a2e:558},x={_0x50c699:558},i=_0x2397ca;this._container=create$3("div",this[i(e._0x55b030)][i(e._0x4da2e7)]||i(3087)),this._container[i(357)][i(e._0x4674c8)]=this._getCssText(),this[i(e._0x25e5a9)]=parseDom(this.options.outerSvg||icon$5,!0,i(812)),this[i(785)].appendChild(this._container_outer),this._container_inner=parseDom(this.options.innerSvg||icon$4,!0,i(1138)),this[i(785)].appendChild(this._container_inner),this[i(3044)].rotation&&(this._container_rotationArc=parseDom(this.options.rotationArcSvg||icon$3,!0,"mars3d-compass-rotation-arc"),this[i(785)].appendChild(this[i(2959)]),this._container_rotationArc[i(e._0x5655c4)].visibility="hidden"),isPCBroswer()?(this._container[i(2876)]=s=>{this._handleMouseDown(s)},this._container_outer[i(e._0x3698be)]=s=>{const o=i;this[o(558)][o(3400)].setView({orientation:{heading:0}})},this._container_inner.ondblclick=s=>{this[i(x._0x50c699)].flyHome()}):(this._container[i(3203)]=s=>{this[i(1077)](s)},this._container_outer.onclick=s=>{this[i(t._0x1a1a2e)].camera.setView({orientation:{heading:0}})},this._container_inner[i(765)]=s=>{this._map.flyHome()})}setOuterSvg(e){this._container_outer.innerHTML=e}setInnerSvg(e){const t={_0x38e955:3437},x=_0x2397ca;this._container_inner[x(t._0x38e955)]=e}setRotationSvg(e){this._container_rotationArc.innerHTML=e}_addedHook(){const e={_0x565ef5:3818,_0x36a37e:558,_0x4b1113:3521,_0x32c345:3991},t=_0x2397ca;this._map.on(EventType.postRender,this[t(e._0x565ef5)],this),this[t(e._0x36a37e)].on(EventType[t(e._0x4b1113)],this._updateControlHandler,this),this._map.on(EventType[t(e._0x32c345)],this[t(261)],this)}_removedHook(){const e={_0x10c663:3818,_0x1e26d7:3573},t=_0x2397ca;this._map[t(3573)](EventType.postRender,this[t(e._0x10c663)],this),this._map.off(EventType.addControl,this._updateControlHandler,this),this._map[t(e._0x1e26d7)](EventType.addControl,this._updateControlHandler,this),this._map.off(EventType.updateControl,this._updateControlHandler,this)}_updateControlHandler(){const e={_0x59038f:659},t=_0x2397ca;if(this.domToolbar){const x=this.domToolbar.offsetHeight+40;this._container.style[t(e._0x59038f)]=x+"px"}}_postRenderHandler(){const e={_0x2e3379:3400},t=_0x2397ca,x=this[t(558)][t(e._0x2e3379)][t(1722)];this._container_outer&&(this._container_outer.style.cssText=t(788)+x+`rad);
      -webkit-transform : rotate(-`+x+`rad);
      `)}_handleMouseDown(e){const t=_0x2397ca;if(this._map.scene.mode===Cesium__namespace.SceneMode.MORPHING)return!0;this._compassRectangle=e.currentTarget[t(1600)]();const i=this._compassRectangle[t(1526)]/2,s=this._getVector(e),o=Cesium__namespace.Cartesian2.magnitude(s)/i;if(this.options.rotation&&o<50/145)this._orbit(s);else if(o<1)this._rotate(s);else return!0}[_0x2397ca(2450)](e){const t={_0xc29d09:3399,_0x21471b:1721,_0x1f842f:558,_0x4b2d70:610,_0x1188a3:558,_0x3cbf79:3718,_0x1ed123:1110,_0x771451:1943,_0xc561e9:1721,_0x71aa92:358},x=_0x2397ca;let i=new Cesium__namespace.Cartesian3;const s=this._map[x(t._0xc29d09)],o=s.camera;if(s.mode!==Cesium__namespace[x(t._0x21471b)].MORPHING){if(this[x(t._0x1f842f)][x(t._0x4b2d70)])i=this._map.trackedEntity[x(760)].getValue(this[x(t._0x1188a3)].clock[x(t._0x3cbf79)]);else{const r=new Cesium__namespace[x(t._0x1ed123)];r.origin=o.positionWC,r.direction=o[x(t._0x771451)],i=s.globe[x(1008)](r,s)}if(i){if(s.mode===Cesium__namespace.SceneMode.SCENE2D||s.mode===Cesium__namespace[x(t._0xc561e9)].COLUMBUS_VIEW){i=o.worldToCameraCoordinatesPoint(i);const r=new Cesium__namespace.Cartographic;e&&(i=s.globe.ellipsoid[x(2926)](s[x(t._0x71aa92)].unproject(i,r)))}else!e&&(i=o.worldToCameraCoordinatesPoint(i));return i}}}_orbit(e){const t={_0x31a0ad:3400,_0x46b066:3374,_0x292cb2:3114,_0x144a2a:3055,_0x1300a8:3055,_0x49ffd8:1721,_0x2d092f:2450,_0x5df011:1620,_0x1ccde5:1782,_0x2ac687:458,_0x106403:3601},x=_0x2397ca,i=this._map.scene,s=i.screenSpaceCameraController,o=i[x(t._0x31a0ad)];if(!(i.mode===Cesium__namespace.SceneMode[x(2010)]||!s[x(t._0x46b066)])){switch(i.mode){case Cesium__namespace.SceneMode[x(t._0x292cb2)]:if(!s[x(t._0x144a2a)])return;break;case Cesium__namespace[x(1721)].COLUMBUS_VIEW:if(s.enableLook)break;if(!s[x(t._0x1300a8)]||!s.enableTilt)return;break;case Cesium__namespace[x(t._0x49ffd8)].SCENE3D:default:if(s.enableLook)break;if(!s[x(872)]||!s.enableRotate)return;break}if(this._unbindDocumentEvent(),this._mouseMoveHandle=r=>{this._orbitMouseMoveFunction(r)},this[x(2869)]=()=>{this._orbitMouseUpFunction()},this._orbitLastTimestamp=Cesium__namespace.getTimestamp(),this._map[x(610)])this._orbitFrame=void 0,this._orbitIsLook=!1;else{const r=this[x(t._0x2d092f)](!0);r?(this._orbitFrame=Cesium__namespace[x(t._0x5df011)].eastNorthUpToFixedFrame(r,i.globe[x(t._0x1ccde5)]),this._orbitIsLook=!1):(this._orbitFrame=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(o.positionWC,i[x(679)].ellipsoid),this._orbitIsLook=!0)}this[x(2959)].style.visibility="visible",this._container_inner.className+=" compass-inner-active",this[x(t._0x2ac687)](),this._map.on(EventType.clockTick,this[x(t._0x106403)],this),this._updateAngleAndOpacity(e,this._compassRectangle.width)}}[_0x2397ca(3601)](e){const t={_0x5840f9:3090,_0x19b65c:2033,_0x142078:1146,_0x46f585:377,_0x128fed:3683,_0x39cb1f:275},x=_0x2397ca,i=this[x(558)][x(3399)],s=this._map.camera,o=Cesium__namespace[x(1644)](),r=o-this._orbitLastTimestamp,c=(this._orbitCursorOpacity-.5)*2.5/1e3,_=r*c,l=this[x(1739)]+Cesium__namespace.Math.PI_OVER_TWO,h=Math.cos(l)*_,d=Math.sin(l)*_;let u;this._orbitFrame&&(u=Cesium__namespace.Matrix4.clone(s[x(t._0x5840f9)]),s.lookAtTransform(this._orbitFrame)),i[x(t._0x19b65c)]===Cesium__namespace.SceneMode.SCENE2D?s.move(new Cesium__namespace.Cartesian3(h,d,0),Math[x(t._0x142078)](i.canvas.clientWidth,i.canvas.clientHeight)/100*s[x(368)].height*_):this._orbitIsLook?(s[x(t._0x46f585)](Cesium__namespace.Cartesian3[x(3594)],-h),s.look(s.right,-d)):(s.rotateLeft(h),s[x(t._0x128fed)](d)),this[x(t._0x39cb1f)]&&u&&s.lookAtTransform(u),this._orbitLastTimestamp=o}_updateAngleAndOpacity(e,t){const x={_0x599ba6:3173,_0xf103ca:2395,_0x2d9a5c:2323},i=_0x2397ca,s=Math.atan2(-e.y,e.x);this._orbitCursorAngle=Cesium__namespace.Math.zeroToTwoPi(s-Cesium__namespace.Math.PI_OVER_TWO);const o=Cesium__namespace.Cartesian2.magnitude(e),r=t/2,c=Math[i(x._0x599ba6)](o/r,1);this[i(x._0xf103ca)]=.5*c*c+.5,this._container_rotationArc.style[i(1451)]=i(x._0x2d9a5c)+this[i(1739)]+i(3307)+this._orbitCursorOpacity}_orbitMouseMoveFunction(e){const t={_0x336f70:2192},x=_0x2397ca;this._updateAngleAndOpacity(this[x(902)](e),this[x(t._0x336f70)].width)}_orbitMouseUpFunction(){const e={_0x372b4c:2959,_0x42f37a:3271,_0xb29df:1487},t=_0x2397ca;this[t(2425)](),this[t(558)].off(EventType[t(3023)],this._orbitTickFunction,this),this[t(e._0x372b4c)][t(357)][t(e._0x42f37a)]="hidden",this._container_inner.className=this._container_inner.className[t(e._0xb29df)]("compass-inner-active","")}[_0x2397ca(685)](e){const t={_0x126c98:558,_0x4856ea:3400,_0x5328e8:610,_0x55ae52:2450},x=_0x2397ca,i=this[x(t._0x126c98)].scene,s=i[x(t._0x4856ea)],o=i.screenSpaceCameraController;if(i.mode===Cesium__namespace.SceneMode[x(2010)]||i.mode===Cesium__namespace.SceneMode.SCENE2D||!o[x(3374)]||!o[x(1502)]&&(i.mode===Cesium__namespace.SceneMode.COLUMBUS_VIEW||i.mode===Cesium__namespace.SceneMode.SCENE3D&&!o.enableRotate))return;if(this[x(2425)](),this._mouseMoveHandle=c=>{this[x(2129)](c)},this._mouseUpHandle=()=>{this._unbindDocumentEvent()},this._rotateInitialCursorAngle=Math.atan2(-e.y,e.x),this._map[x(t._0x5328e8)])this[x(2492)]=void 0;else{const c=this[x(t._0x55ae52)](!0);!c||i.mode===Cesium__namespace.SceneMode[x(2778)]&&!o.enableLook&&!o.enableTranslate?this._rotateFrame=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(s.positionWC,i.globe.ellipsoid):this[x(2492)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(c,i.globe.ellipsoid)}let r;this._rotateFrame&&(r=Cesium__namespace.Matrix4.clone(s.transform),s[x(1768)](this._rotateFrame)),this._rotateInitialCameraAngle=-s.heading,this._rotateFrame&&r&&s.lookAtTransform(r),this._bindDocumentEvent()}_bindDocumentEvent(){const e={_0x3d2a95:1957},t=_0x2397ca;this._mouseMoveHandle&&(document.addEventListener("mousemove",this._mouseMoveHandle,!1),document.addEventListener("touchmove",this._mouseMoveHandle,!1)),this[t(2869)]&&(document[t(1130)]("mouseup",this._mouseUpHandle,!1),document[t(1130)](t(e._0x3d2a95),this[t(2869)],!1),document.addEventListener("touchcancel",this._mouseUpHandle,!1))}_unbindDocumentEvent(){const e={_0x2cb448:1957},t=_0x2397ca;this._mouseMoveHandle&&(document.removeEventListener("mousemove",this[t(1736)],!1),document.removeEventListener("touchmove",this._mouseMoveHandle,!1),this._mouseMoveHandle=void 0),this._mouseUpHandle&&(document.removeEventListener(t(1439),this._mouseUpHandle,!1),document.removeEventListener(t(e._0x2cb448),this._mouseUpHandle,!1),document.removeEventListener("touchcancel",this[t(2869)],!1),this._mouseUpHandle=void 0)}_rotateMouseMoveFunction(e){const t=_0x2397ca,x=this._map.camera,i=this._getVector(e),s=Math.atan2(-i.y,i.x),o=s-this._rotateInitialCursorAngle,r=Cesium__namespace[t(3876)][t(225)](this._rotateInitialCameraAngle-o);let c;this[t(2492)]&&(c=Cesium__namespace.Matrix4.clone(x.transform),x.lookAtTransform(this._rotateFrame));const _=-x.heading;x[t(1934)](r-_),this[t(2492)]&&c&&x.lookAtTransform(c)}_getVector(e){const t={_0x25a1c7:1170,_0x1f4e11:2027,_0x21d012:3662,_0x319bcb:1170,_0x578cd7:2527},x=_0x2397ca;var i;const s=this[x(2192)],o=new Cesium__namespace.Cartesian2((s.right-s[x(2937)])/2,(s[x(659)]-s[x(3526)])/2);let r=e.clientX,c=e.clientY;((i=e[x(t._0x25a1c7)])===null||i===void 0?void 0:i[x(t._0x1f4e11)])>0&&(r=e[x(1170)][0][x(t._0x21d012)],c=e[x(t._0x319bcb)][0].clientY);const _=new Cesium__namespace[x(518)](r-s.left,c-s.top),l=new Cesium__namespace.Cartesian2;return Cesium__namespace.Cartesian2[x(t._0x578cd7)](_,o,l),l}}register$1("compass",Compass);const geodesic=new Cesium__namespace.EllipsoidGeodesic,BASE=[1,2,3,5],DIS=[...BASE,...BASE.map(n=>n*10),...BASE.map(n=>n*100),...BASE.map(n=>n*1e3),...BASE[_0x2397ca(4014)](n=>n*1e4),...BASE[_0x2397ca(4014)](n=>n*1e5),...BASE.map(n=>n*1e6)];class DistanceLegend extends BaseControl{get distance(){return this[_0x2397ca(3698)]}_mountedHook(){const e={_0x11a13a:785,_0x5e4fed:215,_0x188046:729},t=_0x2397ca;this[t(e._0x11a13a)]=create$3("div","mars3d-distance-legend"),this[t(785)].style.cssText=this._getCssText(),this._labelEl=create$3(t(e._0x5e4fed),"legend-label",this._container),this._scaleBarEl=create$3("div",t(e._0x188046),this[t(e._0x11a13a)]),this._container.style.visibility=t(408),this._lastUpdate=Cesium__namespace.getTimestamp()}_getCssText(){const e={_0x52243c:3526,_0x124cb8:659,_0x3e944f:3044,_0x484fd2:2937,_0x17761f:639,_0x33f406:1401,_0x2ff004:1401,_0x1ca204:1090},t=_0x2397ca;var x;const i={};Cesium__namespace.defined(this[t(3044)].top)&&this.options[t(e._0x52243c)]!==""?i.top=this.options.top:Cesium__namespace.defined(this[t(3044)][t(e._0x124cb8)])&&this[t(3044)].bottom!==""&&(i.bottom=this.options.bottom),Cesium__namespace.defined(this[t(e._0x3e944f)].left)&&this.options[t(2937)]!==""?i[t(e._0x484fd2)]=this.options.left:Cesium__namespace[t(e._0x17761f)](this.options[t(1401)])&&this[t(3044)][t(e._0x33f406)]!==""&&(i[t(e._0x2ff004)]=this.options[t(e._0x2ff004)]);let s="";for(const o in i)s+=o+": "+i[o]+";";return s||"left: 120px; bottom: "+((x=this._map[t(e._0x1ca204)].timeline)!==null&&x!==void 0&&x[t(3482)]?"27":"2")+t(3022)}_addedHook(){const e={_0x17cb98:2702},t=_0x2397ca;this._map.on(EventType[t(e._0x17cb98)],this._updateContent,this)}[_0x2397ca(380)](){const e={_0x170b2c:3573},t=_0x2397ca;this._map[t(e._0x170b2c)](EventType.postRender,this._updateContent,this)}_updateContent(e,t){const x={_0x5eb6a3:966,_0x5b67e0:529,_0x59a2bb:2081,_0x2f183a:365,_0x3b1034:679,_0x362ae2:365,_0x2c40e2:2027,_0x2dc062:1788,_0x16a75f:4025,_0xb23be0:1596},i=_0x2397ca,s=Cesium__namespace.getTimestamp();if(s<this._lastUpdate+250||!this[i(x._0x5eb6a3)]||!this[i(x._0x5b67e0)])return;this._lastUpdate=s;const o=e[i(1733)].clientWidth,r=e.canvas.clientHeight,c=e.camera.getPickRay(new Cesium__namespace.Cartesian2(o/2|0,r-1)),_=e.camera[i(x._0x59a2bb)](new Cesium__namespace.Cartesian2(1+o/2|0,r-1)),l=e.globe.pick(c,e),h=e[i(679)].pick(_,e);if(!l||!h)return;geodesic.setEndPoints(e.globe.ellipsoid[i(x._0x2f183a)](l),e[i(x._0x3b1034)].ellipsoid[i(x._0x362ae2)](h));const d=geodesic.surfaceDistance,u=100;let m=0;for(let f=DIS[i(x._0x2c40e2)]-1;f>=0;--f)if(DIS[f]/d<u){m=DIS[f];break}if(m){this._currDistance!==m&&(this._currDistance=m,this[i(x._0x2dc062)](EventType.change,{distance:m})),this._container[i(357)].visibility=i(x._0x16a75f),this._labelEl[i(3437)]=m>=1e3?m/1e3+" km":m+" m";const f=m/d|0;this._scaleBarEl[i(357)].cssText=i(x._0xb23be0)+f+"px; left: "+(125-f)/2+"px;"}}}register$1("distanceLegend",DistanceLegend);const icon$2=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="10px" height="20px" viewBox="0 0 19 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M0.6551724,2.3448276 L0.6551724,25.6551724 C0.6551724,26.6454761 1.4579722,27.4482759 2.4482759,27.4482759 C3.4385796,27.4482759 4.2413793,26.6454761 4.2413793,25.6551724 L4.2413793,2.3448276 C4.2413793,1.3545239 3.4385796,0.5517241 2.4482759,0.5517241 C1.4579722,0.5517241 0.6551724,1.3545239 0.6551724,2.3448276 L0.6551724,2.3448276 Z M7.6551724,2.3448276 L7.6551724,25.6551724 C7.6551724,26.6454761 8.4579722,27.4482759 9.4482759,27.4482759 C10.4385796,27.4482759 11.2413793,26.6454761 11.2413793,25.6551724 L11.2413793,2.3448276 C11.2413793,1.3545239 10.4385796,0.5517241 9.4482759,0.5517241 C8.4579722,0.5517241 7.6551724,1.3545239 7.6551724,2.3448276 L7.6551724,2.3448276 Z M14.6551724,2.3448276 L14.6551724,25.6551724 C14.6551724,26.6454761 15.4579722,27.4482759 16.4482759,27.4482759 C17.4385796,27.4482759 18.2413793,26.6454761 18.2413793,25.6551724 L18.2413793,2.3448276 C18.2413793,1.3545239 17.4385796,0.5517241 16.4482759,0.5517241 C15.4579722,0.5517241 14.6551724,1.3545239 14.6551724,2.3448276 L14.6551724,2.3448276 Z" id="splitter"></path>
</svg>
`;class MapSplit extends BaseControl{get type(){return"mapSplit"}get leftLayer(){return this[_0x2397ca({_0x1604c:3187}._0x1604c)]}set leftLayer(e){const t={_0x31428d:3214,_0x28aa44:2760},x=_0x2397ca;this._leftLayer&&(this._leftLayer[x(1255)](i=>{const s=x;i._hasRemoveByMapSplit&&i[s(2689)]()}),this._leftLayer=null),e&&(!Array.isArray(e)&&(e=[e]),this._leftLayer=[],e.forEach(i=>{const s=x;i=this.setLayerSplitDirection(i,Cesium__namespace[s(t._0x31428d)][s(t._0x28aa44)]),this._leftLayer.push(i)}))}get rightLayer(){return this._rightLayer}set rightLayer(e){const t={_0x1264c3:1255},x={_0x3c3a54:3214,_0xd39d8e:1124,_0x4f22f2:2434},i={_0x124a90:1575},s=_0x2397ca;this._rightLayer&&(this._rightLayer.forEach(o=>{o[_0x3361(i._0x124a90)]&&o.remove()}),this._rightLayer=null),e&&(!Array.isArray(e)&&(e=[e]),this._rightLayer=[],e[s(t._0x1264c3)](o=>{const r=s;o=this.setLayerSplitDirection(o,Cesium__namespace[r(x._0x3c3a54)].RIGHT),this[r(x._0xd39d8e)][r(x._0x4f22f2)](o)}))}_mountedHook(){const e={_0x3a444a:616,_0x46c843:663,_0xbd6d9f:663,_0x1798f3:1591,_0x3013dc:1609},t={_0x419daf:1412},x={_0xd2d60c:1412},i=_0x2397ca;this._container=create$3("div",i(e._0x3a444a));const s=parseDom(icon$2,!0,i(3956));this._container.appendChild(s);const o=new Cesium__namespace.ScreenSpaceEventHandler(s),r=this;o.setInputAction(()=>{const c=i;r[c(1412)]=!0},Cesium__namespace[i(e._0x46c843)].LEFT_DOWN),o.setInputAction(()=>{const c=i;r[c(x._0xd2d60c)]=!0},Cesium__namespace[i(e._0xbd6d9f)].PINCH_START),o.setInputAction(c=>{r._moveHandler(c)},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction(c=>{r._moveHandler(c)},Cesium__namespace.ScreenSpaceEventType[i(e._0x1798f3)]),o.setInputAction(()=>{const c=i;r[c(t._0x419daf)]=!1},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),o[i(e._0x3013dc)](()=>{const c=i;r[c(1412)]=!1},Cesium__namespace.ScreenSpaceEventType.PINCH_END)}_addedHook(){const e={_0x24bf7a:193,_0x65c86a:1811,_0x3d5a78:3044},t=_0x2397ca;this._map.scene.splitPosition=.5,this._container.style.left=t(e._0x24bf7a),this[t(e._0x65c86a)](),this.options.leftLayer&&(this.leftLayer=this.options.leftLayer),this[t(e._0x3d5a78)].rightLayer&&(this.rightLayer=this[t(3044)].rightLayer)}[_0x2397ca(380)](){const e={_0x357f12:3399},t=_0x2397ca;this._map[t(e._0x357f12)].splitPosition=0,this.leftLayer=null,this.rightLayer=null}[_0x2397ca(1811)](e){const t={_0x29251c:2937,_0x2533f8:558,_0x3441ab:2479},x=_0x2397ca;if(!this[x(1412)]||!this.enabled)return;const i=e?e.endPosition.x:0,s=(this._container.offsetLeft-15+i)/this._container.parentElement.offsetWidth;s<0||s>1||(this._container.style[x(t._0x29251c)]=100*s+"%",this[x(t._0x2533f8)][x(3399)].splitPosition=s,this.fire(EventType[x(t._0x3441ab)],{splitPosition:s}))}[_0x2397ca(594)](e,t){const x={_0x29d1bf:3401,_0x2f561f:1171},i=_0x2397ca;return!e[i(x._0x29d1bf)]&&this._map&&(e.type&&!e._onAdd&&(e=create$2(e)),this[i(558)].addLayer(e),e._hasRemoveByMapSplit=!0),e[i(x._0x2f561f)][i(1286)](s=>{const o=i;if(s.hasChildLayer)for(let r=0;r<s.arrLayer.length;r++){const c=s.arrLayer[r].layer;c&&(c.splitDirection=t)}else{const r=s[o(2407)];r&&(r.splitDirection=t)}}),e}}register$1(_0x2397ca(1477),MapSplit);class SceneEvent{constructor(e){const t={_0x1c8386:558,_0x224f8e:279,_0x25c9f2:3703},x=_0x2397ca;this[x(t._0x1c8386)]=e,this._camera=e.camera,this[x(t._0x224f8e)]=e[x(3399)],this._globe=e.scene.globe,this._clock=e[x(t._0x25c9f2)]}_getEventByType(e){const t={_0x4e510b:3784,_0x4b5596:279,_0x399e84:512,_0x1c9c38:1843},x=_0x2397ca;switch(e){case EventType[x(1861)]:return this._camera.moveStart;case EventType.cameraMoveEnd:return this._camera.moveEnd;case EventType[x(t._0x4e510b)]:return this[x(1405)].changed;case EventType.preUpdate:return this[x(t._0x4b5596)][x(t._0x399e84)];case EventType[x(283)]:return this._scene.postUpdate;case EventType.preRender:return this._scene.preRender;case EventType.postRender:return this._scene.postRender;case EventType[x(1843)]:return this._scene[x(t._0x1c9c38)];case EventType[x(318)]:return this._scene.morphStart;case EventType.morphComplete:return this[x(279)].morphComplete;case EventType[x(3023)]:return this._clock.onTick;case EventType.clockStop:return this._clock.onStop;case EventType[x(3757)]:return this[x(1083)].terrainProviderChanged;case EventType.tileLoadProgress:return this._globe.tileLoadProgressEvent;default:return null}}hasType(e){return!!this[_0x2397ca({_0x9ad585:306}._0x9ad585)](e)}on(e,t,x){if(!t)return;const i=this._getEventByType(e);if(i)return i.addEventListener(t,x||this)}off(e,t,x){const i=this._getEventByType(e);if(i)return i.removeEventListener(t,x||this)}listens(e){const t=_0x2397ca,x=this[t(306)](e);if(!x||x[t(328)]===0)return!1;for(let i=0;i<x._scopes.length;i++)if(x._scopes[i]===this._map)return!0;return!1}}const DEF_OPTIONS={enabledMoveTarget:!0,moveDelay:30,pickWidth:4,pickHeight:4,pickLimit:9};class MouseEvent{constructor(e,t={}){const x={_0x39c34c:1795},i=_0x2397ca;t={...DEF_OPTIONS,...t},this._map=e,this[i(1682)]=e[i(x._0x39c34c)],this[i(3044)]=t,this.moveDelay=t.moveDelay,this._enabledMoveTarget=t.enabledMoveTarget,this._selected=void 0,this._setInputAction()}get enabledMoveTarget(){return this._enabledMoveTarget}set[_0x2397ca(1456)](e){this._enabledMoveTarget=e,this.clearMoveTargetDelay()}get[_0x2397ca(1352)](){return this._noPickEntity}set[_0x2397ca(1352)](e){this._noPickEntity=e}setOptions(e){const t=_0x2397ca;return!e||Object.keys(e)[t(2027)]===0?this:(this.options=merge(this[t(3044)],e),this.moveDelay=this.options.moveDelay,this._enabledMoveTarget=this.options.enabledMoveTarget,this)}clearMoveTargetDelay(){const e=_0x2397ca;this._moveDelayTik&&(clearTimeout(this._moveDelayTik),this[e(3544)]=null)}[_0x2397ca(3247)](){const e={_0x58bdec:663,_0x3a966a:2297,_0x21b3a3:1609,_0x37b7c2:1609,_0x1eac33:1909,_0x424596:663,_0xd77c97:2787},t={_0x19b9ac:1788},x={_0x15da3e:2102},i={_0x40b31b:939},s={_0x3ae897:631},o={_0x4aff2c:1497,_0x51b458:1878,_0x40f395:2322,_0x1e68b3:2479},r={_0x4a455e:2259},c=_0x2397ca;this.handler=new Cesium__namespace[c(3714)](this._viewer.canvas),this.handler.setInputAction(_=>{this._clickHandler(_)},Cesium__namespace[c(e._0x58bdec)][c(e._0x3a966a)]),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,EventType[l(629)])},Cesium__namespace[c(e._0x58bdec)].LEFT_DOUBLE_CLICK),this[c(1909)][c(e._0x21b3a3)](_=>{const l=c;this[l(r._0x4a455e)](_,[EventType.leftDown,EventType[l(631)]])},Cesium__namespace[c(663)].LEFT_DOWN),this.handler.setInputAction(_=>{this._globeMouseHandler(_,[EventType.leftUp,EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),this.handler[c(e._0x37b7c2)](_=>{const l={_0x3c166d:2322},h=c,d=_.endPosition;_.windowPosition=d;const u=this;Object.defineProperty(_,"cartesian",{configurable:!0,get(){return this._cartesian||getCurrentMousePosition(u._viewer.scene,d,u.noPickEntity)},set(m){this._cartesian=m}}),_[h(o._0x4aff2c)]=!0,this.enabledMoveTarget&&(this.clearMoveTargetDelay(),this[h(1878)]>0?this._moveDelayTik=setTimeout(m=>{const f=h;this._moveDelayTik=null,this[f(l._0x3c166d)](_)},this[h(o._0x51b458)]):this[h(o._0x40f395)](_)),this._map.fire(EventType[h(o._0x1e68b3)],_)},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE),this[c(e._0x1eac33)][c(1609)](_=>{this._map.fire(EventType.wheel,_)},Cesium__namespace.ScreenSpaceEventType.WHEEL),this.handler.setInputAction(_=>{this[c(2259)](_,EventType.rightClick)},Cesium__namespace.ScreenSpaceEventType.RIGHT_CLICK),this.handler.setInputAction(_=>{this._globeMouseHandler(_,[EventType.rightDown,EventType.mouseDown])},Cesium__namespace[c(e._0x58bdec)][c(3756)]),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType[l(903)],EventType[l(1299)]])},Cesium__namespace[c(663)].RIGHT_UP),this.handler.setInputAction(_=>{this._globeMouseHandler(_,EventType.middleClick)},Cesium__namespace.ScreenSpaceEventType.MIDDLE_CLICK),this.handler[c(1609)](_=>{const l=c;this._globeMouseHandler(_,[EventType.middleDown,EventType[l(s._0x3ae897)]])},Cesium__namespace.ScreenSpaceEventType.MIDDLE_DOWN),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType[l(i._0x40b31b)],EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType.MIDDLE_UP),this[c(1909)][c(e._0x21b3a3)](_=>{const l=c;this._globeMouseHandler(_,EventType[l(x._0x15da3e)])},Cesium__namespace[c(e._0x424596)].PINCH_START),this[c(1909)].setInputAction(_=>{this._globeMouseHandler(_,EventType.pinchEnd)},Cesium__namespace.ScreenSpaceEventType.PINCH_END),this[c(1909)].setInputAction(_=>{const l=c;this[l(558)][l(t._0x19b9ac)](EventType.pinchMove,_)},Cesium__namespace.ScreenSpaceEventType.PINCH_MOVE),this[c(558)].canvas.addEventListener("keydown",this[c(e._0xd77c97)].bind(this)),this._map.canvas.addEventListener("keyup",this._onKeyUp[c(1373)](this)),this._map.canvas.addEventListener(c(2413),this._onMouseOver.bind(this)),this[c(558)].canvas.addEventListener("mouseout",this._onMouseOut.bind(this))}_onMouseOver(e){const t={_0x14bd59:811},x=_0x2397ca;this._map.fire(EventType[x(t._0x14bd59)],{mouseEvent:e})}_onMouseOut(e){const t=_0x2397ca;this._map[t(1788)](EventType.mouseOut,{mouseEvent:e})}_onKeyDown(e){const t={_0x37e9c5:2837,_0x41fc85:3763},x=_0x2397ca;this._map.fire(EventType.keydown,{mouseEvent:e,ctrlKey:e[x(1530)],altKey:e[x(t._0x37e9c5)],metaKey:e[x(434)],shiftKey:e[x(t._0x41fc85)],code:e.code,key:e.key,keyCode:e.keyCode})}[_0x2397ca(2530)](e){const t={_0x18a3de:558,_0x4c2f90:3677},x=_0x2397ca;this[x(t._0x18a3de)].fire(EventType.keyup,{mouseEvent:e,ctrlKey:e[x(1530)],altKey:e[x(2837)],metaKey:e.metaKey,shiftKey:e.shiftKey,code:e.code,key:e[x(t._0x4c2f90)],keyCode:e.keyCode})}getPickTarget(e,t){const x={_0x3a1721:2835,_0x4fc45d:3399,_0x27ff00:1682,_0x3b778a:3044,_0x34c559:1533,_0x5ceeec:2996,_0x54877e:641,_0x5b808e:1352},i=_0x2397ca;if(t!=null&&t.graphic)return t;let s;try{s=this._viewer.scene.pick(e,this.options.pickWidth,this.options.pickHeight)}catch{}if(this._lastPickedInfo&&s&&this._lastPickedInfo[i(x._0x3a1721)]===s){let h=t==null?void 0:t.cartesian;if(!h){var o,r;if(((o=this._lastPickedInfo)===null||o===void 0||(r=o[i(2407)])===null||r===void 0?void 0:r[i(968)])===i(779)){const d=this[i(1682)].scene.onlyPickModelPosition;this._viewer[i(3399)].onlyPickModelPosition=!0,h=getCurrentMousePosition(this._viewer[i(x._0x4fc45d)],e,this.noPickEntity),this[i(x._0x27ff00)][i(3399)].onlyPickModelPosition=d}else h=getCurrentMousePosition(this._viewer[i(3399)],e,this.noPickEntity)}return{...t,...this._lastPickedInfo,cartesian:h,windowPosition:e}}let c=this._getTargetInfo(s,e);if(s&&this[i(2035)](c)){const h=this._viewer.scene.drillPick(e,this.options.pickLimit,this[i(x._0x3b778a)][i(x._0x34c559)],this.options.pickHeight),d=[];if(h&&h.length>0)for(let u=0,m=h.length;u<m;u++){const f=h[u];if(s===f){var _;d.push((_=c)===null||_===void 0?void 0:_[i(2996)]);continue}const g=this._getTargetInfo(f,e);if(d.push(g==null?void 0:g[i(x._0x5ceeec)]),!(this._allowDrillPick(g)&&u!==m-1)){c=g,c.pickedObjects=h,c[i(2300)]=d;break}}}else this._lastPickedInfo=c;let l=t==null?void 0:t[i(x._0x54877e)];return!l&&(l=getCurrentMousePosition(this[i(1682)][i(3399)],e,this[i(x._0x5b808e)])),{...t,...c,cartesian:l,windowPosition:e}}[_0x2397ca(2035)](e){const t=_0x2397ca;var x,i;let s=(x=e[t(2996)])===null||x===void 0?void 0:x.allowDrillPick;return s||(s=(i=e.layer)===null||i===void 0?void 0:i[t(1932)],s)?isFunction(s)?s(e):!0:!1}_getTargetInfo(e,t){const x={_0x525fc5:2991,_0x953c84:750,_0x3a799e:1682,_0x196095:983,_0x41ece3:156},i={_0xdd8f44:3051,_0x556860:2407},s=_0x2397ca;var o,r;if(!Cesium__namespace[s(639)](e))return{};let c,_,l,h;if(Cesium__namespace.defined(e.id)&&e.id instanceof Cesium__namespace.Entity)c=e.id,h=c.id;else if(e instanceof Cesium__namespace.Cesium3DTileFeature){c=e,h=s(x._0x525fc5)+e._batchId;const g=e.tileset;_=this._map.getLayerById(g._mars3d_layerId),l={attr:get3DTileFeatureAttr(e),feature:e}}else if(e.content&&e.content instanceof(Cesium__namespace.PointCloud3DTileContent||Cesium__namespace.PointCloud)){var d,u;c=e.content,h="3dtile_pnts_"+((d=e.content)===null||d===void 0||(u=d[s(x._0x953c84)])===null||u===void 0?void 0:u.key)||0;const g=e.primitive;_=this._map.getLayerById(g._mars3d_layerId),e.batchTable}else if((o=e.content)!==null&&o!==void 0&&(r=o.tile)!==null&&r!==void 0&&r.i3sNode){const g=e[s(953)].tile.i3sNode,b=this[s(x._0x3a799e)][s(3399)].pickPosition(t);b&&(l={attr:g[s(1235)]().then(function(){return g.getFieldsForPickedPosition(b)}),feature:g}),c=g,h="i3s_"+g._nodeIndex||0,_=this._map.getLayerById(g._dataProvider._mars3d_layerId)}else Cesium__namespace[s(639)](e.primitive)?(c=e[s(957)],h=e.id):logInfo("getPickTarget:拾取到了对象，请确认是否要做处理",e);if(c&&(_=_||this._map.getLayerById(c._mars3d_layerId),_&&_.getGraphicById))if(l=l||_[s(1976)](c[s(x._0x196095)]),l){if(h=l.id,l.getPickedObject){const g=e.id||e.instanceId;if(g){var m;h=g,e.data=l.getPickedObject(g),l.attr=(m=e[s(2069)])===null||m===void 0?void 0:m.attr}}}else{var f;(f=c)!==null&&f!==void 0&&f[s(x._0x41ece3)]&&(l=c[s(x._0x41ece3)])}return{id:h,pickedObject:e,sourceTarget:c,czmObject:c,layer:_,graphic:l,hasClickEvent:function(){const g=s;if(this.graphic&&(isFunction(this.graphic[g(i._0xdd8f44)])&&this.graphic[g(i._0xdd8f44)](EventType.click)||isFunction(this[g(2996)].hasPopup)&&l.hasPopup()))return!0;if(this.layer){var b;if(isFunction(this[g(2407)][g(3051)])&&this.layer.listens(EventType.click)||isFunction(this[g(i._0x556860)].hasPopup)&&(b=_)!==null&&b!==void 0&&b.hasPopup())return!0}return!1}}}getPicked(e){const t={_0xf29441:2835,_0x4bed74:2871,_0x5b9eaa:2871,_0x37d42f:957,_0x34d4fb:1222},x=_0x2397ca;if(!e||!e[x(t._0xf29441)])return;const i=e.pickedObject,s=e[x(3735)];if(s instanceof Cesium__namespace.Entity){const h=i.primitive._pickIds;if((h==null?void 0:h.length)>0)return h[x(2240)](u=>u.object===i)}else if(s instanceof Cesium__namespace[x(2421)]){if(i[x(t._0x4bed74)])return i[x(t._0x5b9eaa)]}else if(i.content&&i.content instanceof(Cesium__namespace.PointCloud3DTileContent||Cesium__namespace[x(842)])){var o;return(o=i.content)===null||o===void 0?void 0:o._pickId}else{var r,c;if(i.primitive.pickId)return i[x(t._0x37d42f)].pickId;if(i[x(t._0x37d42f)]._pickIds)return i.primitive._pickIds;if((r=i[x(953)])!==null&&r!==void 0&&(c=r._model)!==null&&c!==void 0&&c._pickIds){var _,l;return(_=i.content)===null||_===void 0||(l=_[x(t._0x34d4fb)])===null||l===void 0?void 0:l[x(959)]}}}pickImageryLayerFeatures(e){const t=_0x2397ca,x=LngLatPoint.toCartesian(e),i=Cesium__namespace[t(3350)].wgs84ToWindowCoordinates(this._viewer.scene,x);return this._pickImageryLayerFeatures(i,{cartesian:x})}_pickImageryLayerFeatures(e,t){const x={_0x16ce9b:1286},i=_0x2397ca,s=this._viewer.scene,o=s.camera.getPickRay(e),r=s.imageryLayers.pickImageryLayerFeatures(o,s);return r&&r.then?r[i(x._0x16ce9b)](c=>this._clickTileGraphic(c,e,t==null?void 0:t.cartesian)):Promise.resolve()}_clickTileGraphic(e,t,x){const i={_0x58fe19:479,_0x354c88:2027,_0x383f4d:2918,_0x3cf35f:2996,_0x3ba745:3910,_0x5bdfbc:3044,_0x336ca8:1788},s=_0x2397ca;var o,r,c;if(!Cesium__namespace.defined(e)||e.length===0)return;let _=e[0];const l=_[s(2086)],h=this._map.getLayerById(l._mars3d_layerId);if(h&&(o=h.options)!==null&&o!==void 0&&o[s(i._0x58fe19)]){var d;const y=h[s(3044)].featureIndex;((d=h[s(3044)])===null||d===void 0?void 0:d.featureIndex)===s(1568)?_=e[e[s(i._0x354c88)]-1]:isNumber(y)?_=e[y]||_:isFunction(y)&&(_=y(e)||_)}const u={sourceTarget:l,layer:h,features:e,attr:_.properties||((r=_.data)===null||r===void 0?void 0:r[s(263)]),cartesian:x,windowPosition:t};if(_.data&&h&&((c=h.options)!==null&&c!==void 0&&c.highlight||h.listens(EventType[s(2031)])))if(h.options[s(i._0x383f4d)]){const y=h.options.featureToGraphic(_,u);if(y){var m;Array[s(4056)](y)?(u[s(2996)]=y.length>0?y[0]:null,u.graphics=y):(u.graphic=y,u.graphics=[y]),(m=u.graphic)!==null&&m!==void 0&&m.attr&&(u[s(1578)]=u[s(i._0x3cf35f)][s(1578)])}}else{const y=h.options[s(422)]??5e3;let C=!0;if(isBoolean(y))C=y;else if(isNumber(y)){var f;C=JSON.stringify(((f=_.data)===null||f===void 0?void 0:f[s(i._0x3ba745)])||{}).length<y}else isFunction(y)&&(C=y(_));if(C){var g;const v=h==null||(g=h[s(i._0x5bdfbc)])===null||g===void 0?void 0:g.highlight,M=geoJsonToGraphics(_.data,{type:v==null?void 0:v.type,crs:_[s(3137)]||(h==null?void 0:h.crs),style:v});u[s(2996)]=M.length>0?M[0]:null,u.graphics=M}else{var b;logInfo("_clickTileGraphic: 当前数据太大，避免卡顿未进行解析，如需展示矢量对象，请在图层配置加 hasToGraphic:true 参数 ",h==null?void 0:h.options,(b=_[s(2069)])===null||b===void 0?void 0:b[s(i._0x3ba745)])}}return h&&h[s(1788)](EventType.click,u,!1),this._map[s(i._0x336ca8)](EventType[s(3995)],u),u}_clickHandler(e){const t={_0x2f2723:760,_0x2e9e73:1186,_0x10de25:2068,_0xa28e2:1788},x=_0x2397ca;if(!e||!e.position)return!1;const i=e[x(t._0x2f2723)],s=this.getPickTarget(i,e);if(this._map[x(1212)](s),s.sourceTarget){var o;this[x(3517)](EventType[x(2031)],s),this[x(558)].fire(EventType[x(t._0x2e9e73)],s),(o=s.layer)!==null&&o!==void 0&&o.allowDrillPick&&this[x(t._0x10de25)](i,s)}else this._map[x(1788)](EventType[x(2031)],s),this._map[x(t._0xa28e2)](EventType.clickMap,s),this._pickImageryLayerFeatures(i,s)}_mouseMoveHandler(e){const t={_0x55663a:1228,_0x5a2dc0:2469,_0xefc68a:1788},x=_0x2397ca;if(!e||!e.endPosition)return!1;const i=e.endPosition,s=this[x(t._0x55663a)](i,e),o=s[x(t._0x5a2dc0)];o&&!o.noMouseMove?this[x(329)](s):this[x(359)](),this._map[x(t._0xefc68a)](EventType.mouseMoveTarget,{czmObject:o,...e,...s})}activateMouseOver(e){const t={_0x502439:1148,_0x17508f:2996,_0xa354a9:558,_0x4cca66:811},x=_0x2397ca;if(!(this._lastMouseOverItem&&e.id&&e.id===this[x(1547)].id)){if(this.activateMouseOut(),e.hasClickEvent&&e.hasClickEvent()){var i,s;let o=x(t._0x502439);(i=e[x(2996)])!==null&&i!==void 0&&(s=i.style)!==null&&s!==void 0&&s.cursorCSS&&(o=e[x(t._0x17508f)].style.cursorCSS),this[x(t._0xa354a9)].container.style.cursor=o}this.fireTargetEvent(EventType[x(t._0x4cca66)],e),this._lastMouseOverItem=e}}activateMouseOut(){const e={_0x107745:3152},t=_0x2397ca;this._lastMouseOverItem!=null&&(this._map._setEditCursor(!1),this.fireTargetEvent(EventType[t(e._0x107745)],this._lastMouseOverItem),this._lastMouseOverItem=null)}_globeMouseHandler(e,t){const x={_0x37b816:1788},i=_0x2397ca;if(!e||!e.position)return!1;const s=e.position,o=this.getPickTarget(s,e);Array.isArray(t)?t.forEach(r=>{const c=_0x3361;o.sourceTarget?this.fireTargetEvent(r,o):this._map[c(x._0x37b816)](r,o)}):o.sourceTarget?this[i(3517)](t,o):this._map.fire(t,o)}fireTargetEvent(e,t){const x={_0x1ac7b1:1026},i=_0x2397ca;var s,o,r;const c=t.sourceTarget[e];c&&typeof c===i(x._0x1ac7b1)&&c(t),(s=t[i(3735)].eventTarget)===null||s===void 0||s.fire(e,t),(o=t.graphic)!==null&&o!==void 0&&o.fire?t[i(2996)].fire(e,t,!0):(r=t.layer)!==null&&r!==void 0&&r.fire?t[i(2407)].fire(e,t,!0):this._map[i(1788)](e,t)}destroy(){const e={_0x588fb7:1067},t=_0x2397ca;!this._graphicLayer&&(this._map.removeLayer(this._graphicLayer,!0),delete this._graphicLayer),this[t(1909)][t(2941)](),delete this[t(1909)],this._map[t(1733)].removeEventListener(t(2653),this._onKeyDown),this._map.canvas[t(e._0x588fb7)]("keyup",this._onKeyUp)}}new Cesium__namespace.Cartographic;const rayScratch=new Cesium__namespace[_0x2397ca(1110)],cartesian3Scratch=new Cesium__namespace[_0x2397ca(295)];class ZoomNavigation{constructor(e){const t=_0x2397ca;this[t(1795)]=e}zoomIn(e=2,t){return e=1/e,this.zoom(e,t)}zoomOut(e=2,t){return this[_0x2397ca({_0x592b02:1488}._0x592b02)](e,t)}zoom(e,t){const x={_0x1162b1:3400,_0x583b94:1721,_0x1e90dc:3114,_0x2caead:2135,_0x4c7dfd:3004,_0x3b79b7:1795,_0x1152d8:2165,_0x6ce4c6:1008,_0x329457:295,_0x8cb68b:3496,_0x54ebed:3496,_0x21440:2580,_0x5b438e:3552,_0x54fd46:2275,_0x8e2bc8:610,_0x4fa73b:2033},i=_0x2397ca,s=this.viewer.scene,o=s.screenSpaceCameraController;if(!t&&(!o.enableInputs||!o[i(2396)]))return!1;const r=s[i(x._0x1162b1)];let c;switch(s.mode){case Cesium__namespace.SceneMode.COLUMBUS_VIEW:case Cesium__namespace[i(x._0x583b94)].MORPHING:case Cesium__namespace.SceneMode[i(x._0x1e90dc)]:{const _=r.positionCartographic.height*(1-e);r.zoomIn(_);const l=o.minimumZoomDistance,h=o[i(x._0x2caead)],d=r.positionCartographic.height;if(d<l)return r[i(3004)](_),!1;if(d<o[i(3552)]){const u=o[i(279)].globeHeight;if(Cesium__namespace.defined(u)&&d<=u+l)return r[i(x._0x4c7dfd)](_),!1}return h&&d>h?(r.zoomOut(_),!1):!0}default:{let _;if(Cesium__namespace.defined(this[i(x._0x3b79b7)][i(610)])?_=new Cesium__namespace.Cartesian3:(rayScratch.origin=r.positionWC,rayScratch[i(x._0x1152d8)]=r.directionWC,_=s.globe[i(x._0x6ce4c6)](rayScratch,s,new Cesium__namespace[i(x._0x329457)]),Cesium__namespace.defined(_)&&(_=r[i(x._0x8cb68b)](_,_))),Cesium__namespace.defined(_))c={direction:r.direction,up:r.up};else{const g=new Cesium__namespace[i(1110)](r[i(x._0x54ebed)](s[i(679)].ellipsoid.cartographicToCartesian(r.positionCartographic)),r.directionWC);if(_=Cesium__namespace.IntersectionTests.grazingAltitudeLocation(g,s.globe[i(1782)]),!Cesium__namespace.defined(_))return!1;c={heading:r.heading,pitch:r[i(227)],roll:r[i(2969)]}}const l=Cesium__namespace.Cartesian3.subtract(r.position,_,cartesian3Scratch),h=Cesium__namespace[i(x._0x329457)][i(x._0x21440)](l,e,l),d=Cesium__namespace.Cartesian3[i(565)](_,h,_);if(!Cesium__namespace.defined(d))return!1;const u=o.minimumZoomDistance,m=o.maximumZoomDistance,f=Cesium__namespace.Cartographic.fromCartesian(d).height;if(f<u)return!1;if(f<o[i(x._0x5b438e)]){const g=o._scene[i(x._0x54fd46)];if(Cesium__namespace.defined(g)&&f<=g+u)return!1}return m&&f>m?!1:(Cesium__namespace.defined(this.viewer[i(x._0x8e2bc8)])||s[i(x._0x4fa73b)]===Cesium__namespace.SceneMode.COLUMBUS_VIEW?r.position=d:r[i(2729)]({destination:d,orientation:c,duration:.5,convert:!1}),!0)}}}}class SceneOption{constructor(e){const t={_0x34f8b1:1682},x=_0x2397ca;this._map=e,this[x(t._0x34f8b1)]=e[x(1795)],this[x(3044)]={},this._init()}_init(){const e={_0x190df4:1682,_0x56f73a:2080,_0x326b4c:1682},t={_0x501808:522},x=_0x2397ca;var i,s;if(this[x(e._0x190df4)].cesiumWidget.creditContainer.style[x(3378)]=x(e._0x56f73a),this[x(e._0x326b4c)].scene.screenSpaceCameraController.maximumZoomDistance=5e7,this[x(e._0x190df4)].scene.backgroundColor=Cesium__namespace[x(2134)].TRANSPARENT,this._viewer.sceneModePicker&&(this[x(1682)].sceneModePicker.viewModel[x(1183)]=0),(i=this._viewer)===null||i===void 0||(s=i[x(3269)])===null||s===void 0||s.viewModel.command.beforeExecute.addEventListener(o=>{const r=x;this._map[r(t._0x501808)](),o[r(3139)]=!0}),this._viewer._cesiumWidget._supportsImageRenderingPixelated=Cesium__namespace.FeatureDetection.supportsImageRenderingPixelated(),this._viewer._cesiumWidget._forceResize=!0,Cesium__namespace.FeatureDetection.supportsImageRenderingPixelated()){let o=window.devicePixelRatio;for(;o>=2;)o/=2;this._viewer.resolutionScale=o}}setOptions(e,t){const x={_0x309530:3044},i=_0x2397ca;return e=e||{},t=t||{},this[i(x._0x309530)]=e,this._setViewerOption(t)[i(1347)](t)._setSceneOption(t)._setGlobeOption(t)._setCameraOption(t)._setClockOption(t),this}_setViewerOption(e){const t={_0xe1d08e:2152,_0x556249:950,_0x4a5caa:2007,_0x82e3fa:1682},x=_0x2397ca;return e.center?this._map[x(2074)](this.options.center,{duration:0}):e.extent&&this[x(558)].flyToExtent(this.options.extent,{duration:0}),this._viewer.shadows=this.options.shadows??!1,(this.options.removeDblClick??!0)&&this._viewer.screenSpaceEventHandler.removeInputAction(Cesium__namespace.ScreenSpaceEventType[x(t._0xe1d08e)]),this.options[x(950)]&&(this._viewer[x(t._0x556249)]=this[x(3044)].resolutionScale),Cesium__namespace[x(639)](this.options.terrainShadows)&&(isBoolean(this.options.terrainShadows)?this._viewer.terrainShadows=this.options[x(2105)]?Cesium__namespace[x(t._0x4a5caa)].ENABLED:Cesium__namespace.ShadowMode.DISABLED:this[x(t._0x82e3fa)].terrainShadows=this.options.terrainShadows),this}_setCanvasOption(e){const t={_0x2b66d9:3044},x=_0x2397ca,i=this._viewer[x(1733)];return i.setAttribute("tabindex",this[x(t._0x2b66d9)].tabIndex??0),i[x(765)]=s=>{i.focus()},this}_setSceneOption(e){const t={_0x233381:3482,_0xa6c171:407,_0x16fbca:697,_0x198b5b:2238,_0x25bf49:1598,_0x4df937:1721,_0x2d4426:1721},x=_0x2397ca,i=this._viewer.scene,s=this.options;switch(i.sun.show=s.showSun??!0,i.moon.show=s.showMoon??!0,i.skyBox.show=s.showSkyBox??!0,i.skyAtmosphere[x(t._0x233381)]=!!(s.showSkyAtmosphere??!0),i.fog.enabled=s[x(544)]??!0,i.postProcessStages.fxaa[x(t._0xa6c171)]=s.fxaa??!0,i[x(t._0x16fbca)]=s.highDynamicRange??!1,s.backgroundColor&&(i.backgroundColor=Cesium__namespace.Color.fromCssColorString(s[x(t._0x198b5b)])),Cesium__namespace.defined(s.orderIndependentTranslucency)&&(i._useOIT=s[x(t._0x25bf49)]),s[x(2341)]){case Cesium__namespace[x(t._0x4df937)].SCENE2D:i[x(1629)](0);break;case Cesium__namespace[x(t._0x2d4426)].COLUMBUS_VIEW:i.morphToColumbusView(0);break;case Cesium__namespace.SceneMode.SCENE3D:i.morphTo3D(0);break}return this}_setGlobeOption(e){const t={_0x592e62:679},x=_0x2397ca,i=this._viewer.scene[x(t._0x592e62)],s=this.options.globe??{};return merge(i,{...s,show:s.show??!0,depthTestAgainstTerrain:s.depthTestAgainstTerrain??!1,baseColor:Cesium__namespace.Color.fromCssColorString(s.baseColor||"#546a53"),showGroundAtmosphere:s[x(857)]??!0,enableLighting:s.enableLighting??!1}),this}_setCameraOption(e){const t={_0x4de8d7:3399,_0x4f53f0:3830,_0x290f71:3044,_0x626271:2951},x=_0x2397ca,i=this._viewer[x(t._0x4de8d7)][x(t._0x4f53f0)],s=this[x(t._0x290f71)].cameraController??{};return merge(i,{...s,_zoomFactor:s.zoomFactor||3,minimumZoomDistance:s.minimumZoomDistance??1,maximumZoomDistance:s.maximumZoomDistance??5e7,minimumCollisionTerrainHeight:s.minimumCollisionTerrainHeight??15e3,enableRotate:s[x(2603)]??!0,enableTranslate:s[x(3055)]??!0,enableTilt:s.enableTilt??!0,enableZoom:s[x(2396)]??!0,enableCollisionDetection:s.enableCollisionDetection??!0}),s[x(t._0x626271)]===!1&&(this._viewer.camera.constrainedAxis=void 0),this}_setClockOption(e){const t={_0x473228:3703,_0x27d368:3957,_0x173913:3764,_0x2aff87:3452,_0x3b1bf7:3284},x=_0x2397ca,i=this._viewer.clock,s=this.options[x(t._0x473228)]??{};return s.shouldAnimate=s[x(t._0x27d368)]??this[x(3044)].shouldAnimate??!0,i[x(3957)]=s.shouldAnimate,s.startTime&&(i.startTime=this._getJulianDate(s[x(t._0x173913)]),i.currentTime=i.startTime),s[x(3452)]&&(i.stopTime=this._getJulianDate(s.stopTime)),s[x(3718)]&&(i.currentTime=this._getJulianDate(s.currentTime),!s.startTime&&(i[x(3764)]=i.currentTime.clone()),!s[x(t._0x2aff87)]&&(i[x(3452)]=Cesium__namespace.JulianDate.addDays(i.currentTime,1,new Cesium__namespace.JulianDate))),s[x(t._0x3b1bf7)]&&(i.multiplier=s.multiplier),this}_getJulianDate(e){const t=_0x2397ca;return isString(e)?e.indexOf("Z")===-1?Cesium__namespace.JulianDate[t(1579)](new Date(e)):Cesium__namespace.JulianDate[t(2528)](e):e}}function initBeforeCreateDefaultValue(n){const e={_0x2d267d:1073,_0x40d085:1214,_0x598837:1300,_0xd5eb41:2196},t=_0x2397ca;var x,i;Cesium__namespace.Ion[t(e._0x2d267d)]=(n==null||(x=n[t(3399)])===null||x===void 0?void 0:x.ionToken)||ion,Cesium__namespace.AnimationViewModel.defaultTicks=(n==null||(i=n[t(e._0x40d085)])===null||i===void 0?void 0:i.animationTicks)||[.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600],Cesium__namespace.Camera[t(e._0x598837)]=Cesium__namespace[t(3520)].fromDegrees(89.5,20.4,110.4,61.2),Cesium__namespace[t(e._0xd5eb41)].maximumRequests=100,Cesium__namespace.RequestScheduler.maximumRequestsPerServer=20}class PopupMgr extends BaseControl{constructor(e={}){const t={_0x171ed7:1610,_0x2b7939:2491},x=_0x2397ca;super(e),this[x(t._0x171ed7)]=e[x(t._0x2b7939)]??!0}get[_0x2397ca(2491)](){return this[_0x2397ca(1610)]}set depthTest(e){const t={_0xd6a2c4:1610},x=_0x2397ca;this[x(t._0xd6a2c4)]=e}_mountedHook(){const e={_0x33998e:3831},t=_0x2397ca;this[t(e._0x33998e)]=new GraphicLayer({private:!0}),this._layer._closeAllControl=function(){}}_enabledHook(e){this._layer.show=e}_addedHook(){const e={_0x3e6021:3615,_0x324499:3003},t=_0x2397ca;this._map[t(e._0x3e6021)](this[t(3831)]),this[t(e._0x324499)]()}_removedHook(){const e={_0x5b552d:2911,_0x56bfef:3831},t=_0x2397ca;this._unbindEvent(),this._map[t(e._0x5b552d)](this[t(e._0x56bfef)])}_bindEvent(){const e={_0x209efe:162},t=_0x2397ca;this._map.on(EventType.click,this._mouseClickHandler,this),this._map.on(EventType.clickTileGraphic,this[t(e._0x209efe)],this)}[_0x2397ca(3040)](){const e={_0x3095f0:558,_0x418adf:162},t=_0x2397ca;this[t(e._0x3095f0)][t(3573)](EventType[t(2031)],this._mouseClickHandler,this),this._map.off(EventType.clickTileGraphic,this[t(e._0x418adf)],this)}_mouseClickHandler(e){const t={_0x2729bd:2980},x=_0x2397ca;var i,s;if(!this.enabled||this[x(2980)](e.czmObject,e)||this._openByMouseEvent(e.graphic,e)||this._openByMouseEvent((i=e.graphic)===null||i===void 0?void 0:i.parent,e)||this[x(t._0x2729bd)](e.layer,e)||this[x(2980)]((s=e[x(2407)])===null||s===void 0?void 0:s.parent,e))return;const o=this._layer.getGraphics();for(let r=0,c=o.length;r<c;r++){const _=o[r];_[x(3044)].closeOnClick!==!1&&_[x(2689)](!0)}}_getConfig(e){return e._popupConfig||e.getPopupConfig&&e.getPopupConfig()}_openByMouseEvent(e,t){const x={_0x5234b3:876},i=_0x2397ca;if(!e)return!1;let s=this[i(x._0x5234b3)](e);return s===!1?!0:s?(s={...s,...t},this[i(681)](t.cartesian,s),!0):!1}[_0x2397ca(810)](e,t){const x={_0x13bdbc:3044,_0x2796b0:3044,_0x5c77e5:3725},i=_0x2397ca;if(!this._layer)return;if(e){const u=this._layer.getGraphics();for(let m=0,f=u.length;m<f;m++){var s,o;const g=u[m];if(g.options.checkData){var r;g[i(x._0x13bdbc)].checkData((r=g[i(3044)])===null||r===void 0?void 0:r.attr,e)&&g.remove(!0)}else e===((s=g.options)===null||s===void 0||(o=s.event)===null||o===void 0?void 0:o.graphic)&&g.remove(!0)}return}if(t){const u=this._layer.getGraphics();for(let m=0,f=u.length;m<f;m++){var c,_;const g=u[m];if(g[i(3044)].checkData){var l;g.options.checkData((l=g[i(x._0x2796b0)])===null||l===void 0?void 0:l[i(1578)],t)&&g.remove(!0)}else t===((c=g[i(3044)])===null||c===void 0||(_=c.event)===null||_===void 0?void 0:_.layer)&&g.remove(!0)}return}const h=this._layer[i(3659)]();for(let u=0,m=h.length;u<m;u++){var d;const f=h[u];(((d=f.options)===null||d===void 0?void 0:d[i(x._0x5c77e5)])??!0)&&f.remove(!0)}}[_0x2397ca(1645)](){this._layer&&this._layer.clear()}[_0x2397ca(681)](e,t={}){const x={_0x3d1886:2996,_0xc4467a:1034},i=_0x2397ca;var s;const o=t.options||{};(o==null?void 0:o.autoClose)??!0?this.close():t!=null&&t.graphic&&this.close(t.graphic);let r=t.target;t.layer&&t.layer.fire&&(r=t.layer),t.graphic&&t.graphic.fire&&(r=t.graphic);let c=Cesium__namespace.HeightReference.NONE;if(t.czmObject){const u=t.czmObject;c=this.getHeightReference(u,c),u.billboard||u.point?e=u[i(760)]:u.position&&!(u.position instanceof Cesium__namespace.ConstantPositionProperty)&&(e=u.position)}if(t.graphic){if(t[i(2996)].isPoint){var _,l;c=(_=t.graphic.style)===null||_===void 0?void 0:_.heightReference,(l=t[i(x._0x3d1886)].style)!==null&&l!==void 0&&l[i(x._0xc4467a)]&&(c=Cesium__namespace.HeightReference.CLAMP_TO_GROUND)}t.target&&t.graphic.property&&(e=t[i(x._0x3d1886)]._getPopupPosition())}const h={...o,heightReference:c,html:t.content},d=this[i(1415)]({depthTest:this.depthTest,...o,position:e,style:h,attr:(s=t.graphic)===null||s===void 0?void 0:s.attr,target:r,event:t},r);this._layer.addGraphic(d)}[_0x2397ca(3898)](e){const t={_0xbc5fd1:2686},x=_0x2397ca;return this[x(3831)][x(1976)](e[x(t._0xbc5fd1)])}[_0x2397ca(1415)](e,t){const x=new Popup(e);return t&&(t._popupId=x.id),x}getHeightReference(e,t){const x={_0x4c5746:2800},i=_0x2397ca;if(!e)return t;if(Cesium__namespace.defined(e._heightReference))return e._heightReference;const s=e[i(824)]||e[i(x._0x4c5746)]||e[i(1243)]||e.label;return Cesium__namespace[i(639)](s==null?void 0:s.heightReference)?s.heightReference._value:t}}register$1("popup",PopupMgr);class TooltipMgr extends PopupMgr{constructor(e={}){const t=_0x2397ca;super(e),this[t(3044)].cacheTime=this.options.cacheTime??20}[_0x2397ca(1757)](e){const t={_0x445425:1757,_0xee305e:1166},x=_0x2397ca;super[x(t._0x445425)](e),this.moveTimer&&!e&&(clearTimeout(this[x(1166)]),delete this[x(t._0xee305e)])}_bindEvent(){const e={_0x430f25:558},t=_0x2397ca;this._map.on(EventType.mouseMoveTarget,this._mouseMoveHandler,this),this._map.on(EventType[t(631)],this._mouseDownHandler,this),this[t(e._0x430f25)].on(EventType[t(1299)],this[t(2755)],this)}_unbindEvent(){const e={_0xad19e2:3573,_0x4d1106:558},t=_0x2397ca;this._map[t(e._0xad19e2)](EventType.mouseMoveTarget,this[t(2322)],this),this._map.off(EventType.mouseDown,this._mouseDownHandler,this),this[t(e._0x4d1106)][t(3573)](EventType.mouseUp,this._mouseUpHandler,this)}_mouseDownHandler(e){const t=_0x2397ca;this.enabled&&(this._isMouseUpdownPressed=!0,this[t(810)]())}_mouseUpHandler(e){this.enabled&&(this._isMouseUpdownPressed=!1)}_mouseMoveHandler(e){const t={_0x3a8ca8:1166,_0x406f92:3044,_0x13e5db:1441},x={_0x3ccb8c:162},i=_0x2397ca;if(this.enabled){if(this.moveTimer&&(clearTimeout(this.moveTimer),delete this.moveTimer),this._isMouseUpdownPressed||!this._enabled){this.close();return}this[i(t._0x3a8ca8)]=setTimeout(()=>{const s=i;delete this.moveTimer,this[s(x._0x3ccb8c)](e)},this[i(t._0x406f92)][i(t._0x13e5db)])}}_getConfig(e){return e[_0x2397ca({_0x345daa:1001}._0x345daa)]||e.getTooltipConfig&&e.getTooltipConfig()}_createDivGraphic(e,t){const x=new Tooltip(e);return t&&(t._tooltipId=x.id),x}[_0x2397ca(1017)](e){return this._layer.getGraphicById(e._tooltipId)}}register$1("tooltip",TooltipMgr);class SmallTooltip extends BaseControl{get[_0x2397ca(2165)](){const e={_0x252f59:2165},t=_0x2397ca;return this.options[t(e._0x252f59)]}set[_0x2397ca(2165)](e){const t={_0x85e56b:2165,_0xe6fcce:2668,_0x494954:2668,_0x239231:2441,_0x4ddbb0:2668},x=_0x2397ca;this.options[x(t._0x85e56b)]=e,e?(addClass(this[x(t._0xe6fcce)],x(1781)),removeClass(this[x(t._0x494954)],x(t._0x239231))):(addClass(this[x(t._0x494954)],x(t._0x239231)),removeClass(this[x(t._0x4ddbb0)],"mars3d-smallTooltip-leftArrow"))}_enabledHook(e){const t={_0x5bb12b:3482},x=_0x2397ca;this[x(t._0x5bb12b)]=e}_mountedHook(){const e={_0x3cb8af:3039,_0x1030d5:1130},t=_0x2397ca;this._container=create$3(t(215),"mars3d-smallTooltip"),this._container[t(357)].display="none",this._containerArrow=create$3("div",t(2471),this._container),this[t(e._0x3cb8af)]=create$3("div","mars3d-smallTooltip-inner",this._container),this._container[t(e._0x1030d5)](t(2031),x=>{this[t(810)]()})}close(){const e={_0x31ac27:3378,_0x3c2ae8:2080},t=_0x2397ca;this[t(785)]&&(this[t(785)].style[t(e._0x31ac27)]=t(e._0x3c2ae8))}open(e,t){const x={_0x97cf7b:558,_0x50a7c6:1879,_0x1212d5:3044,_0x2684a2:785},i=_0x2397ca;this.enabled&&(t&&(this._containerContent.innerHTML=t),e?(e instanceof Cesium__namespace.Cartesian3&&(e=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(this[i(x._0x97cf7b)].scene,e)),this._container.style.display="block",this._container.style.top=e.y-this._container[i(x._0x50a7c6)]/2+"px",this[i(x._0x1212d5)].direction?this._container.style.left=e.x-this[i(x._0x2684a2)].clientWidth-25+"px":this._container[i(357)].left=e.x+25+"px"):this._container.style.display="none")}}register$1("smallTooltip",SmallTooltip);class ContextMenu extends BaseControl{constructor(n={}){super(n),this._menuIndex=0,this._menuObj={}}get[_0x2397ca(3887)](){return this._target}_enabledHook(){this._target=null}[_0x2397ca(2645)](){const n=_0x2397ca;Cesium__namespace.defaultValue(this.options.preventDefault,!0)&&(this[n(558)].container.oncontextmenu=function(e){e.preventDefault()}),this._container=create$3("div","mars3d-contextmenu"),this[n(785)].style.display=n(2080),this._containerUl=create$3("ul","mars3d-contextmenu-ul",this[n(785)]),this._containerUl.id=this.parentContainerId+"-mars3d-contextmenu-ul"}_addedHook(){const n=_0x2397ca;this._map.on(EventType.leftDown,this._downHandler,this),this._map.on(EventType.middleDown,this._downHandler,this),this._map.on(EventType.wheel,this._downHandler,this),this._map.on(EventType[n(3852)],this._rightClickHandler,this)}_removedHook(){const n={_0x3fe5ba:558,_0x54675e:3573,_0x2fede6:3929},e=_0x2397ca;this[e(n._0x3fe5ba)].off(EventType.leftDown,this._downHandler,this),this._map[e(n._0x54675e)](EventType.middleDown,this._downHandler,this),this[e(558)].off(EventType.wheel,this._downHandler,this),this[e(558)].off(EventType.rightClick,this._rightClickHandler,this),this[e(n._0x2fede6)]=null,this._eventResult=null}_downHandler(n){this[_0x2397ca(810)]()}_rightClickHandler(n){const e={_0x31433f:3485},t=_0x2397ca;var x,i;this.close(),this.enabled&&(this._openByClick(n.czmObject,n)||this._openByClick(n[t(2996)],n)||this._openByClick((x=n.graphic)===null||x===void 0?void 0:x.parent,n)||this[t(e._0x31433f)](n.layer,n)||this._openByClick((i=n.layer)===null||i===void 0?void 0:i.parent,n)||this._openByClick(this._map,n))}_openByClick(n,e){const t=_0x2397ca;if(!n)return!1;let x=n._contextmenuConfig||n[t(647)]&&n.getContextMenu();return x===!1?!0:x?(x={...x,...e},this.open(e[t(641)],x),!0):!1}close(n,e){const t={_0x2fa8d3:2996,_0x3d6958:3482,_0x380fbb:1788,_0x3a9297:1952},x=_0x2397ca;var i,s,o;this._show!==!1&&(n&&n!==((i=this._eventResult)===null||i===void 0?void 0:i[x(t._0x2fa8d3)])||e&&e!==((s=this[x(1703)])===null||s===void 0?void 0:s[x(2407)])||(this[x(t._0x3d6958)]=!1,(o=this.target)!==null&&o!==void 0&&o.fire?this.target.fire(EventType.contextMenuClose,{},!0):this._map[x(t._0x380fbb)](EventType[x(t._0x3a9297)])))}open(_0x24514f,_0x3d0fca={}){const _0x3dd3eb={_0x514f66:3044,_0x1d0a3b:2027,_0xa3879d:558,_0x304e5a:1788,_0x3e9006:2463,_0x21482a:810,_0x2dfb45:1111,_0x24af45:2031,_0x452277:3482,_0x5882ea:785,_0x4451e7:357,_0x1ee5cc:1927,_0xe53b9d:1980},_0x522c00={_0x6fe3f8:1927},_0x51cc2f={_0x3dd42f:1567,_0x5dbb03:3372,_0x1a1a15:171},_0x5b6160=_0x2397ca;var _0x43643b;const _0x5a4c97=_0x3d0fca[_0x5b6160(_0x3dd3eb._0x514f66)]||{},_0x5b0593=_0x3d0fca.content;if(!_0x5b0593||_0x5b0593[_0x5b6160(_0x3dd3eb._0x1d0a3b)]===0){this[_0x5b6160(810)]();return}const _0x10cd4b=_0x3d0fca.windowPosition||Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(this[_0x5b6160(_0x3dd3eb._0xa3879d)][_0x5b6160(3399)],_0x24514f),_0x48e961={..._0x3d0fca,windowPosition:_0x10cd4b,position:_0x24514f};if(_0x3d0fca.layer&&_0x3d0fca.layer.fire&&(_0x48e961[_0x5b6160(3887)]=_0x3d0fca.layer),_0x3d0fca.graphic&&_0x3d0fca.graphic.fire){_0x48e961.target=_0x3d0fca.graphic;const n=_0x3d0fca.graphic.parent;n&&n[_0x5b6160(_0x3dd3eb._0x304e5a)]&&(_0x48e961.graphic_parent=n)}this._eventResult=_0x48e961;let _0x5854b7="";for(let n=0,e=_0x5b0593[_0x5b6160(_0x3dd3eb._0x1d0a3b)];n<e;n++){const t=_0x5b0593[n],x=this[_0x5b6160(_0x3dd3eb._0x3e9006)](t,_0x48e961);x&&(_0x5854b7+=x)}if(_0x5854b7===""){this[_0x5b6160(_0x3dd3eb._0x21482a)]();return}this[_0x5b6160(_0x3dd3eb._0x2dfb45)].innerHTML=_0x5854b7;const _0x16f6a2=this._containerUl.querySelectorAll(_0x5b6160(2328)),_0x4d6ad8=this;for(let _0x21d9a8=0;_0x21d9a8<_0x16f6a2.length;_0x21d9a8++){const _0x3354ff=_0x16f6a2[_0x21d9a8];_0x3354ff.addEventListener(_0x5b6160(_0x3dd3eb._0x24af45),function(_0x573c6d){const _0x2cdf2a=_0x5b6160;var _0x865f35;_0x573c6d.stopPropagation&&_0x573c6d[_0x2cdf2a(_0x51cc2f._0x3dd42f)]();const _0x5efa10=Number(this[_0x2cdf2a(2310)]("data-index")),_0x11ce49=_0x4d6ad8._menuObj[_0x5efa10],_0x4e9a3e={..._0x48e961,data:_0x11ce49},_0x4fddb2=_0x11ce49.callback;_0x4fddb2&&(isFunction(_0x4fddb2)?_0x4fddb2(_0x4e9a3e):isString(_0x4fddb2)&&(window[_0x2cdf2a(_0x51cc2f._0x5dbb03)]=_0x4e9a3e,eval(_0x4fddb2+"(window._contextmenuItemClickResult)"),delete window._contextmenuItemClickResult)),(_0x865f35=_0x4d6ad8.target)!==null&&_0x865f35!==void 0&&_0x865f35.fire?_0x4d6ad8.target.fire(EventType[_0x2cdf2a(_0x51cc2f._0x1a1a15)],_0x4e9a3e,!0):_0x4d6ad8._map[_0x2cdf2a(1788)](EventType.contextMenuClick,_0x4e9a3e);const _0x1e7834=Number(this[_0x2cdf2a(2310)]("data-count")||0);_0x1e7834===0&&_0x4d6ad8.close()}),_0x3354ff.addEventListener("mouseover",function(n){const e=_0x5b6160,t=_0x4d6ad8._container[e(286)](e(_0x522c00._0x6fe3f8));for(let i=0;i<t.length;i++)t[i].style.display="none";const x=this[e(1093)](".mars3d-sub-menu");x&&(x.style.display="block"),removeClass(_0x4d6ad8._containerUl[e(1093)](e(1486)),"active"),addClass(this,"active")})}this[_0x5b6160(_0x3dd3eb._0x452277)]=!0,this._target=_0x48e961.target;let _0x249817=_0x10cd4b.y,_0x3467ed=_0x10cd4b.x;_0x5a4c97.anchor?(_0x3467ed+=_0x5a4c97.anchor[0],_0x249817+=_0x5a4c97.anchor[1]):(_0x5a4c97.offsetX&&(_0x3467ed+=_0x5a4c97.offsetX),_0x5a4c97[_0x5b6160(2143)]&&(_0x249817+=_0x5a4c97.offsetY));const _0x2be315=this._container.offsetHeight,_0x411693=this._container.offsetWidth;_0x249817+_0x2be315>this[_0x5b6160(_0x3dd3eb._0xa3879d)].scene.canvas.clientHeight?(_0x249817-=_0x2be315-10,_0x249817<=0&&(_0x249817=0)):_0x249817+=10;let _0x3531f3=!0;_0x3467ed+_0x411693>this._map.scene.canvas.clientWidth?(_0x3467ed-=_0x411693-10,_0x3531f3=!1,_0x3467ed<=0&&(_0x3467ed=0)):_0x3467ed+=10,this[_0x5b6160(_0x3dd3eb._0x5882ea)][_0x5b6160(_0x3dd3eb._0x4451e7)].left=_0x3467ed+"px",this[_0x5b6160(_0x3dd3eb._0x5882ea)][_0x5b6160(357)][_0x5b6160(3526)]=_0x249817+"px";const _0xd23d58=this[_0x5b6160(1111)].querySelectorAll(_0x5b6160(_0x3dd3eb._0x1ee5cc));for(let n=0;n<_0xd23d58.length;n++){const e=_0xd23d58[n],t=Number(e.getAttribute("data-count")||1)*34;let x=_0x249817+e[_0x5b6160(_0x3dd3eb._0xe53b9d)].offsetTop;e.style.top="0",e.style.bottom="auto",x+t>this._map.scene.canvas[_0x5b6160(1879)]&&(x-=t,x>0&&(e.style[_0x5b6160(3526)]=_0x5b6160(2925),e.style.bottom="0")),_0x3531f3?e.style[_0x5b6160(2937)]=_0x411693+10+"px":e.style.right=_0x411693+10+"px"}(_0x43643b=_0x48e961.target)!==null&&_0x43643b!==void 0&&_0x43643b[_0x5b6160(1788)]?_0x48e961[_0x5b6160(3887)].fire(EventType.contextMenuOpen,{},!0):this._map.fire(EventType.contextMenuOpen)}_getItemHtml(_0x3aca07,_0xf4f798){const _0x1b33db={_0x26cbbd:3482,_0x122c94:3406,_0x4e2e98:2069,_0x50fe99:1297,_0x4a50b7:1552},_0x2f2514=_0x2397ca;if(_0x3aca07[_0x2f2514(2444)](_0x2f2514(_0x1b33db._0x26cbbd))){let _0xfe5c60=_0x3aca07.show;try{_0xf4f798.data=_0x3aca07,isFunction(_0xfe5c60)?_0xfe5c60=_0x3aca07.show(_0xf4f798):isString(_0xfe5c60)&&(window._contextmenuItemClickShowResult=_0xf4f798,_0xfe5c60=eval(_0xfe5c60+"(window._contextmenuItemClickShowResult)"),delete window._contextmenuItemClickShowResult)}catch(n){logError$1("右键菜单操作出错",n)}if(!_0xfe5c60)return}let _0x113fda;if(_0x3aca07.text){let n="",e="",t=0;if(_0x3aca07.children){for(let i=0,s=_0x3aca07[_0x2f2514(_0x1b33db._0x122c94)].length;i<s;i++){const o=_0x3aca07.children[i];_0xf4f798[_0x2f2514(_0x1b33db._0x4e2e98)]=o;const r=this[_0x2f2514(2463)](o,_0xf4f798);r&&(n+=r,t++)}if(t===0)return;n='<ul class="mars3d-contextmenu-ul mars3d-sub-menu" data-count="'+t+'">'+n+"</ul>",e=`
            <span  class="contextmenu-arrow" >
              <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M20 12L32 24L20 36V12Z" fill="#ffffff" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/></svg>
            </span>  `}this[_0x2f2514(2506)]++,this._menuObj[this._menuIndex]=_0x3aca07;const x=this._createIcon(_0x3aca07[_0x2f2514(_0x1b33db._0x50fe99)]||_0x3aca07[_0x2f2514(_0x1b33db._0x4a50b7)],null,"contextmenu-icon");_0x113fda='<li class="contextmenu-item" data-index="'+this._menuIndex+'" data-count="'+t+`">
                    <a href="javascript:void(0)">`+x+_0x3aca07.text+e+_0x2f2514(1031)+n+`
                </li>`}else _0x113fda=_0x2f2514(608);return _0x113fda}}register$1("contextMenu",ContextMenu);class KeyboardRoam extends BaseControl{constructor(e={}){const t=_0x2397ca;super(e),this[t(2403)](e),this.flags={moveForward:!1,moveBackward:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1}}get moveStep(){return this._moveStep}set moveStep(e){this._moveStep=e}get dirStep(){return this[_0x2397ca(3016)]}set dirStep(e){this._dirStep=e}get[_0x2397ca(2710)](){return this._rotateStep}set[_0x2397ca(2710)](e){this._rotateStep=e}get minPitch(){return this._minPitch}set[_0x2397ca(175)](e){const t={_0x51eebe:2650},x=_0x2397ca;this[x(t._0x51eebe)]=e}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch=e}get[_0x2397ca(3892)](){return this._minHeight}set minHeight(e){this._minHeight=e}setOptions(e){const t={_0x5771da:3044,_0x5dd79b:3370,_0x3e0347:2710,_0x4c425e:3044},x=_0x2397ca;return this[x(t._0x5771da)]={...this.options,...e},this._moveStep=this.options.moveStep??10,this._dirStep=this.options[x(t._0x5dd79b)]??25,this._rotateStep=this.options[x(t._0x3e0347)]??1,this._minPitch=this.options.minPitch??.1,this._maxPitch=this[x(t._0x4c425e)].maxPitch??.95,this[x(476)]=this.options.minHeight??0,this}[_0x2397ca(2670)](){const e={_0x25ef31:2530},t=_0x2397ca;this._map.on(EventType.keydown,this._onKeyDown,this),this._map.on(EventType[t(1652)],this[t(e._0x25ef31)],this),this._map.on(EventType.clockTick,this._onClockTick,this)}_removedHook(){const e={_0x5bd753:2653,_0x4752fb:2530,_0x409ec6:3573},t=_0x2397ca;this._map.off(EventType[t(e._0x5bd753)],this._onKeyDown,this),this[t(558)][t(3573)](EventType.keyup,this[t(e._0x4752fb)],this),this[t(558)][t(e._0x409ec6)](EventType.clockTick,this._onClockTick,this)}[_0x2397ca(2787)](e){const t={_0x4ee80c:1805,_0x1249da:1789},x=_0x2397ca;if(!this[x(407)])return;const i=this[x(t._0x4ee80c)](e[x(t._0x1249da)]);typeof i<"u"&&(this.flags[i]=!0)}_onKeyUp(e){const t=_0x2397ca;if(!this.enabled)return;const x=this[t(1805)](e.keyCode);typeof x<"u"&&(this.flags[x]=!1)}_getFlagForKeyCode(e){const t={_0x2675f9:2578,_0x5178b9:1840,_0x141dd4:1791,_0x39e2f1:3871,_0xc69664:2600},x=_0x2397ca;switch(e){case 87:return x(1657);case 83:return"moveBackward";case 68:return"moveRight";case 65:return"moveLeft";case 81:return x(2664);case"E"[x(t._0x2675f9)](0):return"moveDown";case 38:this.rotateCamera(MoveType.TOP_ROTATE);break;case 37:this[x(t._0x5178b9)](MoveType[x(t._0x141dd4)]);break;case 39:this.rotateCamera(MoveType[x(t._0x39e2f1)]);break;case 40:this.rotateCamera(MoveType.BOTTOM_ROTATE);break;case 73:case 104:this.moveCamera(MoveType.ENLARGE);break;case 75:case 101:this.moveCamera(MoveType[x(3623)]);break;case 74:case 100:this[x(t._0xc69664)](MoveType.LEFT_ROTATE);break;case 76:case 102:this.moveCamera(MoveType.RIGHT_ROTATE);break;case"U"[x(2578)](0):case 103:this.moveCamera(MoveType.TOP_ROTATE);break;case"O"[x(2578)](0):case 105:this.moveCamera(MoveType.BOTTOM_ROTATE);break}}[_0x2397ca(1333)](){const e=_0x2397ca;!this.enabled&&(this.enabled=!0),this[e(397)].moveForward=!0}stopMoveForward(){!this.enabled&&(this.enabled=!0),this.flags.moveForward=!1}startMoveBackward(){const e={_0x54a710:407,_0x2d6d42:407},t=_0x2397ca;!this[t(e._0x54a710)]&&(this[t(e._0x2d6d42)]=!0),this.flags.moveBackward=!0}[_0x2397ca(1463)](){!this.enabled&&(this.enabled=!0),this.flags.moveBackward=!1}startMoveRight(){const e=_0x2397ca;!this[e(407)]&&(this.enabled=!0),this.flags[e(1853)]=!0}stopMoveRight(){const e=_0x2397ca;!this.enabled&&(this.enabled=!0),this.flags[e(1853)]=!1}startMoveLeft(){const e={_0x2dacb9:407,_0x3ab662:1525},t=_0x2397ca;!this[t(e._0x2dacb9)]&&(this.enabled=!0),this[t(397)][t(e._0x3ab662)]=!0}stopMoveLeft(){const e={_0x438897:1525},t=_0x2397ca;!this.enabled&&(this.enabled=!0),this[t(397)][t(e._0x438897)]=!1}[_0x2397ca(1657)](e){const t={_0x2302dd:2165,_0x2df89e:760},x=_0x2397ca,i=this._map.camera;let s=i[x(t._0x2302dd)];const o=Cesium__namespace.Cartesian3.normalize(i[x(760)],new Cesium__namespace.Cartesian3),r=Cesium__namespace.Cartesian3.cross(s,o,new Cesium__namespace.Cartesian3);s=Cesium__namespace.Cartesian3.cross(o,r,new Cesium__namespace.Cartesian3),s=Cesium__namespace.Cartesian3.normalize(s,s),s=Cesium__namespace.Cartesian3.multiplyByScalar(s,e,s),i.position=Cesium__namespace.Cartesian3[x(565)](i[x(t._0x2df89e)],s,i.position)}_onClockTick(e){const t={_0x25686f:558,_0x38371c:1657,_0x164e6a:397},x=_0x2397ca;if(!this.enabled)return;const i=this[x(t._0x25686f)].camera,s=this.moveStep;this[x(397)].moveForward&&this.moveForward(s),this.flags.moveBackward&&this[x(t._0x38371c)](-s),this.flags.moveUp&&i.moveUp(s),this[x(t._0x164e6a)].moveDown&&i.positionCartographic.height-s>=this.minHeight&&i.moveDown(s),this.flags.moveLeft&&i.moveLeft(s),this.flags.moveRight&&i.moveRight(s)}[_0x2397ca(3444)](e){const t={_0x587cf8:3399},x=_0x2397ca;e&&(this._map[x(t._0x587cf8)].camera.position=e.position,this._map.scene.camera.direction=e.direction,this._map.scene.camera.right=e.right,this._map.scene.camera.up=e.up)}_limitAngle(e,t,x){const i={_0x8827c9:295},s=_0x2397ca,o=Cesium__namespace[s(i._0x8827c9)][s(664)](e,Cesium__namespace.Cartesian3.normalize(t,new Cesium__namespace.Cartesian3));return!(x==="up"&&o<this.minPitch||x==="down"&&o>this.maxPitch)}_computedNewPos(e,t,x){const i={_0x46c942:1110,_0xd5ba6d:960,_0x4c008f:760,_0x45b367:2165,_0x28c7e6:295},s=_0x2397ca,o=e.position,r=this._map.getCenter();if(!r)return;const c=r.toCartesian();if(!c)return;const _=Cesium__namespace.Cartesian3.distance(c,o);let l=_/100;l=x?l*this.rotateStep:l;const h={};let d=new Cesium__namespace[s(i._0x46c942)](o,t);if(h.position=Cesium__namespace.Ray.getPoint(d,l),h.direction=e.direction,h.right=e.right,h.up=e.up,x){const u=Cesium__namespace[s(295)][s(i._0xd5ba6d)](Cesium__namespace.Cartesian3.subtract(h[s(760)],c,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3);d=new Cesium__namespace.Ray(c,u),h[s(i._0x4c008f)]=Cesium__namespace[s(1110)].getPoint(d,_),h.direction=Cesium__namespace[s(295)].negate(u,new Cesium__namespace.Cartesian3),h.up=Cesium__namespace.Cartesian3[s(960)](h.position,new Cesium__namespace.Cartesian3),h.right=Cesium__namespace.Cartesian3.cross(h[s(i._0x45b367)],h.up,new Cesium__namespace[s(i._0x28c7e6)])}return h}moveCamera(e){const t={_0x3761f:309,_0x3bfa77:3871,_0x43efbd:2376,_0x124099:295},x=_0x2397ca,i=this._map.scene.camera;let s;switch(e){case MoveType.NARROW:s=this._computedNewPos(i,Cesium__namespace.Cartesian3.negate(i[x(2165)],new Cesium__namespace.Cartesian3));break;case MoveType.LEFT_ROTATE:s=this[x(t._0x3761f)](i,Cesium__namespace[x(295)].negate(i.right,new Cesium__namespace.Cartesian3),!0);break;case MoveType[x(t._0x3bfa77)]:s=this._computedNewPos(i,i.right,!0);break;case MoveType[x(t._0x43efbd)]:if(!this._limitAngle(Cesium__namespace.clone(i.up),Cesium__namespace.clone(i.position),"up"))return;s=this._computedNewPos(i,Cesium__namespace.clone(i.up),!0);break;case MoveType.BOTTOM_ROTATE:if(!this._limitAngle(Cesium__namespace.clone(i.up),Cesium__namespace.clone(i.position),"down"))return;s=this._computedNewPos(i,Cesium__namespace[x(t._0x124099)].negate(i.up,new Cesium__namespace.Cartesian3),!0);break;case MoveType.ENLARGE:default:s=this._computedNewPos(i,i.direction);break}s&&this._resetCamera(s)}rotateCamera(e){const t={_0x2c2524:558,_0x34a7af:2376,_0x5dfb99:295,_0x9b5894:295,_0x4c7be9:3134,_0x150956:1401},x=_0x2397ca;let i=[0,0];const s=this[x(t._0x2c2524)].scene.canvas.clientWidth,o=this._map.scene.canvas.clientHeight,r=(s+o)/this.dirStep;switch(e){case MoveType.LEFT_ROTATE:i=[-r*s/o,0];break;case MoveType.RIGHT_ROTATE:i=[r*s/o,0];break;case MoveType[x(t._0x34a7af)]:i=[0,r];break;case MoveType.BOTTOM_ROTATE:i=[0,-r];break;default:return}const c=i[0]/s,_=i[1]/o,l=.05,h=this._map[x(3400)];h.lookRight(c*l),h.lookUp(_*l);const d=h.direction;let u=Cesium__namespace[x(295)][x(960)](h.position,new Cesium__namespace[x(t._0x5dfb99)]);const m=Cesium__namespace[x(t._0x9b5894)][x(t._0x4c7be9)](d,u,new Cesium__namespace.Cartesian3);u=Cesium__namespace.Cartesian3.cross(m,d,new Cesium__namespace.Cartesian3),h.up=u,h[x(t._0x150956)]=m}}register$1("keyboardRoam",KeyboardRoam),KeyboardRoam[_0x2397ca(2170)]=MoveType;function getDefaultContextMenu(n){const e={_0x583343:1337,_0x3c6c6b:1329,_0x4fb214:1337,_0x29f6e:1874,_0x1944a9:3383,_0x1e9404:670,_0x242e37:3580,_0x1758c5:3782,_0x3d49cb:224,_0x51f247:4063,_0x1aad72:1024,_0x4f397:490,_0x21a873:3041,_0x13f836:1759,_0x5061b3:1498,_0x46168d:1337,_0x784180:2790,_0x1222de:1337,_0x3bc2fe:1337,_0x53ac78:322,_0x4a7290:3582,_0x3bb151:865,_0x1d7e92:205,_0x42bfe6:338,_0x41e9ed:1602,_0x5722f0:2331,_0xd4daf3:2744,_0x52b578:2057,_0x5d9732:3175},t={_0x4e9f4f:3482,_0x2df55d:3399},x={_0x50591d:679},i={_0x47e163:684},s={_0x4aab1f:3399},o={_0x549137:3399},r={_0xe7543c:679,_0x460247:1583},c={_0x4f2dff:4024},_={_0x457bb1:4013},l={_0x215723:3522},h={_0x3b7a5d:3522},d={_0x5c8b34:2029},u={_0x4a2047:2029},m={_0x5b7283:706},f={_0x41b2af:4040},g={_0x36af8c:3679},b={_0x26f6a9:3679,_0x3a7d62:368,_0x537a44:3679},y={_0x3aa113:266},C={_0x430d97:3248},v={_0x42430d:1421},M={_0x3fcc2a:3248,_0x23b8f9:1421},w={_0x51d912:3248,_0x21c551:1421},H={_0x3f69ea:1245},D={_0xe71206:867},F={_0x2dfe17:3141},L={_0x34b37f:3141},B={_0x30d669:2375},Y={_0x4a947f:3141},j={_0x1ae080:1669,_0x24ff5b:3744},J={_0x413f22:2675},Q={_0x3858b8:2675,_0x2be46e:3744},X={_0x33219b:3897},xe={_0x541b70:641,_0x530576:877},K={_0x393b04:641},le={_0x1786ba:1320},ce={_0x3b754b:641,_0x7623e7:877},_e={_0x540000:610},ne={_0x9bb693:610},pe={_0x1c07ae:958},fe={_0x4f8349:958},oe={_0x401ebf:3400},he={_0x4c6975:230,_0x58f93b:2703},ye={_0x5362d3:1776},ve={_0x17977a:546,_0x503fc7:641},Te={_0x1f69f0:641},Ce={_0x55e140:3830},Pe={_0x34c5fb:1304},be={_0x1a1cd6:1258,_0x492ef9:1337},S={_0x548b8a:2050,_0x53c041:213,_0x42faea:3409,_0x3ba84c:906,_0x291d23:1337,_0x191104:1104},P=_0x2397ca,k=n.contextmenu;return[{text:n[P(e._0x583343)]("_查看此处坐标"),icon:Icon[P(e._0x3c6c6b)],show:function(E){return Cesium__namespace.defined(E.cartesian)},callback:function(E){const T=P,R=LngLatPoint.fromCartesian(E[T(641)]),$=proj4Trans([R.lng,R.lat],"EPSG:4326",CRS[T(S._0x548b8a)]),N=T(S._0x53c041)+n.getLangText("_经度")+":"+R[T(S._0x42faea)]+", "+n.getLangText(T(S._0x3ba84c))+":"+R.lat+", "+n[T(S._0x291d23)]("_海拔")+":"+R.alt+`,
         `+n.getLangText("_横坐标")+":"+$[0].toFixed(1)+", "+n.getLangText(T(3564))+":"+$[1].toFixed(1)+` (CGCS2000)
        `;alert(N,n.getLangText("_位置信息"));const z=formatNum$1(E.cartesian.x,1),G=formatNum$1(E.cartesian.y,1),U=formatNum$1(E.cartesian.z,1);logInfo(T(870)+R[T(S._0x191104)]()+" , 笛卡尔："+z+","+G+","+U)}},{text:n.getLangText("_查看当前视角"),icon:Icon.CameraInfo,callback:function(E){const T=P,R=JSON.stringify(n[T(be._0x1a1cd6)]());logInfo(R),alert(R,n[T(be._0x492ef9)]("_当前视角信息"))}},{text:n[P(e._0x4fb214)]("_视角切换"),icon:Icon[P(1042)],children:[{text:n.getLangText("_允许进入地下"),icon:Icon[P(e._0x29f6e)],show:function(E){return n.scene.screenSpaceCameraController.enableCollisionDetection},callback:function(E){n.scene.screenSpaceCameraController.enableCollisionDetection=!1}},{text:n.getLangText("_禁止进入地下"),icon:Icon[P(e._0x1944a9)],show:function(E){const T=P;return!n[T(3399)].screenSpaceCameraController[T(Pe._0x34c5fb)]},callback:function(E){const T=P;n.scene[T(Ce._0x55e140)].enableCollisionDetection=!0}},{text:n[P(1337)](P(e._0x1e9404)),icon:Icon.RotatePointStart,show:function(E){const T=P;var R;return E[T(Te._0x1f69f0)]&&(!k.rotatePoint||!((R=k.rotatePoint)!==null&&R!==void 0&&R.isStart))},callback:function(E){const T=P;!k.rotatePoint&&(k.rotatePoint=new RotatePoint,n.addThing(k[T(1677)])),k.rotatePoint[T(ve._0x17977a)](E[T(ve._0x503fc7)])}},{text:n.getLangText("_关闭环绕飞行"),icon:Icon[P(2387)],show:function(E){const T=P;var R;return(R=k.rotatePoint)===null||R===void 0?void 0:R[T(ye._0x5362d3)]},callback:function(E){k.rotatePoint&&k.rotatePoint.stop()}},{text:n.getLangText("_移动到此处"),icon:Icon.FlyToPoint,show:function(E){return Cesium__namespace[P(639)](E.cartesian)},callback:function(E){const T=P,R=Cesium__namespace.Cartesian3[T(he._0x4c6975)](E.cartesian,n.camera.positionWC)*.1;n[T(he._0x58f93b)](E.cartesian,{radius:R,maximumHeight:n.camera.positionCartographic[T(3872)]})}},{text:n.getLangText("_第一视角站到此处"),icon:Icon[P(3099)],show:function(E){return Cesium__namespace.defined(E.cartesian)},callback:function(E){const T=P;n.camera.flyTo({destination:addPositionsHeight(E[T(641)],10),orientation:{heading:n.camera.heading,pitch:0,roll:0},maximumHeight:n[T(oe._0x401ebf)][T(368)].height})}},{text:n.getLangText("_开启键盘漫游"),icon:Icon[P(1507)],show:function(E){const T=P;return!n.keyboardRoam[T(407)]},callback:function(E){const T=P;n[T(fe._0x4f8349)].enabled=!0}},{text:n.getLangText(P(2899)),icon:Icon.KeyboardRoamNo,show:function(E){return n.keyboardRoam.enabled},callback:function(E){const T=P;n[T(pe._0x1c07ae)].enabled=!1}},{text:n.getLangText(P(e._0x242e37)),icon:Icon.TrackedEntityYes,show:function(E){const T=P,R=E.graphic;return R?R.entity instanceof Cesium__namespace[T(2796)]?!0:R.trackedEntity instanceof Cesium__namespace.Entity:!1},callback:function(E){const T=P;n[T(ne._0x9bb693)]=E.graphic}},{text:n.getLangText("_取消锁定"),icon:Icon.TrackedEntityNo,show:function(E){return n.trackedEntity!==void 0},callback:function(E){const T=P;n[T(_e._0x540000)]=void 0}}]},{text:n.getLangText("_三维模型"),icon:Icon.Tileset,show:function(E){const T=P,R=n.pick3DTileset(E.cartesian);return Cesium__namespace[T(639)](R)},children:[{text:n.getLangText("_显示三角网"),icon:Icon[P(1392)],show:function(E){const T=P,R=n[T(1320)](E[T(ce._0x3b754b)]);return!R[T(ce._0x7623e7)]&&R._enableDebugWireframe},callback:function(E){const T=P,R=n[T(le._0x1786ba)](E.cartesian);R.debugWireframe=!0}},{text:n.getLangText(P(e._0x1758c5)),icon:Icon[P(e._0x3d49cb)],show:function(E){const T=P,R=n.pick3DTileset(E[T(K._0x393b04)]);return R.debugWireframe&&R[T(3507)]},callback:function(E){const T=P,R=n[T(1320)](E[T(xe._0x541b70)]);R[T(xe._0x530576)]=!1}},{text:n.getLangText("_显示包围盒"),icon:Icon.TilesetBoundingVolumeYes,show:function(E){return!n.pick3DTileset(E.cartesian).debugShowBoundingVolume},callback:function(E){const T=n.pick3DTileset(E.cartesian);T.debugShowBoundingVolume=!0}},{text:n.getLangText("_关闭包围盒"),icon:Icon.TilesetBoundingVolumeNo,show:function(E){return n.pick3DTileset(E.cartesian).debugShowBoundingVolume},callback:function(E){const T=P,R=n[T(1320)](E.cartesian);R[T(2176)]=!1}}]},{text:n[P(1337)](P(e._0x51f247)),icon:Icon[P(3893)],show:function(E){const T=P;return Cesium__namespace.defined(E[T(641)])},children:[{text:n.getLangText("_开启地形"),icon:Icon.TerrainYes,show:function(E){return!n.hasTerrain},callback:function(E){n.hasTerrain=!0}},{text:n.getLangText("_关闭地形"),icon:Icon[P(e._0x1aad72)],show:function(E){return n[P(X._0x33219b)]},callback:function(E){n.hasTerrain=!1}},{text:n.getLangText("_显示三角网"),icon:Icon.TerrainWireframeYes,show:function(E){const T=P;return!n.scene[T(679)]._surface[T(Q._0x3858b8)][T(Q._0x2be46e)][T(3823)]},callback:function(E){const T=P;n[T(3399)].globe[T(1669)].tileProvider._debug.wireframe=!0}},{text:n[P(e._0x4fb214)](P(3782)),icon:Icon.TerrainWireframeNo,show:function(E){const T=P;return n.scene.globe._surface[T(J._0x413f22)][T(3744)].wireframe},callback:function(E){const T=P;n.scene.globe[T(j._0x1ae080)].tileProvider[T(j._0x24ff5b)].wireframe=!1}}]},{text:n.getLangText("_图上量算"),icon:Icon[P(e._0x4f397)],children:[{text:n.getLangText("_距离"),icon:Icon[P(e._0x21a873)],callback:function(E){const T=P;!k.measure&&(k[T(Y._0x4a947f)]=new Measure,n.addThing(k.measure)),k[T(3141)].distance()}},{text:n.getLangText("_面积"),icon:Icon.MeasureArea,callback:function(E){const T=P;!k[T(3141)]&&(k.measure=new Measure,n[T(B._0x30d669)](k.measure)),k.measure[T(2290)]()}},{text:n.getLangText(P(e._0x13f836)),icon:Icon.MeasureHeight,callback:function(E){const T=P;!k[T(L._0x34b37f)]&&(k.measure=new Measure,n.addThing(k[T(3141)])),k.measure.heightTriangle()}},{text:n[P(1337)]("_角度"),icon:Icon.MeasureAngle,callback:function(E){const T=P;!k.measure&&(k[T(F._0x2dfe17)]=new Measure,n.addThing(k.measure)),k[T(3141)].angle()}},{text:n.getLangText("_删除测量"),icon:Icon.Delete,show:function(E){const T=P;return k.measure&&k.measure[T(D._0xe71206)]},callback:function(E){const T=P;k.measure&&k.measure[T(2265)]()}}]},{text:n.getLangText("_图上标记"),icon:Icon[P(e._0x5061b3)],children:[{text:n[P(e._0x46168d)](P(3115)),icon:Icon.DrawPoint,callback:function(E){const T=P;n[T(3248)].startDraw({type:"point",style:{pixelSize:12,color:T(2712)},success:function(R){console.log(JSON.stringify(R[T(H._0x3f69ea)]))}})}},{text:n[P(1337)]("_标记线"),icon:Icon[P(e._0x784180)],callback:function(E){const T=P;n[T(w._0x51d912)][T(w._0x21c551)]({type:"polyline",style:{color:T(3263),width:3},success:function(R){console.log(JSON.stringify(R.coordinates))}})}},{text:n.getLangText("_标记面"),icon:Icon.DrawPolygon,callback:function(E){const T=P;n.graphicLayer[T(1421)]({type:"polygon",style:{color:T(3551),opacity:.5,outline:!0,outlineWidth:2},success:function(R){console.log(JSON.stringify(R[T(1245)]))}})}},{text:n.getLangText("_标记圆"),icon:Icon.DrawCircle,callback:function(E){const T={_0xbcc502:855,_0x52fe2b:3080,_0x3c4672:1245},R=P;n[R(M._0x3fcc2a)][R(M._0x23b8f9)]({type:"circle",style:{color:R(1197),opacity:.6},success:function($){const N=R;console[N(T._0xbcc502)](JSON[N(T._0x52fe2b)]($[N(T._0x3c4672)]))}})}},{text:n[P(e._0x1222de)](P(319)),icon:Icon.DrawRectangle,callback:function(E){const T=P;n.graphicLayer[T(v._0x42430d)]({type:"rectangle",style:{color:"#ffff00",opacity:.6},success:function(R){console.log(JSON.stringify(R[T(1245)]))}})}},{text:n.getLangText("_允许编辑"),icon:Icon.DrawEditYes,show:function(E){return!n.graphicLayer.hasEdit},callback:function(E){n.graphicLayer.hasEdit=!0}},{text:n.getLangText("_禁止编辑"),icon:Icon.DrawEditNo,show:function(E){return n.graphicLayer.hasEdit},callback:function(E){const T=P;n[T(C._0x430d97)][T(1e3)]=!1}},{text:n.getLangText("_导出GeoJSON"),icon:Icon.DrawDownJson,show:function(E){return n.graphicLayer.length>0},callback:function(E){downloadFile("图上标记.json",JSON.stringify(n.graphicLayer.toGeoJSON()))}},{text:n[P(e._0x583343)](P(1999)),icon:Icon.Delete,show:function(E){const T=P;return n.graphicLayer[T(2027)]>0},callback:function(E){n.graphicLayer.clear()}}]},{text:n.getLangText("_特效效果"),icon:Icon.Effect,children:[{text:n[P(e._0x3bc2fe)](P(932)),icon:Icon.RainEffectYes,show:function(E){return!k.rainEffect},callback:function(E){!k.rainEffect&&(k.rainEffect=new RainEffect,n.addEffect(k.rainEffect))}},{text:n.getLangText("_关闭下雨"),icon:Icon.RainEffectNo,show:function(E){return k.rainEffect},callback:function(E){const T=P;k[T(y._0x3aa113)]&&(n.removeEffect(k.rainEffect,!0),delete k[T(y._0x3aa113)])}},{text:n.getLangText("_开启下雪"),icon:Icon[P(e._0x53ac78)],show:function(E){return!k.snowEffect},callback:function(E){const T=P;!k.snowEffect&&(k.snowEffect=new SnowEffect,n[T(1164)](k[T(2864)]))}},{text:n[P(e._0x1222de)](P(e._0x4a7290)),icon:Icon.SnowEffectNo,show:function(E){return k[P(2864)]},callback:function(E){const T=P;k.snowEffect&&(n[T(4024)](k.snowEffect,!0),delete k.snowEffect)}},{text:n.getLangText("_开启雾天气"),icon:Icon.FogEffectYes,show:function(E){return!k.fogEffect},callback:function(E){const T=P;if(!k[T(b._0x26f6a9)]){const R=n.camera[T(b._0x3a7d62)][T(3872)]*2;k[T(b._0x537a44)]=new FogEffect({fogByDistance:new Cesium__namespace.Cartesian4(.1*R,.1,R,.8)}),n.addEffect(k[T(3679)])}}},{text:n[P(1337)](P(3109)),icon:Icon.FogEffectNo,show:function(E){return k[P(3679)]},callback:function(E){const T=P;k.fogEffect&&(n.removeEffect(k[T(g._0x36af8c)],!0),delete k.fogEffect)}},{text:n.getLangText("_开启泛光"),icon:Icon.BloomEffectYes,show:function(E){return!k[P(f._0x41b2af)]},callback:function(E){const T=P;!k.bloomEffect&&(k.bloomEffect=new BloomEffect,n[T(1164)](k.bloomEffect))}},{text:n.getLangText("_关闭泛光"),icon:Icon.BloomEffectNo,show:function(E){return k.bloomEffect},callback:function(E){const T=P;k[T(4040)]&&(n.removeEffect(k.bloomEffect,!0),delete k[T(4040)])}},{text:n.getLangText("_开启亮度"),icon:Icon.BrightnessEffectYes,show:function(E){return!k[P(706)]},callback:function(E){!k[P(m._0x5b7283)]&&(k.brightnessEffect=new BrightnessEffect,n.addEffect(k.brightnessEffect))}},{text:n[P(e._0x4fb214)]("_关闭亮度"),icon:Icon[P(e._0x3bb151)],show:function(E){return k[P(706)]},callback:function(E){k.brightnessEffect&&(n.removeEffect(k.brightnessEffect,!0),delete k.brightnessEffect)}},{text:n.getLangText("_开启夜视"),icon:Icon.NightVisionEffectYes,show:function(E){return!k.nightVisionEffect},callback:function(E){!k[P(u._0x4a2047)]&&(k.nightVisionEffect=new NightVisionEffect,n.addEffect(k.nightVisionEffect))}},{text:n.getLangText(P(e._0x1d7e92)),icon:Icon.NightVisionEffectNo,show:function(E){return k.nightVisionEffect},callback:function(E){const T=P;k.nightVisionEffect&&(n.removeEffect(k.nightVisionEffect,!0),delete k[T(d._0x5c8b34)])}},{text:n.getLangText("_开启黑白"),icon:Icon[P(949)],show:function(E){return!k[P(3522)]},callback:function(E){const T=P;!k.blackAndWhiteEffect&&(k.blackAndWhiteEffect=new BlackAndWhiteEffect,n.addEffect(k[T(h._0x3b7a5d)]))}},{text:n.getLangText("_关闭黑白"),icon:Icon.BlackAndWhiteEffectNo,show:function(E){return k.blackAndWhiteEffect},callback:function(E){const T=P;k.blackAndWhiteEffect&&(n.removeEffect(k[T(l._0x215723)],!0),delete k[T(l._0x215723)])}},{text:n[P(e._0x1222de)]("_开启拾取高亮"),icon:Icon[P(e._0x42bfe6)],show:function(E){return!k.outlineEffect},callback:function(E){const T=P;!k.outlineEffect&&(k[T(_._0x457bb1)]=new OutlineEffect,n.addEffect(k.outlineEffect))}},{text:n.getLangText("_关闭拾取高亮"),icon:Icon.OutlineEffectNo,show:function(E){return k.outlineEffect},callback:function(E){const T=P;k.outlineEffect&&(n[T(c._0x4f2dff)](k.outlineEffect,!0),delete k.outlineEffect)}}]},{text:n.getLangText(P(e._0x41e9ed)),icon:Icon.Scene,children:[{text:n.getLangText(P(e._0x5722f0)),icon:Icon.DepthTestYes,show:function(E){const T=P;return!n.scene[T(r._0xe7543c)][T(r._0x460247)]},callback:function(E){const T=P;n.scene.globe[T(1583)]=!0}},{text:n.getLangText("_关闭深度监测"),icon:Icon[P(e._0xd4daf3)],show:function(E){return n.scene.globe.depthTestAgainstTerrain},callback:function(E){const T=P;n.scene[T(679)].depthTestAgainstTerrain=!1}},{text:n.getLangText("_显示星空背景"),icon:Icon.SkyBoxYes,show:function(E){return!n[P(o._0x549137)].skyBox.show},callback:function(E){const T=P;n.scene.skyBox[T(3482)]=!0,n.scene.moon.show=!0,n[T(s._0x4aab1f)].sun.show=!0}},{text:n.getLangText("_关闭星空背景"),icon:Icon.SkyBoxNo,show:function(E){const T=P;return n.scene[T(3585)][T(3482)]},callback:function(E){const T=P;n.scene.skyBox.show=!1,n[T(3399)].moon.show=!1,n[T(3399)][T(i._0x47e163)][T(3482)]=!1}},{text:n[P(e._0x4fb214)]("_开启日照阴影"),icon:Icon.ShadowYes,show:function(E){return!n.viewer.shadows},callback:function(E){const T=P;n[T(1795)].shadows=!0,n.viewer.terrainShadows=Cesium__namespace.ShadowMode.ENABLED,n[T(3399)][T(x._0x50591d)].enableLighting=!0}},{text:n.getLangText("_关闭日照阴影"),icon:Icon[P(e._0x52b578)],show:function(E){return n.viewer.shadows},callback:function(E){const T=P;n.viewer.shadows=!1,n.viewer[T(2105)]=Cesium__namespace.ShadowMode.RECEIVE_ONLY,n[T(3399)].globe.enableLighting=!1}},{text:n[P(1337)]("_开启大气渲染"),icon:Icon.SkyAtmosphereYes,show:function(E){const T=P;return!n.scene[T(3980)].show},callback:function(E){const T=P;n.scene.skyAtmosphere.show=!0,n[T(3399)].globe.showGroundAtmosphere=!0}},{text:n[P(e._0x583343)](P(e._0x5d9732)),icon:Icon.SkyAtmosphereNo,show:function(E){return n.scene.skyAtmosphere.show},callback:function(E){const T=P;n.scene.skyAtmosphere[T(t._0x4e9f4f)]=!1,n[T(t._0x2df55d)].globe[T(857)]=!1}},{text:n.getLangText("_场景出图"),icon:Icon.ExpImage,callback:function(E){n[P(3931)]()}}]}]}function toChineseBeforeCreate(n){const e={_0x5ca4a6:2649,_0x38dc14:1990},t={_0x5ca856:3111},x={_0x598520:1522},i=_0x2397ca;Cesium__namespace.AnimationViewModel[i(e._0x5ca4a6)]=function(s,o){const r=i,c=Cesium__namespace[r(x._0x598520)].toDate(s);return formatDate(c,"yyyy-MM-dd")},Cesium__namespace.AnimationViewModel[i(406)]=function(s,o){const r=Cesium__namespace.JulianDate.toDate(s);return formatDate(r,"HH:mm:ss")},Cesium__namespace.Timeline.prototype[i(e._0x38dc14)]=function(s){const o=i,r=Cesium__namespace[o(1522)].toDate(this._startJulian),c=Cesium__namespace.JulianDate[o(3626)](this._endJulian),_=c.getFullYear()-r.getFullYear(),l=c.getMonth()-r.getMonth(),h=c[o(t._0x5ca856)]()-r.getDate(),d=c[o(2769)]()-r.getHours(),u=c[o(453)]()-r.getMinutes(),m=c.getSeconds()-r.getSeconds(),f=Cesium__namespace.JulianDate.toDate(s);return _===0?l===0&&h<10?h===0?d===0&&u===0&&m<10?m===0?formatDate(f,"S"):formatDate(f,"HH:mm:ss S"):formatDate(f,"HH:mm:ss"):formatDate(f,"MM月dd日 HH:mm"):formatDate(f,"MM月dd日"):formatDate(f,"yyyy-MM-dd")}}function toChineseCreateEnd(n,e){const t={_0xc78fb2:2043},x=e.container;e.scene.renderError.addEventListener(function(i,s){const o=_0x3361,r={"An error occurred while rendering.  Rendering has stopped.":o(1462),"Error constructing CesiumWidget.":o(t._0xc78fb2)};_updateDomInnerHtml(x,r,"cesium-widget-errorPanel-header")})}function _updateDomInnerHtml(n,e,t){const x={_0x22c24e:2027},i=_0x2397ca,s=n.getElementsByClassName(t);for(let o=0;o<s[i(x._0x22c24e)];o++)e[s[o][i(3437)]]&&(s[o].innerHTML=e[s[o].innerHTML])}const DefaultOptions={animation:!1,timeline:!1,fullscreenButton:!1,vrButton:!1,geocoder:!1,sceneModePicker:!1,homeButton:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,infoBox:!1,selectionIndicator:!1,shouldAnimate:!0,showRenderLoopErrors:!0,baseLayerPicker:!1,requestRenderMode:!1};class Map extends BaseClass{constructor(e,t={}){const x={_0x1cfde0:1954,_0x2a24f6:3926,_0x5994b9:1954},i=_0x2397ca;super(t),this.options=t,this._terrainProviderIndex=0,this._controls={},this[i(3292)]={},t.token&&updateAll(t.token),t[i(x._0x1cfde0)]=t[i(1954)]??LangType.ZH,(t.lang===LangType.ZH||t.lang===LangType[i(x._0x2a24f6)])&&toChineseBeforeCreate(),initBeforeCreateDefaultValue(t),e instanceof Cesium__namespace.Viewer?this._viewer=e:this._viewer=this[i(3356)](e,t),this._isFlyAnimation=!1,this._highlightEnabled=!0,this._controlList=new MarsArray,this._thingList=new MarsArray,this._layerList=new MarsArray,this._optionsBasemapsList=new MarsArray,this._optionsLayersList=new MarsArray,this._lights=new MarsArray,this._visibilitys=new MarsArray,this.chinaCRS=this.options.chinaCRS||ChinaCRS.WGS84,(t[i(1954)]===LangType.ZH||t[i(x._0x5994b9)]===LangType.ZHHK)&&toChineseCreateEnd(t,this._viewer),this._sceneEvent=new SceneEvent(this),this._mouseEvent=new MouseEvent(this,t[i(438)]),this[i(3345)]=new SceneOption(this),this._zoomNavigation=new ZoomNavigation(this._viewer),this._initLayers(),this._initControls(),this._initEffect(),this[i(3345)].setOptions(this.options.scene,this.options.scene)}get[_0x2397ca(1795)](){return this._viewer}get container(){return this._viewer.container}get toolbar(){return this._viewer._toolbar}get[_0x2397ca(1733)](){var e;return(e=this._viewer)===null||e===void 0?void 0:e.scene.canvas}get[_0x2397ca(3399)](){const e={_0x4d1d5b:1682},t=_0x2397ca;var x;return(x=this[t(e._0x4d1d5b)])===null||x===void 0?void 0:x.scene}get[_0x2397ca(3400)](){return this._viewer.camera}get[_0x2397ca(188)](){return this._viewer.imageryLayers}get dataSources(){return this[_0x2397ca(1682)].dataSources}get entities(){return this[_0x2397ca({_0x5d4a70:1682}._0x5d4a70)].entities}get[_0x2397ca(3703)](){return this[_0x2397ca({_0x536b8c:1682}._0x536b8c)].clock}get currentTime(){return this._viewer.clock.currentTime}set[_0x2397ca(3718)](e){this._viewer.clock.currentTime=e}get[_0x2397ca(2307)](){return this._viewer.cesiumWidget}get[_0x2397ca(610)](){return this._viewer.trackedEntity}set[_0x2397ca(610)](e){const t={_0x2585dc:610,_0x5b62a8:2796,_0x1005b9:1682,_0xcc5bdd:3735},x=_0x2397ca;e?e instanceof Cesium__namespace.Entity?this._viewer[x(t._0x2585dc)]=e:e[x(394)]instanceof Cesium__namespace[x(t._0x5b62a8)]?this[x(t._0x1005b9)].trackedEntity=e[x(394)]:e.czmObject instanceof Cesium__namespace.Entity?this._viewer.trackedEntity=e[x(t._0xcc5bdd)]:e.trackedEntity instanceof Cesium__namespace.Entity&&(this._viewer.trackedEntity=e.trackedEntity):this._viewer[x(t._0x2585dc)]=void 0}get[_0x2397ca(3653)](){const e=_0x2397ca;return this._viewer[e(3653)]}set terrainProvider(e){this[_0x2397ca({_0x22dc10:2544}._0x22dc10)](e)}async[_0x2397ca(2544)](e){const t={_0x1ebe73:3178,_0x3da7b4:2005,_0x208f26:1682,_0x56662e:316},x=_0x2397ca;if(this[x(3335)]++,e){if(e.then){const i=this._terrainProviderIndex;if(e=await e,i!==this._terrainProviderIndex)return}e._marsOptions=e._marsOptions||{},e[x(t._0x1ebe73)][x(t._0x3da7b4)]=i=>{this._terrain_onLoadSuccess(i)},e._marsOptions.onLoadError=i=>{this._terrain_onLoadError(i)}}this[x(t._0x208f26)][x(3653)]=e,this[x(t._0x56662e)]=e,e instanceof Cesium__namespace[x(1906)]&&this.fire(EventType.terrainLoadSuccess)}get[_0x2397ca(3897)](){const e={_0x47bf33:3388},t=_0x2397ca;return!!this._viewer.terrainProvider[t(e._0x47bf33)]}set[_0x2397ca(3897)](e){const t={_0x50480b:3653,_0x5e2565:1220,_0x4cac33:1682,_0x2fb835:1788},x=_0x2397ca;e?this[x(316)]==null?this[x(t._0x50480b)]=createTerrainProvider(this[x(t._0x5e2565)]()):(this._terrainProviderIndex++,this[x(t._0x4cac33)].terrainProvider=this._defaultTerrainProvider):(this._terrainProviderIndex++,this[x(t._0x4cac33)].terrainProvider=getNoTerrainProvider(),this[x(t._0x2fb835)](EventType.terrainLoadSuccess))}get basemap(){const e={_0x47096b:1354,_0x3654e8:2027},t=_0x2397ca,x=this._optionsBasemapsList[t(e._0x47096b)];if(x[t(e._0x3654e8)]===0)return this._viewer.baseLayerPicker?this._viewer.baseLayerPicker.viewModel[t(1562)]:void 0;for(let i=0;i<x[t(2027)];i++){const s=x[i];if(!s.hasEmptyGroup&&s.isAdded)return s}}set[_0x2397ca(2372)](e){const t={_0x3cd36f:2027,_0x1b66d8:639,_0x3a84b5:3401,_0x2d5344:3044,_0x278d11:3482,_0x318938:2911},x=_0x2397ca;let i,s;e&&isObject(e)?(i=e.id,s=e.name):(i=e,s=e);const o=this[x(3532)].values;if(o[x(t._0x3cd36f)]===0){if(this[x(1682)][x(3095)]){const r=this._viewer.baseLayerPicker[x(3376)];let c;if(e){let _,l=-1;for(let h=0;h<this.options.basemaps.length;h++){const d=this.options.basemaps[h];if(!(d.type==="group"&&d[x(3018)]==null)&&(l++,s==d.name||i==d.id)){_=l;break}}Cesium__namespace[x(t._0x1b66d8)](_)&&(c=r[x(3458)][_])}r.selectedImagery=c,this.fire(EventType.changeBasemap,{layer:c})}return}for(let r=0;r<o.length;r++){const c=o[r];c.hasEmptyGroup||(s==c.name||i==c.id?!c.isAdded&&(c.options[x(3482)]=!0,this.addLayer(c).then(_=>{const l=x;c.toBottom&&c[l(2557)](),this[l(1788)](EventType.changeBasemap,{layer:_})})):c[x(t._0x3a84b5)]&&(delete c[x(t._0x2d5344)][x(t._0x278d11)],this[x(t._0x318938)](c)))}}get[_0x2397ca(3006)](){const e={_0x5d515f:1682},t=_0x2397ca;var x;return(x=this[t(e._0x5d515f)])===null||x===void 0?void 0:x.scene.onlyPickModelPosition}set onlyPickModelPosition(e){const t={_0x2e8292:1682},x=_0x2397ca;this[x(t._0x2e8292)].scene[x(3006)]=e}get onlyPickTerrainPosition(){const e=_0x2397ca;var t;return(t=this._viewer)===null||t===void 0?void 0:t[e(3399)].onlyPickTerrainPosition}set onlyPickTerrainPosition(e){const t={_0x24159b:3399},x=_0x2397ca;this[x(1682)][x(t._0x24159b)].onlyPickTerrainPosition=e}get mouseEvent(){return this._mouseEvent}get[_0x2397ca(3848)](){return this._popupMgr}get tooltip(){return this._tooltipMgr}get[_0x2397ca(2252)](){return this._smallTooltip}get[_0x2397ca(1342)](){return this._contextmenuMgr}get keyboardRoam(){return this[_0x2397ca({_0x7c7583:1891}._0x7c7583)]}get[_0x2397ca(1090)](){return this._controls}get[_0x2397ca(287)](){return this[_0x2397ca({_0x27999b:3292}._0x27999b)]}get graphicLayer(){const e={_0x168bcc:3886,_0x4e9db8:281,_0x130daf:3886},t=_0x2397ca;return this._graphicLayer==null&&(this[t(e._0x168bcc)]=new GraphicLayer({name:t(e._0x4e9db8),private:!0}),this.addLayer(this._graphicLayer)),this[t(e._0x130daf)]}get level(){const e=_0x2397ca,t=Math.abs(this._viewer.camera.positionCartographic.height);return t===this._prevCameraHeight?this._level:(this._level=heightToZoom(t),this._prevCameraHeight=t,this[e(282)])}get[_0x2397ca(1846)](){return this[_0x2397ca(1282)]}set[_0x2397ca(1846)](e){const t={_0x7d5bcd:2932,_0x17c301:881},x=_0x2397ca;if(this._fixedLight=e,!this[x(t._0x7d5bcd)]&&(this._sunlight=this.scene[x(t._0x17c301)]),e){const i=new Cesium__namespace.DirectionalLight({direction:new Cesium__namespace.Cartesian3(.35492591601301104,-.8909182691839401,-.2833588392420772)});this.scene[x(881)]=i}else this.scene[x(t._0x17c301)]=this._sunlight}get[_0x2397ca(1954)](){const e={_0xb944b4:1954},t=_0x2397ca;return this.options[t(e._0xb944b4)]||LangType.ZH}set[_0x2397ca(1954)](e){this.options.lang=e}get[_0x2397ca(2988)](){const e=_0x2397ca;return this.scene.screenSpaceCameraController[e(2828)]}set[_0x2397ca(2988)](e){const t={_0x15e7aa:3399},x=_0x2397ca;this[x(t._0x15e7aa)].screenSpaceCameraController[x(2828)]=e}get highlightEnabled(){return this._highlightEnabled}set highlightEnabled(e){this._highlightEnabled=e,!e&&this.closeHighlight()}_createViewer(e,t){const x={_0x3d4b60:358,_0x57357f:1870,_0x18d1f8:358,_0x4f8725:639,_0x3a4dc5:3585,_0x4abfa2:968,_0x2b623e:299,_0x288ce4:1332,_0x17cac7:3202,_0x363d4f:1248,_0x13f00f:1798,_0x15fd8e:195,_0x5a2e53:2591,_0x5511a4:3482,_0x4d9e62:1233,_0x14f60d:2016,_0x33fa74:3054,_0x2c1b4e:3436,_0x19cfec:3653,_0x381d45:188},i=_0x2397ca;if(!e)throw new Error("Map：id 不能为空");const s={...DefaultOptions,...t.control,...t.scene,baseLayerPicker:!1,timeline:!1};if(s[i(679)]&&!(s.globe instanceof Cesium__namespace.Globe)&&delete s[i(679)],s[i(2805)]&&delete s[i(2805)],s.contextmenu&&delete s.contextmenu,s.location&&delete s.location,s[i(424)]&&delete s.mouseDownView,s[i(834)]&&delete s.navigation,Cesium__namespace.defined(s.mapProjection)&&(s.mapProjection===CRS.EPSG3857?s[i(x._0x3d4b60)]=new Cesium__namespace[i(x._0x57357f)](s.ellipsoid):s[i(x._0x18d1f8)]=new Cesium__namespace.GeographicProjection(s.ellipsoid)),Cesium__namespace[i(x._0x4f8725)](s.ellipsoid)&&(s.globe=new Cesium__namespace.Globe(s.ellipsoid)),Cesium__namespace.defined(s[i(x._0x3a4dc5)])&&isPlainObject(s.skyBox))switch(s.skyBox[i(x._0x4abfa2)]){case"ground":case"GroundSkyBox":s.skyBox=new GroundSkyBox(s.skyBox);break;case i(x._0x2b623e):case i(3105):s[i(3585)]=new MultipleSkyBox(s.skyBox);break;default:s.skyBox=new Cesium__namespace[i(x._0x288ce4)](s.skyBox);break}s.geocoder==="gaode"&&t.lang===LangType.ZH&&(s.geocoder=new GaodePOIGeocoder(s[i(1402)]),s.geocoder[i(4014)]=this);let o=!1;if(s.baseLayerPicker){var r;if(!s.imageryProviderViewModels&&((r=t[i(x._0x17cac7)])===null||r===void 0?void 0:r[i(2027)])>0){const l=getImageryProviderViewModels(t.basemaps,this.options[i(x._0x363d4f)]);s.imageryProviderViewModels=l.imageryProviderViewModels,l.selectedIndex===-1?o=!0:s.selectedImageryProviderViewModel=l.imageryProviderViewModels[l[i(x._0x13f00f)]]}if(!s.terrainProviderViewModels){var c;s.terrainProviderViewModels=getTerrainProviderViewModels(this._getTerrainOptions()),s[i(x._0x15fd8e)]=s[i(x._0x5a2e53)][(c=t.terrain)!==null&&c!==void 0&&c[i(x._0x5511a4)]?1:0]}}else s.imageryProvider==null&&(o=!0,s.baseLayer=Cesium__namespace[i(4021)][i(1126)](Cesium__namespace[i(x._0x4d9e62)][i(x._0x14f60d)](Cesium__namespace[i(1672)](i(x._0x33fa74))))),t[i(x._0x2c1b4e)]&&t.terrain[i(3482)]?this.terrainProvider=createTerrainProvider(this._getTerrainOptions()):s[i(x._0x19cfec)]=getNoTerrainProvider();const _=new Cesium__namespace.Viewer(e,s);if(o){const l=_[i(x._0x381d45)],h=l[i(2027)];for(let d=0;d<h;d++){const u=l[i(2001)](0);l.remove(u,!0)}}return _}_terrain_onLoadSuccess(e){this.fire(EventType.terrainLoadSuccess,{data:e})}[_0x2397ca(2071)](e){this.hasTerrain=!1,this.fire(EventType.terrainLoadError,{error:e})}_getTerrainOptions(){const e={_0xe3d415:3436},t=_0x2397ca;return this[t(3044)].terrain?{templateValues:this.options.templateValues,marsOptions:{onLoadSuccess:i=>{this._terrain_onLoadSuccess(i)},onLoadError:i=>{this[t(2071)](i)}},...this.options[t(e._0xe3d415)]}:this.options.terrain}setOptions(e){const t={_0x165e7c:3044,_0x2a64dd:3653,_0x200d10:1220,_0x59f143:3575,_0x30f99b:2394,_0x9913da:3482,_0x5a55b5:407,_0x4db92c:3521},x=_0x2397ca;if(!e||Object[x(390)](e)[x(2027)]===0)return this;this.options=merge(this.options,e);for(const i in e){const s=e[i];switch(i){case"scene":{this._sceneOption.setOptions(this[x(t._0x165e7c)][x(3399)],s);break}case"mouse":{this._mouseEvent.setOptions(this[x(t._0x165e7c)].mouse);break}case"terrain":{this[x(t._0x2a64dd)]=createTerrainProvider(this[x(t._0x200d10)]());break}case"basemaps":{this[x(t._0x59f143)](s);break}case"layers":{this.setLayersOptions(s);break}case x(t._0x30f99b):{this[x(2394)]=s||ChinaCRS.WGS84;break}case"lang":{(s===LangType.ZH||s===LangType.ZHHK)&&toChineseBeforeCreate(this[x(3044)]);break}case"token":{updateAll(s);break}case"control":{for(const o in s){const r=this.options.control[o],c=this._controls[o];if(c)!r||(r==null?void 0:r.enabled)===!1?(c[x(t._0x9913da)]=!1,c.enabled=!1):(c.show=!0,c.enabled=!0,c.setOptions&&r!==!0&&c.setOptions(r));else{if(!r||r[x(t._0x5a55b5)]===!1)continue;const _=create$1(o,r);_?this[x(t._0x4db92c)](_):logWarn("createControl:无该类型控件暂不能创建",o,r)}}break}case x(362):{for(const o in s){const r=this.options.effect[o],c=this._effects[o];if(c)!r||(r==null?void 0:r.enabled)===!1?c.enabled=!1:(c[x(407)]=!0,c.setOptions&&c.setOptions(r));else{if(!r||r.enabled===!1)continue;const _=create(o,r);_&&this.addEffect(_)}}break}default:{logWarn("未处理参数",s);break}}}return this}setSceneOptions(e){const t={_0x297cdf:3044},x=_0x2397ca;return!e||Object.keys(e).length===0?this:(this.options.scene=merge(this.options.scene,e),this._sceneOption[x(2403)](this[x(t._0x297cdf)].scene,e),this)}getOptions(){return clone(this.options,["parent","eventParent"])}getCurrentOptions(){const e={_0x81f5d:3399,_0x243716:3330},t=_0x2397ca,x=this.getOptions();x[t(e._0x81f5d)].center=this.getCameraView(),x.layers=[];const i=this[t(e._0x243716)]({basemaps:!1});for(let s=i.length-1;s>=0;s--){const o=i[s];o[t(1731)]||o.parent||x.layers[t(2434)](o[t(1180)]())}return x}getDefaultContextMenu(){return getDefaultContextMenu(this)}getCenter(){return getCenter(this.scene)}getCameraDistance(){const e={_0x2b72f7:799,_0x4a5f88:4002},t=_0x2397ca,x=this.getCenter();return x?Cesium__namespace.Cartesian3.distance(x[t(e._0x2b72f7)](),this._viewer.camera[t(e._0x4a5f88)]):0}[_0x2397ca(1787)](e){return getExtent(this,e)}[_0x2397ca(1656)](e){const t={_0x3f91d0:679},x=_0x2397ca;var i,s;if(!((i=this.options[x(3399)])!==null&&i!==void 0&&(s=i.globe)!==null&&s!==void 0&&s.realAlt))return e;const o=this._viewer.scene[x(t._0x3f91d0)].terrainExaggeration||this._viewer.scene.terrainExaggeration;return o?e/o:e}expImage(e){return expImage(this._viewer,e)}setCursor(e=""){const t={_0x301422:571},x=_0x2397ca;this[x(3281)]=e,this[x(t._0x301422)].style.cursor=e}_setEditCursor(e){const t={_0x4af2c8:571,_0x1caa03:672,_0x4356dc:3281},x=_0x2397ca;this[x(571)]&&(e?this[x(t._0x4af2c8)].style[x(t._0x1caa03)]="crosshair":this.container.style.cursor=this[x(t._0x4356dc)]||"")}[_0x2397ca(1320)](e){return pick3DTileset(this.scene,e)}pickTilesetLayer(e){const t=_0x2397ca,x=pick3DTileset(this[t(3399)],e);return x?this.getLayerById(x._mars3d_layerId):null}on(e,t,x){return!this[_0x2397ca({_0x537fb6:1389}._0x537fb6)].on(e,t,x||this)&&super.on(e,t,x),this}off(e,t,x){return!this[_0x2397ca({_0x48b043:1389}._0x48b043)].off(e,t,x||this)&&super.off(e,t,x),this}listens(e,t){const x=_0x2397ca;return this._sceneEvent[x(3146)](e)?this[x(1389)][x(3051)](e):super.listens(e,t)}[_0x2397ca(2919)](){const e={_0x25ec36:3044,_0x2d7508:3044,_0xf14a84:1623,_0x141d96:1689,_0x72ee56:3018,_0x15b4d7:3044,_0x1bb0f9:1248,_0x325fce:1777,_0x38cca5:2434,_0x5aee03:2434,_0x25a853:952},t={_0x3308e7:1788},x=_0x2397ca;this[x(e._0x25ec36)].basemaps=this[x(3044)].basemaps||[],this[x(3044)].layers=this.options.layers||[],this._layerIdx=1,this._arrLayerIdx=[];const i=this[x(e._0x2d7508)].basemaps,s=this[x(3044)].layers;for(let c=0;c<i.length;c++){const _=i[c];_.id&&(this._arrLayerIdx.indexOf(_.id)!==-1&&(delete _.id,logWarn("addLayer:图层id存在冲突，已重新赋值id",_)),this._arrLayerIdx.push(_.id))}for(let c=0;c<s.length;c++){const _=s[c];_.id&&(this._arrLayerIdx.indexOf(_.id)!==-1&&(delete _.id,logWarn(x(e._0xf14a84),_)),this._arrLayerIdx.push(_.id))}const o=[],r=[];if(!this._viewer.baseLayerPicker)for(let c=0;c<i.length;c++){const _=i[c];!_.name&&(_.name=""),!_.id&&(_.id=this.getNextLayerId());const l=create$2(_,this.options.templateValues);if(l){if(l._hasMapInit=!0,_.show){const h=this.addLayer(l);r.push(h)}else delete _.show;if(this[x(3532)].set(_.id,l),o.push(_),l[x(e._0x141d96)]&&_.layers)for(let h=0;h<_[x(e._0x72ee56)][x(2027)];h++){const d=_.layers[h];d.pid=_.id,d.parent=l,!d.id&&(d.id=this.getNextLayerId()),o[x(2434)](d)}}}for(let c=0;c<s.length;c++){const _=s[c];!_.id&&(_.id=this.getNextLayerId());const l=create$2(_,this[x(e._0x15b4d7)][x(e._0x1bb0f9)]);if(l){if(l._hasMapInit=!0,_.show){const h=this.addLayer(l);r.push(h)}else delete _.show;if(this[x(e._0x325fce)].set(_.id,l),o[x(e._0x38cca5)](_),l.hasChildLayer&&_.layers)for(let h=0;h<_.layers.length;h++){const d=_[x(e._0x72ee56)][h];d.pid=_.id,d.parent=l,!d.id&&(d.id=this[x(2123)]()),o[x(e._0x5aee03)](d)}}}for(let c=0;c<o.length;c++){const _=o[c];let l=Number(_.zIndex);isNaN(l)&&(l=c),_[x(e._0x25a853)]=l;const h=this._layerList.get(_.id);h&&(h[x(952)]=l)}r[x(2434)](new Promise((c,_)=>{function l(h){h===0&&(this.off(EventType.tileLoadProgress,l),c(!0))}this.on(EventType.tileLoadProgress,l)})),Promise.all(r)[x(1286)](c=>{this[x(t._0x3308e7)](EventType.load,{list:c})})}setBasemapsOptions(e,t=!0){const x={_0x5938d1:2027,_0x276213:3202,_0x5a47e4:3532,_0x13c6d0:3044,_0x2725aa:3018,_0x4a3d30:3085,_0x556321:3095,_0x2b9b66:3095},i={_0x204a70:2557},s=_0x2397ca;if(!(!e||e[s(x._0x5938d1)]===0)){if(this.options[s(x._0x276213)]=e,t){this[s(x._0x5a47e4)].forEach(o=>{o.destroy()}),this._optionsBasemapsList.removeAll();for(let o=0;o<e.length;o++){const r=e[o];!r.name&&(r.name=""),!r.id&&(r.id=this.getNextLayerId());let c=Number(r.zIndex);isNaN(c)&&(c=o),r.zIndex=c;const _=create$2(r,this[s(x._0x13c6d0)].templateValues);if(_&&(r.show&&(this.addLayer(_),_.readyPromise.then(function(l){const h=s;l.toBottom&&l[h(i._0x204a70)]()})),this[s(3532)].set(r.id,_),_.hasChildLayer&&r.layers))for(let l=0;l<r[s(x._0x2725aa)].length;l++){const h=r.layers[l];h.pid=r.id,h[s(x._0x4a3d30)]=_,!h.id&&(h.id=this.getNextLayerId())}}}return this.controls[s(x._0x556321)]&&this[s(1090)][s(x._0x2b9b66)].reload(),this._optionsBasemapsList.values}}setLayersOptions(e){const t={_0x59a74d:3018,_0x1f9523:2027,_0x3164c5:3044,_0x58a013:2123,_0x191935:1777},x=_0x2397ca;if(!(!e||e.length===0)){this._optionsLayersList.forEach(i=>{i[_0x3361(2941)]()}),this._optionsLayersList.removeAll(),this.options[x(t._0x59a74d)]=e;for(let i=0;i<e[x(t._0x1f9523)];i++){const s=e[i];!s.id&&(s.id=this.getNextLayerId());const o=create$2(s,this[x(t._0x3164c5)].templateValues);if(o&&(s.show&&this[x(3615)](o),this._optionsLayersList[x(1912)](s.id,o),o[x(1689)]&&s.layers))for(let r=0;r<s.layers.length;r++){const c=s[x(3018)][r];c.pid=s.id,c.parent=o,!c.id&&(c.id=this[x(t._0x58a013)]())}}return this[x(t._0x191935)][x(1354)]}}[_0x2397ca(2123)](){const e={_0xb06d22:884,_0x3601f7:775,_0x29b0f3:2434},t=_0x2397ca;for(;this._arrLayerIdx[t(e._0xb06d22)](this[t(e._0x3601f7)])!==-1;)this._layerIdx++;return this._arrLayerIdx[t(e._0x29b0f3)](this._layerIdx),this._layerIdx}[_0x2397ca(3615)](e,t){return new Promise((x,i)=>{const s=_0x3361;if(!e||!e._onAdd){x(!1);return}if(Cesium__namespace.defined(t)&&(e.show=t),e._state===State.ADDED){x(!1);return}e._onAdd(this);const o=this._layerList[s(2001)](e.id);o&&o!==e&&(e.id=this.getNextLayerId(),logWarn("addLayer:图层id存在冲突，已重新赋值id",e)),this._layerList[s(1912)](e.id,e),e.readyPromise.then(function(r){x(!0)})})}[_0x2397ca(2911)](e,t){const x={_0x1d6380:2689},i=_0x2397ca;if(!e)return this;if((isString(e)||isNumber(e))&&(e=this._layerList.get(e),!e))return this;if(e.isAdded)return this._layerList.remove(e.id),t&&e[i(2265)]&&e.clear(),e._onRemove(),t&&(this._optionsBasemapsList.remove(e.id),this._optionsLayersList[i(x._0x1d6380)](e.id),e.destroy()),this}[_0x2397ca(3943)](e){const t=_0x2397ca;return e?(isObject(e)&&(e=e.id),this._layerList[t(741)](e)):!1}eachLayer(e,t){const x=_0x2397ca;return this._layerList[x(1255)](e,t||this),this}[_0x2397ca(3697)](e,t){return isObject(e)&&(e=e.id),this.getLayerByAttr(e,t)}getLayerById(e){const t={_0x4279c9:1777,_0x4f66b9:3330},x=_0x2397ca;let i=this._layerList.get(e);if(i||(i=this[x(t._0x4279c9)].get(e),i)||(i=this._optionsBasemapsList.get(e),i))return i;const s=this[x(t._0x4f66b9)]({basemaps:!0,layers:!0});for(let o=0,r=s.length;o<r;o++){const c=s[o];if(c.id===e)return c;if(c.hasChildLayer&&c.arrLayer)for(let _=0;_<c.arrLayer.length;_++){const l=c[x(3644)][_];if(l.id===e)return l}}}[_0x2397ca(3457)](e,t){const x={_0x26b468:625},i=_0x2397ca;let s=this._layerList.getByAttr(e,t);if(s||(s=this._optionsLayersList.getByAttr(e,t),s)||(s=this._optionsBasemapsList[i(x._0x26b468)](e,t),s))return s}[_0x2397ca(1121)](e,t){const x={_0x41deb6:1082},i=_0x2397ca,s=this[i(x._0x41deb6)][i(1793)](e,t);let o=this._optionsLayersList.getListByAttr(e,t);for(let r=0,c=o.length;r<c;r++){const _=o[r];!this[i(1082)].contains(_.id)&&s.push(_)}o=this._optionsBasemapsList[i(1793)](e,t);for(let r=0,c=o.length;r<c;r++){const _=o[r];!this._layerList.contains(_.id)&&s.push(_)}return s}getLayers(e={}){const t={_0x3f4d1b:3202},x={_0x12ddee:3202},i=_0x2397ca;let s=[];return e.basemaps&&(s=s.concat(this[i(3532)].values)),e.layers&&(s=s.concat(this._optionsLayersList.values)),e.filter&&(e[i(t._0x3f4d1b)]=!1,e.layers=!1),this._layerList[i(1255)](o=>{const r=i;o[r(1731)]||e.childs===!1&&o.parent||Cesium__namespace[r(639)](e[r(x._0x12ddee)])&&this[r(3532)].contains(o.id)||Cesium__namespace[r(639)](e[r(3018)])&&this._optionsLayersList.contains(o.id)||s[r(2434)](o)}),s}getBasemaps(e){const t={_0x59c6c5:1255,_0x35e267:1354},x=_0x2397ca;if(this._viewer.baseLayerPicker)return console[x(855)](x(375)),[];if(e){const i=[];return this._optionsBasemapsList[x(t._0x59c6c5)](s=>{const o=x;s.hasEmptyGroup||i[o(2434)](s)}),i}else return this[x(3532)][x(t._0x35e267)]}[_0x2397ca(1704)](){const e=_0x2397ca;let t=[];return t=t.concat(this.getBasemaps(!0)),this._optionsLayersList.forEach(x=>{x.isTile&&!x.isPrivate&&t.push(x)}),this[e(1082)].forEach(x=>{const i=e;!x[i(313)]||x.isPrivate||this._optionsBasemapsList.contains(x.id)||this._optionsLayersList.contains(x.id)||t[i(2434)](x)}),t}_initControls(){const e={_0x5a42d7:3399,_0x12837d:1731,_0x4ff732:1664,_0x22d8c:1342,_0x1e8904:3521,_0x503ade:1891,_0x2d9337:1731},t=_0x2397ca;var x,i,s;const o=((x=this.options)===null||x===void 0?void 0:x[t(1214)])||{};add((i=this[t(1682)])===null||i===void 0?void 0:i[t(e._0x5a42d7)],this.options.licenseUrl),this._popupMgr=new PopupMgr(o.popup),this._popupMgr.isPrivate=!0,this[t(3521)](this._popupMgr),this._tooltipMgr=new TooltipMgr(o.tooltip),this._tooltipMgr[t(e._0x12837d)]=!0,this.addControl(this._tooltipMgr),this[t(e._0x4ff732)]=new ContextMenu(o.contextmenu),this._contextmenuMgr.isPrivate=!0,this.addControl(this._contextmenuMgr),(((s=o[t(e._0x22d8c)])===null||s===void 0?void 0:s.hasDefault)??!0)&&this.bindContextMenu(this.getDefaultContextMenu()),this[t(240)]=new SmallTooltip(o.smallTooltip),this._smallTooltip.isPrivate=!0,this[t(e._0x1e8904)](this[t(240)]),this[t(e._0x503ade)]=new KeyboardRoam({enabled:!1,...o.keyboardRoam}),this._keyboardRoam[t(e._0x2d9337)]=!0,this[t(e._0x1e8904)](this[t(e._0x503ade)]);for(const r in o){const c=o[r];if(!c||c.enabled===!1)continue;const _=create$1(r,c);_&&this[t(e._0x1e8904)](_)}}addControl(e,t){const x={_0x5210ff:3149,_0x5eb1c3:407,_0x548402:4061,_0x3831c3:968},i=_0x2397ca;return!e||!e._onAdd?this:this._controls[e.type]?(logWarn("地图上已有"+e[i(968)]+i(x._0x5210ff)+e[i(968)]+" 对象 ",this),this):(Cesium__namespace.defined(t)&&(e[i(x._0x5eb1c3)]=t),e[i(x._0x548402)](this),this._controlList.set(e.id,e),this._controls[e[i(x._0x3831c3)]]=e,this.fire(EventType.addControl,{control:e}),this)}removeControl(e,t){const x=_0x2397ca;return e?(this[x(556)].remove(e.id),delete this._controls[e[x(968)]],e[x(2175)](),this.fire(EventType.removeControl,{control:e}),t&&e.destroy(),this):this}[_0x2397ca(3294)](e){return this[_0x2397ca({_0x49fbf9:556}._0x49fbf9)].contains((e==null?void 0:e.id)||e)}eachControl(e,t){return this._controlList.forEach(e,t||this),this}[_0x2397ca(3832)](e,t="type"){return this._controlList.getByAttr(e,t)}_initEffect(){const e={_0x19d505:362},t=_0x2397ca;var x;const i=(x=this.options)===null||x===void 0?void 0:x[t(e._0x19d505)];if(i)for(const s in i){const o=i[s];if(!o||o.enabled===!1)continue;const r=create(s,o);r&&this.addEffect(r)}}[_0x2397ca(1164)](e){const t={_0x48d2ae:968,_0x3465ba:528,_0x402e09:786,_0x1afde6:1164},x=_0x2397ca;if(!e||!e._onAdd)return this;if(this[x(3292)][e.type]){logError$1("地图上已有"+e[x(t._0x48d2ae)]+x(t._0x3465ba)+e.type+x(t._0x402e09),this);return}this.addThing(e),this[x(3292)][e.type]=e,this.fire(EventType[x(t._0x1afde6)],{effect:e})}[_0x2397ca(4024)](e,t){const x={_0x2cf61d:3292},i=_0x2397ca;delete this[i(x._0x2cf61d)][e.type],this.fire(EventType.removeEffect,{effect:e}),this.removeThing(e,t)}[_0x2397ca(3987)](e,t="type"){return this[_0x2397ca(1063)](e,t)}addThing(e){const t=_0x2397ca;return!e||!e._onAdd?this:(e._onAdd(this),this._thingList[t(1912)](e.id,e),this)}removeThing(e,t){const x=_0x2397ca;return e?(this._thingList[x(2689)](e.id),t&&e.clear&&e.clear(),e._onRemove(),t&&e.destroy(),this):this}hasThing(e){const t=_0x2397ca;return this._thingList[t(741)]((e==null?void 0:e.id)||e)}eachThing(e,t){const x={_0x2be3b7:1255},i=_0x2397ca;return this._thingList[i(x._0x2be3b7)](e,t||this),this}getThing(e,t){const x={_0x182eba:2162},i=_0x2397ca;return this[i(x._0x182eba)][i(625)](e,t)}[_0x2397ca(1337)](e){return getLangText(e,this[_0x2397ca({_0x43000e:1954}._0x43000e)])}zoomIn(e,t){const x={_0x11cac5:3297},i=_0x2397ca,s=this[i(x._0x11cac5)].zoomIn(e,t);return s&&this.fire(EventType.zoom,{ztype:"zoomIn",relativeAmount:e,mandatory:t}),s}zoomOut(e,t){const x={_0x5c32bf:1788},i=_0x2397ca,s=this._zoomNavigation.zoomOut(e,t);return s&&this[i(x._0x5c32bf)](EventType.zoom,{ztype:i(3004),relativeAmount:e,mandatory:t}),s}[_0x2397ca(3164)](e){const t={_0x306119:1682,_0x25653e:3569,_0x470288:3830,_0x416e0c:991,_0x9c4396:424,_0x123efc:424},x=_0x2397ca;this._hasRightTilt=e,e?(this[x(t._0x306119)].scene.screenSpaceCameraController.tiltEventTypes=[Cesium__namespace.CameraEventType.RIGHT_DRAG,Cesium__namespace.CameraEventType.PINCH,{eventType:Cesium__namespace.CameraEventType[x(t._0x25653e)],modifier:Cesium__namespace[x(3435)][x(1674)]},{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier[x(1674)]}],this._viewer.scene[x(t._0x470288)].zoomEventTypes=[Cesium__namespace[x(2976)][x(1607)],Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace.CameraEventType.PINCH]):(this._viewer.scene.screenSpaceCameraController.tiltEventTypes=[Cesium__namespace.CameraEventType.MIDDLE_DRAG,Cesium__namespace[x(2976)].PINCH,{eventType:Cesium__namespace.CameraEventType.LEFT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL},{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this._viewer.scene.screenSpaceCameraController[x(t._0x416e0c)]=[Cesium__namespace.CameraEventType.RIGHT_DRAG,Cesium__namespace[x(2976)].WHEEL,Cesium__namespace.CameraEventType[x(3723)]]),this.controls[x(t._0x9c4396)]&&this.controls[x(t._0x123efc)].changeMouseModel()}clearPitchRange(){const e={_0x22775b:1299,_0x5d4c06:3573},t=_0x2397ca;delete this._pitch_max,delete this[t(574)],delete this._pitch_minHeight,this._viewer.scene.screenSpaceCameraController.inertiaSpin=.9,this._viewer.scene.screenSpaceCameraController.inertiaTranslate=.9,this[t(3573)](EventType.mouseDown,this._setPitchRange_rightDownHandler,this),this.off(EventType[t(e._0x22775b)],this[t(1762)],this),this.off(EventType[t(2479)],this._setPitchRange_mouseMoveHandler,this),this[t(e._0x5d4c06)](EventType[t(1861)],this._setPitchRange_cameraChangedHandler,this)}setPitchRange(e,t=-90){const x={_0x2ecf06:574},i=_0x2397ca;this.clearPitchRange(),this._viewer[i(3399)].screenSpaceCameraController.inertiaSpin=0,this._viewer.scene.screenSpaceCameraController.inertiaTranslate=0,this._pitch_max=Cesium__namespace.Math[i(2500)](e),this[i(x._0x2ecf06)]=Cesium__namespace.Math[i(2500)](t),this.on(EventType.mouseDown,this[i(3168)],this),this.on(EventType.mouseUp,this._setPitchRange_rightUpHandler,this)}_setPitchRange_rightDownHandler(e){const t={_0x51b841:1721,_0x118b9b:3399},x=_0x2397ca;this._viewer.scene.mode===Cesium__namespace[x(t._0x51b841)][x(1144)]&&(this._viewer.camera.positionCartographic.height>this._viewer[x(t._0x118b9b)].screenSpaceCameraController.minimumCollisionTerrainHeight||(this._pitch_minHeight=this._viewer.camera.positionCartographic.height,this.on(EventType.mouseMove,this[x(1444)],this),this.on(EventType.cameraChanged,this._setPitchRange_cameraChangedHandler,this)))}[_0x2397ca(1762)](e){const t={_0xcd27a0:3830,_0x502a1e:3573,_0x433220:3573},x=_0x2397ca;this._viewer.scene[x(t._0xcd27a0)][x(872)]=!0,this[x(t._0x502a1e)](EventType.mouseMove,this._setPitchRange_mouseMoveHandler,this),this[x(t._0x433220)](EventType.cameraChanged,this._setPitchRange_cameraChangedHandler,this)}_setPitchRange_mouseMoveHandler(e){const t={_0x356b4b:4050,_0xca16cf:3400},x=_0x2397ca;let i=!0;const s=e[x(t._0x356b4b)].y<e.startPosition.y;s&&this._viewer[x(t._0xca16cf)].pitch>this._pitch_max||!s&&this._viewer.camera.pitch<this._pitch_min?i=!1:i=!0,this._viewer.scene.screenSpaceCameraController[x(872)]=i}_setPitchRange_cameraChangedHandler(e){const t={_0x22fddd:368,_0x3d6be8:3830,_0x46ce38:574,_0x580b48:1682,_0x26c4ff:1184},x=_0x2397ca;if(this._viewer.scene[x(2033)]!==Cesium__namespace[x(1721)].SCENE3D||this._viewer[x(3400)][x(t._0x22fddd)][x(3872)]>this[x(1682)].scene.screenSpaceCameraController.minimumCollisionTerrainHeight)return;let i=this._viewer[x(3400)].pitch;if(i>this._pitch_max||i<this._pitch_min){this._viewer.scene[x(t._0x3d6be8)].enableTilt=!1,i>this._pitch_max?i=this[x(791)]:i<this._pitch_min&&(i=this[x(t._0x46ce38)]);const s=Cesium__namespace.Cartesian3[x(238)](this[x(t._0x580b48)][x(3400)].positionCartographic[x(t._0x26c4ff)],this._viewer[x(3400)].positionCartographic.latitude,Math.max(this._viewer.camera.positionCartographic[x(3872)],this._pitch_minHeight));this[x(t._0x580b48)].camera.cancelFlight(),this[x(1682)].camera.setView({destination:s,orientation:{pitch:i}}),this[x(1682)].scene.screenSpaceCameraController.enableTilt=!0}}setPitch(e,t={}){const x=_0x2397ca,i=this.getCenter();if(!i)return Promise.resolve(!1);const s=Cesium__namespace.Cartesian3.distance(i.toCartesian(),this._viewer.camera.positionWC);return this[x(2703)](i,{...t,radius:s,pitch:e})}[_0x2397ca(3955)](){const e=_0x2397ca;return Route.clearLastCamera(),this[e(3165)]=!1,this[e(1682)][e(3400)].cancelFlight(),this}cancelFlight(){return this.cancelFlyTo()}getCameraView(e){return getCameraView(this[_0x2397ca({_0x16c154:3400}._0x16c154)],e)}[_0x2397ca(2074)](e,t={}){const x={_0x408b40:3409,_0x29775c:1155,_0x17ce23:402,_0x53cd5d:639,_0x4ff5eb:1722,_0x8053dd:3876,_0x39b416:3400};return new Promise((i,s)=>{const o=_0x3361;if(!e||e[o(x._0x408b40)]===0&&e.lat===0&&e.alt===0){i(!1);return}isNumber(t)&&(t={duration:t});let r=t.minHeight??2500;this[o(1682)].camera.positionCartographic.height<r&&(r=this._viewer[o(3400)].positionCartographic.height),Cesium__namespace.defined(e[o(x._0x29775c)])&&(r=e.alt);let c;Cesium__namespace.defined(e.lng)&&Cesium__namespace[o(639)](e.lat)?c=Cesium__namespace.Cartesian3[o(x._0x17ce23)](e.lng,e.lat,r):Cesium__namespace.defined(e.x)&&Cesium__namespace[o(x._0x53cd5d)](e.y)?(Cesium__namespace.defined(e.z)&&(r=e.z),c=Cesium__namespace.Cartesian3.fromDegrees(e.x,e.y,r)):c=this._viewer.camera.position;const _={...t,destination:c,orientation:{heading:Cesium__namespace.Math.toRadians(e[o(x._0x4ff5eb)]??0),pitch:Cesium__namespace.Math.toRadians(e[o(227)]??-90),roll:Cesium__namespace[o(x._0x8053dd)].toRadians(e.roll??0)},complete:()=>{t.complete&&t.complete(),i(!0)},cancel:()=>{t.cancel&&t.cancel(),i(!1)}};t.duration===0?(this[o(1682)].camera[o(1160)](_),t[o(1632)]&&t.complete(),i(!0)):this._viewer[o(x._0x39b416)].flyTo(_)})}centerAt(e,t){return this.setCameraView(e,t)}flyHome(e){const t=_0x2397ca;var x,i,s,o;(x=this.options)!==null&&x!==void 0&&(i=x.scene)!==null&&i!==void 0&&i[t(2006)]?this.setCameraView(this.options.scene.center,e):(s=this.options)!==null&&s!==void 0&&(o=s.scene)!==null&&o!==void 0&&o.extent&&this.flyToExtent(this.options.scene.extent,e)}setCameraViewList(e,t={}){this.cancelFlyTo(),this._setCameraViewListArr=e,this._setCameraViewListOptions=t,this._setCameraViewListState=!0,this._setCameraViewListItem(0,t)}pauseCameraViewList(){this[_0x2397ca(3955)]()}proceedCameraViewList(){const e=_0x2397ca;this._setCameraViewListState=!0,this._setCameraViewListItem(this._setCameraViewListIndex,this[e(894)])}_setCameraViewListItem(e,t){const x={_0x127287:3165,_0x853b19:1832},i={_0x354068:2045},s=_0x2397ca,o=this;if(!this._setCameraViewListState||e<0||e>=this._setCameraViewListArr[s(2027)]){this[s(x._0x127287)]=!1,t!=null&&t.complete&&t.complete();return}this._setCameraViewListIndex=e;const r=this[s(420)][e];r[s(1832)]&&r[s(x._0x853b19)]();let c;this.setCameraView(r,{easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,...t,duration:r.duration,complete:function(){const _=s;r.onEnd&&r[_(3029)]();const l=r[_(i._0x354068)]??1;c=setTimeout(()=>{o[_(3057)](++e,t)},l*1e3)},cancle:function(){const _=s;this._setCameraViewListState=!1,clearTimeout(c),t!=null&&t.cancel&&t[_(3139)]()}})}flyTo(e,t){const x={_0x5be5a6:1682},i=_0x2397ca;if(e)return this[i(x._0x5be5a6)].flyTo(e,t)}[_0x2397ca(2718)](e,t={}){const x={_0x442da4:2027},i=_0x2397ca;if(!e||e.length===0)return Promise.resolve(!1);if(e.flyTo){var s;return t[i(1034)]=(s=e[i(357)])===null||s===void 0?void 0:s.clampToGround,e.flyTo(t)}if(!Array.isArray(e))return Promise.resolve(!1);if(e[i(2027)]===1)return e[0].flyTo(t);let o;for(let r=0,c=e[i(x._0x442da4)];r<c;r++){const _=e[r];if(!_.getRectangle)continue;const l=_.getRectangle();Cesium__namespace[i(639)](l)&&(o?o=Cesium__namespace.Rectangle.union(l,o):o=l)}return this.flyToExtent(o,t)}flyToPositions(e,t={}){const x={_0x191998:2703,_0x8a5fa6:3863,_0x1828dd:242,_0x3a2d4a:1383,_0x4cb18f:1587},i=_0x2397ca;if(!e||e.length===0)return Promise.resolve(!1);if(e.length===1)return this[i(x._0x191998)](e[0],t);const s=getRectangle(e,!0);return s?s.xmin===s.xmax&&s[i(x._0x1828dd)]===s[i(1606)]||s.xmax-s[i(x._0x3a2d4a)]>200?this[i(2703)]([s.xmin,s[i(242)],s.height],t):(s.height=getMaxHeight(e),t.scale=t.scale||1.2,this[i(x._0x4cb18f)](s,t)):Promise[i(x._0x8a5fa6)](!1)}flyToExtent(e,t={}){const x={_0x278663:3399,_0x559fba:679},i=_0x2397ca;e instanceof Cesium__namespace.Rectangle&&(e=formatRectangle(e));const s=e.xmin,o=e.xmax,r=e.ymin,c=e[i(1606)],_=(s+o)/2,l=(r+c)/2;if(_===0&&l===0)return Promise.resolve(!1);let h=e.height??t.height??0;if(h===0){var d;h=getHeight((d=this._viewer)===null||d===void 0?void 0:d[i(x._0x278663)],Cesium__namespace.Cartesian3.fromDegrees(_,l))}const u=Cesium__namespace.Rectangle.fromDegrees(s,r,o,c),m=Math.max(u.height,u[i(1526)]);if(m>0){var f;t.radius=(t[i(3189)]??0)+Cesium__namespace.Math[i(630)](m,(f=this._viewer)===null||f===void 0?void 0:f[i(3399)][i(x._0x559fba)].ellipsoid.maximumRadius)}return this.flyToPoint(new LngLatPoint(_,l,h),t)}flyToPoint(e,t={}){const x={_0x5a73bf:1682,_0x59bf93:1155,_0x49d2a0:3892,_0x1c0008:639,_0x2629af:227,_0x2c43ac:778,_0x5db5cd:3400,_0x232305:1183,_0x5eee0c:1046,_0x493dcf:2489,_0x38505c:1632};return new Promise((i,s)=>{const o={_0x46a810:1155,_0x5dcc6e:1034,_0x8e738f:2703},r=_0x3361;if(!e){i(!1);return}e=LngLatPoint.parse(e);let c=e[r(799)]();if(t.clampToGround)if(this.hasTerrain){getSurfaceHeight(this[r(x._0x5a73bf)].scene,c,{has3dtiles:!0})[r(1286)](m=>{const f=r;e[f(o._0x46a810)]=m.height*(this._viewer[f(3399)].globe.terrainExaggeration||1),delete t[f(o._0x5dcc6e)],this[f(o._0x8e738f)](e,t).then(g=>{i(g)})});return}else e[r(x._0x59bf93)]=0,c=e.toCartesian();let _=t.radius||this.getCameraDistance()||100;Cesium__namespace[r(639)](t.scale)&&t.scale>0&&(_*=t.scale),Cesium__namespace.defined(t[r(x._0x49d2a0)])&&_<t.minHeight&&(_=t.minHeight),Cesium__namespace[r(x._0x1c0008)](t.maxHeight)&&_>t.maxHeight&&(_=t.maxHeight);let l;if(Cesium__namespace[r(x._0x1c0008)](t.pitch))l=Cesium__namespace.Math[r(2500)](t[r(227)]);else{l=this[r(1682)].camera[r(x._0x2629af)];const m=Cesium__namespace[r(3876)][r(x._0x2c43ac)](l);Cesium__namespace.defined(t.minPitch)&&m<t.minPitch&&(l=Cesium__namespace.Math.toRadians(t.minPitch)),Cesium__namespace.defined(t[r(2520)])&&m>t.maxPitch&&(l=Cesium__namespace.Math[r(2500)](t.maxPitch))}const h=Cesium__namespace.defined(t.heading)?Cesium__namespace.Math.toRadians(t.heading):this._viewer[r(x._0x5db5cd)].heading,d=new Cesium__namespace.HeadingPitchRange(h,l,_),u=new Cesium__namespace.BoundingSphere(c,0);t[r(x._0x232305)]===0?(this[r(x._0x5a73bf)].camera.lookAt(c,d),!t.lock&&!this._viewer.trackedEntity&&this._viewer.camera.lookAtTransform(Cesium__namespace[r(x._0x5eee0c)][r(x._0x493dcf)]),t.complete&&t[r(x._0x38505c)](),i(!0)):this._viewer[r(3400)].flyToBoundingSphere(u,{...t,offset:d,complete:()=>{t.complete&&t.complete(),i(!0)},cancel:()=>{t[r(3139)]&&t.cancel(),i(!1)}})})}[_0x2397ca(1207)](){return this[_0x2397ca({_0x38d1c6:1049}._0x38d1c6)]}openFlyAnimation(e={}){const t={_0x1d2f09:1682},x={_0x4935ed:1160,_0x289e15:402,_0x38a693:3400,_0x558d76:3736},i={_0x420af4:3409,_0x19f4af:2074},s=_0x2397ca,o=this[s(t._0x1d2f09)],r=e[s(2006)]||this[s(1258)]();return new Promise((c,_)=>{const l={_0x3aaa35:883},h=s;this._isFlyAnimation=!0;const d=this;function u(m){const f=_0x3361;c(m),e.callback&&e.callback(m),d._isFlyAnimation=!1,d[f(l._0x3aaa35)]&&(d.openFlyAnimationEndFun(),delete d.openFlyAnimationEndFun)}o.camera[h(x._0x4935ed)]({destination:Cesium__namespace.Cartesian3[h(x._0x289e15)](-85.16,13.71,23e6)}),o[h(x._0x38a693)].flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(r.lng,r[h(x._0x558d76)],23e6),duration:e.duration1||2,easingFunction:e.easingFunction1||Cesium__namespace.EasingFunction.LINEAR_NONE,complete:()=>{const m=h;let f=r[m(1155)]??9e4;f<2e5&&r[m(227)]!==-90?(f=f*1.2+8e3,o.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(r[m(i._0x420af4)],r.lat,f),duration:e.duration2,easingFunction:e.easingFunction2,complete:()=>{const g=m;this.setCameraView(r,{duration:e[g(334)]||2,easingFunction:e[g(1423)],complete:()=>{u(!0)},cancel:()=>{u(!1)}})},cancel:()=>{u(!1)}})):this[m(i._0x19f4af)](r,{duration:e[m(334)]||2,easingFunction:e.easingFunction3,complete:()=>{u(!0)},cancel:()=>{u(!1)}})},cancel:()=>{u(!1)}})})}[_0x2397ca(1985)](e={}){const t={_0x5c7cbe:1682},x={_0x2e4cfd:402,_0x5b57fc:3736,_0x551218:3876,_0x1d6458:2500},i=_0x2397ca,s=this[i(t._0x5c7cbe)],o=e.center||this[i(1258)]({simplify:!1}),r=(e.duration??10)/3;return new Promise((c,_)=>{const l={_0x563580:2500,_0x3d5ff0:3876},h={_0x2c4682:2500},d=i;s[d(3400)].flyTo({destination:Cesium__namespace[d(295)][d(x._0x2e4cfd)](o.lng+120,o[d(x._0x5b57fc)],o.alt),orientation:{heading:Cesium__namespace.Math[d(2500)](o.heading),pitch:Cesium__namespace.Math.toRadians(o.pitch),roll:Cesium__namespace[d(x._0x551218)][d(x._0x1d6458)](o[d(2969)]||0)},duration:r,easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,complete:function(){const u=d;s.camera.flyTo({destination:Cesium__namespace.Cartesian3[u(402)](o.lng+240,o.lat,o.alt),orientation:{heading:Cesium__namespace.Math[u(l._0x563580)](o.heading),pitch:Cesium__namespace.Math[u(l._0x563580)](o.pitch),roll:Cesium__namespace[u(l._0x3d5ff0)].toRadians(o.roll||0)},duration:r,easingFunction:Cesium__namespace.EasingFunction[u(605)],complete:function(){const m=u;s.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(o.lng,o.lat,o.alt),orientation:{heading:Cesium__namespace.Math[m(h._0x2c4682)](o.heading),pitch:Cesium__namespace.Math[m(2500)](o[m(227)]),roll:Cesium__namespace.Math[m(h._0x2c4682)](o.roll||0)},duration:r,easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,complete:function(){c(!0)},cancel:()=>{c(!1)}})},cancel:()=>{c(!1)}})},cancel:()=>{c(!1)}})})}closeHighlight(e){const t={_0x458b77:1212,_0x41e066:1114},x=_0x2397ca;(e==null?void 0:e.graphic)!==this.last_highlighGraphic&&(this.last_highlighGraphic&&this[x(2691)][x(t._0x458b77)]&&this.last_highlighGraphic.closeHighlight(),this[x(t._0x41e066)]())}[_0x2397ca(1114)](){this[_0x2397ca({_0x57d4a9:2691}._0x57d4a9)]&&(this.last_highlighGraphic=null),this.outlineEffect&&(this.outlineEffect.selected=[])}openHighlight(e,t,x){const i={_0x2d8ee5:4013,_0x1b894b:4013},s=_0x2397ca;if(this._highlightEnabled){if(!e.openHighlight){logInfo("该对象暂不支持highlight高亮",e);return}this[s(1212)](),t.outlineEffect?(!this[s(i._0x2d8ee5)]&&(this.outlineEffect=new OutlineEffect({eventType:!1}),this.addEffect(this[s(i._0x1b894b)])),this.outlineEffect.setOptions(t),this[s(4013)].selected=this.mouseEvent.getPicked(x)):e.openHighlight(t,!1,x==null?void 0:x.pickedObject),this.last_highlighGraphic=e,this._viewer.scene.requestRender()}}openPopup(e,t,x){return this._popupMgr.open(e,{content:t,options:x}),this}closePopup(){return this._popupMgr&&this._popupMgr.closeAll(),this}openTooltip(e,t,x={}){return this._tooltipMgr.open(e,{content:t,options:x,target:this}),this}closeTooltip(){return this[_0x2397ca(656)]&&this._tooltipMgr.close(),this}getContextMenu(){const e={_0x2eb6ee:953},t=_0x2397ca;var x;return(x=this._contextmenuConfig)===null||x===void 0?void 0:x[t(e._0x2eb6ee)]}bindContextMenu(e,t){const x=_0x2397ca;return this[x(1590)]={content:e,options:t},this}unbindContextMenu(){const e=_0x2397ca;return this[e(1590)]=null,this}openContextMenu(e){return this._contextmenuMgr.open(e,this._contextmenuConfig),this}closeContextMenu(){const e={_0xf64b48:810},t=_0x2397ca;return this._contextmenuMgr&&this._contextmenuMgr[t(e._0xf64b48)](),this}openSmallTooltip(e,t){return this._smallTooltip.open(e,t),this}[_0x2397ca(1888)](){if(this._smallTooltip)return this._smallTooltip.close(),this}[_0x2397ca(2265)](e=!0){const t={_0x5d7fa0:1255,_0x4e259a:1082,_0x1bff00:1859,_0x6fe193:3292},x={_0x5341e7:1731},i=_0x2397ca;this._thingList[i(1255)](s=>{this.removeThing(s,e)},this,!0),this._thingList.removeAll(),this._controlList[i(t._0x5d7fa0)](s=>{!s||s[i(1731)]||this.removeControl(s,e)},this,!0),this[i(556)].removeAll(),this[i(t._0x4e259a)].forEach(s=>{const o=i;!s||s[o(x._0x5341e7)]||this[o(2911)](s,e)},this,!0),this._layerList[i(t._0x1bff00)](),this.hasTerrain=!1,this[i(2927)].removeAll(),this._visibilitys[i(1859)](),this._controls={},this[i(t._0x6fe193)]={}}[_0x2397ca(2941)](){const e={_0x122121:1953},t=_0x2397ca;if(this[t(1682)]){try{this._controlList.destroy()}catch(x){logWarn("_controlList.destroy 异常",x)}try{this._thingList[t(2941)]()}catch(x){logWarn("_thingList.destroy 异常",x)}try{this[t(e._0x122121)].destroy()}catch(x){logWarn("_mouseEvent.destroy 异常",x)}try{this[t(1082)].destroy()}catch(x){logWarn("_layerList.destroy 异常",x)}try{this._viewer[t(2941)]()}catch(x){logWarn("_viewer.destroy异常",x)}for(const x in this)delete this[x]}}}class MapCompare extends BaseControl{get mapEx(){return this._mapEx}[_0x2397ca(2645)](){const e={_0xdb0144:1429},t=_0x2397ca;this._container=create$3(t(215),this.options[t(e._0xdb0144)]||t(837))}_addedHook(){const e={_0x579726:3044,_0x139544:558,_0x21036e:558,_0xdc7557:3491,_0x49b0c8:1413},t=_0x2397ca;!this.options[t(523)]&&(this._map.container.firstChild.style.width="50%");let x={...this[t(e._0x579726)]};!x.basemaps&&!x.layers&&(x=merge(x,this[t(e._0x139544)].getCurrentOptions()),x.control=x.control||{},x.control.baseLayerPicker=!0,x[t(1214)].sceneModePicker=!1),this._mapEx=new Map(this._container,x),this._map.on(EventType[t(1420)],this._morphCompleteHandler,this),this[t(e._0x21036e)].on(EventType[t(3784)],this[t(e._0xdc7557)],this),this._map.camera[t(1413)]=.001,this._mapEx.on(EventType[t(3784)],this[t(2890)],this),this._mapEx.camera[t(e._0x49b0c8)]=.001,this._map_extentChangeHandler()}_removedBeforeHook(){this[_0x2397ca(558)].off(EventType.morphComplete,this._morphCompleteHandler,this),this._map.off(EventType.cameraChanged,this._map_extentChangeHandler,this),this._mapEx.off(EventType.cameraChanged,this._mapEx_extentChangeHandler,this),this._mapEx.destroy(),delete this._mapEx}_morphCompleteHandler(e){const t={_0x50e4e1:558},x=_0x2397ca;this[x(t._0x50e4e1)].scene.mode===Cesium__namespace.SceneMode.SCENE2D?this._mapEx.scene[x(3830)].enableTilt=!1:this._mapEx.scene.screenSpaceCameraController.enableTilt=!0}[_0x2397ca(3491)](e){const t={_0x38493f:2890},x=_0x2397ca;clearTimeout(this._map_timeTik),this._mapEx.off(EventType.cameraChanged,this[x(t._0x38493f)],this),this[x(3843)](this._map,this._mapEx),this._map_timeTik=setTimeout(()=>{this._mapEx.on(EventType.cameraChanged,this._mapEx_extentChangeHandler,this)},10)}_mapEx_extentChangeHandler(e){clearTimeout(this[_0x2397ca(2024)]),this._map.off(EventType.cameraChanged,this._map_extentChangeHandler,this),this._updateView(this._mapEx,this._map),this._mapEx_timeTik=setTimeout(()=>{this._map.on(EventType.cameraChanged,this._map_extentChangeHandler,this)},10)}[_0x2397ca(3843)](e,t){const x={_0x22955d:1258},i=_0x2397ca,s=e[i(x._0x22955d)]({simplify:!1});t.setCameraView(s,{duration:0})}}register$1("mapCompare",MapCompare);class OverviewMap extends BaseControl{get smallMap(){return this._smallMap}get center(){return this._center}_mountedHook(){const e={_0x26f561:357,_0x3065a0:3934},t=_0x2397ca;this.options[t(628)]=this.options.flyToOptions||{},this._container=create$3("div","mars3d-overviewMap"),this.setStyle(this.options[t(e._0x26f561)]||{right:"10px",top:t(e._0x3065a0)})}_addedHook(){const e={_0x50d84b:558,_0x2f29c0:1413},t=_0x2397ca;this.initMinMap(),this[t(e._0x50d84b)].camera[t(e._0x2f29c0)]=.01,this._map.on(EventType.cameraChanged,this._map_cameraChanged,this),this._map_cameraChanged()}[_0x2397ca(380)](){const e={_0x241c6f:3573,_0x517d6c:2941},t=_0x2397ca;this._map[t(e._0x241c6f)](EventType.cameraChanged,this._map_cameraChanged,this),this._smallMap[t(e._0x517d6c)](),delete this._smallMap}_map_cameraChanged(){const e={_0xc4f7eb:1133,_0x3e6471:1784,_0x2ab274:1684,_0x40dad2:628},t=_0x2397ca,x=this._map[t(1787)]();this._rectangle=Cesium__namespace.Rectangle.fromDegrees(x.xmin,x[t(242)],x.xmax,x.ymax),this[t(e._0xc4f7eb)]=Cesium__namespace.Cartographic.toCartesian(Cesium__namespace.Rectangle[t(2006)](this[t(e._0x3e6471)])),this[t(e._0x2ab274)].flyToExtent(x,{duration:0,scale:2,...this[t(3044)][t(e._0x40dad2)]}),this.fire(EventType.change)}[_0x2397ca(1378)](){const e={_0x39df9c:3044,_0x144d4b:785,_0x5e035f:1606,_0x4439e7:3248},t=_0x2397ca,x=this._map.getExtent(),i={scene:{sceneMode:Cesium__namespace[t(1721)][t(3114)],cameraController:{enableRotate:!1,enableTranslate:!1,enableTilt:!1,enableZoom:!1},...this.options.scene,extent:x},control:{contextmenu:{hasDefault:!1},...this.options[t(1214)]},basemaps:[{...this[t(3044)][t(2372)],show:!0}],layers:this[t(e._0x39df9c)].layers};this._smallMap=new Map(this[t(e._0x144d4b)],i),this.options.rectangle&&(this._rectangle=Cesium__namespace.Rectangle.fromDegrees(x.xmin,x[t(242)],x.xmax,x[t(e._0x5e035f)]),this._extentGraphic=new RectangleEntity({rectangle:new Cesium__namespace.CallbackProperty(s=>this._rectangle,!1),style:{color:"rgba(0,0,255,0.2)",outline:!0,outlineWidth:1,outlineColor:t(1471),...this.options.rectangle}}),this._smallMap[t(e._0x4439e7)].addGraphic(this[t(3606)]))}}register$1(_0x2397ca(2782),OverviewMap);const icon$1=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M16 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M32 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,icon=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z" fill="none" stroke="#ffffff" stroke-width="5" stroke-linejoin="round"/>
</svg>`;class ClockAnimate extends BaseControl{[_0x2397ca(2645)](){const e={_0x497d1d:2903},t=_0x2397ca;this[t(785)]=create$3(t(215),"mars3d-clockAnimate"),this._container.innerHTML=`
      <button id="btn-clockAnimate-start" class="mars3d-clockAnimate-btn" title="暂停">
        `+icon$1+t(e._0x497d1d)}_addedHook(){const e={_0x376b89:3031,_0x44f88c:3796,_0x15ef27:3738},t={_0x36606a:2751},x={_0x3d9992:743},i={_0x23bd37:558,_0x3ac5f0:3703,_0x21b1ac:3957,_0x3436bc:558,_0x251f02:3703},s={_0x538511:558,_0x5e38e7:3718,_0x54e726:2661},o=_0x2397ca;this._container.querySelector("#btn-clockAnimate-now").addEventListener(o(2031),_=>{const l=o;this[l(s._0x538511)].clock[l(s._0x5e38e7)]=Cesium__namespace.JulianDate.now(),this[l(s._0x54e726)](),this.fire(EventType.click,{mouseEvent:_,targetType:"now",time:this._map.clock.currentTime})});const c=this._container.querySelector("#btn-clockAnimate-start");c.addEventListener("click",_=>{const l=o;this[l(i._0x23bd37)][l(i._0x3ac5f0)][l(i._0x21b1ac)]=!this[l(i._0x3436bc)][l(i._0x251f02)].shouldAnimate,this.updateStatus(),this.fire(EventType.click,{mouseEvent:_,targetType:"state",state:this[l(558)][l(3703)].shouldAnimate})}),this[o(294)]=c,this._containerTime=this._container.querySelector(o(491)),this._containerTime.addEventListener("click",_=>{const l=o;this[l(1788)](EventType.click,{mouseEvent:_,targetType:l(x._0x3d9992)})}),this._containerSpeed=this._container.querySelector("#txt-clockAnimate-speed"),this[o(3348)][o(e._0x376b89)]("value",this._map.clock.multiplier),this._containerSpeed[o(1130)](o(e._0x44f88c),_=>{const l=o,h=Number(this[l(3348)].value||1);!isNaN(h)&&(this._map.clock.multiplier=h,this.fire(EventType[l(3796)],{mouseEvent:_,speed:h}))}),setTimeout(()=>{this[o(446)](!0)},1e3),this[o(e._0x15ef27)]=setInterval(()=>{this[o(t._0x36606a)]()},500),this.clock_onTickHandler()}_showHook(e){const t={_0x1c3ccf:1763},x=_0x2397ca;var i;const s=this._map.controls[x(t._0x1c3ccf)],o=s==null?void 0:s.container;if(o&&(o.style.left=e?this._container[x(3706)]+1+"px":"0"),(i=this._map.controls)!==null&&i!==void 0&&i.distanceLegend){const r=e||o&&o.style.display!=="none";this._map.controls[x(3267)].setStyle({bottom:r?"27px":"2px"})}}_removedHook(){this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null)}clock_onTickHandler(){const e=_0x2397ca;this.updateStatus();const t=Number(this._containerSpeed.value);this[e(558)].clock.multiplier!==t&&this._containerSpeed.setAttribute("value",this._map[e(3703)].multiplier);const x=Cesium__namespace.JulianDate[e(3626)](this._map.clock.currentTime);this._containerTime[e(3437)]=formatDate(x,this.options.format||e(3880))}updateStatus(){const e={_0x15f32b:3031,_0x59ae4c:3348,_0x51384e:294},t=_0x2397ca;if(this[t(2730)]===this._map.clock.shouldAnimate)return;this.isAnimate=this._map.clock.shouldAnimate,this.isAnimate?(this._containerBtnStart[t(e._0x15f32b)]("title","暂停"),this._containerBtnStart.innerHTML=icon$1,this[t(e._0x59ae4c)].style[t(3378)]="inline"):(this._containerBtnStart[t(3031)]("title","继续"),this[t(e._0x51384e)].innerHTML=icon,this._containerSpeed.style.display="none");const x=this._map.controls.timeline,i=x==null?void 0:x[t(571)];i&&(i.style.left=this._container[t(3706)]+1+"px")}}register$1("clockAnimate",ClockAnimate);var index$1={__proto__:null,BaseControl,Animation,BaseLayerPicker,FullscreenButton,Geocoder,HomeButton,NavigationHelpButton,ProjectionPicker,SceneModePicker,Timeline,VRButton,LocationBar,MouseDownView,Zoom,ToolButton,Compass,DistanceLegend,MapSplit,MapCompare,OverviewMap,ClockAnimate};class BaiduPOI{constructor(e={}){this.options=e,this._key_index=0,this._keys=e.key||baiduArr,this._city=e.city||"全国"}get keys(){return this._keys}set keys(e){const t=_0x2397ca;this[t(1951)]=e}get key(){const e={_0x2db55e:1951},t=_0x2397ca,x=this._key_index++%this[t(1951)].length;return this[t(e._0x2db55e)][x]}_formatPOIData(e){const t={_0x4d6d69:2886,_0x39b1c1:2422},x=_0x2397ca,i=[];for(let r=0;r<e.length;r++){var s,o;const c=e[r];let _=[];c[x(t._0x4d6d69)]&&(_=gcj2wgs([c.location.lng,c.location.lat])),i.push({id:c.uid,name:c[x(2044)],lng:_[0],lat:_[1],type:((s=c.detail_info)===null||s===void 0?void 0:s.tag)??c.tag,xzqh:c.province+c.city+(c.district||c.area||""),address:c.address,tel:c.telephone||"",detailUrl:(o=c[x(t._0x39b1c1)])===null||o===void 0?void 0:o.detail_url,info:c,x:_[0],y:_[1],detail_info:c[x(2422)]})}return i}[_0x2397ca(955)](e){const t=_0x2397ca;return isString(e)?e[t(1487)](/ /gm,"$")[t(1487)](/,/gm,"$"):Array.isArray(e)?e.join("$"):e}getAddress(e){const t={_0x1989ab:3863,_0x12fc3f:3677,_0x17a708:2199,_0x5766ec:740,_0x526c26:3044,_0x494284:1286,_0x461ac3:2443},x={_0x5e9bde:2564},i={_0x1a2fd7:2092},s=_0x2397ca;if(this._getAddress_ing)return Promise[s(t._0x1989ab)]();const o={ak:this[s(t._0x12fc3f)],output:s(t._0x17a708),language:"zh-CN",coordtype:"wgs84ll",ret_coordtype:"gcj02ll"},r=LngLatPoint.parse(e[s(2886)]);return o.location=r.lat+","+r.lng,this._getAddress_ing=!0,Cesium__namespace[s(t._0x5766ec)].fetchJsonp({url:"https://api.map.baidu.com/reverse_geocoding/v3/",...this[s(t._0x526c26)],queryParameters:o})[s(t._0x494284)](c=>{const _=s;if(this._getAddress_ing=!1,c.status!==0){console.log("未查询到相关结果！",c);return}const l=c.result,h={address:l.formatted_address,city:l[_(i._0x1a2fd7)],component:l[_(1563)]};return e.success&&e[_(3503)](h),h})[s(t._0x461ac3)](c=>{const _=s;this[_(x._0x5e9bde)]=!1,logError$1(_(3514),c),e[_(1141)]&&e[_(1141)]("请求出错",c)})}autoTip(e){const t={_0x2f243b:2199,_0x3ce714:639,_0x48aae9:2523,_0x318492:955},x={_0x12e293:1141},i={_0x18bb12:550},s=_0x2397ca,o={ak:this.key,output:s(t._0x2f243b),ret_coordtype:"gcj02ll"};if(Cesium__namespace[s(t._0x3ce714)](this._city)&&(o.region=this._city,o.city_limit=!0),Cesium__namespace.defined(e[s(2590)])&&(o[s(3351)]=e.city,o.city_limit=!0),Cesium__namespace.defined(e[s(t._0x48aae9)])&&(o.city_limit=e.citylimit),e[s(484)]&&(o.query=this[s(t._0x318492)](e.text)),e.location){o[s(3434)]=1;const r=LngLatPoint.parse(e.location);o.location=r.lat+","+r.lng}return Cesium__namespace[s(740)].fetchJsonp({url:"https://api.map.baidu.com/place/v2/suggestion",...this.options,queryParameters:o}).then(r=>{const c=s;if(r.status!==0){console.log(c(i._0x18bb12),r);return}const _=this._formatPOIData(r.result),l={allcount:r.total,count:_.length,list:_};return e.success&&e.success(l),l}).catch(r=>{const c=s;logError$1("BaiduPOI 请求出错",r),e.error&&e[c(x._0x12e293)]("请求出错",r)})}detail(e){const t={_0x13f160:3584},x={_0x1b4b6e:855,_0x40c349:1694,_0x848bc6:3503},i=_0x2397ca,s={ak:this.key,output:i(2199),ret_coordtype:i(t._0x13f160),uid:e.id};return Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/detail",queryParameters:s,...this.options}).then(o=>{const r=i;if(o[r(1605)]!==0){console[r(x._0x1b4b6e)]("未查询到相关结果！",o);return}if(!o[r(x._0x40c349)]||o.pois.length===0){e.error&&e[r(1141)](r(550),o);return}const c=o;return e.success&&e[r(x._0x848bc6)](c),c}).catch(o=>{logError$1(i(3514),o),e.error&&e.error("请求出错",o)})}query(e){const t={_0x4678f9:1358,_0x473426:784,_0x22a4a7:2886},x=_0x2397ca,i=e.graphic;return i?i.type===x(t._0x4678f9)?(e.polygon=i[x(t._0x473426)],this.queryPolygon(e)):i.type==="polygon"?(e.polygon=i.coordinates,this.queryPolygon(e)):i[x(968)]==="circle"?(e[x(t._0x22a4a7)]=i.point,e.radius=i.radius,this.queryCircle(e)):Promise.resolve(!1):e.polygon?this[x(541)](e):this[x(3518)](e)}queryText(e){const t={_0x5a5aaf:3992,_0x35c434:3992,_0x19ebff:955,_0x3e80de:639,_0x3c0005:3189,_0x5e71ec:740},x={_0x4e0caf:1141,_0x3fc786:2185,_0x4492c4:3503},i=_0x2397ca,s={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,page_num:e.page||0,page_size:e.count||20,tag:e.types||""};if(Cesium__namespace[i(639)](this[i(727)])&&(s[i(3351)]=this._city,s[i(t._0x5a5aaf)]=!0),Cesium__namespace.defined(e.city)&&(s.region=e[i(2590)],s.city_limit=!0),Cesium__namespace.defined(e.citylimit)&&(s[i(t._0x35c434)]=e[i(2523)]),e.text&&(s.query=this[i(t._0x19ebff)](e.text)),e.location){s.coord_type=1;const o=LngLatPoint[i(1364)](e.location);s.location=o.lat+","+o.lng}return Cesium__namespace[i(t._0x3e80de)](e.radius)&&(e[i(3189)]>5e6?delete s.location:s.radius=e[i(t._0x3c0005)],Cesium__namespace.defined(e.radiuslimit)&&(s.radius_limit=e[i(3061)])),Cesium__namespace[i(t._0x5e71ec)].fetchJsonp({url:"https://api.map.baidu.com/place/v2/search",...this.options,queryParameters:s}).then(o=>{const r=i;if(o.status!==0){const l="POI 请求失败("+o.status+")："+o.message;e[r(x._0x4e0caf)]&&e.error(l);return}if(!o.results||o.result_type==="city_type"||o.results.length===0)if(e[r(x._0x3fc786)]){const l={allcount:0,count:0,list:[]};return e.success&&e[r(x._0x4492c4)](l),l}else return delete e.radius,delete e.location,e._sendCount=1,this.queryText(e);const c=this[r(200)](o.results),_={allcount:o.total,count:c.length,list:c};return e.success&&e[r(3503)](_),_}).catch(o=>{logError$1("BaiduPOI 请求出错",o),e.error&&e.error("请求出错",o)})}queryCircle(e){const t={_0x132277:3434,_0x8a694b:484,_0x29394b:1554,_0x43af75:2997,_0x3cf516:719,_0x55cad2:3044,_0x30a58d:2443},x={_0x2d492d:1605,_0x1b4386:1959,_0x4f454e:3215,_0x1f3a22:2886,_0x2b282a:3503},i=_0x2397ca,s={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,radius:e[i(3189)]||3e3,radius_limit:e.limit,page_num:e[i(2609)]||0,page_size:e.count||20,tag:e.types||""};if(e.location){s[i(t._0x132277)]=1;const o=LngLatPoint.parse(e[i(2886)]);s.location=o.lat+","+o.lng}else logError$1("BaiduPOI: 请传入参location数");return e[i(t._0x8a694b)]?s[i(t._0x29394b)]=this._getKeywords(e.text):s[i(t._0x29394b)]=i(t._0x43af75),Cesium__namespace.Resource.fetchJsonp({url:i(t._0x3cf516),...this[i(t._0x55cad2)],queryParameters:s}).then(o=>{const r=i;if(o[r(x._0x2d492d)]!==0){const h="POI 请求失败("+o.status+")："+o[r(x._0x1b4386)];e[r(1141)]&&e[r(1141)](h);return}if(!o.results||o.result_type===r(x._0x4f454e)||o.results.length===0){e.error&&e.error("未查询到相关结果！",o);return}const c=this._formatPOIData(o[r(2881)]);let _;e.limit?_=this._filterPOIData_circle(c,e[r(x._0x1f3a22)],s.radius):_=c;const l={allcount:o.total,count:_.length,list:_};return e.success&&e[r(x._0x2b282a)](l),l})[i(t._0x30a58d)](o=>{logError$1("BaiduPOI 请求出错",o),e.error&&e.error("请求出错",o)})}_filterPOIData_circle(e,t,x){const i={_0x24296b:2027},s=_0x2397ca;if(!e||!t||!x)return e;const o=t[s(799)](),r=[];for(let c=0;c<e[s(i._0x24296b)];c++){const _=e[c],l=Cesium__namespace[s(295)].fromDegrees(_.x,_.y,t[s(1155)]);Cesium__namespace[s(295)].distance(l,o)<x&&r.push(_)}return r}queryPolygon(e){const t={_0x94d874:2609,_0x5ea650:3434,_0x1c7b6d:2886,_0x22733b:3976,_0x27e533:1606},x={_0x4f9220:1141,_0x1d6c76:2881,_0x85f507:2041,_0x469a29:2027},i=_0x2397ca,s={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,radius:e[i(3189)]||3e3,radius_limit:e.limit,page_num:e[i(t._0x94d874)]||0,page_size:e.count||20,tag:e.types||""},o=e.polygon;let r=o;if(o.length===2){const c=o[0][0],_=o[1][0],l=o[0][1],h=o[1][1],d=(c+_)/2,u=(l+h)/2;r=[[c,h],[c,l],[_,l],[_,h],[c,h]],s[i(t._0x5ea650)]=1,s[i(t._0x1c7b6d)]=u+","+d,s.radius=Math.max(getDistance([[d,u],o[0]]),getDistance([[d,u],o[1]]))}else{const c=getExtentByGeoJSON({type:i(683),properties:{},geometry:{type:"LineString",coordinates:o}}),_=(c.xmin+c[i(t._0x22733b)])/2,l=(c[i(242)]+c.ymax)/2;s.coord_type=1,s[i(t._0x1c7b6d)]=l+","+_,s.radius=Math[i(1146)](getDistance([[_,l],[c.xmin,c.ymin]]),getDistance([[_,l],[c[i(3976)],c[i(t._0x27e533)]]]))}return e.text?s[i(1554)]=this._getKeywords(e.text):s.query="行政地标",Cesium__namespace.Resource.fetchJsonp({url:i(719),queryParameters:s,...this[i(3044)]}).then(c=>{const _=i;if(c.status!==0){const u=_(236)+c.status+")："+c.message;e.error&&e[_(x._0x4f9220)](u);return}if(!c.results||c.result_type==="city_type"||c.results.length===0){e.error&&e.error("未查询到相关结果！",c);return}const l=this._formatPOIData(c[_(x._0x1d6c76)]);let h;e[_(355)]?h=this._filterPOIData_polygon(l,r):h=l;const d={allcount:c[_(x._0x85f507)],count:h[_(x._0x469a29)],list:h};return e.success&&e.success(d),d}).catch(c=>{const _=i;logError$1("BaiduPOI 请求出错",c),e[_(1141)]&&e.error(_(1106),c)})}_filterPOIData_polygon(e,t){if(!e||!t)return;t=t.concat([t[0]]);const x={type:"Polygon",coordinates:[t]},i=[];for(let s=0;s<e.length;s++){const o=e[s],r={type:"Feature",geometry:{type:"Point",coordinates:[o.x,o.y]}};booleanPointInPolygon(r,x)&&i.push(o)}return i}}class GaodePOI{constructor(e={}){const t={_0x57296a:3547},x=_0x2397ca;this[x(3044)]=e,this[x(t._0x57296a)]=0,this[x(1951)]=e.key||gaodeArr}get[_0x2397ca(390)](){return this[_0x2397ca({_0x2e4890:1951}._0x2e4890)]}set[_0x2397ca(390)](e){const t={_0x135925:1951},x=_0x2397ca;this[x(t._0x135925)]=e}get key(){const e={_0x6fa7f8:1951},t=_0x2397ca,x=this._key_index++%this[t(e._0x6fa7f8)][t(2027)];return this._keys[x]}_formatPOIData(e){const t={_0x5993e0:2886,_0x26f751:2956},x=_0x2397ca,i=[];for(let s=0;s<e.length;s++){const o=e[s];let r=[];o.location&&o.location.length>0&&(r=gcj2wgs(o[x(t._0x5993e0)][x(t._0x26f751)](","))),i.push({id:o.id,name:o.name,lng:Number(r[0]),lat:Number(r[1]),type:o.type,xzqh:o.pname+o.cityname+o[x(3604)],address:o.address,tel:o.tel||"",info:o,x:Number(r[0]),y:Number(r[1])})}return i}_getKeywords(e){const t={_0x4a2e1c:1487},x=_0x2397ca;return isString(e)?e[x(t._0x4a2e1c)](/ /gm,"|").replace(/,/gm,"|"):Array.isArray(e)?e.join("|"):e}[_0x2397ca(2896)](e){const t={_0x443d89:2564,_0x59f210:2199,_0x44c937:1286,_0xbc737a:2443},x={_0x3c12e1:1516},i=_0x2397ca;if(this[i(t._0x443d89)])return Promise.resolve();const s={key:this.key,output:i(t._0x59f210)};e.location=LngLatPoint.parse(e.location);const o=wgs2gcj([e.location.lng,e[i(2886)].lat]);return s.location=o[0]+","+o[1],this[i(2564)]=!0,Cesium__namespace[i(740)].fetchJsonp({url:i(1276),...this.options,queryParameters:s})[i(t._0x44c937)](r=>{const c=i;var _;if(this._getAddress_ing=!1,r.infocode!==c(x._0x3c12e1)){console.log("未查询到相关结果！",r);return}const l=r.regeocode,h={address:l.formatted_address,city:(_=l.addressComponent)===null||_===void 0?void 0:_.adcode,component:l.addressComponent};return e.success&&e.success(h),h})[i(t._0xbc737a)](r=>{this._getAddress_ing=!1,logError$1("GaodePOI 请求出错",r),e.error&&e.error("请求出错",r)})}[_0x2397ca(2472)](e){const t={_0x2fdbd0:3677,_0x319f3b:639,_0x2e84f4:2886},x={_0x1bb7d5:200,_0x309e62:3561},i=_0x2397ca,s={key:this[i(t._0x2fdbd0)],output:"json"};if(Cesium__namespace.defined(e.city)&&(s.city=e.city,s.citylimit=!0),Cesium__namespace[i(t._0x319f3b)](e.citylimit)&&(s.citylimit=e.citylimit),e.text&&(s.keywords=this._getKeywords(e.text)),e.location){e[i(t._0x2e84f4)]=LngLatPoint.parse(e[i(2886)]);const o=wgs2gcj([e.location.lng,e.location.lat]);s[i(t._0x2e84f4)]=o[0]+","+o[1]}return fetchJson({url:i(373),queryParameters:s,...this.options}).then(o=>{const r=i;if(!o.tips){console.log("未查询到相关结果！",o);return}const c=this[r(x._0x1bb7d5)](o[r(x._0x309e62)]),_={allcount:o.count,count:c[r(2027)],list:c};return e.success&&e.success(_),_}).catch(o=>{logError$1("GaodePOI 请求出错",o),e.error&&e.error("请求出错",o)})}detail(e){const t={_0x21fc36:2199},x={_0x135aa2:1106},i={_0x4cb3fb:1516,_0x1e0db1:1873,_0x4ad1fb:1141},s=_0x2397ca,o={key:this[s(3677)],id:e.id,output:s(t._0x21fc36)};return fetchJson({url:"https://restapi.amap.com/v3/place/detail",queryParameters:o,...this.options})[s(1286)](r=>{const c=s;if(r.infocode!==c(i._0x4cb3fb)){const l="POI 请求失败("+r.infocode+")："+r[c(i._0x1e0db1)];e[c(i._0x4ad1fb)]&&e.error(l);return}if(!r.pois||r.pois[c(2027)]===0){e.error&&e[c(i._0x4ad1fb)]("未查询到相关结果！",r);return}const _=r.pois[0];return e.success&&e.success(_),_}).catch(r=>{const c=s;logError$1("GaodePOI 请求出错",r),e.error&&e.error(c(x._0x135aa2),r)})}query(e){const t={_0x1939e5:2996,_0x22f825:541},x=_0x2397ca,i=e[x(t._0x1939e5)];return i?i.type==="rectangle"?(e.polygon=i.outlineCoordinates,this.queryPolygon(e)):i.type==="polygon"?(e[x(3977)]=i.coordinates,this[x(t._0x22f825)](e)):i.type==="circle"?(e.location=i[x(2800)],e.radius=i.radius,this.queryCircle(e)):Promise[x(3863)]():e.polygon?this[x(541)](e):this[x(3518)](e)}queryText(e){const t={_0x83f5ec:2590,_0x5ea861:2523,_0x108e7a:643},x={_0x59dc8a:1141},i={_0x1d39de:1516,_0x37d00c:1141,_0x4d90bf:1694,_0x3a557e:550,_0x598872:1694,_0x592e22:3503},s=_0x2397ca,o={key:this.key,output:"json",page:(e.page||0)+1,offset:e.count||20,types:e.types||""};return Cesium__namespace.defined(e[s(t._0x83f5ec)])&&(o.city=e[s(t._0x83f5ec)],o[s(t._0x5ea861)]=!0),Cesium__namespace.defined(e[s(t._0x5ea861)])&&(o.citylimit=e.citylimit),e.text?o[s(t._0x108e7a)]=this._getKeywords(e.text):!o.types&&(o.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/text",queryParameters:o,...this.options}).then(r=>{const c=s;if(r.infocode!==c(i._0x1d39de)){const h="POI 请求失败("+r.infocode+")："+r[c(1873)];e[c(1141)]&&e[c(i._0x37d00c)](h);return}if(!r[c(i._0x4d90bf)]){e[c(1141)]&&e.error(c(i._0x3a557e),r);return}const _=this._formatPOIData(r[c(i._0x598872)]),l={allcount:r.count,count:_[c(2027)],list:_};return e[c(i._0x592e22)]&&e.success(l),l}).catch(r=>{const c=s;logError$1("GaodePOI 请求出错",r),e[c(x._0x59dc8a)]&&e[c(1141)]("请求出错",r)})}[_0x2397ca(2223)](e){const t={_0x27310b:3189,_0x30bdc3:3088,_0x1e8e9f:3736,_0x4ec7b1:955,_0x3d08ea:3611,_0x4cea5f:2443},x={_0x53284a:1873},i=_0x2397ca,s={output:"json",key:this.key,radius:e[i(t._0x27310b)]||3e3,page:(e.page||0)+1,offset:e[i(t._0x30bdc3)]||20,types:e.types||""};if(e.location){e.location=LngLatPoint.parse(e.location);const o=wgs2gcj([e.location.lng,e.location[i(t._0x1e8e9f)]]);s.location=o[0]+","+o[1]}else logError$1("GaodePOI: 请传入参location数");return e.text?s.keywords=this[i(t._0x4ec7b1)](e.text):!s[i(t._0x3d08ea)]&&(s.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/around",queryParameters:s,...this.options}).then(o=>{const r=i;if(o.infocode!==r(1516)){if(e.error){const h="POI 请求失败("+o.infocode+")："+o[r(x._0x53284a)];e.error(h)}return}if(!o.pois){e.error&&e.error("未查询到相关结果！",o);return}const c=this[r(200)](o.pois);let _;e.limit?_=this._filterPOIData_circle(c,e.location,s.radius):_=c;const l={allcount:o.count,count:_[r(2027)],list:_};return e.success&&e.success(l),l})[i(t._0x4cea5f)](o=>{logError$1(i(3199),o),e.error&&e.error("请求出错",o)})}_filterPOIData_circle(e,t,x){const i={_0x41a125:295,_0x517277:2434},s=_0x2397ca;if(!e||!t||!x)return e;const o=t.toCartesian(),r=[];for(let c=0;c<e.length;c++){const _=e[c],l=Cesium__namespace.Cartesian3.fromDegrees(_.x,_.y,t.alt);Cesium__namespace[s(i._0x41a125)].distance(l,o)<x&&r[s(i._0x517277)](_)}return r}queryPolygon(e){const t={_0x5c1bc7:2027,_0xdbcc6f:955},x={_0x4c9913:1873,_0x5433c5:550,_0xbf5249:1694,_0x1c890c:355},i=_0x2397ca,s={key:this.key,output:"json",page:(e.page||0)+1,offset:e.count||20,types:e.types||""},o=e.polygon;let r=[];if(o[i(t._0x5c1bc7)]===2){const c=wgs2gcj(o[0]),_=wgs2gcj(o[1]);s.polygon=c[0]+","+c[1]+"|"+_[0]+","+_[1],r=[o[0],[o[0][0],o[1][1]],o[1],[o[1][0],o[0][1]]]}else{r=o;let c="";const _=o[i(3210)]([o[0]]);for(let l=0;l<_[i(2027)];l++){const h=wgs2gcj(_[l]);l===_.length-1?c+=h[0]+","+h[1]:c+=h[0]+","+h[1]+"|"}s.polygon=c}return e.text?s.keywords=this[i(t._0xdbcc6f)](e.text):!s.types&&(s.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/polygon",queryParameters:s,...this.options}).then(c=>{const _=i;if(c.infocode!=="10000"){if(e.error){const u=_(236)+c.infocode+")："+c[_(x._0x4c9913)];e.error(u)}return}if(!c.pois){e.error&&e.error(_(x._0x5433c5),c);return}const l=this._formatPOIData(c[_(x._0xbf5249)]);let h;e[_(x._0x1c890c)]?h=this._filterPOIData_polygon(l,r):h=l;const d={allcount:c.count,count:h.length,list:h};return e.success&&e[_(3503)](d),d}).catch(c=>{logError$1("GaodePOI 请求出错",c),e.error&&e.error("请求出错",c)})}_filterPOIData_polygon(e,t){if(!e||!t)return;t=t.concat([t[0]]);const x={type:"Polygon",coordinates:[t]},i=[];for(let s=0;s<e.length;s++){const o=e[s],r={type:"Feature",geometry:{type:"Point",coordinates:[o.x,o.y]}};booleanPointInPolygon(r,x)&&i.push(o)}return i}}class TdtPOI{constructor(e={}){const t={_0x50f577:1951},x=_0x2397ca;this[x(3044)]=e,this._key_index=0,this[x(t._0x50f577)]=e.key||tiandituArr}get keys(){return this._keys}set keys(e){this._keys=e}get key(){const e={_0x1e5492:1951},t=_0x2397ca,x=this[t(3547)]++%this._keys[t(2027)];return this[t(e._0x1e5492)][x]}_formatPOIData(e){const t={_0x2589bd:2044,_0x1e8ca1:3066,_0x591532:1829},x=_0x2397ca,i=[];for(let s=0;s<e.length;s++){const o=e[s];let r=[];o.lonlat&&o.lonlat.length>0&&(r=o.lonlat.split(",")),i[x(2434)]({id:o.hotPointID,name:o[x(t._0x2589bd)],lng:Number(r[0]),lat:Number(r[1]),type:o.typeName,xzqh:o[x(t._0x1e8ca1)]+o.city+o.county,address:o.address,tel:o[x(t._0x591532)]||"",info:o,x:Number(r[0]),y:Number(r[1])})}return i}_getKeywords(e){const t=_0x2397ca;return isString(e)?e.replace(/ /gm,"|")[t(1487)](/,/gm,"|"):Array.isArray(e)?e.join("|"):e}getAddress(e){const t={_0x75b09e:2231,_0xa727e9:1286},x={_0x3262db:1141},i={_0x433fb5:1790},s=_0x2397ca;if(this._getAddress_ing)return Promise.resolve();const o={ver:1};return e[s(2886)]=LngLatPoint.parse(e.location),o[s(t._0x75b09e)]=e[s(2886)].lng,o[s(3736)]=e.location[s(3736)],this._getAddress_ing=!0,sendAjax({url:"http://api.tianditu.gov.cn/geocoder",...this.options,queryParameters:{type:s(1921),tk:this.key,postStr:JSON.stringify(o)}})[s(t._0xa727e9)](r=>{const c=s;var _,l;if(this._getAddress_ing=!1,((_=r.status)===null||_===void 0?void 0:_.infocode)!==1e3){console.log("未查询到相关结果！",r);return}const h=r[c(1822)],d={address:h[c(i._0x433fb5)],city:(((l=h[c(1563)])===null||l===void 0?void 0:l.county_code)||"").replace("156",""),component:h.addressComponent};return e.success&&e.success(d),d}).catch(r=>{const c=s;this._getAddress_ing=!1,logError$1("TdtPOI 请求出错",r),e[c(x._0x3262db)]&&e.error("请求出错",r)})}autoTip(e){const t={_0x1b2217:2590,_0x3a2884:2563,_0x5ed1ef:955,_0x3d36ba:2443},x={_0x3e8e5e:1141},i=_0x2397ca,s={queryType:7,show:1,level:e.level||18,mapBound:e.mapBound||i(344),start:0,offset:10};return Cesium__namespace.defined(e[i(t._0x1b2217)])&&(s.specify="156"+e.city),Cesium__namespace.defined(e.types)&&(s.dataTypes=e.types),e.text&&(s[i(t._0x3a2884)]=this[i(t._0x5ed1ef)](e[i(484)])),fetchJson({url:i(474),queryParameters:{type:"query",tk:this.key,postStr:JSON.stringify(s)},...this.options}).then(o=>{const r=i;var c;if(((c=o[r(1605)])===null||c===void 0?void 0:c.infocode)!==1e3){console.log("未查询到相关结果！",o),e.error&&e.error(o.status.cndesc,o);return}if(!o.pois){e.error&&e.error("未查询到相关结果！",o);return}const _=this._formatPOIData(o.pois),l={allcount:o.count,count:_.length,list:_};return e.success&&e.success(l),l})[i(t._0x3d36ba)](o=>{const r=i;logError$1("TdtPOI 请求出错",o),e.error&&e[r(x._0x3e8e5e)]("请求出错",o)})}query(e){const t={_0x30ce49:2996,_0x445eab:968,_0x30f979:3977,_0x3097b9:784,_0x3e5a00:2886},x=_0x2397ca,i=e[x(t._0x30ce49)];return i?i[x(t._0x445eab)]==="rectangle"?(e[x(t._0x30f979)]=i[x(t._0x3097b9)],this.queryPolygon(e)):i[x(968)]==="polygon"?(e.polygon=i.coordinates,this.queryPolygon(e)):i[x(968)]==="circle"?(e[x(t._0x3e5a00)]=i[x(2800)],e[x(3189)]=i.radius,this.queryCircle(e)):Promise.resolve():e.polygon?this.queryPolygon(e):this[x(3518)](e)}queryText(e){const t={_0x3de556:3088,_0xd4fc43:2590,_0x5c31dd:3611,_0x512d34:484,_0x599b5c:3677},x={_0x193a4c:3835,_0x504fb2:1141,_0x30fb32:1106},i={_0x38390b:1330,_0x3531c7:1141,_0x1fe0b3:1141,_0x2aadf2:3503},s=_0x2397ca,o=e[s(t._0x3de556)]||20,r={queryType:7,show:2,level:e.level||18,mapBound:e.mapBound||"70,18,134,51",start:(e[s(2609)]||0)*o,offset:o};return Cesium__namespace.defined(e[s(2590)])&&(r.specify="156"+e[s(t._0xd4fc43)]),Cesium__namespace.defined(e[s(t._0x5c31dd)])&&(r[s(1177)]=e.types),e.text&&(r.keyWord=this[s(955)](e[s(t._0x512d34)])),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this[s(t._0x599b5c)],postStr:JSON.stringify(r)},...this.options}).then(c=>{const _=s;var l;if(((l=c.status)===null||l===void 0?void 0:l[_(i._0x38390b)])!==1e3){console.log("未查询到相关结果！",c),e.error&&e[_(i._0x3531c7)](c.status.cndesc,c);return}if(!c.pois){e[_(i._0x1fe0b3)]&&e[_(1141)](_(550),c);return}const h=this[_(200)](c[_(1694)]),d={allcount:c.count,count:h.length,list:h};return e[_(3503)]&&e[_(i._0x2aadf2)](d),d}).catch(c=>{const _=s;logError$1(_(x._0x193a4c),c),e.error&&e[_(x._0x504fb2)](_(x._0x30fb32),c)})}queryCircle(e){const t={_0x175a35:2886,_0x2043f7:3409,_0x55eee8:3736,_0x280a8c:3611},x={_0x2c33ec:550,_0x598926:1694,_0x199117:3189,_0x163763:3088,_0xba4ab7:3503},i=_0x2397ca,s=e.count||20,o={queryType:3,show:2,queryRadius:formatNum$1(e[i(3189)]||3e3,0),start:(e.page||0)*s,offset:s};return e.location?(e[i(2886)]=LngLatPoint.parse(e.location),o.pointLonlat=e[i(t._0x175a35)][i(t._0x2043f7)]+","+e.location[i(t._0x55eee8)]):logError$1("TdtPOI: 请传入参location数"),Cesium__namespace.defined(e.types)&&(o.dataTypes=e[i(t._0x280a8c)]),e.text&&(o.keyWord=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this.key,postStr:JSON.stringify(o)},...this.options}).then(r=>{const c=i;var _;if(((_=r.status)===null||_===void 0?void 0:_.infocode)!==1e3){e.error&&e.error(r[c(1605)].cndesc,r);return}if(!r.pois){e.error&&e.error(c(x._0x2c33ec),r);return}const l=this._formatPOIData(r[c(x._0x598926)]);let h;e.limit?h=this._filterPOIData_circle(l,e.location,o[c(x._0x199117)]):h=l;const d={allcount:r[c(x._0x163763)],count:h.length,list:h};return e[c(x._0xba4ab7)]&&e[c(3503)](d),d}).catch(r=>{logError$1("TdtPOI 请求出错",r),e.error&&e.error("请求出错",r)})}_filterPOIData_circle(e,t,x){const i={_0x316e67:402},s=_0x2397ca;if(!e||!t||!x)return e;const o=t.toCartesian(),r=[];for(let c=0;c<e.length;c++){const _=e[c],l=Cesium__namespace.Cartesian3[s(i._0x316e67)](_.x,_.y,t.alt);Cesium__namespace[s(295)].distance(l,o)<x&&r[s(2434)](_)}return r}[_0x2397ca(541)](e){const t={_0x1a9b2b:2027,_0x2eee3b:3044},x={_0x2a8ea1:1141},i={_0x8d69c7:1141,_0x2b2d02:1605,_0x19ba1f:1694},s=_0x2397ca,o=e.count||20,r={queryType:10,show:2,start:(e.page||0)*o,offset:o},c=LngLatArray.toArray(e.polygon);if(c.length===2)return e.extent=e.polygon,this.queryExtent(e);let _="";const l=c.concat([c[0]]);for(let h=0;h<l.length;h++){const d=l[h];h===l[s(t._0x1a9b2b)]-1?_+=d[0]+","+d[1]:_+=d[0]+","+d[1]+","}return r.polygon=_,Cesium__namespace.defined(e.types)&&(r.dataTypes=e[s(3611)]),e.text&&(r.keyWord=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this.key,postStr:JSON.stringify(r)},...this[s(t._0x2eee3b)]}).then(h=>{const d=s;var u;if(((u=h[d(1605)])===null||u===void 0?void 0:u[d(1330)])!==1e3){e[d(i._0x8d69c7)]&&e.error(h[d(i._0x2b2d02)].cndesc,h);return}if(!h[d(i._0x19ba1f)]){e.error&&e.error("未查询到相关结果！",h);return}const m=this._formatPOIData(h[d(1694)]);let f;e.limit?f=this._filterPOIData_polygon(m,c):f=m;const g={allcount:h.count,count:f.length,list:f};return e[d(3503)]&&e[d(3503)](g),g}).catch(h=>{const d=s;logError$1("TdtPOI 请求出错",h),e[d(x._0x2a8ea1)]&&e.error(d(1106),h)})}_filterPOIData_polygon(e,t){const x={_0x4e0991:683},i=_0x2397ca;if(!e||!t)return;t=t[i(3210)]([t[0]]);const s={type:"Polygon",coordinates:[t]},o=[];for(let r=0;r<e[i(2027)];r++){const c=e[r],_={type:i(x._0x4e0991),geometry:{type:"Point",coordinates:[c.x,c.y]}};booleanPointInPolygon(_,s)&&o.push(c)}return o}queryExtent(e){const t={_0x2473b9:1141},x={_0x1224a5:200,_0x1a09ed:1694,_0x3a3675:2027},i=_0x2397ca,s=e.count||20,o={queryType:2,show:2,level:18,start:(e.page||0)*s,offset:s},r=e.extent[0],c=e.extent[1];return o.mapBound=r[0]+","+r[1]+","+c[0]+","+c[1],Cesium__namespace.defined(e.types)&&(o[i(1177)]=e.types),e[i(484)]&&(o.keyWord=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:i(1554),tk:this.key,postStr:JSON.stringify(o)},...this.options}).then(_=>{const l=i;var h;if(((h=_[l(1605)])===null||h===void 0?void 0:h.infocode)!==1e3){e[l(1141)]&&e.error(_[l(1605)].cndesc,_);return}if(!_.pois){e.error&&e.error(l(550),_);return}const d=this[l(x._0x1224a5)](_[l(x._0x1a09ed)]),u={allcount:_[l(3088)],count:d[l(x._0x3a3675)],list:d};return e.success&&e.success(u),u}).catch(_=>{const l=i;logError$1("TdtPOI 请求出错",_),e[l(1141)]&&e[l(t._0x2473b9)]("请求出错",_)})}}const RouteType={Walking:1,Bicycling:2,Driving:3};class GaodeRoute{constructor(e={}){const t={_0x3f3647:3547},x=_0x2397ca;this.options=e,this[x(t._0x3f3647)]=0,this[x(1951)]=e.key||gaodeArr}get[_0x2397ca(390)](){return this._keys}set keys(e){this._keys=e}get[_0x2397ca(3677)](){const e=_0x2397ca,t=this._key_index++%this._keys[e(2027)];return this._keys[t]}_formatRouteData(e,t,x){const i={_0x269efe:2027,_0x35c60f:230,_0x539e74:2956,_0x3890f6:2434},s=_0x2397ca;let o,r;const c=[];if(e&&(o=gcj2wgs(e.split(","))),t&&(r=gcj2wgs(t.split(","))),x&&x[s(i._0x269efe)]>0)for(let _=0;_<x.length;_++){const l=[];l[s(2434)](o);const h=x[_],d=h.steps,u=[],m=[];for(let f=0;f<d.length;f++){const g={instruction:d[f].instruction,distance:d[f][s(i._0x35c60f)],duration:d[f].duration,points:[],route:d[f].road},b=d[f].polyline,y=b[s(i._0x539e74)](";");for(let C=0;C<y.length;C++){const v=y[C],M=gcj2wgs(v.split(","));l.push(M),g.points[s(i._0x3890f6)](M)}m[s(2434)](g.route),u.push(g)}l.push(r),c.push({allDistance:h.distance,allDuration:h.duration,steps:u,points:l,road:m})}return{origin:o,destination:r,paths:c}}query(e){switch(e.type){case RouteType.Bicycling:return this.queryBicycling(e);case RouteType.Driving:return this.queryDriving(e);case RouteType.Walking:default:return this.queryWalking(e)}}queryArr(e){const t={_0x31cb80:1141},x={_0x512c5b:3503};return new Promise((i,s)=>{const o=_0x3361,r=this;let c=-1;const _={};for(const u in e)u==="points"||u==="success"||u===o(t._0x31cb80)||(_[u]=e[u]);const l=e.points,h=[];function d(){const u=o;c++,_.points=l[c],_[u(x._0x512c5b)]=function(m){const f=u;m&&m[f(803)]&&m.paths.length>0?h.push(m.paths[0]):h.push(null),c>=l.length-1?(e[f(3503)]&&e.success(h),i(h)):d()},_.error=_[u(3503)],r.query(_)}d()})}getShortestPath(e){const t=_0x2397ca;let x=Number.MAX_VALUE,i=null,s=-1;for(let o=0;o<e[t(2027)];o++){const r=e[o];r&&r.allDistance<=x&&(i=r,s=o,x=r.allDistance)}return{lineData:i,index:s}}[_0x2397ca(3302)](e){const t={_0xd1cba5:1330,_0x1d0be5:550,_0x2dce44:159,_0x306296:946},x=_0x2397ca,i={key:this.key,output:x(2199)},s=wgs2gcj(e.points[0]),o=wgs2gcj(e.points[e.points.length-1]);return i.origin=s[0]+","+s[1],i.destination=o[0]+","+o[1],fetchJson({url:x(1360),queryParameters:i,...this.options}).then(r=>{const c=x;if(r.infocode!=="10000"){if(e.error){const l="路径规划 请求失败("+r[c(t._0xd1cba5)]+")："+r.info;e.error(l)}return}if(!r.route||!r.route.paths){e.error&&e.error(c(t._0x1d0be5));return}const _=this[c(t._0x2dce44)](i.origin,i.destination,r[c(t._0x306296)].paths);return e.success&&e.success(_),_}).catch(r=>{logError$1("GaodeRoute 请求出错",r),e.error&&e.error("请求出错",r)})}[_0x2397ca(2475)](e){const t={_0x506c6e:3044},x={_0x2bf594:1516,_0x49752e:1330,_0x509854:803,_0x18c4b0:1141,_0x44f59c:550,_0x3b5fc0:3503},i=_0x2397ca,s={key:this.key,output:"json"},o=wgs2gcj(e.points[0]),r=wgs2gcj(e.points[e.points.length-1]);return s.origin=o[0]+","+o[1],s.destination=r[0]+","+r[1],fetchJson({url:"https://restapi.amap.com/v4/direction/bicycling",queryParameters:s,...this[i(t._0x506c6e)]}).then(c=>{const _=i;if(c.infocode!==_(x._0x2bf594)){const h=_(919)+c[_(x._0x49752e)]+")："+c.info;e.error&&e.error(h);return}if(!c.route||!c.route[_(x._0x509854)]){e.error&&e[_(x._0x18c4b0)](_(x._0x44f59c));return}const l=this._formatRouteData(s.origin,s.destination,c[_(946)][_(803)]);return e.success&&e[_(x._0x3b5fc0)](l),l}).catch(c=>{logError$1("GaodeRoute 请求出错",c),e.error&&e.error("请求出错",c)})}queryDriving(e){const t={_0x379165:1483,_0x25b4e2:2027,_0x5b629d:1483},x={_0x4eb60e:1516,_0x5758cb:1141,_0x4cb3b3:550,_0x505fa3:3503},i=_0x2397ca;var s;const o={key:this.key,output:"json",extensions:e.extensions||"base",strategy:e.strategy||0},r=wgs2gcj(e.points[0]),c=wgs2gcj(e[i(1483)][e[i(t._0x379165)][i(t._0x25b4e2)]-1]);if(o.origin=r[0]+","+r[1],o.destination=c[0]+","+c[1],e.points.length>2){let _="";for(let l=1,h=e[i(t._0x5b629d)].length-1;l<h;l++){const d=wgs2gcj(e.points[l]);_+=d[0]+","+d[1]+";"}o[i(2965)]=_}if(((s=e.avoidpolygons)===null||s===void 0?void 0:s.length)>0){let _="";for(let l=0,h=e.avoidpolygons.length;l<h;l++){l>0&&(_+="|");const d=e.avoidpolygons[l];for(let u=0,m=d[i(2027)];u<m;u++){const f=wgs2gcj(d[u]);_+=f[0]+","+f[1]+";"}}o.avoidpolygons=_}return fetchJson({url:"https://restapi.amap.com/v3/direction/driving",queryParameters:o,...this[i(3044)]}).then(_=>{const l=i;if(_.infocode!==l(x._0x4eb60e)){if(e.error){const d="路径规划 请求失败("+_[l(1330)]+")："+_.info;e.error(d)}return}if(!_.route||!_.route.paths||_[l(946)].paths.length===0){e[l(x._0x5758cb)]&&e.error(l(x._0x4cb3b3));return}const h=this._formatRouteData(o.origin,o.destination,_.route.paths);return e[l(x._0x505fa3)]&&e.success(h),h}).catch(_=>{const l=i;logError$1("GaodeRoute 请求出错",_),e.error&&e[l(1141)]("请求出错",_)})}}GaodeRoute.RouteType=RouteType;const Def_Parameters={service:"WFS",request:"GetFeature",version:"1.0.0",outputFormat:_0x2397ca(2487),maxFeatures:1e3};class QueryGeoServer extends BaseClass{get layer(){const e=_0x2397ca;if(!this._geoJsonLayer){const t={...this.options};delete t.url,delete t[e(2069)],this[e(3049)]=new GeoJsonLayer(t),this._geoJsonLayer.on(EventType.load,this[e(337)],this),this[e(3049)].on(EventType.click,this.geoJsonLayer_onClickHandler,this)}return this[e(3049)]}[_0x2397ca(1554)](e){const t={_0x52d4c2:968,_0x1ad582:639,_0xd4b674:2434,_0xe1af40:3137,_0x5bd600:3044,_0x1e3240:3838,_0x37988c:2407,_0x46866f:484},x={_0x52c650:2443},i=_0x2397ca;let s=i(292);if(e.text&&(Cesium__namespace.defaultValue(e.like,!0)?s+=` <PropertyIsLike wildCard="*" singleChar="#" escapeChar="!">
            <PropertyName>`+e[i(1964)]+`</PropertyName>
            <Literal>*`+e.text+`*</Literal>
        </PropertyIsLike>`:s+=`<PropertyIsEqualTo>
                <PropertyName>`+e[i(1964)]+`</PropertyName>
                <Literal>`+e.text+i(972)),e.graphic){const r=e.graphic;let c;if(r[i(t._0x52d4c2)]===i(1358)?c=r.outlineCoordinates:r[i(t._0x52d4c2)]==="polygon"?c=r[i(1245)]:r.type==="circle"?c=r.getOutlineCoordinates(!0,30):Cesium__namespace.defined(r.xmax)&&Cesium__namespace[i(t._0x1ad582)](r[i(1383)])&&Cesium__namespace.defined(r.ymin)&&Cesium__namespace.defined(r.ymax)&&(c=[[r.xmin,r.ymax],[r.xmin,r[i(242)]],[r[i(3976)],r.ymin],[r.xmax,r.ymax]]),c){c[i(t._0xd4b674)](c[0]);let _="";for(let l=0;l<c.length;l++){let h=c[l];this.options.crs&&this.options.crs!==CRS.EPSG4326&&this[i(3044)][i(t._0xe1af40)]!==CRS.EPSG4490&&(h=proj4Trans(h,"EPSG:4326",this[i(t._0x5bd600)].crs)),_+=h[0]+","+h[1]+" "}s+=i(3371)+(e[i(t._0x1e3240)]||"the_geom")+`</PropertyName>
                      <gml:Polygon>
                          <gml:outerBoundaryIs>
                              <gml:LinearRing>
                                  <gml:coordinates>`+_+`</gml:coordinates>
                              </gml:LinearRing>
                          </gml:outerBoundaryIs>
                      </gml:Polygon>
                  </Intersects>`}}s+="</And></Filter>";const o={...Def_Parameters,...e,typeName:this.options[i(t._0x37988c)],filter:s};return delete o.success,delete o.error,delete o[i(2996)],delete o[i(t._0x46866f)],delete o.column,new Promise((r,c)=>{const _=i;sendAjax({...this.options,queryParameters:o})[_(1286)](l=>{const h=_;e[h(1259)]={resolve:r,reject:c},this.processFeatureCollection(l,e)})[_(x._0x52c650)](l=>{logError$1("QueryGeoServer 请求出错",l),e.error&&e.error("请求出错",l)})})}queryBySql(e){const t={_0x215b5a:3668,_0x2751cb:242,_0x28a273:1245,_0x36795b:968,_0x3c6ad6:639,_0x3af631:1383,_0x364489:3308,_0xd451e5:2027,_0x158e6b:2996},x=_0x2397ca;let i=e.cql_filter||"1=1";if(e.graphic){let o=e.graphic;const r=e[x(3838)]||x(t._0x215b5a);let c;if(o[x(968)]==="rectangle"){o=o.getRectangle({isFormat:!0});const _=o[x(1383)]+","+o[x(t._0x2751cb)]+","+o.xmax+","+o.ymax;i+=" and BBOX("+r+", "+_+")"}else if(o.type==="polygon")c=o[x(t._0x28a273)];else if(o[x(t._0x36795b)]===x(2829))c=o.getOutlineCoordinates(!0,30);else if(Cesium__namespace.defined(o.xmax)&&Cesium__namespace[x(t._0x3c6ad6)](o.xmin)&&Cesium__namespace.defined(o[x(242)])&&Cesium__namespace[x(639)](o.ymax)){const _=o[x(t._0x3af631)]+","+o[x(242)]+","+o.xmax+","+o.ymax;i+=x(t._0x364489)+r+", "+_+")"}if(c){c.push(c[0]);const _=[];for(let l=0;l<c[x(t._0xd451e5)];l++)_[x(2434)](c[l][0]+" "+c[l][1]);i+=" and INTERSECTS ("+r+",POLYGON(("+_.join(",")+")))"}}const s={...Def_Parameters,...e,typeName:this[x(3044)].layer,cql_filter:i};return delete s.success,delete s[x(1141)],delete s[x(t._0x158e6b)],new Promise((o,r)=>{const c={_0x536ff5:1106},_=x;sendAjax({...this[_(3044)],queryParameters:s}).then(l=>{const h=_;e[h(1259)]={resolve:o,reject:r},this.processFeatureCollection(l,e)}).catch(l=>{const h=_;logError$1("QueryGeoServer 请求出错",l),e.error&&e.error(h(c._0x536ff5),l)})})}[_0x2397ca(1869)](e,t){const x={_0x4a42aa:197,_0x247cf6:197,_0x5717fd:3049},i={_0x1e315b:197},s=_0x2397ca;if(e&&e.type==="Feature"&&(e={type:"FeatureCollection",features:[e]}),!e||!e[s(x._0x4a42aa)]||e.features.length===0){var o;t.success&&t.success({count:0}),(o=t._promise)!==null&&o!==void 0&&o.resolve&&t._promise.resolve({count:0})}else{const l=[];for(let h=0;h<e.features.length;h++){var r,c;const d=e.features[h];(d==null||(r=d.geometry)===null||r===void 0||(c=r[s(1245)])===null||c===void 0?void 0:c.length)>0&&l.push(d)}if(e[s(x._0x247cf6)]=l,this[s(x._0x5717fd)])this._last_success=h=>{const d=s;var u;const m={geojson:e,count:e[d(i._0x1e315b)].length,list:h};t[d(3503)]&&t[d(3503)](m),(u=t._promise)!==null&&u!==void 0&&u.resolve&&t._promise.resolve(m)},this._geoJsonLayer[s(759)]({data:e});else{var _;const h={geojson:e,count:e.features.length};t[s(3503)]&&t.success(h),(_=t._promise)!==null&&_!==void 0&&_.resolve&&t._promise.resolve(h)}}}geoJsonLayer_onLoadHandler(e){const t={_0x3a441c:3230,_0x1c7cb6:759},x=_0x2397ca;this._last_success&&(this._last_success(e.list),this[x(t._0x3a441c)]=null),this.fire(EventType[x(t._0x1c7cb6)],e)}geoJsonLayer_onClickHandler(e){this.fire(EventType.click,{...e,layer:this._geoJsonLayer})}[_0x2397ca(2265)](){const e={_0x222268:3049},t=_0x2397ca;this._last_success&&(this._last_success=null),this[t(e._0x222268)]&&this._geoJsonLayer.clear()}}class QueryArcServer extends BaseClass{constructor(e={}){const t={_0x186305:3651,_0x39701c:2854},x=_0x2397ca;super(e),this.options=e,this._pageSize=e[x(t._0x186305)]??10,this._allCount=0,this[x(t._0x39701c)]=0,this._pageIndex=1,this.arrIDS=[]}get url(){const e=_0x2397ca;return this[e(3044)][e(914)]}set url(e){const t={_0x519114:3044},x=_0x2397ca;this[x(t._0x519114)].url=e}get pageSize(){return this[_0x2397ca(1055)]}set[_0x2397ca(3651)](e){this._pageSize=e}get allCount(){return this[_0x2397ca(3790)]}get[_0x2397ca(3001)](){return this._allPage}get pageIndex(){return this._pageIndex}set[_0x2397ca(3969)](e){this._pageIndex=e,this.showPage(e)}get layer(){const e={_0x2323ed:337},t=_0x2397ca;if(!this._geoJsonLayer){const x={...this.options};delete x.url,delete x.data,this._geoJsonLayer=new GeoJsonLayer(x),this._geoJsonLayer.on(EventType[t(759)],this[t(e._0x2323ed)],this),this._geoJsonLayer.on(EventType.click,this.geoJsonLayer_onClickHandler,this)}return this._geoJsonLayer}[_0x2397ca(2452)](){this.showPage(1)}showPretPage(){const e={_0xb5ea8f:3336},t=_0x2397ca;this._pageIndex=this._pageIndex-1,this._pageIndex<1&&(this._pageIndex=1),this.showPage(this[t(e._0xb5ea8f)])}showNextPage(){this._pageIndex=this._pageIndex+1,this._pageIndex>this.allPage&&(this._pageIndex=this.allPage),this.showPage(this._pageIndex)}showPage(e){const t={_0x2cf483:445},x=_0x2397ca;this._pageIndex=e,this[x(t._0x2cf483)]()}query(e){const t={_0x362705:1964,_0x3e30f4:484,_0x45c048:1201,_0x1c1f72:2996,_0x660c8a:242,_0x332eac:784,_0x18f841:2996,_0x3d44e8:3910},x=_0x2397ca;this._pageIndex=1,this.arrIDS=[];const i={f:"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!0,where:e.where||"1=1",...e.parameters};if(this.options.token&&(i.token=this.options[x(3132)]),e.column){let s="";e.like??!0?s=e[x(t._0x362705)]+"  like '%"+e[x(t._0x3e30f4)]+"%' ":s=e.column+"='"+e.text+"'",i[x(t._0x45c048)]=s}if(e[x(t._0x1c1f72)]){const s=e[x(2996)];if(i.spatialRel="esriSpatialRelIntersects",s.type==="rectangle"){const o=s.outlineCoordinates;i.geometryType="esriGeometryEnvelope",i.geometry=JSON.stringify({xmin:o[0][0],ymin:o[0][1],xmax:o[2][0],ymax:o[2][1],spatialReference:{wkid:4326}})}else if(Cesium__namespace.defined(s.xmax)&&Cesium__namespace.defined(s.xmin)&&Cesium__namespace[x(639)](s[x(t._0x660c8a)])&&Cesium__namespace.defined(s.ymax))i[x(1593)]="esriGeometryEnvelope",i.geometry=JSON.stringify({xmin:s.xmin,ymin:s[x(t._0x660c8a)],xmax:s[x(3976)],ymax:s.ymax,spatialReference:{wkid:4326}});else{let o;s.type==="polygon"?o=s.toGeoJSON():s.type===x(2829)?o={type:"Feature",geometry:{type:"Polygon",coordinates:[s[x(t._0x332eac)]]}}:o=e[x(t._0x18f841)],i[x(t._0x3d44e8)]=JSON.stringify(geojsonToArcGIS$1(o.geometry)),i.geometryType=geojsonTypeToArcGIS(o.geometry.type)}}return new Promise((s,o)=>{const r=x;e._promise={resolve:s,reject:o},e.page??!0?(i.returnIdsOnly=!0,sendAjax({...this.options,url:this[r(914)]+"/query",queryParameters:i}).then(c=>{const _=r,l=c.objectIds;l&&(this.arrIDS=l,this._allCount=l.length,this._allPage=Math.ceil(this[_(3790)]/this._pageSize)),delete i[_(2975)],this[_(445)](i,e)}).catch(c=>{logError$1("QueryArcServer 请求出错",c),e.error&&e.error(c,c.message)})):sendAjax({...this[r(3044)],url:this.url+"/query",queryParameters:i}).then(c=>{const _=arcgisToGeoJSON$1(c);this.processFeatureCollection(_,e)}).catch(c=>{logError$1(r(1828),c),e.error&&e.error(c,c.message)})})}_queryPageByIds(e,t){const x={_0x28793d:2464,_0xaed4f9:160,_0x3bcc92:2963,_0x4bd713:3969,_0x3bd6a7:3503,_0x5db415:3863,_0x2360ad:1055},i=_0x2397ca;if(e?this.lastParameters=e:this.lastParameters&&(e=this[i(x._0x28793d)]),t?this[i(x._0xaed4f9)]=t:this[i(2464)]&&(t=this[i(160)]),!this[i(2963)]||this[i(x._0x3bcc92)].length===0||this._pageIndex<1||this._pageIndex>this.allPage){var s;const _={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this[i(3001)],pageIndex:this[i(x._0x4bd713)]};t[i(x._0x3bd6a7)]&&t[i(3503)](_),(s=t[i(1259)])!==null&&s!==void 0&&s.resolve&&t[i(1259)][i(x._0x5db415)](_);return}const o=(this._pageIndex-1)*this[i(x._0x2360ad)],r=this._pageIndex*this._pageSize,c=this[i(2963)].slice(o,r);e.objectIds=c.join(","),sendAjax({...this.options,url:this.url+"/query",queryParameters:e})[i(1286)](_=>{const l=arcgisToGeoJSON$1(_);this.processFeatureCollection(l,t)}).catch(_=>{const l=i;logError$1(l(1828),_),t.error&&t.error(_,_[l(1959)])})}[_0x2397ca(1869)](e,t){const x={_0x3854e6:3863,_0xf89583:2027,_0x9c46d6:3651,_0x20852f:1259},i={_0x36435e:3863},s=_0x2397ca;if(!e||!e.features||e[s(197)][s(2027)]===0){var o;const l={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this[s(3001)],pageIndex:this.pageIndex};t.success&&t.success(l),(o=t._promise)!==null&&o!==void 0&&o[s(x._0x3854e6)]&&t._promise.resolve(l)}else{const l=[];for(let d=0;d<e.features[s(x._0xf89583)];d++){var r,c;const u=e.features[d];(u==null||(r=u.geometry)===null||r===void 0||(c=r.coordinates)===null||c===void 0?void 0:c.length)>0&&l[s(2434)](u)}e.features=l;const h={geojson:e,count:e.features.length,allCount:this[s(1326)],pageSize:this[s(x._0x9c46d6)],allPage:this.allPage,pageIndex:this[s(3969)]};if(this._geoJsonLayer)this._last_success=d=>{const u=s;var m;h.list=d,t.success&&t.success(h),(m=t._promise)!==null&&m!==void 0&&m.resolve&&t._promise[u(i._0x36435e)](h)},this._geoJsonLayer[s(759)]({data:e});else{var _;t.success&&t.success(h),(_=t[s(x._0x20852f)])!==null&&_!==void 0&&_.resolve&&t._promise[s(3863)](h)}}}geoJsonLayer_onLoadHandler(e){const t={_0x15cac5:759},x=_0x2397ca;this[x(3230)]&&(this._last_success(e.list),this._last_success=null),this.fire(EventType[x(t._0x15cac5)],e)}geoJsonLayer_onClickHandler(e){this[_0x2397ca({_0x39c80a:1788}._0x39c80a)](EventType.click,{...e,layer:this._geoJsonLayer})}clear(){const e={_0x58f3d2:3049},t=_0x2397ca;this._last_success&&(this._last_success=null),this[t(e._0x58f3d2)]&&this._geoJsonLayer.clear()}}function geojsonTypeToArcGIS(n){const e={_0x48bf53:2774,_0x36ee96:3938},t=_0x2397ca;let x;switch(n){case t(1650):x="esriGeometryMultipoint";break;case"LineString":x=t(2147);break;case t(e._0x48bf53):x="esriGeometryPolyline";break;case t(e._0x36ee96):x="esriGeometryPolygon";break;case"MultiPolygon":x="esriGeometryPolygon";break;case"Point":default:x="esriGeometryPoint";break}return x}var index={__proto__:null,BaiduPOI,GaodePOI,TdtPOI,GaodeRoute,QueryGeoServer,QueryArcServer};const name="Mars3D三维可视化平台",website=_0x2397ca(3045),author="合肥火星科技有限公司";exports[_0x2397ca(174)]=Cesium__namespace,Object.defineProperty(exports,"Resource",{enumerable:!0,get:function(){return Cesium.Resource}}),exports.BaseClass=BaseClass,exports[_0x2397ca(3158)]=BaseMaterialConver,exports.BaseStyleConver=BaseStyleConver,exports[_0x2397ca(4027)]=BaseThing,exports.BillboardStyleConver=BillboardStyleConver,exports.BoxStyleConver=BoxStyleConver,exports.CRS=CRS,exports[_0x2397ca(3707)]=ChinaCRS,exports.CircleStyleConver=CircleStyleConver,exports[_0x2397ca(349)]=ClipType,exports.CloudStyleConver=CloudStyleConver,exports.ColorOptsConver=ColorOptsConver,exports[_0x2397ca(2754)]=ControlType,exports[_0x2397ca(3056)]=ControlUtil,exports[_0x2397ca(3030)]=CorridorStyleConver,exports.CylinderStyleConver=CylinderStyleConver,exports.DivGraphicStyleConver=DivGraphicStyleConver,exports.DomUtil=DomUtil,exports.DrawUtil=DrawUtil,exports.EffectType=EffectType,exports[_0x2397ca(1122)]=EffectUtil,exports.EllipsoidStyleConver=EllipsoidStyleConver,exports.EventType=EventType,exports.GraphicType=GraphicType,exports[_0x2397ca(1044)]=GraphicUtil,exports.GroundSkyBox=GroundSkyBox,exports[_0x2397ca(2505)]=GroupThing,exports[_0x2397ca(886)]=Icon,exports.ImageOptsConver=ImageOptsConver,exports.LabelStyleConver=LabelStyleConver,exports.Lang=Lang,exports[_0x2397ca(326)]=LangType,exports.LayerType=LayerType,exports.LayerUtil=LayerUtil,exports.LngLatArray=LngLatArray,exports.LngLatPoint=LngLatPoint,exports.LocalWorldTransform=LocalWorldTransform,exports.Log=Log,exports[_0x2397ca(3422)]=Map,exports.MarsArray=MarsArray,exports[_0x2397ca(829)]=MaterialType$1,exports[_0x2397ca(2198)]=MaterialUtil,exports.MeasureUtil=MeasureUtil,exports.ModelStyleConver=ModelStyleConver,exports[_0x2397ca(2170)]=MoveType,exports[_0x2397ca(3105)]=MultipleSkyBox,exports.PathStyleConver=PathStyleConver,exports.PlaneStyleConver=PlaneStyleConver,exports[_0x2397ca(1931)]=PointStyleConver,exports[_0x2397ca(2863)]=PointTrans,exports[_0x2397ca(986)]=PointUtil,exports.PolyUtil=PolyUtil,exports.PolygonStyleConver=PolygonStyleConver,exports.PolylineStyleConver=PolylineStyleConver,exports.PolylineVolumeStyleConver=PolylineVolumeStyleConver,exports.RectangleStyleConver=RectangleStyleConver,exports[_0x2397ca(623)]=RectangularSensorStyleConver,exports.State=State,exports.Texture3=Texture3,exports[_0x2397ca(3743)]=Token,exports[_0x2397ca(1540)]=Util,exports.WallStyleConver=WallStyleConver,exports.author=author,exports.control=index$1,exports.effect=index$2,exports.graphic=index$6,exports.layer=index$4,exports.material=index$7,exports.name=name,exports.proj4=proj4,exports.provider=index$5,exports.query=index,exports.thing=index$3,exports.update=update,exports.version=version,exports[_0x2397ca(3048)]=website,Object.defineProperty(exports,_0x2397ca(3473),{value:!0})});const _export_sfc=(n,e)=>{const t=n.__vccOpts||n;for(const[x,i]of e)t[x]=i;return t},Cesium=window.Cesium,_sfc_main$1={__name:"Map3D",emits:["onload"],setup(n,{emit:e}){const t=ref();let x=null;const i=e,s=()=>{x=new(void 0)("mapContainer",{scene:{center:{lat:32.077606,lng:112.135681,alt:190.3,heading:11.7,pitch:-26.3},showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!1,fog:!1,fxaa:!0,globe:{showGroundAtmosphere:!1,depthTestAgainstTerrain:!0,show:!0,baseColor:"#546a53"},cameraController:{zoomFactor:3,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableZoom:!0},mapProjection:(void 0).EPSG3857,mapMode2D:Cesium.MapMode2D.INFINITE_SCROLL},control:{baseLayerPicker:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,fullscreenButton:!1,contextmenu:{hasDefault:!0}},basemaps:[{name:"天地图影像",icon:"img/basemaps/tdt_img.png",type:"tdt",layer:"img_d",show:!0}]}),i("onload",x),o({url:"https://giserlk.space/3dtiles/xy/tileset.json",alt:50})},o=c=>{r("3DTiles");const _=new(void 0).TilesetLayer({id:"3DTiles",name:"3dtiles图层",url:c.url,position:{alt:c.alt},maximumScreenSpaceError:10,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,dynamicScreenSpaceError:!0,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0,enableDebugWireframe:!1,flyTo:!0});x.addLayer(_),_.readyPromise.then(function(l){console.log("load完成",l)})},r=c=>{try{const _=x.getLayerById(c);_&&x.removeLayer(_)}catch(_){throw new Error(_)}};return onMounted(()=>{s()}),onUnmounted(()=>{x&&(x.destroy(),x=null),console.log("map销毁完成",x)}),(c,_)=>(openBlock(),createElementBlock("div",{id:"mapContainer",ref_key:"mapRef",ref:t,class:"mapContainer"},null,512))}},Map3D=_export_sfc(_sfc_main$1,[["__scopeId","data-v-920c8425"]]),_sfc_main=defineComponent({__name:"App",setup(n){return(e,t)=>(openBlock(),createBlock(Map3D))}});createApp(_sfc_main).mount("#app")});export default ke();
