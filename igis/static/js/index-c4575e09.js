import{P as v,r as h,o as x,A as b,b as _,h as y,m as C,e as w,f as u,k as l,D as M}from"./index-bbce9413.js";import{_ as f}from"./_plugin-vue_export-helper-c4cb8a60.js";import{B as S}from"./index-0e4b31d4.js";import{F as I,a as B}from"./index-11a606e1.js";import"./index-8896020a.js";/* empty css               */import{I as L}from"./index-617968ed.js";import{I as k}from"./index-c833ae91.js";import"./index-7cb8bd8a.js";import"./index-d8c131de.js";import"./omit-beff4be5.js";import"./index-d0abaf49.js";import"./get-value-by-path-81b19032.js";import"./index-3eff0a75.js";import"./constant-82db06a1.js";import"./index-24d3e248.js";import"./index.es-53dca8d1.js";import"./index-e204803d.js";import"./keyboard-37dc3bb3.js";const g=v("mars3d",()=>{let n=h({url:"https://data.mars3d.cn/3dtiles/qx-teh/tileset.json",alt:130});function a(e){n.value=e}return{tilesConfig:n,updateTilesConfig:a}});const D={__name:"Mars3dMap",setup(n){const a=window.Cesium,e=window.mars3d,i=h();let m=null;const r=g(),d=()=>{m=new e.Map(i.value,{scene:{center:{lat:32.077606,lng:112.135681,alt:190.3,heading:11.7,pitch:-26.3},showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!1,fog:!1,fxaa:!0,globe:{showGroundAtmosphere:!1,depthTestAgainstTerrain:!0,show:!0,baseColor:"#546a53"},cameraController:{zoomFactor:3,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableZoom:!0},mapProjection:e.CRS.EPSG3857,mapMode2D:a.MapMode2D.INFINITE_SCROLL},control:{baseLayerPicker:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,fullscreenButton:!1,contextmenu:{hasDefault:!0}},basemaps:[{name:"\u5929\u5730\u56FE\u5F71\u50CF",icon:"img/basemaps/tdt_img.png",type:"tdt",layer:"img_d",show:!0}]}),s({url:r.tilesConfig.url,alt:r.tilesConfig.alt})},s=t=>{p("3DTiles");const o=new e.layer.TilesetLayer({id:"3DTiles",name:"3dtiles\u56FE\u5C42",url:t.url,position:{alt:t.alt},maximumScreenSpaceError:10,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,dynamicScreenSpaceError:!0,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0,enableDebugWireframe:!1,flyTo:!0});m.addLayer(o),o.readyPromise.then(function(c){console.log("load\u5B8C\u6210",c)})},p=t=>{try{const o=m.getLayerById(t);o&&m.removeLayer(o)}catch(o){throw new Error(o)}};return x(()=>{d()}),b(()=>r.tilesConfig,(t,o)=>{console.log("tilesConfig changed1:",t),s({url:t.url,alt:t.alt})}),(t,o)=>(_(),y("div",{ref_key:"mapRef",ref:i,class:"mapContainer"},null,512))}},T=f(D,[["__scopeId","data-v-22022cc9"]]);const V={__name:"ModelInfo",setup(n){const a=g(),e=C({url:a.tilesConfig.url,alt:a.tilesConfig.alt}),i=()=>{console.log(e),a.updateTilesConfig({url:e.url,alt:e.alt})};return(m,r)=>{const d=L,s=B,p=k,t=S,o=I;return _(),w(o,{model:e,class:"formLayout",onSubmit:i},{default:u(()=>[l(s,{field:"name",label:"\u5730\u5740"},{default:u(()=>[l(d,{modelValue:e.url,"onUpdate:modelValue":r[0]||(r[0]=c=>e.url=c),placeholder:"\u8BF7\u8F93\u51653dtiles\u6A21\u578B\u5730\u5740"},null,8,["modelValue"])]),_:1}),l(s,{field:"alt",label:"\u9AD8\u5EA6"},{default:u(()=>[l(p,{modelValue:e.alt,"onUpdate:modelValue":r[1]||(r[1]=c=>e.alt=c),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1}),l(s,null,{default:u(()=>[l(t,{"html-type":"submit",onClick:i},{default:u(()=>[M("\u786E\u5B9A")]),_:1})]),_:1})]),_:1},8,["model"])}}},E=f(V,[["__scopeId","data-v-d6426217"]]);const P={class:"mapView w-full min-h-[calc(100vh-58px)]"},F={__name:"index",setup(n){return(a,e)=>(_(),y("div",P,[l(T),l(E)]))}},te=f(F,[["__scopeId","data-v-aaeba824"]]);export{te as default};
