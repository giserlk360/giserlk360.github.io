import{g as M,_ as Z,s as _e,d as He,e as De,f as Y}from"./index-0e4b31d4.js";import{d as R,r as v,c as f,a as N,b as h,e as _,f as H,g as D,j as E,l as I,D as J,E as Q,o as Oe,h as X,k as c,a7 as Me,n as Fe,a5 as le,u as V,i as se,a8 as qe,F as We,a9 as Be,t as je,m as Ke,y as we,A as Te,Y as Ue,W as Ge}from"./index-bbce9413.js";import{I as Le}from"./index-617968ed.js";import{T as Ne}from"./index-d0abaf49.js";import{a as Ye}from"./constant-82db06a1.js";import{I as Je}from"./index-e8a5f3e2.js";import{u as Qe}from"./index-3eff0a75.js";import{R as Ee}from"./index-bdfc4cee.js";import{o as Xe}from"./omit-beff4be5.js";import{u as Ze}from"./index-89b0e030.js";import{T as et,c as xe,r as tt}from"./index-d8c131de.js";const ot=R({name:"Popover",components:{Trigger:et},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},title:String,content:String,trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"top"},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:t}){const o=M("popover"),n=v(e.defaultPopupVisible),s=f(()=>{var u;return(u=e.popupVisible)!=null?u:n.value}),a=u=>{n.value=u,t("update:popupVisible",u),t("popupVisibleChange",u)},i=f(()=>[`${o}-popup-content`,e.contentClass]),r=f(()=>[`${o}-popup-arrow`,e.arrowClass]);return{prefixCls:o,computedPopupVisible:s,contentCls:i,arrowCls:r,handlePopupVisibleChange:a}}});function nt(e,t,o,n,s,a){const i=N("trigger");return h(),_(i,{class:E(e.prefixCls),trigger:e.trigger,position:e.position,"popup-visible":e.computedPopupVisible,"popup-offset":10,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"show-arrow":"","popup-container":e.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:H(()=>[D("div",{class:E(`${e.prefixCls}-title`)},[I(e.$slots,"title",{},()=>[J(Q(e.title),1)])],2),D("div",{class:E(`${e.prefixCls}-content`)},[I(e.$slots,"content",{},()=>[J(Q(e.content),1)])],2)]),default:H(()=>[I(e.$slots,"default")]),_:3},8,["class","trigger","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}var ae=Z(ot,[["render",nt]]);const it=Object.assign(ae,{install:(e,t)=>{_e(e,t);const o=He(t);e.component(o+ae.name,ae)}}),lt=R({name:"TypographyEditContent",components:{Input:Le},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const n=[`${M("typography")}-edit-content`],s=v();function a(r){t("update:text",r),t("change",r)}function i(){t("end")}return Oe(()=>{if(!s.value||!s.value.$el)return;const r=s.value.$el.querySelector("input");if(!r)return;r.focus&&r.focus();const{length:u}=r.value;r.setSelectionRange(u,u)}),{classNames:n,inputRef:s,onBlur:i,onChange:a,onEnd:i}}});function st(e,t,o,n,s,a){const i=N("Input");return h(),X("div",{class:E(e.classNames)},[c(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:Me(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var at=Z(lt,[["render",st]]);const rt=R({name:"IconEdit",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const o=M("icon"),n=f(()=>[o,`${o}-edit`,{[`${o}-spin`]:e.spin}]),s=f(()=>{const i={};return e.size&&(i.fontSize=De(e.size)?`${e.size}px`:e.size),e.rotate&&(i.transform=`rotate(${e.rotate}deg)`),i});return{cls:n,innerStyle:s,onClick:i=>{t("click",i)}}}}),pt=["stroke-width","stroke-linecap","stroke-linejoin"],ut=D("path",{d:"m30.48 19.038 5.733-5.734a1 1 0 0 0 0-1.414l-5.586-5.586a1 1 0 0 0-1.414 0l-5.734 5.734m7 7L15.763 33.754a1 1 0 0 1-.59.286l-6.048.708a1 1 0 0 1-1.113-1.069l.477-6.31a1 1 0 0 1 .29-.631l14.7-14.7m7 7-7-7M6 42h36"},null,-1),ct=[ut];function dt(e,t,o,n,s,a){return h(),X("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:E(e.cls),style:Fe(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...i)=>e.onClick&&e.onClick(...i))},ct,14,pt)}var re=Z(rt,[["render",dt]]);const ft=Object.assign(re,{install:(e,t)=>{var o;const n=(o=t==null?void 0:t.iconPrefix)!=null?o:"";e.component(n+re.name,re)}}),yt=R({name:"TypographyOperations",components:{Tooltip:Ne,IconCheckCircleFill:Ye,IconCopy:Je,IconEdit:ft},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=M("typography"),n=f(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:s}=Qe();return{prefixCls:o,showExpand:n,t:s,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function mt(e,t,o,n,s,a){const i=N("IconEdit"),r=N("Tooltip"),u=N("IconCheckCircleFill"),z=N("IconCopy");return h(),X(We,null,[e.editable?(h(),_(r,V({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:H(()=>[D("span",{class:E(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=le((...g)=>e.onEditClick&&e.onEditClick(...g),["stop"]))},[c(i)],2)]),_:1},16,["content"])):se("v-if",!0),e.copyable?(h(),_(r,qe(V({key:1},e.copyTooltipProps)),{content:H(()=>[I(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[J(Q(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:H(()=>[D("span",{class:E({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=le((...g)=>e.onCopyClick&&e.onCopyClick(...g),["stop"]))},[I(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(h(),_(u,{key:0})):(h(),_(z,{key:1}))])],2)]),_:3},16)):se("v-if",!0),e.showExpand?(h(),X("a",{key:2,class:E(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=le((...g)=>e.onExpandClick&&e.onExpandClick(...g),["stop"]))},[I(e.$slots,"expand-node",{expanded:e.expanded},()=>[J(Q(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):se("v-if",!0)],64)}var ke=Z(yt,[["render",mt]]);let p;function vt(e){return Array.prototype.slice.apply(e).map(o=>`${o}: ${e.getPropertyValue(o)};`).join("")}function pe(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var gt=(e,t,o,n)=>{p||(p=document.createElement("div"),document.body.appendChild(p));const{rows:s,suffix:a,ellipsisStr:i}=t,r=window.getComputedStyle(e),u=vt(r),z=pe(r.lineHeight),g=Math.round(z*s+pe(r.paddingTop)+pe(r.paddingBottom));p.setAttribute("style",u),p.setAttribute("aria-hidden","true"),p.style.height="auto",p.style.minHeight="auto",p.style.maxHeight="auto",p.style.position="fixed",p.style.left="0",p.style.top="-99999999px",p.style.zIndex="-200",p.style.whiteSpace="normal";const F=Be({render(){return c("span",null,[o])}});F.mount(p);const ee=Array.prototype.slice.apply(p.childNodes[0].cloneNode(!0).childNodes);F.unmount(),p.innerHTML="";const S=document.createTextNode(`${i}${a}`);p.appendChild(S),ee.forEach(C=>{p.appendChild(C)});const P=document.createTextNode(n);p.insertBefore(P,S);function y(){return p.offsetHeight<=g}if(y())return{ellipsis:!1,text:n};function d(C,x=0,O=n.length,q=0){const B=Math.floor((x+O)/2),te=n.slice(0,B);if(C.textContent=te,x>=O-1)for(let b=O;b>=x;b-=1){const k=n.slice(0,b);if(C.textContent=k,y()||!k)return}y()?d(C,B,O,B):d(C,x,B,q)}return d(P),{text:P.textContent,ellipsis:!0}};const Ct=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(a){console.error(a!=null?a:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const n=window.getSelection(),s=window.document.createRange();n==null||n.removeAllRanges(),s.selectNode(o),n==null||n.addRange(s);try{window.document.execCommand("copy")}catch(a){console.error(`execCommand Error: ${a}`)}n==null||n.removeAllRanges(),window.document.body.removeChild(o)};let j;function ht(e){if(!e)return"";j||(j=document.createElement("div"),j.setAttribute("aria-hidden","true"),document.body.appendChild(j));const t=Be({render(){return c("div",null,[e])}});t.mount(j);const o=j.innerText;return t.unmount(),o}var bt=Object.defineProperty,wt=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,Se=(e,t,o)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,kt=(e,t)=>{for(var o in t||(t={}))Et.call(t,o)&&Se(e,o,t[o]);if($e)for(var o of $e(t))xt.call(t,o)&&Se(e,o,t[o]);return e},$t=(e,t)=>wt(e,Tt(t));function Ie(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ge(e)}function St(e){const{bold:t,mark:o,underline:n,delete:s,code:a}=e,i=[];return t&&i.push("b"),n&&i.push("u"),s&&i.push("del"),a&&i.push("code"),o&&i.push("mark"),i}function Pe(e,t){const{mark:o}=e,n=St(e),s=Y(o)&&o.color?{backgroundColor:o.color}:{};return n.reduce((a,i)=>c(i,i==="mark"?{style:s}:{},Ie(a)?a:{default:()=>[a]}),t)}function Pt(e){const t=!!e.showTooltip,o=Y(e.showTooltip)&&e.showTooltip.type==="popover"?it:Ne,n=Y(e.showTooltip)&&e.showTooltip.props||{};return $t(kt({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},Xe(e,["showTooltip"])),{showTooltip:t,TooltipComponent:o,tooltipProps:n})}var Ot=R({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:n}){const{editing:s,defaultEditing:a,ellipsis:i,copyable:r,editable:u,copyText:z,editText:g,copyDelay:F,component:ee}=je(e),S=M("typography"),P=f(()=>[S,{[`${S}-${e.type}`]:e.type,[`${S}-disabled`]:e.disabled}]),y=v(),d=v(""),[C,x]=Ze(a.value,Ke({value:s})),O=f(()=>u.value&&C.value);function q(){o("update:editing",!0),o("editStart"),x(!0)}function B(l){o("update:editText",l),o("change",l)}function te(){!C.value||(o("update:editing",!1),o("editEnd"),x(!1))}const b=v(!1);let k=null;function ue(){var l;const T=(l=z.value)!=null?l:d.value;Ct(T||""),b.value=!0,o("copy",T),k=setTimeout(()=>{b.value=!1},F.value)}we(()=>{k&&clearTimeout(k),k=null});const A=v(!1),w=v(!1),oe=v(""),m=f(()=>Pt(Y(i.value)&&i.value||{}));let ne=null;function ce(){const l=!w.value;w.value=l,o("expand",l)}function de(l=!1){return m.value.css?c(ke,{editable:u.value,copyable:r.value,expandable:m.value.expandable,isCopied:b.value,isEllipsis:U.value,expanded:w.value,forceRenderExpand:l||w.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:q,onCopy:ue,onExpand:ce},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):c(ke,{editable:u.value,copyable:r.value,expandable:m.value.expandable,isCopied:b.value,isEllipsis:A.value,expanded:w.value,forceRenderExpand:l,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:q,onCopy:ue,onExpand:ce},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function Ve(){if(!y.value)return;const{ellipsis:l,text:T}=gt(y.value,m.value,de(!!m.value.expandable),d.value);A.value!==l&&(A.value=l,m.value.css||o("ellipsis",l)),oe.value!==T&&(oe.value=T||"")}function W(){!(i.value&&!w.value)||(xe(ne),ne=tt(()=>{Ve()}))}we(()=>{xe(ne)}),Te(()=>m.value.rows,()=>{W()}),Te(i,l=>{l?W():A.value=!1});let K=[];const fe=()=>{if(i.value||r.value||u.value){const l=ht(K);l!==d.value&&(d.value=l,W())}};Oe(fe),Ue(fe);const ie=v(),U=v(!1),ye=()=>{if(y.value&&ie.value){const l=ie.value.offsetHeight>y.value.offsetHeight;l!==U.value&&(U.value=l,o("ellipsis",l))}},Re=f(()=>w.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":m.value.rows,"-webkit-box-orient":"vertical"});return()=>{var l,T;if(K=((l=t.default)==null?void 0:l.call(t))||[],O.value){const L=(T=g.value)!=null?T:d.value;return c(at,{text:L,onChange:$=>{$!==L&&B($)},onEnd:te},null)}const{suffix:ze,ellipsisStr:Ae,showTooltip:me,tooltipProps:ve,TooltipComponent:ge}=m.value,G=A.value&&!w.value,Ce=G&&!me?{title:d.value}:{},he=ee.value;if(m.value.css){const L=Pe(e,K),$=c(he,V({class:P.value,ref:y,style:Re.value},Ce,n),{default:()=>[c("span",{ref:ie},[L])]});return U.value?c(ge,V(ve,{onResize:()=>ye()}),{default:()=>[$],content:()=>d.value}):c(Ee,{onResize:()=>{ye()}},Ie($)?$:{default:()=>[$]})}const be=Pe(e,G?oe.value:K);return c(Ee,{onResize:()=>W()},{default:()=>[c(he,V({class:P.value,ref:y},Ce,n),{default:()=>[G&&me?c(ge,ve,{default:()=>[c("span",null,[be])],content:()=>d.value}):be,G?Ae:null,ze,de()]})]})}}}),Mt=R({name:"TypographyText",inheritAttrs:!1,props:{ellipsis:{type:[Boolean,Object],default:!1}},setup(e){const{ellipsis:t}=je(e);return{component:f(()=>t!=null&&t.value?"div":"span")}},render(){const{ellipsis:e,component:t}=this;return c(Ot,V(this.$attrs,{ellipsis:e,component:t}),this.$slots)}});export{Mt as T};
