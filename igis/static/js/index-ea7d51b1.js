import{U as ke,r as $,o as we,y as xe,A as U,b as M,h as P,d as E,c as y,j as H,n as Y,g as Z,t as Ce,k as s,F as Se,m as $e,e as Me,f as z,D as Ne}from"./index-e9689063.js";import{_ as X}from"./_plugin-vue_export-helper-c4cb8a60.js";import{g as j,e as p,_ as J,x as Be,y as Ie,c as ze,B as K,s as Le,d as Pe}from"./index-a9809549.js";import{F as Oe,a as Ve}from"./index-169e9de4.js";import"./index-8de522e4.js";import{I as ie}from"./index-5243bea0.js";import{I as Ee}from"./index-06d04c78.js";import{g as je,K as re}from"./keyboard-2838a031.js";import"./index-3eb6fbb9.js";import"./index-0e2598a5.js";import"./index-b9249fbe.js";import"./pick-8ec4d301.js";import"./use-cursor-93a49f50.js";const ue=ke("mars3d",()=>{let e=$({url:"https://data.mars3d.cn/3dtiles/qx-teh/tileset.json",alt:130});function n(t){e.value=t}return{tilesConfig:e,updateTilesConfig:n}});const De={__name:"Mars3dMap",emits:["onload"],setup(e,{emit:n}){const t=window.Cesium,o=window.mars3d,d=$();let i=null;const r=ue(),g=n,N=()=>{i=new o.Map("mapContainer",{scene:{center:{lat:32.077606,lng:112.135681,alt:190.3,heading:11.7,pitch:-26.3},showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!1,fog:!1,fxaa:!0,globe:{showGroundAtmosphere:!1,depthTestAgainstTerrain:!0,show:!0,baseColor:"#546a53"},cameraController:{zoomFactor:3,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableZoom:!0},mapProjection:o.CRS.EPSG3857,mapMode2D:t.MapMode2D.INFINITE_SCROLL},control:{baseLayerPicker:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,fullscreenButton:!1,contextmenu:{hasDefault:!0}},basemaps:[{name:"\u5929\u5730\u56FE\u5F71\u50CF",icon:"img/basemaps/tdt_img.png",type:"tdt",layer:"img_d",show:!0}]}),g("onload",i),v({url:r.tilesConfig.url,alt:r.tilesConfig.alt})},v=c=>{B("3DTiles");const f=new o.layer.TilesetLayer({id:"3DTiles",name:"3dtiles\u56FE\u5C42",url:c.url,position:{alt:c.alt},maximumScreenSpaceError:10,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,dynamicScreenSpaceError:!0,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0,enableDebugWireframe:!1,flyTo:!0});i.addLayer(f),f.readyPromise.then(function(x){console.log("load\u5B8C\u6210",x)})},B=c=>{try{const f=i.getLayerById(c);f&&i.removeLayer(f)}catch(f){throw new Error(f)}};return we(()=>{N()}),xe(()=>{i&&(i.destroy(),i=null),console.log("map\u9500\u6BC1\u5B8C\u6210",i)}),U(()=>r.tilesConfig,(c,f)=>{console.log("tilesConfig changed1:",c),v({url:c.url,alt:c.alt})}),(c,f)=>(M(),P("div",{id:"mapContainer",ref_key:"mapRef",ref:d,class:"mapContainer"},null,512))}},Fe=X(De,[["__scopeId","data-v-07c638f1"]]),Re=E({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-up`,{[`${t}-spin`]:e.spin}]),d=y(()=>{const r={};return e.size&&(r.fontSize=p(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:d,onClick:r=>{n("click",r)}}}}),Te=["stroke-width","stroke-linecap","stroke-linejoin"],Ae=Z("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),We=[Ae];function Ue(e,n,t,o,d,i){return M(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},We,14,Te)}var R=J(Re,[["render",Ue]]);const Ke=Object.assign(R,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+R.name,R)}});function Q(e,n){return n===void 0&&(n=15),+parseFloat(Number(e).toPrecision(n))}function b(e){var n=e.toString().split(/[eE]/),t=(n[0].split(".")[1]||"").length-+(n[1]||0);return t>0?t:0}function L(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var n=b(e);return n>0?Q(Number(e)*Math.pow(10,n)):Number(e)}function G(e){ce&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function D(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var o=n[0],d=n.slice(1);return d.reduce(function(i,r){return e(i,r)},o)}}var w=D(function(e,n){var t=L(e),o=L(n),d=b(e)+b(n),i=t*o;return G(i),i/Math.pow(10,d)}),Ge=D(function(e,n){var t=Math.pow(10,Math.max(b(e),b(n)));return(w(e,t)+w(n,t))/t}),qe=D(function(e,n){var t=Math.pow(10,Math.max(b(e),b(n)));return(w(e,t)-w(n,t))/t}),se=D(function(e,n){var t=L(e),o=L(n);return G(t),G(o),w(t/o,Q(Math.pow(10,b(n)-b(e))))});function He(e,n){var t=Math.pow(10,n),o=se(Math.round(Math.abs(w(e,t))),t);return e<0&&o!==0&&(o=w(o,-1)),o}var ce=!0;function Ye(e){e===void 0&&(e=!0),ce=e}var q={strip:Q,plus:Ge,minus:qe,times:w,divide:se,round:He,digitLength:b,float2Fixed:L,enableBoundaryChecking:Ye};const Ze=E({name:"IconPlus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-plus`,{[`${t}-spin`]:e.spin}]),d=y(()=>{const r={};return e.size&&(r.fontSize=p(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:d,onClick:r=>{n("click",r)}}}}),Xe=["stroke-width","stroke-linecap","stroke-linejoin"],Je=Z("path",{d:"M5 24h38M24 5v38"},null,-1),Qe=[Je];function et(e,n,t,o,d,i){return M(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},Qe,14,Xe)}var T=J(Ze,[["render",et]]);const tt=Object.assign(T,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+T.name,T)}}),nt=E({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-minus`,{[`${t}-spin`]:e.spin}]),d=y(()=>{const r={};return e.size&&(r.fontSize=p(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:d,onClick:r=>{n("click",r)}}}}),at=["stroke-width","stroke-linecap","stroke-linejoin"],rt=Z("path",{d:"M5 24h38"},null,-1),ot=[rt];function lt(e,n,t,o,d,i){return M(),P("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},ot,14,at)}var A=J(nt,[["render",lt]]);const it=Object.assign(A,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+A.name,A)}});var ut=Object.defineProperty,oe=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,le=(e,n,t)=>n in e?ut(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,dt=(e,n)=>{for(var t in n||(n={}))st.call(n,t)&&le(e,t,n[t]);if(oe)for(var t of oe(n))ct.call(n,t)&&le(e,t,n[t]);return e};const mt=800,ft=150;q.enableBoundaryChecking(!1);var W=E({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1},inputAttrs:{type:Object}},emits:{"update:modelValue":e=>!0,change:(e,n)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,n,t)=>!0},setup(e,{emit:n,slots:t}){var o;const{size:d,disabled:i}=Ce(e),r=j("input-number"),g=$(),{mergedSize:N,mergedDisabled:v,eventHandlers:B}=Be({size:d,disabled:i}),{mergedSize:c}=Ie(N),f=y(()=>{if(p(e.precision)){const a=`${e.step}`.split(".")[1],l=a&&a.length||0;return Math.max(l,e.precision)}}),x=a=>{var l,u;if(!p(a))return"";const h=f.value?a.toFixed(f.value):String(a);return(u=(l=e.formatter)==null?void 0:l.call(e,h))!=null?u:h},_=$(x((o=e.modelValue)!=null?o:e.defaultValue)),m=y(()=>{var a,l;if(!_.value)return;const u=Number((l=(a=e.parser)==null?void 0:a.call(e,_.value))!=null?l:_.value);return Number.isNaN(u)?void 0:u}),C=$(p(m.value)&&m.value<=e.min),S=$(p(m.value)&&m.value>=e.max);let I=0;const k=()=>{I&&(window.clearTimeout(I),I=0)},ee=a=>{if(!ze(a))return p(e.min)&&a<e.min&&(a=e.min),p(e.max)&&a>e.max&&(a=e.max),p(f.value)?q.round(a,f.value):a},O=a=>{let l=!1,u=!1;p(a)&&(a<=e.min&&(l=!0),a>=e.max&&(u=!0)),S.value!==u&&(S.value=u),C.value!==l&&(C.value=l)},te=()=>{const a=ee(m.value),l=x(a);(a!==m.value||_.value!==l)&&(_.value=l),n("update:modelValue",a)};U(()=>[e.max,e.min],()=>{te(),O(m.value)});const F=(a,l)=>{if(v.value||a==="plus"&&S.value||a==="minus"&&C.value)return;let u;p(m.value)?u=ee(q[a](m.value,e.step)):u=e.min===-1/0?0:e.min,_.value=x(u),O(u),n("update:modelValue",u),n("change",u,l)},V=(a,l,u=!1)=>{var h;a.preventDefault(),(h=g.value)==null||h.focus(),F(l,a),u&&(I=window.setTimeout(()=>a.target.dispatchEvent(a),I?ft:mt))},de=(a,l)=>{var u,h,ne,ae;a=a.trim().replace(/。/g,"."),a=(h=(u=e.parser)==null?void 0:u.call(e,a))!=null?h:a,(p(Number(a))||/^(\.|-)$/.test(a))&&(_.value=(ae=(ne=e.formatter)==null?void 0:ne.call(e,a))!=null?ae:a,O(m.value),n("input",m.value,_.value,l),e.modelEvent==="input"&&(n("update:modelValue",m.value),n("change",m.value,l)))},me=a=>{n("focus",a)},fe=(a,l)=>{l instanceof MouseEvent&&!a||(te(),n("change",m.value,l))},ve=a=>{n("blur",a)},pe=a=>{var l,u;_.value="",n("update:modelValue",void 0),n("change",void 0,a),(u=(l=B.value)==null?void 0:l.onChange)==null||u.call(l,a),n("clear",a)},_e=je(new Map([[re.ARROW_UP,a=>{a.preventDefault(),!e.readOnly&&F("plus",a)}],[re.ARROW_DOWN,a=>{a.preventDefault(),!e.readOnly&&F("minus",a)}]]));U(()=>e.modelValue,a=>{a!==m.value&&(_.value=x(a),O(a))});const he=()=>{var a,l,u;return e.readOnly?null:s(Se,null,[t.suffix&&s("div",{class:`${r}-suffix`},[(a=t.suffix)==null?void 0:a.call(t)]),s("div",{class:`${r}-step`},[s("button",{class:[`${r}-step-button`,{[`${r}-step-button-disabled`]:v.value||S.value}],type:"button",tabindex:"-1",disabled:v.value||S.value,onMousedown:h=>V(h,"plus",!0),onMouseup:k,onMouseleave:k},[t.plus?(l=t.plus)==null?void 0:l.call(t):s(Ke,null,null)]),s("button",{class:[`${r}-step-button`,{[`${r}-step-button-disabled`]:v.value||C.value}],type:"button",tabindex:"-1",disabled:v.value||C.value,onMousedown:h=>V(h,"minus",!0),onMouseup:k,onMouseleave:k},[t.minus?(u=t.minus)==null?void 0:u.call(t):s(Ee,null,null)])])])},be=y(()=>[r,`${r}-mode-${e.mode}`,`${r}-size-${c.value}`,{[`${r}-readonly`]:e.readOnly}]),ge=()=>s(K,{size:c.value,tabindex:"-1",class:`${r}-step-button`,disabled:v.value||C.value,onMousedown:a=>V(a,"minus",!0),onMouseup:k,onMouseleave:k},{icon:()=>s(it,null,null)}),ye=()=>s(K,{size:c.value,tabindex:"-1",class:`${r}-step-button`,disabled:v.value||S.value,onMousedown:a=>V(a,"plus",!0),onMouseup:k,onMouseleave:k},{icon:()=>s(tt,null,null)});return{inputRef:g,render:()=>{const a=e.mode==="embed"?{prepend:t.prepend,prefix:t.prefix,suffix:e.hideButton?t.suffix:he,append:t.append}:{prepend:e.hideButton?t.prepend:ge,prefix:t.prefix,suffix:t.suffix,append:e.hideButton?t.append:ye};return s(ie,{key:`__arco__${e.mode}`,ref:g,class:be.value,type:"text",allowClear:e.allowClear,size:c.value,modelValue:_.value,placeholder:e.placeholder,disabled:v.value,readonly:e.readOnly,error:e.error,inputAttrs:dt({role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":_.value},e.inputAttrs),onInput:de,onFocus:me,onBlur:ve,onClear:pe,onChange:fe,onKeydown:_e},a)}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const vt=Object.assign(W,{install:(e,n)=>{Le(e,n);const t=Pe(n);e.component(t+W.name,W)}});const pt={__name:"ModelInfo",setup(e){const n=ue(),t=$e({url:n.tilesConfig.url,alt:n.tilesConfig.alt}),o=()=>{console.log(t),n.updateTilesConfig({url:t.url,alt:t.alt})};return(d,i)=>{const r=ie,g=Ve,N=vt,v=K,B=Oe;return M(),Me(B,{model:t,class:"formLayout",onSubmit:o},{default:z(()=>[s(g,{field:"name",label:"\u5730\u5740"},{default:z(()=>[s(r,{modelValue:t.url,"onUpdate:modelValue":i[0]||(i[0]=c=>t.url=c),placeholder:"\u8BF7\u8F93\u51653dtiles\u6A21\u578B\u5730\u5740"},null,8,["modelValue"])]),_:1}),s(g,{field:"alt",label:"\u9AD8\u5EA6"},{default:z(()=>[s(N,{modelValue:t.alt,"onUpdate:modelValue":i[1]||(i[1]=c=>t.alt=c),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1}),s(g,null,{default:z(()=>[s(v,{"html-type":"submit",onClick:o},{default:z(()=>[Ne("\u786E\u5B9A")]),_:1})]),_:1})]),_:1},8,["model"])}}},_t=X(pt,[["__scopeId","data-v-d6426217"]]);const ht={class:"mapView w-full min-h-[calc(100vh-58px)]"},bt={__name:"index",setup(e){return(n,t)=>(M(),P("div",ht,[s(Fe),s(_t)]))}},Pt=X(bt,[["__scopeId","data-v-aaeba824"]]);export{Pt as default};
