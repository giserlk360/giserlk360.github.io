import{k as tt,l as nt,m as ot,n as rt,a as me,g as it,p as lt,q as st,r as at,o as Z,t as ut,b as be,s as ft,d as ct}from"./index-0e4b31d4.js";import{r as b,o as I,Y as ee,d as te,A as V,X as ze,t as dt,c as z,z as ye,p as ht,m as vt,Z as mt,k as w,_ as bt,u as yt,T as pt,G as wt,H as _t,F as gt,J as pe}from"./index-bbce9413.js";import{o as Ot}from"./omit-beff4be5.js";var Ae=function(){if(typeof Map<"u")return Map;function e(t,n){var o=-1;return t.some(function(r,l){return r[0]===n?(o=l,!0):!1}),o}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var o=e(this.__entries__,n),r=this.__entries__[o];return r&&r[1]},t.prototype.set=function(n,o){var r=e(this.__entries__,n);~r?this.__entries__[r][1]=o:this.__entries__.push([n,o])},t.prototype.delete=function(n){var o=this.__entries__,r=e(o,n);~r&&o.splice(r,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,o){o===void 0&&(o=null);for(var r=0,l=this.__entries__;r<l.length;r++){var s=l[r];n.call(o,s[1],s[0])}},t}()}(),R=typeof window<"u"&&typeof document<"u"&&window.document===document,k=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Et=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(k):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Ct=2;function Tt(e,t){var n=!1,o=!1,r=0;function l(){n&&(n=!1,e()),o&&f()}function s(){Et(l)}function f(){var u=Date.now();if(n){if(u-r<Ct)return;o=!0}else n=!0,o=!1,setTimeout(s,t);r=u}return f}var Mt=20,St=["top","right","bottom","left","width","height","size","weight"],Pt=typeof MutationObserver<"u",xt=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Tt(this.refresh.bind(this),Mt)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,o=n.indexOf(t);~o&&n.splice(o,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!R||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Pt?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!R||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,o=n===void 0?"":n,r=St.some(function(l){return!!~o.indexOf(l)});r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Be=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},S=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||k},Fe=G(0,0,0,0);function H(e){return parseFloat(e)||0}function we(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(o,r){var l=e["border-"+r+"-width"];return o+H(l)},0)}function zt(e){for(var t=["top","right","bottom","left"],n={},o=0,r=t;o<r.length;o++){var l=r[o],s=e["padding-"+l];n[l]=H(s)}return n}function At(e){var t=e.getBBox();return G(0,0,t.width,t.height)}function Bt(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Fe;var o=S(e).getComputedStyle(e),r=zt(o),l=r.left+r.right,s=r.top+r.bottom,f=H(o.width),u=H(o.height);if(o.boxSizing==="border-box"&&(Math.round(f+l)!==t&&(f-=we(o,"left","right")+l),Math.round(u+s)!==n&&(u-=we(o,"top","bottom")+s)),!Lt(e)){var c=Math.round(f+l)-t,d=Math.round(u+s)-n;Math.abs(c)!==1&&(f-=c),Math.abs(d)!==1&&(u-=d)}return G(r.left,r.top,f,u)}var Ft=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof S(e).SVGGraphicsElement}:function(e){return e instanceof S(e).SVGElement&&typeof e.getBBox=="function"}}();function Lt(e){return e===S(e).document.documentElement}function Dt(e){return R?Ft(e)?At(e):Bt(e):Fe}function jt(e){var t=e.x,n=e.y,o=e.width,r=e.height,l=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(l.prototype);return Be(s,{x:t,y:n,width:o,height:r,top:n,right:t+o,bottom:r+n,left:t}),s}function G(e,t,n,o){return{x:e,y:t,width:n,height:o}}var $t=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=G(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Dt(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Wt=function(){function e(t,n){var o=jt(n);Be(this,{target:t,contentRect:o})}return e}(),Vt=function(){function e(t,n,o){if(this.activeObservations_=[],this.observations_=new Ae,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=o}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof S(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new $t(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof S(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(o){return new Wt(o.target,o.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Le=typeof WeakMap<"u"?new WeakMap:new Ae,De=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=xt.getInstance(),o=new Vt(t,n,this);Le.set(this,o)}return e}();["observe","unobserve","disconnect"].forEach(function(e){De.prototype[e]=function(){var t;return(t=Le.get(this))[e].apply(t,arguments)}});var je=function(){return typeof k.ResizeObserver<"u"?k.ResizeObserver:De}();const $e=typeof window>"u"?global:window,kt=$e.requestAnimationFrame,_e=$e.cancelAnimationFrame;function ge(e){let t=0;const n=(...o)=>{t&&_e(t),t=kt(()=>{e(...o),t=0})};return n.cancel=()=>{_e(t),t=0},n}var Ht=Object.defineProperty,Oe=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,Ee=(e,t,n)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))It.call(t,n)&&Ee(e,n,t[n]);if(Oe)for(var n of Oe(t))Gt.call(t,n)&&Ee(e,n,t[n]);return e};const Nt=()=>{const{height:e,width:t}=nt();return{width:Math.min(t,window.innerWidth),height:Math.min(e,window.innerHeight)}},Ce=(e,t)=>{var n,o;const r=e.getBoundingClientRect();return{top:r.top,bottom:r.bottom,left:r.left,right:r.right,scrollTop:r.top-t.top,scrollBottom:r.bottom-t.top,scrollLeft:r.left-t.left,scrollRight:r.right-t.left,width:(n=e.offsetWidth)!=null?n:e.clientWidth,height:(o=e.offsetHeight)!=null?o:e.clientHeight}},qt=e=>{switch(e){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},W=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},Yt=(e,t,{containerRect:n,triggerRect:o,popupRect:r,offset:l,translate:s})=>{const f=qt(e),u=Nt(),c={top:n.top+t.top,bottom:u.height-(n.top+t.top+r.height),left:n.left+t.left,right:u.width-(n.left+t.left+r.width)};let d=e;if(f==="top"&&c.top<0)if(o.top>r.height)t.top=-n.top;else{const v=B("bottom",o,r,{offset:l,translate:s});u.height-(n.top+v.top+r.height)>0&&(d=W(e,"bottom"),t.top=v.top)}if(f==="bottom"&&c.bottom<0)if(u.height-o.bottom>r.height)t.top=-n.top+(u.height-r.height);else{const v=B("top",o,r,{offset:l,translate:s});n.top+v.top>0&&(d=W(e,"top"),t.top=v.top)}if(f==="left"&&c.left<0)if(o.left>r.width)t.left=-n.left;else{const v=B("right",o,r,{offset:l,translate:s});u.width-(n.left+v.left+r.width)>0&&(d=W(e,"right"),t.left=v.left)}if(f==="right"&&c.right<0)if(u.width-o.right>r.width)t.left=-n.left+(u.width-r.width);else{const v=B("left",o,r,{offset:l,translate:s});n.left+v.left>0&&(d=W(e,"left"),t.left=v.left)}return(f==="top"||f==="bottom")&&(c.left<0?t.left=-n.left:c.right<0&&(t.left=-n.left+(u.width-r.width))),(f==="left"||f==="right")&&(c.top<0?t.top=-n.top:c.bottom<0&&(t.top=-n.top+(u.height-r.height))),{popupPosition:t,position:d}},B=(e,t,n,{offset:o=0,translate:r=[0,0]}={})=>{var l;const s=(l=tt(r)?r:r[e])!=null?l:[0,0];switch(e){case"top":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(n.width/2)+s[0],top:t.scrollTop-n.height-o+s[1]};case"tl":return{left:t.scrollLeft+s[0],top:t.scrollTop-n.height-o+s[1]};case"tr":return{left:t.scrollRight-n.width+s[0],top:t.scrollTop-n.height-o+s[1]};case"bottom":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(n.width/2)+s[0],top:t.scrollBottom+o+s[1]};case"bl":return{left:t.scrollLeft+s[0],top:t.scrollBottom+o+s[1]};case"br":return{left:t.scrollRight-n.width+s[0],top:t.scrollBottom+o+s[1]};case"left":return{left:t.scrollLeft-n.width-o+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(n.height/2)+s[1]};case"lt":return{left:t.scrollLeft-n.width-o+s[0],top:t.scrollTop+s[1]};case"lb":return{left:t.scrollLeft-n.width-o+s[0],top:t.scrollBottom-n.height+s[1]};case"right":return{left:t.scrollRight+o+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(n.height/2)+s[1]};case"rt":return{left:t.scrollRight+o+s[0],top:t.scrollTop+s[1]};case"rb":return{left:t.scrollRight+o+s[0],top:t.scrollBottom-n.height+s[1]};default:return{left:0,top:0}}},Kt=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let n="0";return["left","right"].includes(e)?n="50%":["top","tl","tr","lt","rt"].includes(e)&&(n="100%"),`${t} ${n}`},Ut=(e,t,n,o,{offset:r=0,translate:l=[0,0],customStyle:s={},autoFitPosition:f=!1}={})=>{let u=e,c=B(e,n,o,{offset:r,translate:l});if(f){const v=Yt(e,c,{containerRect:t,popupRect:o,triggerRect:n,offset:r,translate:l});c=v.popupPosition,u=v.position}return{style:A({left:`${c.left}px`,top:`${c.top}px`},s),position:u}},Xt=(e,t,n,{customStyle:o={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let l=Math.abs(t.scrollLeft+t.width/2-n.scrollLeft);return l>n.width-8&&(t.width>n.width?l=n.width/2:l=n.width-8),["top","tl","tr"].includes(e)?A({left:`${l}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},o):A({left:`${l}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)}let r=Math.abs(t.scrollTop+t.height/2-n.scrollTop);return r>n.height-8&&(t.height>n.height?r=n.height/2:r=n.height-8),["left","lt","lb"].includes(e)?A({top:`${r}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},o):A({top:`${r}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)},Jt=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,Te=e=>{var t;const n=[];let o=e;for(;o&&o!==document.documentElement;)Jt(o)&&n.push(o),o=(t=o.parentElement)!=null?t:void 0;return n},We=()=>{const e={},t=b(),n=()=>{const o=ot(e.value);o!==t.value&&(t.value=o)};return I(()=>n()),ee(()=>n()),{children:e,firstElement:t}};var Me=te({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(e,{emit:t,slots:n}){const{children:o,firstElement:r}=We();let l;const s=u=>{!u||(l=new je(c=>{const d=c[0];t("resize",d)}),l.observe(u))},f=()=>{l&&(l.disconnect(),l=null)};return V(r,u=>{l&&f(),u&&s(u)}),ze(()=>{l&&f()}),()=>{var u;return o.value=(u=n.default)==null?void 0:u.call(n),o.value}}});function Zt(e,t){const n=b(e[t]);return ee(()=>{const o=e[t];n.value!==o&&(n.value=o)}),n}const Se=Symbol("ArcoTrigger"),Qt=({elementRef:e,onResize:t})=>{let n;return{createResizeObserver:()=>{!e.value||(n=new je(l=>{const s=l[0];rt(t)&&t(s)}),n.observe(e.value))},destroyResizeObserver:()=>{n&&(n.disconnect(),n=null)}}};var Rt=te({name:"ClientOnly",setup(e,{slots:t}){const n=b(!1);return I(()=>n.value=!0),()=>{var o;return n.value?(o=t.default)==null?void 0:o.call(t):null}}});const en=({popupContainer:e,visible:t,defaultContainer:n="body",documentContainer:o})=>{const r=b(e.value),l=b(),s=()=>{const f=me(e.value),u=f?e.value:n,c=f!=null?f:o?document.documentElement:me(n);u!==r.value&&(r.value=u),c!==l.value&&(l.value=c)};return I(()=>s()),V(t,f=>{r.value!==e.value&&f&&s()}),{teleportContainer:r,containerRef:l}};var tn=Object.defineProperty,nn=Object.defineProperties,on=Object.getOwnPropertyDescriptors,Pe=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,xe=(e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t)=>{for(var n in t||(t={}))rn.call(t,n)&&xe(e,n,t[n]);if(Pe)for(var n of Pe(t))ln.call(t,n)&&xe(e,n,t[n]);return e},an=(e,t)=>nn(e,on(t));const un=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var Q=te({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},scrollToCloseDistance:{type:Number,default:0}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:t,slots:n,attrs:o}){const{popupContainer:r}=dt(e),l=it("trigger"),s=z(()=>Ot(o,un)),f=ye(lt,void 0),u=z(()=>[].concat(e.trigger)),c=new Set,d=ye(Se,void 0),{children:v,firstElement:P}=We(),C=b(),ne=b(e.defaultPopupVisible),F=b(e.position),oe=b({}),re=b({}),ie=b({}),Ve=b(),_=b({top:0,left:0});let L=null,D=null;const h=z(()=>{var i;return(i=e.popupVisible)!=null?i:ne.value}),{teleportContainer:ke,containerRef:N}=en({popupContainer:r,visible:h,documentContainer:!0}),{zIndex:He}=st("popup",{visible:h});let x=0,g=!1,q=!1;const Ie=()=>{x&&(window.clearTimeout(x),x=0)},Y=i=>{if(e.alignPoint){const{pageX:a,pageY:m}=i;_.value={top:m,left:a}}},O=()=>{if(!P.value||!C.value||!N.value)return;const i=N.value.getBoundingClientRect(),a=e.alignPoint?{top:_.value.top,bottom:_.value.top,left:_.value.left,right:_.value.left,scrollTop:_.value.top,scrollBottom:_.value.top,scrollLeft:_.value.left,scrollRight:_.value.left,width:0,height:0}:Ce(P.value,i),m=()=>Ce(C.value,i),T=m(),{style:E,position:M}=Ut(e.position,i,a,T,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(re.value={transformOrigin:Kt(M)}),e.autoFitPopupMinWidth?E.minWidth=`${a.width}px`:e.autoFitPopupWidth&&(E.width=`${a.width}px`),F.value!==M&&(F.value=M),oe.value=E,e.showArrow&&pe(()=>{ie.value=Xt(M,a,m(),{customStyle:e.arrowStyle})})},y=(i,a)=>{if(i===h.value&&x===0)return;const m=()=>{ne.value=i,t("update:popupVisible",i),t("popupVisibleChange",i),i&&pe(()=>{O()})};i||(L=null,D=null),a?(Ie(),i!==h.value&&(x=window.setTimeout(m,a))):m()},Ge=i=>{var a;(a=o.onClick)==null||a.call(o,i),!(e.disabled||h.value&&!e.clickToClose)&&(u.value.includes("click")?(Y(i),y(!h.value)):u.value.includes("contextMenu")&&h.value&&y(!1))},le=i=>{var a;(a=o.onMouseenter)==null||a.call(o,i),!(e.disabled||!u.value.includes("hover"))&&(Y(i),y(!0,e.mouseEnterDelay))},se=i=>{d==null||d.onMouseenter(i),le(i)},ae=i=>{var a;(a=o.onMouseleave)==null||a.call(o,i),!(e.disabled||!u.value.includes("hover"))&&y(!1,e.mouseLeaveDelay)},ue=i=>{d==null||d.onMouseleave(i),ae(i)},Ne=i=>{var a;(a=o.onFocusin)==null||a.call(o,i),!(e.disabled||!u.value.includes("focus"))&&y(!0,e.focusDelay)},qe=i=>{var a;(a=o.onFocusout)==null||a.call(o,i),!(e.disabled||!u.value.includes("focus"))&&(!e.blurToClose||y(!1))},Ye=i=>{var a;(a=o.onContextmenu)==null||a.call(o,i),!(e.disabled||!u.value.includes("contextMenu")||h.value&&!e.clickToClose)&&(Y(i),y(!h.value),i.preventDefault())};ht(Se,vt({onMouseenter:se,onMouseleave:ue,addChildRef:i=>{c.add(i),d==null||d.addChildRef(i)},removeChildRef:i=>{c.delete(i),d==null||d.removeChildRef(i)}}));const K=()=>{be(document.documentElement,"mousedown",U),g=!1},fe=Zt(n,"content"),Ke=z(()=>{var i;return e.hideEmpty&&at((i=fe.value)==null?void 0:i.call(fe))}),U=i=>{var a,m,T;if(!(((a=P.value)==null?void 0:a.contains(i.target))||((m=C.value)==null?void 0:m.contains(i.target)))){for(const E of c)if((T=E.value)!=null&&T.contains(i.target))return;K(),y(!1)}},ce=(i,a)=>{const[m,T]=i,{scrollTop:E,scrollLeft:M}=a;return Math.abs(E-m)>=e.scrollToCloseDistance||Math.abs(M-T)>=e.scrollToCloseDistance},j=ge(i=>{if(h.value)if(e.scrollToClose||(f==null?void 0:f.scrollToClose)){const a=i.target;L||(L=[a.scrollTop,a.scrollLeft]),ce(L,a)?y(!1):O()}else O()}),de=()=>{be(window,"scroll",he),q=!1},he=ge(i=>{const a=i.target.documentElement;D||(D=[a.scrollTop,a.scrollLeft]),ce(D,a)&&(y(!1),de())}),X=()=>{h.value&&O()},Ue=()=>{X(),t("resize")},Xe=i=>{e.preventFocus&&i.preventDefault()};d==null||d.addChildRef(C);const Je=z(()=>h.value?e.openedClass:void 0);let p;V(h,i=>{if(e.clickOutsideToClose&&(!i&&g?K():i&&!g&&(Z(document.documentElement,"mousedown",U),g=!0)),(e.scrollToClose||(f==null?void 0:f.scrollToClose))&&(Z(window,"scroll",he),q=!0),e.updateAtScroll||(f==null?void 0:f.updateAtScroll)){if(i){p=Te(P.value);for(const a of p)a.addEventListener("scroll",j)}else if(p){for(const a of p)a.removeEventListener("scroll",j);p=void 0}}i&&(J.value=!0)}),V(()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth],()=>{h.value&&O()});const{createResizeObserver:Ze,destroyResizeObserver:Qe}=Qt({elementRef:N,onResize:X});I(()=>{if(Ze(),h.value&&(O(),e.clickOutsideToClose&&!g&&(Z(document.documentElement,"mousedown",U),g=!0),e.updateAtScroll||(f==null?void 0:f.updateAtScroll))){p=Te(P.value);for(const i of p)i.addEventListener("scroll",j)}}),ee(()=>{h.value&&O()}),mt(()=>{y(!1)}),ze(()=>{if(d==null||d.removeChildRef(C),Qe(),g&&K(),q&&de(),p){for(const i of p)i.removeEventListener("scroll",j);p=void 0}});const J=b(h.value),$=b(!1),ve=()=>{$.value=!0},Re=()=>{$.value=!1,h.value&&t("show")},et=()=>{$.value=!1,h.value||(J.value=!1,t("hide"))};return()=>{var i,a;return v.value=(a=(i=n.default)==null?void 0:i.call(n))!=null?a:[],ut(v.value,{class:Je.value,onClick:Ge,onMouseenter:le,onMouseleave:ae,onFocusin:Ne,onFocusout:qe,onContextmenu:Ye}),w(gt,null,[e.autoFixPosition?w(Me,{onResize:Ue},{default:()=>[v.value]}):v.value,w(Rt,null,{default:()=>[w(bt,{to:ke.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||h.value||J.value)&&!Ke.value&&w(Me,{onResize:X},{default:()=>[w("div",yt({ref:C,class:[`${l}-popup`,`${l}-position-${F.value}`],style:an(sn({},oe.value),{zIndex:He.value,pointerEvents:$.value?"none":"auto"}),"trigger-placement":F.value,onMouseenter:se,onMouseleave:ue,onMousedown:Xe},s.value),[w(pt,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:ve,onAfterEnter:Re,onBeforeLeave:ve,onAfterLeave:et},{default:()=>{var m;return[wt(w("div",{class:`${l}-popup-wrapper`,style:re.value},[w("div",{class:[`${l}-content`,e.contentClass],style:e.contentStyle},[(m=n.content)==null?void 0:m.call(n)]),e.showArrow&&w("div",{ref:Ve,class:[`${l}-arrow`,e.arrowClass],style:ie.value},null)]),[[_t,h.value]])]}})])]})]})]})])}}});const mn=Object.assign(Q,{install:(e,t)=>{ft(e,t);const n=ct(t);e.component(n+Q.name,Q)}});export{Me as R,mn as T,_e as c,je as i,kt as r,ge as t,Zt as u};
