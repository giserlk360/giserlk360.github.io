import{U as k,r as v,A as I,o as U,a as C,b as h,e as B,a1 as O,h as S,g as u,a2 as z,a3 as E,k as y}from"./index-2b249113.js";import{_ as b}from"./_plugin-vue_export-helper-c4cb8a60.js";import{M as R}from"./index-c7c28bd9.js";import"./constant-0bfba879.js";import"./use-popup-manager-fc119641.js";const w=k("svgmap",()=>{let s=v("./svg/320000.svg");function n(a){s.value=a}return{svgUrl:s,updateSvgUrl:n}});const F={__name:"EchartsSvg",setup(s){const n=w(),a=v(),c=v(),f=async(e,t)=>{try{const o=await fetch(t);if(o.status==200){const d=await o.text();return O(e,{svg:d}),!0}else R.error("\u65E0\u5730\u56FE\u8D44\u6E90\uFF01\uFF01\uFF01")}catch(o){return console.log(o),!1}},l=async()=>{const e=n.svgUrl;c.value=i(),await f(c.value.geo.map,e)&&(p(),g())},i=()=>({geo:{left:0,top:0,right:0,bottom:0,map:"svgMap",roam:!0,layoutCenter:["50%","50%"],layoutSize:"100%",itemStyle:{borderWidth:0,color:"transparent"},select:{label:{show:!0,color:"#fff",fontSize:12},itemStyle:{color:"#ffff33",borderColor:"#ebc11e",borderWidth:4}},label:{show:!1},emphasis:{focus:"none",itemStyle:{areaColor:"#2080D7",borderColor:"#2B91B7",borderWidth:2,opacity:1,shadowColor:"rgba(74, 188, 251, 0.4)",shadowBlur:3,shadowOffsetX:3,shadowOffsetY:5},label:{show:!1,color:"#fff",fontSize:12}},tooltip:{show:!0,padding:0,formatter:function(e){return e.name}}},tooltip:{show:!0},series:[{type:"scatter",coordinateSystem:"geo",geoIndex:0,data:[]}]}),p=()=>{var e;(e=a.value)==null||e.setOption(c.value,!0)},g=()=>{const e=[115.7468,29.7782],t=[122.8148,35.3539],o=941,d=770,_=o/(t[0]-e[0]),m=d/(t[1]-e[1]);c.value.series[0].data=[{name:"\u5357\u4EAC",value:r([118.7794,32.0395],t,e,m,_),symbol:"image://imgs/point.png",symbolSize:[35,35]},{name:"\u82CF\u5DDE",value:r([120.5905,31.3094],t,e,m,_),symbol:"image://imgs/point.png",symbolSize:[35,35]},{name:"\u5357\u901A",value:r([120.89,32.0049],t,e,m,_),symbol:"image://imgs/point.png",symbolSize:[35,35]}],p()},r=(e,t,o,d,_)=>[Math.abs(e[0]-o[0])*_,Math.abs(e[1]-t[1])*d],M=e=>{const t=[e.event.offsetX,e.event.offsetY],o=a.value.convertFromPixel({geoIndex:0},t);console.log("\u{1F680} ~ clickMap ~ dataPoint:",o)};return I(()=>n.svgUrl,()=>{l()}),U(()=>{l()}),(e,t)=>{const o=C("v-chart");return h(),B(o,{ref_key:"svgMapRef",ref:a,autoresize:"",class:"map-content",onClick:M},null,512)}}},L=b(F,[["__scopeId","data-v-36d48d26"]]);const x=s=>(z("data-v-2d23a783"),s=s(),E(),s),P={class:"tools"},T=x(()=>u("div",{class:"btn"},"\u7ECF\u7EAC\u5EA6\u6253\u70B9",-1)),A=x(()=>u("div",null,null,-1)),V={__name:"Tools",setup(s){const n=w(),a=v(null),c=l=>{const i=l.target.files[0];if(!i)return;const p=new FileReader;p.onload=g=>{const r=URL.createObjectURL(new Blob([g.target.result]));console.log("\u{1F680} ~ uploadFile ~ url:",r),n.updateSvgUrl(r),window.addEventListener("beforeunload",function(){URL.revokeObjectURL(r)})},p.readAsText(i)},f=()=>{a.value.click()};return(l,i)=>(h(),S("div",P,[u("div",{class:"btn-group"},[u("div",{class:"btn",onClick:f},"\u4E0A\u4F20svg"),T,A]),u("input",{ref_key:"fileInput",ref:a,type:"file",accept:".svg",style:{display:"none"},onChange:c},null,544)]))}},W=b(V,[["__scopeId","data-v-2d23a783"]]);const X={class:"mapView w-full min-h-[calc(100vh-58px)]"},Y={__name:"index",setup(s){return(n,a)=>(h(),S("div",X,[y(L),y(W)]))}},G=b(Y,[["__scopeId","data-v-4c43b9c3"]]);export{G as default};
