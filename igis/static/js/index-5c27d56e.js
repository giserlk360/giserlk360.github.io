import{U as ke,r as S,o as we,A as U,b as $,h as z,d as E,c as y,j as H,n as Y,g as Z,t as xe,k as d,F as Ce,m as Se,e as $e,f as B,D as Me}from"./index-147532fb.js";import{_ as X}from"./_plugin-vue_export-helper-c4cb8a60.js";import{g as j,e as v,_ as J,x as Ne,y as Be,c as Ie,B as K,s as ze,d as Le}from"./index-8c328d50.js";import{F as Pe,a as Oe}from"./index-9dee9f81.js";import"./index-f5976763.js";import{I as ie}from"./index-54867ecb.js";import{I as Ve}from"./index-48c30221.js";import{g as Ee,K as re}from"./keyboard-827e7326.js";import"./index-3eb6fbb9.js";import"./index-f38730f3.js";import"./index-87cc730c.js";import"./pick-e3f0369e.js";import"./use-cursor-9e99a648.js";const ue=ke("mars3d",()=>{let e=S({url:"https://data.mars3d.cn/3dtiles/qx-teh/tileset.json",alt:130});function n(t){e.value=t}return{tilesConfig:e,updateTilesConfig:n}});const je={__name:"Mars3dMap",setup(e){const n=window.Cesium,t=window.mars3d,o=S();let s=null;const u=ue(),r=()=>{s=new t.Map(o.value,{scene:{center:{lat:32.077606,lng:112.135681,alt:190.3,heading:11.7,pitch:-26.3},showSun:!0,showMoon:!0,showSkyBox:!0,showSkyAtmosphere:!1,fog:!1,fxaa:!0,globe:{showGroundAtmosphere:!1,depthTestAgainstTerrain:!0,show:!0,baseColor:"#546a53"},cameraController:{zoomFactor:3,minimumZoomDistance:1,maximumZoomDistance:5e7,enableRotate:!0,enableZoom:!0},mapProjection:t.CRS.EPSG3857,mapMode2D:n.MapMode2D.INFINITE_SCROLL},control:{baseLayerPicker:!1,homeButton:!1,sceneModePicker:!1,navigationHelpButton:!1,fullscreenButton:!1,contextmenu:{hasDefault:!0}},basemaps:[{name:"\u5929\u5730\u56FE\u5F71\u50CF",icon:"img/basemaps/tdt_img.png",type:"tdt",layer:"img_d",show:!0}]}),h({url:u.tilesConfig.url,alt:u.tilesConfig.alt})},h=c=>{M("3DTiles");const f=new t.layer.TilesetLayer({id:"3DTiles",name:"3dtiles\u56FE\u5C42",url:c.url,position:{alt:c.alt},maximumScreenSpaceError:10,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,dynamicScreenSpaceError:!0,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0,enableDebugWireframe:!1,flyTo:!0});s.addLayer(f),f.readyPromise.then(function(b){console.log("load\u5B8C\u6210",b)})},M=c=>{try{const f=s.getLayerById(c);f&&s.removeLayer(f)}catch(f){throw new Error(f)}};return we(()=>{r()}),U(()=>u.tilesConfig,(c,f)=>{console.log("tilesConfig changed1:",c),h({url:c.url,alt:c.alt})}),(c,f)=>($(),z("div",{ref_key:"mapRef",ref:o,class:"mapContainer"},null,512))}},De=X(je,[["__scopeId","data-v-22022cc9"]]),Fe=E({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-up`,{[`${t}-spin`]:e.spin}]),s=y(()=>{const r={};return e.size&&(r.fontSize=v(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:s,onClick:r=>{n("click",r)}}}}),Re=["stroke-width","stroke-linecap","stroke-linejoin"],Te=Z("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),Ae=[Te];function We(e,n,t,o,s,u){return $(),z("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},Ae,14,Re)}var R=J(Fe,[["render",We]]);const Ue=Object.assign(R,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+R.name,R)}});function Q(e,n){return n===void 0&&(n=15),+parseFloat(Number(e).toPrecision(n))}function g(e){var n=e.toString().split(/[eE]/),t=(n[0].split(".")[1]||"").length-+(n[1]||0);return t>0?t:0}function I(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var n=g(e);return n>0?Q(Number(e)*Math.pow(10,n)):Number(e)}function G(e){ce&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function D(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var o=n[0],s=n.slice(1);return s.reduce(function(u,r){return e(u,r)},o)}}var w=D(function(e,n){var t=I(e),o=I(n),s=g(e)+g(n),u=t*o;return G(u),u/Math.pow(10,s)}),Ke=D(function(e,n){var t=Math.pow(10,Math.max(g(e),g(n)));return(w(e,t)+w(n,t))/t}),Ge=D(function(e,n){var t=Math.pow(10,Math.max(g(e),g(n)));return(w(e,t)-w(n,t))/t}),se=D(function(e,n){var t=I(e),o=I(n);return G(t),G(o),w(t/o,Q(Math.pow(10,g(n)-g(e))))});function qe(e,n){var t=Math.pow(10,n),o=se(Math.round(Math.abs(w(e,t))),t);return e<0&&o!==0&&(o=w(o,-1)),o}var ce=!0;function He(e){e===void 0&&(e=!0),ce=e}var q={strip:Q,plus:Ke,minus:Ge,times:w,divide:se,round:qe,digitLength:g,float2Fixed:I,enableBoundaryChecking:He};const Ye=E({name:"IconPlus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-plus`,{[`${t}-spin`]:e.spin}]),s=y(()=>{const r={};return e.size&&(r.fontSize=v(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:s,onClick:r=>{n("click",r)}}}}),Ze=["stroke-width","stroke-linecap","stroke-linejoin"],Xe=Z("path",{d:"M5 24h38M24 5v38"},null,-1),Je=[Xe];function Qe(e,n,t,o,s,u){return $(),z("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},Je,14,Ze)}var T=J(Ye,[["render",Qe]]);const et=Object.assign(T,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+T.name,T)}}),tt=E({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const t=j("icon"),o=y(()=>[t,`${t}-minus`,{[`${t}-spin`]:e.spin}]),s=y(()=>{const r={};return e.size&&(r.fontSize=v(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:s,onClick:r=>{n("click",r)}}}}),nt=["stroke-width","stroke-linecap","stroke-linejoin"],at=Z("path",{d:"M5 24h38"},null,-1),rt=[at];function ot(e,n,t,o,s,u){return $(),z("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:H(e.cls),style:Y(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...r)=>e.onClick&&e.onClick(...r))},rt,14,nt)}var A=J(tt,[["render",ot]]);const lt=Object.assign(A,{install:(e,n)=>{var t;const o=(t=n==null?void 0:n.iconPrefix)!=null?t:"";e.component(o+A.name,A)}});var it=Object.defineProperty,oe=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,le=(e,n,t)=>n in e?it(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ct=(e,n)=>{for(var t in n||(n={}))ut.call(n,t)&&le(e,t,n[t]);if(oe)for(var t of oe(n))st.call(n,t)&&le(e,t,n[t]);return e};const dt=800,mt=150;q.enableBoundaryChecking(!1);var W=E({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1},inputAttrs:{type:Object}},emits:{"update:modelValue":e=>!0,change:(e,n)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,n,t)=>!0},setup(e,{emit:n,slots:t}){var o;const{size:s,disabled:u}=xe(e),r=j("input-number"),h=S(),{mergedSize:M,mergedDisabled:c,eventHandlers:f}=Ne({size:s,disabled:u}),{mergedSize:b}=Be(M),L=y(()=>{if(v(e.precision)){const a=`${e.step}`.split(".")[1],l=a&&a.length||0;return Math.max(l,e.precision)}}),P=a=>{var l,i;if(!v(a))return"";const _=L.value?a.toFixed(L.value):String(a);return(i=(l=e.formatter)==null?void 0:l.call(e,_))!=null?i:_},p=S(P((o=e.modelValue)!=null?o:e.defaultValue)),m=y(()=>{var a,l;if(!p.value)return;const i=Number((l=(a=e.parser)==null?void 0:a.call(e,p.value))!=null?l:p.value);return Number.isNaN(i)?void 0:i}),x=S(v(m.value)&&m.value<=e.min),C=S(v(m.value)&&m.value>=e.max);let N=0;const k=()=>{N&&(window.clearTimeout(N),N=0)},ee=a=>{if(!Ie(a))return v(e.min)&&a<e.min&&(a=e.min),v(e.max)&&a>e.max&&(a=e.max),v(L.value)?q.round(a,L.value):a},O=a=>{let l=!1,i=!1;v(a)&&(a<=e.min&&(l=!0),a>=e.max&&(i=!0)),C.value!==i&&(C.value=i),x.value!==l&&(x.value=l)},te=()=>{const a=ee(m.value),l=P(a);(a!==m.value||p.value!==l)&&(p.value=l),n("update:modelValue",a)};U(()=>[e.max,e.min],()=>{te(),O(m.value)});const F=(a,l)=>{if(c.value||a==="plus"&&C.value||a==="minus"&&x.value)return;let i;v(m.value)?i=ee(q[a](m.value,e.step)):i=e.min===-1/0?0:e.min,p.value=P(i),O(i),n("update:modelValue",i),n("change",i,l)},V=(a,l,i=!1)=>{var _;a.preventDefault(),(_=h.value)==null||_.focus(),F(l,a),i&&(N=window.setTimeout(()=>a.target.dispatchEvent(a),N?mt:dt))},de=(a,l)=>{var i,_,ne,ae;a=a.trim().replace(/ã€‚/g,"."),a=(_=(i=e.parser)==null?void 0:i.call(e,a))!=null?_:a,(v(Number(a))||/^(\.|-)$/.test(a))&&(p.value=(ae=(ne=e.formatter)==null?void 0:ne.call(e,a))!=null?ae:a,O(m.value),n("input",m.value,p.value,l),e.modelEvent==="input"&&(n("update:modelValue",m.value),n("change",m.value,l)))},me=a=>{n("focus",a)},fe=(a,l)=>{l instanceof MouseEvent&&!a||(te(),n("change",m.value,l))},ve=a=>{n("blur",a)},pe=a=>{var l,i;p.value="",n("update:modelValue",void 0),n("change",void 0,a),(i=(l=f.value)==null?void 0:l.onChange)==null||i.call(l,a),n("clear",a)},_e=Ee(new Map([[re.ARROW_UP,a=>{a.preventDefault(),!e.readOnly&&F("plus",a)}],[re.ARROW_DOWN,a=>{a.preventDefault(),!e.readOnly&&F("minus",a)}]]));U(()=>e.modelValue,a=>{a!==m.value&&(p.value=P(a),O(a))});const he=()=>{var a,l,i;return e.readOnly?null:d(Ce,null,[t.suffix&&d("div",{class:`${r}-suffix`},[(a=t.suffix)==null?void 0:a.call(t)]),d("div",{class:`${r}-step`},[d("button",{class:[`${r}-step-button`,{[`${r}-step-button-disabled`]:c.value||C.value}],type:"button",tabindex:"-1",disabled:c.value||C.value,onMousedown:_=>V(_,"plus",!0),onMouseup:k,onMouseleave:k},[t.plus?(l=t.plus)==null?void 0:l.call(t):d(Ue,null,null)]),d("button",{class:[`${r}-step-button`,{[`${r}-step-button-disabled`]:c.value||x.value}],type:"button",tabindex:"-1",disabled:c.value||x.value,onMousedown:_=>V(_,"minus",!0),onMouseup:k,onMouseleave:k},[t.minus?(i=t.minus)==null?void 0:i.call(t):d(Ve,null,null)])])])},be=y(()=>[r,`${r}-mode-${e.mode}`,`${r}-size-${b.value}`,{[`${r}-readonly`]:e.readOnly}]),ge=()=>d(K,{size:b.value,tabindex:"-1",class:`${r}-step-button`,disabled:c.value||x.value,onMousedown:a=>V(a,"minus",!0),onMouseup:k,onMouseleave:k},{icon:()=>d(lt,null,null)}),ye=()=>d(K,{size:b.value,tabindex:"-1",class:`${r}-step-button`,disabled:c.value||C.value,onMousedown:a=>V(a,"plus",!0),onMouseup:k,onMouseleave:k},{icon:()=>d(et,null,null)});return{inputRef:h,render:()=>{const a=e.mode==="embed"?{prepend:t.prepend,prefix:t.prefix,suffix:e.hideButton?t.suffix:he,append:t.append}:{prepend:e.hideButton?t.prepend:ge,prefix:t.prefix,suffix:t.suffix,append:e.hideButton?t.append:ye};return d(ie,{key:`__arco__${e.mode}`,ref:h,class:be.value,type:"text",allowClear:e.allowClear,size:b.value,modelValue:p.value,placeholder:e.placeholder,disabled:c.value,readonly:e.readOnly,error:e.error,inputAttrs:ct({role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":p.value},e.inputAttrs),onInput:de,onFocus:me,onBlur:ve,onClear:pe,onChange:fe,onKeydown:_e},a)}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const ft=Object.assign(W,{install:(e,n)=>{ze(e,n);const t=Le(n);e.component(t+W.name,W)}});const vt={__name:"ModelInfo",setup(e){const n=ue(),t=Se({url:n.tilesConfig.url,alt:n.tilesConfig.alt}),o=()=>{console.log(t),n.updateTilesConfig({url:t.url,alt:t.alt})};return(s,u)=>{const r=ie,h=Oe,M=ft,c=K,f=Pe;return $(),$e(f,{model:t,class:"formLayout",onSubmit:o},{default:B(()=>[d(h,{field:"name",label:"\u5730\u5740"},{default:B(()=>[d(r,{modelValue:t.url,"onUpdate:modelValue":u[0]||(u[0]=b=>t.url=b),placeholder:"\u8BF7\u8F93\u51653dtiles\u6A21\u578B\u5730\u5740"},null,8,["modelValue"])]),_:1}),d(h,{field:"alt",label:"\u9AD8\u5EA6"},{default:B(()=>[d(M,{modelValue:t.alt,"onUpdate:modelValue":u[1]||(u[1]=b=>t.alt=b),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u9AD8\u5EA6"},null,8,["modelValue"])]),_:1}),d(h,null,{default:B(()=>[d(c,{"html-type":"submit",onClick:o},{default:B(()=>[Me("\u786E\u5B9A")]),_:1})]),_:1})]),_:1},8,["model"])}}},pt=X(vt,[["__scopeId","data-v-d6426217"]]);const _t={class:"mapView w-full min-h-[calc(100vh-58px)]"},ht={__name:"index",setup(e){return(n,t)=>($(),z("div",_t,[d(De),d(pt)]))}},Lt=X(ht,[["__scopeId","data-v-aaeba824"]]);export{Lt as default};
