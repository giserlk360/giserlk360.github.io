import{K as x,_ as C,r as A,z as S,o as P,c as k,h as E,q as B,b as c,t as I,v as j,p as T,m as W}from"./index.4bf9b5eb.js";var y={exports:{}};(function(M,b){(function(f,h){M.exports=h()})(x,function(){function f(e){var o=[];return e.AMapUI&&o.push(h(e.AMapUI)),e.Loca&&o.push(m(e.Loca)),Promise.all(o)}function h(e){return new Promise(function(o,n){var a=[];if(e.plugins)for(var i=0;i<e.plugins.length;i+=1)u.AMapUI.plugins.indexOf(e.plugins[i])==-1&&a.push(e.plugins[i]);if(s.AMapUI===t.failed)n("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(s.AMapUI===t.notload){s.AMapUI=t.loading,u.AMapUI.version=e.version||u.AMapUI.version,i=u.AMapUI.version;var l=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+i+"/main.js",d.onerror=function(p){s.AMapUI=t.failed,n("\u8BF7\u6C42 AMapUI \u5931\u8D25")},d.onload=function(){if(s.AMapUI=t.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var p=0,v=a.length;p<v;p++){var w=a[p].split("/").slice(-1)[0];window.AMapUI[w]=arguments[p]}for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()});else for(o();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},l.appendChild(d)}else s.AMapUI===t.loaded?e.version&&e.version!==u.AMapUI.version?n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var p=0,v=a.length;p<v;p++){var w=a[p].split("/").slice(-1)[0];window.AMapUI[w]=arguments[p]}o()}):o():e.version&&e.version!==u.AMapUI.version?n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):r.AMapUI.push(function(p){p?n(p):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,w=a.length;v<w;v++){var L=a[v].split("/").slice(-1)[0];window.AMapUI[L]=arguments[v]}o()}):o()})})}function m(e){return new Promise(function(o,n){if(s.Loca===t.failed)n("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(s.Loca===t.notload){s.Loca=t.loading,u.Loca.version=e.version||u.Loca.version;var a=u.Loca.version,i=u.AMap.version.startsWith("2"),l=a.startsWith("2");if(i&&!l||!i&&l)n("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{i=u.key,l=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+a+"&key="+i,d.onerror=function(p){s.Loca=t.failed,n("\u8BF7\u6C42 AMapUI \u5931\u8D25")},d.onload=function(){for(s.Loca=t.loaded,o();r.Loca.length;)r.Loca.splice(0,1)[0]()},l.appendChild(d)}}else s.Loca===t.loaded?e.version&&e.version!==u.Loca.version?n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):o():e.version&&e.version!==u.Loca.version?n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):r.Loca.push(function(p){p?n(p):n()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(t||(t={}));var u={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},r={AMap:[],AMapUI:[],Loca:[]},g=[],_=function(e){typeof e=="function"&&(s.AMap===t.loaded?e(window.AMap):g.push(e))};return{load:function(e){return new Promise(function(o,n){if(s.AMap==t.failed)n("");else if(s.AMap==t.notload){var a=e.key,i=e.version,l=e.plugins;a?(window.AMap&&location.host!=="lbs.amap.com"&&n("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),u.key=a,u.AMap.version=i||u.AMap.version,u.AMap.plugins=l||u.AMap.plugins,s.AMap=t.loading,i=document.body||document.head,window.___onAPILoaded=function(p){if(delete window.___onAPILoaded,p)s.AMap=t.failed,n(p);else for(s.AMap=t.loaded,f(e).then(function(){o(window.AMap)}).catch(n);g.length;)g.splice(0,1)[0]()},l=document.createElement("script"),l.type="text/javascript",l.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+u.AMap.version+"&key="+a+"&plugin="+u.AMap.plugins.join(","),l.onerror=function(p){s.AMap=t.failed,n(p)},i.appendChild(l)):n("\u8BF7\u586B\u5199key")}else if(s.AMap==t.loaded)if(e.key&&e.key!==u.key)n("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==u.AMap.version)n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(a=[],e.plugins)for(i=0;i<e.plugins.length;i+=1)u.AMap.plugins.indexOf(e.plugins[i])==-1&&a.push(e.plugins[i]);a.length?window.AMap.plugin(a,function(){f(e).then(function(){o(window.AMap)}).catch(n)}):f(e).then(function(){o(window.AMap)}).catch(n)}else if(e.key&&e.key!==u.key)n("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==u.AMap.version)n("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var d=[];if(e.plugins)for(i=0;i<e.plugins.length;i+=1)u.AMap.plugins.indexOf(e.plugins[i])==-1&&d.push(e.plugins[i]);_(function(){d.length?window.AMap.plugin(d,function(){f(e).then(function(){o(window.AMap)}).catch(n)}):f(e).then(function(){o(window.AMap)}).catch(n)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,u={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},r={AMap:[],AMapUI:[],Loca:[]}}}})})(y);const J=y.exports;const U=M=>(T("data-v-dd4b0240"),M=M(),W(),M),z={class:"main-box"},O=U(()=>c("div",{id:"container"},null,-1)),D=U(()=>c("div",{class:"box"},[c("div"),c("div"),c("div"),c("div")],-1)),V={class:"weather"},q={class:"bigBox"},G={class:"city"},N={class:"clear"},F={class:"forecast"},K={class:"temperature"},R=["value"],Z={__name:"index",setup(M){const b=A(null),f=A(""),h=A(""),m=A(""),t=A(""),u=A(""),s=A(""),r=()=>{window._AMapSecurityConfig={securityJsCode:"70ad83856e431e14d13ce6124ff5f117"},J.load({key:"38fd1ab532e5a8c3a0da71b76e67c78e",version:"2.0",plugins:["AMap.ToolBar","AMap.Driving","AMap.ControlBar","AMap.PlaceSearch","AMap.AutoComplete","AMap.Geolocation","AMap.AdvancedInfoWindow","AMap.Weather","AMap.CitySearch"]}).then(o=>{b.value=new o.Map("container",{pitch:5,viewMode:"3D",terrain:!0,pitch:50,zoom:18,mapStyle:"amap://styles/normal",buildingAnimation:!0,resizeEnable:!1,rotateEnable:!1,pitchEnable:!0,expandZoomRange:!1,resizeEnable:!0}),s.value=new o.CitySearch,g(o),e(s.value)}).catch(o=>{console.log(o)})},g=o=>{let n={input:"tipinput"},a=new o.AutoComplete(n),i=new o.PlaceSearch({map:b.value});a.on("select",l);function l(d){i.setCity(d.poi.adcode),i.search(d.poi.name)}},_=o=>{new o.Weather().getForecast(u.value,function(a,i){a||(h.value=i.forecasts[0].dayWeather,m.value=i.forecasts[0].dayTemp,t.value=i.forecasts[0].nightTemp)})},e=o=>{o.getLocalCity(function(n,a){u.value=a.city})};return setTimeout(()=>{_(AMap)},1e3),S(()=>{r()}),(o,n)=>(P(),k("div",z,[O,E(B(j)),D,c("div",V,[c("div",q,[c("div",G,I(u.value),1),c("div",N,[c("div",F,I(h.value),1),c("div",K,I(t.value)+"~"+I(m.value)+"\u2103",1)])])]),c("div",{class:"search",onClick:n[0]||(n[0]=(...a)=>o.inputClick&&o.inputClick(...a))},[c("input",{id:"tipinput",value:f.value,type:"text"},null,8,R)])]))}},Q=C(Z,[["__scopeId","data-v-dd4b0240"]]);export{Q as default};
