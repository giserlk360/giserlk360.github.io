import{x as Qt,y as Zt,r as Ut,z as te,A as ee,o as re,c as ie,b as oe,B as ne,C as ae}from"./index.4bf9b5eb.js";function se(Q){const U=Qt(Q);U.clear();const it=J=>{U.setOption(J,!0)},$=()=>{Zt(()=>{U.resize()})};return window.addEventListener("resize",()=>{U.resize()}),{echartsInstance:U,setOptions:it,updateSize:$}}const ce={__name:"base-echart",props:{options:{type:[Object]},width:{type:String,default:"100%"},height:{type:String,default:"100%"}},setup(Q,{expose:U}){const it=Q,$=Ut(),J=Ut();return te(()=>{const{setOptions:ot,echartsInstance:k}=se($.value);ee(()=>{ot(it.options)}),J.value=k}),U({chartDom:J}),(ot,k)=>(re(),ie("div",{class:"base-echart",style:ne({width:Q.width,height:Q.height})},[oe("div",{ref_key:"echartDivRef",ref:$,style:{width:"100%",height:"100%"}},null,512)],4))}};var le={exports:{}};/*! For license information please see echarts-wordcloud.min.js.LICENSE.txt */(function(Q,U){(function(it,$){Q.exports=$(ae)})(self,function(it){return(()=>{var $={638:(k,ct,_t)=>{_t.r(ct);var x=_t(83);x.extendSeriesModel({type:"series.wordCloud",visualStyleAccessPath:"textStyle",visualStyleMapper:function(r){return{fill:r.get("color")}},visualDrawType:"fill",optionUpdated:function(){var r=this.option;r.gridSize=Math.max(Math.floor(r.gridSize),4)},getInitialData:function(r,s){var t=x.helper.createDimensions(r.data,{coordDimensions:["value"]}),n=new x.List(t,this);return n.initData(r.data),n},defaultOption:{maskImage:null,shape:"circle",left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,textStyle:{fontWeight:"normal"}}}),x.extendChartView({type:"wordCloud",render:function(r,s,t){var n=this.group;n.removeAll();var p=r.getData(),a=r.get("gridSize");r.layoutInstance.ondraw=function(v,g,L,M){var H=p.getItemModel(L),B=H.getModel("textStyle"),i=new x.graphic.Text({style:x.helper.createTextStyle(B),scaleX:1/M.info.mu,scaleY:1/M.info.mu,x:(M.gx+M.info.gw/2)*a,y:(M.gy+M.info.gh/2)*a,rotation:M.rot});i.setStyle({x:M.info.fillTextOffsetX,y:M.info.fillTextOffsetY+.5*g,text:v,verticalAlign:"middle",fill:p.getItemVisual(L,"style").fill,fontSize:g}),n.add(i),p.setItemGraphicEl(L,i),i.ensureState("emphasis").style=x.helper.createTextStyle(H.getModel(["emphasis","textStyle"]),{state:"emphasis"}),i.ensureState("blur").style=x.helper.createTextStyle(H.getModel(["blur","textStyle"]),{state:"blur"}),x.helper.enableHoverEmphasis(i,H.get(["emphasis","focus"]),H.get(["emphasis","blurScope"])),i.stateTransition={duration:r.get("animation")?r.get(["stateAnimation","duration"]):0,easing:r.get(["stateAnimation","easing"])},i.__highDownDispatcher=!0},this._model=r},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}}),window.setImmediate||(window.setImmediate=window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var r=[void 0],s="zero-timeout-message";return window.addEventListener("message",function(t){if(typeof t.data=="string"&&t.data.substr(0,s.length)===s){t.stopImmediatePropagation();var n=parseInt(t.data.substr(s.length),36);r[n]&&(r[n](),r[n]=void 0)}},!0),window.clearImmediate=function(t){r[t]&&(r[t]=void 0)},function(t){var n=r.length;return r.push(t),window.postMessage(s+n.toString(36),"*"),n}}()||function(r){window.setTimeout(r,0)}),window.clearImmediate||(window.clearImmediate=window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(r){window.clearTimeout(r)});var It=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var s=r.getContext("2d");return!!(s.getImageData&&s.fillText&&Array.prototype.some&&Array.prototype.push)}(),Tt=function(){if(It){for(var r,s,t=document.createElement("canvas").getContext("2d"),n=20;n;){if(t.font=n.toString(10)+"px sans-serif",t.measureText("\uFF37").width===r&&t.measureText("m").width===s)return n+1;r=t.measureText("\uFF37").width,s=t.measureText("m").width,n--}return 0}}(),$t=function(r){for(var s,t,n=r.length;n;s=Math.floor(Math.random()*n),t=r[--n],r[n]=r[s],r[s]=t);return r},Ct=function(r,s){if(It){Array.isArray(r)||(r=[r]),r.forEach(function(e,o){if(typeof e=="string"){if(r[o]=document.getElementById(e),!r[o])throw"The element id specified is not found."}else if(!e.tagName&&!e.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var t={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,layoutAnimation:!0,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(s)for(var n in s)n in t&&(t[n]=s[n]);if(typeof t.weightFactor!="function"){var p=t.weightFactor;t.weightFactor=function(e){return e*p}}if(typeof t.shape!="function")switch(t.shape){case"circle":default:t.shape="circle";break;case"cardioid":t.shape=function(e){return 1-Math.sin(e)};break;case"diamond":case"square":t.shape=function(e){var o=e%(2*Math.PI/4);return 1/(Math.cos(o)+Math.sin(o))};break;case"triangle-forward":t.shape=function(e){var o=e%(2*Math.PI/3);return 1/(Math.cos(o)+Math.sqrt(3)*Math.sin(o))};break;case"triangle":case"triangle-upright":t.shape=function(e){var o=(e+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(o)+Math.sqrt(3)*Math.sin(o))};break;case"pentagon":t.shape=function(e){var o=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(o)+.726543*Math.sin(o))};break;case"star":t.shape=function(e){var o=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-o)+3.07768*Math.sin(2*Math.PI/10-o)):1/(Math.cos(o)+3.07768*Math.sin(o))}}t.gridSize=Math.max(Math.floor(t.gridSize),4);var a,v,g,L,M,H,B,i=t.gridSize,ft=i-t.maskGapWidth,w=Math.abs(t.maxRotation-t.minRotation),S=Math.min(t.maxRotation,t.minRotation),b=t.rotationStep;switch(t.color){case"random-dark":B=function(){return Xt(10,50)};break;case"random-light":B=function(){return Xt(50,90)};break;default:typeof t.color=="function"&&(B=t.color)}var O=null;typeof t.classes=="function"&&(O=t.classes);var nt,at=!1,c=[],wt=function(e){var o,l,u=e.currentTarget,d=u.getBoundingClientRect();e.touches?(o=e.touches[0].clientX,l=e.touches[0].clientY):(o=e.clientX,l=e.clientY);var Z=o-d.left,K=l-d.top,st=Math.floor(Z*(u.width/d.width||1)/i),mt=Math.floor(K*(u.height/d.height||1)/i);return c[st][mt]},ut=function(e){var o=wt(e);nt!==o&&(nt=o,o?t.hover(o.item,o.dimension,e):t.hover(void 0,void 0,e))},kt=function(e){var o=wt(e);o&&(t.click(o.item,o.dimension,e),e.preventDefault())},Ot=[],Jt=function(e){if(Ot[e])return Ot[e];var o=8*e,l=o,u=[];for(e===0&&u.push([L[0],L[1],0]);l--;){var d=1;t.shape!=="circle"&&(d=t.shape(l/o*2*Math.PI)),u.push([L[0]+e*d*Math.cos(-l/o*2*Math.PI),L[1]+e*d*Math.sin(-l/o*2*Math.PI)*t.ellipticity,l/o*2*Math.PI])}return Ot[e]=u,u},Et=function(){return t.abortThreshold>0&&new Date().getTime()-H>t.abortThreshold},Kt=function(e,o,l,u,d){e>=v||o>=g||e<0||o<0||(a[e][o]=!1,l&&r[0].getContext("2d").fillRect(e*i,o*i,ft,ft),at&&(c[e][o]={item:d,dimension:u}))},ht=function(e,o,l){if(o)return!r.some(function(u){var d=document.createEvent("CustomEvent");return d.initCustomEvent(e,!0,o,l||{}),!u.dispatchEvent(d)},this);r.forEach(function(u){var d=document.createEvent("CustomEvent");d.initCustomEvent(e,!0,o,l||{}),u.dispatchEvent(d)},this)};(function(){var e=r[0];if(e.getContext)v=Math.ceil(e.width/i),g=Math.ceil(e.height/i);else{var o=e.getBoundingClientRect();v=Math.ceil(o.width/i),g=Math.ceil(o.height/i)}if(ht("wordcloudstart",!0)){var l,u,d,Z,K;if(L=t.origin?[t.origin[0]/i,t.origin[1]/i]:[v/2,g/2],M=Math.floor(Math.sqrt(v*v+g*g)),a=[],!e.getContext||t.clearCanvas)for(r.forEach(function(y){if(y.getContext){var j=y.getContext("2d");j.fillStyle=t.backgroundColor,j.clearRect(0,0,v*(i+1),g*(i+1)),j.fillRect(0,0,v*(i+1),g*(i+1))}else y.textContent="",y.style.backgroundColor=t.backgroundColor,y.style.position="relative"}),l=v;l--;)for(a[l]=[],u=g;u--;)a[l][u]=!0;else{var st=document.createElement("canvas").getContext("2d");st.fillStyle=t.backgroundColor,st.fillRect(0,0,1,1);var mt,zt,qt=st.getImageData(0,0,1,1).data,Yt=e.getContext("2d").getImageData(0,0,v*i,g*i).data;for(l=v;l--;)for(a[l]=[],u=g;u--;){zt=i;t:for(;zt--;)for(mt=i;mt--;)for(d=4;d--;)if(Yt[4*((u*i+zt)*v*i+(l*i+mt))+d]!==qt[d]){a[l][u]=!1;break t}a[l][u]!==!1&&(a[l][u]=!0)}Yt=st=qt=void 0}if(t.hover||t.click){for(at=!0,l=v+1;l--;)c[l]=[];t.hover&&e.addEventListener("mousemove",ut),t.click&&(e.addEventListener("click",kt),e.addEventListener("touchstart",kt),e.addEventListener("touchend",function(y){y.preventDefault()}),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function y(){e.removeEventListener("wordcloudstart",y),e.removeEventListener("mousemove",ut),e.removeEventListener("click",kt),nt=void 0})}d=0;var Nt=!0;t.layoutAnimation?t.wait!==0?(Z=window.setTimeout,K=window.clearTimeout):(Z=window.setImmediate,K=window.clearImmediate):(Z=function(y){y()},K=function(){Nt=!1});var Pt=function(y,j){r.forEach(function(gt){gt.removeEventListener(y,j)},this)},Rt=function y(){Pt("wordcloudstart",y),K(pt)};(function(y,j){r.forEach(function(gt){gt.addEventListener("wordcloudstart",j)},this)})(0,Rt);var pt=(t.layoutAnimation?Z:setTimeout)(function y(){if(Nt){if(d>=t.list.length)return K(pt),ht("wordcloudstop",!1),void Pt("wordcloudstart",Rt);H=new Date().getTime();var j=function(tt){var yt,xt,jt;Array.isArray(tt)?(yt=tt[0],xt=tt[1]):(yt=tt.word,xt=tt.weight,jt=tt.attributes);var Mt,lt,dt,At=t.rotateRatio===0||Math.random()>t.rotateRatio?0:w===0?S:S+Math.round(Math.random()*w/b)*b,X=function(q,G,f){var I=t.weightFactor(G);if(I<=t.minSize)return!1;var h=1;I<Tt&&(h=function(){for(var Wt=2;Wt*I<Tt;)Wt+=2;return Wt}());var P=document.createElement("canvas"),m=P.getContext("2d",{willReadFrequently:!0});m.font=t.fontWeight+" "+(I*h).toString(10)+"px "+t.fontFamily;var C=m.measureText(q).width/h,R=Math.max(I*h,m.measureText("m").width,m.measureText("\uFF37").width)/h,E=C+2*R,T=3*R,A=Math.ceil(E/i),D=Math.ceil(T/i);E=A*i,T=D*i;var Y=-C/2,F=.4*-R,z=Math.ceil((E*Math.abs(Math.sin(f))+T*Math.abs(Math.cos(f)))/i),W=Math.ceil((E*Math.abs(Math.cos(f))+T*Math.abs(Math.sin(f)))/i),N=W*i,et=z*i;P.setAttribute("width",N),P.setAttribute("height",et),m.scale(1/h,1/h),m.translate(N*h/2,et*h/2),m.rotate(-f),m.font=t.fontWeight+" "+(I*h).toString(10)+"px "+t.fontFamily,m.fillStyle="#000",m.textBaseline="middle",m.fillText(q,Y*h,(F+.5*I)*h);var bt=m.getImageData(0,0,N,et).data;if(Et())return!1;for(var _,Lt,Bt,Vt=[],rt=W,V=[z/2,W/2,z/2,W/2];rt--;)for(_=z;_--;){Bt=i;t:for(;Bt--;)for(Lt=i;Lt--;)if(bt[4*((_*i+Bt)*N+(rt*i+Lt))+3]){Vt.push([rt,_]),rt<V[3]&&(V[3]=rt),rt>V[1]&&(V[1]=rt),_<V[0]&&(V[0]=_),_>V[2]&&(V[2]=_);break t}}return{mu:h,occupied:Vt,bounds:V,gw:W,gh:z,fillTextOffsetX:Y,fillTextOffsetY:F,fillTextWidth:C,fillTextHeight:R,fontSize:I}}(yt,xt,At);if(!X||Et())return!1;if(!t.drawOutOfBound){var St=X.bounds;if(St[1]-St[3]+1>v||St[2]-St[0]+1>g)return!1}for(var Dt=M+1;Dt--;){var vt=Jt(M-Dt);t.shuffle&&(vt=[].concat(vt),$t(vt));for(var Ft=0;Ft<vt.length;Ft++){var Gt=(Mt=vt[Ft],lt=void 0,dt=void 0,lt=Math.floor(Mt[0]-X.gw/2),dt=Math.floor(Mt[1]-X.gh/2),X.gw,X.gh,!!function(q,G,f,I,h){for(var P=h.length;P--;){var m=q+h[P][0],C=G+h[P][1];if(m>=v||C>=g||m<0||C<0){if(!t.drawOutOfBound)return!1}else if(!a[m][C])return!1}return!0}(lt,dt,0,0,X.occupied)&&(function(q,G,f,I,h,P,m,C,R){var E,T,A=f.fontSize;E=B?B(I,h,A,P,m):t.color,T=O?O(I,h,A,P,m):t.classes;var D=f.bounds;D[3],D[0],D[1],D[3],D[2],D[0],r.forEach(function(Y){if(Y.getContext){var F=Y.getContext("2d"),z=f.mu;F.save(),F.scale(1/z,1/z),F.font=t.fontWeight+" "+(A*z).toString(10)+"px "+t.fontFamily,F.fillStyle=E,F.translate((q+f.gw/2)*i*z,(G+f.gh/2)*i*z),C!==0&&F.rotate(-C),F.textBaseline="middle",F.fillText(I,f.fillTextOffsetX*z,(f.fillTextOffsetY+.5*A)*z),F.restore()}else{var W=document.createElement("span"),N="";N="rotate("+-C/Math.PI*180+"deg) ",f.mu!==1&&(N+="translateX(-"+f.fillTextWidth/4+"px) scale("+1/f.mu+")");var et={position:"absolute",display:"block",font:t.fontWeight+" "+A*f.mu+"px "+t.fontFamily,left:(q+f.gw/2)*i+f.fillTextOffsetX+"px",top:(G+f.gh/2)*i+f.fillTextOffsetY+"px",width:f.fillTextWidth+"px",height:f.fillTextHeight+"px",lineHeight:A+"px",whiteSpace:"nowrap",transform:N,webkitTransform:N,msTransform:N,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};for(var bt in E&&(et.color=E),W.textContent=I,et)W.style[bt]=et[bt];if(R)for(var _ in R)W.setAttribute(_,R[_]);T&&(W.className+=T),Y.appendChild(W)}})}(lt,dt,X,yt,xt,M-Dt,Mt[2],At,jt),function(q,G,f,I,h,P){var m,C,R=h.occupied,E=t.drawMask;if(E&&((m=r[0].getContext("2d")).save(),m.fillStyle=t.maskColor),at){var T=h.bounds;C={x:(q+T[3])*i,y:(G+T[0])*i,w:(T[1]-T[3]+1)*i,h:(T[2]-T[0]+1)*i}}for(var A=R.length;A--;){var D=q+R[A][0],Y=G+R[A][1];D>=v||Y>=g||D<0||Y<0||Kt(D,Y,E,C,P)}E&&m.restore()}(lt,dt,0,0,X,tt),{gx:lt,gy:dt,rot:At,info:X}));if(Gt)return Gt}}return null}(t.list[d]),gt=!ht("wordclouddrawn",!0,{item:t.list[d],drawn:j});if(Et()||gt)return K(pt),t.abort(),ht("wordcloudabort",!1),ht("wordcloudstop",!1),void Pt("wordcloudstart",Rt);d++,pt=Z(y,t.wait)}},t.wait)}})()}function Xt(e,o){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(o-e)+e).toFixed()+"%)"}};Ct.isSupported=It,Ct.minFontSize=Tt;const Ht=Ct;if(!Ht.isSupported)throw new Error("Sorry your browser not support wordCloud");x.registerLayout(function(r,s){r.eachSeriesByType("wordCloud",function(t){var n=x.helper.getLayoutRect(t.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()}),p=t.getData(),a=document.createElement("canvas");a.width=n.width,a.height=n.height;var v=a.getContext("2d"),g=t.get("maskImage");if(g)try{v.drawImage(g,0,0,a.width,a.height),function(w){for(var S=w.getContext("2d"),b=S.getImageData(0,0,w.width,w.height),O=S.createImageData(b),nt=0,at=0,c=0;c<b.data.length;c+=4)b.data[c+3]>128&&(nt+=ut=b.data[c]+b.data[c+1]+b.data[c+2],++at);var wt=nt/at;for(c=0;c<b.data.length;c+=4){var ut=b.data[c]+b.data[c+1]+b.data[c+2];b.data[c+3]<128||ut>wt?(O.data[c]=0,O.data[c+1]=0,O.data[c+2]=0,O.data[c+3]=0):(O.data[c]=255,O.data[c+1]=255,O.data[c+2]=255,O.data[c+3]=255)}S.putImageData(O,0,0)}(a)}catch(w){console.error("Invalid mask image"),console.error(w.toString())}var L=t.get("sizeRange"),M=t.get("rotationRange"),H=p.getDataExtent("value"),B=Math.PI/180,i=t.get("gridSize");function ft(w){var S=w.detail.item;w.detail.drawn&&t.layoutInstance.ondraw&&(w.detail.drawn.gx+=n.x/i,w.detail.drawn.gy+=n.y/i,t.layoutInstance.ondraw(S[0],S[1],S[2],w.detail.drawn))}Ht(a,{list:p.mapArray("value",function(w,S){var b=p.getItemModel(S);return[p.getName(S),b.get("textStyle.fontSize",!0)||x.number.linearMap(w,H,L),S]}).sort(function(w,S){return S[1]-w[1]}),fontFamily:t.get("textStyle.fontFamily")||t.get("emphasis.textStyle.fontFamily")||r.get("textStyle.fontFamily"),fontWeight:t.get("textStyle.fontWeight")||t.get("emphasis.textStyle.fontWeight")||r.get("textStyle.fontWeight"),gridSize:i,ellipticity:n.height/n.width,minRotation:M[0]*B,maxRotation:M[1]*B,clearCanvas:!g,rotateRatio:1,rotationStep:t.get("rotationStep")*B,drawOutOfBound:t.get("drawOutOfBound"),layoutAnimation:t.get("layoutAnimation"),shuffle:!1,shape:t.get("shape")}),a.addEventListener("wordclouddrawn",ft),t.layoutInstance&&t.layoutInstance.dispose(),t.layoutInstance={ondraw:null,dispose:function(){a.removeEventListener("wordclouddrawn",ft),a.addEventListener("wordclouddrawn",function(w){w.preventDefault()})}}})}),x.registerPreprocessor(function(r){var s=(r||{}).series;!x.util.isArray(s)&&(s=s?[s]:[]);var t=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function n(p){p&&x.util.each(t,function(a){p.hasOwnProperty(a)&&(p["text"+x.format.capitalFirst(a)]=p[a])})}x.util.each(s,function(p){if(p&&p.type==="wordCloud"){var a=p.textStyle||{};n(a.normal),n(a.emphasis)}})})},83:k=>{k.exports=it}},J={};function ot(k){if(J[k])return J[k].exports;var ct=J[k]={exports:{}};return $[k](ct,ct.exports,ot),ct.exports}return ot.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},ot(638)})()})})(le);export{ce as _};
